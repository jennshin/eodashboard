{"remainingRequest":"/Users/8ps/Downloads/eodash-staging/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/8ps/Downloads/eodash-staging/app/src/components/NewsCarousel.vue?vue&type=style&index=0&id=4b328003&lang=scss&scoped=true&","dependencies":[{"path":"/Users/8ps/Downloads/eodash-staging/app/src/components/NewsCarousel.vue","mtime":1624532486000},{"path":"/Users/8ps/Downloads/eodash-staging/app/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/8ps/Downloads/eodash-staging/app/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/8ps/Downloads/eodash-staging/app/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/8ps/Downloads/eodash-staging/app/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/8ps/Downloads/eodash-staging/app/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/8ps/Downloads/eodash-staging/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/8ps/Downloads/eodash-staging/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCjo6di1kZWVwIC52LXJlc3BvbnNpdmVfX2NvbnRlbnQgewogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKfQoucGxheUJ1dHRvbiB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHotaW5kZXg6IDk5OTsKfQo="},{"version":3,"sources":["NewsCarousel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NewsCarousel.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-carousel\n    v-model=\"currentSlide\"\n    continuous\n    :cycle=\"!autoPlayIframe\"\n    height=\"auto\"\n    hide-delimiter-background\n    :hide-delimiters=\"autoPlayIframe\"\n    show-arrows-on-hover\n    :style=\"`background: ${$vuetify.theme.themes.light.primary}`\"\n  >\n    <v-hover>\n      <template v-slot:default=\"{ hover }\">\n        <div>\n          <v-carousel-item\n            v-for=\"(item, i) in items\"\n            :key=\"i\"\n            :aspect-ratio=\"16/9\"\n            :src=\"item.src && item.src\"\n          >\n            <iframe\n              v-if=\"item.iframe\"\n              :src=\"iframeSrc(item.iframe)\"\n              width=\"100%\"\n              height=\"100%\"\n              allowfullscreen\n              frameborder=\"0\"\n              @click=\"autoPlayIframe = true\"\n              :class=\"!autoPlayIframe && 'untouchable'\"\n            ></iframe>\n            <v-btn\n              v-if=\"item.iframe && !autoPlayIframe\"\n              fab x-large\n              @click=\"onClickIframe(item)\"\n              color=\"primary\"\n              class=\"playButton\"\n            >\n              <v-icon>mdi-play</v-icon>\n            </v-btn>\n            <v-fade-transition>\n              <v-overlay\n                v-if=\"hover && !autoPlayIframe\"\n                absolute\n                :color=\"$vuetify.theme.themes.light.primary\"\n              >\n                <v-btn\n                  v-if=\"!item.iframe\"\n                  @click=\"onClickItem(item)\"\n                  color=\"primary\"\n                >View indicator</v-btn>\n              </v-overlay>\n            </v-fade-transition>\n          </v-carousel-item>\n        </div>\n      </template>\n    </v-hover>\n  </v-carousel>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      currentSlide: 0,\n      autoPlayIframe: false,\n      items: this.$store.state.config.appConfig.newsCarouselitems,\n    };\n  },\n  methods: {\n    onClickItem(item) {\n      const { poi } = item;\n      if (poi) {\n        const aoiId = poi.split('-')[0];\n        const indicatorCode = poi.split('-')[1];\n        const selectedFeature = this.$store.state.features.allFeatures.find((f) => {\n          const { indicatorObject } = f.properties;\n          return indicatorObject.aoiID === aoiId\n            && indicatorObject.indicator === indicatorCode;\n        });\n        this.$store.commit('indicators/SET_SELECTED_INDICATOR', selectedFeature.properties.indicatorObject);\n      }\n    },\n    onClickIframe() {\n      this.autoPlayIframe = true;\n    },\n    iframeSrc(src) {\n      let newSrc;\n      if (this.autoPlayIframe) {\n        newSrc = `${src}?autoplay=1`;\n      } else {\n        newSrc = src;\n      }\n      return newSrc;\n    },\n  },\n  watch: {\n    currentSlide() {\n      if (this.autoPlayIframe) {\n        this.autoPlayIframe = false;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep .v-responsive__content {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.playButton {\n  position: absolute;\n  z-index: 999;\n}\n</style>\n"]}]}