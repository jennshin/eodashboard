{"remainingRequest":"/Volumes/WD_Elements_25A1_Media/Google Drive/_Github/github_upload/eodashboard/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/WD_Elements_25A1_Media/Google Drive/_Github/github_upload/eodashboard/app/src/components/FeatureTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/WD_Elements_25A1_Media/Google Drive/_Github/github_upload/eodashboard/app/src/components/FeatureTable.vue","mtime":1624532486000},{"path":"/Volumes/WD_Elements_25A1_Media/Google Drive/_Github/github_upload/eodashboard/app/node_modules/cache-loader/dist/cjs.js","mtime":1624878747000},{"path":"/Volumes/WD_Elements_25A1_Media/Google Drive/_Github/github_upload/eodashboard/app/node_modules/babel-loader/lib/index.js","mtime":1624878747000},{"path":"/Volumes/WD_Elements_25A1_Media/Google Drive/_Github/github_upload/eodashboard/app/node_modules/cache-loader/dist/cjs.js","mtime":1624878747000},{"path":"/Volumes/WD_Elements_25A1_Media/Google Drive/_Github/github_upload/eodashboard/app/node_modules/vue-loader/lib/index.js","mtime":1624878753000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIFV0aWxpdGllcwppbXBvcnQgewogIG1hcEdldHRlcnMsCiAgbWFwU3RhdGUsCn0gZnJvbSAndnVleCc7CgppbXBvcnQgQ291bnRyeUZsYWcgZnJvbSAndnVlLWNvdW50cnktZmxhZyc7CgoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIENvdW50cnlGbGFnLAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoJ2ZlYXR1cmVzJywgWydnZXRHcm91cGVkRmVhdHVyZXMnXSksCiAgICAuLi5tYXBTdGF0ZSgnY29uZmlnJywgWydiYXNlQ29uZmlnJ10pLAogICAgaGVhZGVycygpIHsKICAgICAgcmV0dXJuIFsKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiAnQ291bnRyeScsCiAgICAgICAgICBhbGlnbjogJ3N0YXJ0JywKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgICAgdmFsdWU6ICdjb3VudHJ5JywKICAgICAgICB9LAogICAgICAgIHsgdGV4dDogJ0xvY2F0aW9uJywgdmFsdWU6ICdsb2NhdGlvbicgfSwKICAgICAgICB7IHRleHQ6ICdUeXBlJywgdmFsdWU6ICd0eXBlJyB9LAogICAgICAgIHsgdGV4dDogJ0luZGljYXRvcicsIHZhbHVlOiAnaW5kaWNhdG9yJyB9LAogICAgICAgIHsKICAgICAgICAgIHRleHQ6ICdWYWx1ZScsCiAgICAgICAgICBhbGlnbjogJ2VuZCcsCiAgICAgICAgICB2YWx1ZTogJ2luZGljYXRvclZhbHVlJywKICAgICAgICB9LAogICAgICBdOwogICAgfSwKICAgIGFsbEZlYXR1cmVzKCkgewogICAgICByZXR1cm4gdGhpcy5nZXRHcm91cGVkRmVhdHVyZXMubWFwKChmKSA9PiAoewogICAgICAgIGNvdW50cnk6IGYucHJvcGVydGllcy5pbmRpY2F0b3JPYmplY3QuY291bnRyeSwKICAgICAgICBsb2NhdGlvbjogZi5wcm9wZXJ0aWVzLmluZGljYXRvck9iamVjdC5jaXR5LAogICAgICAgIHR5cGU6IHRoaXMuZ2V0Q2xhc3MoZiksCiAgICAgICAgaW5kaWNhdG9yOiB0aGlzLmdldEluZGljYXRvcihmLnByb3BlcnRpZXMuaW5kaWNhdG9yT2JqZWN0KSwKICAgICAgICBpbmRpY2F0b3JWYWx1ZTogdGhpcy5nZXRJbmRpY2F0b3JMYWJlbChmLnByb3BlcnRpZXMuaW5kaWNhdG9yT2JqZWN0KSwKICAgICAgICBpbmRpY2F0b3JDb2xvcjogdGhpcy5nZXRDb2xvcihmLnByb3BlcnRpZXMuaW5kaWNhdG9yT2JqZWN0KSwKICAgICAgICBpbmRpY2F0b3JPYmplY3Q6IGYucHJvcGVydGllcy5pbmRpY2F0b3JPYmplY3QsCiAgICAgIH0pKTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBmbGF0dGVuKGFycmF5KSB7CiAgICAgIHJldHVybiBbLi4ubmV3IFNldChbYXJyYXldLmZsYXQoMSkpXTsKICAgIH0sCiAgICBnZXRDbGFzcyhpdGVtKSB7CiAgICAgIGNvbnN0IGNvZGUgPSBpdGVtLnByb3BlcnRpZXMuaW5kaWNhdG9yT2JqZWN0LmluZGljYXRvcjsKICAgICAgY29uc3QgdmFsaWRDbGFzcyA9IHR5cGVvZiB0aGlzLmJhc2VDb25maWcuaW5kaWNhdG9yc0RlZmluaXRpb25bY29kZV0gIT09ICd1bmRlZmluZWQnID8gdGhpcy5iYXNlQ29uZmlnLmluZGljYXRvcnNEZWZpbml0aW9uW2NvZGVdLmNsYXNzIDogdGhpcy5iYXNlQ29uZmlnLmluZGljYXRvcnNEZWZpbml0aW9uLmQuY2xhc3M7CiAgICAgIHJldHVybiB2YWxpZENsYXNzOwogICAgfSwKICAgIGdldEluZGljYXRvcihpbmRPYmopIHsKICAgICAgbGV0IGluZCA9IGluZE9iai5kZXNjcmlwdGlvbjsKICAgICAgaWYgKHRoaXMuYmFzZUNvbmZpZy5pbmRpY2F0b3JzRGVmaW5pdGlvbltpbmRPYmouaW5kaWNhdG9yXQogICAgICAgICYmIHRoaXMuYmFzZUNvbmZpZy5pbmRpY2F0b3JzRGVmaW5pdGlvbltpbmRPYmouaW5kaWNhdG9yXS5pbmRpY2F0b3JPdmVyd3JpdGUpIHsKICAgICAgICBpbmQgPSB0aGlzLmJhc2VDb25maWcuaW5kaWNhdG9yc0RlZmluaXRpb25baW5kT2JqLmluZGljYXRvcl0uaW5kaWNhdG9yT3ZlcndyaXRlOwogICAgICB9CiAgICAgIHJldHVybiBpbmQ7CiAgICB9LAogICAgZ2V0Q29sb3IoaW5kT2JqKSB7CiAgICAgIGxldCBjb2xvcjsKICAgICAgaWYgKGluZE9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5kT2JqLCAnbGFzdENvbG9yQ29kZScpCiAgICAgICAgICAmJiAhWycnLCAnLyddLmluY2x1ZGVzKGluZE9iai5sYXN0Q29sb3JDb2RlKSkgewogICAgICAgICAgY29sb3IgPSB0aGlzLmdldEluZGljYXRvckNvbG9yKGluZE9iai5sYXN0Q29sb3JDb2RlKTsKICAgICAgICB9CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbmRPYmosICdpbmRpY2F0b3InKQogICAgICAgICAgJiYgWydOMScsICdOMWEnLCAnTjFiJywgJ04zYicsICdFMTJiJywgJ0MxJywgJ0MyJywgJ0MzJ10uaW5jbHVkZXMoaW5kT2JqLmluZGljYXRvcikpIHsKICAgICAgICAgIGNvbG9yID0gdGhpcy5nZXRJbmRpY2F0b3JDb2xvcignQkxVRScpOwogICAgICAgICAgaWYgKGluZE9iai5hb2kgPT09IG51bGwpIHsKICAgICAgICAgICAgY29sb3IgPSAnYmxhY2snOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gY29sb3I7CiAgICB9LAogICAgZ2V0SW5kaWNhdG9yTGFiZWwocG9pKSB7CiAgICAgIGxldCB0ZXh0ID0gJ2NvbWluZyBzb29uJzsKICAgICAgaWYgKHBvaSkgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocG9pLCAnbGFzdEluZGljYXRvclZhbHVlJykKICAgICAgICAgICYmIHBvaS5sYXN0SW5kaWNhdG9yVmFsdWUgIT09ICcnKSB7CiAgICAgICAgICBjb25zdCBsYXN0VmFsdWUgPSBwb2kubGFzdEluZGljYXRvclZhbHVlOwogICAgICAgICAgaWYgKFsnRTEwYTEnLCAnRTEwYTUnLCAnRTEwYTgnXS5pbmNsdWRlcyhwb2kuaW5kaWNhdG9yKSkgewogICAgICAgICAgICBpZiAobGFzdFZhbHVlICE9PSAnJykgewogICAgICAgICAgICAgIGNvbnN0IHBlcmNWYWwgPSBOdW1iZXIoKGxhc3RWYWx1ZSAqIDEwMCkudG9QcmVjaXNpb24oNCkpOwogICAgICAgICAgICAgIGlmIChwZXJjVmFsID4gMCkgewogICAgICAgICAgICAgICAgdGV4dCA9IGArJHtwZXJjVmFsfSVgOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0ZXh0ID0gYCR7cGVyY1ZhbH0lYDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoWydFMTBhMycsICdFMTBhOCddLmluY2x1ZGVzKHBvaS5pbmRpY2F0b3IpKSB7CiAgICAgICAgICAgICAgdGV4dCA9ICdtdWx0aXBsZSc7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGV4dCA9IGxhc3RWYWx1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChbJ0UxMGEzJywgJ0UxMGE4JywgJ040YycsICdDMScsICdDMicsICdDMyddLmluY2x1ZGVzKHBvaS5pbmRpY2F0b3IpKSB7CiAgICAgICAgICAgIHRleHQgPSAnbXVsdGlwbGUnOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGV4dCA9IGxhc3RWYWx1ZTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwb2ksICdsYXN0TWVhc3VyZW1lbnQnKQogICAgICAgICAgJiYgcG9pLmxhc3RNZWFzdXJlbWVudCAhPT0gJycpIHsKICAgICAgICAgIHRleHQgPSBwb2kubGFzdE1lYXN1cmVtZW50LnRvUHJlY2lzaW9uKDQpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdGV4dDsKICAgIH0sCiAgICBpbmRpY2F0b3IoY29kZSkgewogICAgICByZXR1cm4gdGhpcy5iYXNlQ29uZmlnLmluZGljYXRvcnNEZWZpbml0aW9uW2NvZGVdOwogICAgfSwKICAgIG9wZW5GZWF0dXJlKGZlYXR1cmUpIHsKICAgICAgaWYgKCFmZWF0dXJlLmluZGljYXRvck9iamVjdC5kdW1teUZlYXR1cmUpIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoCiAgICAgICAgICAnaW5kaWNhdG9ycy9TRVRfU0VMRUNURURfSU5ESUNBVE9SJywKICAgICAgICAgIGZlYXR1cmUuaW5kaWNhdG9yT2JqZWN0LAogICAgICAgICk7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["FeatureTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FeatureTable.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-container>\n    <v-row>\n      <v-col\n        cols=\"12\"\n      >\n        <v-data-table\n          :headers=\"headers\"\n          :items=\"allFeatures\"\n          :items-per-page=\"10\"\n          :item-class=\"f => f.indicatorObject.updateFrequency\n            && f.indicatorObject.updateFrequency.toLowerCase() === 'archived' ? 'archived-row' : ''\"\n          class=\"featureTable elevation-1\"\n          @click:row=\"openFeature\"\n          multi-sort\n        >\n          <template v-slot:item.type=\"{ item }\">\n            <span class=\"text-capitalize\">\n              {{ item.type }}\n            </span>\n          </template>\n          <template v-slot:item.indicatorValue=\"{ item }\">\n            <v-chip\n              v-if=\"item.indicatorValue\"\n              :color=\"item.indicatorColor\" dark\n              class=\"text-capitalize\"\n            >\n              {{ item.indicatorValue.toLowerCase() }}\n            </v-chip>\n          </template>\n          <template v-slot:item.country=\"{ item }\">\n            <div v-if=\"Array.isArray(item.country)\" class=\"table-flag d-flex justify-center\" >\n              <span v-for=\"(country, i) in item.country\" :key=\"i\" class=\"table-flag\">\n                <v-icon v-if=\"country === 'all'\" class=\"ml-1\">mdi-earth</v-icon>\n                <country-flag v-else :country=\"country\" size=\"normal\"></country-flag>\n              </span>\n            </div>\n            <div v-else class=\"d-flex justify-center\">\n              <v-icon v-if=\"item.country === 'all'\" class=\"ml-1\">mdi-earth</v-icon>\n              <country-flag v-else :country=\"item.country\" size=\"normal\"></country-flag>\n            </div>\n          </template>\n        </v-data-table>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\n// Utilities\nimport {\n  mapGetters,\n  mapState,\n} from 'vuex';\n\nimport CountryFlag from 'vue-country-flag';\n\n\nexport default {\n  components: {\n    CountryFlag,\n  },\n  computed: {\n    ...mapGetters('features', ['getGroupedFeatures']),\n    ...mapState('config', ['baseConfig']),\n    headers() {\n      return [\n        {\n          text: 'Country',\n          align: 'start',\n          sortable: true,\n          value: 'country',\n        },\n        { text: 'Location', value: 'location' },\n        { text: 'Type', value: 'type' },\n        { text: 'Indicator', value: 'indicator' },\n        {\n          text: 'Value',\n          align: 'end',\n          value: 'indicatorValue',\n        },\n      ];\n    },\n    allFeatures() {\n      return this.getGroupedFeatures.map((f) => ({\n        country: f.properties.indicatorObject.country,\n        location: f.properties.indicatorObject.city,\n        type: this.getClass(f),\n        indicator: this.getIndicator(f.properties.indicatorObject),\n        indicatorValue: this.getIndicatorLabel(f.properties.indicatorObject),\n        indicatorColor: this.getColor(f.properties.indicatorObject),\n        indicatorObject: f.properties.indicatorObject,\n      }));\n    },\n  },\n  methods: {\n    flatten(array) {\n      return [...new Set([array].flat(1))];\n    },\n    getClass(item) {\n      const code = item.properties.indicatorObject.indicator;\n      const validClass = typeof this.baseConfig.indicatorsDefinition[code] !== 'undefined' ? this.baseConfig.indicatorsDefinition[code].class : this.baseConfig.indicatorsDefinition.d.class;\n      return validClass;\n    },\n    getIndicator(indObj) {\n      let ind = indObj.description;\n      if (this.baseConfig.indicatorsDefinition[indObj.indicator]\n        && this.baseConfig.indicatorsDefinition[indObj.indicator].indicatorOverwrite) {\n        ind = this.baseConfig.indicatorsDefinition[indObj.indicator].indicatorOverwrite;\n      }\n      return ind;\n    },\n    getColor(indObj) {\n      let color;\n      if (indObj) {\n        if (Object.prototype.hasOwnProperty.call(indObj, 'lastColorCode')\n          && !['', '/'].includes(indObj.lastColorCode)) {\n          color = this.getIndicatorColor(indObj.lastColorCode);\n        }\n        if (Object.prototype.hasOwnProperty.call(indObj, 'indicator')\n          && ['N1', 'N1a', 'N1b', 'N3b', 'E12b', 'C1', 'C2', 'C3'].includes(indObj.indicator)) {\n          color = this.getIndicatorColor('BLUE');\n          if (indObj.aoi === null) {\n            color = 'black';\n          }\n        }\n      }\n      return color;\n    },\n    getIndicatorLabel(poi) {\n      let text = 'coming soon';\n      if (poi) {\n        if (Object.prototype.hasOwnProperty.call(poi, 'lastIndicatorValue')\n          && poi.lastIndicatorValue !== '') {\n          const lastValue = poi.lastIndicatorValue;\n          if (['E10a1', 'E10a5', 'E10a8'].includes(poi.indicator)) {\n            if (lastValue !== '') {\n              const percVal = Number((lastValue * 100).toPrecision(4));\n              if (percVal > 0) {\n                text = `+${percVal}%`;\n              } else {\n                text = `${percVal}%`;\n              }\n            } else if (['E10a3', 'E10a8'].includes(poi.indicator)) {\n              text = 'multiple';\n            } else {\n              text = lastValue;\n            }\n          } else if (['E10a3', 'E10a8', 'N4c', 'C1', 'C2', 'C3'].includes(poi.indicator)) {\n            text = 'multiple';\n          } else {\n            text = lastValue;\n          }\n        } else if (Object.prototype.hasOwnProperty.call(poi, 'lastMeasurement')\n          && poi.lastMeasurement !== '') {\n          text = poi.lastMeasurement.toPrecision(4);\n        }\n      }\n      return text;\n    },\n    indicator(code) {\n      return this.baseConfig.indicatorsDefinition[code];\n    },\n    openFeature(feature) {\n      if (!feature.indicatorObject.dummyFeature) {\n        this.$store.commit(\n          'indicators/SET_SELECTED_INDICATOR',\n          feature.indicatorObject,\n        );\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.featureTable {\n  ::v-deep tr {\n    cursor: pointer;\n  }\n\n  ::v-deep .archived-row td {\n    opacity: 0.65;\n  }\n}\n\n.table-flag-list {\n  .table-flag:not(:last-child) {\n    margin-right: .3rem;\n  }\n}\n</style>\n"]}]}