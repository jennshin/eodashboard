{"remainingRequest":"/Volumes/WD_Elements_25A1_Media/Google Drive/___Public/__2021-Hackathon-EOD/eodash-staging/app/node_modules/babel-loader/lib/index.js!/Volumes/WD_Elements_25A1_Media/Google Drive/___Public/__2021-Hackathon-EOD/eodash-staging/app/node_modules/eslint-loader/index.js??ref--13-0!/Volumes/WD_Elements_25A1_Media/Google Drive/___Public/__2021-Hackathon-EOD/eodash-staging/app/src/store/modules/features.js","dependencies":[{"path":"/Volumes/WD_Elements_25A1_Media/Google Drive/___Public/__2021-Hackathon-EOD/eodash-staging/app/src/store/modules/features.js","mtime":1624532486000},{"path":"/Volumes/WD_Elements_25A1_Media/Google Drive/___Public/__2021-Hackathon-EOD/eodash-staging/app/node_modules/cache-loader/dist/cjs.js","mtime":1624878747000},{"path":"/Volumes/WD_Elements_25A1_Media/Google Drive/___Public/__2021-Hackathon-EOD/eodash-staging/app/node_modules/babel-loader/lib/index.js","mtime":1624878747000},{"path":"/Volumes/WD_Elements_25A1_Media/Google Drive/___Public/__2021-Hackathon-EOD/eodash-staging/app/node_modules/eslint-loader/index.js","mtime":1624878752000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Wb2x1bWVzL1dEX0VsZW1lbnRzXzI1QTFfTWVkaWEvR29vZ2xlIERyaXZlL19fX1B1YmxpYy9fXzIwMjEtSGFja2F0aG9uLUVPRC9lb2Rhc2gtc3RhZ2luZy9hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1ZvbHVtZXMvV0RfRWxlbWVudHNfMjVBMV9NZWRpYS9Hb29nbGUgRHJpdmUvX19fUHVibGljL19fMjAyMS1IYWNrYXRob24tRU9EL2VvZGFzaC1zdGFnaW5nL2FwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL1ZvbHVtZXMvV0RfRWxlbWVudHNfMjVBMV9NZWRpYS9Hb29nbGUgRHJpdmUvX19fUHVibGljL19fMjAyMS1IYWNrYXRob24tRU9EL2VvZGFzaC1zdGFnaW5nL2FwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZsYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5lbnRyaWVzLmpzIjsKCi8qIGVzbGludCBuby1zaGFkb3c6IFsiZXJyb3IiLCB7ICJhbGxvdyI6IFsic3RhdGUiLCAiZ2V0dGVycyJdIH1dICovCmltcG9ydCB7IFdrdCB9IGZyb20gJ3dpY2tldCc7CmltcG9ydCB7IGxhdExuZyB9IGZyb20gJ2xlYWZsZXQnOwppbXBvcnQgY291bnRyaWVzSnNvbiBmcm9tICdAL2Fzc2V0cy9jb3VudHJpZXMuanNvbic7CnZhciBnbG9iYWxJZENvdW50ZXIgPSAwOwp2YXIgc3RhdGUgPSB7CiAgYWxsRmVhdHVyZXM6IFtdLAogIGZlYXR1cmVGaWx0ZXJzOiB7CiAgICBjb3VudHJpZXM6IFtdLAogICAgaW5kaWNhdG9yczogW10sCiAgICBpbmNsdWRlQXJjaGl2ZWQ6IGZhbHNlCiAgfSwKICBzZWxlY3RlZEFyZWE6IG51bGwsCiAgcmVzdWx0c0NvdW50OiB7CiAgICBlY29ub21pYzogMCwKICAgIGFncmljdWx0dXJlOiAwLAogICAgZW52aXJvbm1lbnQ6IDAKICB9Cn07CnZhciBnZXR0ZXJzID0gewogIGdldENvdW50cmllczogZnVuY3Rpb24gZ2V0Q291bnRyaWVzKHN0YXRlKSB7CiAgICByZXR1cm4gX3RvQ29uc3VtYWJsZUFycmF5KG5ldyBTZXQoW3N0YXRlLmFsbEZlYXR1cmVzLmZpbHRlcihmdW5jdGlvbiAoZikgewogICAgICByZXR1cm4gc3RhdGUuZmVhdHVyZUZpbHRlcnMuaW5kaWNhdG9ycy5sZW5ndGggPiAwID8gc3RhdGUuZmVhdHVyZUZpbHRlcnMuaW5kaWNhdG9ycy5pbmNsdWRlcyhmLnByb3BlcnRpZXMuaW5kaWNhdG9yT2JqZWN0LmluZGljYXRvcikgOiB0cnVlOwogICAgfSkubWFwKGZ1bmN0aW9uIChmKSB7CiAgICAgIHJldHVybiBmLnByb3BlcnRpZXMuaW5kaWNhdG9yT2JqZWN0LmNvdW50cnk7CiAgICB9KV0uZmxhdCgyKSkpLnNvcnQoKTsKICB9LAogIGdldEluZGljYXRvcnM6IGZ1bmN0aW9uIGdldEluZGljYXRvcnMoc3RhdGUsIF8sIHJvb3RTdGF0ZSkgewogICAgdmFyIGluZGljYXRvcnMgPSBfdG9Db25zdW1hYmxlQXJyYXkobmV3IFNldChbc3RhdGUuYWxsRmVhdHVyZXMuZmlsdGVyKGZ1bmN0aW9uIChmKSB7CiAgICAgIHZhciBmaWx0ZXJlZDsKCiAgICAgIGlmIChzdGF0ZS5mZWF0dXJlRmlsdGVycy5jb3VudHJpZXMubGVuZ3RoID4gMCkgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGYucHJvcGVydGllcy5pbmRpY2F0b3JPYmplY3QuY291bnRyeSkpIHsKICAgICAgICAgIGZpbHRlcmVkID0gZi5wcm9wZXJ0aWVzLmluZGljYXRvck9iamVjdC5jb3VudHJ5LnNvbWUoZnVuY3Rpb24gKGkpIHsKICAgICAgICAgICAgcmV0dXJuIHN0YXRlLmZlYXR1cmVGaWx0ZXJzLmNvdW50cmllcy5pbmNsdWRlcyhpKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmaWx0ZXJlZCA9IHN0YXRlLmZlYXR1cmVGaWx0ZXJzLmNvdW50cmllcy5pbmNsdWRlcyhmLnByb3BlcnRpZXMuaW5kaWNhdG9yT2JqZWN0LmNvdW50cnkpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICghc3RhdGUuZmVhdHVyZUZpbHRlcnMuaW5jbHVkZUFyY2hpdmVkKSB7CiAgICAgICAgZmlsdGVyZWQgPSBmLnByb3BlcnRpZXMuaW5kaWNhdG9yT2JqZWN0LmRlc2NyaXB0aW9uICYmICFmLnByb3BlcnRpZXMuaW5kaWNhdG9yT2JqZWN0LmRlc2NyaXB0aW9uLmluY2x1ZGVzKCcoYXJjaGl2ZWQpJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmlsdGVyZWQgPSB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmlsdGVyZWQ7CiAgICB9KS5tYXAoZnVuY3Rpb24gKGYpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBhcmNoaXZlZDogZi5wcm9wZXJ0aWVzLmluZGljYXRvck9iamVjdC5kZXNjcmlwdGlvbiAmJiBmLnByb3BlcnRpZXMuaW5kaWNhdG9yT2JqZWN0LmRlc2NyaXB0aW9uLmluY2x1ZGVzKCcoYXJjaGl2ZWQpJyksCiAgICAgICAgY29kZTogZi5wcm9wZXJ0aWVzLmluZGljYXRvck9iamVjdC5pbmRpY2F0b3IsCiAgICAgICAgaW5kaWNhdG9yOiBmLnByb3BlcnRpZXMuaW5kaWNhdG9yT2JqZWN0LmRlc2NyaXB0aW9uLAogICAgICAgIGNsYXNzOiByb290U3RhdGUuY29uZmlnLmJhc2VDb25maWcuaW5kaWNhdG9yc0RlZmluaXRpb25bZi5wcm9wZXJ0aWVzLmluZGljYXRvck9iamVjdC5pbmRpY2F0b3JdLmNsYXNzLAogICAgICAgIGluZGljYXRvck92ZXJ3cml0ZTogcm9vdFN0YXRlLmNvbmZpZy5iYXNlQ29uZmlnLmluZGljYXRvcnNEZWZpbml0aW9uW2YucHJvcGVydGllcy5pbmRpY2F0b3JPYmplY3QuaW5kaWNhdG9yXS5pbmRpY2F0b3JPdmVyd3JpdGUKICAgICAgfTsKICAgIH0pXS5mbGF0KDIpKSkuc29ydCgpOwoKICAgIHJldHVybiBpbmRpY2F0b3JzOwogIH0sCiAgZ2V0Q291bnRyeUl0ZW1zOiBmdW5jdGlvbiBnZXRDb3VudHJ5SXRlbXMoc3RhdGUsIGdldHRlcnNHKSB7CiAgICByZXR1cm4gZ2V0dGVyc0cuZ2V0Q291bnRyaWVzLmZpbHRlcihmdW5jdGlvbiAoYykgewogICAgICByZXR1cm4gYyAhPT0gJ2FsbCc7CiAgICB9KS5tYXAoZnVuY3Rpb24gKGMpIHsKICAgICAgdmFyIGl0ZW0gPSBjb3VudHJpZXNKc29uLmZlYXR1cmVzLmZpbmQoZnVuY3Rpb24gKGYpIHsKICAgICAgICByZXR1cm4gZi5wcm9wZXJ0aWVzLmFscGhhMiA9PT0gYzsKICAgICAgfSk7CiAgICAgIHJldHVybiB7CiAgICAgICAgY29kZTogYywKICAgICAgICBuYW1lOiBpdGVtID8gaXRlbS5wcm9wZXJ0aWVzLm5hbWUgOiAnUmVnaW9uYWwnCiAgICAgIH07CiAgICB9KS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgIHJldHVybiBhLm5hbWUgPiBiLm5hbWUgPyAxIDogLTE7CiAgICB9KTsKICB9LAogIGdldEZlYXR1cmVzOiBmdW5jdGlvbiBnZXRGZWF0dXJlcyhzdGF0ZSkgewogICAgdmFyIGZlYXR1cmVzID0gc3RhdGUuYWxsRmVhdHVyZXM7CgogICAgaWYgKHN0YXRlLmZlYXR1cmVGaWx0ZXJzLmNvdW50cmllcy5sZW5ndGggPiAwKSB7CiAgICAgIGZlYXR1cmVzID0gZmVhdHVyZXMuZmlsdGVyKGZ1bmN0aW9uIChmKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZi5wcm9wZXJ0aWVzLmluZGljYXRvck9iamVjdC5jb3VudHJ5KSkgewogICAgICAgICAgcmV0dXJuIGYucHJvcGVydGllcy5pbmRpY2F0b3JPYmplY3QuY291bnRyeS5pbmNsdWRlcyhzdGF0ZS5mZWF0dXJlRmlsdGVycy5jb3VudHJpZXMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICAgICAgICByZXR1cm4gc3RhdGUuZmVhdHVyZUZpbHRlcnMuY291bnRyaWVzLmluY2x1ZGVzKGYucHJvcGVydGllcy5pbmRpY2F0b3JPYmplY3QuY291bnRyeSkgfHwgZi5wcm9wZXJ0aWVzLmluZGljYXRvck9iamVjdC5jaXR5ID09PSAnV29ybGQnOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgaWYgKHN0YXRlLmZlYXR1cmVGaWx0ZXJzLmluZGljYXRvcnMubGVuZ3RoID4gMCkgewogICAgICBmZWF0dXJlcyA9IGZlYXR1cmVzLmZpbHRlcihmdW5jdGlvbiAoZikgewogICAgICAgIHJldHVybiBzdGF0ZS5mZWF0dXJlRmlsdGVycy5pbmRpY2F0b3JzLmluY2x1ZGVzKGYucHJvcGVydGllcy5pbmRpY2F0b3JPYmplY3QuaW5kaWNhdG9yKTsKICAgICAgfSk7CiAgICB9CgogICAgaWYgKCFzdGF0ZS5mZWF0dXJlRmlsdGVycy5pbmNsdWRlQXJjaGl2ZWQpIHsKICAgICAgZmVhdHVyZXMgPSBmZWF0dXJlcy5maWx0ZXIoZnVuY3Rpb24gKGYpIHsKICAgICAgICByZXR1cm4gZi5wcm9wZXJ0aWVzLmluZGljYXRvck9iamVjdC51cGRhdGVGcmVxdWVuY3kgPyBmLnByb3BlcnRpZXMuaW5kaWNhdG9yT2JqZWN0LnVwZGF0ZUZyZXF1ZW5jeS50b0xvd2VyQ2FzZSgpICE9PSAnYXJjaGl2ZWQnIDogdHJ1ZTsKICAgICAgfSk7CiAgICB9CgogICAgZmVhdHVyZXMgPSBmZWF0dXJlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgIHJldHVybiBhLnByb3BlcnRpZXMuaW5kaWNhdG9yT2JqZWN0LmNvdW50cnkgPiBiLnByb3BlcnRpZXMuaW5kaWNhdG9yT2JqZWN0LmNvdW50cnkgPyAxIDogLTE7CiAgICB9KTsKICAgIHJldHVybiBmZWF0dXJlczsKICB9LAogIGdldEdyb3VwZWRGZWF0dXJlczogZnVuY3Rpb24gZ2V0R3JvdXBlZEZlYXR1cmVzKHN0YXRlLCBnZXR0ZXJzLCByb290U3RhdGUpIHsKICAgIHZhciBhbGxGZWF0dXJlcyA9IFtdOwoKICAgIGlmIChzdGF0ZS5hbGxGZWF0dXJlcy5sZW5ndGggPiAwKSB7CiAgICAgIHZhciBncm91cGVkRmVhdHVyZXMgPSBbXTsKCiAgICAgIGlmIChyb290U3RhdGUuY29uZmlnLmFwcENvbmZpZy5mZWF0dXJlR3JvdXBpbmcpIHsKICAgICAgICByb290U3RhdGUuY29uZmlnLmFwcENvbmZpZy5mZWF0dXJlR3JvdXBpbmcuZm9yRWFjaChmdW5jdGlvbiAoZkcpIHsKICAgICAgICAgIHZhciBmaXJzdEZlYXR1cmUgPSBnZXR0ZXJzLmdldEZlYXR1cmVzLmZpbmQoZnVuY3Rpb24gKGYpIHsKICAgICAgICAgICAgcmV0dXJuICIiLmNvbmNhdChmLnByb3BlcnRpZXMuaW5kaWNhdG9yT2JqZWN0LmFvaUlELCAiLSIpLmNvbmNhdChmLnByb3BlcnRpZXMuaW5kaWNhdG9yT2JqZWN0LmluZGljYXRvcikgPT09IGZHLmZlYXR1cmVzWzBdOwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKGZpcnN0RmVhdHVyZSkgewogICAgICAgICAgICBncm91cGVkRmVhdHVyZXMucHVzaChmaXJzdEZlYXR1cmUpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICB2YXIgcmVzdEZlYXR1cmVzID0gcm9vdFN0YXRlLmNvbmZpZy5hcHBDb25maWcuZmVhdHVyZUdyb3VwaW5nID8gZ2V0dGVycy5nZXRGZWF0dXJlcy5maWx0ZXIoZnVuY3Rpb24gKGYpIHsKICAgICAgICB2YXIgbG9jYXRpb25Db2RlID0gIiIuY29uY2F0KGYucHJvcGVydGllcy5pbmRpY2F0b3JPYmplY3QuYW9pSUQsICItIikuY29uY2F0KGYucHJvcGVydGllcy5pbmRpY2F0b3JPYmplY3QuaW5kaWNhdG9yKTsKICAgICAgICByZXR1cm4gIXJvb3RTdGF0ZS5jb25maWcuYXBwQ29uZmlnLmZlYXR1cmVHcm91cGluZy5maW5kKGZ1bmN0aW9uIChmRykgewogICAgICAgICAgcmV0dXJuIGZHLmZlYXR1cmVzLmluY2x1ZGVzKGxvY2F0aW9uQ29kZSk7CiAgICAgICAgfSk7CiAgICAgIH0pIDogZ2V0dGVycy5nZXRGZWF0dXJlczsKICAgICAgYWxsRmVhdHVyZXMgPSBncm91cGVkRmVhdHVyZXMuY29uY2F0KHJlc3RGZWF0dXJlcyk7CiAgICB9CgogICAgcmV0dXJuIGFsbEZlYXR1cmVzOwogIH0sCiAgZ2V0TGF0ZXN0VXBkYXRlOiBmdW5jdGlvbiBnZXRMYXRlc3RVcGRhdGUoc3RhdGUpIHsKICAgIHZhciB0aW1lcyA9IHN0YXRlLmFsbEZlYXR1cmVzLm1hcChmdW5jdGlvbiAoZikgewogICAgICB2YXIgdGltZSA9IGYucHJvcGVydGllcy5pbmRpY2F0b3JPYmplY3QuVGltZTsKICAgICAgdmFyIGxhdGVzdDsKCiAgICAgIGlmICh0aW1lICYmIHRpbWUubGVuZ3RoID4gMCkgewogICAgICAgIHRpbWUgPSB0aW1lLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgIHJldHVybiBhID4gYiA/IDEgOiAtMTsKICAgICAgICB9KTsKICAgICAgICBsYXRlc3QgPSB0aW1lW3RpbWUubGVuZ3RoIC0gMV07CiAgICAgIH0KCiAgICAgIHJldHVybiBsYXRlc3Q7CiAgICB9KTsKICAgIHZhciBmaWx0ZXJlZCA9IHRpbWVzLmZpbHRlcihmdW5jdGlvbiAodCkgewogICAgICByZXR1cm4gISF0OwogICAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICByZXR1cm4gYSA+IGIgPyAxIDogLTE7CiAgICB9KTsKICAgIHJldHVybiBmaWx0ZXJlZFtmaWx0ZXJlZC5sZW5ndGggLSAxXTsKICB9Cn07CnZhciBtdXRhdGlvbnMgPSB7CiAgLy8gU0VUX01BTlVBTF9GRUFUVVJFUyhzdGF0ZSwgZmVhdHVyZXMpIHsKICAvLyAgIHN0YXRlLmFsbEZlYXR1cmVzID0gc3RhdGUuYWxsRmVhdHVyZXMuY29uY2F0KAogIC8vICAgICBmZWF0dXJlcywKICAvLyAgICAgdGhpcy5zdGF0ZS5jb25maWcuYmFzZUNvbmZpZy5nbG9iYWxJbmRpY2F0b3JzLAogIC8vICAgKTsKICAvLyB9LAogIEFERF9ORVdfRkVBVFVSRVM6IGZ1bmN0aW9uIEFERF9ORVdfRkVBVFVSRVMoc3RhdGUsIGZlYXR1cmVzKSB7CiAgICBzdGF0ZS5hbGxGZWF0dXJlcyA9IHN0YXRlLmFsbEZlYXR1cmVzLmNvbmNhdChmZWF0dXJlcyk7CiAgfSwKICAvLyBTRVRfQUxMX0RVTU1ZX0xPQ0FUSU9OUyhzdGF0ZSwgZmVhdHVyZXMpIHsKICAvLyAgIHN0YXRlLmFsbEZlYXR1cmVzID0gc3RhdGUuYWxsRmVhdHVyZXMuY29uY2F0KGZlYXR1cmVzKTsKICAvLyB9LAogIElOSVRfRkVBVFVSRV9GSUxURVI6IGZ1bmN0aW9uIElOSVRfRkVBVFVSRV9GSUxURVIoc3RhdGUsIF9yZWYpIHsKICAgIHZhciBjb3VudHJpZXMgPSBfcmVmLmNvdW50cmllcywKICAgICAgICBpbmRpY2F0b3JzID0gX3JlZi5pbmRpY2F0b3JzOwoKICAgIGlmIChjb3VudHJpZXMpIHsKICAgICAgc3RhdGUuZmVhdHVyZUZpbHRlcnMuY291bnRyaWVzID0gY291bnRyaWVzOwogICAgfQoKICAgIGlmIChpbmRpY2F0b3JzKSB7CiAgICAgIHN0YXRlLmZlYXR1cmVGaWx0ZXJzLmluZGljYXRvcnMgPSBpbmRpY2F0b3JzOwogICAgfQogIH0sCiAgU0VUX0ZFQVRVUkVfRklMVEVSOiBmdW5jdGlvbiBTRVRfRkVBVFVSRV9GSUxURVIoc3RhdGUsIG9wdGlvbnMpIHsKICAgIGlmICghb3B0aW9ucykgcmV0dXJuOwoKICAgIHZhciBoYXNGZWF0dXJlID0gZnVuY3Rpb24gaGFzRmVhdHVyZShmKSB7CiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhvcHRpb25zKS5pbmNsdWRlcyhmKTsKICAgIH07CgogICAgaWYgKGhhc0ZlYXR1cmUoJ2NvdW50cmllcycpKSB7CiAgICAgIHN0YXRlLmZlYXR1cmVGaWx0ZXJzLmNvdW50cmllcyA9IG9wdGlvbnMuY291bnRyaWVzOwogICAgfQoKICAgIGlmIChoYXNGZWF0dXJlKCdpbmRpY2F0b3JzJykpIHsKICAgICAgc3RhdGUuZmVhdHVyZUZpbHRlcnMuaW5kaWNhdG9ycyA9IG9wdGlvbnMuaW5kaWNhdG9yczsKICAgIH0KCiAgICBpZiAoaGFzRmVhdHVyZSgnaW5jbHVkZUFyY2hpdmVkJykpIHsKICAgICAgc3RhdGUuZmVhdHVyZUZpbHRlcnMuaW5jbHVkZUFyY2hpdmVkID0gb3B0aW9ucy5pbmNsdWRlQXJjaGl2ZWQ7CiAgICB9CiAgfSwKICBBRERfUkVTVUxUU19DT1VOVDogZnVuY3Rpb24gQUREX1JFU1VMVFNfQ09VTlQoc3RhdGUsIF9yZWYyKSB7CiAgICB2YXIgdHlwZSA9IF9yZWYyLnR5cGUsCiAgICAgICAgY291bnQgPSBfcmVmMi5jb3VudDsKICAgIHN0YXRlLnJlc3VsdHNDb3VudFt0eXBlXSArPSBjb3VudDsKICB9LAogIFNFVF9TRUxFQ1RFRF9BUkVBOiBmdW5jdGlvbiBTRVRfU0VMRUNURURfQVJFQShzdGF0ZSwgYXJlYSkgewogICAgc3RhdGUuc2VsZWN0ZWRBcmVhID0gYXJlYTsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIGxvYWRBbGxFbmRwb2ludHM6IGZ1bmN0aW9uIGxvYWRBbGxFbmRwb2ludHMoX3JlZjMpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGNvbW1pdCwgcm9vdFN0YXRlLCBhbGxGZWF0dXJlcywgZW5kcG9pbnRzLCBlcCwgdXJsLCBGLCBlbmRQb2ludElkeCwgZHVtbXlGZWF0dXJlczsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwgcm9vdFN0YXRlID0gX3JlZjMucm9vdFN0YXRlOwogICAgICAgICAgICAgIGFsbEZlYXR1cmVzID0gW107CiAgICAgICAgICAgICAgZW5kcG9pbnRzID0gcm9vdFN0YXRlLmNvbmZpZy5iYXNlQ29uZmlnLmRhdGFFbmRwb2ludHM7CiAgICAgICAgICAgICAgZXAgPSAwOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGlmICghKGVwIDwgZW5kcG9pbnRzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZW5kcG9pbnRzW2VwXSwgJ3R5cGUnKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB1cmwgPSBlbmRwb2ludHNbZXBdLnByb3ZpZGVyOwoKICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGVuZHBvaW50c1tlcF0sICdsb2NhdGlvblN1ZmZpeCcpKSB7CiAgICAgICAgICAgICAgICB1cmwgKz0gZW5kcG9pbnRzW2VwXS5sb2NhdGlvblN1ZmZpeDsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIEYgPSB2b2lkIDA7CiAgICAgICAgICAgICAgZW5kUG9pbnRJZHggPSBlcDsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IGVuZHBvaW50c1tlcF0udHlwZTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gX2NvbnRleHQudDAgPT09ICdnZW9kYicgPyAxMyA6IF9jb250ZXh0LnQwID09PSAnZW94JyA/IDE3IDogMjE7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZGlzcGF0Y2goIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICAgICAgICAnZmVhdHVyZXMvbG9hZEdlb0RCRW5kcG9pbnQnLCB7CiAgICAgICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgICAgIGVuZFBvaW50SWR4OiBlbmRQb2ludElkeAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBGID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJicmVhayIsIDIyKTsKCiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE5OwogICAgICAgICAgICAgIHJldHVybiBfdGhpcy5kaXNwYXRjaCggLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgICAgICAgICAgICdmZWF0dXJlcy9sb2FkRU9YRW5kcG9pbnQnLCB7CiAgICAgICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgICAgIGVuZFBvaW50SWR4OiBlbmRQb2ludElkeAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICBGID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJicmVhayIsIDIyKTsKCiAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0VuZHBvaW50IHR5cGUgdW5rbm93bicpOwoKICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICBhbGxGZWF0dXJlcyA9IGFsbEZlYXR1cmVzLmNvbmNhdChGKTsKCiAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgZXAgKz0gMTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgLy8gVGhlbiwgYWRkIHRoZSBoYXJkY29kZWQgZmVhdHVyZXMKICAgICAgICAgICAgICBhbGxGZWF0dXJlcyA9IGFsbEZlYXR1cmVzLmNvbmNhdChyb290U3RhdGUuY29uZmlnLmJhc2VDb25maWcuZ2xvYmFsSW5kaWNhdG9ycyk7IC8vIFRoZW4sIGlmIGFwcGxpY2FibGUsIGFkZCB0aGUgZHVtbXkgZmVhdHVyZXMKCiAgICAgICAgICAgICAgaWYgKCFyb290U3RhdGUuY29uZmlnLmFwcENvbmZpZy5kaXNwbGF5RHVtbXlMb2NhdGlvbnMpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDMwOwogICAgICAgICAgICAgIHJldHVybiBfdGhpcy5kaXNwYXRjaCgnZmVhdHVyZXMvbG9hZER1bW15TG9jYXRpb25zJyk7CgogICAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICAgIGR1bW15RmVhdHVyZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGFsbEZlYXR1cmVzID0gYWxsRmVhdHVyZXMuY29uY2F0KGR1bW15RmVhdHVyZXMpOwoKICAgICAgICAgICAgY2FzZSAzMjoKICAgICAgICAgICAgICBjb21taXQoJ0FERF9ORVdfRkVBVFVSRVMnLCBhbGxGZWF0dXJlcyk7CgogICAgICAgICAgICBjYXNlIDMzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgbG9hZEVPWEVuZHBvaW50OiBmdW5jdGlvbiBsb2FkRU9YRW5kcG9pbnQoX3JlZjQsIF9yZWY1KSB7CiAgICB2YXIgcm9vdFN0YXRlID0gX3JlZjQucm9vdFN0YXRlLAogICAgICAgIGNvbW1pdCA9IF9yZWY0LmNvbW1pdDsKICAgIHZhciB1cmwgPSBfcmVmNS51cmwsCiAgICAgICAgZW5kUG9pbnRJZHggPSBfcmVmNS5lbmRQb2ludElkeDsKICAgIHJldHVybiBmZXRjaCh1cmwsIHsKICAgICAgY3JlZGVudGlhbHM6ICdzYW1lLW9yaWdpbicKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHIpIHsKICAgICAgcmV0dXJuIHIuanNvbigpOwogICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICB2YXIgZmVhdHVyZXMgPSBbXTsKICAgICAgdmFyIHBNID0gewogICAgICAgIGFvaTogJ2FvaScsCiAgICAgICAgYW9pSUQ6ICdhb2lJRCcsCiAgICAgICAgbGFzdENvbG9yQ29kZTogJ2xhc3RDb2xvckNvZGUnLAogICAgICAgIGNvdW50cnk6ICdjb3VudHJ5JywKICAgICAgICBpbmRpY2F0b3I6ICdpbmRpY2F0b3InLAogICAgICAgIGxhc3RJbmRpY2F0b3JWYWx1ZTogJ2xhc3RJbmRpY2F0b3JWYWx1ZScsCiAgICAgICAgbGFzdFRpbWU6ICdsYXN0VGltZScsCiAgICAgICAgbGFzdE1lYXN1cmVtZW50OiAnbGFzdE1lYXN1cmVtZW50JywKICAgICAgICBzaXRlTmFtZTogJ3NpdGVOYW1lJywKICAgICAgICBzdWJBb2k6ICdzdWJBb2knLAogICAgICAgIGNpdHk6ICdjaXR5JywKICAgICAgICBkZXNjcmlwdGlvbjogJ2Rlc2NyaXB0aW9uJywKICAgICAgICByZWdpb246ICdyZWdpb24nLAogICAgICAgIGluZGljYXRvck5hbWU6ICdpbmRpY2F0b3JOYW1lJywKICAgICAgICBsYXN0UmVmZXJlbmNlVmFsdWU6ICdsYXN0UmVmZXJlbmNlVmFsdWUnLAogICAgICAgIGxhc3RSZWZlcmVuY2VUaW1lOiAnbGFzdFJlZmVyZW5jZVRpbWUnLAogICAgICAgIHlBeGlzOiAneUF4aXMnLAogICAgICAgIHVwZGF0ZUZyZXF1ZW5jeTogJ3VwZGF0ZUZyZXF1ZW5jeScKICAgICAgfTsKICAgICAgY29tbWl0KCdBRERfUkVTVUxUU19DT1VOVCcsIHsKICAgICAgICB0eXBlOiByb290U3RhdGUuY29uZmlnLmJhc2VDb25maWcuaW5kaWNhdG9yc0RlZmluaXRpb25bZGF0YVswXVtwTS5pbmRpY2F0b3JdXS5jbGFzcywKICAgICAgICBjb3VudDogZGF0YS5sZW5ndGggLy8gaW5kaXZpZHVhbCBtZWFzdXJlbWVudHMKCiAgICAgIH0pOyAvLyBvbmx5IGNvbnRpbnVlIGlmIGFvaSBjb2x1bW4gaXMgcHJlc2VudAoKICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkYXRhWzBdLCBwTS5hb2kpKSB7CiAgICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciB3a3QgPSBuZXcgV2t0KCk7CiAgICAgICAgICB2YXIgZmVhdHVyZU9ianMgPSB7fTsKCiAgICAgICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChycikgewogICAgICAgICAgICAvLyBBZ2dyZWdhdGUgZGF0YSBiYXNlZCBvbiBsb2NhdGlvbgogICAgICAgICAgICB2YXIgdW5pcXVlS2V5ID0gIiIuY29uY2F0KGRhdGFbcnJdW3BNLmFvaV0sICJfIikuY29uY2F0KGRhdGFbcnJdW3BNLmluZGljYXRvcl0pOwoKICAgICAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZmVhdHVyZU9ianMsIHVuaXF1ZUtleSkpIHsKICAgICAgICAgICAgICBmZWF0dXJlT2Jqc1t1bmlxdWVLZXldID0ge307CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gVGhpcyBzaG91bGQgbm90IGhhcHBlbgogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJXQVJOSU5HOiBEdXBsaWNhdGUgdW5pcXVlS2V5ICIuY29uY2F0KHVuaXF1ZUtleSwgIiBpbiByZXRyaWV2ZWQgZGF0YS4iKSk7CiAgICAgICAgICAgIH0gLy8gQ3JlYXRlIG5ldyBvYmplY3Qgd2l0aCBtYXBwZWQga2V5cyB0byBhbGxvdyBpbnRlZ3JhdGluZyBkYXRhCiAgICAgICAgICAgIC8vIG9mIG11bHRpcGxlIGVuZHBvaW50cwoKCiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHBNKS5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmNikgewogICAgICAgICAgICAgIHZhciBfcmVmNyA9IF9zbGljZWRUb0FycmF5KF9yZWY2LCAyKSwKICAgICAgICAgICAgICAgICAga2V5ID0gX3JlZjdbMF0sCiAgICAgICAgICAgICAgICAgIHZhbHVlID0gX3JlZjdbMV07CgogICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YVtycl0sIHZhbHVlKSkgewogICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ3N1YkFvaScpIHsKICAgICAgICAgICAgICAgICAgLy8gZHVtbXkgZW1wdHkgZ2VvbWV0cnkKICAgICAgICAgICAgICAgICAgdmFyIGZ0cnMgPSBbXTsKCiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgLy8gYXNzdW1pbmcgc3ViLWFvaSBkb2VzIG5vdCBjaGFuZ2Ugb3ZlciB0aW1lCiAgICAgICAgICAgICAgICAgICAgaWYgKCFbJycsICcvJ10uaW5jbHVkZXMoZGF0YVtycl1bdmFsdWVdKSkgewogICAgICAgICAgICAgICAgICAgICAgd2t0LnJlYWQoZGF0YVtycl1bdmFsdWVdKTsKICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uR2VvbSA9IHdrdC50b0pzb24oKTsgLy8gY3JlYXRlIGEgZmVhdHVyZSBjb2xsZWN0aW9uCgogICAgICAgICAgICAgICAgICAgICAgZnRycyA9IFt7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJywKICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge30sCiAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5OiBqc29uR2VvbQogICAgICAgICAgICAgICAgICAgICAgfV07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRXJyb3IgcGFyc2luZyBzdWJBb2kgb2YgbG9jYXRpb25zIGZvciBpbmRleCAiLmNvbmNhdChycikpOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB2YXIgZnRyQ29sID0gewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsCiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXM6IGZ0cnMKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgZmVhdHVyZU9ianNbdW5pcXVlS2V5XVtrZXldID0gZnRyQ29sOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdsYXN0TWVhc3VyZW1lbnQnKSB7CiAgICAgICAgICAgICAgICAgIGZlYXR1cmVPYmpzW3VuaXF1ZUtleV1ba2V5XSA9IGRhdGFbcnJdW3ZhbHVlXS5sZW5ndGggIT09IDAgPyBOdW1iZXIoZGF0YVtycl1bdmFsdWVdKSA6IE5hTjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGZlYXR1cmVPYmpzW3VuaXF1ZUtleV1ba2V5XSA9IGRhdGFbcnJdW3ZhbHVlXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKCiAgICAgICAgICBmb3IgKHZhciByciA9IDA7IHJyIDwgZGF0YS5sZW5ndGg7IHJyICs9IDEpIHsKICAgICAgICAgICAgX2xvb3AocnIpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZmVhdHVyZU9ianMpOwoKICAgICAgICAgIGZvciAodmFyIGtrID0gMDsga2sgPCBrZXlzLmxlbmd0aDsga2sgKz0gMSkgewogICAgICAgICAgICB2YXIgY29vcmRzID0ga2V5c1tra10uc3BsaXQoJ18nKVswXS5yZXBsYWNlKCcgJywgJycpLnNwbGl0KCcsJykubWFwKE51bWJlcik7CiAgICAgICAgICAgIGZlYXR1cmVPYmpzW2tleXNba2tdXS5hb2kgPSBsYXRMbmcoW2Nvb3Jkc1swXSwgY29vcmRzWzFdXSk7CiAgICAgICAgICAgIGZlYXR1cmVPYmpzW2tleXNba2tdXS5pZCA9IGdsb2JhbElkQ291bnRlcjsgLy8gdG8gY29ubmVjdCBpbmRpY2F0b3IgJiBmZWF0dXJlCgogICAgICAgICAgICBmZWF0dXJlT2Jqc1trZXlzW2trXV0uZW5kUG9pbnRJZHggPSBlbmRQb2ludElkeDsKICAgICAgICAgICAgZmVhdHVyZXMucHVzaCh7CiAgICAgICAgICAgICAgbGF0bG5nOiBsYXRMbmcoW2Nvb3Jkc1swXSwgY29vcmRzWzFdXSksCiAgICAgICAgICAgICAgaWQ6IGdsb2JhbElkQ291bnRlciwKICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7CiAgICAgICAgICAgICAgICBpbmRpY2F0b3JPYmplY3Q6IGZlYXR1cmVPYmpzW2tleXNba2tdXQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGdsb2JhbElkQ291bnRlciArPSAxOwogICAgICAgICAgfQogICAgICAgIH0pKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBmZWF0dXJlczsKICAgIH0pOwogIH0sCiAgbG9hZEdlb0RCRW5kcG9pbnQ6IGZ1bmN0aW9uIGxvYWRHZW9EQkVuZHBvaW50KF9yZWY4LCBfcmVmOSkgewogICAgdmFyIHJvb3RTdGF0ZSA9IF9yZWY4LnJvb3RTdGF0ZSwKICAgICAgICBjb21taXQgPSBfcmVmOC5jb21taXQ7CiAgICB2YXIgdXJsID0gX3JlZjkudXJsLAogICAgICAgIGVuZFBvaW50SWR4ID0gX3JlZjkuZW5kUG9pbnRJZHg7CiAgICByZXR1cm4gZmV0Y2godXJsLCB7CiAgICAgIGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nCiAgICB9KS50aGVuKGZ1bmN0aW9uIChyKSB7CiAgICAgIHJldHVybiByLmpzb24oKTsKICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgdmFyIGZlYXR1cmVzID0gW107CiAgICAgIHZhciBwTSA9IHsKICAgICAgICBhb2k6ICdhb2knLAogICAgICAgIGFvaUlEOiAnYW9pX2lkJywKICAgICAgICBsYXN0Q29sb3JDb2RlOiAnY29sb3JfY29kZScsCiAgICAgICAgY291bnRyeTogJ2NvdW50cnknLAogICAgICAgIGdlb21ldHJ5OiAnZ2VvbWV0cnknLAogICAgICAgIGluZGljYXRvcjogJ2luZGljYXRvcl9jb2RlJywKICAgICAgICBsYXN0SW5kaWNhdG9yVmFsdWU6ICdpbmRpY2F0b3JfdmFsdWUnLAogICAgICAgIGxhc3RUaW1lOiAnbWF4X3RpbWUnLAogICAgICAgIGxhc3RNZWFzdXJlbWVudDogJ21lYXN1cmVtZW50X3ZhbHVlJywKICAgICAgICBzaXRlTmFtZTogJ3NpdGVfbmFtZScsCiAgICAgICAgc3ViQW9pOiAnc3ViX2FvaScKICAgICAgICAvKgogICAgICAgIGNpdHk6ICdjaXR5JywKICAgICAgICBkZXNjcmlwdGlvbjogJ2Rlc2NyaXB0aW9uJywKICAgICAgICBpbmRpY2F0b3JOYW1lOiAnSW5kaWNhdG9yIE5hbWUnLCAvLyBub3QgcHJlc2VudAogICAgICAgIGxhc3RSZWZlcmVuY2VUaW1lOiAncmVmZXJlbmNlIGRhdGUgdGltZSBbeXl5eS1tbS1kZHRoaDptbTpzc10nLAogICAgICAgIGxhc3RSZWZlcmVuY2VWYWx1ZTogJ3JlZmVyZW5jZSB2YWx1ZSBbZmxvYXRdJywKICAgICAgICByZWdpb246ICdyZWdpb24gKG9wdGlvbmFsKScsCiAgICAgICAgdXBkYXRlRnJlcXVlbmN5OiAndXBkYXRlIGZyZXF1ZW5jeScsIC8vIG5vdCBwcmVzZW50CiAgICAgICAgLy8gUHJvYmFibHkgbm90IG5lZWRlZCBpbiBvdmVydmlldwogICAgICAgIHJlZmVyZW5jZURlc2NyaXB0aW9uOiAncmVmZXJlbmNlIGRlc2NyaXB0aW9uJywKICAgICAgICBtZXRob2Q6ICdtZXRob2QnLAogICAgICAgIHJ1bGU6ICdydWxlJywKICAgICAgICBlb1NlbnNvcjogJ2VvIHNlbnNvcicsCiAgICAgICAgaW5wdXREYXRhOiAnaW5wdXQgZGF0YScsCiAgICAgICAgKi8KCiAgICAgIH07CiAgICAgIGNvbW1pdCgnQUREX1JFU1VMVFNfQ09VTlQnLCB7CiAgICAgICAgdHlwZTogcm9vdFN0YXRlLmNvbmZpZy5iYXNlQ29uZmlnLmluZGljYXRvcnNEZWZpbml0aW9uW2RhdGFbMF1bcE0uaW5kaWNhdG9yXV0uY2xhc3MsCiAgICAgICAgY291bnQ6IGRhdGEubGVuZ3RoIC8vIGluZGl2aWR1YWwgbWVhc3VyZW1lbnRzCgogICAgICB9KTsgLy8gb25seSBjb250aW51ZSBpZiBhb2kgY29sdW1uIGlzIHByZXNlbnQKCiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YVswXSwgcE0uYW9pKSkgewogICAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgd2t0ID0gbmV3IFdrdCgpOwogICAgICAgICAgdmFyIGZlYXR1cmVPYmpzID0ge307CgogICAgICAgICAgdmFyIF9sb29wMiA9IGZ1bmN0aW9uIF9sb29wMihycikgewogICAgICAgICAgICAvLyBBZ2dyZWdhdGUgZGF0YSBiYXNlZCBvbiBsb2NhdGlvbgogICAgICAgICAgICB2YXIgdW5pcXVlS2V5ID0gIiIuY29uY2F0KGRhdGFbcnJdW3BNLmFvaV0sICJfIikuY29uY2F0KGRhdGFbcnJdW3BNLmluZGljYXRvcl0pOwoKICAgICAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZmVhdHVyZU9ianMsIHVuaXF1ZUtleSkpIHsKICAgICAgICAgICAgICBmZWF0dXJlT2Jqc1t1bmlxdWVLZXldID0ge307IC8vIFRPRE86IFJlbW92ZSBwbGFjZWhvbGRlciB0ZXh0CgogICAgICAgICAgICAgIGZlYXR1cmVPYmpzW3VuaXF1ZUtleV0uZGVzY3JpcHRpb24gPSAncGxhY2Vob2xkZXIgZGVzY3JpcHRpb24nOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIFRoaXMgc2hvdWxkIG5vdCBoYXBwZW4KICAgICAgICAgICAgICBjb25zb2xlLmxvZygiV0FSTklORzogRHVwbGljYXRlIHVuaXF1ZUtleSAiLmNvbmNhdCh1bmlxdWVLZXksICIgaW4gcmV0cmlldmVkIGRhdGEuIikpOwogICAgICAgICAgICB9IC8vIENyZWF0ZSBuZXcgb2JqZWN0IHdpdGggbWFwcGVkIGtleXMgdG8gYWxsb3cgaW50ZWdyYXRpbmcgZGF0YQogICAgICAgICAgICAvLyBvZiBtdWx0aXBsZSBlbmRwb2ludHMKCgogICAgICAgICAgICBPYmplY3QuZW50cmllcyhwTSkuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjEwKSB7CiAgICAgICAgICAgICAgdmFyIF9yZWYxMSA9IF9zbGljZWRUb0FycmF5KF9yZWYxMCwgMiksCiAgICAgICAgICAgICAgICAgIGtleSA9IF9yZWYxMVswXSwKICAgICAgICAgICAgICAgICAgdmFsdWUgPSBfcmVmMTFbMV07CgogICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YVtycl0sIHZhbHVlKSkgewogICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ3N1YkFvaScpIHsKICAgICAgICAgICAgICAgICAgLy8gZHVtbXkgZW1wdHkgZ2VvbWV0cnkKICAgICAgICAgICAgICAgICAgdmFyIGZ0cnMgPSBbXTsKCiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgLy8gYXNzdW1pbmcgc3ViLWFvaSBkb2VzIG5vdCBjaGFuZ2Ugb3ZlciB0aW1lCiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbcnJdW3ZhbHVlXSAhPT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAgIHdrdC5yZWFkKGRhdGFbcnJdW3ZhbHVlXSk7CiAgICAgICAgICAgICAgICAgICAgICB2YXIganNvbkdlb20gPSB3a3QudG9Kc29uKCk7IC8vIGNyZWF0ZSBhIGZlYXR1cmUgY29sbGVjdGlvbgoKICAgICAgICAgICAgICAgICAgICAgIGZ0cnMgPSBbewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnRmVhdHVyZScsCiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHt9LAogICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeToganNvbkdlb20KICAgICAgICAgICAgICAgICAgICAgIH1dOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkVycm9yIHBhcnNpbmcgc3ViQW9pIG9mIGxvY2F0aW9ucyBmb3IgaW5kZXggIi5jb25jYXQocnIpKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgdmFyIGZ0ckNvbCA9IHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLAogICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzOiBmdHJzCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIGZlYXR1cmVPYmpzW3VuaXF1ZUtleV1ba2V5XSA9IGZ0ckNvbDsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnbGFzdE1lYXN1cmVtZW50JykgewogICAgICAgICAgICAgICAgICBmZWF0dXJlT2Jqc1t1bmlxdWVLZXldW2tleV0gPSBkYXRhW3JyXVt2YWx1ZV0ubGVuZ3RoICE9PSAwID8gTnVtYmVyKGRhdGFbcnJdW3ZhbHVlXSkgOiBOYU47CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBmZWF0dXJlT2Jqc1t1bmlxdWVLZXldW2tleV0gPSBkYXRhW3JyXVt2YWx1ZV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH07CgogICAgICAgICAgZm9yICh2YXIgcnIgPSAwOyByciA8IGRhdGEubGVuZ3RoOyByciArPSAxKSB7CiAgICAgICAgICAgIF9sb29wMihycik7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhmZWF0dXJlT2Jqcyk7CgogICAgICAgICAgZm9yICh2YXIga2sgPSAwOyBrayA8IGtleXMubGVuZ3RoOyBrayArPSAxKSB7CiAgICAgICAgICAgIHZhciBjb29yZHMgPSBrZXlzW2trXS5zcGxpdCgnXycpWzBdLnJlcGxhY2UoJ1BPSU5UKCcsICcnKS5yZXBsYWNlKCcpJywgJycpLnNwbGl0KCcgJykubWFwKE51bWJlcik7CiAgICAgICAgICAgIGZlYXR1cmVPYmpzW2tleXNba2tdXS5hb2kgPSBsYXRMbmcoW2Nvb3Jkc1sxXSwgY29vcmRzWzBdXSk7CiAgICAgICAgICAgIGZlYXR1cmVPYmpzW2tleXNba2tdXS5pZCA9IGdsb2JhbElkQ291bnRlcjsgLy8gdG8gY29ubmVjdCBpbmRpY2F0b3IgJiBmZWF0dXJlCgogICAgICAgICAgICBmZWF0dXJlT2Jqc1trZXlzW2trXV0uZW5kUG9pbnRJZHggPSBlbmRQb2ludElkeDsKICAgICAgICAgICAgZmVhdHVyZXMucHVzaCh7CiAgICAgICAgICAgICAgbGF0bG5nOiBsYXRMbmcoW2Nvb3Jkc1sxXSwgY29vcmRzWzBdXSksCiAgICAgICAgICAgICAgaWQ6IGdsb2JhbElkQ291bnRlciwKICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7CiAgICAgICAgICAgICAgICBpbmRpY2F0b3JPYmplY3Q6IGZlYXR1cmVPYmpzW2tleXNba2tdXQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGdsb2JhbElkQ291bnRlciArPSAxOwogICAgICAgICAgfQogICAgICAgIH0pKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBmZWF0dXJlczsKICAgIH0pOwogIH0sCiAgbG9hZER1bW15TG9jYXRpb25zOiBmdW5jdGlvbiBsb2FkRHVtbXlMb2NhdGlvbnMoX3JlZjEyKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICB2YXIgcm9vdFN0YXRlID0gX3JlZjEyLnJvb3RTdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICBfdGhpczIuX3ZtLiRwYXBhLnBhcnNlKHJvb3RTdGF0ZS5jb25maWcuYXBwQ29uZmlnLmRpc3BsYXlEdW1teUxvY2F0aW9ucywgewogICAgICAgIGRvd25sb2FkOiB0cnVlLAogICAgICAgIHF1b3RlczogdHJ1ZSwKICAgICAgICBoZWFkZXI6IHRydWUsCiAgICAgICAgc2tpcEVtcHR5TGluZXM6IHRydWUsCiAgICAgICAgZGVsaW1pdGVyOiAnLCcsCiAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uIGNvbXBsZXRlKHJlc3VsdCkgewogICAgICAgICAgdmFyIGRhdGEgPSByZXN1bHQuZGF0YTsKICAgICAgICAgIHZhciBmZWF0dXJlT2JqcyA9IHt9OwoKICAgICAgICAgIGZvciAodmFyIHJyID0gMDsgcnIgPCBkYXRhLmxlbmd0aDsgcnIgKz0gMSkgewogICAgICAgICAgICB2YXIgdW5pcXVlS2V5ID0gIiIuY29uY2F0KGRhdGFbcnJdLmFvaSwgIl9kIik7CiAgICAgICAgICAgIGZlYXR1cmVPYmpzW3VuaXF1ZUtleV0gPSBkYXRhW3JyXTsKICAgICAgICAgICAgZmVhdHVyZU9ianNbdW5pcXVlS2V5XS5pbmRpY2F0b3IgPSAnZCc7CiAgICAgICAgICAgIGZlYXR1cmVPYmpzW3VuaXF1ZUtleV0uaW5kaWNhdG9yVmFsdWUgPSBbJyddOwogICAgICAgICAgICBmZWF0dXJlT2Jqc1t1bmlxdWVLZXldLmR1bW15RmVhdHVyZSA9IHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGZlYXR1cmVzID0gW107CiAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGZlYXR1cmVPYmpzKTsKCiAgICAgICAgICBmb3IgKHZhciBrayA9IDA7IGtrIDwga2V5cy5sZW5ndGg7IGtrICs9IDEpIHsKICAgICAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0ga2V5c1tra10uc3BsaXQoJ18nKVswXS5zcGxpdCgnLCcpLm1hcChOdW1iZXIpOwogICAgICAgICAgICBmZWF0dXJlT2Jqc1trZXlzW2trXV0uaWQgPSBnbG9iYWxJZENvdW50ZXI7IC8vIHRvIGNvbm5lY3QgaW5kaWNhdG9yICYgZmVhdHVyZQoKICAgICAgICAgICAgZmVhdHVyZXMucHVzaCh7CiAgICAgICAgICAgICAgbGF0bG5nOiBsYXRMbmcoY29vcmRpbmF0ZXMpLAogICAgICAgICAgICAgIGlkOiBnbG9iYWxJZENvdW50ZXIsCiAgICAgICAgICAgICAgcHJvcGVydGllczogewogICAgICAgICAgICAgICAgaW5kaWNhdG9yT2JqZWN0OiBmZWF0dXJlT2Jqc1trZXlzW2trXV0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBnbG9iYWxJZENvdW50ZXIgKz0gMTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXNvbHZlKGZlYXR1cmVzKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgZ2V0dGVyczogZ2V0dGVycywKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"sources":["/Volumes/WD_Elements_25A1_Media/Google Drive/___Public/__2021-Hackathon-EOD/eodash-staging/app/src/store/modules/features.js"],"names":["Wkt","latLng","countriesJson","globalIdCounter","state","allFeatures","featureFilters","countries","indicators","includeArchived","selectedArea","resultsCount","economic","agriculture","environment","getters","getCountries","Set","filter","f","length","includes","properties","indicatorObject","indicator","map","country","flat","sort","getIndicators","_","rootState","filtered","Array","isArray","some","i","description","archived","code","class","config","baseConfig","indicatorsDefinition","indicatorOverwrite","getCountryItems","gettersG","c","item","features","find","alpha2","name","a","b","getFeatures","city","updateFrequency","toLowerCase","getGroupedFeatures","groupedFeatures","appConfig","featureGrouping","forEach","fG","firstFeature","aoiID","push","restFeatures","locationCode","concat","getLatestUpdate","times","time","Time","latest","t","mutations","ADD_NEW_FEATURES","INIT_FEATURE_FILTER","SET_FEATURE_FILTER","options","hasFeature","Object","keys","ADD_RESULTS_COUNT","type","count","SET_SELECTED_AREA","area","actions","loadAllEndpoints","commit","endpoints","dataEndpoints","ep","prototype","hasOwnProperty","call","url","provider","locationSuffix","F","endPointIdx","dispatch","console","log","globalIndicators","displayDummyLocations","dummyFeatures","loadEOXEndpoint","fetch","credentials","then","r","json","data","pM","aoi","lastColorCode","lastIndicatorValue","lastTime","lastMeasurement","siteName","subAoi","region","indicatorName","lastReferenceValue","lastReferenceTime","yAxis","wkt","featureObjs","rr","uniqueKey","entries","key","value","ftrs","read","jsonGeom","toJson","geometry","err","ftrCol","Number","NaN","kk","coords","split","replace","id","latlng","loadGeoDBEndpoint","loadDummyLocations","Promise","resolve","_vm","$papa","parse","download","quotes","header","skipEmptyLines","delimiter","complete","result","indicatorValue","dummyFeature","coordinates","namespaced"],"mappings":"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","sourcesContent":["/* eslint no-shadow: [\"error\", { \"allow\": [\"state\", \"getters\"] }] */\nimport { Wkt } from 'wicket';\nimport { latLng } from 'leaflet';\nimport countriesJson from '@/assets/countries.json';\n\nlet globalIdCounter = 0;\nconst state = {\n  allFeatures: [],\n  featureFilters: {\n    countries: [],\n    indicators: [],\n    includeArchived: false,\n  },\n  selectedArea: null,\n  resultsCount: {\n    economic: 0,\n    agriculture: 0,\n    environment: 0,\n  },\n};\n\nconst getters = {\n  getCountries(state) {\n    return [...new Set([\n      state.allFeatures\n        .filter((f) => (state.featureFilters.indicators.length > 0\n          ? state.featureFilters.indicators.includes(f.properties.indicatorObject.indicator)\n          : true))\n        .map((f) => f.properties.indicatorObject.country),\n    ].flat(2))].sort();\n  },\n  getIndicators(state, _, rootState) {\n    const indicators = [...new Set([\n      state.allFeatures\n        .filter((f) => {\n          let filtered;\n          if (state.featureFilters.countries.length > 0) {\n            if (Array.isArray(f.properties.indicatorObject.country)) {\n              filtered = f.properties.indicatorObject.country\n                .some((i) => state.featureFilters.countries.includes(i));\n            } else {\n              filtered = state.featureFilters.countries\n                .includes(f.properties.indicatorObject.country);\n            }\n          } else if (!state.featureFilters.includeArchived) {\n            filtered = f.properties.indicatorObject.description\n              && (!f.properties.indicatorObject.description.includes('(archived)'));\n          } else {\n            filtered = true;\n          }\n          return filtered;\n        })\n        .map((f) => ({\n          archived: f.properties.indicatorObject.description\n            && (f.properties.indicatorObject.description.includes('(archived)')),\n          code: f.properties.indicatorObject.indicator,\n          indicator: f.properties.indicatorObject.description,\n          class: rootState.config.baseConfig.indicatorsDefinition[\n            f.properties.indicatorObject.indicator\n          ].class,\n          indicatorOverwrite: rootState.config.baseConfig.indicatorsDefinition[\n            f.properties.indicatorObject.indicator\n          ].indicatorOverwrite,\n        })),\n    ].flat(2))].sort();\n    return indicators;\n  },\n  getCountryItems(state, gettersG) {\n    return gettersG.getCountries\n      .filter((c) => c !== 'all')\n      .map((c) => {\n        const item = countriesJson.features\n          .find((f) => f.properties.alpha2 === c);\n        return {\n          code: c,\n          name: item ? item.properties.name : 'Regional',\n        };\n      })\n      .sort((a, b) => ((a.name > b.name) ? 1 : -1));\n  },\n  getFeatures(state) {\n    let features = state.allFeatures;\n\n    if (state.featureFilters.countries.length > 0) {\n      features = features\n        .filter((f) => {\n          if (Array.isArray(f.properties.indicatorObject.country)) {\n            return f.properties.indicatorObject.country\n              .includes(state.featureFilters.countries);\n          } else { // eslint-disable-line\n            return state.featureFilters.countries\n              .includes(f.properties.indicatorObject.country)\n              || f.properties.indicatorObject.city === 'World';\n          }\n        });\n    }\n    if (state.featureFilters.indicators.length > 0) {\n      features = features\n        .filter((f) => state.featureFilters.indicators\n          .includes(f.properties.indicatorObject.indicator));\n    }\n\n    if (!state.featureFilters.includeArchived) {\n      features = features.filter((f) => (f.properties.indicatorObject.updateFrequency ? f.properties.indicatorObject.updateFrequency.toLowerCase() !== 'archived' : true));\n    }\n\n    features = features\n      .sort((a, b) => ((a.properties.indicatorObject.country > b.properties.indicatorObject.country)\n        ? 1 : -1));\n\n    return features;\n  },\n  getGroupedFeatures(state, getters, rootState) {\n    let allFeatures = [];\n    if (state.allFeatures.length > 0) {\n      const groupedFeatures = [];\n      if (rootState.config.appConfig.featureGrouping) {\n        rootState.config.appConfig.featureGrouping.forEach((fG) => {\n          const firstFeature = getters.getFeatures\n            .find((f) => `${f.properties.indicatorObject.aoiID}-${f.properties.indicatorObject.indicator}` === fG.features[0]);\n          if (firstFeature) {\n            groupedFeatures.push(firstFeature);\n          }\n        });\n      }\n      const restFeatures = rootState.config.appConfig.featureGrouping\n        ? getters.getFeatures\n          .filter((f) => {\n            const locationCode = `${f.properties.indicatorObject.aoiID}-${f.properties.indicatorObject.indicator}`;\n            return !rootState.config.appConfig.featureGrouping\n              .find((fG) => fG.features.includes(locationCode));\n          })\n        : getters.getFeatures;\n      allFeatures = groupedFeatures.concat(restFeatures);\n    }\n    return allFeatures;\n  },\n  getLatestUpdate(state) {\n    const times = state.allFeatures.map((f) => {\n      let time = f.properties.indicatorObject.Time;\n      let latest;\n      if (time && time.length > 0) {\n        time = time.sort((a, b) => ((a > b) ? 1 : -1));\n        latest = time[time.length - 1];\n      }\n      return latest;\n    });\n    const filtered = times.filter((t) => !!t).sort((a, b) => ((a > b) ? 1 : -1));\n    return filtered[filtered.length - 1];\n  },\n};\n\nconst mutations = {\n  // SET_MANUAL_FEATURES(state, features) {\n  //   state.allFeatures = state.allFeatures.concat(\n  //     features,\n  //     this.state.config.baseConfig.globalIndicators,\n  //   );\n  // },\n  ADD_NEW_FEATURES(state, features) {\n    state.allFeatures = state.allFeatures.concat(features);\n  },\n  // SET_ALL_DUMMY_LOCATIONS(state, features) {\n  //   state.allFeatures = state.allFeatures.concat(features);\n  // },\n  INIT_FEATURE_FILTER(state, { countries, indicators }) {\n    if (countries) {\n      state.featureFilters.countries = countries;\n    }\n    if (indicators) {\n      state.featureFilters.indicators = indicators;\n    }\n  },\n  SET_FEATURE_FILTER(state, options) {\n    if (!options) return;\n\n    const hasFeature = (f) => Object.keys(options).includes(f);\n\n    if (hasFeature('countries')) {\n      state.featureFilters.countries = options.countries;\n    }\n    if (hasFeature('indicators')) {\n      state.featureFilters.indicators = options.indicators;\n    }\n    if (hasFeature('includeArchived')) {\n      state.featureFilters.includeArchived = options.includeArchived;\n    }\n  },\n  ADD_RESULTS_COUNT(state, { type, count }) {\n    state.resultsCount[type] += count;\n  },\n  SET_SELECTED_AREA(state, area) {\n    state.selectedArea = area;\n  },\n};\nconst actions = {\n  async loadAllEndpoints({ commit, rootState }) {\n    let allFeatures = [];\n    const endpoints = rootState.config.baseConfig.dataEndpoints;\n    for (let ep = 0; ep < endpoints.length; ep += 1) {\n      if (Object.prototype.hasOwnProperty.call(endpoints[ep], 'type')) {\n        let url = endpoints[ep].provider;\n        if (Object.prototype.hasOwnProperty.call(endpoints[ep], 'locationSuffix')) {\n          url += endpoints[ep].locationSuffix;\n        }\n        let F;\n        const endPointIdx = ep;\n        switch (endpoints[ep].type) {\n          case 'geodb':\n            F = await this.dispatch( // eslint-disable-line\n              'features/loadGeoDBEndpoint', { url, endPointIdx },\n            );\n            break;\n          case 'eox':\n            F = await this.dispatch( // eslint-disable-line\n              'features/loadEOXEndpoint', { url, endPointIdx },\n            );\n            break;\n          default:\n            console.log('Endpoint type unknown');\n        }\n        allFeatures = allFeatures.concat(F);\n      }\n    }\n    // Then, add the hardcoded features\n    allFeatures = allFeatures.concat(rootState.config.baseConfig.globalIndicators);\n\n    // Then, if applicable, add the dummy features\n    if (rootState.config.appConfig.displayDummyLocations) {\n      const dummyFeatures = await this.dispatch('features/loadDummyLocations');\n      allFeatures = allFeatures.concat(dummyFeatures);\n    }\n    commit('ADD_NEW_FEATURES', allFeatures);\n  },\n\n  loadEOXEndpoint({ rootState, commit }, { url, endPointIdx }) {\n    return fetch(url, { credentials: 'same-origin' }).then((r) => r.json())\n      .then((data) => {\n        const features = [];\n        const pM = {\n          aoi: 'aoi',\n          aoiID: 'aoiID',\n          lastColorCode: 'lastColorCode',\n          country: 'country',\n          indicator: 'indicator',\n          lastIndicatorValue: 'lastIndicatorValue',\n          lastTime: 'lastTime',\n          lastMeasurement: 'lastMeasurement',\n          siteName: 'siteName',\n          subAoi: 'subAoi',\n          city: 'city',\n          description: 'description',\n          region: 'region',\n          indicatorName: 'indicatorName',\n          lastReferenceValue: 'lastReferenceValue',\n          lastReferenceTime: 'lastReferenceTime',\n          yAxis: 'yAxis',\n          updateFrequency: 'updateFrequency',\n        };\n\n        commit('ADD_RESULTS_COUNT', {\n          type: rootState.config.baseConfig.indicatorsDefinition[data[0][pM.indicator]].class,\n          count: data.length, // individual measurements\n        });\n        // only continue if aoi column is present\n        if (Object.prototype.hasOwnProperty.call(data[0], pM.aoi)) {\n          const wkt = new Wkt();\n          const featureObjs = {};\n          for (let rr = 0; rr < data.length; rr += 1) {\n            // Aggregate data based on location\n            const uniqueKey = `${data[rr][pM.aoi]}_${data[rr][pM.indicator]}`;\n            if (!Object.prototype.hasOwnProperty.call(featureObjs, uniqueKey)) {\n              featureObjs[uniqueKey] = {};\n            } else {\n              // This should not happen\n              console.log(`WARNING: Duplicate uniqueKey ${uniqueKey} in retrieved data.`);\n            }\n            // Create new object with mapped keys to allow integrating data\n            // of multiple endpoints\n            Object.entries(pM).forEach(([key, value]) => {\n              if (Object.prototype.hasOwnProperty.call(data[rr], value)) {\n                if (key === 'subAoi') {\n                  // dummy empty geometry\n                  let ftrs = [];\n                  try {\n                    // assuming sub-aoi does not change over time\n                    if (!['', '/'].includes(data[rr][value])) {\n                      wkt.read(data[rr][value]);\n                      const jsonGeom = wkt.toJson();\n                      // create a feature collection\n                      ftrs = [{\n                        type: 'Feature',\n                        properties: {},\n                        geometry: jsonGeom,\n                      }];\n                    }\n                  } catch (err) {\n                    console.log(`Error parsing subAoi of locations for index ${rr}`);\n                  }\n                  const ftrCol = {\n                    type: 'FeatureCollection',\n                    features: ftrs,\n                  };\n                  featureObjs[uniqueKey][key] = ftrCol;\n                } else if (key === 'lastMeasurement') {\n                  featureObjs[uniqueKey][key] = data[rr][value].length !== 0\n                    ? Number(data[rr][value]) : NaN;\n                } else {\n                  featureObjs[uniqueKey][key] = data[rr][value];\n                }\n              }\n            });\n          }\n          const keys = Object.keys(featureObjs);\n          for (let kk = 0; kk < keys.length; kk += 1) {\n            const coords = keys[kk].split('_')[0].replace(' ', '').split(',').map(Number);\n            featureObjs[keys[kk]].aoi = latLng([coords[0], coords[1]]);\n            featureObjs[keys[kk]].id = globalIdCounter; // to connect indicator & feature\n            featureObjs[keys[kk]].endPointIdx = endPointIdx;\n            features.push({\n              latlng: latLng([coords[0], coords[1]]),\n              id: globalIdCounter,\n              properties: {\n                indicatorObject: featureObjs[keys[kk]],\n              },\n            });\n            globalIdCounter += 1;\n          }\n        }\n        return features;\n      });\n  },\n  loadGeoDBEndpoint({ rootState, commit }, { url, endPointIdx }) {\n    return fetch(url, { credentials: 'same-origin' }).then((r) => r.json())\n      .then((data) => {\n        const features = [];\n        const pM = {\n          aoi: 'aoi',\n          aoiID: 'aoi_id',\n          lastColorCode: 'color_code',\n          country: 'country',\n          geometry: 'geometry',\n          indicator: 'indicator_code',\n          lastIndicatorValue: 'indicator_value',\n          lastTime: 'max_time',\n          lastMeasurement: 'measurement_value',\n          siteName: 'site_name',\n          subAoi: 'sub_aoi',\n          /*\n          city: 'city',\n          description: 'description',\n          indicatorName: 'Indicator Name', // not present\n          lastReferenceTime: 'reference date time [yyyy-mm-ddthh:mm:ss]',\n          lastReferenceValue: 'reference value [float]',\n          region: 'region (optional)',\n          updateFrequency: 'update frequency', // not present\n          // Probably not needed in overview\n          referenceDescription: 'reference description',\n          method: 'method',\n          rule: 'rule',\n          eoSensor: 'eo sensor',\n          inputData: 'input data',\n          */\n        };\n\n        commit('ADD_RESULTS_COUNT', {\n          type: rootState.config.baseConfig.indicatorsDefinition[data[0][pM.indicator]].class,\n          count: data.length, // individual measurements\n        });\n        // only continue if aoi column is present\n        if (Object.prototype.hasOwnProperty.call(data[0], pM.aoi)) {\n          const wkt = new Wkt();\n          const featureObjs = {};\n          for (let rr = 0; rr < data.length; rr += 1) {\n            // Aggregate data based on location\n            const uniqueKey = `${data[rr][pM.aoi]}_${data[rr][pM.indicator]}`;\n            if (!Object.prototype.hasOwnProperty.call(featureObjs, uniqueKey)) {\n              featureObjs[uniqueKey] = {};\n              // TODO: Remove placeholder text\n              featureObjs[uniqueKey].description = 'placeholder description';\n            } else {\n              // This should not happen\n              console.log(`WARNING: Duplicate uniqueKey ${uniqueKey} in retrieved data.`);\n            }\n            // Create new object with mapped keys to allow integrating data\n            // of multiple endpoints\n            Object.entries(pM).forEach(([key, value]) => {\n              if (Object.prototype.hasOwnProperty.call(data[rr], value)) {\n                if (key === 'subAoi') {\n                  // dummy empty geometry\n                  let ftrs = [];\n                  try {\n                    // assuming sub-aoi does not change over time\n                    if (data[rr][value] !== '') {\n                      wkt.read(data[rr][value]);\n                      const jsonGeom = wkt.toJson();\n                      // create a feature collection\n                      ftrs = [{\n                        type: 'Feature',\n                        properties: {},\n                        geometry: jsonGeom,\n                      }];\n                    }\n                  } catch (err) {\n                    console.log(`Error parsing subAoi of locations for index ${rr}`);\n                  }\n                  const ftrCol = {\n                    type: 'FeatureCollection',\n                    features: ftrs,\n                  };\n                  featureObjs[uniqueKey][key] = ftrCol;\n                } else if (key === 'lastMeasurement') {\n                  featureObjs[uniqueKey][key] = data[rr][value].length !== 0\n                    ? Number(data[rr][value]) : NaN;\n                } else {\n                  featureObjs[uniqueKey][key] = data[rr][value];\n                }\n              }\n            });\n          }\n          const keys = Object.keys(featureObjs);\n          for (let kk = 0; kk < keys.length; kk += 1) {\n            const coords = keys[kk].split('_')[0].replace('POINT(', '')\n              .replace(')', '').split(' ').map(Number);\n            featureObjs[keys[kk]].aoi = latLng([coords[1], coords[0]]);\n            featureObjs[keys[kk]].id = globalIdCounter; // to connect indicator & feature\n            featureObjs[keys[kk]].endPointIdx = endPointIdx;\n            features.push({\n              latlng: latLng([coords[1], coords[0]]),\n              id: globalIdCounter,\n              properties: {\n                indicatorObject: featureObjs[keys[kk]],\n              },\n            });\n            globalIdCounter += 1;\n          }\n        }\n        return features;\n      });\n  },\n\n  loadDummyLocations({ rootState }) {\n    return new Promise((resolve) => {\n      this._vm.$papa.parse(rootState.config.appConfig.displayDummyLocations, {\n        download: true,\n        quotes: true,\n        header: true,\n        skipEmptyLines: true,\n        delimiter: ',',\n        complete: (result) => {\n          const { data } = result;\n          const featureObjs = {};\n          for (let rr = 0; rr < data.length; rr += 1) {\n            const uniqueKey = `${data[rr].aoi}_d`;\n            featureObjs[uniqueKey] = data[rr];\n            featureObjs[uniqueKey].indicator = 'd';\n            featureObjs[uniqueKey].indicatorValue = [''];\n            featureObjs[uniqueKey].dummyFeature = true;\n          }\n          const features = [];\n          const keys = Object.keys(featureObjs);\n\n          for (let kk = 0; kk < keys.length; kk += 1) {\n            const coordinates = keys[kk].split('_')[0].split(',').map(Number);\n            featureObjs[keys[kk]].id = globalIdCounter; // to connect indicator & feature\n            features.push({\n              latlng: latLng(coordinates),\n              id: globalIdCounter,\n              properties: {\n                indicatorObject: featureObjs[keys[kk]],\n              },\n            });\n            globalIdCounter += 1;\n          }\n          resolve(features);\n        },\n      });\n    });\n  },\n};\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  mutations,\n  actions,\n};\n"]}]}