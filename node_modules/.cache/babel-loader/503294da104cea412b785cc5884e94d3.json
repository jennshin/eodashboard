{"remainingRequest":"/Volumes/WD_Elements_25A1_Media/Google Drive/___Public/__2021-Hackathon-EOD/eodash-staging/app/node_modules/babel-loader/lib/index.js!/Volumes/WD_Elements_25A1_Media/Google Drive/___Public/__2021-Hackathon-EOD/eodash-staging/app/node_modules/eslint-loader/index.js??ref--13-0!/Volumes/WD_Elements_25A1_Media/Google Drive/___Public/__2021-Hackathon-EOD/eodash-staging/app/src/utils.js","dependencies":[{"path":"/Volumes/WD_Elements_25A1_Media/Google Drive/___Public/__2021-Hackathon-EOD/eodash-staging/app/src/utils.js","mtime":1624532486000},{"path":"/Volumes/WD_Elements_25A1_Media/Google Drive/___Public/__2021-Hackathon-EOD/eodash-staging/app/node_modules/cache-loader/dist/cjs.js","mtime":1624878747000},{"path":"/Volumes/WD_Elements_25A1_Media/Google Drive/___Public/__2021-Hackathon-EOD/eodash-staging/app/node_modules/babel-loader/lib/index.js","mtime":1624878747000},{"path":"/Volumes/WD_Elements_25A1_Media/Google Drive/___Public/__2021-Hackathon-EOD/eodash-staging/app/node_modules/eslint-loader/index.js","mtime":1624878752000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Wb2x1bWVzL1dEX0VsZW1lbnRzXzI1QTFfTWVkaWEvR29vZ2xlIERyaXZlL19fX1B1YmxpYy9fXzIwMjEtSGFja2F0aG9uLUVPRC9lb2Rhc2gtc3RhZ2luZy9hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1ZvbHVtZXMvV0RfRWxlbWVudHNfMjVBMV9NZWRpYS9Hb29nbGUgRHJpdmUvX19fUHVibGljL19fMjAyMS1IYWNrYXRob24tRU9EL2VvZGFzaC1zdGFnaW5nL2FwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCB7IERhdGVUaW1lIH0gZnJvbSAnbHV4b24nOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwpleHBvcnQgZnVuY3Rpb24gcGFkTGVmdChzdHIsIHBhZCwgc2l6ZSkgewogIHZhciBvdXQgPSBzdHI7CgogIHdoaWxlIChvdXQubGVuZ3RoIDwgc2l6ZSkgewogICAgb3V0ID0gcGFkICsgc3RyOwogIH0KCiAgcmV0dXJuIG91dDsKfQpleHBvcnQgZnVuY3Rpb24gc2hUaW1lRnVuY3Rpb24oZGF0ZSkgewogIHZhciB0ZW1wRGF0ZSA9IGRhdGU7CgogIGlmICghQXJyYXkuaXNBcnJheSh0ZW1wRGF0ZSkpIHsKICAgIHRlbXBEYXRlID0gW3RlbXBEYXRlXTsKICB9CgogIHZhciBkYXRlT2JqID0gRGF0ZVRpbWUuZnJvbUlTTyh0ZW1wRGF0ZVswXSk7CiAgdmFyIGRlZmF1bHRGb3JtYXQgPSAieXl5eS1NTS1kZCdUJ0hIOm1tOnNzIjsKICB2YXIgYWx0ZXJuYXRpdmVGb3JtYXQgPSAneXl5eS1NTS1kZCc7CgogIGlmIChkYXRlT2JqLnNlY29uZCA9PT0gMCAmJiBkYXRlT2JqLmhvdXIgPT09IDAgJiYgZGF0ZU9iai5taW51dGUgPT09IDApIHsKICAgIC8vIGlmIG9ubHkgZGF5IGlucHV0LCBmb3JtYXQgYXMgYW4gaW50ZXJ2YWwgdG8gbmV4dCBkYXkKICAgIHZhciBuZXh0RGF5ID0gZGF0ZU9iai5wbHVzKHsKICAgICAgZGF5czogMQogICAgfSk7CiAgICByZXR1cm4gIiIuY29uY2F0KGRhdGVPYmoudG9Gb3JtYXQoYWx0ZXJuYXRpdmVGb3JtYXQpLCAiLyIpLmNvbmNhdChuZXh0RGF5LnRvRm9ybWF0KGFsdGVybmF0aXZlRm9ybWF0KSk7CiAgfSAvLyBvdGhlcndpc2UgcmV0dXJuIHNpbmdsZSBkYXRlIHdpdGggZnVsbCBmb3JtYXQKCgogIHJldHVybiAiIi5jb25jYXQoZGF0ZU9iai50b0Zvcm1hdChkZWZhdWx0Rm9ybWF0KSwgIi8iKS5jb25jYXQoZGF0ZU9iai50b0Zvcm1hdChkZWZhdWx0Rm9ybWF0KSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIHNoUzJUaW1lRnVuY3Rpb24oZGF0ZSkgewogIC8vIG1vZGlmaWVzIHRoZSBzdGFydCBhbmQgZW5kIGJ5IDEgaG91ciB0byBwYXN0IGFuZCBmdXR1cmUKICAvLyB0aGlzIGlzIGRvbmUgdG8gZml4IG1pc21hdGNoIGJldHdlZW4gUzIgZmlsZW5hbWUKICAvLyBhbmQgbWV0YWRhdGEgdGltZSByZXN1bHRpbmcgaW4gdHJhbnNwYXJlbnQgaW1hZ2UKICB2YXIgdGVtcERhdGUgPSBkYXRlOwoKICBpZiAoIUFycmF5LmlzQXJyYXkodGVtcERhdGUpKSB7CiAgICB0ZW1wRGF0ZSA9IFt0ZW1wRGF0ZV07CiAgfQoKICB2YXIgZGF0ZU9iaiA9IERhdGVUaW1lLmZyb21JU08odGVtcERhdGVbMF0pOwogIHZhciBkYXRlRnV0dXJlID0gZGF0ZU9iai5wbHVzKHsKICAgIG1pbnV0ZXM6IDQ1CiAgfSk7CiAgdmFyIGRhdGVQYXN0ID0gZGF0ZU9iai5taW51cyh7CiAgICBtaW51dGVzOiA0NQogIH0pOwogIHZhciBkZWZhdWx0Rm9ybWF0ID0gInl5eXktTU0tZGQnVCdISDptbTpzcyI7CiAgcmV0dXJuICIiLmNvbmNhdChkYXRlUGFzdC50b0Zvcm1hdChkZWZhdWx0Rm9ybWF0KSwgIi8iKS5jb25jYXQoZGF0ZUZ1dHVyZS50b0Zvcm1hdChkZWZhdWx0Rm9ybWF0KSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIHRlbXBsYXRlKHRlbXBsYXRlUmUsIHN0ciwgZGF0YSkgewogIHJldHVybiBzdHIucmVwbGFjZSh0ZW1wbGF0ZVJlLCBmdW5jdGlvbiAoc3RyaSwga2V5KSB7CiAgICB2YXIgdmFsdWUgPSBkYXRhW2tleV07CgogICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJObyB2YWx1ZSBwcm92aWRlZCBmb3IgdmFyaWFibGUgIi5jb25jYXQoc3RyaSkpOwogICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgdmFsdWUgPSB2YWx1ZShkYXRhKTsKICAgIH0KCiAgICByZXR1cm4gdmFsdWU7CiAgfSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGxvYWRJbmRpY2F0b3JEYXRhKF94LCBfeDIpIHsKICByZXR1cm4gX2xvYWRJbmRpY2F0b3JEYXRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9sb2FkSW5kaWNhdG9yRGF0YSgpIHsKICBfbG9hZEluZGljYXRvckRhdGEgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoYmFzZUNvbmZpZywgcGF5bG9hZCkgewogICAgdmFyIGluZGljYXRvck9iamVjdCwgdXJsLCByZXNwb25zZTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgaWYgKCEoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHBheWxvYWQsICdkYXRhTG9hZEZpbmlzaGVkJykgJiYgcGF5bG9hZC5kYXRhTG9hZEZpbmlzaGVkKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpbmRpY2F0b3JPYmplY3QgPSBwYXlsb2FkOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAvLyBTdGFydCBsb2FkaW5nIG9mIGRhdGEgZnJvbSBpbmRpY2F0b3IKICAgICAgICAgICAgdXJsID0gIiIuY29uY2F0KGJhc2VDb25maWcuZGF0YVBhdGgpLmNvbmNhdChbcGF5bG9hZC5hb2lJRCwgcGF5bG9hZC5pbmRpY2F0b3JdLmpvaW4oJy0nKSwgIi5qc29uIik7IC8vIEZldGNoIGxvY2F0aW9uIGRhdGEKCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KHVybCwgewogICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgaWYgKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIGluZGljYXRvck9iamVjdCA9IHBheWxvYWQ7IC8vIFNldCBkYXRhIHRvIGluZGljYXRvciBvYmplY3QKICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZGF0YSBmaXJzdAoKICAgICAgICAgICAgICAgIHZhciBtYXBwaW5nID0gewogICAgICAgICAgICAgICAgICBjb2xvckNvZGU6ICdjb2xvcl9jb2RlJywKICAgICAgICAgICAgICAgICAgZGF0YVByb3ZpZGVyOiAnZGF0YV9wcm92aWRlcicsCiAgICAgICAgICAgICAgICAgIGVvU2Vuc29yOiAnZW9fc2Vuc29yJywKICAgICAgICAgICAgICAgICAgaW5kaWNhdG9yVmFsdWU6ICdpbmRpY2F0b3JfdmFsdWUnLAogICAgICAgICAgICAgICAgICBpbnB1dERhdGE6ICdpbnB1dF9kYXRhJywKICAgICAgICAgICAgICAgICAgbWVhc3VyZW1lbnQ6ICdtZWFzdXJlbWVudF92YWx1ZScsCiAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZVRpbWU6ICdyZWZlcmVuY2VfdGltZScsCiAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZVZhbHVlOiAncmVmZXJlbmNlX3ZhbHVlJywKICAgICAgICAgICAgICAgICAgdGltZTogJ3RpbWUnLAogICAgICAgICAgICAgICAgICBzaXRlTmFtZTogJ3NpdGVfbmFtZV9hcnInCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIHBhcnNlZERhdGEgPSB7fTsKCiAgICAgICAgICAgICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpKSB7CiAgICAgICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKG1hcHBpbmcpLmZvckVhY2goZnVuY3Rpb24gKF9yZWYzKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWY0ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjMsIDIpLAogICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBfcmVmNFswXSwKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBfcmVmNFsxXTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IGRhdGFbaV1bdmFsdWVdOwoKICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHBhcnNlZERhdGEsIGtleSkpIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGtleSBhbHJlYWR5IHRoZXJlIGFkZCBlbGVtZW50IHRvIGFycmF5CiAgICAgICAgICAgICAgICAgICAgICBpZiAoWyd0aW1lJywgJ3JlZmVyZW5jZVRpbWUnXS5pbmNsdWRlcyhrZXkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IERhdGVUaW1lLmZyb21JU08odmFsKTsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoWydtZWFzdXJlbWVudCddLmluY2x1ZGVzKGtleSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIHNwZWNpYWwgYXJyYXkgY2FzZSBoZXJlCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbFswXSA9PT0gJ1snKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSB2YWwucmVwbGFjZSgvW1tcXSddKy9nLCAnJykuc3BsaXQoJywnKS5tYXAoTnVtYmVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gTnVtYmVyKHZhbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IE51bWJlci5OYU47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBwYXJzZWREYXRhW2tleV0ucHVzaCh2YWwpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBub3QgdGhlbiBzZXQgZWxlbWVudCBhcyBhcnJheQogICAgICAgICAgICAgICAgICAgICAgaWYgKFsndGltZScsICdyZWZlcmVuY2VUaW1lJ10uaW5jbHVkZXMoa2V5KSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBEYXRlVGltZS5mcm9tSVNPKHZhbCk7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFsnbWVhc3VyZW1lbnQnXS5pbmNsdWRlcyhrZXkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgYSBzcGVjaWFsIGFycmF5IGNhc2UgaGVyZQogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxbMF0gPT09ICdbJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gdmFsLnJlcGxhY2UoL1tbXF0nXSsvZywgJycpLnNwbGl0KCcsJykubWFwKE51bWJlcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IE51bWJlcih2YWwpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBOdW1iZXIuTmFOOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0YVtrZXldID0gW3ZhbF07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgICAgICAgICAgIF9sb29wKGkpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHBhcnNlZERhdGEpLmZvckVhY2goZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMiksCiAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBfcmVmMlswXSwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gX3JlZjJbMV07CgogICAgICAgICAgICAgICAgICBpbmRpY2F0b3JPYmplY3Rba2V5XSA9IHZhbHVlOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpbmRpY2F0b3JPYmplY3QuZGF0YUxvYWRGaW5pc2hlZCA9IHRydWU7CiAgICAgICAgICAgICAgfSkoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgaW5kaWNhdG9yT2JqZWN0KTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKICByZXR1cm4gX2xvYWRJbmRpY2F0b3JEYXRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0="},{"version":3,"sources":["/Volumes/WD_Elements_25A1_Media/Google Drive/___Public/__2021-Hackathon-EOD/eodash-staging/app/src/utils.js"],"names":["DateTime","axios","padLeft","str","pad","size","out","length","shTimeFunction","date","tempDate","Array","isArray","dateObj","fromISO","defaultFormat","alternativeFormat","second","hour","minute","nextDay","plus","days","toFormat","shS2TimeFunction","dateFuture","minutes","datePast","minus","template","templateRe","data","replace","stri","key","value","undefined","Error","loadIndicatorData","baseConfig","payload","Object","prototype","hasOwnProperty","call","dataLoadFinished","indicatorObject","url","dataPath","aoiID","indicator","join","get","credentials","response","mapping","colorCode","dataProvider","eoSensor","indicatorValue","inputData","measurement","referenceTime","referenceValue","time","siteName","parsedData","i","entries","forEach","val","includes","split","map","Number","NaN","push"],"mappings":"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","sourcesContent":["import { DateTime } from 'luxon';\nimport axios from 'axios';\n\nexport function padLeft(str, pad, size) {\n  let out = str;\n  while (out.length < size) {\n    out = pad + str;\n  }\n  return out;\n}\n\nexport function shTimeFunction(date) {\n  let tempDate = date;\n  if (!Array.isArray(tempDate)) {\n    tempDate = [tempDate];\n  }\n  const dateObj = DateTime.fromISO(tempDate[0]);\n  const defaultFormat = \"yyyy-MM-dd'T'HH:mm:ss\";\n  const alternativeFormat = 'yyyy-MM-dd';\n  if (dateObj.second === 0 && dateObj.hour === 0 && dateObj.minute === 0) {\n    // if only day input, format as an interval to next day\n    const nextDay = dateObj.plus({ days: 1 });\n    return `${dateObj.toFormat(alternativeFormat)}/${nextDay.toFormat(alternativeFormat)}`;\n  }\n  // otherwise return single date with full format\n  return `${dateObj.toFormat(defaultFormat)}/${dateObj.toFormat(defaultFormat)}`;\n}\n\nexport function shS2TimeFunction(date) {\n  // modifies the start and end by 1 hour to past and future\n  // this is done to fix mismatch between S2 filename\n  // and metadata time resulting in transparent image\n  let tempDate = date;\n  if (!Array.isArray(tempDate)) {\n    tempDate = [tempDate];\n  }\n  const dateObj = DateTime.fromISO(tempDate[0]);\n  const dateFuture = dateObj.plus({ minutes: 45 });\n  const datePast = dateObj.minus({ minutes: 45 });\n  const defaultFormat = \"yyyy-MM-dd'T'HH:mm:ss\";\n  return `${datePast.toFormat(defaultFormat)}/${dateFuture.toFormat(defaultFormat)}`;\n}\n\nexport function template(templateRe, str, data) {\n  return str.replace(templateRe, (stri, key) => {\n    let value = data[key];\n\n    if (value === undefined) {\n      throw new Error(`No value provided for variable ${stri}`);\n    } else if (typeof value === 'function') {\n      value = value(data);\n    }\n    return value;\n  });\n}\n\nexport async function loadIndicatorData(baseConfig, payload) {\n  let indicatorObject;\n\n  // Check if data was already loaded\n  if (Object.prototype.hasOwnProperty.call(payload, 'dataLoadFinished')\n    && payload.dataLoadFinished) {\n    indicatorObject = payload;\n  } else {\n    // Start loading of data from indicator\n    const url = `${baseConfig.dataPath}${[payload.aoiID, payload.indicator].join('-')}.json`;\n    // Fetch location data\n    const response = await axios.get(url, { credentials: 'same-origin' });\n    if (response) {\n      const { data } = response;\n      indicatorObject = payload;\n      // Set data to indicator object\n      // Convert data first\n      const mapping = {\n        colorCode: 'color_code',\n        dataProvider: 'data_provider',\n        eoSensor: 'eo_sensor',\n        indicatorValue: 'indicator_value',\n        inputData: 'input_data',\n        measurement: 'measurement_value',\n        referenceTime: 'reference_time',\n        referenceValue: 'reference_value',\n        time: 'time',\n        siteName: 'site_name_arr',\n      };\n      const parsedData = {};\n      for (let i = 0; i < data.length; i += 1) {\n        Object.entries(mapping).forEach(([key, value]) => {\n          let val = data[i][value];\n          if (Object.prototype.hasOwnProperty.call(parsedData, key)) {\n            // If key already there add element to array\n            if (['time', 'referenceTime'].includes(key)) {\n              val = DateTime.fromISO(val);\n            } else if (['measurement'].includes(key)) {\n              if (val.length > 0) {\n                // We have a special array case here\n                if (val[0] === '[') {\n                  val = val.replace(/[[\\]']+/g, '').split(',').map(Number);\n                } else {\n                  val = Number(val);\n                }\n              } else {\n                val = Number.NaN;\n              }\n            }\n            parsedData[key].push(val);\n          } else {\n            // If not then set element as array\n            if (['time', 'referenceTime'].includes(key)) {\n              val = DateTime.fromISO(val);\n            } else if (['measurement'].includes(key)) {\n              if (val.length > 0) {\n                // We have a special array case here\n                if (val[0] === '[') {\n                  val = val.replace(/[[\\]']+/g, '').split(',').map(Number);\n                } else {\n                  val = Number(val);\n                }\n              } else {\n                val = Number.NaN;\n              }\n            }\n            parsedData[key] = [val];\n          }\n        });\n      }\n      Object.entries(parsedData).forEach(([key, value]) => {\n        indicatorObject[key] = value;\n      });\n      indicatorObject.dataLoadFinished = true;\n    }\n  }\n  return indicatorObject;\n}\n"]}]}