{"remainingRequest":"/Users/8ps/Downloads/eodash-staging/app/node_modules/thread-loader/dist/cjs.js!/Users/8ps/Downloads/eodash-staging/app/node_modules/babel-loader/lib/index.js!/Users/8ps/Downloads/eodash-staging/app/node_modules/vuetify/lib/components/VDataTable/VDataTable.js","dependencies":[{"path":"/Users/8ps/Downloads/eodash-staging/app/node_modules/vuetify/lib/components/VDataTable/VDataTable.js","mtime":1624878747000},{"path":"/Users/8ps/Downloads/eodash-staging/app/node_modules/cache-loader/dist/cjs.js","mtime":1624878747000},{"path":"/Users/8ps/Downloads/eodash-staging/app/node_modules/thread-loader/dist/cjs.js","mtime":1624878747000},{"path":"/Users/8ps/Downloads/eodash-staging/app/node_modules/babel-loader/lib/index.js","mtime":1624878747000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy84cHMvRG93bmxvYWRzL2VvZGFzaC1zdGFnaW5nL2FwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCBfdHlwZW9mIGZyb20gIi9Vc2Vycy84cHMvRG93bmxvYWRzL2VvZGFzaC1zdGFnaW5nL2FwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzLzhwcy9Eb3dubG9hZHMvZW9kYXNoLXN0YWdpbmcvYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvVkRhdGFUYWJsZS9WRGF0YVRhYmxlLnNhc3MiOyAvLyBDb21wb25lbnRzCgppbXBvcnQgeyBWRGF0YSB9IGZyb20gJy4uL1ZEYXRhJzsKaW1wb3J0IHsgVkRhdGFGb290ZXIsIFZEYXRhSXRlcmF0b3IgfSBmcm9tICcuLi9WRGF0YUl0ZXJhdG9yJzsKaW1wb3J0IFZCdG4gZnJvbSAnLi4vVkJ0bic7CmltcG9ydCBWRGF0YVRhYmxlSGVhZGVyIGZyb20gJy4vVkRhdGFUYWJsZUhlYWRlcic7IC8vIGltcG9ydCBWVmlydHVhbFRhYmxlIGZyb20gJy4vVlZpcnR1YWxUYWJsZScKCmltcG9ydCBWSWNvbiBmcm9tICcuLi9WSWNvbic7CmltcG9ydCBSb3cgZnJvbSAnLi9Sb3cnOwppbXBvcnQgUm93R3JvdXAgZnJvbSAnLi9Sb3dHcm91cCc7CmltcG9ydCBWU2ltcGxlQ2hlY2tib3ggZnJvbSAnLi4vVkNoZWNrYm94L1ZTaW1wbGVDaGVja2JveCc7CmltcG9ydCBWU2ltcGxlVGFibGUgZnJvbSAnLi9WU2ltcGxlVGFibGUnOwppbXBvcnQgTW9iaWxlUm93IGZyb20gJy4vTW9iaWxlUm93JzsgLy8gTWl4aW5zCgppbXBvcnQgTG9hZGFibGUgZnJvbSAnLi4vLi4vbWl4aW5zL2xvYWRhYmxlJzsgLy8gRGlyZWN0aXZlcwoKaW1wb3J0IHJpcHBsZSBmcm9tICcuLi8uLi9kaXJlY3RpdmVzL3JpcHBsZSc7IC8vIEhlbHBlcnMKCmltcG9ydCBtaXhpbnMgZnJvbSAnLi4vLi4vdXRpbC9taXhpbnMnOwppbXBvcnQgeyBkZWVwRXF1YWwsIGdldE9iamVjdFZhbHVlQnlQYXRoLCBnZXRQcmVmaXhlZFNjb3BlZFNsb3RzLCBnZXRTbG90LCBkZWZhdWx0RmlsdGVyLCBjYW1lbGl6ZU9iamVjdEtleXMsIGdldFByb3BlcnR5RnJvbUl0ZW0gfSBmcm9tICcuLi8uLi91dGlsL2hlbHBlcnMnOwppbXBvcnQgeyBicmVha2luZyB9IGZyb20gJy4uLy4uL3V0aWwvY29uc29sZSc7CmltcG9ydCB7IG1lcmdlQ2xhc3NlcyB9IGZyb20gJy4uLy4uL3V0aWwvbWVyZ2VEYXRhJzsKCmZ1bmN0aW9uIGZpbHRlckZuKGl0ZW0sIHNlYXJjaCwgZmlsdGVyKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChoZWFkZXIpIHsKICAgIHZhciB2YWx1ZSA9IGdldE9iamVjdFZhbHVlQnlQYXRoKGl0ZW0sIGhlYWRlci52YWx1ZSk7CiAgICByZXR1cm4gaGVhZGVyLmZpbHRlciA/IGhlYWRlci5maWx0ZXIodmFsdWUsIHNlYXJjaCwgaXRlbSkgOiBmaWx0ZXIodmFsdWUsIHNlYXJjaCwgaXRlbSk7CiAgfTsKfQoKZnVuY3Rpb24gc2VhcmNoVGFibGVJdGVtcyhpdGVtcywgc2VhcmNoLCBoZWFkZXJzV2l0aEN1c3RvbUZpbHRlcnMsIGhlYWRlcnNXaXRob3V0Q3VzdG9tRmlsdGVycywgY3VzdG9tRmlsdGVyKSB7CiAgc2VhcmNoID0gdHlwZW9mIHNlYXJjaCA9PT0gJ3N0cmluZycgPyBzZWFyY2gudHJpbSgpIDogbnVsbDsKICByZXR1cm4gaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAvLyBIZWFkZXJzIHdpdGggY3VzdG9tIGZpbHRlcnMgYXJlIGV2YWx1YXRlZCB3aGV0aGVyIG9yIG5vdCBhIHNlYXJjaCB0ZXJtIGhhcyBiZWVuIHByb3ZpZGVkLgogICAgLy8gV2UgbmVlZCB0byBtYXRjaCBldmVyeSBmaWx0ZXIgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIHJlc3VsdHMuCiAgICB2YXIgbWF0Y2hlc0NvbHVtbkZpbHRlcnMgPSBoZWFkZXJzV2l0aEN1c3RvbUZpbHRlcnMuZXZlcnkoZmlsdGVyRm4oaXRlbSwgc2VhcmNoLCBkZWZhdWx0RmlsdGVyKSk7IC8vIEhlYWRlcnMgd2l0aG91dCBjdXN0b20gZmlsdGVycyBhcmUgb25seSBmaWx0ZXJlZCBieSB0aGUgYHNlYXJjaGAgcHJvcGVydHkgaWYgaXQgaXMgZGVmaW5lZC4KICAgIC8vIFdlIG9ubHkgbmVlZCBhIHNpbmdsZSBjb2x1bW4gdG8gbWF0Y2ggdGhlIHNlYXJjaCB0ZXJtIHRvIGJlIGluY2x1ZGVkIGluIHRoZSByZXN1bHRzLgoKICAgIHZhciBtYXRjaGVzU2VhcmNoVGVybSA9ICFzZWFyY2ggfHwgaGVhZGVyc1dpdGhvdXRDdXN0b21GaWx0ZXJzLnNvbWUoZmlsdGVyRm4oaXRlbSwgc2VhcmNoLCBjdXN0b21GaWx0ZXIpKTsKICAgIHJldHVybiBtYXRjaGVzQ29sdW1uRmlsdGVycyAmJiBtYXRjaGVzU2VhcmNoVGVybTsKICB9KTsKfQovKiBAdnVlL2NvbXBvbmVudCAqLwoKCmV4cG9ydCBkZWZhdWx0IG1peGlucyhWRGF0YUl0ZXJhdG9yLCBMb2FkYWJsZSkuZXh0ZW5kKHsKICBuYW1lOiAndi1kYXRhLXRhYmxlJywKICAvLyBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlL2lzc3Vlcy82ODcyCiAgZGlyZWN0aXZlczogewogICAgcmlwcGxlOiByaXBwbGUKICB9LAogIHByb3BzOiB7CiAgICBoZWFkZXJzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICBzaG93U2VsZWN0OiBCb29sZWFuLAogICAgY2hlY2tib3hDb2xvcjogU3RyaW5nLAogICAgc2hvd0V4cGFuZDogQm9vbGVhbiwKICAgIHNob3dHcm91cEJ5OiBCb29sZWFuLAogICAgLy8gVE9ETzogRml4CiAgICAvLyB2aXJ0dWFsUm93czogQm9vbGVhbiwKICAgIGhlaWdodDogW051bWJlciwgU3RyaW5nXSwKICAgIGhpZGVEZWZhdWx0SGVhZGVyOiBCb29sZWFuLAogICAgY2FwdGlvbjogU3RyaW5nLAogICAgZGVuc2U6IEJvb2xlYW4sCiAgICBoZWFkZXJQcm9wczogT2JqZWN0LAogICAgY2FsY3VsYXRlV2lkdGhzOiBCb29sZWFuLAogICAgZml4ZWRIZWFkZXI6IEJvb2xlYW4sCiAgICBoZWFkZXJzTGVuZ3RoOiBOdW1iZXIsCiAgICBleHBhbmRJY29uOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJyRleHBhbmQnCiAgICB9LAogICAgY3VzdG9tRmlsdGVyOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICBkZWZhdWx0OiBkZWZhdWx0RmlsdGVyCiAgICB9LAogICAgaXRlbUNsYXNzOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIEZ1bmN0aW9uXSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CiAgICB9LAogICAgbG9hZGVySGVpZ2h0OiB7CiAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sCiAgICAgIGRlZmF1bHQ6IDQKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbnRlcm5hbEdyb3VwQnk6IFtdLAogICAgICBvcGVuQ2FjaGU6IHt9LAogICAgICB3aWR0aHM6IFtdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNvbXB1dGVkSGVhZGVyczogZnVuY3Rpb24gY29tcHV0ZWRIZWFkZXJzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLmhlYWRlcnMpIHJldHVybiBbXTsKICAgICAgdmFyIGhlYWRlcnMgPSB0aGlzLmhlYWRlcnMuZmlsdGVyKGZ1bmN0aW9uIChoKSB7CiAgICAgICAgcmV0dXJuIGgudmFsdWUgPT09IHVuZGVmaW5lZCB8fCAhX3RoaXMuaW50ZXJuYWxHcm91cEJ5LmZpbmQoZnVuY3Rpb24gKHYpIHsKICAgICAgICAgIHJldHVybiB2ID09PSBoLnZhbHVlOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdmFyIGRlZmF1bHRIZWFkZXIgPSB7CiAgICAgICAgdGV4dDogJycsCiAgICAgICAgc29ydGFibGU6IGZhbHNlLAogICAgICAgIHdpZHRoOiAnMXB4JwogICAgICB9OwoKICAgICAgaWYgKHRoaXMuc2hvd1NlbGVjdCkgewogICAgICAgIHZhciBpbmRleCA9IGhlYWRlcnMuZmluZEluZGV4KGZ1bmN0aW9uIChoKSB7CiAgICAgICAgICByZXR1cm4gaC52YWx1ZSA9PT0gJ2RhdGEtdGFibGUtc2VsZWN0JzsKICAgICAgICB9KTsKICAgICAgICBpZiAoaW5kZXggPCAwKSBoZWFkZXJzLnVuc2hpZnQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0SGVhZGVyKSwge30sIHsKICAgICAgICAgIHZhbHVlOiAnZGF0YS10YWJsZS1zZWxlY3QnCiAgICAgICAgfSkpO2Vsc2UgaGVhZGVycy5zcGxpY2UoaW5kZXgsIDEsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdEhlYWRlciksIGhlYWRlcnNbaW5kZXhdKSk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNob3dFeHBhbmQpIHsKICAgICAgICB2YXIgX2luZGV4ID0gaGVhZGVycy5maW5kSW5kZXgoZnVuY3Rpb24gKGgpIHsKICAgICAgICAgIHJldHVybiBoLnZhbHVlID09PSAnZGF0YS10YWJsZS1leHBhbmQnOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoX2luZGV4IDwgMCkgaGVhZGVycy51bnNoaWZ0KF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdEhlYWRlciksIHt9LCB7CiAgICAgICAgICB2YWx1ZTogJ2RhdGEtdGFibGUtZXhwYW5kJwogICAgICAgIH0pKTtlbHNlIGhlYWRlcnMuc3BsaWNlKF9pbmRleCwgMSwgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0SGVhZGVyKSwgaGVhZGVyc1tfaW5kZXhdKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBoZWFkZXJzOwogICAgfSwKICAgIGNvbHNwYW5BdHRyczogZnVuY3Rpb24gY29sc3BhbkF0dHJzKCkgewogICAgICByZXR1cm4gdGhpcy5pc01vYmlsZSA/IHVuZGVmaW5lZCA6IHsKICAgICAgICBjb2xzcGFuOiB0aGlzLmhlYWRlcnNMZW5ndGggfHwgdGhpcy5jb21wdXRlZEhlYWRlcnMubGVuZ3RoCiAgICAgIH07CiAgICB9LAogICAgY29sdW1uU29ydGVyczogZnVuY3Rpb24gY29sdW1uU29ydGVycygpIHsKICAgICAgcmV0dXJuIHRoaXMuY29tcHV0ZWRIZWFkZXJzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBoZWFkZXIpIHsKICAgICAgICBpZiAoaGVhZGVyLnNvcnQpIGFjY1toZWFkZXIudmFsdWVdID0gaGVhZGVyLnNvcnQ7CiAgICAgICAgcmV0dXJuIGFjYzsKICAgICAgfSwge30pOwogICAgfSwKICAgIGhlYWRlcnNXaXRoQ3VzdG9tRmlsdGVyczogZnVuY3Rpb24gaGVhZGVyc1dpdGhDdXN0b21GaWx0ZXJzKCkgewogICAgICByZXR1cm4gdGhpcy5oZWFkZXJzLmZpbHRlcihmdW5jdGlvbiAoaGVhZGVyKSB7CiAgICAgICAgcmV0dXJuIGhlYWRlci5maWx0ZXIgJiYgKCFoZWFkZXIuaGFzT3duUHJvcGVydHkoJ2ZpbHRlcmFibGUnKSB8fCBoZWFkZXIuZmlsdGVyYWJsZSA9PT0gdHJ1ZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGhlYWRlcnNXaXRob3V0Q3VzdG9tRmlsdGVyczogZnVuY3Rpb24gaGVhZGVyc1dpdGhvdXRDdXN0b21GaWx0ZXJzKCkgewogICAgICByZXR1cm4gdGhpcy5oZWFkZXJzLmZpbHRlcihmdW5jdGlvbiAoaGVhZGVyKSB7CiAgICAgICAgcmV0dXJuICFoZWFkZXIuZmlsdGVyICYmICghaGVhZGVyLmhhc093blByb3BlcnR5KCdmaWx0ZXJhYmxlJykgfHwgaGVhZGVyLmZpbHRlcmFibGUgPT09IHRydWUpOwogICAgICB9KTsKICAgIH0sCiAgICBzYW5pdGl6ZWRIZWFkZXJQcm9wczogZnVuY3Rpb24gc2FuaXRpemVkSGVhZGVyUHJvcHMoKSB7CiAgICAgIHJldHVybiBjYW1lbGl6ZU9iamVjdEtleXModGhpcy5oZWFkZXJQcm9wcyk7CiAgICB9LAogICAgY29tcHV0ZWRJdGVtc1BlclBhZ2U6IGZ1bmN0aW9uIGNvbXB1dGVkSXRlbXNQZXJQYWdlKCkgewogICAgICB2YXIgaXRlbXNQZXJQYWdlID0gdGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5pdGVtc1BlclBhZ2UgPyB0aGlzLm9wdGlvbnMuaXRlbXNQZXJQYWdlIDogdGhpcy5pdGVtc1BlclBhZ2U7CiAgICAgIHZhciBpdGVtc1BlclBhZ2VPcHRpb25zID0gdGhpcy5zYW5pdGl6ZWRGb290ZXJQcm9wcy5pdGVtc1BlclBhZ2VPcHRpb25zOwoKICAgICAgaWYgKGl0ZW1zUGVyUGFnZU9wdGlvbnMgJiYgIWl0ZW1zUGVyUGFnZU9wdGlvbnMuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiB0eXBlb2YgaXRlbSA9PT0gJ251bWJlcicgPyBpdGVtID09PSBpdGVtc1BlclBhZ2UgOiBpdGVtLnZhbHVlID09PSBpdGVtc1BlclBhZ2U7CiAgICAgIH0pKSB7CiAgICAgICAgdmFyIGZpcnN0T3B0aW9uID0gaXRlbXNQZXJQYWdlT3B0aW9uc1swXTsKICAgICAgICByZXR1cm4gX3R5cGVvZihmaXJzdE9wdGlvbikgPT09ICdvYmplY3QnID8gZmlyc3RPcHRpb24udmFsdWUgOiBmaXJzdE9wdGlvbjsKICAgICAgfQoKICAgICAgcmV0dXJuIGl0ZW1zUGVyUGFnZTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICB2YXIgYnJlYWtpbmdQcm9wcyA9IFtbJ3NvcnQtaWNvbicsICdoZWFkZXItcHJvcHMuc29ydC1pY29uJ10sIFsnaGlkZS1oZWFkZXJzJywgJ2hpZGUtZGVmYXVsdC1oZWFkZXInXSwgWydzZWxlY3QtYWxsJywgJ3Nob3ctc2VsZWN0J11dOwogICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCiAgICBicmVha2luZ1Byb3BzLmZvckVhY2goZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgdmFyIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMiksCiAgICAgICAgICBvcmlnaW5hbCA9IF9yZWYyWzBdLAogICAgICAgICAgcmVwbGFjZW1lbnQgPSBfcmVmMlsxXTsKCiAgICAgIGlmIChfdGhpczIuJGF0dHJzLmhhc093blByb3BlcnR5KG9yaWdpbmFsKSkgYnJlYWtpbmcob3JpZ2luYWwsIHJlcGxhY2VtZW50LCBfdGhpczIpOwogICAgfSk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgLy8gaWYgKCghdGhpcy5zb3J0QnkgfHwgIXRoaXMuc29ydEJ5Lmxlbmd0aCkgJiYgKCF0aGlzLm9wdGlvbnMuc29ydEJ5IHx8ICF0aGlzLm9wdGlvbnMuc29ydEJ5Lmxlbmd0aCkpIHsKICAgIC8vICAgY29uc3QgZmlyc3RTb3J0YWJsZSA9IHRoaXMuaGVhZGVycy5maW5kKGggPT4gISgnc29ydGFibGUnIGluIGgpIHx8ICEhaC5zb3J0YWJsZSkKICAgIC8vICAgaWYgKGZpcnN0U29ydGFibGUpIHRoaXMudXBkYXRlT3B0aW9ucyh7IHNvcnRCeTogW2ZpcnN0U29ydGFibGUudmFsdWVdLCBzb3J0RGVzYzogW2ZhbHNlXSB9KQogICAgLy8gfQogICAgaWYgKHRoaXMuY2FsY3VsYXRlV2lkdGhzKSB7CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmNhbGNXaWR0aHMpOwogICAgICB0aGlzLmNhbGNXaWR0aHMoKTsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICBpZiAodGhpcy5jYWxjdWxhdGVXaWR0aHMpIHsKICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuY2FsY1dpZHRocyk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBjYWxjV2lkdGhzOiBmdW5jdGlvbiBjYWxjV2lkdGhzKCkgewogICAgICB0aGlzLndpZHRocyA9IEFycmF5LmZyb20odGhpcy4kZWwucXVlcnlTZWxlY3RvckFsbCgndGgnKSkubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUuY2xpZW50V2lkdGg7CiAgICAgIH0pOwogICAgfSwKICAgIGN1c3RvbUZpbHRlcldpdGhDb2x1bW5zOiBmdW5jdGlvbiBjdXN0b21GaWx0ZXJXaXRoQ29sdW1ucyhpdGVtcywgc2VhcmNoKSB7CiAgICAgIHJldHVybiBzZWFyY2hUYWJsZUl0ZW1zKGl0ZW1zLCBzZWFyY2gsIHRoaXMuaGVhZGVyc1dpdGhDdXN0b21GaWx0ZXJzLCB0aGlzLmhlYWRlcnNXaXRob3V0Q3VzdG9tRmlsdGVycywgdGhpcy5jdXN0b21GaWx0ZXIpOwogICAgfSwKICAgIGN1c3RvbVNvcnRXaXRoSGVhZGVyczogZnVuY3Rpb24gY3VzdG9tU29ydFdpdGhIZWFkZXJzKGl0ZW1zLCBzb3J0QnksIHNvcnREZXNjLCBsb2NhbGUpIHsKICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tU29ydChpdGVtcywgc29ydEJ5LCBzb3J0RGVzYywgbG9jYWxlLCB0aGlzLmNvbHVtblNvcnRlcnMpOwogICAgfSwKICAgIGNyZWF0ZUl0ZW1Qcm9wczogZnVuY3Rpb24gY3JlYXRlSXRlbVByb3BzKGl0ZW0sIGluZGV4KSB7CiAgICAgIHZhciBwcm9wcyA9IFZEYXRhSXRlcmF0b3Iub3B0aW9ucy5tZXRob2RzLmNyZWF0ZUl0ZW1Qcm9wcy5jYWxsKHRoaXMsIGl0ZW0sIGluZGV4KTsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ocHJvcHMsIHsKICAgICAgICBoZWFkZXJzOiB0aGlzLmNvbXB1dGVkSGVhZGVycwogICAgICB9KTsKICAgIH0sCiAgICBnZW5DYXB0aW9uOiBmdW5jdGlvbiBnZW5DYXB0aW9uKHByb3BzKSB7CiAgICAgIGlmICh0aGlzLmNhcHRpb24pIHJldHVybiBbdGhpcy4kY3JlYXRlRWxlbWVudCgnY2FwdGlvbicsIFt0aGlzLmNhcHRpb25dKV07CiAgICAgIHJldHVybiBnZXRTbG90KHRoaXMsICdjYXB0aW9uJywgcHJvcHMsIHRydWUpOwogICAgfSwKICAgIGdlbkNvbGdyb3VwOiBmdW5jdGlvbiBnZW5Db2xncm91cChwcm9wcykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KCdjb2xncm91cCcsIHRoaXMuY29tcHV0ZWRIZWFkZXJzLm1hcChmdW5jdGlvbiAoaGVhZGVyKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMy4kY3JlYXRlRWxlbWVudCgnY29sJywgewogICAgICAgICAgY2xhc3M6IHsKICAgICAgICAgICAgZGl2aWRlcjogaGVhZGVyLmRpdmlkZXIKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSkpOwogICAgfSwKICAgIGdlbkxvYWRpbmc6IGZ1bmN0aW9uIGdlbkxvYWRpbmcoKSB7CiAgICAgIHZhciB0aCA9IHRoaXMuJGNyZWF0ZUVsZW1lbnQoJ3RoJywgewogICAgICAgIHN0YXRpY0NsYXNzOiAnY29sdW1uJywKICAgICAgICBhdHRyczogdGhpcy5jb2xzcGFuQXR0cnMKICAgICAgfSwgW3RoaXMuZ2VuUHJvZ3Jlc3MoKV0pOwogICAgICB2YXIgdHIgPSB0aGlzLiRjcmVhdGVFbGVtZW50KCd0cicsIHsKICAgICAgICBzdGF0aWNDbGFzczogJ3YtZGF0YS10YWJsZV9fcHJvZ3Jlc3MnCiAgICAgIH0sIFt0aF0pOwogICAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudCgndGhlYWQnLCBbdHJdKTsKICAgIH0sCiAgICBnZW5IZWFkZXJzOiBmdW5jdGlvbiBnZW5IZWFkZXJzKHByb3BzKSB7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuc2FuaXRpemVkSGVhZGVyUHJvcHMpLCB7fSwgewogICAgICAgICAgaGVhZGVyczogdGhpcy5jb21wdXRlZEhlYWRlcnMsCiAgICAgICAgICBvcHRpb25zOiBwcm9wcy5vcHRpb25zLAogICAgICAgICAgbW9iaWxlOiB0aGlzLmlzTW9iaWxlLAogICAgICAgICAgc2hvd0dyb3VwQnk6IHRoaXMuc2hvd0dyb3VwQnksCiAgICAgICAgICBjaGVja2JveENvbG9yOiB0aGlzLmNoZWNrYm94Q29sb3IsCiAgICAgICAgICBzb21lSXRlbXM6IHRoaXMuc29tZUl0ZW1zLAogICAgICAgICAgZXZlcnlJdGVtOiB0aGlzLmV2ZXJ5SXRlbSwKICAgICAgICAgIHNpbmdsZVNlbGVjdDogdGhpcy5zaW5nbGVTZWxlY3QsCiAgICAgICAgICBkaXNhYmxlU29ydDogdGhpcy5kaXNhYmxlU29ydAogICAgICAgIH0pLAogICAgICAgIG9uOiB7CiAgICAgICAgICBzb3J0OiBwcm9wcy5zb3J0LAogICAgICAgICAgZ3JvdXA6IHByb3BzLmdyb3VwLAogICAgICAgICAgJ3RvZ2dsZS1zZWxlY3QtYWxsJzogdGhpcy50b2dnbGVTZWxlY3RBbGwKICAgICAgICB9CiAgICAgIH07IC8vIFRPRE86IHJlbmFtZSB0byAnaGVhZCc/ICh0aGVhZCwgdGJvZHksIHRmb290KQoKICAgICAgdmFyIGNoaWxkcmVuID0gW2dldFNsb3QodGhpcywgJ2hlYWRlcicsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGF0YSksIHt9LCB7CiAgICAgICAgaXNNb2JpbGU6IHRoaXMuaXNNb2JpbGUKICAgICAgfSkpXTsKCiAgICAgIGlmICghdGhpcy5oaWRlRGVmYXVsdEhlYWRlcikgewogICAgICAgIHZhciBzY29wZWRTbG90cyA9IGdldFByZWZpeGVkU2NvcGVkU2xvdHMoJ2hlYWRlci4nLCB0aGlzLiRzY29wZWRTbG90cyk7CiAgICAgICAgY2hpbGRyZW4ucHVzaCh0aGlzLiRjcmVhdGVFbGVtZW50KFZEYXRhVGFibGVIZWFkZXIsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGF0YSksIHt9LCB7CiAgICAgICAgICBzY29wZWRTbG90czogc2NvcGVkU2xvdHMKICAgICAgICB9KSkpOwogICAgICB9CgogICAgICBpZiAodGhpcy5sb2FkaW5nKSBjaGlsZHJlbi5wdXNoKHRoaXMuZ2VuTG9hZGluZygpKTsKICAgICAgcmV0dXJuIGNoaWxkcmVuOwogICAgfSwKICAgIGdlbkVtcHR5V3JhcHBlcjogZnVuY3Rpb24gZ2VuRW1wdHlXcmFwcGVyKGNvbnRlbnQpIHsKICAgICAgcmV0dXJuIHRoaXMuJGNyZWF0ZUVsZW1lbnQoJ3RyJywgewogICAgICAgIHN0YXRpY0NsYXNzOiAndi1kYXRhLXRhYmxlX19lbXB0eS13cmFwcGVyJwogICAgICB9LCBbdGhpcy4kY3JlYXRlRWxlbWVudCgndGQnLCB7CiAgICAgICAgYXR0cnM6IHRoaXMuY29sc3BhbkF0dHJzCiAgICAgIH0sIGNvbnRlbnQpXSk7CiAgICB9LAogICAgZ2VuSXRlbXM6IGZ1bmN0aW9uIGdlbkl0ZW1zKGl0ZW1zLCBwcm9wcykgewogICAgICB2YXIgZW1wdHkgPSB0aGlzLmdlbkVtcHR5KHByb3BzLm9yaWdpbmFsSXRlbXNMZW5ndGgsIHByb3BzLnBhZ2luYXRpb24uaXRlbXNMZW5ndGgpOwogICAgICBpZiAoZW1wdHkpIHJldHVybiBbZW1wdHldOwogICAgICByZXR1cm4gcHJvcHMuZ3JvdXBlZEl0ZW1zID8gdGhpcy5nZW5Hcm91cGVkUm93cyhwcm9wcy5ncm91cGVkSXRlbXMsIHByb3BzKSA6IHRoaXMuZ2VuUm93cyhpdGVtcywgcHJvcHMpOwogICAgfSwKICAgIGdlbkdyb3VwZWRSb3dzOiBmdW5jdGlvbiBnZW5Hcm91cGVkUm93cyhncm91cGVkSXRlbXMsIHByb3BzKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIGdyb3VwZWRJdGVtcy5tYXAoZnVuY3Rpb24gKGdyb3VwKSB7CiAgICAgICAgaWYgKCFfdGhpczQub3BlbkNhY2hlLmhhc093blByb3BlcnR5KGdyb3VwLm5hbWUpKSBfdGhpczQuJHNldChfdGhpczQub3BlbkNhY2hlLCBncm91cC5uYW1lLCB0cnVlKTsKCiAgICAgICAgaWYgKF90aGlzNC4kc2NvcGVkU2xvdHMuZ3JvdXApIHsKICAgICAgICAgIHJldHVybiBfdGhpczQuJHNjb3BlZFNsb3RzLmdyb3VwKHsKICAgICAgICAgICAgZ3JvdXA6IGdyb3VwLm5hbWUsCiAgICAgICAgICAgIG9wdGlvbnM6IHByb3BzLm9wdGlvbnMsCiAgICAgICAgICAgIGlzTW9iaWxlOiBfdGhpczQuaXNNb2JpbGUsCiAgICAgICAgICAgIGl0ZW1zOiBncm91cC5pdGVtcywKICAgICAgICAgICAgaGVhZGVyczogX3RoaXM0LmNvbXB1dGVkSGVhZGVycwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBfdGhpczQuZ2VuRGVmYXVsdEdyb3VwZWRSb3coZ3JvdXAubmFtZSwgZ3JvdXAuaXRlbXMsIHByb3BzKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGdlbkRlZmF1bHRHcm91cGVkUm93OiBmdW5jdGlvbiBnZW5EZWZhdWx0R3JvdXBlZFJvdyhncm91cCwgaXRlbXMsIHByb3BzKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdmFyIGlzT3BlbiA9ICEhdGhpcy5vcGVuQ2FjaGVbZ3JvdXBdOwogICAgICB2YXIgY2hpbGRyZW4gPSBbdGhpcy4kY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnLCB7CiAgICAgICAgc2xvdDogJ3Jvdy5jb250ZW50JwogICAgICB9LCB0aGlzLmdlblJvd3MoaXRlbXMsIHByb3BzKSldOwoKICAgICAgdmFyIHRvZ2dsZUZuID0gZnVuY3Rpb24gdG9nZ2xlRm4oKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNS4kc2V0KF90aGlzNS5vcGVuQ2FjaGUsIGdyb3VwLCAhX3RoaXM1Lm9wZW5DYWNoZVtncm91cF0pOwogICAgICB9OwoKICAgICAgdmFyIHJlbW92ZUZuID0gZnVuY3Rpb24gcmVtb3ZlRm4oKSB7CiAgICAgICAgcmV0dXJuIHByb3BzLnVwZGF0ZU9wdGlvbnMoewogICAgICAgICAgZ3JvdXBCeTogW10sCiAgICAgICAgICBncm91cERlc2M6IFtdCiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICBpZiAodGhpcy4kc2NvcGVkU2xvdHNbJ2dyb3VwLmhlYWRlciddKSB7CiAgICAgICAgY2hpbGRyZW4udW5zaGlmdCh0aGlzLiRjcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScsIHsKICAgICAgICAgIHNsb3Q6ICdjb2x1bW4uaGVhZGVyJwogICAgICAgIH0sIFt0aGlzLiRzY29wZWRTbG90c1snZ3JvdXAuaGVhZGVyJ10oewogICAgICAgICAgZ3JvdXA6IGdyb3VwLAogICAgICAgICAgZ3JvdXBCeTogcHJvcHMub3B0aW9ucy5ncm91cEJ5LAogICAgICAgICAgaXNNb2JpbGU6IHRoaXMuaXNNb2JpbGUsCiAgICAgICAgICBpdGVtczogaXRlbXMsCiAgICAgICAgICBoZWFkZXJzOiB0aGlzLmNvbXB1dGVkSGVhZGVycywKICAgICAgICAgIGlzT3BlbjogaXNPcGVuLAogICAgICAgICAgdG9nZ2xlOiB0b2dnbGVGbiwKICAgICAgICAgIHJlbW92ZTogcmVtb3ZlRm4KICAgICAgICB9KV0pKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgdG9nZ2xlID0gdGhpcy4kY3JlYXRlRWxlbWVudChWQnRuLCB7CiAgICAgICAgICBzdGF0aWNDbGFzczogJ21hLTAnLAogICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgaWNvbjogdHJ1ZSwKICAgICAgICAgICAgc21hbGw6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICBjbGljazogdG9nZ2xlRm4KICAgICAgICAgIH0KICAgICAgICB9LCBbdGhpcy4kY3JlYXRlRWxlbWVudChWSWNvbiwgW2lzT3BlbiA/ICckbWludXMnIDogJyRwbHVzJ10pXSk7CiAgICAgICAgdmFyIHJlbW92ZSA9IHRoaXMuJGNyZWF0ZUVsZW1lbnQoVkJ0biwgewogICAgICAgICAgc3RhdGljQ2xhc3M6ICdtYS0wJywKICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgIGljb246IHRydWUsCiAgICAgICAgICAgIHNtYWxsOiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgY2xpY2s6IHJlbW92ZUZuCiAgICAgICAgICB9CiAgICAgICAgfSwgW3RoaXMuJGNyZWF0ZUVsZW1lbnQoVkljb24sIFsnJGNsb3NlJ10pXSk7CiAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMuJGNyZWF0ZUVsZW1lbnQoJ3RkJywgewogICAgICAgICAgc3RhdGljQ2xhc3M6ICd0ZXh0LXN0YXJ0JywKICAgICAgICAgIGF0dHJzOiB0aGlzLmNvbHNwYW5BdHRycwogICAgICAgIH0sIFt0b2dnbGUsICIiLmNvbmNhdChwcm9wcy5vcHRpb25zLmdyb3VwQnlbMF0sICI6ICIpLmNvbmNhdChncm91cCksIHJlbW92ZV0pOwogICAgICAgIGNoaWxkcmVuLnVuc2hpZnQodGhpcy4kY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnLCB7CiAgICAgICAgICBzbG90OiAnY29sdW1uLmhlYWRlcicKICAgICAgICB9LCBbY29sdW1uXSkpOwogICAgICB9CgogICAgICBpZiAodGhpcy4kc2NvcGVkU2xvdHNbJ2dyb3VwLnN1bW1hcnknXSkgewogICAgICAgIGNoaWxkcmVuLnB1c2godGhpcy4kY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnLCB7CiAgICAgICAgICBzbG90OiAnY29sdW1uLnN1bW1hcnknCiAgICAgICAgfSwgW3RoaXMuJHNjb3BlZFNsb3RzWydncm91cC5zdW1tYXJ5J10oewogICAgICAgICAgZ3JvdXA6IGdyb3VwLAogICAgICAgICAgZ3JvdXBCeTogcHJvcHMub3B0aW9ucy5ncm91cEJ5LAogICAgICAgICAgaXNNb2JpbGU6IHRoaXMuaXNNb2JpbGUsCiAgICAgICAgICBpdGVtczogaXRlbXMsCiAgICAgICAgICBoZWFkZXJzOiB0aGlzLmNvbXB1dGVkSGVhZGVycywKICAgICAgICAgIGlzT3BlbjogaXNPcGVuLAogICAgICAgICAgdG9nZ2xlOiB0b2dnbGVGbgogICAgICAgIH0pXSkpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudChSb3dHcm91cCwgewogICAgICAgIGtleTogZ3JvdXAsCiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIHZhbHVlOiBpc09wZW4KICAgICAgICB9CiAgICAgIH0sIGNoaWxkcmVuKTsKICAgIH0sCiAgICBnZW5Sb3dzOiBmdW5jdGlvbiBnZW5Sb3dzKGl0ZW1zLCBwcm9wcykgewogICAgICByZXR1cm4gdGhpcy4kc2NvcGVkU2xvdHMuaXRlbSA/IHRoaXMuZ2VuU2NvcGVkUm93cyhpdGVtcywgcHJvcHMpIDogdGhpcy5nZW5EZWZhdWx0Um93cyhpdGVtcywgcHJvcHMpOwogICAgfSwKICAgIGdlblNjb3BlZFJvd3M6IGZ1bmN0aW9uIGdlblNjb3BlZFJvd3MoaXRlbXMsIHByb3BzKSB7CiAgICAgIHZhciByb3dzID0gW107CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGl0ZW0gPSBpdGVtc1tpXTsKICAgICAgICByb3dzLnB1c2godGhpcy4kc2NvcGVkU2xvdHMuaXRlbShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuY3JlYXRlSXRlbVByb3BzKGl0ZW0sIGkpKSwge30sIHsKICAgICAgICAgIGlzTW9iaWxlOiB0aGlzLmlzTW9iaWxlCiAgICAgICAgfSkpKTsKCiAgICAgICAgaWYgKHRoaXMuaXNFeHBhbmRlZChpdGVtKSkgewogICAgICAgICAgcm93cy5wdXNoKHRoaXMuJHNjb3BlZFNsb3RzWydleHBhbmRlZC1pdGVtJ10oewogICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmNvbXB1dGVkSGVhZGVycywKICAgICAgICAgICAgaXNNb2JpbGU6IHRoaXMuaXNNb2JpbGUsCiAgICAgICAgICAgIGluZGV4OiBpLAogICAgICAgICAgICBpdGVtOiBpdGVtCiAgICAgICAgICB9KSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcm93czsKICAgIH0sCiAgICBnZW5EZWZhdWx0Um93czogZnVuY3Rpb24gZ2VuRGVmYXVsdFJvd3MoaXRlbXMsIHByb3BzKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgcmV0dXJuIHRoaXMuJHNjb3BlZFNsb3RzWydleHBhbmRlZC1pdGVtJ10gPyBpdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgcmV0dXJuIF90aGlzNi5nZW5EZWZhdWx0RXhwYW5kZWRSb3coaXRlbSwgaW5kZXgpOwogICAgICB9KSA6IGl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICByZXR1cm4gX3RoaXM2LmdlbkRlZmF1bHRTaW1wbGVSb3coaXRlbSwgaW5kZXgpOwogICAgICB9KTsKICAgIH0sCiAgICBnZW5EZWZhdWx0RXhwYW5kZWRSb3c6IGZ1bmN0aW9uIGdlbkRlZmF1bHRFeHBhbmRlZFJvdyhpdGVtLCBpbmRleCkgewogICAgICB2YXIgaXNFeHBhbmRlZCA9IHRoaXMuaXNFeHBhbmRlZChpdGVtKTsKICAgICAgdmFyIGNsYXNzZXMgPSB7CiAgICAgICAgJ3YtZGF0YS10YWJsZV9fZXhwYW5kZWQgdi1kYXRhLXRhYmxlX19leHBhbmRlZF9fcm93JzogaXNFeHBhbmRlZAogICAgICB9OwogICAgICB2YXIgaGVhZGVyUm93ID0gdGhpcy5nZW5EZWZhdWx0U2ltcGxlUm93KGl0ZW0sIGluZGV4LCBjbGFzc2VzKTsKICAgICAgdmFyIGV4cGFuZGVkUm93ID0gdGhpcy4kY3JlYXRlRWxlbWVudCgndHInLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICd2LWRhdGEtdGFibGVfX2V4cGFuZGVkIHYtZGF0YS10YWJsZV9fZXhwYW5kZWRfX2NvbnRlbnQnCiAgICAgIH0sIFt0aGlzLiRzY29wZWRTbG90c1snZXhwYW5kZWQtaXRlbSddKHsKICAgICAgICBoZWFkZXJzOiB0aGlzLmNvbXB1dGVkSGVhZGVycywKICAgICAgICBpc01vYmlsZTogdGhpcy5pc01vYmlsZSwKICAgICAgICBpdGVtOiBpdGVtCiAgICAgIH0pXSk7CiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KFJvd0dyb3VwLCB7CiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIHZhbHVlOiBpc0V4cGFuZGVkCiAgICAgICAgfQogICAgICB9LCBbdGhpcy4kY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnLCB7CiAgICAgICAgc2xvdDogJ3Jvdy5oZWFkZXInCiAgICAgIH0sIFtoZWFkZXJSb3ddKSwgdGhpcy4kY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnLCB7CiAgICAgICAgc2xvdDogJ3Jvdy5jb250ZW50JwogICAgICB9LCBbZXhwYW5kZWRSb3ddKV0pOwogICAgfSwKICAgIGdlbkRlZmF1bHRTaW1wbGVSb3c6IGZ1bmN0aW9uIGdlbkRlZmF1bHRTaW1wbGVSb3coaXRlbSwgaW5kZXgpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICB2YXIgY2xhc3NlcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307CiAgICAgIHZhciBzY29wZWRTbG90cyA9IGdldFByZWZpeGVkU2NvcGVkU2xvdHMoJ2l0ZW0uJywgdGhpcy4kc2NvcGVkU2xvdHMpOwogICAgICB2YXIgZGF0YSA9IHRoaXMuY3JlYXRlSXRlbVByb3BzKGl0ZW0sIGluZGV4KTsKCiAgICAgIGlmICh0aGlzLnNob3dTZWxlY3QpIHsKICAgICAgICB2YXIgc2xvdCA9IHNjb3BlZFNsb3RzWydkYXRhLXRhYmxlLXNlbGVjdCddOwogICAgICAgIHNjb3BlZFNsb3RzWydkYXRhLXRhYmxlLXNlbGVjdCddID0gc2xvdCA/IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBzbG90KF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGF0YSksIHt9LCB7CiAgICAgICAgICAgIGlzTW9iaWxlOiBfdGhpczcuaXNNb2JpbGUKICAgICAgICAgIH0pKTsKICAgICAgICB9IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIF90aGlzJGNoZWNrYm94Q29sb3I7CgogICAgICAgICAgcmV0dXJuIF90aGlzNy4kY3JlYXRlRWxlbWVudChWU2ltcGxlQ2hlY2tib3gsIHsKICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICd2LWRhdGEtdGFibGVfX2NoZWNrYm94JywKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICB2YWx1ZTogZGF0YS5pc1NlbGVjdGVkLAogICAgICAgICAgICAgIGRpc2FibGVkOiAhX3RoaXM3LmlzU2VsZWN0YWJsZShpdGVtKSwKICAgICAgICAgICAgICBjb2xvcjogKF90aGlzJGNoZWNrYm94Q29sb3IgPSBfdGhpczcuY2hlY2tib3hDb2xvcikgIT0gbnVsbCA/IF90aGlzJGNoZWNrYm94Q29sb3IgOiAnJwogICAgICAgICAgICB9LAogICAgICAgICAgICBvbjogewogICAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbiBpbnB1dCh2YWwpIHsKICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLnNlbGVjdCh2YWwpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2hvd0V4cGFuZCkgewogICAgICAgIHZhciBfc2xvdCA9IHNjb3BlZFNsb3RzWydkYXRhLXRhYmxlLWV4cGFuZCddOwogICAgICAgIHNjb3BlZFNsb3RzWydkYXRhLXRhYmxlLWV4cGFuZCddID0gX3Nsb3QgPyBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3Nsb3QoZGF0YSk7CiAgICAgICAgfSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczcuJGNyZWF0ZUVsZW1lbnQoVkljb24sIHsKICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICd2LWRhdGEtdGFibGVfX2V4cGFuZC1pY29uJywKICAgICAgICAgICAgY2xhc3M6IHsKICAgICAgICAgICAgICAndi1kYXRhLXRhYmxlX19leHBhbmQtaWNvbi0tYWN0aXZlJzogZGF0YS5pc0V4cGFuZGVkCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKGUpIHsKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICBkYXRhLmV4cGFuZCghZGF0YS5pc0V4cGFuZGVkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIFtfdGhpczcuZXhwYW5kSWNvbl0pOwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KHRoaXMuaXNNb2JpbGUgPyBNb2JpbGVSb3cgOiBSb3csIHsKICAgICAgICBrZXk6IGdldE9iamVjdFZhbHVlQnlQYXRoKGl0ZW0sIHRoaXMuaXRlbUtleSksCiAgICAgICAgY2xhc3M6IG1lcmdlQ2xhc3Nlcyhfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGNsYXNzZXMpLCB7fSwgewogICAgICAgICAgJ3YtZGF0YS10YWJsZV9fc2VsZWN0ZWQnOiBkYXRhLmlzU2VsZWN0ZWQKICAgICAgICB9KSwgZ2V0UHJvcGVydHlGcm9tSXRlbShpdGVtLCB0aGlzLml0ZW1DbGFzcykpLAogICAgICAgIHByb3BzOiB7CiAgICAgICAgICBoZWFkZXJzOiB0aGlzLmNvbXB1dGVkSGVhZGVycywKICAgICAgICAgIGhpZGVEZWZhdWx0SGVhZGVyOiB0aGlzLmhpZGVEZWZhdWx0SGVhZGVyLAogICAgICAgICAgaW5kZXg6IGluZGV4LAogICAgICAgICAgaXRlbTogaXRlbSwKICAgICAgICAgIHJ0bDogdGhpcy4kdnVldGlmeS5ydGwKICAgICAgICB9LAogICAgICAgIHNjb3BlZFNsb3RzOiBzY29wZWRTbG90cywKICAgICAgICBvbjogewogICAgICAgICAgLy8gVE9ETzogZm9yIGNsaWNrLCB0aGUgZmlyc3QgYXJndW1lbnQgc2hvdWxkIGJlIHRoZSBldmVudCwgYW5kIHRoZSBzZWNvbmQgYXJndW1lbnQgc2hvdWxkIGJlIGRhdGEsCiAgICAgICAgICAvLyBidXQgdGhpcyBpcyBhIGJyZWFraW5nIGNoYW5nZSBzbyBpdCdzIGZvciB2MwogICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICByZXR1cm4gX3RoaXM3LiRlbWl0KCdjbGljazpyb3cnLCBpdGVtLCBkYXRhKTsKICAgICAgICAgIH0sCiAgICAgICAgICBjb250ZXh0bWVudTogZnVuY3Rpb24gY29udGV4dG1lbnUoZXZlbnQpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzNy4kZW1pdCgnY29udGV4dG1lbnU6cm93JywgZXZlbnQsIGRhdGEpOwogICAgICAgICAgfSwKICAgICAgICAgIGRibGNsaWNrOiBmdW5jdGlvbiBkYmxjbGljayhldmVudCkgewogICAgICAgICAgICByZXR1cm4gX3RoaXM3LiRlbWl0KCdkYmxjbGljazpyb3cnLCBldmVudCwgZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZW5Cb2R5OiBmdW5jdGlvbiBnZW5Cb2R5KHByb3BzKSB7CiAgICAgIHZhciBkYXRhID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwcm9wcyksIHt9LCB7CiAgICAgICAgZXhwYW5kOiB0aGlzLmV4cGFuZCwKICAgICAgICBoZWFkZXJzOiB0aGlzLmNvbXB1dGVkSGVhZGVycywKICAgICAgICBpc0V4cGFuZGVkOiB0aGlzLmlzRXhwYW5kZWQsCiAgICAgICAgaXNNb2JpbGU6IHRoaXMuaXNNb2JpbGUsCiAgICAgICAgaXNTZWxlY3RlZDogdGhpcy5pc1NlbGVjdGVkLAogICAgICAgIHNlbGVjdDogdGhpcy5zZWxlY3QKICAgICAgfSk7CgogICAgICBpZiAodGhpcy4kc2NvcGVkU2xvdHMuYm9keSkgewogICAgICAgIHJldHVybiB0aGlzLiRzY29wZWRTbG90cy5ib2R5KGRhdGEpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudCgndGJvZHknLCBbZ2V0U2xvdCh0aGlzLCAnYm9keS5wcmVwZW5kJywgZGF0YSwgdHJ1ZSksIHRoaXMuZ2VuSXRlbXMocHJvcHMuaXRlbXMsIHByb3BzKSwgZ2V0U2xvdCh0aGlzLCAnYm9keS5hcHBlbmQnLCBkYXRhLCB0cnVlKV0pOwogICAgfSwKICAgIGdlbkZvb3Q6IGZ1bmN0aW9uIGdlbkZvb3QocHJvcHMpIHsKICAgICAgcmV0dXJuIHRoaXMuJHNjb3BlZFNsb3RzLmZvb3QgPT0gbnVsbCA/IHZvaWQgMCA6IHRoaXMuJHNjb3BlZFNsb3RzLmZvb3QocHJvcHMpOwogICAgfSwKICAgIGdlbkZvb3RlcnM6IGZ1bmN0aW9uIGdlbkZvb3RlcnMocHJvcHMpIHsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgb3B0aW9uczogcHJvcHMub3B0aW9ucywKICAgICAgICAgIHBhZ2luYXRpb246IHByb3BzLnBhZ2luYXRpb24sCiAgICAgICAgICBpdGVtc1BlclBhZ2VUZXh0OiAnJHZ1ZXRpZnkuZGF0YVRhYmxlLml0ZW1zUGVyUGFnZVRleHQnCiAgICAgICAgfSwgdGhpcy5zYW5pdGl6ZWRGb290ZXJQcm9wcyksCiAgICAgICAgb246IHsKICAgICAgICAgICd1cGRhdGU6b3B0aW9ucyc6IGZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnModmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIHByb3BzLnVwZGF0ZU9wdGlvbnModmFsdWUpOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgd2lkdGhzOiB0aGlzLndpZHRocywKICAgICAgICBoZWFkZXJzOiB0aGlzLmNvbXB1dGVkSGVhZGVycwogICAgICB9OwogICAgICB2YXIgY2hpbGRyZW4gPSBbZ2V0U2xvdCh0aGlzLCAnZm9vdGVyJywgZGF0YSwgdHJ1ZSldOwoKICAgICAgaWYgKCF0aGlzLmhpZGVEZWZhdWx0Rm9vdGVyKSB7CiAgICAgICAgY2hpbGRyZW4ucHVzaCh0aGlzLiRjcmVhdGVFbGVtZW50KFZEYXRhRm9vdGVyLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRhdGEpLCB7fSwgewogICAgICAgICAgc2NvcGVkU2xvdHM6IGdldFByZWZpeGVkU2NvcGVkU2xvdHMoJ2Zvb3Rlci4nLCB0aGlzLiRzY29wZWRTbG90cykKICAgICAgICB9KSkpOwogICAgICB9CgogICAgICByZXR1cm4gY2hpbGRyZW47CiAgICB9LAogICAgZ2VuRGVmYXVsdFNjb3BlZFNsb3Q6IGZ1bmN0aW9uIGdlbkRlZmF1bHRTY29wZWRTbG90KHByb3BzKSB7CiAgICAgIHZhciBzaW1wbGVQcm9wcyA9IHsKICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LAogICAgICAgIGZpeGVkSGVhZGVyOiB0aGlzLmZpeGVkSGVhZGVyLAogICAgICAgIGRlbnNlOiB0aGlzLmRlbnNlCiAgICAgIH07IC8vIGlmICh0aGlzLnZpcnR1YWxSb3dzKSB7CiAgICAgIC8vICAgcmV0dXJuIHRoaXMuJGNyZWF0ZUVsZW1lbnQoVlZpcnR1YWxUYWJsZSwgewogICAgICAvLyAgICAgcHJvcHM6IE9iamVjdC5hc3NpZ24oc2ltcGxlUHJvcHMsIHsKICAgICAgLy8gICAgICAgaXRlbXM6IHByb3BzLml0ZW1zLAogICAgICAvLyAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LAogICAgICAvLyAgICAgICByb3dIZWlnaHQ6IHRoaXMuZGVuc2UgPyAyNCA6IDQ4LAogICAgICAvLyAgICAgICBoZWFkZXJIZWlnaHQ6IHRoaXMuZGVuc2UgPyAzMiA6IDQ4LAogICAgICAvLyAgICAgICAvLyBUT0RPOiBleHBvc2UgcmVzdCBvZiBwcm9wcyBmcm9tIHZpcnR1YWwgdGFibGU/CiAgICAgIC8vICAgICB9KSwKICAgICAgLy8gICAgIHNjb3BlZFNsb3RzOiB7CiAgICAgIC8vICAgICAgIGl0ZW1zOiAoeyBpdGVtcyB9KSA9PiB0aGlzLmdlbkl0ZW1zKGl0ZW1zLCBwcm9wcykgYXMgYW55LAogICAgICAvLyAgICAgfSwKICAgICAgLy8gICB9LCBbCiAgICAgIC8vICAgICB0aGlzLnByb3h5U2xvdCgnYm9keS5iZWZvcmUnLCBbdGhpcy5nZW5DYXB0aW9uKHByb3BzKSwgdGhpcy5nZW5IZWFkZXJzKHByb3BzKV0pLAogICAgICAvLyAgICAgdGhpcy5wcm94eVNsb3QoJ2JvdHRvbScsIHRoaXMuZ2VuRm9vdGVycyhwcm9wcykpLAogICAgICAvLyAgIF0pCiAgICAgIC8vIH0KCiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KFZTaW1wbGVUYWJsZSwgewogICAgICAgIHByb3BzOiBzaW1wbGVQcm9wcwogICAgICB9LCBbdGhpcy5wcm94eVNsb3QoJ3RvcCcsIGdldFNsb3QodGhpcywgJ3RvcCcsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcHJvcHMpLCB7fSwgewogICAgICAgIGlzTW9iaWxlOiB0aGlzLmlzTW9iaWxlCiAgICAgIH0pLCB0cnVlKSksIHRoaXMuZ2VuQ2FwdGlvbihwcm9wcyksIHRoaXMuZ2VuQ29sZ3JvdXAocHJvcHMpLCB0aGlzLmdlbkhlYWRlcnMocHJvcHMpLCB0aGlzLmdlbkJvZHkocHJvcHMpLCB0aGlzLmdlbkZvb3QocHJvcHMpLCB0aGlzLnByb3h5U2xvdCgnYm90dG9tJywgdGhpcy5nZW5Gb290ZXJzKHByb3BzKSldKTsKICAgIH0sCiAgICBwcm94eVNsb3Q6IGZ1bmN0aW9uIHByb3h5U2xvdChzbG90LCBjb250ZW50KSB7CiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScsIHsKICAgICAgICBzbG90OiBzbG90CiAgICAgIH0sIGNvbnRlbnQpOwogICAgfQogIH0sCiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudChWRGF0YSwgewogICAgICBwcm9wczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLiRwcm9wcyksIHt9LCB7CiAgICAgICAgY3VzdG9tRmlsdGVyOiB0aGlzLmN1c3RvbUZpbHRlcldpdGhDb2x1bW5zLAogICAgICAgIGN1c3RvbVNvcnQ6IHRoaXMuY3VzdG9tU29ydFdpdGhIZWFkZXJzLAogICAgICAgIGl0ZW1zUGVyUGFnZTogdGhpcy5jb21wdXRlZEl0ZW1zUGVyUGFnZQogICAgICB9KSwKICAgICAgb246IHsKICAgICAgICAndXBkYXRlOm9wdGlvbnMnOiBmdW5jdGlvbiB1cGRhdGVPcHRpb25zKHYsIG9sZCkgewogICAgICAgICAgX3RoaXM4LmludGVybmFsR3JvdXBCeSA9IHYuZ3JvdXBCeSB8fCBbXTsKICAgICAgICAgICFkZWVwRXF1YWwodiwgb2xkKSAmJiBfdGhpczguJGVtaXQoJ3VwZGF0ZTpvcHRpb25zJywgdik7CiAgICAgICAgfSwKICAgICAgICAndXBkYXRlOnBhZ2UnOiBmdW5jdGlvbiB1cGRhdGVQYWdlKHYpIHsKICAgICAgICAgIHJldHVybiBfdGhpczguJGVtaXQoJ3VwZGF0ZTpwYWdlJywgdik7CiAgICAgICAgfSwKICAgICAgICAndXBkYXRlOml0ZW1zLXBlci1wYWdlJzogZnVuY3Rpb24gdXBkYXRlSXRlbXNQZXJQYWdlKHYpIHsKICAgICAgICAgIHJldHVybiBfdGhpczguJGVtaXQoJ3VwZGF0ZTppdGVtcy1wZXItcGFnZScsIHYpOwogICAgICAgIH0sCiAgICAgICAgJ3VwZGF0ZTpzb3J0LWJ5JzogZnVuY3Rpb24gdXBkYXRlU29ydEJ5KHYpIHsKICAgICAgICAgIHJldHVybiBfdGhpczguJGVtaXQoJ3VwZGF0ZTpzb3J0LWJ5Jywgdik7CiAgICAgICAgfSwKICAgICAgICAndXBkYXRlOnNvcnQtZGVzYyc6IGZ1bmN0aW9uIHVwZGF0ZVNvcnREZXNjKHYpIHsKICAgICAgICAgIHJldHVybiBfdGhpczguJGVtaXQoJ3VwZGF0ZTpzb3J0LWRlc2MnLCB2KTsKICAgICAgICB9LAogICAgICAgICd1cGRhdGU6Z3JvdXAtYnknOiBmdW5jdGlvbiB1cGRhdGVHcm91cEJ5KHYpIHsKICAgICAgICAgIHJldHVybiBfdGhpczguJGVtaXQoJ3VwZGF0ZTpncm91cC1ieScsIHYpOwogICAgICAgIH0sCiAgICAgICAgJ3VwZGF0ZTpncm91cC1kZXNjJzogZnVuY3Rpb24gdXBkYXRlR3JvdXBEZXNjKHYpIHsKICAgICAgICAgIHJldHVybiBfdGhpczguJGVtaXQoJ3VwZGF0ZTpncm91cC1kZXNjJywgdik7CiAgICAgICAgfSwKICAgICAgICBwYWdpbmF0aW9uOiBmdW5jdGlvbiBwYWdpbmF0aW9uKHYsIG9sZCkgewogICAgICAgICAgcmV0dXJuICFkZWVwRXF1YWwodiwgb2xkKSAmJiBfdGhpczguJGVtaXQoJ3BhZ2luYXRpb24nLCB2KTsKICAgICAgICB9LAogICAgICAgICdjdXJyZW50LWl0ZW1zJzogZnVuY3Rpb24gY3VycmVudEl0ZW1zKHYpIHsKICAgICAgICAgIF90aGlzOC5pbnRlcm5hbEN1cnJlbnRJdGVtcyA9IHY7CgogICAgICAgICAgX3RoaXM4LiRlbWl0KCdjdXJyZW50LWl0ZW1zJywgdik7CiAgICAgICAgfSwKICAgICAgICAncGFnZS1jb3VudCc6IGZ1bmN0aW9uIHBhZ2VDb3VudCh2KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM4LiRlbWl0KCdwYWdlLWNvdW50Jywgdik7CiAgICAgICAgfQogICAgICB9LAogICAgICBzY29wZWRTbG90czogewogICAgICAgIGRlZmF1bHQ6IHRoaXMuZ2VuRGVmYXVsdFNjb3BlZFNsb3QKICAgICAgfQogICAgfSk7CiAgfQp9KTs="},null]}