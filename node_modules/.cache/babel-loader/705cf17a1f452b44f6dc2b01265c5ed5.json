{"remainingRequest":"/Users/8ps/Downloads/eodash-staging/app/node_modules/babel-loader/lib/index.js!/Users/8ps/Downloads/eodash-staging/app/node_modules/vuetify-loader/lib/loader.js??ref--19-0!/Users/8ps/Downloads/eodash-staging/app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/8ps/Downloads/eodash-staging/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/8ps/Downloads/eodash-staging/app/src/components/IndicatorMap.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/8ps/Downloads/eodash-staging/app/src/components/IndicatorMap.vue","mtime":1624532486000},{"path":"/Users/8ps/Downloads/eodash-staging/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/8ps/Downloads/eodash-staging/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/8ps/Downloads/eodash-staging/app/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/8ps/Downloads/eodash-staging/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/8ps/Downloads/eodash-staging/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsbCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci50by1maXhlZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgX3R5cGVvZiBmcm9tICIvVXNlcnMvOHBzL0Rvd25sb2Fkcy9lb2Rhc2gtc3RhZ2luZy9hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy84cHMvRG93bmxvYWRzL2VvZGFzaC1zdGFnaW5nL2FwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Cgp2YXIgX3RoaXMgPSB0aGlzOwoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8gVXRpbGl0aWVzCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IGdlb0pzb24sIGxhdExuZ0JvdW5kcywgbGF0TG5nLCBjaXJjbGVNYXJrZXIsIERpdkljb24sIFBvaW50IH0gZnJvbSAnbGVhZmxldCc7CmltcG9ydCB7IHRlbXBsYXRlIH0gZnJvbSAnQC91dGlscyc7CmltcG9ydCB7IExNYXAsIExUaWxlTGF5ZXIsIExXTVNUaWxlTGF5ZXIsIExHZW9Kc29uLCBMQ2lyY2xlTWFya2VyLCBMQ29udHJvbExheWVycywgTENvbnRyb2xBdHRyaWJ1dGlvbiwgTENvbnRyb2xab29tLCBMTGF5ZXJHcm91cCwgTEZlYXR1cmVHcm91cCwgTENvbnRyb2wsIExUb29sdGlwIH0gZnJvbSAndnVlMi1sZWFmbGV0JzsKaW1wb3J0IHsgRGF0ZVRpbWUgfSBmcm9tICdsdXhvbic7CmltcG9ydCAnbGVhZmxldC9kaXN0L2xlYWZsZXQuY3NzJzsKaW1wb3J0ICdsZWFmbGV0LW1vdXNlLXBvc2l0aW9uJzsKaW1wb3J0ICdsZWFmbGV0LXNpZGUtYnktc2lkZSc7CmltcG9ydCAnbGVhZmxldC1sb2FkaW5nJzsKaW1wb3J0ICdsZWFmbGV0LWxvYWRpbmcvc3JjL0NvbnRyb2wuTG9hZGluZy5jc3MnOwppbXBvcnQgJ2xlYWZsZXQtZHJhdyc7CmltcG9ydCAnbGVhZmxldC1kcmF3L2Rpc3QvbGVhZmxldC5kcmF3LmNzcyc7CmltcG9ydCBWdWUyTGVhZmxldE1hcmtlckNsdXN0ZXIgZnJvbSAndnVlMi1sZWFmbGV0LW1hcmtlcmNsdXN0ZXInOwppbXBvcnQgJ2xlYWZsZXQubWFya2VyY2x1c3Rlci9kaXN0L01hcmtlckNsdXN0ZXIuY3NzJzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXMKCmltcG9ydCAnbGVhZmxldC5tYXJrZXJjbHVzdGVyL2Rpc3QvTWFya2VyQ2x1c3Rlci5EZWZhdWx0LmNzcyc7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgaW1wb3J0L25vLWV4dHJhbmVvdXMtZGVwZW5kZW5jaWVzCgppbXBvcnQgdHVyZkRpZmZlcmVuY2UgZnJvbSAnQHR1cmYvZGlmZmVyZW5jZSc7CmltcG9ydCBjb3VudHJpZXMgZnJvbSAnQC9hc3NldHMvY291bnRyaWVzLmpzb24nOwppbXBvcnQgZ3NhRmlsZSBmcm9tICdAL2Fzc2V0cy9nc2FfZGF0YS5qc29uJzsKdmFyIGVtcHR5RiA9IHsKICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLAogIGZlYXR1cmVzOiBbXQp9Owp2YXIgZGF0YUYgPSBlbXB0eUY7CnZhciBjb21wYXJlRiA9IGVtcHR5RjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbJ2N1cnJlbnRJbmRpY2F0b3InXSwKICBjb21wb25lbnRzOiB7CiAgICBMTWFwOiBMTWFwLAogICAgTFRpbGVMYXllcjogTFRpbGVMYXllciwKICAgIExXTVNUaWxlTGF5ZXI6IExXTVNUaWxlTGF5ZXIsCiAgICBMR2VvSnNvbjogTEdlb0pzb24sCiAgICBMQ2lyY2xlTWFya2VyOiBMQ2lyY2xlTWFya2VyLAogICAgTENvbnRyb2xMYXllcnM6IExDb250cm9sTGF5ZXJzLAogICAgTENvbnRyb2xBdHRyaWJ1dGlvbjogTENvbnRyb2xBdHRyaWJ1dGlvbiwKICAgIExDb250cm9sWm9vbTogTENvbnRyb2xab29tLAogICAgTExheWVyR3JvdXA6IExMYXllckdyb3VwLAogICAgTEZlYXR1cmVHcm91cDogTEZlYXR1cmVHcm91cCwKICAgIExDb250cm9sOiBMQ29udHJvbCwKICAgIExUb29sdGlwOiBMVG9vbHRpcCwKICAgICdsLW1hcmtlci1jbHVzdGVyJzogVnVlMkxlYWZsZXRNYXJrZXJDbHVzdGVyCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWFwOiBudWxsLAogICAgICBjb21wYXJlTGF5ZXJLZXlYWVo6IFsxLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5LCAxMCwgMTEsIDEyLCAxMywgMTQsIDE1XSwKICAgICAgZGF0YUxheWVyS2V5WFlaOiBbNDEsIDQyLCA0MywgNDQsIDQ1LCA0NiwgNDcsIDQ4LCA0OSwgNTAsIDUxLCA1MiwgNTMsIDU0LCA1NV0sCiAgICAgIGRhdGFKc29uS2V5OiAwLAogICAgICBjb21wYXJlSnNvbktleTogLTEsCiAgICAgIHpvb206IG51bGwsCiAgICAgIGNlbnRlcjogbnVsbCwKICAgICAgYm91bmRzOiBudWxsLAogICAgICBlbmFibGVDb21wYXJlOiBmYWxzZSwKICAgICAgb3BhY2l0eVRlcnJhaW46IFsxXSwKICAgICAgb3BhY2l0eU92ZXJsYXk6IFsxXSwKICAgICAgdGlsZVBhbmU6ICd0aWxlUGFuZScsCiAgICAgIG92ZXJsYXlQYW5lOiAnb3ZlcmxheVBhbmUnLAogICAgICBtYXJrZXJQYW5lOiAnbWFya2VyUGFuZScsCiAgICAgIHNoYWRvd1BhbmU6ICdzaGFkb3dQYW5lJywKICAgICAgdG9vbHRpcFBhbmU6ICd0b29sdGlwUGFuZScsCiAgICAgIHBvcHVwUGFuZTogJ3BvcHVwUGFuZScsCiAgICAgIGxlZ2VuZEV4cGFuZGVkOiBmYWxzZSwKICAgICAgc2xpZGVyOiBudWxsLAogICAgICBkcmF3Q29udHJvbDogbnVsbCwKICAgICAgcmVuZGVyVHJhc2hCaW46IGZhbHNlLAogICAgICBkZWZhdWx0TWFwT3B0aW9uczogewogICAgICAgIGF0dHJpYnV0aW9uQ29udHJvbDogZmFsc2UsCiAgICAgICAgem9vbUNvbnRyb2w6IGZhbHNlCiAgICAgIH0sCiAgICAgIGRhdGFMYXllclRpbWU6IG51bGwsCiAgICAgIGNvbXBhcmVMYXllclRpbWU6IG51bGwsCiAgICAgIGRhdGFMYXllckluZGV4OiAwLAogICAgICBjb21wYXJlTGF5ZXJJbmRleDogMCwKICAgICAgZGF0YUZlYXR1cmVzQ291bnQ6IDAsCiAgICAgIGNvbXBhcmVGZWF0dXJlc0NvdW50OiAwLAogICAgICBzZWxlY3RlZENvdW50cnk6IG51bGwsCiAgICAgIHNlbGVjdGVkQm9yZGVyOiBudWxsLAogICAgICBzZWxlY3RlZExheWVyOiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZSgnY29uZmlnJywgWydhcHBDb25maWcnLCAnYmFzZUNvbmZpZyddKSksIG1hcEdldHRlcnMoJ2luZGljYXRvcnMnLCBbJ2dldEluZGljYXRvckZpbHRlcmVkSW5wdXREYXRhJ10pKSwge30sIHsKICAgIGNvdW50cmllc0pzb246IGZ1bmN0aW9uIGNvdW50cmllc0pzb24oKSB7CiAgICAgIHJldHVybiBjb3VudHJpZXM7CiAgICB9LAogICAgZ3NhSnNvbjogZnVuY3Rpb24gZ3NhSnNvbigpIHsKICAgICAgcmV0dXJuIGdzYUZpbGU7CiAgICB9LAogICAgY291bnRyaWVzU3R5bGU6IGZ1bmN0aW9uIGNvdW50cmllc1N0eWxlKCkgewogICAgICByZXR1cm4gewogICAgICAgIGNvbG9yOiAnIzIyMicsCiAgICAgICAgd2VpZ2h0OiAxLAogICAgICAgIGZpbGxDb2xvcjogJyNmZmYnLAogICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgZmlsbE9wYWNpdHk6IDAuNQogICAgICB9OwogICAgfSwKICAgIGRhdGFKc29uQ29tcHV0ZWQ6IHsKICAgICAgLy8gdG8gYXZvaWQgZWFjaCBvZiB0aG91c2FuZHMgb2YgZ2VvanNvbiBmZWF0dXJlcyBoYXZlIGl0cyBvd24KICAgICAgLy8gZ2V0dGVyL3NldHRlciBzZXQgYnkgdnVlIC0gZnJlZXppbmcgdGhlIGFwcCBvbiBsYXJnZSBudW1iZXIgb2YgcHRzCiAgICAgIC8vIHdlIG1hbnVhbGx5IHJlcmVuZGVyIHJlbGV2YW50IHZ1ZSBjb21wb25lbnRzIGFueXdheQogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gX3RoaXMuZ2V0RGF0YUYoKTsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodikgewogICAgICAgIGRhdGFGID0gdjsKICAgICAgfQogICAgfSwKICAgIGNvbXBhcmVKc29uQ29tcHV0ZWQ6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmdldENvbXBhcmVGKCk7CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gc2V0KHYpIHsKICAgICAgICBjb21wYXJlRiA9IHY7CiAgICAgIH0KICAgIH0sCiAgICBzdWJBb2lJbnZlcnNlU3R5bGU6IGZ1bmN0aW9uIHN1YkFvaUludmVyc2VTdHlsZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBzdHJva2U6IGZhbHNlLAogICAgICAgIGZpbGxDb2xvcjogdGhpcy5nZXRJbmRpY2F0b3JDb2xvcigncHJpbWFyeScpLAogICAgICAgIGZpbGxPcGFjaXR5OiB0aGlzLm1lcmdlZENvbmZpZ3MoKVswXS5zdWJBb2lGaWxsT3BhY2l0eSB8fCAwLjUKICAgICAgfTsKICAgIH0sCiAgICBiYXNlTGF5ZXJzOiBmdW5jdGlvbiBiYXNlTGF5ZXJzKCkgewogICAgICAvLyBleHBlY3RzIGFuIGFycmF5IG9mIG9iamVjdHMKICAgICAgcmV0dXJuIHRoaXMubWVyZ2VkQ29uZmlncygpWzBdLmJhc2VMYXllcnMgfHwgdGhpcy5iYXNlQ29uZmlnLmJhc2VMYXllcnNSaWdodE1hcDsKICAgIH0sCiAgICBvdmVybGF5TGF5ZXJzOiBmdW5jdGlvbiBvdmVybGF5TGF5ZXJzKCkgewogICAgICByZXR1cm4gdGhpcy5tZXJnZWRDb25maWdzKClbMF0ub3ZlcmxheUxheWVycyB8fCB0aGlzLmJhc2VDb25maWcub3ZlcmxheUxheWVyc1JpZ2h0TWFwOwogICAgfSwKICAgIG1hcERlZmF1bHRzOiBmdW5jdGlvbiBtYXBEZWZhdWx0cygpIHsKICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy5iYXNlQ29uZmlnLm1hcERlZmF1bHRzKSwgdGhpcy5tZXJnZWRDb25maWdzKClbMF0pOwogICAgfSwKICAgIGNvdW50cnlTZWxlY3Rpb246IGZ1bmN0aW9uIGNvdW50cnlTZWxlY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLm1lcmdlZENvbmZpZ3MoKVswXS5jb3VudHJ5U2VsZWN0aW9uOwogICAgfSwKICAgIGJvcmRlclNlbGVjdGlvbjogZnVuY3Rpb24gYm9yZGVyU2VsZWN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5tZXJnZWRDb25maWdzKClbMF0uYm9yZGVyU2VsZWN0aW9uOwogICAgfSwKICAgIGluZERlZmluaXRpb246IGZ1bmN0aW9uIGluZERlZmluaXRpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmJhc2VDb25maWcuaW5kaWNhdG9yc0RlZmluaXRpb25bdGhpcy5pbmRpY2F0b3IuaW5kaWNhdG9yXTsKICAgIH0sCiAgICBhZGRpdGlvbmFsTWFwVGltZXM6IGZ1bmN0aW9uIGFkZGl0aW9uYWxNYXBUaW1lcygpIHsKICAgICAgcmV0dXJuIHRoaXMuYmFzZUNvbmZpZy5hZGRpdGlvbmFsTWFwVGltZXMgJiYgdGhpcy5iYXNlQ29uZmlnLmFkZGl0aW9uYWxNYXBUaW1lc1siIi5jb25jYXQodGhpcy5pbmRpY2F0b3IuYW9pSUQsICItIikuY29uY2F0KHRoaXMuaW5kaWNhdG9yLmluZGljYXRvcildOwogICAgfSwKICAgIGV4Y2x1ZGVNYXBUaW1lczogZnVuY3Rpb24gZXhjbHVkZU1hcFRpbWVzKCkgewogICAgICByZXR1cm4gdGhpcy5iYXNlQ29uZmlnLmV4Y2x1ZGVNYXBUaW1lcyAmJiB0aGlzLmJhc2VDb25maWcuZXhjbHVkZU1hcFRpbWVzWyIiLmNvbmNhdCh0aGlzLmluZGljYXRvci5hb2lJRCwgIi0iKS5jb25jYXQodGhpcy5pbmRpY2F0b3IuaW5kaWNhdG9yKV07CiAgICB9LAogICAgcmVwbGFjZU1hcFRpbWVzOiBmdW5jdGlvbiByZXBsYWNlTWFwVGltZXMoKSB7CiAgICAgIHJldHVybiB0aGlzLmJhc2VDb25maWcucmVwbGFjZU1hcFRpbWVzICYmIHRoaXMuYmFzZUNvbmZpZy5yZXBsYWNlTWFwVGltZXNbIiIuY29uY2F0KHRoaXMuaW5kaWNhdG9yLmFvaUlELCAiLSIpLmNvbmNhdCh0aGlzLmluZGljYXRvci5pbmRpY2F0b3IpXTsKICAgIH0sCiAgICBpbmRpY2F0b3I6IGZ1bmN0aW9uIGluZGljYXRvcigpIHsKICAgICAgcmV0dXJuIHRoaXMuZ2V0SW5kaWNhdG9yRmlsdGVyZWRJbnB1dERhdGEodGhpcy5jdXJyZW50SW5kaWNhdG9yIHx8IG51bGwpOwogICAgfSwKICAgIHNob3dBb2k6IGZ1bmN0aW9uIHNob3dBb2koKSB7CiAgICAgIHJldHVybiB0aGlzLmFvaSAmJiAoIXRoaXMuc3ViQW9pIHx8IHRoaXMuc3ViQW9pLmZlYXR1cmVzLmxlbmd0aCA9PT0gMCk7CiAgICB9LAogICAgdmFsaWREcmF3bkFyZWE6IGZ1bmN0aW9uIHZhbGlkRHJhd25BcmVhKCkgewogICAgICAvLyBhbGxvd3MgZm9yIGZ1cnRoZXIgdmFsaWRhdGlvbiBvbiBhcmVhIHNpemUgZXRjLgogICAgICByZXR1cm4gdGhpcy5kcmF3bkFyZWEgIT09IG51bGw7CiAgICB9LAogICAgZHJhd25BcmVhOiBmdW5jdGlvbiBkcmF3bkFyZWEoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5mZWF0dXJlcy5zZWxlY3RlZEFyZWE7CiAgICB9LAogICAgY3VzdG9tQXJlYUZpbHRlcjogZnVuY3Rpb24gY3VzdG9tQXJlYUZpbHRlcigpIHsKICAgICAgcmV0dXJuIHRoaXMubWVyZ2VkQ29uZmlncygpWzBdLmN1c3RvbUFyZWFGZWF0dXJlcyB8fCB0aGlzLm1lcmdlZENvbmZpZ3MoKVswXS5jdXN0b21BcmVhSW5kaWNhdG9yOwogICAgfSwKICAgIHVzZWRUaW1lczogZnVuY3Rpb24gdXNlZFRpbWVzKCkgewogICAgICB2YXIgdGltZXMgPSB0aGlzLmluZGljYXRvci50aW1lOwogICAgICB2YXIgZW9TZW5zb3IgPSBBcnJheS5pc0FycmF5KHRoaXMuaW5kaWNhdG9yLmVvU2Vuc29yKSAmJiB0aGlzLmluZGljYXRvci5lb1NlbnNvcjsKICAgICAgdmFyIGlucHV0RGF0YSA9IEFycmF5LmlzQXJyYXkodGhpcy5pbmRpY2F0b3IuaW5wdXREYXRhKSAmJiB0aGlzLmluZGljYXRvci5pbnB1dERhdGE7CiAgICAgIHZhciBjb2xvckNvZGUgPSBBcnJheS5pc0FycmF5KHRoaXMuaW5kaWNhdG9yLmNvbG9yQ29kZSkgJiYgdGhpcy5pbmRpY2F0b3IuY29sb3JDb2RlOyAvLyBjb21wbGV0ZWx5IHJlcGxhY2UgZ2l2ZW4gdGltZXMgb3IgZW9TZW5zb3IKCiAgICAgIGlmICh0aGlzLnJlcGxhY2VNYXBUaW1lcyAmJiBBcnJheS5pc0FycmF5KHRoaXMucmVwbGFjZU1hcFRpbWVzLnRpbWUpKSB7CiAgICAgICAgdGltZXMgPSB0aGlzLnJlcGxhY2VNYXBUaW1lcy50aW1lOwogICAgICB9CgogICAgICBpZiAodGhpcy5yZXBsYWNlTWFwVGltZXMgJiYgQXJyYXkuaXNBcnJheSh0aGlzLnJlcGxhY2VNYXBUaW1lcy5lb1NlbnNvcikpIHsKICAgICAgICBlb1NlbnNvciA9IHRoaXMucmVwbGFjZU1hcFRpbWVzLmVvU2Vuc29yOyAvLyBqdXN0IGZvciBkaXNwbGF5CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnJlcGxhY2VNYXBUaW1lcyAmJiBBcnJheS5pc0FycmF5KHRoaXMucmVwbGFjZU1hcFRpbWVzLmlucHV0RGF0YSkpIHsKICAgICAgICBpbnB1dERhdGEgPSB0aGlzLnJlcGxhY2VNYXBUaW1lcy5pbnB1dERhdGE7IC8vIG5lZWRzIHRvIGJlIHVzZWQgdW5sZXNzIGluZGljYXRvci5kaXNwbGF5IGlzIHVzZWQgKHRoYXQgb3ZlcnJpZGVzIGl0KQogICAgICB9CgogICAgICBpZiAodGhpcy5yZXBsYWNlTWFwVGltZXMgJiYgQXJyYXkuaXNBcnJheSh0aGlzLnJlcGxhY2VNYXBUaW1lcy5jb2xvckNvZGUpKSB7CiAgICAgICAgY29sb3JDb2RlID0gdGhpcy5yZXBsYWNlTWFwVGltZXMuY29sb3JDb2RlOwogICAgICB9CgogICAgICBpZiAodGhpcy5hZGRpdGlvbmFsTWFwVGltZXMpIHsKICAgICAgICAvLyBhZGQgYWRkaXRpb25hbCB0aW1lcyBhbmQgZW9TZW5zb3IgdG8gb3JpZ2luYWwgYXJyYXlzCiAgICAgICAgLy8gc29ydCB0aW1lIGFzY2VuZGluZyBhbmQgc29ydCBhcnJheXMgYmFzZWQgb24gdGltZSBhcnJheSB2aWEgaGVscGVyIGxpc3QgY29tYmluaW5nIGFsbAogICAgICAgIHZhciBkdE9iamVjdHMgPSB0aGlzLmFkZGl0aW9uYWxNYXBUaW1lcy50aW1lLm1hcChmdW5jdGlvbiAodCkgewogICAgICAgICAgcmV0dXJuIERhdGVUaW1lLmZyb21JU08odCk7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIG1lcmdlZFRpbWVzID0gdGltZXMuY29uY2F0KGR0T2JqZWN0cyk7CiAgICAgICAgdmFyIG1lcmdlZFNlbnNvcnMgPSBlb1NlbnNvci5jb25jYXQodGhpcy5hZGRpdGlvbmFsTWFwVGltZXMuZW9TZW5zb3IpOwogICAgICAgIHZhciBtZXJnZWRJbnB1dERhdGEgPSBpbnB1dERhdGEuY29uY2F0KHRoaXMuYWRkaXRpb25hbE1hcFRpbWVzLmlucHV0RGF0YSk7CiAgICAgICAgdmFyIG1lcmdlZENvbG9yQ29kZSA9IGNvbG9yQ29kZS5jb25jYXQodGhpcy5hZGRpdGlvbmFsTWFwVGltZXMuY29sb3JDb2RlKTsgLy8gY29tYmluZSB0aGUgYXJyYXlzCgogICAgICAgIHZhciBsaXN0ID0gW107CgogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWVyZ2VkVGltZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGxpc3QucHVzaCh7CiAgICAgICAgICAgIHRpbWU6IG1lcmdlZFRpbWVzW2pdLAogICAgICAgICAgICBlb1NlbnNvcjogbWVyZ2VkU2Vuc29yc1tqXSwKICAgICAgICAgICAgaW5wdXREYXRhOiBtZXJnZWRJbnB1dERhdGFbal0sCiAgICAgICAgICAgIGNvbG9yQ29kZTogbWVyZ2VkQ29sb3JDb2RlW2pdCiAgICAgICAgICB9KTsKICAgICAgICB9IC8vIHNvcnQgbWFwcGluZyBieSB0aW1lIGFzYwoKCiAgICAgICAgbGlzdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICByZXR1cm4gYS50aW1lLnRvTWlsbGlzKCkgLSBiLnRpbWUudG9NaWxsaXMoKTsKICAgICAgICB9KTsgLy8gc2VwYXJhdGUgdGhlbSBiYWNrIG91dAoKICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGxpc3QubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIG1lcmdlZFRpbWVzW2tdID0gbGlzdFtrXS50aW1lOwogICAgICAgICAgbWVyZ2VkU2Vuc29yc1trXSA9IGxpc3Rba10uZW9TZW5zb3I7CiAgICAgICAgICBtZXJnZWRJbnB1dERhdGFba10gPSBsaXN0W2tdLmlucHV0RGF0YTsKICAgICAgICAgIG1lcmdlZENvbG9yQ29kZVtrXSA9IGxpc3Rba10uY29sb3JDb2RlOwogICAgICAgIH0KCiAgICAgICAgdGltZXMgPSBtZXJnZWRUaW1lczsKICAgICAgICBlb1NlbnNvciA9IG1lcmdlZFNlbnNvcnM7CiAgICAgICAgaW5wdXREYXRhID0gbWVyZ2VkSW5wdXREYXRhOwogICAgICAgIGNvbG9yQ29kZSA9IG1lcmdlZENvbG9yQ29kZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZXhjbHVkZU1hcFRpbWVzICYmIEFycmF5LmlzQXJyYXkodGhpcy5leGNsdWRlTWFwVGltZXMpKSB7CiAgICAgICAgLy8gZXhjbHVkZSB0aW1lcyBhbmQgcmVzcGVjdGl2ZSBlbnRyaWVzIGZyb20gb3RoZXIgYXJyYXlzCiAgICAgICAgdmFyIF9kdE9iamVjdHMgPSB0aGlzLmV4Y2x1ZGVNYXBUaW1lcy5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIHJldHVybiBEYXRlVGltZS5mcm9tSVNPKHQpOwogICAgICAgIH0pOwoKICAgICAgICB2YXIgaW5kVG9EZWxldGUgPSB0aW1lcy5yZWR1Y2UoZnVuY3Rpb24gKGEsIGUsIGkpIHsKICAgICAgICAgIC8vIGZpbmQgaWYgYW55IHRpbWUgaXMgaW4gdG8gYmUgZGVsZXRlZAogICAgICAgICAgdmFyIGZvdW5kID0gX2R0T2JqZWN0cy5maW5kKGZ1bmN0aW9uICh0aW1lKSB7CiAgICAgICAgICAgIHJldHVybiB0aW1lLnRvTWlsbGlzKCkgPT09IGUudG9NaWxsaXMoKTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmICh0eXBlb2YgZm91bmQgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIC8vIGFkZCBpdHMgaW5kZXggdG8gbGlzdAogICAgICAgICAgICBhLnB1c2goaSk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGE7CiAgICAgICAgfSwgW10pOyAvLyBzZXQgaXRlbXMgaW4gYWxsIGFycmF5cyB0byBudWxsCgogICAgICAgIGluZFRvRGVsZXRlLmZvckVhY2goZnVuY3Rpb24gKGkpIHsKICAgICAgICAgIHRpbWVzW2ldID0gbnVsbDsKCiAgICAgICAgICBpZiAodHlwZW9mIGVvU2Vuc29yW2ldICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICBlb1NlbnNvcltpXSA9IG51bGw7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHR5cGVvZiBpbnB1dERhdGFbaV0gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIGlucHV0RGF0YVtpXSA9IG51bGw7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHR5cGVvZiBjb2xvckNvZGVbaV0gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIGNvbG9yQ29kZVtpXSA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfSk7IC8vIGZpbHRlciBvdXQgbnVsbHMKCiAgICAgICAgdGltZXMgPSB0aW1lcy5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiBlICE9PSBudWxsOwogICAgICAgIH0pOwogICAgICAgIGVvU2Vuc29yID0gZW9TZW5zb3IuZmlsdGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gZSAhPT0gbnVsbDsKICAgICAgICB9KTsKICAgICAgICBpbnB1dERhdGEgPSBpbnB1dERhdGEuZmlsdGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gZSAhPT0gbnVsbDsKICAgICAgICB9KTsKICAgICAgICBjb2xvckNvZGUgPSBjb2xvckNvZGUuZmlsdGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gZSAhPT0gbnVsbDsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICB0aW1lOiB0aW1lcywKICAgICAgICBlb1NlbnNvcjogZW9TZW5zb3IsCiAgICAgICAgaW5wdXREYXRhOiBpbnB1dERhdGEsCiAgICAgICAgY29sb3JDb2RlOiBjb2xvckNvZGUKICAgICAgfTsKICAgIH0sCiAgICBhcnJheU9mT2JqZWN0czogZnVuY3Rpb24gYXJyYXlPZk9iamVjdHMoKSB7CiAgICAgIHZhciBzZWxlY3Rpb25PcHRpb25zID0gW107CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudXNlZFRpbWVzLnRpbWUubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICB2YXIgbGFiZWwgPSB0aGlzLmdldFRpbWVMYWJlbCh0aGlzLnVzZWRUaW1lcy50aW1lW2ldKTsKCiAgICAgICAgaWYgKHRoaXMudXNlZFRpbWVzLmVvU2Vuc29yKSB7CiAgICAgICAgICB2YXIgZW9TZW5zb3IgPSB0aGlzLnVzZWRUaW1lcy5lb1NlbnNvci5sZW5ndGggPT09IDEgPyB0aGlzLnVzZWRUaW1lcy5lb1NlbnNvclswXSA6IHRoaXMudXNlZFRpbWVzLmVvU2Vuc29yW2ldOwogICAgICAgICAgbGFiZWwgKz0gIiAtICIuY29uY2F0KGVvU2Vuc29yKTsKICAgICAgICB9CgogICAgICAgIHNlbGVjdGlvbk9wdGlvbnMucHVzaCh7CiAgICAgICAgICB2YWx1ZTogdGhpcy51c2VkVGltZXMudGltZVtpXSwKICAgICAgICAgIG5hbWU6IGxhYmVsCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzZWxlY3Rpb25PcHRpb25zOwogICAgfSwKICAgIGN1cnJlbnRUaW1lOiBmdW5jdGlvbiBjdXJyZW50VGltZSgpIHsKICAgICAgdmFyIHJldHVyblRpbWUgPSB0aGlzLnVzZWRUaW1lcy50aW1lW3RoaXMudXNlZFRpbWVzLnRpbWUubGVuZ3RoIC0gMV07CgogICAgICBpZiAodGhpcy5kYXRhTGF5ZXJUaW1lICE9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuVGltZSA9IHRoaXMuZGF0YUxheWVyVGltZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJldHVyblRpbWU7CiAgICB9LAogICAgY3VycmVudENvbXBhcmVUaW1lOiBmdW5jdGlvbiBjdXJyZW50Q29tcGFyZVRpbWUoKSB7CiAgICAgIHZhciByZXR1cm5UaW1lID0gdGhpcy5nZXRJbml0aWFsQ29tcGFyZVRpbWUoKTsKCiAgICAgIGlmICh0aGlzLmNvbXBhcmVMYXllclRpbWUgIT09IG51bGwpIHsKICAgICAgICByZXR1cm5UaW1lID0gdGhpcy5jb21wYXJlTGF5ZXJUaW1lOwogICAgICB9CgogICAgICBpZiAodGhpcy5pbmRpY2F0b3IuY29tcGFyZURpc3BsYXkpIHsKICAgICAgICAvLyBzaGFyZWQgdGltZSBvbiBib3RoIGxheWVycyBpbiBjYXNlIG9mIGNvbXBhcmVEaXNwbGF5IGJlaW5nIHNldAogICAgICAgIHJldHVyblRpbWUgPSB0aGlzLmRhdGFMYXllclRpbWU7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXR1cm5UaW1lOwogICAgfSwKICAgIGFvaTogZnVuY3Rpb24gYW9pKCkgewogICAgICByZXR1cm4gdGhpcy5pbmRpY2F0b3IuYW9pOwogICAgfSwKICAgIHN1YkFvaTogZnVuY3Rpb24gc3ViQW9pKCkgewogICAgICByZXR1cm4gdGhpcy5pbmRpY2F0b3Iuc3ViQW9pOwogICAgfSwKICAgIHN1YkFvaUludmVyc2U6IGZ1bmN0aW9uIHN1YkFvaUludmVyc2UoKSB7CiAgICAgIC8vIGNyZWF0ZSBhbiBpbnZlcnNlIG9mIHN1YmFvaSwgdXNpbmcgZGlmZmVyZW5jZSBvZiB3aG9sZSB3b3JsZCBhbmQgc3ViYW9pCiAgICAgIHZhciBzdWJhb2lJbnYgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuc3ViQW9pKSk7IC8vIGJvdGggT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zdWJBb2kpIGFuZCB7IC4uLnRoaXMuc3ViQW9pIH0gY3JlYXRlIHNoYWxsb3cgY29weQoKICAgICAgaWYgKHN1YmFvaUludi5mZWF0dXJlcy5sZW5ndGggPT09IDEpIHsKICAgICAgICB2YXIgZ2xvYmFsQm94ID0gewogICAgICAgICAgdHlwZTogJ0ZlYXR1cmUnLAogICAgICAgICAgcHJvcGVydGllczoge30sCiAgICAgICAgICBnZW9tZXRyeTogewogICAgICAgICAgICB0eXBlOiAnUG9seWdvbicsCiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbW1stMTgwLCAtOTBdLCBbMTgwLCAtOTBdLCBbMTgwLCA5MF0sIFstMTgwLCA5MF0sIFstMTgwLCAtOTBdXV0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHZhciBkaWZmID0gdHVyZkRpZmZlcmVuY2UoZ2xvYmFsQm94LCBzdWJhb2lJbnYuZmVhdHVyZXNbMF0pOwogICAgICAgIHN1YmFvaUludi5mZWF0dXJlc1swXSA9IGRpZmY7CiAgICAgIH0KCiAgICAgIHJldHVybiBzdWJhb2lJbnY7CiAgICB9LAogICAgY2x1c3Rlck9wdGlvbnM6IGZ1bmN0aW9uIGNsdXN0ZXJPcHRpb25zKCkgewogICAgICByZXR1cm4gewogICAgICAgIGRpc2FibGVDbHVzdGVyaW5nQXRab29tOiAxMywKICAgICAgICBhbmltYXRlOiBmYWxzZSwKICAgICAgICAvLyB6b29tVG9Cb3VuZHNPbkNsaWNrOiBmYWxzZSwKICAgICAgICBpY29uQ3JlYXRlRnVuY3Rpb246IGZ1bmN0aW9uIGljb25DcmVhdGVGdW5jdGlvbihjbHVzdGVyKSB7CiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGZ1bmMtbmFtZXMKICAgICAgICAgIC8vIG1vZGlmaWVkIHNlbGVjdGVkIGNsdXN0ZXIgc3R5bGUKICAgICAgICAgIHZhciBjaGlsZENvdW50ID0gY2x1c3Rlci5nZXRDaGlsZENvdW50KCk7CiAgICAgICAgICByZXR1cm4gbmV3IERpdkljb24oewogICAgICAgICAgICBodG1sOiAiPGRpdj48c3Bhbj4iLmNvbmNhdChjaGlsZENvdW50LCAiPC9zcGFuPjwvZGl2PiIpLAogICAgICAgICAgICBjbGFzc05hbWU6ICdtYXJrZXItY2x1c3RlcicsCiAgICAgICAgICAgIGljb25TaXplOiBuZXcgUG9pbnQoNDAsIDQwKQogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBwb2x5Z29uT3B0aW9uczogewogICAgICAgICAgZmlsbENvbG9yOiB0aGlzLmFwcENvbmZpZy5icmFuZGluZy5wcmltYXJ5Q29sb3IsCiAgICAgICAgICBjb2xvcjogdGhpcy5hcHBDb25maWcuYnJhbmRpbmcucHJpbWFyeUNvbG9yLAogICAgICAgICAgd2VpZ2h0OiAwLjUsCiAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgZmlsbE9wYWNpdHk6IDAuMywKICAgICAgICAgIGRhc2hBcnJheTogNAogICAgICAgIH0KICAgICAgfTsKICAgIH0sCiAgICBkcmF3T3B0aW9uczogZnVuY3Rpb24gZHJhd09wdGlvbnMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgcG9zaXRpb246ICd0b3ByaWdodCcsCiAgICAgICAgZHJhdzogewogICAgICAgICAgcG9seWxpbmU6IGZhbHNlLAogICAgICAgICAgY2lyY2xlOiBmYWxzZSwKICAgICAgICAgIG1hcmtlcjogZmFsc2UsCiAgICAgICAgICBjaXJjbGVtYXJrZXI6IGZhbHNlLAogICAgICAgICAgcG9seWdvbjogewogICAgICAgICAgICBzaGFwZU9wdGlvbnM6IHsKICAgICAgICAgICAgICBjb2xvcjogdGhpcy5hcHBDb25maWcuYnJhbmRpbmcucHJpbWFyeUNvbG9yCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICByZWN0YW5nbGU6IHsKICAgICAgICAgICAgc2hvd0FyZWE6IGZhbHNlLAogICAgICAgICAgICBzaGFwZU9wdGlvbnM6IHsKICAgICAgICAgICAgICBjb2xvcjogdGhpcy5hcHBDb25maWcuYnJhbmRpbmcucHJpbWFyeUNvbG9yCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgfSksCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZGF0YUxheWVySW5kZXggPSB0aGlzLnVzZWRUaW1lcy50aW1lLmxlbmd0aCAtIDE7CiAgICB0aGlzLmRhdGFMYXllclRpbWUgPSB7CiAgICAgIHZhbHVlOiB0aGlzLnVzZWRUaW1lcy50aW1lW3RoaXMuZGF0YUxheWVySW5kZXhdCiAgICB9OwogICAgdGhpcy5jb21wYXJlTGF5ZXJUaW1lID0gewogICAgICB2YWx1ZTogdGhpcy5nZXRJbml0aWFsQ29tcGFyZVRpbWUoKQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNyZWF0ZUxhdExuZzogZnVuY3Rpb24gY3JlYXRlTGF0TG5nKGxhdGxuZykgewogICAgICB2YXIgbGxvYmogPSBsYXRsbmcuc3BsaXQoJywnKS5tYXAoTnVtYmVyKTsKICAgICAgY29uc29sZS5sb2cobGxvYmopOwogICAgICByZXR1cm4gbGxvYmo7CiAgICB9LAogICAgem9vbVVwZGF0ZWQ6IGZ1bmN0aW9uIHpvb21VcGRhdGVkKHpvb20pIHsKICAgICAgdGhpcy56b29tID0gem9vbTsKICAgIH0sCiAgICBjZW50ZXJVcGRhdGVkOiBmdW5jdGlvbiBjZW50ZXJVcGRhdGVkKGNlbnRlcikgewogICAgICB0aGlzLmNlbnRlciA9IGNlbnRlcjsKICAgIH0sCiAgICBib3VuZHNVcGRhdGVkOiBmdW5jdGlvbiBib3VuZHNVcGRhdGVkKGJvdW5kcykgewogICAgICB0aGlzLmJvdW5kcyA9IGJvdW5kczsKICAgIH0sCiAgICBvbk1hcFJlYWR5OiBmdW5jdGlvbiBvbk1hcFJlYWR5KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMubWFwID0gdGhpcy4kcmVmcy5tYXAubWFwT2JqZWN0OwogICAgICB2YXIgbGF5ZXJCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxlYWZsZXQtY29udHJvbC1sYXllcnMtdG9nZ2xlJyk7CiAgICAgIGxheWVyQnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uIChsQikgewogICAgICAgIHJldHVybiBsQi5pbm5lckhUTUwgPSAiPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCIiLmNvbmNhdChfdGhpczIuYXBwQ29uZmlnLmJyYW5kaW5nLnByaW1hcnlDb2xvciwgIlwiIHdpZHRoPVwiMzJweFwiIGhlaWdodD1cIjMycHhcIj48cGF0aCBkPVwiTTAgMGgyNHYyNEgwelwiIGZpbGw9XCJub25lXCIvPjxwYXRoIGQ9XCJNMTEuOTkgMTguNTRsLTcuMzctNS43M0wzIDE0LjA3bDkgNyA5LTctMS42My0xLjI3LTcuMzggNS43NHpNMTIgMTZsNy4zNi01LjczTDIxIDlsLTktNy05IDcgMS42MyAxLjI3TDEyIDE2elwiLz48L3N2Zz4iKTsKICAgICAgfSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgLy8gdXBkYXRlIGxlYWZsZXQgY29udHJvbHMKCiAgICAgIEwuY29udHJvbC5tb3VzZVBvc2l0aW9uKHsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmCiAgICAgICAgZW1wdHlTdHJpbmc6ICcnLAogICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24gZm9ybWF0dGVyKGxvbiwgbGF0KSB7CiAgICAgICAgICByZXR1cm4gIiIuY29uY2F0KGxvbi50b0ZpeGVkKDMpLCAiLCAiKS5jb25jYXQobGF0LnRvRml4ZWQoMykpOwogICAgICAgIH0sCiAgICAgICAgcG9zaXRpb246ICdib3R0b21yaWdodCcKICAgICAgfSkuYWRkVG8odGhpcy5tYXApOyAvLyBoaWRlIGF0dHJpYnV0aW9uIHVuZGVyIGljb24KCiAgICAgIHRoaXMubWFwLmF0dHJpYnV0aW9uQ29udHJvbC5fdXBkYXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICB2YXIgYXR0cmlicyA9IFtdOwogICAgICAgIHZhciBrayA9IE9iamVjdC5rZXlzKHRoaXMuX2F0dHJpYnV0aW9ucyk7CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2subGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICAgIGlmICh0aGlzLl9hdHRyaWJ1dGlvbnNba2tbaV1dKSB7CiAgICAgICAgICAgIGF0dHJpYnMucHVzaChra1tpXSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgcHJlZml4QW5kQXR0cmlicyA9IFtdOwoKICAgICAgICBpZiAodGhpcy5vcHRpb25zLnByZWZpeCkgewogICAgICAgICAgcHJlZml4QW5kQXR0cmlicy5wdXNoKHRoaXMub3B0aW9ucy5wcmVmaXgpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGF0dHJpYnMubGVuZ3RoKSB7CiAgICAgICAgICBwcmVmaXhBbmRBdHRyaWJzLnB1c2goYXR0cmlicy5qb2luKCcsICcpKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSAiPGRpdiBjbGFzcz0nYXR0cmlidXRpb24tYm9keSc+Ii5jb25jYXQocHJlZml4QW5kQXR0cmlicy5qb2luKCcgfCAnKSwgIjwvZGl2PjxkaXYgY2xhc3M9J2F0dHJpYnV0aW9uLWljb24nPlx1MjEzOTwvZGl2PiIpOwogICAgICB9OwoKICAgICAgdGhpcy5tYXAuYXR0cmlidXRpb25Db250cm9sLl91cGRhdGUoKTsgLy8gYWRkIGxvYWRpbmcgaW5kaWNhdG9yCgoKICAgICAgTC5Db250cm9sLmxvYWRpbmcoewogICAgICAgIHBvc2l0aW9uOiAnYm90dG9tbGVmdCcsCiAgICAgICAgZGVsYXlJbmRpY2F0b3I6IDIwMAogICAgICB9KS5hZGRUbyh0aGlzLm1hcCk7IC8vIGFkZCBBL0Igc2xpZGVyCgogICAgICB2YXIgbGVmdExheWVycyA9IHRoaXMuZXh0cmFjdEFjdHVhbExheWVycyh0aGlzLiRyZWZzLmNvbXBhcmVMYXllcnMpOwogICAgICB2YXIgcmlnaHRMYXllcnMgPSB0aGlzLmV4dHJhY3RBY3R1YWxMYXllcnModGhpcy4kcmVmcy5kYXRhTGF5ZXJzKTsKICAgICAgdGhpcy5zbGlkZXIgPSBMLmNvbnRyb2wuc2lkZUJ5U2lkZShsZWZ0TGF5ZXJzLCByaWdodExheWVycyk7CiAgICAgIHRoaXMuZHJhd0NvbnRyb2wgPSBuZXcgTC5Db250cm9sLkRyYXcodGhpcy5kcmF3T3B0aW9ucyk7CiAgICAgIHRoaXMubWFwLm9uKEwuRHJhdy5FdmVudC5DUkVBVEVELCBmdW5jdGlvbiAoZSkgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICAvLyBzZXQgZ2xvYmFsIGFyZWEgZ2VvbWV0cnkgYXMganNvbgogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZmVhdHVyZXMvU0VUX1NFTEVDVEVEX0FSRUEnLCBlLmxheWVyLnRvR2VvSlNPTigpLmdlb21ldHJ5KTsKICAgICAgfS5iaW5kKHRoaXMpKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgICAvLyBvbmx5IGRyYXcgb25lIGZlYXR1cmUgYXQgYSB0aW1lCgogICAgICB0aGlzLm1hcC5vbihMLkRyYXcuRXZlbnQuRFJBV1NUQVJULCBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgICAgIHRoaXMuY2xlYXJDdXN0b21BcmVhRmlsdGVyKCk7CiAgICAgIH0uYmluZCh0aGlzKSk7CiAgICAgIHRoaXMuaW5pdGlhbERyYXdTZWxlY3RlZEFyZWEoKTsKICAgICAgdGhpcy5vblJlc2l6ZSgpOwoKICAgICAgaWYgKCF0aGlzLm1lcmdlZENvbmZpZ3MoKVswXS5jdXN0b21BcmVhRmVhdHVyZXMgfHwgdGhpcy52YWxpZERyYXduQXJlYSkgewogICAgICAgIHRoaXMuZmV0Y2hGZWF0dXJlcygnZGF0YScpOwogICAgICB9CgogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuZmx5VG9Cb3VuZHMoKTsKICAgICAgfSwgMTAwKTsKICAgIH0sCiAgICBvblJlc2l6ZTogZnVuY3Rpb24gb25SZXNpemUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgLy8gdG8gZml4IHBhbmVsIHNpemUgZm9yIHJlZmVyZW5jZSBpbWFnZSB3aW5kb3cKICAgICAgaWYgKHRoaXMubWFwKSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczMubWFwLmludmFsaWRhdGVTaXplKCk7CiAgICAgICAgfSwgMTAwKTsKICAgICAgfQogICAgfSwKICAgIGluaXRpYWxEcmF3U2VsZWN0ZWRBcmVhOiBmdW5jdGlvbiBpbml0aWFsRHJhd1NlbGVjdGVkQXJlYSgpIHsKICAgICAgaWYgKHRoaXMuY3VzdG9tQXJlYUZpbHRlcikgewogICAgICAgIC8vIGFkZCBkcmF3IGNvbnRyb2xzCiAgICAgICAgdGhpcy5kcmF3Q29udHJvbC5hZGRUbyh0aGlzLm1hcCk7CiAgICAgICAgdGhpcy5yZW5kZXJUcmFzaEJpbiA9IHRydWU7CiAgICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZEFyZWFGZWF0dXJlKCk7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVTZWxlY3RlZEFyZWFGZWF0dXJlOiBmdW5jdGlvbiB1cGRhdGVTZWxlY3RlZEFyZWFGZWF0dXJlKCkgewogICAgICB2YXIgZnRycyA9IG51bGw7CgogICAgICBpZiAodGhpcy52YWxpZERyYXduQXJlYSkgewogICAgICAgIHRoaXMuZmV0Y2hGZWF0dXJlcygnZGF0YScpOwoKICAgICAgICBpZiAodGhpcy5lbmFibGVDb21wYXJlKSB7CiAgICAgICAgICB0aGlzLmZldGNoRmVhdHVyZXMoJ2NvbXBhcmUnKTsKICAgICAgICB9CgogICAgICAgIGZ0cnMgPSBfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLmRyYXduQXJlYSk7CiAgICAgIH0KCiAgICAgIGlmIChmdHJzKSB7CiAgICAgICAgLy8gYWRkIGZlYXR1cmUgdG8gYmUgZHJhd24gaW50byBsYXllcgogICAgICAgIHRoaXMuJHJlZnMuY3VzdG9tQXJlYUZpbHRlckZlYXR1cmVzLm1hcE9iamVjdC5hZGRMYXllcihnZW9Kc29uKGZ0cnMsIHsKICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgIGNvbG9yOiB0aGlzLmFwcENvbmZpZy5icmFuZGluZy5wcmltYXJ5Q29sb3IKICAgICAgICAgIH0KICAgICAgICB9KSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcmVmcy5jdXN0b21BcmVhRmlsdGVyRmVhdHVyZXMubWFwT2JqZWN0LmNsZWFyTGF5ZXJzKCk7CiAgICAgIH0KICAgIH0sCiAgICBjb3VudHJpZXNPcHRpb25zOiBmdW5jdGlvbiBjb3VudHJpZXNPcHRpb25zKCkgewogICAgICB2YXIgY3VycmVudEluZGljYXRvciA9IHRoaXMuaW5kaWNhdG9yOwogICAgICByZXR1cm4gewogICAgICAgIG9uRWFjaEZlYXR1cmU6IGZ1bmN0aW9uIG9uRWFjaEZlYXR1cmUoZmVhdHVyZSwgbGF5ZXIpIHsKICAgICAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgICAgIGxheWVyLmJpbmRUb29sdGlwKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGZlYXR1cmUucHJvcGVydGllcy5uYW1lOwogICAgICAgICAgfSwgewogICAgICAgICAgICBkaXJlY3Rpb246ICd0b3AnLAogICAgICAgICAgICBzdGlja3k6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgICAgbGF5ZXIub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgY291bnRyeUEyID0gZmVhdHVyZS5wcm9wZXJ0aWVzLmFscGhhMjsKCiAgICAgICAgICAgIF90aGlzNC5mZXRjaE1vYmlsaXR5RGF0YShjb3VudHJ5QTIsIGN1cnJlbnRJbmRpY2F0b3IuYW9pSUQpOwoKICAgICAgICAgICAgaWYgKF90aGlzNC5zZWxlY3RlZExheWVyICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgX3RoaXM0LnNlbGVjdGVkTGF5ZXIuc2V0U3R5bGUoewogICAgICAgICAgICAgICAgY29sb3I6ICcjMjIyJywKICAgICAgICAgICAgICAgIHdlaWdodDogMSwKICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyNmZmYnLAogICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXM0LnNlbGVjdGVkQ291bnRyeSA9IGNvdW50cnlBMjsKICAgICAgICAgICAgX3RoaXM0LnNlbGVjdGVkTGF5ZXIgPSBsYXllcjsKICAgICAgICAgICAgX3RoaXM0LnBvcHVwTmFtZSA9IGZlYXR1cmUucHJvcGVydGllcy5uYW1lOwogICAgICAgICAgfSk7CiAgICAgICAgICBsYXllci5vbignbW91c2VvdmVyJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIGN1cnJMYXllciA9IGUudGFyZ2V0OwogICAgICAgICAgICBjdXJyTGF5ZXIuc2V0U3R5bGUoewogICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICBjb2xvcjogX3RoaXM0LiR2dWV0aWZ5LnRoZW1lLmN1cnJlbnRUaGVtZS5wcmltYXJ5LAogICAgICAgICAgICAgIGZpbGxDb2xvcjogX3RoaXM0LiR2dWV0aWZ5LnRoZW1lLmN1cnJlbnRUaGVtZS5wcmltYXJ5LAogICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAoIUwuQnJvd3Nlci5pZSAmJiAhTC5Ccm93c2VyLm9wZXJhKSB7CiAgICAgICAgICAgICAgbGF5ZXIuYnJpbmdUb0Zyb250KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgbGF5ZXIub24oJ21vdXNlb3V0JywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIGN1cnJMYXllciA9IGUudGFyZ2V0OwoKICAgICAgICAgICAgaWYgKF90aGlzNC5zZWxlY3RlZENvdW50cnkgIT09IGZlYXR1cmUucHJvcGVydGllcy5hbHBoYTIpIHsKICAgICAgICAgICAgICBjdXJyTGF5ZXIuc2V0U3R5bGUoewogICAgICAgICAgICAgICAgY29sb3I6ICcjMjIyJywKICAgICAgICAgICAgICAgIHdlaWdodDogMSwKICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyNmZmYnLAogICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfS5iaW5kKHRoaXMpCiAgICAgIH07CiAgICB9LAogICAgZmVhdHVyZU9wdGlvbnM6IGZ1bmN0aW9uIGZlYXR1cmVPcHRpb25zKHNpZGUpIHsKICAgICAgdmFyIHN0eWxlID0gdGhpcy5tZXJnZWRDb25maWdzKHNpZGUpWzBdLmZlYXR1cmVzICYmIHRoaXMubWVyZ2VkQ29uZmlncyhzaWRlKVswXS5mZWF0dXJlcy5zdHlsZSA/IHRoaXMubWVyZ2VkQ29uZmlncyhzaWRlKVswXS5mZWF0dXJlcy5zdHlsZSA6IHt9OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCgogICAgICByZXR1cm4gewogICAgICAgIG9uRWFjaEZlYXR1cmU6IGZ1bmN0aW9uIG9uRWFjaEZlYXR1cmUoZmVhdHVyZSwgbGF5ZXIpIHsKICAgICAgICAgIC8vIGlmIGZlYXR1cmVzUGFyYW1ldGVycyBhdmFpbGFibGUsIHNob3cgb25seSBwcm9wZXJ0aWVzIGZyb20gbWFwcGluZywgb3RoZXJ3aXNlIGR1bXAgYWxsCiAgICAgICAgICB2YXIgYWxsb3dlZFBhcmFtcyA9IHRoaXMubWVyZ2VkQ29uZmlncyhzaWRlKVswXS5mZWF0dXJlcyA/IHRoaXMubWVyZ2VkQ29uZmlncyhzaWRlKVswXS5mZWF0dXJlcy5hbGxvd2VkUGFyYW1ldGVycyA6IG51bGw7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKCiAgICAgICAgICB2YXIgYWxsS2V5cyA9IE9iamVjdC5rZXlzKGZlYXR1cmUucHJvcGVydGllcyk7CiAgICAgICAgICB2YXIgdG9vbHRpcCA9ICcnOwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsS2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoIWFsbG93ZWRQYXJhbXMgfHwgX3R5cGVvZihhbGxvd2VkUGFyYW1zKSA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmtleXMoYWxsb3dlZFBhcmFtcykuaW5jbHVkZXMoYWxsS2V5c1tpXSkgfHwgQXJyYXkuaXNBcnJheShhbGxvd2VkUGFyYW1zKSAmJiBhbGxvd2VkUGFyYW1zLmluY2x1ZGVzKGFsbEtleXNbaV0pKSB7CiAgICAgICAgICAgICAgdG9vbHRpcCArPSAiPHNwYW4+PGI+Ii5jb25jYXQoYWxsS2V5c1tpXSwgIjwvYj46ICIpLmNvbmNhdChmZWF0dXJlLnByb3BlcnRpZXNbYWxsS2V5c1tpXV0sICI8L3NwYW4+PGJyPiIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRvb2x0aXAgIT09ICcnKSB7CiAgICAgICAgICAgIGxheWVyLmJpbmRUb29sdGlwKHRvb2x0aXAsIHsKICAgICAgICAgICAgICBwYW5lOiB0aGlzLnBvcHVwUGFuZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gLy8gdG8gbWFrZSBjbHVzdGVyaW5nIHdvcmsKCgogICAgICAgICAgaWYgKHRoaXMubWVyZ2VkQ29uZmlncygpWzBdLmZlYXR1cmVzQ2x1c3RlcmluZykgewogICAgICAgICAgICBsYXllci5nZXRMYXRMbmcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGdlb0pzb24oZmVhdHVyZSkuZ2V0Qm91bmRzKCkuZ2V0Q2VudGVyKCk7CiAgICAgICAgICAgIH07IC8vZXNsaW50LWRpc2FibGUtbGluZQoKCiAgICAgICAgICAgIGxheWVyLnNldExhdExuZyA9IGZ1bmN0aW9uICgpIHt9OyAvL2VzbGludC1kaXNhYmxlLWxpbmUKCgogICAgICAgICAgICBsYXllci5fbGF0bG5nID0gbGF5ZXIuZ2V0TGF0TG5nKCk7IC8vZXNsaW50LWRpc2FibGUtbGluZQogICAgICAgICAgfQogICAgICAgIH0uYmluZCh0aGlzKSwKICAgICAgICAvLyBwb2ludCBjaXJjbGUgbWFya2VyIHN0eWxpbmcKICAgICAgICBwb2ludFRvTGF5ZXI6IGZ1bmN0aW9uIChmZWF0dXJlLCBsYXRsbmcpIHsKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICAgIHJldHVybiBjaXJjbGVNYXJrZXIobGF0bG5nLCB7CiAgICAgICAgICAgIHJhZGl1czogc3R5bGUucmFkaXVzIHx8IDgsCiAgICAgICAgICAgIGNvbG9yOiBzdHlsZS5jb2xvciB8fCAnI0ZGQTUwMCcsCiAgICAgICAgICAgIHdlaWdodDogc3R5bGUud2VpZ2h0IHx8IDIsCiAgICAgICAgICAgIG9wYWNpdHk6IHN0eWxlLm9wYWNpdHkgfHwgMSwKICAgICAgICAgICAgZGFzaEFycmF5OiBzdHlsZS5kYXNoQXJyYXkgfHwgbnVsbCwKICAgICAgICAgICAgZGFzaE9mZnNldDogc3R5bGUuZGFzaE9mZnNldCB8fCBudWxsLAogICAgICAgICAgICBmaWxsT3BhY2l0eTogc3R5bGUuZmlsbE9wYWNpdHkgfHwgMSwKICAgICAgICAgICAgZmlsbENvbG9yOiBzdHlsZS5maWxsQ29sb3IgfHwgJyNGRkE1MDAnLAogICAgICAgICAgICBmaWxsOiBzdHlsZS5maWxsIHx8IHRydWUsCiAgICAgICAgICAgIHBhbmU6IHNpZGUgPT09ICdkYXRhJyA/IHRoaXMudG9vbHRpcFBhbmUgOiB0aGlzLnNoYWRvd1BhbmUKICAgICAgICAgIH0pOwogICAgICAgIH0uYmluZCh0aGlzKSwKICAgICAgICAvLyBwb2x5Z29uIGFuZCBsaW5lIHN0eWxpbmcKICAgICAgICBzdHlsZTogewogICAgICAgICAgY29sb3I6IHN0eWxlLmNvbG9yIHx8ICcjRkZBNTAwJywKICAgICAgICAgIHdlaWdodDogc3R5bGUud2VpZ2h0IHx8IDIsCiAgICAgICAgICBvcGFjaXR5OiBzdHlsZS5vcGFjaXR5IHx8IDEsCiAgICAgICAgICBkYXNoQXJyYXk6IHN0eWxlLmRhc2hBcnJheSB8fCBudWxsLAogICAgICAgICAgZGFzaE9mZnNldDogc3R5bGUuZGFzaE9mZnNldCB8fCBudWxsLAogICAgICAgICAgZmlsbE9wYWNpdHk6IHN0eWxlLmZpbGxPcGFjaXR5IHx8IDAsCiAgICAgICAgICBmaWxsQ29sb3I6IHN0eWxlLmZpbGxDb2xvciB8fCAnI0ZGQTUwMCcsCiAgICAgICAgICBmaWxsOiBzdHlsZS5maWxsIHx8IHRydWUKICAgICAgICB9CiAgICAgIH07CiAgICB9LAogICAgZ2V0Q29sb3JDb2RlOiBmdW5jdGlvbiBnZXRDb2xvckNvZGUoc2lkZSkgewogICAgICB2YXIgaSA9IHNpZGUgPT09ICdjb21wYXJlJyA/IHRoaXMuY29tcGFyZUxheWVySW5kZXggOiB0aGlzLmRhdGFMYXllckluZGV4OwogICAgICB2YXIgY3VycmVudFZhbHVlID0gbnVsbDsgLy8gY29tcGVuc2F0ZSBmb3IgY29sb3IgY29kZSB3aXRoIG9ubHkgb25lIGVudHJ5LCBzdGlsbCBzaG93aW5nIGl0CgogICAgICBpZiAodGhpcy51c2VkVGltZXMuY29sb3JDb2RlKSB7CiAgICAgICAgdmFyIGNvbG9ycyA9IHRoaXMudXNlZFRpbWVzLmNvbG9yQ29kZTsKCiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29sb3JzKSAmJiBjb2xvcnMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICBjdXJyZW50VmFsdWUgPSBjb2xvcnNbMF07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmcKICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY29sb3JzKSAmJiBjb2xvcnNbaV0pIHsKICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IGNvbG9yc1tpXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGN1cnJlbnRWYWx1ZTsKICAgIH0sCiAgICBnZXRBb2lGaWxsOiBmdW5jdGlvbiBnZXRBb2lGaWxsKHNpZGUpIHsKICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IHRoaXMuZ2V0Q29sb3JDb2RlKHNpZGUpOwogICAgICByZXR1cm4gY3VycmVudFZhbHVlID8gdGhpcy5nZXRJbmRpY2F0b3JDb2xvcihjdXJyZW50VmFsdWUpIDogdGhpcy5hcHBDb25maWcuYnJhbmRpbmcucHJpbWFyeUNvbG9yOwogICAgfSwKICAgIHN1YkFvaVN0eWxlOiBmdW5jdGlvbiBzdWJBb2lTdHlsZShzaWRlKSB7CiAgICAgIHZhciBjdXJyZW50VmFsdWUgPSB0aGlzLmdldENvbG9yQ29kZShzaWRlKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBjb2xvcjogY3VycmVudFZhbHVlID8gdGhpcy5nZXRJbmRpY2F0b3JDb2xvcihjdXJyZW50VmFsdWUpIDogdGhpcy5hcHBDb25maWcuYnJhbmRpbmcucHJpbWFyeUNvbG9yLAogICAgICAgIHdlaWdodDogMywKICAgICAgICBmaWxsOiBmYWxzZQogICAgICB9OwogICAgfSwKICAgIGNvbmZpZ0Zyb21JbnB1dERhdGE6IGZ1bmN0aW9uIGNvbmZpZ0Zyb21JbnB1dERhdGEoc2lkZSkgewogICAgICB2YXIgaSA9IHNpZGUgPT09ICdjb21wYXJlJyA/IHRoaXMuY29tcGFyZUxheWVySW5kZXggOiB0aGlzLmRhdGFMYXllckluZGV4OwogICAgICB2YXIgaW5wdXREYXRhID0gdGhpcy51c2VkVGltZXMuaW5wdXREYXRhLmxlbmd0aCA9PT0gMSA/IHRoaXMudXNlZFRpbWVzLmlucHV0RGF0YVswXSA6IHRoaXMudXNlZFRpbWVzLmlucHV0RGF0YVtpXTsKCiAgICAgIGlmICh0aGlzLmJhc2VDb25maWcubGF5ZXJOYW1lTWFwcGluZy5oYXNPd25Qcm9wZXJ0eShpbnB1dERhdGEpKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgICAgIHZhciBjb25maWcgPSB0aGlzLmJhc2VDb25maWcubGF5ZXJOYW1lTWFwcGluZ1tpbnB1dERhdGFdOwoKICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoY29uZmlnKSkgewogICAgICAgICAgLy8gYXNzdXJlIGFycmF5IGlzIHJldHVybmVkCiAgICAgICAgICBjb25maWcgPSBbY29uZmlnXTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBjb25maWc7CiAgICAgIH0gLy8gZW1wdHkgY29uZmlnIHVzZWQgbGF0ZXIgZm9yIG1lcmdpbmcKCgogICAgICByZXR1cm4gW107CiAgICB9LAogICAgZ2V0Q29tYmluZWRXTVNMYXllcnM6IGZ1bmN0aW9uIGdldENvbWJpbmVkV01TTGF5ZXJzKHNpZGUpIHsKICAgICAgdmFyIGNvbWJMYXllcnMgPSB0aGlzLm1lcmdlZENvbmZpZ3Moc2lkZSkuZmlsdGVyKGZ1bmN0aW9uIChsKSB7CiAgICAgICAgcmV0dXJuIGwucHJvdG9jb2wgPT09ICdXTVMnICYmIE9iamVjdC5rZXlzKGwpLmluZGV4T2YoJ2NvbWJpbmVkTGF5ZXJzJykgIT09IC0xOwogICAgICB9KTsKICAgICAgcmV0dXJuIGNvbWJMYXllcnM7CiAgICB9LAogICAgZ2V0U2ltcGxlV01TTGF5ZXJzOiBmdW5jdGlvbiBnZXRTaW1wbGVXTVNMYXllcnMoc2lkZSkgewogICAgICB2YXIgY29tYkxheWVycyA9IHRoaXMubWVyZ2VkQ29uZmlncyhzaWRlKS5maWx0ZXIoZnVuY3Rpb24gKGwpIHsKICAgICAgICByZXR1cm4gbC5wcm90b2NvbCA9PT0gJ1dNUycgJiYgT2JqZWN0LmtleXMobCkuaW5kZXhPZignY29tYmluZWRMYXllcnMnKSA9PT0gLTE7CiAgICAgIH0pOwogICAgICByZXR1cm4gY29tYkxheWVyczsKICAgIH0sCiAgICBtZXJnZWRDb25maWdzOiBmdW5jdGlvbiBtZXJnZWRDb25maWdzKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHZhciBzaWRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnZGF0YSc7CiAgICAgIC8vIGZpcnN0IGNoZWNrIGlmIHNwZWNpYWwgY29tcGFyZSBsYXllciBjb25maWd1cmVkCiAgICAgIHZhciBkaXNwbGF5VG1wID0gc2lkZSA9PT0gJ2NvbXBhcmUnICYmIHRoaXMuaW5kaWNhdG9yLmNvbXBhcmVEaXNwbGF5ID8gdGhpcy5pbmRpY2F0b3IuY29tcGFyZURpc3BsYXkgOiB0aGlzLmluZGljYXRvci5kaXNwbGF5OyAvLyBmb2xsb3dpbmcgY29uZmlndXJhdGlvbiBtZXJnaW5nIGlzIGRvbmU6CiAgICAgIC8vIGRlZmF1bHRMYXllcnNEaXNwbGF5ICh0byBhdm9pZCBoYXZpbmcgdG8gY29uZmlndXJlIGl0IGJlZm9yZSkKICAgICAgLy8gaW5kRGVmaW5pdGlvbiAtIGluZGljYXRvciBjb2RlIHNwZWNpZmljIGNvbmZpZ3VyYXRpb24KICAgICAgLy8gZGlzcGxheSAtIGNvbWluZyBmcm9tIGpzIGNvbmZpZ3VyYXRpb24gLSBlc2EuanMgT1IKICAgICAgLy8gY29uZmlnRnJvbUlucHV0RGF0YSAtIGNvbWluZyBmcm9tIGlucHV0IGRhdGEgcmVmZXJlbmNlIGZyb20gY3N2cwoKICAgICAgaWYgKGRpc3BsYXlUbXApIHsKICAgICAgICAvLyBmcm9tIGxheWVyIGNvbmZpZ3VyYXRpb24KICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGlzcGxheVRtcCkpIHsKICAgICAgICAgIC8vIGFsd2F5cyBtYWtlIGFuIEFycmF5IG9mIGxheWVyIGNvbmZpZ3VyYXRpb25zCiAgICAgICAgICBkaXNwbGF5VG1wID0gW2Rpc3BsYXlUbXBdOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGZpbmFsQ29uZmlncyA9IFtdOwogICAgICB2YXIgdXNlZENvbmZpZ0Zvck1lcmdlID0ge307CiAgICAgIHZhciBuYW1lID0gdGhpcy5pbmRpY2F0b3IuZGVzY3JpcHRpb247CgogICAgICBpZiAoIWRpc3BsYXlUbXAgJiYgdGhpcy5jb25maWdGcm9tSW5wdXREYXRhKHNpZGUpLmxlbmd0aCA9PT0gMCkgewogICAgICAgIC8vIG5vIGFkZGl0aW9uYWwgY29uZmlnIHNwZWNpZmllZCwgdXNlIGRlZmF1bHRzCiAgICAgICAgdXNlZENvbmZpZ0Zvck1lcmdlID0gW3sKICAgICAgICAgIG5hbWU6IG5hbWUKICAgICAgICB9XTsKICAgICAgfSBlbHNlIGlmICghZGlzcGxheVRtcCkgewogICAgICAgIC8vIHVzZSBjb25maWdGcm9tSW5wdXREYXRhCiAgICAgICAgdXNlZENvbmZpZ0Zvck1lcmdlID0gdGhpcy5jb25maWdGcm9tSW5wdXREYXRhKHNpZGUpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIHVzZSBkaXNwbGF5VG1wIGV2ZW4gaWYgY29uZmlnRnJvbUlucHV0RGF0YSBzZXQgdG9vCiAgICAgICAgdXNlZENvbmZpZ0Zvck1lcmdlID0gZGlzcGxheVRtcDsKICAgICAgfQoKICAgICAgdXNlZENvbmZpZ0Zvck1lcmdlLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAvLyBtZXJnZSBjb25maWdzIGZvciBlYWNoIGxheWVyCiAgICAgICAgbmFtZSA9IGl0ZW0ubmFtZSB8fCBuYW1lOyAvLyBDaGVjayB0byBzZWUgaWYgd2UgaGF2ZSBncm91cGVkIGxheWVycywgaWYgd2UgZG8gd2UgbmVlZCB0byBhZGQKICAgICAgICAvLyB0aGUgZGVmYXVsdCB0byB0aGVtIHRvbwoKICAgICAgICB2YXIgZXh0ZW5kZWRJdGVtID0gaXRlbTsKCiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGl0ZW0pLmluZGV4T2YoJ2NvbWJpbmVkTGF5ZXJzJykgIT09IC0xKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW0uY29tYmluZWRMYXllcnMubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICAgICAgZXh0ZW5kZWRJdGVtLmNvbWJpbmVkTGF5ZXJzW2ldID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIF90aGlzNS5iYXNlQ29uZmlnLmRlZmF1bHRMYXllcnNEaXNwbGF5KSwgX3RoaXM1LmluZERlZmluaXRpb24pLCBpdGVtLmNvbWJpbmVkTGF5ZXJzW2ldKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZpbmFsQ29uZmlncy5wdXNoKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIF90aGlzNS5iYXNlQ29uZmlnLmRlZmF1bHRMYXllcnNEaXNwbGF5KSwgX3RoaXM1LmluZERlZmluaXRpb24pLCBleHRlbmRlZEl0ZW0pLCB7fSwgewogICAgICAgICAgbmFtZTogbmFtZQogICAgICAgIH0pKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBmaW5hbENvbmZpZ3M7CiAgICB9LAogICAgZmx5VG9Cb3VuZHM6IGZ1bmN0aW9uIGZseVRvQm91bmRzKCkgewogICAgICAvLyB6b29tcyB0byBzdWJhb2kgaWYgcHJlc2VudCBvciBhcmVhIGFyb3VuZCBhb2kgaWYgbm90CiAgICAgIHZhciBib3VuZHNQYWQgPSB0aGlzLm1lcmdlZENvbmZpZ3MoKVswXS5sYXJnZVN1YkFvaSA/IDUgOiB0aGlzLm1lcmdlZENvbmZpZ3MoKVswXS5taWRTdWJBb2kgPyAxIDogMC4xNTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQoKICAgICAgaWYgKHRoaXMuc3ViQW9pICYmIHRoaXMuc3ViQW9pLmZlYXR1cmVzLmxlbmd0aCA+IDApIHsKICAgICAgICB2YXIgdmlld0JvdW5kcyA9IHRoaXMubWVyZ2VkQ29uZmlncygpWzBdLnByZXNldFZpZXcgPyBnZW9Kc29uKHRoaXMubWVyZ2VkQ29uZmlncygpWzBdLnByZXNldFZpZXcpLmdldEJvdW5kcygpIDogZ2VvSnNvbih0aGlzLnN1YkFvaSkuZ2V0Qm91bmRzKCk7CiAgICAgICAgdmFyIGJvdW5kcyA9IGdlb0pzb24odGhpcy5zdWJBb2kpLmdldEJvdW5kcygpOwogICAgICAgIHZhciBjb3JuZXJNYXgxID0gbGF0TG5nKFtib3VuZHMuZ2V0U291dGgoKSAtIGJvdW5kc1BhZCwgYm91bmRzLmdldFdlc3QoKSAtIGJvdW5kc1BhZF0pOwogICAgICAgIHZhciBjb3JuZXJNYXgyID0gbGF0TG5nKFtib3VuZHMuZ2V0Tm9ydGgoKSArIGJvdW5kc1BhZCwgYm91bmRzLmdldEVhc3QoKSArIGJvdW5kc1BhZF0pOwogICAgICAgIHZhciBib3VuZHNNYXggPSBsYXRMbmdCb3VuZHMoY29ybmVyTWF4MSwgY29ybmVyTWF4Mik7CiAgICAgICAgdGhpcy5tYXAuZml0Qm91bmRzKHZpZXdCb3VuZHMpOyAvLyBsaW1pdCB1c2VyIG1vdmVtZW50IGFyb3VuZCBtYXAKCiAgICAgICAgdGhpcy5tYXAuc2V0TWF4Qm91bmRzKGJvdW5kc01heCk7CgogICAgICAgIGlmICh0aGlzLm1lcmdlZENvbmZpZ3MoKVswXS5sYXJnZVN1YkFvaSkgewogICAgICAgICAgdGhpcy5tYXAuc2V0TWluWm9vbSgyKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMubWVyZ2VkQ29uZmlncygpWzBdLm1pZFN1YkFvaSkgewogICAgICAgICAgdGhpcy5tYXAuc2V0TWluWm9vbSg5KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5tYXAuc2V0TWluWm9vbSgxMyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHRoaXMubWVyZ2VkQ29uZmlncygpWzBdLnByZXNldFZpZXcpIHsKICAgICAgICAvLyBpZiBvbmx5IHByZXNldCB2aWV3IG1vdmUgbWFwIHRoZXJlIHdpdGhvdXQgbGltaXRpbmcgbW92ZW1lbnQKICAgICAgICB2YXIgX3ZpZXdCb3VuZHMgPSBnZW9Kc29uKHRoaXMubWVyZ2VkQ29uZmlncygpWzBdLnByZXNldFZpZXcpLmdldEJvdW5kcygpOwoKICAgICAgICB0aGlzLm1hcC5maXRCb3VuZHMoX3ZpZXdCb3VuZHMpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuYW9pKSB7CiAgICAgICAgdmFyIF9jb3JuZXJNYXggPSBsYXRMbmcoW3RoaXMuYW9pLmxhdCAtIGJvdW5kc1BhZCwgdGhpcy5hb2kubG5nIC0gYm91bmRzUGFkXSk7CgogICAgICAgIHZhciBfY29ybmVyTWF4MiA9IGxhdExuZyhbdGhpcy5hb2kubGF0ICsgYm91bmRzUGFkLCB0aGlzLmFvaS5sbmcgKyBib3VuZHNQYWRdKTsKCiAgICAgICAgdmFyIF9ib3VuZHNNYXggPSBsYXRMbmdCb3VuZHMoX2Nvcm5lck1heCwgX2Nvcm5lck1heDIpOwoKICAgICAgICB0aGlzLm1hcC5zZXRab29tKDE2KTsKICAgICAgICB0aGlzLm1hcC5wYW5Ubyh0aGlzLmFvaSk7CgogICAgICAgIGlmICh0aGlzLm1lcmdlZENvbmZpZ3MoKVswXS5sYXJnZVN1YkFvaSkgewogICAgICAgICAgdGhpcy5tYXAuc2V0TWluWm9vbSgyKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMubWVyZ2VkQ29uZmlncygpWzBdLm1pZFN1YkFvaSkgewogICAgICAgICAgdGhpcy5tYXAuc2V0TWluWm9vbSg5KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5tYXAuc2V0TWluWm9vbSgxMik7CiAgICAgICAgfSAvLyBsaW1pdCB1c2VyIG1vdmVtZW50IGFyb3VuZCBtYXAKCgogICAgICAgIHRoaXMubWFwLnNldE1heEJvdW5kcyhfYm91bmRzTWF4KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyB6b29tIHRvIGRlZmF1bHQgYmJveCBmcm9tIGNvbmZpZwogICAgICAgIHRoaXMubWFwLnNldE1pblpvb20odGhpcy5tYXBEZWZhdWx0cy5taW5NYXBab29tKTsKICAgICAgICB0aGlzLm1hcC5zZXRNYXhCb3VuZHMobnVsbCk7CiAgICAgICAgdGhpcy5tYXAuZml0Qm91bmRzKGxhdExuZ0JvdW5kcyh0aGlzLm1hcERlZmF1bHRzLmJvdW5kcykpOwogICAgICB9CiAgICB9LAogICAgZ2V0VGltZUxhYmVsOiBmdW5jdGlvbiBnZXRUaW1lTGFiZWwodGltZSkgewogICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aW1lKSAmJiB0aW1lLmxlbmd0aCA9PT0gMikgewogICAgICAgIC8vIHNob3cgc3RhcnQgLSBlbmQKICAgICAgICBpZiAodGhpcy5tZXJnZWRDb25maWdzKClbMF0ubWFwVGltZUxhYmVsRXh0ZW5kZWQpIHsKICAgICAgICAgIHJldHVybiB0aW1lLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbUlTTyhkKS50b0lTTyh7CiAgICAgICAgICAgICAgc3VwcHJlc3NNaWxsaXNlY29uZHM6IHRydWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KS5qb2luKCcgLSAnKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0aW1lLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgICAgcmV0dXJuIERhdGVUaW1lLmZyb21JU08oZCkudG9JU09EYXRlKCk7CiAgICAgICAgfSkuam9pbignIC0gJyk7CiAgICAgIH0gZWxzZSBpZiAodGltZSBpbnN0YW5jZW9mIERhdGVUaW1lKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1lbHNlLXJldHVybgogICAgICAgIGlmICh0aGlzLm1lcmdlZENvbmZpZ3MoKVswXS5tYXBUaW1lTGFiZWxFeHRlbmRlZCkgewogICAgICAgICAgcmV0dXJuIHRpbWUudG9JU08oewogICAgICAgICAgICBzdXBwcmVzc01pbGxpc2Vjb25kczogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdGltZS50b0lTT0RhdGUoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubWVyZ2VkQ29uZmlncygpWzBdLm1hcFRpbWVMYWJlbEV4dGVuZGVkKSB7CiAgICAgICAgcmV0dXJuIERhdGVUaW1lLmZyb21JU08odGltZSkudG9JU08oewogICAgICAgICAgc3VwcHJlc3NNaWxsaXNlY29uZHM6IHRydWUKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIERhdGVUaW1lLmZyb21JU08odGltZSkudG9JU09EYXRlKCk7CiAgICB9LAogICAgbGF5ZXJPcHRpb25zOiBmdW5jdGlvbiBsYXllck9wdGlvbnModGltZSwgc291cmNlT3B0aW9uc09iaikgewogICAgICB2YXIgYWRkaXRpb25hbFNldHRpbmdzID0ge307CgogICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZU9wdGlvbnNPYmosICdzaXRlTWFwcGluZycpKSB7CiAgICAgICAgdmFyIGN1cnJTaXRlID0gc291cmNlT3B0aW9uc09iai5zaXRlTWFwcGluZyh0aGlzLmluZGljYXRvci5hb2lJRCk7CiAgICAgICAgYWRkaXRpb25hbFNldHRpbmdzLnNpdGUgPSBjdXJyU2l0ZTsKICAgICAgfQoKICAgICAgaWYgKHR5cGVvZiBzb3VyY2VPcHRpb25zT2JqLm1pblpvb20gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgYWRkaXRpb25hbFNldHRpbmdzLm1pblpvb20gPSBzb3VyY2VPcHRpb25zT2JqLm1pblpvb207CiAgICAgIH0KCiAgICAgIGlmICh0eXBlb2Ygc291cmNlT3B0aW9uc09iai5tYXhab29tICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIGFkZGl0aW9uYWxTZXR0aW5ncy5tYXhab29tID0gc291cmNlT3B0aW9uc09iai5tYXhab29tOwogICAgICB9CgogICAgICBpZiAodHlwZW9mIHNvdXJjZU9wdGlvbnNPYmoubWluTmF0aXZlWm9vbSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBhZGRpdGlvbmFsU2V0dGluZ3MubWluTmF0aXZlWm9vbSA9IHNvdXJjZU9wdGlvbnNPYmoubWluTmF0aXZlWm9vbTsKICAgICAgfQoKICAgICAgaWYgKHR5cGVvZiBzb3VyY2VPcHRpb25zT2JqLm1heE5hdGl2ZVpvb20gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgYWRkaXRpb25hbFNldHRpbmdzLm1heE5hdGl2ZVpvb20gPSBzb3VyY2VPcHRpb25zT2JqLm1heE5hdGl2ZVpvb207CiAgICAgIH0KCiAgICAgIGlmICh0eXBlb2Ygc291cmNlT3B0aW9uc09iai5ib3VuZHMgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgYWRkaXRpb25hbFNldHRpbmdzLmJvdW5kcyA9IHNvdXJjZU9wdGlvbnNPYmouYm91bmRzOwogICAgICB9CgogICAgICBpZiAodGltZSAhPT0gbnVsbCkgewogICAgICAgIC8vIHRpbWUgYXMgaXMgZ2V0cyBhdXRvbWF0aWNhbGx5IGluamVjdGVkIHRvIFdNUyBxdWVyeSBPUiB4eXogdXJsIHt0aW1lfSB0ZW1wbGF0ZQogICAgICAgIHZhciBmaXhUaW1lID0gdGltZS52YWx1ZSB8fCB0aW1lOwogICAgICAgIGFkZGl0aW9uYWxTZXR0aW5ncy50aW1lID0gdHlwZW9mIHNvdXJjZU9wdGlvbnNPYmouZGF0ZUZvcm1hdEZ1bmN0aW9uID09PSAnZnVuY3Rpb24nID8gc291cmNlT3B0aW9uc09iai5kYXRlRm9ybWF0RnVuY3Rpb24oZml4VGltZSkgOiBmaXhUaW1lOwoKICAgICAgICBpZiAoc291cmNlT3B0aW9uc09iai5mZWF0dXJlcykgewogICAgICAgICAgYWRkaXRpb25hbFNldHRpbmdzLmZlYXR1cmVzVGltZSA9IHR5cGVvZiBzb3VyY2VPcHRpb25zT2JqLmZlYXR1cmVzLmRhdGVGb3JtYXRGdW5jdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/IHNvdXJjZU9wdGlvbnNPYmouZmVhdHVyZXMuZGF0ZUZvcm1hdEZ1bmN0aW9uKGZpeFRpbWUpIDogZml4VGltZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBhZGRpdGlvbmFsU2V0dGluZ3M7CiAgICB9LAogICAgZGF0YUxheWVyVGltZVNlbGVjdGlvbjogZnVuY3Rpb24gZGF0YUxheWVyVGltZVNlbGVjdGlvbihwYXlsb2FkKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgLy8gRGlmZmVyZW50IG9iamVjdCByZXR1cm5lZCBlaXRoZXIgYnkgYXJyb3cgdXNlIG9yIGJ5IGRyb3Bkb3duIHVzZQogICAgICBpZiAoQXJyYXkuaXNBcnJheShwYXlsb2FkKSB8fCAhcGF5bG9hZC52YWx1ZSkgewogICAgICAgIHRoaXMuZGF0YUxheWVyVGltZSA9IHsKICAgICAgICAgIHZhbHVlOiBwYXlsb2FkLAogICAgICAgICAgbmFtZTogIiIuY29uY2F0KHBheWxvYWQpCiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRhdGFMYXllclRpbWUgPSBwYXlsb2FkOwogICAgICB9CgogICAgICB2YXIgbmV3SW5kZXggPSB0aGlzLmFycmF5T2ZPYmplY3RzLm1hcChmdW5jdGlvbiAoaSkgewogICAgICAgIHJldHVybiBpLnZhbHVlOwogICAgICB9KS5pbmRleE9mKHRoaXMuZGF0YUxheWVyVGltZS52YWx1ZSA/IHRoaXMuZGF0YUxheWVyVGltZS52YWx1ZSA6IHRoaXMuZGF0YUxheWVyVGltZSk7CiAgICAgIHRoaXMuZGF0YUxheWVySW5kZXggPSBuZXdJbmRleDsKICAgICAgdGhpcy5yZWZyZXNoTGF5ZXJzKCdkYXRhJyk7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczYuc2xpZGVyLnNldFJpZ2h0TGF5ZXJzKF90aGlzNi5leHRyYWN0QWN0dWFsTGF5ZXJzKF90aGlzNi4kcmVmcy5kYXRhTGF5ZXJzKSk7CiAgICAgIH0pOwoKICAgICAgaWYgKHRoaXMuaW5kaWNhdG9yLmNvbXBhcmVEaXNwbGF5KSB7CiAgICAgICAgLy8gc2hhcmVkIHRpbWUgb24gYm90aCBzaWRlcyBpbiBjYXNlIG9mIGNvbXBhcmVEaXNwbGF5IGJlaW5nIHNldAogICAgICAgIHRoaXMuY29tcGFyZUxheWVyVGltZSA9IHRoaXMuZGF0YUxheWVyVGltZTsKICAgICAgICB0aGlzLmNvbXBhcmVMYXllckluZGV4ID0gbmV3SW5kZXg7CiAgICAgICAgdGhpcy5yZWZyZXNoTGF5ZXJzKCdjb21wYXJlJyk7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXM2LnNsaWRlci5zZXRMZWZ0TGF5ZXJzKF90aGlzNi5leHRyYWN0QWN0dWFsTGF5ZXJzKF90aGlzNi4kcmVmcy5jb21wYXJlTGF5ZXJzKSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBleHRyYWN0QWN0dWFsTGF5ZXJzOiBmdW5jdGlvbiBleHRyYWN0QWN0dWFsTGF5ZXJzKGdyb3VwKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgdmFyIGFjdHVhbExheWVycyA9IFtdOwoKICAgICAgaWYgKGdyb3VwLiRjaGlsZHJlbi5sZW5ndGggPiAwKSB7CiAgICAgICAgZ3JvdXAuJGNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgICAgICBhY3R1YWxMYXllcnMgPSBhY3R1YWxMYXllcnMuY29uY2F0KF90aGlzNy5leHRyYWN0QWN0dWFsTGF5ZXJzKGNoaWxkKSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWN0dWFsTGF5ZXJzLnB1c2goZ3JvdXAubWFwT2JqZWN0KTsKICAgICAgfQoKICAgICAgcmV0dXJuIGFjdHVhbExheWVyczsKICAgIH0sCiAgICBjb21wYXJlTGF5ZXJUaW1lU2VsZWN0aW9uOiBmdW5jdGlvbiBjb21wYXJlTGF5ZXJUaW1lU2VsZWN0aW9uKHBheWxvYWQpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICAvLyBEaWZmZXJlbnQgb2JqZWN0IHJldHVybmVkIGVpdGhlciBieSBhcnJvdyB1c2Ugb3IgYnkgZHJvcGRvd24gdXNlCiAgICAgIGlmIChBcnJheS5pc0FycmF5KHBheWxvYWQpIHx8ICFwYXlsb2FkLnZhbHVlKSB7CiAgICAgICAgdGhpcy5jb21wYXJlTGF5ZXJUaW1lID0gewogICAgICAgICAgdmFsdWU6IHBheWxvYWQsCiAgICAgICAgICBuYW1lOiAiIi5jb25jYXQocGF5bG9hZCkKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY29tcGFyZUxheWVyVGltZSA9IHBheWxvYWQ7CiAgICAgIH0KCiAgICAgIHZhciBuZXdJbmRleCA9IHRoaXMuYXJyYXlPZk9iamVjdHMubWFwKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgcmV0dXJuIGkudmFsdWU7CiAgICAgIH0pLmluZGV4T2YodGhpcy5jb21wYXJlTGF5ZXJUaW1lLnZhbHVlID8gdGhpcy5jb21wYXJlTGF5ZXJUaW1lLnZhbHVlIDogdGhpcy5jb21wYXJlTGF5ZXJUaW1lKTsKICAgICAgdGhpcy5jb21wYXJlTGF5ZXJJbmRleCA9IG5ld0luZGV4OwogICAgICB0aGlzLnJlZnJlc2hMYXllcnMoJ2NvbXBhcmUnKTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzOC5zbGlkZXIuc2V0TGVmdExheWVycyhfdGhpczguZXh0cmFjdEFjdHVhbExheWVycyhfdGhpczguJHJlZnMuY29tcGFyZUxheWVycykpOwogICAgICB9KTsKICAgIH0sCiAgICBkYXRhTGF5ZXJSZWR1Y2U6IGZ1bmN0aW9uIGRhdGFMYXllclJlZHVjZSgpIHsKICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IHRoaXMuYXJyYXlPZk9iamVjdHMubWFwKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgcmV0dXJuIGkudmFsdWU7CiAgICAgIH0pLmluZGV4T2YodGhpcy5kYXRhTGF5ZXJUaW1lLnZhbHVlID8gdGhpcy5kYXRhTGF5ZXJUaW1lLnZhbHVlIDogdGhpcy5kYXRhTGF5ZXJUaW1lKTsKICAgICAgdGhpcy5kYXRhTGF5ZXJJbmRleCA9IGN1cnJlbnRJbmRleCAtIDE7CiAgICAgIHRoaXMuZGF0YUxheWVyVGltZVNlbGVjdGlvbih0aGlzLmFycmF5T2ZPYmplY3RzW2N1cnJlbnRJbmRleCAtIDFdKTsKICAgIH0sCiAgICBkYXRhTGF5ZXJJbmNyZWFzZTogZnVuY3Rpb24gZGF0YUxheWVySW5jcmVhc2UoKSB7CiAgICAgIHZhciBjdXJyZW50SW5kZXggPSB0aGlzLmFycmF5T2ZPYmplY3RzLm1hcChmdW5jdGlvbiAoaSkgewogICAgICAgIHJldHVybiBpLnZhbHVlOwogICAgICB9KS5pbmRleE9mKHRoaXMuZGF0YUxheWVyVGltZS52YWx1ZSA/IHRoaXMuZGF0YUxheWVyVGltZS52YWx1ZSA6IHRoaXMuZGF0YUxheWVyVGltZSk7CiAgICAgIHRoaXMuZGF0YUxheWVySW5kZXggPSBjdXJyZW50SW5kZXggKyAxOwogICAgICB0aGlzLmRhdGFMYXllclRpbWVTZWxlY3Rpb24odGhpcy5hcnJheU9mT2JqZWN0c1tjdXJyZW50SW5kZXggKyAxXSk7CiAgICB9LAogICAgY29tcGFyZUxheWVyUmVkdWNlOiBmdW5jdGlvbiBjb21wYXJlTGF5ZXJSZWR1Y2UoKSB7CiAgICAgIHZhciBjdXJyZW50SW5kZXggPSB0aGlzLmFycmF5T2ZPYmplY3RzLm1hcChmdW5jdGlvbiAoaSkgewogICAgICAgIHJldHVybiBpLnZhbHVlOwogICAgICB9KS5pbmRleE9mKHRoaXMuY29tcGFyZUxheWVyVGltZS52YWx1ZSA/IHRoaXMuY29tcGFyZUxheWVyVGltZS52YWx1ZSA6IHRoaXMuY29tcGFyZUxheWVyVGltZSk7CiAgICAgIHRoaXMuY29tcGFyZUxheWVySW5kZXggPSBjdXJyZW50SW5kZXggLSAxOwogICAgICB0aGlzLmNvbXBhcmVMYXllclRpbWVTZWxlY3Rpb24odGhpcy5hcnJheU9mT2JqZWN0c1tjdXJyZW50SW5kZXggLSAxXSk7CiAgICB9LAogICAgY29tcGFyZUxheWVySW5jcmVhc2U6IGZ1bmN0aW9uIGNvbXBhcmVMYXllckluY3JlYXNlKCkgewogICAgICB2YXIgY3VycmVudEluZGV4ID0gdGhpcy5hcnJheU9mT2JqZWN0cy5tYXAoZnVuY3Rpb24gKGkpIHsKICAgICAgICByZXR1cm4gaS52YWx1ZTsKICAgICAgfSkuaW5kZXhPZih0aGlzLmNvbXBhcmVMYXllclRpbWUudmFsdWUgPyB0aGlzLmNvbXBhcmVMYXllclRpbWUudmFsdWUgOiB0aGlzLmNvbXBhcmVMYXllclRpbWUpOwogICAgICB0aGlzLmNvbXBhcmVMYXllckluZGV4ID0gY3VycmVudEluZGV4ICsgMTsKICAgICAgdGhpcy5jb21wYXJlTGF5ZXJUaW1lU2VsZWN0aW9uKHRoaXMuYXJyYXlPZk9iamVjdHNbY3VycmVudEluZGV4ICsgMV0pOwogICAgfSwKICAgIGdldEluaXRpYWxDb21wYXJlVGltZTogZnVuY3Rpb24gZ2V0SW5pdGlhbENvbXBhcmVUaW1lKCkgewogICAgICAvLyBmaW5kIGNsb3Nlc3QgZW50cnkgb25lIHllYXIgYmVmb3JlIGxhdGVzdCB0aW1lCiAgICAgIGlmICh0aGlzLm1lcmdlZENvbmZpZ3MoKVswXS5sYXJnZVRpbWVEdXJhdGlvbikgewogICAgICAgIC8vIGlmIGludGVydmFsLCB1c2UganVzdCBzdGFydCB0byBnZXQgY2xvc2VzdAogICAgICAgIHZhciB0aW1lcyA9IHRoaXMudXNlZFRpbWVzLnRpbWUubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShpdGVtKSA/IGl0ZW1bMF0gOiBpdGVtOwogICAgICAgIH0pOwogICAgICAgIHZhciBsYXN0VGltZUVudHJ5ID0gRGF0ZVRpbWUuZnJvbUlTTyh0aW1lc1t0aW1lcy5sZW5ndGggLSAxXSk7CiAgICAgICAgdmFyIG9uZVllYXJCZWZvcmUgPSBsYXN0VGltZUVudHJ5Lm1pbnVzKHsKICAgICAgICAgIHllYXJzOiAxCiAgICAgICAgfSk7IC8vIHNlbGVjdCBjbG9zZXN0IHRvIG9uZSB5ZWFyIGJlZm9yZQoKICAgICAgICB2YXIgY2xvc2VzdE9uZVllYXJCZWZvcmUgPSB0aW1lcy5maW5kKGZ1bmN0aW9uIChpdGVtLCBpKSB7CiAgICAgICAgICByZXR1cm4gaSA9PT0gdGltZXMubGVuZ3RoIC0gMSB8fCBNYXRoLmFicyhvbmVZZWFyQmVmb3JlLnRvTWlsbGlzKCkgLSBEYXRlVGltZS5mcm9tSVNPKGl0ZW0pLnRvTWlsbGlzKCkpIDwgTWF0aC5hYnMob25lWWVhckJlZm9yZS50b01pbGxpcygpIC0gRGF0ZVRpbWUuZnJvbUlTTyh0aW1lc1tpICsgMV0pLnRvTWlsbGlzKCkpOwogICAgICAgIH0pOyAvLyBHZXQgaW5kZXggYW5kIHJldHVybiBvYmplY3QgZnJvbSBvcmlnaW5hbCB0aW1lcyBhcyB0aGVyZSBhcmUgYWxzbwogICAgICAgIC8vIGFycmF5cyBvZiB0aW1lIHR1cGxlIGFycmF5cwoKICAgICAgICB2YXIgZm91bmRJbmRleCA9IHRpbWVzLmluZGV4T2YoY2xvc2VzdE9uZVllYXJCZWZvcmUpOwogICAgICAgIHJldHVybiB0aGlzLnVzZWRUaW1lcy50aW1lW2ZvdW5kSW5kZXhdOwogICAgICB9IC8vIHVzZSBmaXJzdCB0aW1lCgoKICAgICAgcmV0dXJuIHRoaXMudXNlZFRpbWVzLnRpbWVbMF07CiAgICB9LAogICAgcmVmcmVzaEdyb3VwOiBmdW5jdGlvbiByZWZyZXNoR3JvdXAoZ3JvdXAsIHRpbWUpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICAvLyBHcm91cCBjYW4gYWxzbyBiZSBhbiBhcnJheSBkZXBlbmRpbmcgb24gdHlwZQogICAgICBpZiAoZ3JvdXApIHsKICAgICAgICB2YXIgdG9JdGVyYXRlOwoKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShncm91cCkpIHsKICAgICAgICAgIHRvSXRlcmF0ZSA9IGdyb3VwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0b0l0ZXJhdGUgPSBncm91cC4kY2hpbGRyZW47CiAgICAgICAgfQoKICAgICAgICBpZiAodG9JdGVyYXRlKSB7CiAgICAgICAgICB0b0l0ZXJhdGUuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAvLyBXZSBjaGVjayBpZiB3ZSBoYXZlIGEgc2ltcGxlIGxheWVyIG9yIGEgZ3JvdXBlZCBsYXllcgogICAgICAgICAgICBpZiAoaXRlbS4kY2hpbGRyZW4ubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBncm91cGVkIGxheWVyLCB3ZSBpdGVyYXRlIG92ZXIgdGhlIGxheWVycwogICAgICAgICAgICAgIGl0ZW0uJGNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKHN1Ykl0ZW0pIHsKICAgICAgICAgICAgICAgIC8vIFRPRE86IHByb3BzRGF0YSBkbyBub3QgaGF2ZSBhbGwgdGhlIHBhcmFtZXRlcnMgd2UgbmVlZCAobGlrZSBkYXRlRm9ybWF0RnVuY3Rpb24pCiAgICAgICAgICAgICAgICAvLyBUT0RPIGV4dGVuZCB0aGlzIGdldHRpbmcgdGhlIG1lcmdlZENvbmZpZ3MgaW4gYSBzYW1lIHdheSBhcyB3aGVuIG5vbi1ncm91cGVkCiAgICAgICAgICAgICAgICBzdWJJdGVtLm1hcE9iamVjdC5zZXRQYXJhbXMoX3RoaXM5LmxheWVyT3B0aW9ucyh0aW1lLCBzdWJJdGVtLiRvcHRpb25zLnByb3BzRGF0YSkpOyAvLyBmb3JjZSByZWRyYXcgb2YgbGF5ZXIKCiAgICAgICAgICAgICAgICBzdWJJdGVtLiRmb3JjZVVwZGF0ZSgpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZhciBvcmlnaW5hbENvbmZpZyA9IF90aGlzOS5tZXJnZWRDb25maWdzKCkuZmluZChmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnLm5hbWUgPT09IGl0ZW0ubmFtZTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgaXRlbS5tYXBPYmplY3Quc2V0UGFyYW1zKF90aGlzOS5sYXllck9wdGlvbnModGltZSwgb3JpZ2luYWxDb25maWcpKTsgLy8gZm9yY2UgcmVkcmF3IG9mIGxheWVyCgogICAgICAgICAgICAgIGl0ZW0uJGZvcmNlVXBkYXRlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHJlZnJlc2hMYXllcnM6IGZ1bmN0aW9uIHJlZnJlc2hMYXllcnMoc2lkZSkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CgogICAgICAvLyBjb21wYXJlKGxlZnQpIG9yIGRhdGEocmlnaHQpCiAgICAgIGlmIChzaWRlID09PSAnY29tcGFyZScgfHwgdGhpcy5pbmRpY2F0b3IuY29tcGFyZURpc3BsYXkpIHsKICAgICAgICB0aGlzLnJlZnJlc2hHcm91cCh0aGlzLiRyZWZzLmNvbXBhcmVMYXllckFycmF5V01TLCB0aGlzLmN1cnJlbnRDb21wYXJlVGltZSk7CgogICAgICAgIGlmICh0aGlzLiRyZWZzLmNvbXBhcmVMYXllckFycmF5WFlaKSB7CiAgICAgICAgICB0aGlzLiRyZWZzLmNvbXBhcmVMYXllckFycmF5WFlaLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgdmFyIG9yaWdpbmFsSW5kZXggPSBwYXJzZUludChpdGVtLiRhdHRyc1snZGF0YS1rZXktb3JpZ2luYWxpbmRleCddLCAxMCk7CiAgICAgICAgICAgIF90aGlzMTAuY29tcGFyZUxheWVyS2V5WFlaW29yaWdpbmFsSW5kZXhdID0gTWF0aC5yYW5kb20oKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKCF0aGlzLm1lcmdlZENvbmZpZ3MoKVswXS5mZWF0dXJlc1N0YXRpYyAmJiAoIXRoaXMubWVyZ2VkQ29uZmlncygpWzBdLmN1c3RvbUFyZWFGZWF0dXJlcyB8fCB0aGlzLnZhbGlkRHJhd25BcmVhKSkgewogICAgICAgICAgaWYgKHRoaXMubWVyZ2VkQ29uZmlncygpWzBdLmZlYXR1cmVzQ2x1c3RlcmluZykgewogICAgICAgICAgICB0aGlzLiRyZWZzLmZlYXR1cmVzQ29tcGFyZUNsdXN0ZXIubWFwT2JqZWN0LmNsZWFyTGF5ZXJzKCk7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5mZXRjaEZlYXR1cmVzKCdjb21wYXJlJyk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoc2lkZSA9PT0gJ2RhdGEnKSB7CiAgICAgICAgdGhpcy5yZWZyZXNoR3JvdXAodGhpcy4kcmVmcy5kYXRhTGF5ZXJBcnJheVdNUywgdGhpcy5jdXJyZW50VGltZSk7CgogICAgICAgIGlmICh0aGlzLiRyZWZzLmRhdGFMYXllckFycmF5WFlaKSB7CiAgICAgICAgICB0aGlzLiRyZWZzLmRhdGFMYXllckFycmF5WFlaLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgdmFyIG9yaWdpbmFsSW5kZXggPSBwYXJzZUludChpdGVtLiRhdHRyc1snZGF0YS1rZXktb3JpZ2luYWxpbmRleCddLCAxMCk7CiAgICAgICAgICAgIF90aGlzMTAuZGF0YUxheWVyS2V5WFlaW29yaWdpbmFsSW5kZXhdID0gTWF0aC5yYW5kb20oKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKCF0aGlzLm1lcmdlZENvbmZpZ3MoKVswXS5mZWF0dXJlc1N0YXRpYyAmJiAoIXRoaXMubWVyZ2VkQ29uZmlncygpWzBdLmN1c3RvbUFyZWFGZWF0dXJlcyB8fCB0aGlzLnZhbGlkRHJhd25BcmVhKSkgewogICAgICAgICAgaWYgKHRoaXMubWVyZ2VkQ29uZmlncygpWzBdLmZlYXR1cmVzQ2x1c3RlcmluZykgewogICAgICAgICAgICB0aGlzLiRyZWZzLmZlYXR1cmVzRGF0YUNsdXN0ZXIubWFwT2JqZWN0LmNsZWFyTGF5ZXJzKCk7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5mZXRjaEZlYXR1cmVzKCdkYXRhJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZmV0Y2hGZWF0dXJlczogZnVuY3Rpb24gZmV0Y2hGZWF0dXJlcyhzaWRlKSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgIGlmICh0aGlzLm1lcmdlZENvbmZpZ3Moc2lkZSlbMF0uZmVhdHVyZXMpIHsKICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMubGF5ZXJPcHRpb25zKHNpZGUgPT09ICdjb21wYXJlJyA/IHRoaXMuY3VycmVudENvbXBhcmVUaW1lIDogdGhpcy5jdXJyZW50VGltZSwgdGhpcy5tZXJnZWRDb25maWdzKHNpZGUpWzBdKTsgLy8gYWRkIGN1c3RvbSBhcmVhIGlmIHByZXNlbnQKCiAgICAgICAgdmFyIGN1c3RvbUFyZWEgPSB7fTsKCiAgICAgICAgaWYgKHRoaXMudmFsaWREcmF3bkFyZWEpIHsKICAgICAgICAgIGN1c3RvbUFyZWEgPSB0eXBlb2YgdGhpcy5tZXJnZWRDb25maWdzKClbMF0uZmVhdHVyZXMuYXJlYUZvcm1hdEZ1bmN0aW9uID09PSAnZnVuY3Rpb24nID8gdGhpcy5tZXJnZWRDb25maWdzKClbMF0uZmVhdHVyZXMuYXJlYUZvcm1hdEZ1bmN0aW9uKHRoaXMuZHJhd25BcmVhKSA6IHsKICAgICAgICAgICAgYXJlYTogSlNPTi5zdHJpbmdpZnkodGhpcy5kcmF3bkFyZWEpCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgdmFyIHRlbXBsYXRlU3Vic3QgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy5pbmRpY2F0b3IpLCBvcHRpb25zKSwgY3VzdG9tQXJlYSk7CgogICAgICAgIHZhciB0ZW1wbGF0ZVJlID0gL1x7ICooW1x3XyAtXSspICpcfS9nOwogICAgICAgIHZhciB1cmwgPSB0ZW1wbGF0ZSh0ZW1wbGF0ZVJlLCB0aGlzLm1lcmdlZENvbmZpZ3MoKVswXS5mZWF0dXJlcy51cmwsIHRlbXBsYXRlU3Vic3QpOwogICAgICAgIHZhciByZXF1ZXN0Qm9keSA9IG51bGw7CgogICAgICAgIGlmICh0aGlzLm1lcmdlZENvbmZpZ3MoKVswXS5mZWF0dXJlcy5yZXF1ZXN0Qm9keSkgewogICAgICAgICAgcmVxdWVzdEJvZHkgPSBfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLm1lcmdlZENvbmZpZ3MoKVswXS5mZWF0dXJlcy5yZXF1ZXN0Qm9keSk7CiAgICAgICAgICB2YXIgcGFyYW1zID0gT2JqZWN0LmtleXMocmVxdWVzdEJvZHkpOwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgICAgIC8vIHN1YnN0aXR1dGUgdGVtcGxhdGUgc3RyaW5ncyB3aXRoIHZhbHVlcwogICAgICAgICAgICByZXF1ZXN0Qm9keVtwYXJhbXNbaV1dID0gdGVtcGxhdGUodGVtcGxhdGVSZSwgcmVxdWVzdEJvZHlbcGFyYW1zW2ldXSwgdGVtcGxhdGVTdWJzdCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgcmVxdWVzdE9wdHMgPSB7CiAgICAgICAgICBjcmVkZW50aWFsczogJ3NhbWUtb3JpZ2luJywKICAgICAgICAgIG1ldGhvZDogdGhpcy5tZXJnZWRDb25maWdzKClbMF0uZmVhdHVyZXMucmVxdWVzdE1ldGhvZCB8fCAnR0VUJywKICAgICAgICAgIGhlYWRlcnM6IHRoaXMubWVyZ2VkQ29uZmlncygpWzBdLmZlYXR1cmVzLnJlcXVlc3RIZWFkZXJzIHx8IHt9CiAgICAgICAgfTsKCiAgICAgICAgaWYgKHJlcXVlc3RCb2R5KSB7CiAgICAgICAgICByZXF1ZXN0T3B0cy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5tYXAuZmlyZUV2ZW50KCdkYXRhbG9hZGluZycpOwogICAgICAgIGZldGNoKHVybCwgcmVxdWVzdE9wdHMpLnRoZW4oZnVuY3Rpb24gKHIpIHsKICAgICAgICAgIHJldHVybiByLmpzb24oKTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyYXdkYXRhKSB7CiAgICAgICAgICAvLyBpZiBjdXN0b20gcmVzcG9uc2UgLT4gZmVhdHVyZSBtYXBwaW5nIGZ1bmN0aW9uIGNvbmZpZ3VyZWQsIGFwcGx5IGl0CiAgICAgICAgICBpZiAodHlwZW9mIF90aGlzMTEubWVyZ2VkQ29uZmlncygpWzBdLmZlYXR1cmVzLmNhbGxiYWNrRnVuY3Rpb24gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzMTEubWVyZ2VkQ29uZmlncygpWzBdLmZlYXR1cmVzLmNhbGxiYWNrRnVuY3Rpb24ocmF3ZGF0YSk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHJhd2RhdGE7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgX3RoaXMxMS5tYXAuZmlyZUV2ZW50KCdkYXRhbG9hZCcpOwoKICAgICAgICAgIF90aGlzMTEudXBkYXRlSnNvbkxheWVycyhkYXRhLCBzaWRlKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczExLm1hcC5maXJlRXZlbnQoJ2RhdGFsb2FkJyk7CgogICAgICAgICAgX3RoaXMxMS51cGRhdGVKc29uTGF5ZXJzKGVtcHR5Riwgc2lkZSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy51cGRhdGVKc29uTGF5ZXJzKGVtcHR5Riwgc2lkZSk7CiAgICAgIH0KICAgIH0sCiAgICBzZWxlY3RHU0FJbmRpY2F0b3I6IGZ1bmN0aW9uIHNlbGVjdEdTQUluZGljYXRvcihmZWF0dXJlKSB7CiAgICAgIHZhciBfdGhpczEyID0gdGhpczsKCiAgICAgIHRoaXMuc2VsZWN0ZWRCb3JkZXIgPSBmZWF0dXJlLmJvcmRlcklkOwogICAgICB2YXIgZGF0YVVybCA9ICIuL2VvZGFzaC1kYXRhL2ludGVybmFsLyIuY29uY2F0KGZlYXR1cmUuYm9yZGVySWQsICIuanNvbiIpOwogICAgICB0aGlzLm1hcC5maXJlRXZlbnQoJ2RhdGFsb2FkaW5nJyk7CiAgICAgIGZldGNoKGRhdGFVcmwpLnRoZW4oZnVuY3Rpb24gKHIpIHsKICAgICAgICByZXR1cm4gci5qc29uKCk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGluZGljYXRvcikgewogICAgICAgIHZhciByZXR1cm5JbmRpY2F0b3IgPSB7fTsKICAgICAgICByZXR1cm5JbmRpY2F0b3IudmFsdWVzID0gX29iamVjdFNwcmVhZCh7fSwgaW5kaWNhdG9yKTsKICAgICAgICByZXR1cm5JbmRpY2F0b3IuaW5kaWNhdG9yID0gJ0dTQSc7IC8vIEdldCBhbGwgdGltZXMgb2YgYXZhaWxhYmxlIGJvcmRlciBjcm9zc2luZ3MgdG8gYWxsb3cgZmluZGluZyBtaW4gbWF4CgogICAgICAgIHJldHVybkluZGljYXRvci50aW1lID0gW107CiAgICAgICAgT2JqZWN0LmtleXMoaW5kaWNhdG9yKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgIHZhciBjdXJyVmFscyA9IGluZGljYXRvcltrZXldLnZhbHVlczsKCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGN1cnJWYWxzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgICAgIHJldHVybkluZGljYXRvci50aW1lLnB1c2goRGF0ZVRpbWUuZnJvbUlTTyhjdXJyVmFsc1tpXS50aW1lc3RhbXApKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm5JbmRpY2F0b3IubWVhc3VyZW1lbnQgPSBbMF07CiAgICAgICAgcmV0dXJuSW5kaWNhdG9yLnRpdGxlID0gZmVhdHVyZS5uYW1lOwogICAgICAgIHJldHVybkluZGljYXRvci55QXhpcyA9IF90aGlzMTIuaW5kaWNhdG9yLnlBeGlzOwoKICAgICAgICBfdGhpczEyLm1hcC5maXJlRXZlbnQoJ2RhdGFsb2FkJyk7CgogICAgICAgIF90aGlzMTIuJHN0b3JlLmNvbW1pdCgnaW5kaWNhdG9ycy9DVVNUT01fQVJFQV9JTkRJQ0FUT1JfTE9BRF9GSU5JU0hFRCcsIHJldHVybkluZGljYXRvcik7CgogICAgICAgIF90aGlzMTIuJGVtaXQoJ2ZldGNoQ3VzdG9tQXJlYUluZGljYXRvcicpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXMxMi5tYXAuZmlyZUV2ZW50KCdkYXRhbG9hZCcpOyAvLyBJdCBzZWVtcyBkYXRhIGNvdWxkIG5vdCBiZSBsb2FkZWQgbGV0cyBzaG93IGEgbm8gZGF0YSBmb3VuZCBtZXNzYWdlCgoKICAgICAgICBfdGhpczEyLiRzdG9yZS5jb21taXQoJ2luZGljYXRvcnMvQ1VTVE9NX0FSRUFfSU5ESUNBVE9SX0xPQURfRklOSVNIRUQnLCB7CiAgICAgICAgICBpc0VtcHR5OiB0cnVlCiAgICAgICAgfSk7CgogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIGZldGNoTW9iaWxpdHlEYXRhOiBmdW5jdGlvbiBmZXRjaE1vYmlsaXR5RGF0YShjb3VudHJ5Q29kZSwgYW9pSUQpIHsKICAgICAgdmFyIF90aGlzMTMgPSB0aGlzOwoKICAgICAgdmFyIGRhdGFVcmwgPSAiLi9lb2Rhc2gtZGF0YS9pbnRlcm5hbC8iLmNvbmNhdChjb3VudHJ5Q29kZSwgIi0iKS5jb25jYXQoYW9pSUQsICIuanNvbiIpOwogICAgICB0aGlzLm1hcC5maXJlRXZlbnQoJ2RhdGFsb2FkaW5nJyk7CiAgICAgIGZldGNoKGRhdGFVcmwpLnRoZW4oZnVuY3Rpb24gKHIpIHsKICAgICAgICByZXR1cm4gci5qc29uKCk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGluZGljYXRvcikgewogICAgICAgIGluZGljYXRvci5pbmRpY2F0b3IgPSBhb2lJRDsgLy8gZXNsaW50LWRpc2FibGUtbGluZQoKICAgICAgICBpbmRpY2F0b3IudGltZSA9IGluZGljYXRvci5WYWx1ZXMubWFwKGZ1bmN0aW9uIChyb3cpIHsKICAgICAgICAgIHJldHVybiBEYXRlVGltZS5mcm9tSVNPKHJvdy5kYXRlKTsKICAgICAgICB9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQoKICAgICAgICBpbmRpY2F0b3IubWVhc3VyZW1lbnQgPSBbMF07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKCiAgICAgICAgaW5kaWNhdG9yLmNvdW50cnkgPSBpbmRpY2F0b3IuQ291bnRyeUNvZGU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKCiAgICAgICAgaW5kaWNhdG9yLnRpdGxlID0gaW5kaWNhdG9yLkNvdW50cnlOYW1lOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCgogICAgICAgIGluZGljYXRvci55QXhpcyA9IF90aGlzMTMuaW5kaWNhdG9yLnlBeGlzOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCgogICAgICAgIF90aGlzMTMubWFwLmZpcmVFdmVudCgnZGF0YWxvYWQnKTsKCiAgICAgICAgX3RoaXMxMy4kc3RvcmUuY29tbWl0KCdpbmRpY2F0b3JzL0NVU1RPTV9BUkVBX0lORElDQVRPUl9MT0FEX0ZJTklTSEVEJywgaW5kaWNhdG9yKTsKCiAgICAgICAgX3RoaXMxMy4kZW1pdCgnZmV0Y2hDdXN0b21BcmVhSW5kaWNhdG9yJyk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBfdGhpczEzLm1hcC5maXJlRXZlbnQoJ2RhdGFsb2FkJyk7IC8vIEl0IHNlZW1zIGRhdGEgY291bGQgbm90IGJlIGxvYWRlZCBsZXRzIHNob3cgYSBubyBkYXRhIGZvdW5kIG1lc3NhZ2UKCgogICAgICAgIF90aGlzMTMuJHN0b3JlLmNvbW1pdCgnaW5kaWNhdG9ycy9DVVNUT01fQVJFQV9JTkRJQ0FUT1JfTE9BRF9GSU5JU0hFRCcsIHsKICAgICAgICAgIGlzRW1wdHk6IHRydWUKICAgICAgICB9KTsKCiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgZmV0Y2hDdXN0b21BcmVhSW5kaWNhdG9yOiBmdW5jdGlvbiBmZXRjaEN1c3RvbUFyZWFJbmRpY2F0b3IoKSB7CiAgICAgIHZhciBfdGhpczE0ID0gdGhpczsKCiAgICAgIHZhciBvcHRpb25zID0gdGhpcy5sYXllck9wdGlvbnModGhpcy5jdXJyZW50VGltZSwgdGhpcy5tZXJnZWRDb25maWdzKClbMF0pOyAvLyBhZGQgY3VzdG9tIGFyZWEgaWYgcHJlc2VudAoKICAgICAgdmFyIGN1c3RvbUFyZWEgPSB7fTsKCiAgICAgIGlmICh0aGlzLnZhbGlkRHJhd25BcmVhKSB7CiAgICAgICAgY3VzdG9tQXJlYSA9IHR5cGVvZiB0aGlzLm1lcmdlZENvbmZpZ3MoKVswXS5hcmVhSW5kaWNhdG9yLmFyZWFGb3JtYXRGdW5jdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMubWVyZ2VkQ29uZmlncygpWzBdLmFyZWFJbmRpY2F0b3IuYXJlYUZvcm1hdEZ1bmN0aW9uKHRoaXMuZHJhd25BcmVhKSA6IHsKICAgICAgICAgIGFyZWE6IEpTT04uc3RyaW5naWZ5KHRoaXMuZHJhd25BcmVhKQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHRoaXMuaW5kaWNhdG9yLnRpdGxlID0gJ1VzZXIgZGVmaW5lZCBhcmVhIG9mIGludGVyZXN0JzsKCiAgICAgIHZhciB0ZW1wbGF0ZVN1YnN0ID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuaW5kaWNhdG9yKSwgb3B0aW9ucyksIGN1c3RvbUFyZWEpOwoKICAgICAgdmFyIHRlbXBsYXRlUmUgPSAvXHsgKihbXHdfIC1dKykgKlx9L2c7CiAgICAgIHZhciB1cmwgPSB0ZW1wbGF0ZSh0ZW1wbGF0ZVJlLCB0aGlzLm1lcmdlZENvbmZpZ3MoKVswXS5hcmVhSW5kaWNhdG9yLnVybCwgdGVtcGxhdGVTdWJzdCk7CiAgICAgIHZhciByZXF1ZXN0Qm9keSA9IG51bGw7CgogICAgICBpZiAodGhpcy5tZXJnZWRDb25maWdzKClbMF0uYXJlYUluZGljYXRvci5yZXF1ZXN0Qm9keSkgewogICAgICAgIHJlcXVlc3RCb2R5ID0gX29iamVjdFNwcmVhZCh7fSwgdGhpcy5tZXJnZWRDb25maWdzKClbMF0uYXJlYUluZGljYXRvci5yZXF1ZXN0Qm9keSk7CiAgICAgICAgdmFyIHBhcmFtcyA9IE9iamVjdC5rZXlzKHJlcXVlc3RCb2R5KTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJhbXMubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICAgIC8vIHN1YnN0aXR1dGUgdGVtcGxhdGUgc3RyaW5ncyB3aXRoIHZhbHVlcwogICAgICAgICAgaWYgKHR5cGVvZiByZXF1ZXN0Qm9keVtwYXJhbXNbaV1dID09PSAnc3RyaW5nJykgewogICAgICAgICAgICByZXF1ZXN0Qm9keVtwYXJhbXNbaV1dID0gdGVtcGxhdGUodGVtcGxhdGVSZSwgcmVxdWVzdEJvZHlbcGFyYW1zW2ldXSwgdGVtcGxhdGVTdWJzdCk7CiAgICAgICAgICB9IC8vIENvbnZlcnQgZ2VvanNvbnMgYmFjayB0byBhbiBvYmplY3QKCgogICAgICAgICAgaWYgKHBhcmFtc1tpXSA9PT0gJ2dlb2pzb24nKSB7CiAgICAgICAgICAgIHJlcXVlc3RCb2R5W3BhcmFtc1tpXV0gPSBKU09OLnBhcnNlKHJlcXVlc3RCb2R5W3BhcmFtc1tpXV0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIHJlcXVlc3RPcHRzID0gewogICAgICAgIGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nLAogICAgICAgIG1ldGhvZDogdGhpcy5tZXJnZWRDb25maWdzKClbMF0uYXJlYUluZGljYXRvci5yZXF1ZXN0TWV0aG9kIHx8ICdHRVQnLAogICAgICAgIGhlYWRlcnM6IHRoaXMubWVyZ2VkQ29uZmlncygpWzBdLmFyZWFJbmRpY2F0b3IucmVxdWVzdEhlYWRlcnMgfHwge30KICAgICAgfTsKCiAgICAgIGlmIChyZXF1ZXN0Qm9keSkgewogICAgICAgIHJlcXVlc3RPcHRzLmJvZHkgPSBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSk7CiAgICAgIH0KCiAgICAgIHRoaXMubWFwLmZpcmVFdmVudCgnZGF0YWxvYWRpbmcnKTsKICAgICAgZmV0Y2godXJsLCByZXF1ZXN0T3B0cykudGhlbihmdW5jdGlvbiAocikgewogICAgICAgIHJldHVybiByLmpzb24oKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmF3ZGF0YSkgewogICAgICAgIGlmICh0eXBlb2YgX3RoaXMxNC5tZXJnZWRDb25maWdzKClbMF0uYXJlYUluZGljYXRvci5jYWxsYmFja0Z1bmN0aW9uID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAvLyBtZXJnZSBkYXRhIGZyb20gY3VycmVudCBpbmRpY2F0b3IgZGF0YSBhbmQgbmV3IGRhdGEgZnJvbSBhcGkKICAgICAgICAgIC8vIHJldHVybnMgbmV3IGluZGljYXRvciBvYmplY3QgdG8gc2V0IGFzIGN1c3RvbSBhcmVhIGluZGljYXRvcgogICAgICAgICAgcmV0dXJuIF90aGlzMTQubWVyZ2VkQ29uZmlncygpWzBdLmFyZWFJbmRpY2F0b3IuY2FsbGJhY2tGdW5jdGlvbihyYXdkYXRhLCBfdGhpczE0LmluZGljYXRvcik7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmF3ZGF0YTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAoaW5kaWNhdG9yKSB7CiAgICAgICAgX3RoaXMxNC5tYXAuZmlyZUV2ZW50KCdkYXRhbG9hZCcpOwoKICAgICAgICBfdGhpczE0LiRzdG9yZS5jb21taXQoJ2luZGljYXRvcnMvQ1VTVE9NX0FSRUFfSU5ESUNBVE9SX0xPQURfRklOSVNIRUQnLCBpbmRpY2F0b3IpOwoKICAgICAgICBfdGhpczE0LiRlbWl0KCdmZXRjaEN1c3RvbUFyZWFJbmRpY2F0b3InKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzMTQubWFwLmZpcmVFdmVudCgnZGF0YWxvYWQnKTsKCiAgICAgICAgX3RoaXMxNC4kc3RvcmUuY29tbWl0KCdpbmRpY2F0b3JzL0NVU1RPTV9BUkVBX0lORElDQVRPUl9MT0FEX0ZJTklTSEVEJywgbnVsbCk7CgogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIGNsZWFyQ3VzdG9tQXJlYUZpbHRlcjogZnVuY3Rpb24gY2xlYXJDdXN0b21BcmVhRmlsdGVyKCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2ZlYXR1cmVzL1NFVF9TRUxFQ1RFRF9BUkVBJywgbnVsbCk7CiAgICB9LAogICAgZ2V0RGF0YUY6IGZ1bmN0aW9uIGdldERhdGFGKCkgewogICAgICByZXR1cm4gZGF0YUY7CiAgICB9LAogICAgZ2V0Q29tcGFyZUY6IGZ1bmN0aW9uIGdldENvbXBhcmVGKCkgewogICAgICByZXR1cm4gY29tcGFyZUY7CiAgICB9LAogICAgdXBkYXRlSnNvbkxheWVyczogZnVuY3Rpb24gdXBkYXRlSnNvbkxheWVycyhmdHJzLCBzaWRlKSB7CiAgICAgIGlmICh0aGlzLm1lcmdlZENvbmZpZ3MoKVswXS5mZWF0dXJlc0NsdXN0ZXJpbmcpIHsKICAgICAgICAvLyBtYXJrZXJjbHVzdGVyIG5lZWRzIG1hbnVhbCBhZGRpbmcgb2YgYWxsIGdlb2pzb25zIGl0IHdpbGwgc2hvdwogICAgICAgIC8vIGFuZCBjbGVhbnVwIG9mIHByZXZpb3VzIGNvbnRlbnQKICAgICAgICB2YXIgZ2VvanNvbkZyb21EYXRhID0gZ2VvSnNvbihmdHJzLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuZmVhdHVyZU9wdGlvbnMoc2lkZSkpLCB7fSwgewogICAgICAgICAgcGFuZTogc2lkZSA9PT0gJ2RhdGEnID8gdGhpcy50b29sdGlwUGFuZSA6IHRoaXMuc2hhZG93UGFuZQogICAgICAgIH0pKTsKCiAgICAgICAgaWYgKHRoaXMuJHJlZnMuZmVhdHVyZXNEYXRhQ2x1c3RlcikgewogICAgICAgICAgaWYgKHNpZGUgPT09ICdkYXRhJykgewogICAgICAgICAgICB0aGlzLiRyZWZzLmZlYXR1cmVzRGF0YUNsdXN0ZXIubWFwT2JqZWN0LmNsZWFyTGF5ZXJzKCk7CiAgICAgICAgICAgIHRoaXMuJHJlZnMuZmVhdHVyZXNEYXRhQ2x1c3Rlci5tYXBPYmplY3QuYWRkTGF5ZXJzKFtnZW9qc29uRnJvbURhdGFdKTsKICAgICAgICAgICAgdGhpcy5kYXRhRmVhdHVyZXNDb3VudCA9IGZ0cnMuZmVhdHVyZXMubGVuZ3RoOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5mZWF0dXJlc0NvbXBhcmVDbHVzdGVyLm1hcE9iamVjdC5jbGVhckxheWVycygpOwogICAgICAgICAgICB0aGlzLiRyZWZzLmZlYXR1cmVzQ29tcGFyZUNsdXN0ZXIubWFwT2JqZWN0LmFkZExheWVycyhbZ2VvanNvbkZyb21EYXRhXSk7CiAgICAgICAgICAgIHRoaXMuY29tcGFyZUZlYXR1cmVzQ291bnQgPSBmdHJzLmZlYXR1cmVzLmxlbmd0aDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoc2lkZSA9PT0gJ2RhdGEnKSB7CiAgICAgICAgLy8gbm9ybWFsIGdlb2pzb24gbGF5ZXIganVzdCBuZWVkcyBtYW51YWwgcmVmcmVzaAogICAgICAgIHRoaXMuZGF0YUpzb25Db21wdXRlZCA9IGZ0cnM7CiAgICAgICAgdGhpcy5kYXRhSnNvbktleSA9IE1hdGgucmFuZG9tKCk7CiAgICAgICAgdGhpcy5kYXRhRmVhdHVyZXNDb3VudCA9IGZ0cnMuZmVhdHVyZXMubGVuZ3RoOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY29tcGFyZUpzb25Db21wdXRlZCA9IGZ0cnM7CiAgICAgICAgdGhpcy5jb21wYXJlSnNvbktleSA9IE1hdGgucmFuZG9tKCk7CiAgICAgICAgdGhpcy5jb21wYXJlRmVhdHVyZXNDb3VudCA9IGZ0cnMuZmVhdHVyZXMubGVuZ3RoOwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgZW5hYmxlQ29tcGFyZTogZnVuY3Rpb24gZW5hYmxlQ29tcGFyZShvbikgewogICAgICB2YXIgX3RoaXMxNSA9IHRoaXM7CgogICAgICBpZiAoIW9uKSB7CiAgICAgICAgaWYgKHRoaXMuc2xpZGVyICE9PSBudWxsKSB7CiAgICAgICAgICB0aGlzLm1hcC5yZW1vdmVDb250cm9sKHRoaXMuc2xpZGVyKTsKICAgICAgICAgIHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMuJHJlZnMuY29tcGFyZUxheWVycy5tYXBPYmplY3QpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm1hcC5hZGRMYXllcih0aGlzLiRyZWZzLmNvbXBhcmVMYXllcnMubWFwT2JqZWN0KTsKCiAgICAgICAgaWYgKCF0aGlzLm1lcmdlZENvbmZpZ3MoKVswXS5jdXN0b21BcmVhRmVhdHVyZXMgfHwgdGhpcy52YWxpZERyYXduQXJlYSkgewogICAgICAgICAgdGhpcy5mZXRjaEZlYXR1cmVzKCdjb21wYXJlJyk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczE1LnNsaWRlci5zZXRMZWZ0TGF5ZXJzKF90aGlzMTUuZXh0cmFjdEFjdHVhbExheWVycyhfdGhpczE1LiRyZWZzLmNvbXBhcmVMYXllcnMpKTsKCiAgICAgICAgICBfdGhpczE1LnNsaWRlci5zZXRSaWdodExheWVycyhfdGhpczE1LmV4dHJhY3RBY3R1YWxMYXllcnMoX3RoaXMxNS4kcmVmcy5kYXRhTGF5ZXJzKSk7CgogICAgICAgICAgX3RoaXMxNS5zbGlkZXIuYWRkVG8oX3RoaXMxNS5tYXApOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZHJhd25BcmVhOiBmdW5jdGlvbiBkcmF3bkFyZWEoKSB7CiAgICAgIC8vIHdhdGNoIG9uIGRyYXduIGFyZWEgcHJvcCBjaGFuZ2UgdHJpZ2dlcmluZyB1cGRhdGUgb2YgZHJhdyBsYXllciwgZmV0Y2hpbmcgY3VzdG9tIGZlYXR1cmVzCiAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRBcmVhRmVhdHVyZSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["IndicatorMap.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <l-map\n    ref=\"map\"\n    style=\"height: 100%; width: 100%; background: #cad2d3; z-index: 1;\"\n    :options=\"defaultMapOptions\"\n    :maxZoom=\"mapDefaults.maxMapZoom\"\n    :minZoom=\"mapDefaults.minMapZoom\"\n    @update:zoom=\"zoomUpdated\"\n    @update:center=\"centerUpdated\"\n    @update:bounds=\"boundsUpdated\"\n    v-resize=\"onResize\"\n    @ready=\"onMapReady()\"\n  >\n    <l-control-zoom position=\"topright\"></l-control-zoom>\n    <l-feature-group ref=\"customAreaFilterFeatures\"></l-feature-group>\n    <l-control position=\"topright\"\n      v-if=\"customAreaFilter && validDrawnArea && renderTrashBin\">\n      <v-tooltip left>\n        <template v-slot:activator=\"{ on }\">\n          <div v-on=\"on\" class=\"d-inline-block\">\n            <v-btn\n              color=\"error\"\n              x-small\n              fab\n              class=\"pa-0\"\n              :style=\"`${$vuetify.breakpoint.mdAndDown\n                ? 'width: 30px; height: 30px;'\n                : 'width: 26px; height: 26px;'} border-radius: 4px`\"\n              @click=\"clearCustomAreaFilter\"\n            >\n              <v-icon small>mdi-delete</v-icon>\n            </v-btn>\n          </div>\n        </template>\n          <span>Clear selection</span>\n      </v-tooltip>\n    </l-control>\n    <l-control position=\"topright\"\n      v-if=\"mergedConfigs()[0].customAreaIndicator && validDrawnArea && renderTrashBin\">\n      <v-tooltip left>\n        <template v-slot:activator=\"{ on }\">\n          <div v-on=\"on\" class=\"d-inline-block\"\n          :style=\"`border: 3px solid ${appConfig.branding.primaryColor};\n          border-radius: 6px;`\">\n            <v-btn\n              color=\"white\"\n              x-small\n              fab\n              depressed\n              class=\"pa-0\"\n              :style=\"`${$vuetify.breakpoint.mdAndDown\n                ? 'width: 36px; height: 36px;'\n                : 'width: 30px; height: 30px;'}\n                border-radius: 4px;\n                color: ${appConfig.branding.primaryColor};`\"\n              @click=\"fetchCustomAreaIndicator\"\n            >\n              <v-icon small>mdi-poll</v-icon>\n            </v-btn>\n          </div>\n        </template>\n          <span>Draw chart from sub-area</span>\n      </v-tooltip>\n    </l-control>\n    <LTileLayer\n      v-for=\"layer in baseLayers.filter(b => b.protocol === 'xyz')\"\n      v-bind=\"layer\"\n      ref=\"baseLayers\"\n      layer-type=\"base\"\n      :key=\"layer.name\"\n      :opacity=\"opacityTerrain[zoom]\"\n      :options=\"layerOptions(null, layer)\"\n    >\n    </LTileLayer>\n    <LWMSTileLayer\n      v-for=\"layer in baseLayers.filter(b => b.protocol === 'WMS')\"\n      :key=\"layer.name\"\n      v-bind=\"layer\"\n      :options=\"layerOptions(null, layer)\"\n      layer-type=\"base\"\n    >\n    </LWMSTileLayer>\n    <l-geo-json\n    :geojson=\"subAoiInverse\"\n    :pane=\"popupPane\"\n    layer-type=\"overlay\"\n    name='Reference area overlay'\n    :optionsStyle=\"subAoiInverseStyle\"\n    >\n    </l-geo-json>\n    <l-layer-group ref=\"dataLayers\">\n      <l-geo-json\n      :geojson=\"indicator.subAoi\"\n      :pane=\"tooltipPane\"\n      :optionsStyle=\"subAoiStyle('data')\"\n      >\n      </l-geo-json>\n      <l-marker-cluster v-if=\"mergedConfigs()[0].featuresClustering\"\n        ref=\"featuresDataCluster\"\n        :options=\"clusterOptions\"\n        >\n      </l-marker-cluster>\n      <l-geo-json\n          v-else\n          ref=\"featureJsonData\"\n          :geojson=\"getDataF().features\"\n          :options=\"featureOptions('data')\"\n          :pane=\"tooltipPane\"\n          :key=\"dataJsonKey\"\n        >\n      </l-geo-json>\n      <l-circle-marker\n        v-if=\"showAoi\"\n        :lat-lng=\"aoi\"\n        :radius=\"12\"\n        :color=\"appConfig.branding.primaryColor\"\n        :weight=\"2\"\n        :dashArray=\"'3'\"\n        :fill=\"true\"\n        :fillColor=\"getAoiFill('data')\"\n        :fillOpacity=\"1\"\n        :pane=\"tooltipPane\"\n      >\n      </l-circle-marker>\n      <!-- XYZ grouping is not implemented yet -->\n      <LTileLayer\n      v-for=\"(layerConfig, i) in mergedConfigs().filter(l => l.protocol === 'xyz')\"\n        ref=\"dataLayerArrayXYZ\"\n        :data-key-originalindex=\"i\"\n        :key=\"dataLayerKeyXYZ[i]\"\n        v-bind=\"layerConfig\"\n        :options=\"layerOptions(currentTime, layerConfig)\"\n        :pane=\"overlayPane\"\n        layer-type=\"overlay\"\n      >\n      </LTileLayer>\n      <template v-if=\"getCombinedWMSLayers().length > 0\">\n        <l-layer-group ref=\"dataLayerArrayWMS\">\n          <l-layer-group\n          v-for=\"combLayer in this.getCombinedWMSLayers()\"\n            :key=\"combLayer.name\"\n            :name=\"combLayer.name\"\n            layer-type=\"overlay\"\n          >\n            <LWMSTileLayer\n            v-for=\"cLayerConfig in combLayer.combinedLayers\"\n              :key=\"cLayerConfig.name\"\n              v-bind=\"cLayerConfig\"\n              :options=\"layerOptions(currentTime, cLayerConfig)\"\n              :pane=\"overlayPane\"\n            >\n            </LWMSTileLayer>\n          </l-layer-group>\n          <LWMSTileLayer\n          v-for=\"layerConfig in this.getSimpleWMSLayers()\"\n            :key=\"layerConfig.name\"\n            v-bind=\"layerConfig\"\n            :options=\"layerOptions(currentTime, layerConfig)\"\n            :pane=\"overlayPane\"\n            layer-type=\"overlay\"\n          >\n          </LWMSTileLayer>\n        </l-layer-group>\n      </template>\n      <template v-else>\n        <LWMSTileLayer\n        v-for=\"layerConfig in this.getSimpleWMSLayers()\"\n          ref=\"dataLayerArrayWMS\"\n          :key=\"layerConfig.name\"\n          v-bind=\"layerConfig\"\n          :options=\"layerOptions(currentTime, layerConfig)\"\n          :pane=\"overlayPane\"\n          layer-type=\"overlay\"\n        >\n        </LWMSTileLayer>\n      </template>\n    </l-layer-group>\n    <l-layer-group ref=\"compareLayers\">\n      <!-- XYZ grouping is not implemented yet -->\n      <LTileLayer\n      v-for=\"(layerConfig, i) in mergedConfigs('compare').filter(l => l.protocol === 'xyz')\"\n        ref=\"compareLayerArrayXYZ\"\n        :data-key-originalindex=\"i\"\n        :key=\"compareLayerKeyXYZ[i]\"\n        v-bind=\"layerConfig\"\n        :visible=\"enableCompare\"\n        :options=\"layerOptions(currentCompareTime, layerConfig)\"\n        :pane=\"overlayPane\"\n      >\n      </LTileLayer>\n      <template v-if=\"getCombinedWMSLayers('compare').length > 0\">\n        <l-layer-group ref=\"compareLayerArrayWMS\">\n          <l-layer-group\n          v-for=\"combLayer in this.getCombinedWMSLayers('compare')\"\n            :key=\"combLayer.name\"\n          >\n            <LWMSTileLayer\n            v-for=\"cLayerConfig in combLayer.combinedLayers\"\n              :key=\"cLayerConfig.name\"\n              v-bind=\"cLayerConfig\"\n              :visible=\"enableCompare\"\n              :options=\"layerOptions(currentCompareTime, cLayerConfig)\"\n              :pane=\"overlayPane\"\n            >\n            </LWMSTileLayer>\n          </l-layer-group>\n          <LWMSTileLayer\n          v-for=\"layerConfig in this.getSimpleWMSLayers('compare')\"\n            :key=\"layerConfig.name\"\n            v-bind=\"layerConfig\"\n            :visible=\"enableCompare\"\n            :options=\"layerOptions(currentCompareTime, layerConfig)\"\n            :pane=\"overlayPane\"\n          >\n          </LWMSTileLayer>\n        </l-layer-group>\n      </template>\n      <template v-else>\n        <LWMSTileLayer\n        v-for=\"layerConfig in this.getSimpleWMSLayers('compare')\"\n          ref=\"compareLayerArrayWMS\"\n          :key=\"layerConfig.name\"\n          v-bind=\"layerConfig\"\n          :visible=\"enableCompare\"\n          :options=\"layerOptions(currentCompareTime, layerConfig)\"\n          :pane=\"overlayPane\"\n        >\n        </LWMSTileLayer>\n      </template>\n      <l-geo-json\n        :geojson=\"indicator.subAoi\"\n        :pane=\"shadowPane\"\n        :visible=\"enableCompare\"\n        :optionsStyle=\"subAoiStyle('compare')\"\n      >\n      </l-geo-json>\n      <l-marker-cluster v-if=\"mergedConfigs()[0].featuresClustering\"\n        ref=\"featuresCompareCluster\" :options=\"clusterOptions\">\n      </l-marker-cluster>\n      <l-geo-json\n        v-else\n        ref=\"featureJsonCompare\"\n        :visible=\"enableCompare\"\n        :geojson=\"getCompareF().features\"\n        :options=\"featureOptions('compare')\"\n        :pane=\"shadowPane\"\n        :key=\"compareJsonKey\"\n      >\n      </l-geo-json>\n      <l-circle-marker\n        v-if=\"showAoi\"\n        :lat-lng=\"aoi\"\n        :visible=\"enableCompare\"\n        :radius=\"12\"\n        :color=\"appConfig.branding.primaryColor\"\n        :weight=\"2\"\n        :dashArray=\"3\"\n        :fill=\"true\"\n        :fillColor=\"getAoiFill('compare')\"\n        :fillOpacity=\"1\"\n        :pane=\"shadowPane\"\n      >\n      </l-circle-marker>\n    </l-layer-group>\n    <l-layer-group ref=\"overlayLayers\" v-if=\"!countrySelection\">\n      <LTileLayer\n        v-for=\"layer in overlayLayers.filter(b => b.protocol === 'xyz')\"\n        :key=\"layer.name\"\n        v-bind=\"layer\"\n        :pane=\"markerPane\"\n        :opacity=\"opacityOverlay[zoom]\"\n        :options=\"layerOptions(null, layer)\"\n        layer-type=\"overlay\"\n      >\n      </LTileLayer>\n      <LWMSTileLayer\n        v-for=\"layer in overlayLayers.filter(b => b.protocol === 'WMS')\"\n        v-bind=\"layer\"\n        :key=\"layer.name\"\n        :options=\"layerOptions(null, layer)\"\n        :pane=\"markerPane\"\n        :opacity=\"opacityOverlay[zoom]\"\n        layer-type=\"overlay\"\n      >\n      </LWMSTileLayer>\n    </l-layer-group>\n    <l-geo-json\n    v-if=\"countrySelection\"\n    :geojson=\"countriesJson\"\n    :optionsStyle=\"countriesStyle\"\n    :options=\"countriesOptions()\"\n    name=\"Country vectors\"\n    layer-type=\"overlay\"\n    >\n    </l-geo-json>\n    <l-feature-group ref=\"gsaLayer\"\n      v-if=\"borderSelection\">\n      <l-circle-marker v-for=\"(feature) in gsaJson\"\n        :key=\"feature.id\"\n        ref=\"markers\"\n        :lat-lng=\"feature.AOI.split(',').map(Number)\"\n        :name=\"feature.name\"\n        color=\"#fff\"\n        :radius=\"selectedBorder === feature.borderId ? 6 : 4\"\n        :fillColor=\"selectedBorder === feature.borderId ?\n          appConfig.branding.secondaryColor : appConfig.branding.primaryColor\"\n        :weight=\"selectedBorder === feature.borderId ? 2 : 1\"\n        :opacity=\"selectedBorder === feature.borderId ? 1.0 : 0.8\"\n        :fillOpacity=\"selectedBorder === feature.borderId ? 1.0 : 0.9\"\n        @click=\"selectGSAIndicator(feature)\"\n      >\n      <l-tooltip class=\"tooltip text-center\" :options=\"{ direction: 'top' }\">\n          <p class=\"ma-0\">\n            <strong>{{ feature.name }}</strong>\n          </p>\n        </l-tooltip>\n      </l-circle-marker>\n    </l-feature-group>\n    <div\n    :style=\"`position: absolute; z-index: 700; top: 10px; left: 10px;`\">\n      <img v-if=\"mergedConfigs()[0].legendUrl\"\n      :src=\"mergedConfigs()[0].legendUrl\" alt=\"\"\n      :class=\"`map-legend ${$vuetify.breakpoint.xsOnly ? 'map-legend-expanded' :\n      (legendExpanded && 'map-legend-expanded')}`\"\n      @click=\"legendExpanded = !legendExpanded\"\n      :style=\"`background: rgba(255, 255, 255, 0.8);`\">\n      <div\n      v-if=\"mergedConfigs()[0].customAreaFeatures &&\n      (mergedConfigs()[0].features.featureLimit === dataFeaturesCount ||\n      mergedConfigs()[0].features.featureLimit === compareFeaturesCount)\"\n      :style=\"`width: fit-content; background: rgba(255, 255, 255, 0.8);`\"\n      >\n        <h3 :class=\"`brand-${appConfig.id} px-3 py-2`\">\n          Limit of drawn features is for performance reasons set to\n          <span :style=\"`font-size: 17px;`\">{{mergedConfigs()[0].features.featureLimit}}\n          </span>\n        </h3>\n      </div>\n    </div>\n    <div\n      class=\"d-flex justify-center\"\n      style=\"position: relative; width: 100%; height: 100%;\"\n      @click.stop=\"\"\n      @dblclick.stop=\"\"\n    >\n      <h3 :class=\"`brand-${appConfig.id} px-3 py-1`\"\n        v-if=\"enableCompare && indicator.compareDisplay && indicator.compareDisplay.mapLabel\"\n        style=\"position:absolute; z-index:1000; right: 0px; bottom: 45%;\n        background: rgba(255, 255, 255, 0.6); font-size: 16px; pointer-events: none;\">\n          {{indicator.display.mapLabel}}\n      </h3>\n      <h3 :class=\"`brand-${appConfig.id} px-3 py-1`\"\n        v-if=\"enableCompare && indicator.compareDisplay && indicator.display.mapLabel\"\n        style=\"position:absolute; z-index:1000; left: 0px; bottom: 45%;\n        background: rgba(255, 255, 255, 0.6); font-size: 16px; pointer-events: none;\">\n          {{indicator.compareDisplay.mapLabel}}\n      </h3>\n      <v-sheet\n        v-if=\"!mergedConfigs()[0].disableTimeSelection\"\n        class=\"row justify-center align-center\"\n        style=\"position: absolute; bottom: 30px; z-index: 1000; width: auto; max-width: 100%;\"\n      >\n        <v-col\n          v-if=\"enableCompare && !indicator.compareDisplay\"\n          cols=\"6\"\n          class=\"pr-0\"\n        >\n          <v-select\n            v-if=\"enableCompare\"\n            outlined\n            dense\n            autofocus\n            hide-details\n            :prepend-inner-icon=\"(arrayOfObjects && compareLayerTime) && (arrayOfObjects\n              .map((i) => i.value)\n              .indexOf(compareLayerTime.value) > 0\n                ? 'mdi-arrow-left-drop-circle'\n                : 'mdi-asterisk')\"\n            :append-icon=\"(arrayOfObjects && compareLayerTime) && (arrayOfObjects\n              .map((i) => i.value)\n              .indexOf(compareLayerTime.value) < arrayOfObjects.length - 1\n                ? 'mdi-arrow-right-drop-circle'\n                : 'mdi-asterisk')\"\n            menu-props=\"auto\"\n            :items=\"arrayOfObjects\"\n            item-value=\"value\"\n            item-text=\"name\"\n            v-model=\"compareLayerTime\"\n            @change=\"compareLayerTimeSelection\"\n            @click:prepend-inner=\"compareLayerReduce\"\n            @click:append=\"compareLayerIncrease\"\n          ></v-select>\n        </v-col>\n        <v-col\n          :cols=\"enableCompare && !indicator.compareDisplay ? 6 : 12\"\n        >\n          <v-select\n            outlined\n            dense\n            autofocus\n            hide-details\n            :prepend-inner-icon=\"(arrayOfObjects && dataLayerTime) && (arrayOfObjects\n              .map((i) => i.value)\n              .indexOf(dataLayerTime.value) > 0\n                ? 'mdi-arrow-left-drop-circle'\n                : 'mdi-asterisk')\"\n            :append-icon=\"(arrayOfObjects && dataLayerTime) && (arrayOfObjects\n              .map((i) => i.value)\n              .indexOf(dataLayerTime.value) < arrayOfObjects.length - 1\n                ? 'mdi-arrow-right-drop-circle'\n                : 'mdi-asterisk')\"\n            menu-props=\"auto\"\n            :items=\"arrayOfObjects\"\n            item-value=\"value\"\n            item-text=\"name\"\n            v-model=\"dataLayerTime\"\n            @change=\"dataLayerTimeSelection\"\n            @click:prepend-inner=\"dataLayerReduce\"\n            @click:append=\"dataLayerIncrease\"\n          >\n            <template v-slot:prepend\n            v-if=\"!mergedConfigs()[0].disableCompare\">\n              <v-tooltip\n                bottom\n              >\n                <template v-slot:activator=\"{ on }\">\n                  <v-icon v-on=\"on\" @click=\"enableCompare = !enableCompare\">mdi-compare</v-icon>\n                </template>\n                Compare two images\n              </v-tooltip>\n            </template>\n          </v-select>\n        </v-col>\n      </v-sheet>\n    </div>\n    <l-control-attribution position=\"bottomright\" prefix=''></l-control-attribution>\n    <l-control-layers position=\"topright\" ref=\"layersControl\"></l-control-layers>\n  </l-map>\n</template>\n\n<script>\n// Utilities\nimport {\n  mapState,\n  mapGetters,\n} from 'vuex';\nimport {\n  geoJson, latLngBounds, latLng, circleMarker, DivIcon, Point,\n} from 'leaflet';\nimport { template } from '@/utils';\nimport {\n  LMap, LTileLayer, LWMSTileLayer, LGeoJson, LCircleMarker,\n  LControlLayers, LControlAttribution, LControlZoom, LLayerGroup,\n  LFeatureGroup, LControl, LTooltip,\n} from 'vue2-leaflet';\nimport { DateTime } from 'luxon';\n\nimport 'leaflet/dist/leaflet.css';\nimport 'leaflet-mouse-position';\nimport 'leaflet-side-by-side';\nimport 'leaflet-loading';\nimport 'leaflet-loading/src/Control.Loading.css';\nimport 'leaflet-draw';\nimport 'leaflet-draw/dist/leaflet.draw.css';\n\nimport Vue2LeafletMarkerCluster from 'vue2-leaflet-markercluster';\nimport 'leaflet.markercluster/dist/MarkerCluster.css'; // eslint-disable-line import/no-extraneous-dependencies\nimport 'leaflet.markercluster/dist/MarkerCluster.Default.css'; // eslint-disable-line import/no-extraneous-dependencies\nimport turfDifference from '@turf/difference';\n\nimport countries from '@/assets/countries.json';\nimport gsaFile from '@/assets/gsa_data.json';\n\n\nconst emptyF = {\n  type: 'FeatureCollection',\n  features: [],\n};\nlet dataF = emptyF;\nlet compareF = emptyF;\n\nexport default {\n  props: [\n    'currentIndicator',\n  ],\n  components: {\n    LMap,\n    LTileLayer,\n    LWMSTileLayer,\n    LGeoJson,\n    LCircleMarker,\n    LControlLayers,\n    LControlAttribution,\n    LControlZoom,\n    LLayerGroup,\n    LFeatureGroup,\n    LControl,\n    LTooltip,\n    'l-marker-cluster': Vue2LeafletMarkerCluster,\n  },\n  data() {\n    return {\n      map: null,\n      compareLayerKeyXYZ: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],\n      dataLayerKeyXYZ: [41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55],\n      dataJsonKey: 0,\n      compareJsonKey: -1,\n      zoom: null,\n      center: null,\n      bounds: null,\n      enableCompare: false,\n      opacityTerrain: [1],\n      opacityOverlay: [1],\n      tilePane: 'tilePane',\n      overlayPane: 'overlayPane',\n      markerPane: 'markerPane',\n      shadowPane: 'shadowPane',\n      tooltipPane: 'tooltipPane',\n      popupPane: 'popupPane',\n      legendExpanded: false,\n      slider: null,\n      drawControl: null,\n      renderTrashBin: false,\n      defaultMapOptions: {\n        attributionControl: false,\n        zoomControl: false,\n      },\n      dataLayerTime: null,\n      compareLayerTime: null,\n      dataLayerIndex: 0,\n      compareLayerIndex: 0,\n      dataFeaturesCount: 0,\n      compareFeaturesCount: 0,\n      selectedCountry: null,\n      selectedBorder: null,\n      selectedLayer: null,\n    };\n  },\n  computed: {\n    ...mapState('config', ['appConfig', 'baseConfig']),\n    ...mapGetters('indicators', [\n      'getIndicatorFilteredInputData',\n    ]),\n    countriesJson() {\n      return countries;\n    },\n    gsaJson() {\n      return gsaFile;\n    },\n    countriesStyle() {\n      return {\n        color: '#222',\n        weight: 1,\n        fillColor: '#fff',\n        opacity: 1,\n        fillOpacity: 0.5,\n      };\n    },\n    dataJsonComputed: {\n      // to avoid each of thousands of geojson features have its own\n      // getter/setter set by vue - freezing the app on large number of pts\n      // we manually rerender relevant vue components anyway\n      get: () => this.getDataF(),\n      set: (v) => {\n        dataF = v;\n      },\n    },\n    compareJsonComputed: {\n      get: () => this.getCompareF(),\n      set: (v) => {\n        compareF = v;\n      },\n    },\n    subAoiInverseStyle() {\n      return {\n        stroke: false,\n        fillColor: this.getIndicatorColor('primary'),\n        fillOpacity: this.mergedConfigs()[0].subAoiFillOpacity || 0.5,\n      };\n    },\n    baseLayers() {\n      // expects an array of objects\n      return this.mergedConfigs()[0].baseLayers || this.baseConfig.baseLayersRightMap;\n    },\n    overlayLayers() {\n      return this.mergedConfigs()[0].overlayLayers || this.baseConfig.overlayLayersRightMap;\n    },\n    mapDefaults() {\n      return {\n        ...this.baseConfig.mapDefaults,\n        ...this.mergedConfigs()[0],\n      };\n    },\n    countrySelection() {\n      return this.mergedConfigs()[0].countrySelection;\n    },\n    borderSelection() {\n      return this.mergedConfigs()[0].borderSelection;\n    },\n    indDefinition() {\n      return this.baseConfig.indicatorsDefinition[this.indicator.indicator];\n    },\n    additionalMapTimes() {\n      return this.baseConfig.additionalMapTimes && this.baseConfig.additionalMapTimes[`${this.indicator.aoiID}-${this.indicator.indicator}`];\n    },\n    excludeMapTimes() {\n      return this.baseConfig.excludeMapTimes && this.baseConfig.excludeMapTimes[`${this.indicator.aoiID}-${this.indicator.indicator}`];\n    },\n    replaceMapTimes() {\n      return this.baseConfig.replaceMapTimes && this.baseConfig.replaceMapTimes[`${this.indicator.aoiID}-${this.indicator.indicator}`];\n    },\n    indicator() {\n      return this.getIndicatorFilteredInputData(this.currentIndicator || null);\n    },\n    showAoi() {\n      return this.aoi && (!this.subAoi || this.subAoi.features.length === 0);\n    },\n    validDrawnArea() {\n      // allows for further validation on area size etc.\n      return this.drawnArea !== null;\n    },\n    drawnArea() {\n      return this.$store.state.features.selectedArea;\n    },\n    customAreaFilter() {\n      return this.mergedConfigs()[0].customAreaFeatures\n        || this.mergedConfigs()[0].customAreaIndicator;\n    },\n    usedTimes() {\n      let times = this.indicator.time;\n      let eoSensor = Array.isArray(this.indicator.eoSensor) && this.indicator.eoSensor;\n      let inputData = Array.isArray(this.indicator.inputData) && this.indicator.inputData;\n      let colorCode = Array.isArray(this.indicator.colorCode) && this.indicator.colorCode;\n      // completely replace given times or eoSensor\n      if (this.replaceMapTimes && Array.isArray(this.replaceMapTimes.time)) {\n        times = this.replaceMapTimes.time;\n      }\n      if (this.replaceMapTimes && Array.isArray(this.replaceMapTimes.eoSensor)) {\n        eoSensor = this.replaceMapTimes.eoSensor; // just for display\n      }\n      if (this.replaceMapTimes && Array.isArray(this.replaceMapTimes.inputData)) {\n        inputData = this.replaceMapTimes.inputData;\n        // needs to be used unless indicator.display is used (that overrides it)\n      }\n      if (this.replaceMapTimes && Array.isArray(this.replaceMapTimes.colorCode)) {\n        colorCode = this.replaceMapTimes.colorCode;\n      }\n      if (this.additionalMapTimes) {\n        // add additional times and eoSensor to original arrays\n        // sort time ascending and sort arrays based on time array via helper list combining all\n        const dtObjects = this.additionalMapTimes.time.map((t) => DateTime.fromISO(t));\n        const mergedTimes = times.concat(dtObjects);\n        const mergedSensors = eoSensor.concat(this.additionalMapTimes.eoSensor);\n        const mergedInputData = inputData.concat(this.additionalMapTimes.inputData);\n        const mergedColorCode = colorCode.concat(this.additionalMapTimes.colorCode);\n        // combine the arrays\n        const list = [];\n        for (let j = 0; j < mergedTimes.length; j++) {\n          list.push({\n            time: mergedTimes[j],\n            eoSensor: mergedSensors[j],\n            inputData: mergedInputData[j],\n            colorCode: mergedColorCode[j],\n          });\n        }\n        // sort mapping by time asc\n        list.sort((a, b) => (a.time.toMillis() - b.time.toMillis()));\n        // separate them back out\n        for (let k = 0; k < list.length; k++) {\n          mergedTimes[k] = list[k].time;\n          mergedSensors[k] = list[k].eoSensor;\n          mergedInputData[k] = list[k].inputData;\n          mergedColorCode[k] = list[k].colorCode;\n        }\n        times = mergedTimes;\n        eoSensor = mergedSensors;\n        inputData = mergedInputData;\n        colorCode = mergedColorCode;\n      }\n      if (this.excludeMapTimes && Array.isArray(this.excludeMapTimes)) {\n        // exclude times and respective entries from other arrays\n        const dtObjects = this.excludeMapTimes.map((t) => DateTime.fromISO(t));\n        const indToDelete = times.reduce((a, e, i) => {\n          // find if any time is in to be deleted\n          const found = dtObjects.find((time) => time.toMillis() === e.toMillis());\n          if (typeof found !== 'undefined') {\n            // add its index to list\n            a.push(i);\n          }\n          return a;\n        }, []);\n        // set items in all arrays to null\n        indToDelete.forEach((i) => {\n          times[i] = null;\n          if (typeof eoSensor[i] !== 'undefined') {\n            eoSensor[i] = null;\n          }\n          if (typeof inputData[i] !== 'undefined') {\n            inputData[i] = null;\n          }\n          if (typeof colorCode[i] !== 'undefined') {\n            colorCode[i] = null;\n          }\n        });\n        // filter out nulls\n        times = times.filter((e) => e !== null);\n        eoSensor = eoSensor.filter((e) => e !== null);\n        inputData = inputData.filter((e) => e !== null);\n        colorCode = colorCode.filter((e) => e !== null);\n      }\n      return {\n        time: times, eoSensor, inputData, colorCode,\n      };\n    },\n    arrayOfObjects() {\n      const selectionOptions = [];\n      for (let i = 0; i < this.usedTimes.time.length; i += 1) {\n        let label = this.getTimeLabel(this.usedTimes.time[i]);\n        if (this.usedTimes.eoSensor) {\n          const eoSensor = this.usedTimes.eoSensor.length === 1\n            ? this.usedTimes.eoSensor[0]\n            : this.usedTimes.eoSensor[i];\n          label += ` - ${eoSensor}`;\n        }\n        selectionOptions.push({\n          value: this.usedTimes.time[i],\n          name: label,\n        });\n      }\n      return selectionOptions;\n    },\n    currentTime() {\n      let returnTime = this.usedTimes.time[this.usedTimes.time.length - 1];\n      if (this.dataLayerTime !== null) {\n        returnTime = this.dataLayerTime;\n      }\n      return returnTime;\n    },\n    currentCompareTime() {\n      let returnTime = this.getInitialCompareTime();\n      if (this.compareLayerTime !== null) {\n        returnTime = this.compareLayerTime;\n      }\n      if (this.indicator.compareDisplay) {\n        // shared time on both layers in case of compareDisplay being set\n        returnTime = this.dataLayerTime;\n      }\n      return returnTime;\n    },\n    aoi() {\n      return this.indicator.aoi;\n    },\n    subAoi() {\n      return this.indicator.subAoi;\n    },\n    subAoiInverse() {\n      // create an inverse of subaoi, using difference of whole world and subaoi\n      const subaoiInv = JSON.parse(JSON.stringify(this.subAoi));\n      // both Object.assign({}, this.subAoi) and { ...this.subAoi } create shallow copy\n      if (subaoiInv.features.length === 1) {\n        const globalBox = {\n          type: 'Feature',\n          properties: {},\n          geometry: {\n            type: 'Polygon',\n            coordinates: [[[-180, -90], [180, -90], [180, 90], [-180, 90], [-180, -90]]],\n          },\n        };\n        const diff = turfDifference(globalBox, subaoiInv.features[0]);\n        subaoiInv.features[0] = diff;\n      }\n      return subaoiInv;\n    },\n    clusterOptions() {\n      return {\n        disableClusteringAtZoom: 13,\n        animate: false,\n        // zoomToBoundsOnClick: false,\n        iconCreateFunction(cluster) { // eslint-disable-line func-names\n          // modified selected cluster style\n          const childCount = cluster.getChildCount();\n          return new DivIcon({\n            html: `<div><span>${childCount}</span></div>`,\n            className: 'marker-cluster',\n            iconSize: new Point(40, 40),\n          });\n        },\n        polygonOptions: {\n          fillColor: this.appConfig.branding.primaryColor,\n          color: this.appConfig.branding.primaryColor,\n          weight: 0.5,\n          opacity: 1,\n          fillOpacity: 0.3,\n          dashArray: 4,\n        },\n      };\n    },\n    drawOptions() {\n      return {\n        position: 'topright',\n        draw: {\n          polyline: false,\n          circle: false,\n          marker: false,\n          circlemarker: false,\n          polygon: {\n            shapeOptions: {\n              color: this.appConfig.branding.primaryColor,\n            },\n          },\n          rectangle: {\n            showArea: false,\n            shapeOptions: {\n              color: this.appConfig.branding.primaryColor,\n            },\n          },\n        },\n      };\n    },\n  },\n  mounted() {\n    this.dataLayerIndex = this.usedTimes.time.length - 1;\n    this.dataLayerTime = { value: this.usedTimes.time[this.dataLayerIndex] };\n    this.compareLayerTime = { value: this.getInitialCompareTime() };\n  },\n  methods: {\n    createLatLng(latlng) {\n      const llobj = latlng.split(',').map(Number);\n      console.log(llobj);\n      return llobj;\n    },\n    zoomUpdated(zoom) {\n      this.zoom = zoom;\n    },\n    centerUpdated(center) {\n      this.center = center;\n    },\n    boundsUpdated(bounds) {\n      this.bounds = bounds;\n    },\n    onMapReady() {\n      this.map = this.$refs.map.mapObject;\n      const layerButtons = document.querySelectorAll('.leaflet-control-layers-toggle');\n      layerButtons.forEach((lB) => lB.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"${this.appConfig.branding.primaryColor}\" width=\"32px\" height=\"32px\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M11.99 18.54l-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z\"/></svg>`); // eslint-disable-line\n      // update leaflet controls\n      L.control.mousePosition({ // eslint-disable-line no-undef\n        emptyString: '',\n        formatter: (lon, lat) => `${lon.toFixed(3)}, ${lat.toFixed(3)}`,\n        position: 'bottomright',\n      }).addTo(this.map);\n      // hide attribution under icon\n      this.map.attributionControl._update = function () { // eslint-disable-line\n        const attribs = [];\n        const kk = Object.keys(this._attributions);\n        for (let i = 0; i < kk.length; i += 1) {\n          if (this._attributions[kk[i]]) {\n            attribs.push(kk[i]);\n          }\n        }\n        const prefixAndAttribs = [];\n        if (this.options.prefix) {\n          prefixAndAttribs.push(this.options.prefix);\n        }\n        if (attribs.length) {\n          prefixAndAttribs.push(attribs.join(', '));\n        }\n        this._container.innerHTML = `<div class='attribution-body'>${prefixAndAttribs.join(' | ')}</div><div class='attribution-icon'>ℹ</div>`;\n      };\n      this.map.attributionControl._update();\n      // add loading indicator\n      L.Control.loading({\n        position: 'bottomleft',\n        delayIndicator: 200,\n      }).addTo(this.map);\n      // add A/B slider\n      const leftLayers = this.extractActualLayers(this.$refs.compareLayers);\n      const rightLayers = this.extractActualLayers(this.$refs.dataLayers);\n      this.slider = L.control.sideBySide(leftLayers, rightLayers);\n      this.drawControl = new L.Control.Draw(this.drawOptions);\n      this.map.on(L.Draw.Event.CREATED, function (e) { // eslint-disable-line\n        // set global area geometry as json\n        this.$store.commit('features/SET_SELECTED_AREA', e.layer.toGeoJSON().geometry);\n      }.bind(this)); // eslint-disable-line\n      // only draw one feature at a time\n      this.map.on(L.Draw.Event.DRAWSTART, function () { // eslint-disable-line\n        this.clearCustomAreaFilter();\n      }.bind(this));\n\n      this.initialDrawSelectedArea();\n      this.onResize();\n      if (!this.mergedConfigs()[0].customAreaFeatures || this.validDrawnArea) {\n        this.fetchFeatures('data');\n      }\n      setTimeout(() => {\n        this.flyToBounds();\n      }, 100);\n    },\n    onResize() {\n      // to fix panel size for reference image window\n      if (this.map) {\n        setTimeout(() => {\n          this.map.invalidateSize();\n        }, 100);\n      }\n    },\n    initialDrawSelectedArea() {\n      if (this.customAreaFilter) {\n        // add draw controls\n        this.drawControl.addTo(this.map);\n        this.renderTrashBin = true;\n        this.updateSelectedAreaFeature();\n      }\n    },\n    updateSelectedAreaFeature() {\n      let ftrs = null;\n      if (this.validDrawnArea) {\n        this.fetchFeatures('data');\n        if (this.enableCompare) {\n          this.fetchFeatures('compare');\n        }\n        ftrs = { ...this.drawnArea };\n      }\n      if (ftrs) {\n        // add feature to be drawn into layer\n        this.$refs.customAreaFilterFeatures.mapObject.addLayer(geoJson(ftrs, {\n          style: {\n            color: this.appConfig.branding.primaryColor,\n          },\n        }));\n      } else {\n        this.$refs.customAreaFilterFeatures.mapObject.clearLayers();\n      }\n    },\n    countriesOptions() {\n      const currentIndicator = this.indicator;\n      return {\n        onEachFeature: function onEachFeature(feature, layer) {\n          layer.bindTooltip(\n            () => feature.properties.name,\n            { direction: 'top', sticky: true },\n          );\n\n          layer.on('click', () => {\n            const countryA2 = feature.properties.alpha2;\n            this.fetchMobilityData(countryA2, currentIndicator.aoiID);\n            if (this.selectedLayer !== null) {\n              this.selectedLayer.setStyle({\n                color: '#222',\n                weight: 1,\n                fillColor: '#fff',\n                opacity: 1,\n                fillOpacity: 0.5,\n              });\n            }\n            this.selectedCountry = countryA2;\n            this.selectedLayer = layer;\n            this.popupName = feature.properties.name;\n          });\n          layer.on('mouseover', (e) => {\n            const currLayer = e.target;\n            currLayer.setStyle({\n              weight: 2,\n              color: this.$vuetify.theme.currentTheme.primary,\n              fillColor: this.$vuetify.theme.currentTheme.primary,\n              fillOpacity: 0.7,\n            });\n\n            if (!L.Browser.ie && !L.Browser.opera) {\n              layer.bringToFront();\n            }\n          });\n          layer.on('mouseout', (e) => {\n            const currLayer = e.target;\n            if (this.selectedCountry !== feature.properties.alpha2) {\n              currLayer.setStyle({\n                color: '#222',\n                weight: 1,\n                fillColor: '#fff',\n                opacity: 1,\n                fillOpacity: 0.5,\n              });\n            }\n          });\n        }.bind(this),\n      };\n    },\n    featureOptions(side) {\n      const style = (this.mergedConfigs(side)[0].features && this.mergedConfigs(side)[0].features.style) ? this.mergedConfigs(side)[0].features.style : {}; // eslint-disable-line\n      return {\n        onEachFeature: function onEachFeature(feature, layer) {\n          // if featuresParameters available, show only properties from mapping, otherwise dump all\n          const allowedParams = this.mergedConfigs(side)[0].features ? this.mergedConfigs(side)[0].features.allowedParameters : null; // eslint-disable-line\n          const allKeys = Object.keys(feature.properties);\n          let tooltip = '';\n          for (let i = 0; i < allKeys.length; i++) {\n            if (!allowedParams || (typeof allowedParams === 'object' && Object.keys(allowedParams).includes(allKeys[i]))\n              || (Array.isArray(allowedParams) && allowedParams.includes(allKeys[i]))) {\n              tooltip += `<span><b>${allKeys[i]}</b>: ${feature.properties[allKeys[i]]}</span><br>`;\n            }\n          }\n          if (tooltip !== '') {\n            layer.bindTooltip(tooltip, { pane: this.popupPane });\n          }\n          // to make clustering work\n          if (this.mergedConfigs()[0].featuresClustering) {\n            layer.getLatLng = () => geoJson(feature).getBounds().getCenter(); //eslint-disable-line\n            layer.setLatLng = () => { }; //eslint-disable-line\n            layer._latlng = layer.getLatLng(); //eslint-disable-line\n          }\n        }.bind(this),\n        // point circle marker styling\n        pointToLayer: function (feature, latlng) { // eslint-disable-line\n          return circleMarker(latlng, {\n            radius: style.radius || 8,\n            color: style.color || '#FFA500',\n            weight: style.weight || 2,\n            opacity: style.opacity || 1,\n            dashArray: style.dashArray || null,\n            dashOffset: style.dashOffset || null,\n            fillOpacity: style.fillOpacity || 1,\n            fillColor: style.fillColor || '#FFA500',\n            fill: style.fill || true,\n            pane: side === 'data' ? this.tooltipPane : this.shadowPane,\n          });\n        }.bind(this),\n        // polygon and line styling\n        style: {\n          color: style.color || '#FFA500',\n          weight: style.weight || 2,\n          opacity: style.opacity || 1,\n          dashArray: style.dashArray || null,\n          dashOffset: style.dashOffset || null,\n          fillOpacity: style.fillOpacity || 0,\n          fillColor: style.fillColor || '#FFA500',\n          fill: style.fill || true,\n        },\n      };\n    },\n    getColorCode(side) {\n      const i = side === 'compare' ? this.compareLayerIndex : this.dataLayerIndex;\n      let currentValue = null;\n      // compensate for color code with only one entry, still showing it\n      if (this.usedTimes.colorCode) {\n        const colors = this.usedTimes.colorCode;\n        if (Array.isArray(colors) && colors.length === 1) {\n          currentValue = colors[0]; // eslint-disable-line prefer-destructuring\n        } else if (Array.isArray(colors) && colors[i]) {\n          currentValue = colors[i]; // eslint-disable-line prefer-destructuring\n        }\n      }\n      return currentValue;\n    },\n    getAoiFill(side) {\n      const currentValue = this.getColorCode(side);\n      return currentValue\n        ? this.getIndicatorColor(currentValue)\n        : this.appConfig.branding.primaryColor;\n    },\n    subAoiStyle(side) {\n      const currentValue = this.getColorCode(side);\n      return {\n        color: currentValue\n          ? this.getIndicatorColor(currentValue)\n          : this.appConfig.branding.primaryColor,\n        weight: 3,\n        fill: false,\n      };\n    },\n    configFromInputData(side) {\n      const i = side === 'compare' ? this.compareLayerIndex : this.dataLayerIndex;\n      const inputData = this.usedTimes.inputData.length === 1\n        ? this.usedTimes.inputData[0]\n        : this.usedTimes.inputData[i];\n      if (this.baseConfig.layerNameMapping.hasOwnProperty(inputData)) { // eslint-disable-line\n        let config = this.baseConfig.layerNameMapping[inputData];\n        if (!Array.isArray(config)) {\n          // assure array is returned\n          config = [config];\n        }\n        return config;\n      }\n      // empty config used later for merging\n      return [];\n    },\n    getCombinedWMSLayers(side) {\n      const combLayers = this.mergedConfigs(side).filter((l) => (\n        l.protocol === 'WMS' && Object.keys(l).indexOf('combinedLayers') !== -1\n      ));\n      return combLayers;\n    },\n    getSimpleWMSLayers(side) {\n      const combLayers = this.mergedConfigs(side).filter((l) => (\n        l.protocol === 'WMS' && Object.keys(l).indexOf('combinedLayers') === -1\n      ));\n      return combLayers;\n    },\n    mergedConfigs(side = 'data') {\n      // first check if special compare layer configured\n      let displayTmp = side === 'compare' && this.indicator.compareDisplay ? this.indicator.compareDisplay : this.indicator.display;\n      // following configuration merging is done:\n      // defaultLayersDisplay (to avoid having to configure it before)\n      // indDefinition - indicator code specific configuration\n      // display - coming from js configuration - esa.js OR\n      // configFromInputData - coming from input data reference from csvs\n\n      if (displayTmp) {\n        // from layer configuration\n        if (!Array.isArray(displayTmp)) {\n          // always make an Array of layer configurations\n          displayTmp = [displayTmp];\n        }\n      }\n      const finalConfigs = [];\n      let usedConfigForMerge = {};\n      let name = this.indicator.description;\n\n      if (!displayTmp && this.configFromInputData(side).length === 0) {\n        // no additional config specified, use defaults\n        usedConfigForMerge = [{ name }];\n      } else if (!displayTmp) {\n        // use configFromInputData\n        usedConfigForMerge = this.configFromInputData(side);\n      } else {\n        // use displayTmp even if configFromInputData set too\n        usedConfigForMerge = displayTmp;\n      }\n      usedConfigForMerge.forEach((item) => {\n        // merge configs for each layer\n        name = item.name || name;\n        // Check to see if we have grouped layers, if we do we need to add\n        // the default to them too\n        const extendedItem = item;\n        if (Object.keys(item).indexOf('combinedLayers') !== -1) {\n          for (let i = 0; i < item.combinedLayers.length; i += 1) {\n            extendedItem.combinedLayers[i] = {\n              ...this.baseConfig.defaultLayersDisplay,\n              ...this.indDefinition,\n              ...item.combinedLayers[i],\n            };\n          }\n        }\n        finalConfigs.push({\n          ...this.baseConfig.defaultLayersDisplay,\n          ...this.indDefinition,\n          ...extendedItem,\n          name,\n        });\n      });\n      return finalConfigs;\n    },\n    flyToBounds() {\n      // zooms to subaoi if present or area around aoi if not\n      const boundsPad = this.mergedConfigs()[0].largeSubAoi ? 5 : (this.mergedConfigs()[0].midSubAoi ? 1 : 0.15); // eslint-disable-line\n      if (this.subAoi && this.subAoi.features.length > 0) {\n        const viewBounds = this.mergedConfigs()[0].presetView\n          ? geoJson(this.mergedConfigs()[0].presetView).getBounds()\n          : geoJson(this.subAoi).getBounds();\n        const bounds = geoJson(this.subAoi).getBounds();\n        const cornerMax1 = latLng([bounds.getSouth() - boundsPad, bounds.getWest() - boundsPad]);\n        const cornerMax2 = latLng([bounds.getNorth() + boundsPad, bounds.getEast() + boundsPad]);\n        const boundsMax = latLngBounds(cornerMax1, cornerMax2);\n        this.map.fitBounds(viewBounds);\n        // limit user movement around map\n        this.map.setMaxBounds(boundsMax);\n        if (this.mergedConfigs()[0].largeSubAoi) {\n          this.map.setMinZoom(2);\n        } else if (this.mergedConfigs()[0].midSubAoi) {\n          this.map.setMinZoom(9);\n        } else {\n          this.map.setMinZoom(13);\n        }\n      } else if (this.mergedConfigs()[0].presetView) {\n        // if only preset view move map there without limiting movement\n        const viewBounds = geoJson(this.mergedConfigs()[0].presetView).getBounds();\n        this.map.fitBounds(viewBounds);\n      } else if (this.aoi) {\n        const cornerMax1 = latLng([this.aoi.lat - boundsPad, this.aoi.lng - boundsPad]);\n        const cornerMax2 = latLng([this.aoi.lat + boundsPad, this.aoi.lng + boundsPad]);\n        const boundsMax = latLngBounds(cornerMax1, cornerMax2);\n        this.map.setZoom(16);\n        this.map.panTo(this.aoi);\n        if (this.mergedConfigs()[0].largeSubAoi) {\n          this.map.setMinZoom(2);\n        } else if (this.mergedConfigs()[0].midSubAoi) {\n          this.map.setMinZoom(9);\n        } else {\n          this.map.setMinZoom(12);\n        }\n        // limit user movement around map\n        this.map.setMaxBounds(boundsMax);\n      } else {\n        // zoom to default bbox from config\n        this.map.setMinZoom(this.mapDefaults.minMapZoom);\n        this.map.setMaxBounds(null);\n        this.map.fitBounds(latLngBounds(this.mapDefaults.bounds));\n      }\n    },\n    getTimeLabel(time) {\n      if (Array.isArray(time) && time.length === 2) {\n        // show start - end\n        if (this.mergedConfigs()[0].mapTimeLabelExtended) {\n          return time.map((d) => DateTime.fromISO(d).toISO({ suppressMilliseconds: true })).join(' - ');\n        }\n        return time.map((d) => DateTime.fromISO(d).toISODate()).join(' - ');\n      } else if (time instanceof DateTime) { // eslint-disable-line no-else-return\n        if (this.mergedConfigs()[0].mapTimeLabelExtended) {\n          return time.toISO({ suppressMilliseconds: true });\n        }\n        return time.toISODate();\n      }\n      if (this.mergedConfigs()[0].mapTimeLabelExtended) {\n        return DateTime.fromISO(time).toISO({ suppressMilliseconds: true });\n      }\n      return DateTime.fromISO(time).toISODate();\n    },\n    layerOptions(time, sourceOptionsObj) {\n      const additionalSettings = {};\n      if (Object.prototype.hasOwnProperty.call(sourceOptionsObj, 'siteMapping')) {\n        const currSite = sourceOptionsObj.siteMapping(\n          this.indicator.aoiID,\n        );\n        additionalSettings.site = currSite;\n      }\n      if (typeof sourceOptionsObj.minZoom !== 'undefined') {\n        additionalSettings.minZoom = sourceOptionsObj.minZoom;\n      }\n      if (typeof sourceOptionsObj.maxZoom !== 'undefined') {\n        additionalSettings.maxZoom = sourceOptionsObj.maxZoom;\n      }\n      if (typeof sourceOptionsObj.minNativeZoom !== 'undefined') {\n        additionalSettings.minNativeZoom = sourceOptionsObj.minNativeZoom;\n      }\n      if (typeof sourceOptionsObj.maxNativeZoom !== 'undefined') {\n        additionalSettings.maxNativeZoom = sourceOptionsObj.maxNativeZoom;\n      }\n      if (typeof sourceOptionsObj.bounds !== 'undefined') {\n        additionalSettings.bounds = sourceOptionsObj.bounds;\n      }\n      if (time !== null) {\n        // time as is gets automatically injected to WMS query OR xyz url {time} template\n        const fixTime = time.value || time;\n        additionalSettings.time = typeof sourceOptionsObj.dateFormatFunction === 'function'\n          ? sourceOptionsObj.dateFormatFunction(fixTime) : fixTime;\n        if (sourceOptionsObj.features) {\n          additionalSettings.featuresTime = typeof sourceOptionsObj.features.dateFormatFunction === 'function'\n            ? sourceOptionsObj.features.dateFormatFunction(fixTime) : fixTime;\n        }\n      }\n      return additionalSettings;\n    },\n    dataLayerTimeSelection(payload) {\n      // Different object returned either by arrow use or by dropdown use\n      if (Array.isArray(payload) || !(payload.value)) {\n        this.dataLayerTime = { value: payload, name: `${payload}` };\n      } else {\n        this.dataLayerTime = payload;\n      }\n      const newIndex = this.arrayOfObjects\n        .map((i) => i.value)\n        .indexOf(this.dataLayerTime.value ? this.dataLayerTime.value : this.dataLayerTime);\n      this.dataLayerIndex = newIndex;\n      this.refreshLayers('data');\n      this.$nextTick(() => {\n        this.slider.setRightLayers(\n          this.extractActualLayers(this.$refs.dataLayers),\n        );\n      });\n      if (this.indicator.compareDisplay) {\n        // shared time on both sides in case of compareDisplay being set\n        this.compareLayerTime = this.dataLayerTime;\n        this.compareLayerIndex = newIndex;\n        this.refreshLayers('compare');\n        this.$nextTick(() => {\n          this.slider.setLeftLayers(\n            this.extractActualLayers(this.$refs.compareLayers),\n          );\n        });\n      }\n    },\n    extractActualLayers(group) {\n      let actualLayers = [];\n      if (group.$children.length > 0) {\n        group.$children.forEach((child) => {\n          actualLayers = actualLayers.concat(this.extractActualLayers(child));\n        });\n      } else {\n        actualLayers.push(group.mapObject);\n      }\n      return actualLayers;\n    },\n    compareLayerTimeSelection(payload) {\n      // Different object returned either by arrow use or by dropdown use\n      if (Array.isArray(payload) || !(payload.value)) {\n        this.compareLayerTime = { value: payload, name: `${payload}` };\n      } else {\n        this.compareLayerTime = payload;\n      }\n      const newIndex = this.arrayOfObjects\n        .map((i) => i.value)\n        .indexOf(this.compareLayerTime.value ? this.compareLayerTime.value : this.compareLayerTime);\n      this.compareLayerIndex = newIndex;\n      this.refreshLayers('compare');\n      this.$nextTick(() => {\n        this.slider.setLeftLayers(\n          this.extractActualLayers(this.$refs.compareLayers),\n        );\n      });\n    },\n    dataLayerReduce() {\n      const currentIndex = this.arrayOfObjects\n        .map((i) => i.value)\n        .indexOf(this.dataLayerTime.value ? this.dataLayerTime.value : this.dataLayerTime);\n      this.dataLayerIndex = currentIndex - 1;\n      this.dataLayerTimeSelection(this.arrayOfObjects[currentIndex - 1]);\n    },\n    dataLayerIncrease() {\n      const currentIndex = this.arrayOfObjects\n        .map((i) => i.value)\n        .indexOf(this.dataLayerTime.value ? this.dataLayerTime.value : this.dataLayerTime);\n      this.dataLayerIndex = currentIndex + 1;\n      this.dataLayerTimeSelection(this.arrayOfObjects[currentIndex + 1]);\n    },\n    compareLayerReduce() {\n      const currentIndex = this.arrayOfObjects\n        .map((i) => i.value)\n        .indexOf(this.compareLayerTime.value ? this.compareLayerTime.value : this.compareLayerTime);\n      this.compareLayerIndex = currentIndex - 1;\n      this.compareLayerTimeSelection(this.arrayOfObjects[currentIndex - 1]);\n    },\n    compareLayerIncrease() {\n      const currentIndex = this.arrayOfObjects\n        .map((i) => i.value)\n        .indexOf(this.compareLayerTime.value ? this.compareLayerTime.value : this.compareLayerTime);\n      this.compareLayerIndex = currentIndex + 1;\n      this.compareLayerTimeSelection(this.arrayOfObjects[currentIndex + 1]);\n    },\n    getInitialCompareTime() {\n      // find closest entry one year before latest time\n      if (this.mergedConfigs()[0].largeTimeDuration) {\n        // if interval, use just start to get closest\n        const times = this.usedTimes.time.map((item) => (Array.isArray(item) ? item[0] : item));\n        const lastTimeEntry = DateTime.fromISO(times[times.length - 1]);\n        const oneYearBefore = lastTimeEntry.minus({ years: 1 });\n        // select closest to one year before\n        const closestOneYearBefore = times.find((item, i) => (\n          i === times.length - 1 || (\n            Math.abs(oneYearBefore.toMillis() - DateTime.fromISO(item).toMillis())\n            < Math.abs(oneYearBefore.toMillis() - DateTime.fromISO(times[i + 1]).toMillis())\n          )\n        ));\n        // Get index and return object from original times as there are also\n        // arrays of time tuple arrays\n        const foundIndex = times.indexOf(closestOneYearBefore);\n        return this.usedTimes.time[foundIndex];\n      }\n      // use first time\n      return this.usedTimes.time[0];\n    },\n    refreshGroup(group, time) {\n      // Group can also be an array depending on type\n      if (group) {\n        let toIterate;\n        if (Array.isArray(group)) {\n          toIterate = group;\n        } else {\n          toIterate = group.$children;\n        }\n        if (toIterate) {\n          toIterate.forEach((item) => {\n            // We check if we have a simple layer or a grouped layer\n            if (item.$children.length > 0) {\n              // This is a grouped layer, we iterate over the layers\n              item.$children.forEach((subItem) => {\n                // TODO: propsData do not have all the parameters we need (like dateFormatFunction)\n                // TODO extend this getting the mergedConfigs in a same way as when non-grouped\n                subItem.mapObject.setParams(this.layerOptions(\n                  time, subItem.$options.propsData,\n                ));\n                // force redraw of layer\n                subItem.$forceUpdate();\n              });\n            } else {\n              const originalConfig = this.mergedConfigs().find((config) => (\n                config.name === item.name\n              ));\n              item.mapObject.setParams(this.layerOptions(\n                time, originalConfig,\n              ));\n              // force redraw of layer\n              item.$forceUpdate();\n            }\n          });\n        }\n      }\n    },\n    refreshLayers(side) {\n      // compare(left) or data(right)\n      if (side === 'compare' || this.indicator.compareDisplay) {\n        this.refreshGroup(this.$refs.compareLayerArrayWMS, this.currentCompareTime);\n        if (this.$refs.compareLayerArrayXYZ) {\n          this.$refs.compareLayerArrayXYZ.forEach((item) => {\n            const originalIndex = parseInt(item.$attrs['data-key-originalindex'], 10);\n            this.compareLayerKeyXYZ[originalIndex] = Math.random();\n          });\n        }\n        if (!this.mergedConfigs()[0].featuresStatic\n          && (!this.mergedConfigs()[0].customAreaFeatures || this.validDrawnArea)) {\n          if (this.mergedConfigs()[0].featuresClustering) {\n            this.$refs.featuresCompareCluster.mapObject.clearLayers();\n          }\n          this.fetchFeatures('compare');\n        }\n      }\n      if (side === 'data') {\n        this.refreshGroup(this.$refs.dataLayerArrayWMS, this.currentTime);\n        if (this.$refs.dataLayerArrayXYZ) {\n          this.$refs.dataLayerArrayXYZ.forEach((item) => {\n            const originalIndex = parseInt(item.$attrs['data-key-originalindex'], 10);\n            this.dataLayerKeyXYZ[originalIndex] = Math.random();\n          });\n        }\n        if (!this.mergedConfigs()[0].featuresStatic\n          && (!this.mergedConfigs()[0].customAreaFeatures || this.validDrawnArea)) {\n          if (this.mergedConfigs()[0].featuresClustering) {\n            this.$refs.featuresDataCluster.mapObject.clearLayers();\n          }\n          this.fetchFeatures('data');\n        }\n      }\n    },\n    fetchFeatures(side) {\n      if (this.mergedConfigs(side)[0].features) {\n        const options = this.layerOptions(side === 'compare' ? this.currentCompareTime : this.currentTime,\n          this.mergedConfigs(side)[0]);\n        // add custom area if present\n        let customArea = {};\n        if (this.validDrawnArea) {\n          customArea = typeof this.mergedConfigs()[0].features.areaFormatFunction === 'function'\n            ? this.mergedConfigs()[0].features.areaFormatFunction(this.drawnArea)\n            : { area: JSON.stringify(this.drawnArea) };\n        }\n        const templateSubst = {\n          ...this.indicator,\n          ...options,\n          ...customArea,\n        };\n        const templateRe = /\\{ *([\\w_ -]+) *\\}/g;\n        const url = template(templateRe, this.mergedConfigs()[0].features.url, templateSubst);\n        let requestBody = null;\n        if (this.mergedConfigs()[0].features.requestBody) {\n          requestBody = {\n            ...this.mergedConfigs()[0].features.requestBody,\n          };\n          const params = Object.keys(requestBody);\n          for (let i = 0; i < params.length; i += 1) {\n            // substitute template strings with values\n            requestBody[params[i]] = template(templateRe, requestBody[params[i]], templateSubst);\n          }\n        }\n        const requestOpts = {\n          credentials: 'same-origin',\n          method: this.mergedConfigs()[0].features.requestMethod || 'GET',\n          headers: this.mergedConfigs()[0].features.requestHeaders || {},\n        };\n        if (requestBody) {\n          requestOpts.body = JSON.stringify(requestBody);\n        }\n        this.map.fireEvent('dataloading');\n        fetch(url, requestOpts).then((r) => r.json())\n          .then((rawdata) => {\n            // if custom response -> feature mapping function configured, apply it\n            if (typeof this.mergedConfigs()[0].features.callbackFunction === 'function') {\n              return this.mergedConfigs()[0].features.callbackFunction(rawdata);\n            }\n            return rawdata;\n          })\n          .then((data) => {\n            this.map.fireEvent('dataload');\n            this.updateJsonLayers(data, side);\n          })\n          .catch(() => {\n            this.map.fireEvent('dataload');\n            this.updateJsonLayers(emptyF, side);\n          });\n      } else {\n        this.updateJsonLayers(emptyF, side);\n      }\n    },\n    selectGSAIndicator(feature) {\n      this.selectedBorder = feature.borderId;\n      const dataUrl = `./eodash-data/internal/${feature.borderId}.json`;\n      this.map.fireEvent('dataloading');\n      fetch(dataUrl).then((r) => r.json())\n        .then((indicator) => {\n          const returnIndicator = {};\n          returnIndicator.values = { ...indicator };\n          returnIndicator.indicator = 'GSA';\n          // Get all times of available border crossings to allow finding min max\n          returnIndicator.time = [];\n          Object.keys(indicator).forEach((key) => {\n            const currVals = indicator[key].values;\n            for (let i = 0; i < currVals.length; i += 1) {\n              returnIndicator.time.push(DateTime.fromISO(currVals[i].timestamp));\n            }\n          });\n          returnIndicator.measurement = [0];\n          returnIndicator.title = feature.name;\n          returnIndicator.yAxis = this.indicator.yAxis;\n          this.map.fireEvent('dataload');\n          this.$store.commit(\n            'indicators/CUSTOM_AREA_INDICATOR_LOAD_FINISHED', returnIndicator,\n          );\n          this.$emit('fetchCustomAreaIndicator');\n        })\n        .catch((err) => {\n          this.map.fireEvent('dataload');\n          // It seems data could not be loaded lets show a no data found message\n          this.$store.commit(\n            'indicators/CUSTOM_AREA_INDICATOR_LOAD_FINISHED', { isEmpty: true },\n          );\n          console.log(err);\n        });\n    },\n    fetchMobilityData(countryCode, aoiID) {\n      const dataUrl = `./eodash-data/internal/${countryCode}-${aoiID}.json`;\n      this.map.fireEvent('dataloading');\n      fetch(dataUrl).then((r) => r.json())\n        .then((indicator) => {\n          indicator.indicator = aoiID; // eslint-disable-line\n          indicator.time = indicator.Values.map((row) => DateTime.fromISO(row.date)); // eslint-disable-line\n          indicator.measurement = [0]; // eslint-disable-line\n          indicator.country = indicator.CountryCode; // eslint-disable-line\n          indicator.title = indicator.CountryName; // eslint-disable-line\n          indicator.yAxis = this.indicator.yAxis; // eslint-disable-line\n          this.map.fireEvent('dataload');\n          this.$store.commit(\n            'indicators/CUSTOM_AREA_INDICATOR_LOAD_FINISHED', indicator,\n          );\n          this.$emit('fetchCustomAreaIndicator');\n        })\n        .catch((err) => {\n          this.map.fireEvent('dataload');\n          // It seems data could not be loaded lets show a no data found message\n          this.$store.commit(\n            'indicators/CUSTOM_AREA_INDICATOR_LOAD_FINISHED', { isEmpty: true },\n          );\n          console.log(err);\n        });\n    },\n    fetchCustomAreaIndicator() {\n      const options = this.layerOptions(this.currentTime, this.mergedConfigs()[0]);\n      // add custom area if present\n      let customArea = {};\n      if (this.validDrawnArea) {\n        customArea = typeof this.mergedConfigs()[0].areaIndicator.areaFormatFunction === 'function'\n          ? this.mergedConfigs()[0].areaIndicator.areaFormatFunction(this.drawnArea)\n          : { area: JSON.stringify(this.drawnArea) };\n      }\n      this.indicator.title = 'User defined area of interest';\n      const templateSubst = {\n        ...this.indicator,\n        ...options,\n        ...customArea,\n      };\n      const templateRe = /\\{ *([\\w_ -]+) *\\}/g;\n      const url = template(templateRe, this.mergedConfigs()[0].areaIndicator.url, templateSubst);\n      let requestBody = null;\n      if (this.mergedConfigs()[0].areaIndicator.requestBody) {\n        requestBody = {\n          ...this.mergedConfigs()[0].areaIndicator.requestBody,\n        };\n        const params = Object.keys(requestBody);\n        for (let i = 0; i < params.length; i += 1) {\n          // substitute template strings with values\n          if (typeof requestBody[params[i]] === 'string') {\n            requestBody[params[i]] = template(templateRe, requestBody[params[i]], templateSubst);\n          }\n          // Convert geojsons back to an object\n          if (params[i] === 'geojson') {\n            requestBody[params[i]] = JSON.parse(requestBody[params[i]]);\n          }\n        }\n      }\n      const requestOpts = {\n        credentials: 'same-origin',\n        method: this.mergedConfigs()[0].areaIndicator.requestMethod || 'GET',\n        headers: this.mergedConfigs()[0].areaIndicator.requestHeaders || {},\n      };\n      if (requestBody) {\n        requestOpts.body = JSON.stringify(requestBody);\n      }\n      this.map.fireEvent('dataloading');\n      fetch(url, requestOpts).then((r) => r.json())\n        .then((rawdata) => {\n          if (typeof this.mergedConfigs()[0].areaIndicator.callbackFunction === 'function') {\n            // merge data from current indicator data and new data from api\n            // returns new indicator object to set as custom area indicator\n            return this.mergedConfigs()[0].areaIndicator.callbackFunction(rawdata, this.indicator);\n          }\n          return rawdata;\n        })\n        .then((indicator) => {\n          this.map.fireEvent('dataload');\n          this.$store.commit(\n            'indicators/CUSTOM_AREA_INDICATOR_LOAD_FINISHED', indicator,\n          );\n          this.$emit('fetchCustomAreaIndicator');\n        })\n        .catch((err) => {\n          this.map.fireEvent('dataload');\n          this.$store.commit(\n            'indicators/CUSTOM_AREA_INDICATOR_LOAD_FINISHED', null,\n          );\n          console.log(err);\n        });\n    },\n    clearCustomAreaFilter() {\n      this.$store.commit('features/SET_SELECTED_AREA', null);\n    },\n    getDataF() {\n      return dataF;\n    },\n    getCompareF() {\n      return compareF;\n    },\n    updateJsonLayers(ftrs, side) {\n      if (this.mergedConfigs()[0].featuresClustering) {\n        // markercluster needs manual adding of all geojsons it will show\n        // and cleanup of previous content\n        const geojsonFromData = geoJson(ftrs, {\n          ...this.featureOptions(side),\n          pane: side === 'data' ? this.tooltipPane : this.shadowPane,\n        });\n        if (this.$refs.featuresDataCluster) {\n          if (side === 'data') {\n            this.$refs.featuresDataCluster.mapObject.clearLayers();\n            this.$refs.featuresDataCluster.mapObject.addLayers([geojsonFromData]);\n            this.dataFeaturesCount = ftrs.features.length;\n          } else {\n            this.$refs.featuresCompareCluster.mapObject.clearLayers();\n            this.$refs.featuresCompareCluster.mapObject.addLayers([geojsonFromData]);\n            this.compareFeaturesCount = ftrs.features.length;\n          }\n        }\n      } else if (side === 'data') {\n        // normal geojson layer just needs manual refresh\n        this.dataJsonComputed = ftrs;\n        this.dataJsonKey = Math.random();\n        this.dataFeaturesCount = ftrs.features.length;\n      } else {\n        this.compareJsonComputed = ftrs;\n        this.compareJsonKey = Math.random();\n        this.compareFeaturesCount = ftrs.features.length;\n      }\n    },\n  },\n  watch: {\n    enableCompare(on) {\n      if (!on) {\n        if (this.slider !== null) {\n          this.map.removeControl(this.slider);\n          this.map.removeLayer(this.$refs.compareLayers.mapObject);\n        }\n      } else {\n        this.map.addLayer(this.$refs.compareLayers.mapObject);\n        if (!this.mergedConfigs()[0].customAreaFeatures || this.validDrawnArea) {\n          this.fetchFeatures('compare');\n        }\n        this.$nextTick(() => {\n          this.slider.setLeftLayers(\n            this.extractActualLayers(this.$refs.compareLayers),\n          );\n          this.slider.setRightLayers(\n            this.extractActualLayers(this.$refs.dataLayers),\n          );\n          this.slider.addTo(this.map);\n        });\n      }\n    },\n    drawnArea() {\n      // watch on drawn area prop change triggering update of draw layer, fetching custom features\n      this.updateSelectedAreaFeature();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep .leaflet-tooltip-top {\n  background: #00000099;\n  border-radius: 3px;\n  color: #fff;\n  pointer-events: none;\n  white-space: nowrap;\n  border: none;\n  &:before {\n    border-top-color: #00000099;\n  }\n}\n::v-deep .leaflet-control-attribution:active :not(.attribution-icon),\n::v-deep .leaflet-control-attribution:hover :not(.attribution-icon),\n::v-deep .leaflet-control-attribution .attribution-icon {\n  display: inline-block;\n}\n::v-deep .leaflet-control-attribution :not(.attribution-icon),\n::v-deep .leaflet-control-attribution:active .attribution-icon,\n::v-deep .leaflet-control-attribution:hover .attribution-icon {\n  display: none;\n}\n::v-deep .attribution-icon {\n  font-size: 1.2em;\n  margin: 1px;\n}\n::v-deep .leaflet-control-mouseposition {\n  background-color: rgba(255, 255, 255, 0.8);\n  transform: translate3d(-8px, 32px, 0);\n  padding: 2px 4px;\n}\n::v-deep .leaflet-sbs-divider {\n  background-color: var(--v-primary-base);\n  opacity: 0.7;\n}\n::v-deep .leaflet-control-layers-toggle {\n  background-image: url('data:image/svg+xml;utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"%23003247\" width=\"32px\" height=\"32px\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M11.99 18.54l-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z\"/></svg>');\n}\n::v-deep .mdi-asterisk {\n  visibility: hidden;\n}\n::v-deep .leaflet-bar a, ::v-deep .leaflet-control-attribution {\n  color: var(--v-primary-base) !important;\n}\n::v-deep .leaflet-control-layers-toggle {\n  background-image: none;\n  svg {\n    width: 100%;\n    height: 100%;\n  }\n}\n::v-deep .leaflet-tooltip {\n  z-index: 700;\n}\n::v-deep .leaflet-draw-actions a {\n  background-color: var(--v-primary-base);\n  color: #fff;\n}\n::v-deep .marker-cluster {\n  background-color: rgba(#003247, 0.5);\n  div {\n    background-color: var(--v-primary-base);\n    span {\n      color: white;\n    }\n  }\n}\n.map-legend {\n  max-width: 20vw;\n  transition: max-width 0.5s ease-in-out;\n  cursor: pointer;\n}\n.map-legend-expanded {\n  width: initial;\n  max-width: 80%;\n}\n\n::v-deep .leaflet-top.leaflet-right {\n  margin-top: 45px;\n}\n</style>\n"],"sourceRoot":"src/components"}]}