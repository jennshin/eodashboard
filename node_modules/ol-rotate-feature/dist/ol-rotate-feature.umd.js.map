{"version":3,"file":"ol-rotate-feature.umd.js","sources":["../node_modules/@babel/runtime/helpers/defineProperty.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/superPropBase.js","../node_modules/@babel/runtime/helpers/get.js","../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/inherits.js","../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../src/util.js","../src/event.js","../src/shim.js","../src/interaction.js","../src/index.js"],"sourcesContent":["function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","/**\n * This file is part of ol-rotate-feature package.\n * @module ol-rotate-feature\n * @license MIT\n * @author Vladimir Vershinin\n */\n\n/**\n * @param {boolean} condition\n * @param {string} message\n * @throws Error\n */\nexport function assert (condition, message = '') {\n  message = [ 'Assertion failed', message ].join(': ')\n\n  if (!condition) {\n    throw new Error(message)\n  }\n}\n\n/**\n * @param {*} arg\n * @returns {*}\n */\nexport function identity (arg) {\n  return arg\n}\n\n/**\n * @param {...*} args\n * @return {*}\n */\nexport function coalesce (...args) {\n  return args.filter(value => value != null).shift()\n}\n\nconst counters = {}\n/**\n * @param {string} [prefix]\n * @return {number}\n */\nexport function uniqId (prefix = '') {\n  const ns = prefix || 'default'\n  counters[ ns ] = counters[ ns ] == null ? 0 : counters[ ns ]\n\n  return String(prefix) + (++counters[ ns ])\n}\n\nexport function includes (arr, value) {\n  return arr.indexOf(value) !== -1\n}\n\nexport function isArray (val) {\n  return val::Object.prototype.toString() === '[object Array]'\n}\n","/**\n * This file is part of ol-rotate-feature package.\n * @module ol-rotate-feature\n * @license MIT\n * @author Vladimir Vershinin\n */\n/**\n * @enum {string}\n */\nexport const RotateFeatureEventType = {\n  /**\n   * Triggered upon feature rotate start.\n   * @event RotateFeatureEvent#rotatestart\n   */\n  START: 'rotatestart',\n  /**\n   * Triggered upon feature rotation.\n   * @event RotateFeatureEvent#rotating\n   */\n  ROTATING: 'rotating',\n  /**\n   * Triggered upon feature rotation end.\n   * @event RotateFeatureEvent#rotateend\n   */\n  END: 'rotateend'\n}\n\n/**\n * Events emitted by RotateFeatureInteraction instances are instances of this type.\n *\n * @class\n * @author Vladimir Vershinin\n */\nexport default class RotateFeatureEvent {\n  /**\n   * @param {string} type Type.\n   * @param {ol.Collection<ol.Feature>} features Rotated features.\n   * @param {number} angle Angle in radians.\n   * @param {ol.Coordinate} anchor Anchor position.\n   */\n  constructor (type, features, angle, anchor) {\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.propagationStopped_ = false\n\n    /**\n     * The event type.\n     * @type {string}\n     * @private\n     */\n    this.type_ = type\n\n    /**\n     * The features being rotated.\n     * @type {ol.Collection<ol.Feature>}\n     * @private\n     */\n    this.features_ = features\n    /**\n     * Current angle in radians.\n     * @type {number}\n     * @private\n     */\n    this.angle_ = angle\n    /**\n     * Current rotation anchor.\n     * @type {ol.Coordinate}\n     * @private\n     */\n    this.anchor_ = anchor\n  }\n\n  /**\n   * @type {boolean}\n   */\n  get propagationStopped () {\n    return this.propagationStopped_\n  }\n\n  /**\n   * @type {string}\n   */\n  get type () {\n    return this.type_\n  }\n\n  /**\n   * @type {ol.Collection<ol.Feature>}\n   */\n  get features () {\n    return this.features_\n  }\n\n  /**\n   * @type {number}\n   */\n  get angle () {\n    return this.angle_\n  }\n\n  /**\n   * @type {ol.Coordinate}\n   */\n  get anchor () {\n    return this.anchor_\n  }\n\n  /**\n   * Prevent event propagation.\n   */\n  preventDefault () {\n    this.propagationStopped_ = true\n  }\n\n  /**\n   * Stop event propagation.\n   */\n  stopPropagation () {\n    this.propagationStopped_ = true\n  }\n}\n","const ua = typeof navigator !== 'undefined' ? navigator.userAgent.toLowerCase() : ''\n\nexport const MAC = ua.indexOf('macintosh') !== -1\n\nexport const WEBKIT = ua.indexOf('webkit') !== -1 && ua.indexOf('edge') == -1\n\nexport const mouseActionButton = function (mapBrowserEvent) {\n  const originalEvent = /** @type {MouseEvent} */ (mapBrowserEvent.originalEvent)\n  return originalEvent.button == 0 && !(WEBKIT && MAC && originalEvent.ctrlKey)\n}\n","/**\n * This file is part of ol-rotate-feature package.\n * @module ol-rotate-feature\n * @license MIT\n * @author Vladimir Vershinin\n */\n/**\n * Rotate interaction class.\n * Adds controls to rotate vector features.\n * Writes out total angle in radians (positive is counter-clockwise) to property for each feature.\n */\nimport { Pointer as PointerInteraction } from 'ol/interaction'\nimport { Collection, Feature } from 'ol'\nimport { Vector as VectorLayer } from 'ol/layer'\nimport { Vector as VectorSource } from 'ol/source'\nimport { GeometryCollection, Point, Polygon } from 'ol/geom'\nimport { Fill, RegularShape, Stroke, Style, Text } from 'ol/style'\nimport { getCenter as getExtentCenter } from 'ol/extent'\nimport { always, mouseOnly } from 'ol/events/condition'\nimport { assert, identity, includes, isArray } from './util'\nimport RotateFeatureEvent, { RotateFeatureEventType } from './event'\nimport { mouseActionButton } from './shim'\n\nconst ANCHOR_KEY = 'rotate-anchor'\nconst ARROW_KEY = 'rotate-arrow'\n\nconst ANGLE_PROP = 'angle'\nconst ANCHOR_PROP = 'anchor'\n\n/**\n * @todo todo добавить опцию condition - для возможности переопределения клавиш\n */\nexport default class RotateFeatureInteraction extends PointerInteraction {\n  /**\n   * @param {InteractionOptions} options\n   */\n  constructor (options = {}) {\n    super({\n      // handleEvent: handleEvent,\n      handleDownEvent,\n      handleUpEvent,\n      handleDragEvent,\n      handleMoveEvent,\n    })\n    /**\n     * @type {string}\n     * @private\n     */\n    this.previousCursor_ = undefined\n    /**\n     * @type {Feature}\n     * @private\n     */\n    this.anchorFeature_ = undefined\n    /**\n     * @type {Feature}\n     * @private\n     */\n    this.arrowFeature_ = undefined\n    /**\n     * @type {Coordinate}\n     * @private\n     */\n    this.lastCoordinate_ = undefined\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.anchorMoving_ = false\n    /**\n     * @type {Vector}\n     * @private\n     */\n    this.overlay_ = new VectorLayer({\n      style: options.style || getDefaultStyle(),\n      source: new VectorSource({\n        features: new Collection(),\n      }),\n    })\n    /**\n     * @private\n     * @type {module:ol/events/condition~Condition}\n     */\n    this.condition_ = options.condition ? options.condition : always\n    /**\n     * @type {Collection<Feature>}\n     * @private\n     */\n    this.features_ = undefined\n    if (options.features) {\n      if (isArray(options.features)) {\n        this.features_ = new Collection(options.features)\n      } else if (options.features instanceof Collection) {\n        this.features_ = options.features\n      } else {\n        throw new Error('Features option should be an array or collection of features, ' +\n          'got ' + (typeof options.features))\n      }\n    } else {\n      this.features_ = new Collection()\n    }\n\n    /**\n     * @type {boolean}\n     * @public\n     */\n    this.allowAnchorMovement = options.allowAnchorMovement === undefined ? true : options.allowAnchorMovement\n\n    this.setAnchor(options.anchor || getFeaturesCentroid(this.features_))\n    this.setAngle(options.angle || 0)\n\n    this.features_.on('add', ::this.onFeatureAdd_)\n    this.features_.on('remove', ::this.onFeatureRemove_)\n    this.on('change:' + ANGLE_PROP, ::this.onAngleChange_)\n    this.on('change:' + ANCHOR_PROP, ::this.onAnchorChange_)\n\n    this.createOrUpdateAnchorFeature_()\n    this.createOrUpdateArrowFeature_()\n  }\n\n  /**\n   * @type {Collection<Feature>}\n   */\n  get features () {\n    return this.features_\n  }\n\n  /**\n   * @type {number}\n   */\n  get angle () {\n    return this.getAngle()\n  }\n\n  /**\n   * @param {number} angle\n   */\n  set angle (angle) {\n    this.setAngle(angle)\n  }\n\n  /**\n   * @type {Coordinate|number[]|undefined}\n   */\n  get anchor () {\n    return this.getAnchor()\n  }\n\n  /**\n   * @param {Coordinate|undefined} anchor\n   */\n  set anchor (anchor) {\n    this.setAnchor(anchor)\n  }\n\n  /**\n   * @param {PluggableMap} map\n   */\n  set map (map) {\n    this.setMap(map)\n  }\n\n  /**\n   * @type {PluggableMap}\n   */\n  get map () {\n    return this.getMap()\n  }\n\n  /**\n   * @param {boolean} active\n   */\n  set active (active) {\n    this.setActive(active)\n  }\n\n  /**\n   * @type {boolean}\n   */\n  get active () {\n    return this.getActive()\n  }\n\n  /**\n   * @param {ol.Map} map\n   */\n  setMap (map) {\n    this.overlay_.setMap(map)\n    super.setMap(map)\n  }\n\n  /**\n   * @param {boolean} active\n   */\n  setActive (active) {\n    if (this.overlay_) {\n      this.overlay_.setMap(active ? this.map : undefined)\n    }\n\n    super.setActive(active)\n  }\n\n  /**\n   * Set current angle of interaction features.\n   *\n   * @param {number} angle\n   */\n  setAngle (angle) {\n    assert(!isNaN(parseFloat(angle)), 'Numeric value passed')\n\n    this.set(ANGLE_PROP, parseFloat(angle))\n  }\n\n  /**\n   * Returns current angle of interaction features.\n   *\n   * @return {number}\n   */\n  getAngle () {\n    return this.get(ANGLE_PROP)\n  }\n\n  /**\n   * Set current anchor position.\n   *\n   * @param {Coordinate | undefined} anchor\n   */\n  setAnchor (anchor) {\n    assert(anchor == null || isArray(anchor) && anchor.length === 2, 'Array of two elements passed')\n\n    this.set(ANCHOR_PROP, anchor != null ? anchor.map(parseFloat) : getFeaturesCentroid(this.features_))\n  }\n\n  /**\n   * Returns current anchor position.\n   *\n   * @return {Coordinate | undefined}\n   */\n  getAnchor () {\n    return this.get(ANCHOR_PROP)\n  }\n\n  /**\n   * @private\n   */\n  createOrUpdateAnchorFeature_ () {\n    const angle = this.getAngle()\n    const anchor = this.getAnchor()\n\n    if (!anchor) return\n\n    if (this.anchorFeature_) {\n      this.anchorFeature_.getGeometry().setCoordinates(anchor)\n      this.anchorFeature_.set(ANGLE_PROP, angle)\n    } else {\n      this.anchorFeature_ = new Feature({\n        geometry: new Point(anchor),\n        [ANGLE_PROP]: angle,\n        [ANCHOR_KEY]: true,\n      })\n      this.overlay_.getSource().addFeature(this.anchorFeature_)\n    }\n  }\n\n  /**\n   * @private\n   */\n  createOrUpdateArrowFeature_ () {\n    const angle = this.getAngle()\n    const anchor = this.getAnchor()\n\n    if (!anchor) return\n\n    if (this.arrowFeature_) {\n      this.arrowFeature_.getGeometry().setCoordinates(anchor)\n      this.arrowFeature_.set(ANGLE_PROP, angle)\n    } else {\n      this.arrowFeature_ = new Feature({\n        geometry: new Point(anchor),\n        [ANGLE_PROP]: angle,\n        [ARROW_KEY]: true,\n      })\n      this.overlay_.getSource().addFeature(this.arrowFeature_)\n    }\n  }\n\n  /**\n   * @private\n   */\n  resetAngleAndAnchor_ () {\n    this.resetAngle_()\n    this.resetAnchor_()\n  }\n\n  /**\n   * @private\n   */\n  resetAngle_ () {\n    this.set(ANGLE_PROP, 0, true)\n    this.arrowFeature_ && this.arrowFeature_.set(ANGLE_PROP, this.getAngle())\n    this.anchorFeature_ && this.anchorFeature_.set(ANGLE_PROP, this.getAngle())\n  }\n\n  /**\n   * @private\n   */\n  resetAnchor_ () {\n    this.set(ANCHOR_PROP, getFeaturesCentroid(this.features_), true)\n\n    if (this.getAnchor()) {\n      this.arrowFeature_ && this.arrowFeature_.getGeometry().setCoordinates(this.getAnchor())\n      this.anchorFeature_ && this.anchorFeature_.getGeometry().setCoordinates(this.getAnchor())\n    }\n  }\n\n  /**\n   * @private\n   */\n  onFeatureAdd_ () {\n    this.resetAngleAndAnchor_()\n    this.createOrUpdateAnchorFeature_()\n    this.createOrUpdateArrowFeature_()\n  }\n\n  /**\n   * @private\n   */\n  onFeatureRemove_ () {\n    this.resetAngleAndAnchor_()\n\n    if (this.features_.getLength()) {\n      this.createOrUpdateAnchorFeature_()\n      this.createOrUpdateArrowFeature_()\n    } else {\n      this.overlay_.getSource().clear()\n      this.anchorFeature_ = this.arrowFeature_ = undefined\n    }\n  }\n\n  /**\n   * @private\n   */\n  onAngleChange_ ({oldValue}) {\n    this.features_.forEach(feature => feature.getGeometry().rotate(this.getAngle() - oldValue, this.getAnchor()))\n    this.arrowFeature_ && this.arrowFeature_.set(ANGLE_PROP, this.getAngle())\n    this.anchorFeature_ && this.anchorFeature_.set(ANGLE_PROP, this.getAngle())\n  }\n\n  /**\n   * @private\n   */\n  onAnchorChange_ () {\n    const anchor = this.getAnchor()\n\n    if (anchor) {\n      this.anchorFeature_ && this.anchorFeature_.getGeometry().setCoordinates(anchor)\n      this.arrowFeature_ && this.arrowFeature_.getGeometry().setCoordinates(anchor)\n    }\n  }\n\n  /**\n   * @param {Collection<Feature>} features\n   * @private\n   */\n  dispatchRotateStartEvent_ (features) {\n    this.dispatchEvent(\n      new RotateFeatureEvent(\n        RotateFeatureEventType.START,\n        features,\n        this.getAngle(),\n        this.getAnchor(),\n      ),\n    )\n  }\n\n  /**\n   * @param {Collection<Feature>} features\n   * @private\n   */\n  dispatchRotatingEvent_ (features) {\n    this.dispatchEvent(\n      new RotateFeatureEvent(\n        RotateFeatureEventType.ROTATING,\n        features,\n        this.getAngle(),\n        this.getAnchor(),\n      ),\n    )\n  }\n\n  /**\n   * @param {Collection<Feature>} features\n   * @private\n   */\n  dispatchRotateEndEvent_ (features) {\n    this.dispatchEvent(\n      new RotateFeatureEvent(\n        RotateFeatureEventType.END,\n        features,\n        this.getAngle(),\n        this.getAnchor(),\n      ),\n    )\n  }\n}\n\n/**\n * @param {MapBrowserEvent} evt Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {RotateFeatureInteraction}\n * @private\n */\n// function handleEvent (evt) {\n//   // disable selection of inner features\n//   const foundFeature = evt.map.forEachFeatureAtPixel(evt.pixel, identity)\n//   if (\n//     includes([ 'click', 'singleclick', 'dblclick' ], evt.type) &&\n//     includes([ this.anchorFeature_, this.arrowFeature_ ], foundFeature)\n//   ) {\n//     return false\n//   }\n//\n//   return this::baseHandleEvent(evt)\n// }\n\n/**\n * @param {MapBrowserEvent} evt Event.\n * @return {boolean}\n * @this {RotateFeatureInteraction}\n * @private\n */\nfunction handleDownEvent (evt) {\n  if (!mouseOnly(evt)) {\n    return false\n  }\n\n  if (mouseActionButton(evt) && this.condition_(evt)) {\n    // disable selection of inner features\n    const foundFeature = evt.map.forEachFeatureAtPixel(evt.pixel, identity)\n    if (\n      includes(['click', 'singleclick', 'dblclick'], evt.type) &&\n      includes([this.anchorFeature_, this.arrowFeature_], foundFeature)\n    ) {\n      return false\n    }\n    // handle click & drag on features for rotation\n    if (\n      foundFeature && !this.lastCoordinate_ &&\n      (\n        includes(this.features_.getArray(), foundFeature) ||\n        foundFeature === this.arrowFeature_\n      )\n    ) {\n      this.lastCoordinate_ = evt.coordinate\n\n      this::handleMoveEvent(evt)\n      this.dispatchRotateStartEvent_(this.features_)\n\n      return true\n    }\n    // handle click & drag on rotation anchor feature\n    else if (foundFeature && foundFeature === this.anchorFeature_ && this.allowAnchorMovement) {\n      this.anchorMoving_ = true\n      this::handleMoveEvent(evt)\n\n      return true\n    }\n  }\n  return false\n}\n\n/**\n * @param {MapBrowserEvent} evt Event.\n * @return {boolean}\n * @this {RotateFeatureInteraction}\n * @private\n */\nfunction handleUpEvent (evt) {\n  // stop drag sequence of features\n  if (this.lastCoordinate_) {\n    this.lastCoordinate_ = undefined\n\n    this::handleMoveEvent(evt)\n    this.dispatchRotateEndEvent_(this.features_)\n\n    return true\n  }\n  // stop drag sequence of the anchors\n  else if (this.anchorMoving_) {\n    this.anchorMoving_ = false\n    this::handleMoveEvent(evt)\n\n    return true\n  }\n\n  return false\n}\n\n/**\n * @param {MapBrowserEvent} evt Event.\n * @return {boolean}\n * @this {RotateFeatureInteraction}\n * @private\n */\nfunction handleDragEvent ({coordinate}) {\n  const anchorCoordinate = this.anchorFeature_.getGeometry().getCoordinates()\n\n  // handle drag of features by angle\n  if (this.lastCoordinate_) {\n    // calculate vectors of last and current pointer positions\n    const lastVector = [\n      this.lastCoordinate_[0] - anchorCoordinate[0],\n      this.lastCoordinate_[1] - anchorCoordinate[1],\n    ]\n    const newVector = [\n      coordinate[0] - anchorCoordinate[0],\n      coordinate[1] - anchorCoordinate[1],\n    ]\n\n    // calculate angle between last and current vectors (positive angle counter-clockwise)\n    let angle = Math.atan2(\n      lastVector[0] * newVector[1] - newVector[0] * lastVector[1],\n      lastVector[0] * newVector[0] + lastVector[1] * newVector[1],\n    )\n\n    this.setAngle(this.getAngle() + angle)\n    this.dispatchRotatingEvent_(this.features_)\n\n    this.lastCoordinate_ = coordinate\n  }\n  // handle drag of the anchor\n  else if (this.anchorMoving_) {\n    this.setAnchor(coordinate)\n  }\n}\n\n/**\n * @param {MapBrowserEvent} evt Event.\n * @return {boolean}\n * @this {RotateFeatureInteraction}\n * @private\n */\nfunction handleMoveEvent ({map, pixel}) {\n  const elem = map.getTargetElement()\n  const foundFeature = map.forEachFeatureAtPixel(pixel, identity)\n\n  const setCursor = (cursor, vendor = false) => {\n    if (vendor) {\n      elem.style.cursor = '-webkit-' + cursor\n      elem.style.cursor = '-moz-' + cursor\n    }\n\n    elem.style.cursor = cursor\n  }\n\n  if (this.lastCoordinate_) {\n    this.previousCursor_ = elem.style.cursor\n    setCursor('grabbing', true)\n  } else if (\n    foundFeature &&\n    (\n      includes(this.features_.getArray(), foundFeature) ||\n      foundFeature === this.arrowFeature_\n    )\n  ) {\n    this.previousCursor_ = elem.style.cursor\n    setCursor('grab', true)\n  } else if ((foundFeature && foundFeature === this.anchorFeature_ && this.allowAnchorMovement) || this.anchorMoving_) {\n    this.previousCursor_ = elem.style.cursor\n    setCursor('crosshair')\n  } else {\n    setCursor(this.previousCursor_ || '')\n    this.previousCursor_ = undefined\n  }\n}\n\n/**\n * @returns {StyleFunction}\n * @private\n */\nfunction getDefaultStyle () {\n  const white = [255, 255, 255, 0.8]\n  const blue = [0, 153, 255, 0.8]\n  const transparent = [255, 255, 255, 0.01]\n  const width = 2\n\n  const styles = {\n    [ANCHOR_KEY]: [\n      new Style({\n        image: new RegularShape({\n          fill: new Fill({\n            color: [0, 153, 255, 0.8],\n          }),\n          stroke: new Stroke({\n            color: blue,\n            width: 1,\n          }),\n          radius: 4,\n          points: 6,\n        }),\n        zIndex: Infinity,\n      }),\n    ],\n    [ARROW_KEY]: [\n      new Style({\n        fill: new Fill({\n          color: transparent,\n        }),\n        stroke: new Stroke({\n          color: white,\n          width: width + 2,\n        }),\n        text: new Text({\n          font: '12px sans-serif',\n          offsetX: 20,\n          offsetY: -20,\n          fill: new Fill({\n            color: 'blue',\n          }),\n          stroke: new Stroke({\n            color: white,\n            width: width + 1,\n          }),\n        }),\n        zIndex: Infinity,\n      }),\n      new Style({\n        fill: new Fill({\n          color: transparent,\n        }),\n        stroke: new Stroke({\n          color: blue,\n          width,\n        }),\n        zIndex: Infinity,\n      }),\n    ],\n  }\n\n  return function (feature, resolution) {\n    let style\n    const angle = feature.get(ANGLE_PROP) || 0\n\n    switch (true) {\n      case feature.get(ANCHOR_KEY):\n        style = styles[ANCHOR_KEY]\n        style[0].getImage().setRotation(-angle)\n\n        return style\n      case feature.get(ARROW_KEY):\n        style = styles[ARROW_KEY]\n\n        const coordinates = feature.getGeometry().getCoordinates()\n        // generate arrow polygon\n        const geom = new Polygon([\n          [\n            [coordinates[0], coordinates[1] - 6 * resolution],\n            [coordinates[0] + 8 * resolution, coordinates[1] - 12 * resolution],\n            [coordinates[0], coordinates[1] + 30 * resolution],\n            [coordinates[0] - 8 * resolution, coordinates[1] - 12 * resolution],\n            [coordinates[0], coordinates[1] - 6 * resolution],\n          ],\n        ])\n\n        // and rotate it according to current angle\n        geom.rotate(angle, coordinates)\n        style[0].setGeometry(geom)\n        style[1].setGeometry(geom)\n        style[0].getText().setText(Math.round(-angle * 180 / Math.PI) + '°')\n\n        return style\n    }\n  }\n}\n\n/**\n * @param {Collection<Feature>|Array<Feature>} features\n * @returns {Extent | number[] | undefined}\n * @private\n */\nfunction getFeaturesExtent (features) {\n  features = features instanceof Collection ? features.getArray() : features\n  if (!features.length) return\n\n  return new GeometryCollection(features.map(feature => feature.getGeometry())).getExtent()\n}\n\n/**\n * @param {Collection<ol.Feature> | Array<Feature>} features\n * @return {Coordinate | number[] | undefined}\n */\nfunction getFeaturesCentroid (features) {\n  features = features instanceof Collection ? features.getArray() : features\n  if (!features.length) return\n\n  return getExtentCenter(getFeaturesExtent(features))\n}\n","/**\n * This file is part of ol-rotate-feature package.\n * @module ol-rotate-feature\n * @license MIT\n * @author Vladimir Vershinin\n */\nimport RotateFeatureInteraction from \"./interaction\"\n\n// for backward compatibility\nif (typeof window !== 'undefined' && window.ol && window.ol.interaction) {\n  window.ol.interaction.RotateFeature = RotateFeatureInteraction\n}\n\nexport default RotateFeatureInteraction\n"],"names":["_typeof","assert","condition","message","join","Error","identity","arg","includes","arr","value","indexOf","isArray","val","Object","prototype","toString","RotateFeatureEventType","START","ROTATING","END","RotateFeatureEvent","type","features","angle","anchor","propagationStopped_","type_","features_","angle_","anchor_","ua","navigator","userAgent","toLowerCase","MAC","WEBKIT","mouseActionButton","mapBrowserEvent","originalEvent","button","ctrlKey","ANCHOR_KEY","ARROW_KEY","ANGLE_PROP","ANCHOR_PROP","RotateFeatureInteraction","options","handleDownEvent","handleUpEvent","handleDragEvent","handleMoveEvent","previousCursor_","undefined","anchorFeature_","arrowFeature_","lastCoordinate_","anchorMoving_","overlay_","VectorLayer","style","getDefaultStyle","source","VectorSource","Collection","condition_","always","allowAnchorMovement","setAnchor","getFeaturesCentroid","setAngle","on","onFeatureAdd_","onFeatureRemove_","onAngleChange_","onAnchorChange_","createOrUpdateAnchorFeature_","createOrUpdateArrowFeature_","map","setMap","active","isNaN","parseFloat","set","get","length","getAngle","getAnchor","getGeometry","setCoordinates","Feature","geometry","Point","getSource","addFeature","resetAngle_","resetAnchor_","resetAngleAndAnchor_","getLength","clear","oldValue","forEach","feature","rotate","dispatchEvent","getMap","setActive","getActive","PointerInteraction","evt","mouseOnly","foundFeature","forEachFeatureAtPixel","pixel","getArray","coordinate","dispatchRotateStartEvent_","dispatchRotateEndEvent_","anchorCoordinate","getCoordinates","lastVector","newVector","Math","atan2","dispatchRotatingEvent_","elem","getTargetElement","setCursor","cursor","vendor","white","blue","transparent","width","styles","Style","image","RegularShape","fill","Fill","color","stroke","Stroke","radius","points","zIndex","Infinity","text","Text","font","offsetX","offsetY","resolution","getImage","setRotation","coordinates","geom","Polygon","setGeometry","getText","setText","round","PI","getFeaturesExtent","GeometryCollection","getExtent","getExtentCenter","window","ol","interaction","RotateFeature"],"mappings":"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"}