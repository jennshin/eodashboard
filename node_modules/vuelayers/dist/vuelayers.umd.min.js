/**
 * VueLayers
 * Web map Vue components with the power of OpenLayers
 *
 * @package vuelayers
 * @author Vladimir Vershinin <ghettovoice@gmail.com>
 * @version 0.12.0-rc.26
 * @license MIT
 * @copyright (c) 2017-2021, Vladimir Vershinin <ghettovoice@gmail.com>
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("ol"),require("ol/source"),require("ol/control"),require("ol/extent"),require("ol/format"),require("ol/geom"),require("ol/sphere"),require("ol/geom/Polygon"),require("ol/proj"),require("ol/style"),require("ol/interaction"),require("ol/layer/Base"),require("vue"),require("ol/util"),require("ol/loadingstrategy"),require("ol/tilegrid"),require("ol/events/condition"),require("ol/layer/Graticule"),require("ol/layer"),require("ol/size"),require("ol/tilegrid/WMTS")):"function"==typeof define&&define.amd?define("vuelayers",["ol","ol/source","ol/control","ol/extent","ol/format","ol/geom","ol/sphere","ol/geom/Polygon","ol/proj","ol/style","ol/interaction","ol/layer/Base","vue","ol/util","ol/loadingstrategy","ol/tilegrid","ol/events/condition","ol/layer/Graticule","ol/layer","ol/size","ol/tilegrid/WMTS"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).VueLayers=e(t.ol,t.ol.source,t.ol.control,t.ol.extent,t.ol.format,t.ol.geom,t.ol.sphere,t.ol.geom.Polygon,t.ol.proj,t.ol.style,t.ol.interaction,t.ol.layer.Base,t.Vue,t.ol.util,t.ol.loadingstrategy,t.ol.tilegrid,t.ol.events.condition,t.ol.layer.Graticule,t.ol.layer,t.ol.size,t.ol.tilegrid.WMTS)}(this,(function(t,e,n,i,o,s,u,a,c,l,h,f,d,p,v,m,y,O,w,j,P){"use strict";function S(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var x=S(f),$=S(d),I=S(O),C=S(P);function T(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function F(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}function k(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function D(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},r.exports),r.exports}var V=D((function(t){function e(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=e=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),e(r)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0})),L=k(V);function A(t,e){return!e||"object"!==L(e)&&"function"!=typeof e?E(t):e}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function G(t,e,r){return(G=M()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&R(i,r.prototype),i}).apply(null,arguments)}function U(t){var e="function"==typeof Map?new Map:void 0;return(U=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return G(t,arguments,N(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),R(n,t)})(t)}function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Z,B=D((function(t){var e=function(t){var e,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(t){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),s=new C(n||[]);return o._invoke=function(t,e,r){var n=h;return function(i,o){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw o;return _()}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var u=x(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var a=l(t,e,r);if("normal"===a.type){if(n=r.done?p:f,a.arg===v)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(n=p,r.method="throw",r.arg=a.arg)}}}(t,r,s),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",v={};function g(){}function m(){}function y(){}var b={};b[o]=function(){return this};var O=Object.getPrototypeOf,w=O&&O(O(T([])));w&&w!==r&&n.call(w,o)&&(b=w);var j=y.prototype=g.prototype=Object.create(b);function P(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(i,o,s,u){var a=l(t[i],t,o);if("throw"!==a.type){var c=a.arg,h=c.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,s,u)}),(function(t){r("throw",t,s,u)})):e.resolve(h).then((function(t){c.value=t,s(c)}),(function(t){return r("throw",t,s,u)}))}u(a.arg)}var i;this._invoke=function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}}function x(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function $(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach($,this),this.reset(!0)}function T(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}return{next:_}}function _(){return{value:e,done:!0}}return m.prototype=j.constructor=y,y.constructor=m,m.displayName=a(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,a(t,u,"GeneratorFunction")),t.prototype=Object.create(j),t},t.awrap=function(t){return{__await:t}},P(S.prototype),S.prototype[s]=function(){return this},t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new S(c(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},P(j),a(j,u,"Generator"),j[o]=function(){return this},j.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=T,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return u.type="throw",u.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],u=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(a&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;I(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}})),W=B.mark(zt),Y=("undefined"!=typeof global?global:"undefined"!=typeof window?window:{}).isFinite||it,q=Object.prototype,X=Object.prototype,H=q.toString,J=q.hasOwnProperty,K=X.toString,Q=(Z={},H).call(Z),tt=(Z=0,H).call(Z),et=(Z="",H).call(Z),rt=(Z=!0,H).call(Z),nt=K.call(Object);function it(){}function ot(t){return function(){return t}}function st(){return[]}function ut(){return Object.create(null)}function at(){return!0}function ct(t){return t}function lt(t){return function(){return!t.apply(void 0,arguments)}}function ht(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return kt(e,(function(t,e){return t||e.apply(void 0,r)}),!1)}}function ft(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return kt(e,(function(t,e){return t&&e.apply(void 0,r)}),!0)}}function dt(t){return H.call(t)===rt}function pt(t){return H.call(t)===tt}function vt(t){return H.call(t)===et}function gt(t){return Array.isArray(t)}function mt(t){return wt(t)&&J.call(t,"length")}function yt(e){return e instanceof t.Collection}function bt(t){return"function"==typeof t}function Ot(t){return!isNaN(parseFloat(t))&&Y(t)}function wt(t){return null!=t&&"object"===z(t)}function jt(t){if(!wt(t)||H.call(t)!==Q)return!1;var e=Object.getPrototypeOf(t);if(null==e)return!0;var r=e.constructor;return"function"==typeof r&&r instanceof r&&K.call(r)===nt}function Pt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Y(t)?Number(e<0?t:Number(t).toFixed(e)):t}function St(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.find((function(t){return null!=t}))}function xt(t,e){var r=new RegExp(Object.keys(e).map((function(t){return"(\\{"+t+"\\})"})).join("|"),"ig");return t.replace(r,(function(t){return e[t.substr(1,t.length-2)]||""}))}function $t(t,e){if(t===e)return!0;if(null==t||null==e||!wt(t)||!wt(e))return t!=t&&e!=e;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;var i=[],o=function(r,n){for(var o=0,s=r.length;o<s;o++){var u=r[o];if(!i.includes(u)){if(!1===J.call(e,u))return!1;var a=n[o];if(!$t(t[u],e[a]))return!1;i.push(a)}}return!0};return!1!==o(r,n)&&o(n,r)}function It(t){return yt(t)&&(t=t.getArray()),mt(t)?t.length:0}function Ct(t){return yt(t)&&(t=t.getArray()),wt(t)&&(t=Object.values(t).filter(lt(Ct))),!t||mt(t)&&0===It(t)}function Tt(t){return Object.keys(t)}function _t(t){return Object.seal(t)}function Et(t){return Object.freeze(t)}function Rt(t){var e=t;return e.sealed||((e=function(){return _t(t.apply(void 0,arguments))}).sealed=!0),e}function Ft(t,e){yt(t)&&(t=t.getArray());for(var r=Object.keys(t),n=0,i=r.length;n<i;n++){var o=r[n];if(!1===e(t[o],o))return}}function kt(t,e,r){var n=r;return Ft(t,(function(t,r){n=e(n,t,r)})),n}function Dt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt(Ct);return kt(t,(function(t,r,n){return e(r,n)&&(gt(t)?t.push(r):t[n]=r),t}),mt(t)||yt(t)?[]:{})}function Vt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct,r=Dt(t,e);return gt(r)?r[0]:r[Tt(r)[0]]}function Lt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;return kt(t,(function(t,r,n){return t[n]=e(r,n),t}),mt(t)||yt(t)?[]:{})}function At(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;return kt(t,(function(t,r,n){return t&&e(r,n)}),!0)}function Nt(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return kt(n=Array.isArray(e)?e:[e].concat(n),(function(e,r){return e[r]=t[r],e}),{})}function Mt(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return n=Array.isArray(e)?e:[e].concat(n),Dt(t,(function(t,e){return!n.includes(e)}))}function Gt(t){return 0===(t=String(t)).length?"":t[0].toUpperCase()+t.slice(1)}function Ut(t){return 0===(t=String(t)).length?"":t[0].toLowerCase()+t.slice(1)}function zt(t,e){var r,n,i=arguments;return B.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:r=i.length>2&&void 0!==i[2]?i[2]:1,n=t;case 2:if(!(n<e)){o.next=8;break}return o.next=5,n;case 5:n+=r,o.next=2;break;case 8:case"end":return o.stop()}}),W)}function Zt(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Array.from(zt(t,e,r))}function Bt(t,e,r){var n=function(r){return String.prototype.split.call(e,r).filter(Boolean).reduce((function(t,e){return null!=t?t[e]:t}),t)},i=n(/[,[\]]+?/)||n(/[,[\].]+?/);return void 0===i||i===t?r:i}function Wt(t,e){return wt(t)&&e in t}function Yt(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$t,n=Dt(t,(function(t){return r(t,e)}));return n.shift()}function qt(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$t;return Dt(t,(function(t){return!Yt(e,t,r)}))}function Xt(t){return t.replace(/([-_]\w)/g,(function(t){return t[1].toUpperCase()}))}function Ht(t){return t.match(/[A-Z]{2,}(?=[A-Z][a-z0-9]*|\b)|[A-Z]?[a-z0-9]*|[A-Z]|[0-9]+/g).filter(Boolean).map((function(t){return t.toLowerCase()})).join("-")}function Jt(t){return JSON.stringify(t)}function Kt(t){if(vt(t))return JSON.parse(t)}function Qt(t){return Kt(Jt(t))}function te(t){return function(e){return t+(t?Gt(e):e)}}function ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=N(t);if(e){var i=N(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return A(this,r)}}var re=function(t){F(r,t);var e=ee(r);function r(t){var n;return _(this,r),(n=e.call(this,t)).name=n.constructor.name,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(E(n),n.constructor):n.stack=new Error(t).stack,n}return r}(U(Error));function ne(t,e){if(!t)throw new re(e||"Assertion failed")}function ie(t,e,r){ne(t instanceof e,r||"value is an instance of ".concat(e.name))}function oe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function se(t,e,r){return e&&oe(t.prototype,e),r&&oe(t,r),t}var ue=function(){function t(){_(this,t),T(this,"_pools",Object.create(null))}return se(t,[{key:"_preparePool",value:function(t){this._pools[t]||(this._pools[t]=Object.create(null))}},{key:"set",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";null!=e&&(this._preparePool(r),this._pools[r][t]={value:e,refs:1})}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";this._preparePool(e);var r=this._pools[e][t];if(r&&null!=r.value)return r.refs++,this._pools[e][t]=r,r.value}},{key:"unset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";this._preparePool(e);var r=this._pools[e][t];r&&null!=r.value&&(r.refs--,0===r.refs&&delete this._pools[e][t])}},{key:"has",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this._preparePool(e),!!this._pools[e][t]}},{key:"move",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";return!(!this.has(t,r)||!e)&&(this._pools[r][e]=this._pools[r][t],delete this._pools[r][t],!0)}},{key:"ids",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return this._preparePool(t),Object.keys(this._pools[t])}},{key:"refs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this._preparePool(e),this.has(t,e)?this._pools[e][t].refs:void 0}}]),t}();function ae(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ce(t,e){if(t){if("string"==typeof t)return ae(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ae(t,e):void 0}}function le(t){return function(t){if(Array.isArray(t))return ae(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||ce(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var he=ve("[VueLayers]"),fe=ge("[VueLayers] WARN"),de=me("[VueLayers] ERR");function pe(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{log:ve("[VueLayers] ".concat(t)),warn:ge("[VueLayers] WARN ".concat(t)),error:me("[VueLayers] ERR ".concat(t))}}function ve(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t&&(vt(n[0])?n[0]=t.trim()+" "+n[0]:n=[t.trim()].concat(le(n))),(e=console).log.apply(e,le(n))}}function ge(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t&&(vt(n[0])?n[0]=t.trim()+" "+n[0]:n=[t.trim()].concat(le(n))),(e=console).warn.apply(e,le(n))}}function me(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t&&(vt(n[0])?n[0]=t.trim()+" "+n[0]:n=[t.trim()].concat(le(n))),(e=console).error.apply(e,le(n))}}function ye(t,e,r,n,i,o,s){try{var u=t[o](s),a=u.value}catch(t){return void r(t)}u.done?e(a):Promise.resolve(a).then(n,i)}function be(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(t){ye(o,n,i,s,u,"next",t)}function u(t){ye(o,n,i,s,u,"throw",t)}s(void 0)}))}}var Oe=function(t,e,r){if(!t)throw new TypeError("argument dest is required");if(!e)throw new TypeError("argument src is required");void 0===r&&(r=!0);return Object.getOwnPropertyNames(e).forEach((function(n){if(r||!we.call(t,n)){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i)}})),t},we=Object.prototype.hasOwnProperty;function je(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return"object"!==z(r[r.length-1])&&(t=r.pop()),r.slice(1).reduce((function(e,r,n){return Oe(e,r,t)}),r[0])}function Pe(t,e){return t.reduce((function(t,r){return t[r]=e(r),t}),{})}function Se(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object.keys(t).reduce((function(r,n){return e.length&&!e.includes(n)||(r=r.concat(t[n])),r}),[])}var xe=function(t,e){return(xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function $e(t,e){function r(){this.constructor=t}xe(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function Ie(t){return"function"==typeof t}var Ce=!1,Te={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;Ce=t},get useDeprecatedSynchronousErrorHandling(){return Ce}};function _e(t){setTimeout((function(){throw t}),0)}var Ee={closed:!0,next:function(t){},error:function(t){if(Te.useDeprecatedSynchronousErrorHandling)throw t;_e(t)},complete:function(){}},Re=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function Fe(t){return null!==t&&"object"==typeof t}var ke=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),De=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var r=this,n=r._parentOrParents,i=r._ctorUnsubscribe,o=r._unsubscribe,s=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var u=0;u<n.length;++u){n[u].remove(this)}if(Ie(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(t){e=t instanceof ke?Ve(t.errors):[t]}}if(Re(s)){u=-1;for(var a=s.length;++u<a;){var c=s[u];if(Fe(c))try{c.unsubscribe()}catch(t){e=e||[],t instanceof ke?e=e.concat(Ve(t.errors)):e.push(t)}}}if(e)throw new ke(e)}},t.prototype.add=function(e){var r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;(r=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=r._parentOrParents;if(null===i)r._parentOrParents=this;else if(i instanceof t){if(i===this)return r;r._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return r;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[r]:o.push(r),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function Ve(t){return t.reduce((function(t,e){return t.concat(e instanceof ke?e.errors:e)}),[])}var Le=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Ae=function(t){function e(r,n,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=Ee;break;case 1:if(!r){o.destination=Ee;break}if("object"==typeof r){r instanceof e?(o.syncErrorThrowable=r.syncErrorThrowable,o.destination=r,r.add(o)):(o.syncErrorThrowable=!0,o.destination=new Ne(o,r));break}default:o.syncErrorThrowable=!0,o.destination=new Ne(o,r,n,i)}return o}return $e(e,t),e.prototype[Le]=function(){return this},e.create=function(t,r,n){var i=new e(t,r,n);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(De),Ne=function(t){function e(e,r,n,i){var o,s=t.call(this)||this;s._parentSubscriber=e;var u=s;return Ie(r)?o=r:r&&(o=r.next,n=r.error,i=r.complete,r!==Ee&&(Ie((u=Object.create(r)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=o,s._error=n,s._complete=i,s}return $e(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;Te.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=Te.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):_e(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;_e(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};Te.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),Te.useDeprecatedSynchronousErrorHandling)throw t;_e(t)}},e.prototype.__tryOrSetError=function(t,e,r){if(!Te.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(e){return Te.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(_e(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(Ae);var Me=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function Ge(t){return t}function Ue(t){return 0===t.length?Ge:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var ze=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,i=function(t,e,r){if(t){if(t instanceof Ae)return t;if(t[Le])return t[Le]()}return t||e||r?new Ae(t,e,r):new Ae(Ee)}(t,e,r);if(n?i.add(n.call(i,this.source)):i.add(this.source||Te.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),Te.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){Te.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(t){for(;t;){var e=t,r=e.closed,n=e.destination,i=e.isStopped;if(r||i)return!1;t=n&&n instanceof Ae?n:null}return!0}(t)?console.warn(e):t.error(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=Ze(e))((function(e,n){var i;i=r.subscribe((function(e){try{t(e)}catch(t){n(t),i&&i.unsubscribe()}}),n,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[Me]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Ue(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=Ze(t))((function(t,r){var n;e.subscribe((function(t){return n=t}),(function(t){return r(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function Ze(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}var Be=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),We=function(t){function e(e,r){var n=t.call(this)||this;return n.subject=e,n.subscriber=r,n.closed=!1,n}return $e(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},e}(De),Ye=function(t){function e(e){var r=t.call(this,e)||this;return r.destination=e,r}return $e(e,t),e}(Ae),qe=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return $e(e,t),e.prototype[Le]=function(){return new Ye(this)},e.prototype.lift=function(t){var e=new Xe(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new Be;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new Be;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new Be;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new Be;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new Be;return this.hasError?(t.error(this.thrownError),De.EMPTY):this.isStopped?(t.complete(),De.EMPTY):(this.observers.push(t),new We(this,t))},e.prototype.asObservable=function(){var t=new ze;return t.source=this,t},e.create=function(t,e){return new Xe(t,e)},e}(ze),Xe=function(t){function e(e,r){var n=t.call(this)||this;return n.destination=e,n.source=r,n}return $e(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):De.EMPTY},e}(qe);function He(){return function(t){return t.lift(new Je(t))}}var Je=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var r=this.connectable;r._refCount++;var n=new Ke(t,r),i=e.subscribe(n);return n.closed||(n.connection=r.connect()),i},t}(),Ke=function(t){function e(e,r){var n=t.call(this,e)||this;return n.connectable=r,n}return $e(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var r=this.connection,n=t._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},e}(Ae),Qe=function(t){function e(e,r){var n=t.call(this)||this;return n.source=e,n.subjectFactory=r,n._refCount=0,n._isComplete=!1,n}return $e(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new De).add(this.source.subscribe(new er(this.getSubject(),this))),t.closed&&(this._connection=null,t=De.EMPTY)),t},e.prototype.refCount=function(){return He()(this)},e}(ze),tr=function(){var t=Qe.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),er=function(t){function e(e,r){var n=t.call(this,e)||this;return n.connectable=r,n}return $e(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(Ye),rr=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n.pending=!1,n}return $e(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,r){return t.call(this)||this}return $e(e,t),e.prototype.schedule=function(t,e){return this},e}(De)),nr=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n}return $e(e,t),e.prototype.schedule=function(e,r){return void 0===r&&(r=0),r>0?t.prototype.schedule.call(this,e,r):(this.delay=r,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,r){return r>0||this.closed?t.prototype.execute.call(this,e,r):this._execute(e,r)},e.prototype.requestAsyncId=function(e,r,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?t.prototype.requestAsyncId.call(this,e,r,n):e.flush(this)},e}(rr),ir=function(){function t(e,r){void 0===r&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},t.now=function(){return Date.now()},t}(),or=function(t){function e(r,n){void 0===n&&(n=ir.now);var i=t.call(this,r,(function(){return e.delegate&&e.delegate!==i?e.delegate.now():n()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return $e(e,t),e.prototype.schedule=function(r,n,i){return void 0===n&&(n=0),e.delegate&&e.delegate!==this?e.delegate.schedule(r,n,i):t.prototype.schedule.call(this,r,n,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},e}(ir),sr=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $e(e,t),e}(or))(nr),ur=new ze((function(t){return t.complete()}));function ar(t){return t?function(t){return new ze((function(e){return t.schedule((function(){return e.complete()}))}))}(t):ur}function cr(t){return t&&"function"==typeof t.schedule}var lr=function(t){return function(e){for(var r=0,n=t.length;r<n&&!e.closed;r++)e.next(t[r]);e.complete()}};function hr(t,e){return new ze((function(r){var n=new De,i=0;return n.add(e.schedule((function(){i!==t.length?(r.next(t[i++]),r.closed||n.add(this.schedule())):r.complete()}))),n}))}function fr(t,e){return e?hr(t,e):new ze(lr(t))}function dr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return cr(r)?(t.pop(),hr(t,r)):fr(t)}function pr(t,e){return new ze(e?function(r){return e.schedule(vr,0,{error:t,subscriber:r})}:function(e){return e.error(t)})}function vr(t){var e=t.error;t.subscriber.error(e)}var gr=function(){function t(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},t.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},t.prototype.toObservable=function(){switch(this.kind){case"N":return dr(this.value);case"E":return pr(this.error);case"C":return ar()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),mr=function(t){function e(e,r,n){void 0===n&&(n=0);var i=t.call(this,e)||this;return i.scheduler=r,i.delay=n,i}return $e(e,t),e.dispatch=function(t){var e=t.notification,r=t.destination;e.observe(r),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new yr(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(gr.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(gr.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(gr.createComplete()),this.unsubscribe()},e}(Ae),yr=function(){return function(t,e){this.notification=t,this.destination=e}}(),br=function(t){function e(e,r,n){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=n,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return $e(e,t),e.prototype.nextInfiniteTimeWindow=function(e){if(!this.isStopped){var r=this._events;r.push(e),r.length>this._bufferSize&&r.shift()}t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this.isStopped||(this._events.push(new Or(this._getNow(),e)),this._trimBufferThenGetEvents()),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,r=this._infiniteTimeWindow,n=r?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=n.length;if(this.closed)throw new Be;if(this.isStopped||this.hasError?e=De.EMPTY:(this.observers.push(t),e=new We(this,t)),i&&t.add(t=new mr(t,i)),r)for(var s=0;s<o&&!t.closed;s++)t.next(n[s]);else for(s=0;s<o&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||sr).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,o=0;o<i&&!(t-n[o].time<r);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&n.splice(0,o),n},e}(qe),Or=function(){return function(t,e){this.time=t,this.value=e}}(),wr=new or(rr);function jr(){}var Pr=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),Sr=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),xr=function(){function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t}();function $r(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new Ir(t,e))}}var Ir=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Cr(t,this.project,this.thisArg))},t}(),Cr=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.project=r,i.count=0,i.thisArg=n||i,i}return $e(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(Ae),Tr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $e(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(Ae),_r=function(t){function e(e,r,n){var i=t.call(this)||this;return i.parent=e,i.outerValue=r,i.outerIndex=n,i.index=0,i}return $e(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(Ae);function Er(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Rr=Er(),Fr=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function kr(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var Dr=function(t){if(t&&"function"==typeof t[Me])return n=t,function(t){var e=n[Me]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Fr(t))return lr(t);if(kr(t))return r=t,function(t){return r.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,_e),t};if(t&&"function"==typeof t[Rr])return e=t,function(t){for(var r=e[Rr]();;){var n=void 0;try{n=r.next()}catch(e){return t.error(e),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof r.return&&t.add((function(){r.return&&r.return()})),t};var e,r,n,i=Fe(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+i+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Vr(t,e,r,n,i){if(void 0===i&&(i=new _r(t,r,n)),!i.closed)return e instanceof ze?e.subscribe(i):Dr(e)(i)}function Lr(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[Me]}(t))return function(t,e){return new ze((function(r){var n=new De;return n.add(e.schedule((function(){var i=t[Me]();n.add(i.subscribe({next:function(t){n.add(e.schedule((function(){return r.next(t)})))},error:function(t){n.add(e.schedule((function(){return r.error(t)})))},complete:function(){n.add(e.schedule((function(){return r.complete()})))}}))}))),n}))}(t,e);if(kr(t))return function(t,e){return new ze((function(r){var n=new De;return n.add(e.schedule((function(){return t.then((function(t){n.add(e.schedule((function(){r.next(t),n.add(e.schedule((function(){return r.complete()})))})))}),(function(t){n.add(e.schedule((function(){return r.error(t)})))}))}))),n}))}(t,e);if(Fr(t))return hr(t,e);if(function(t){return t&&"function"==typeof t[Rr]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new ze((function(r){var n,i=new De;return i.add((function(){n&&"function"==typeof n.return&&n.return()})),i.add(e.schedule((function(){n=t[Rr](),i.add(e.schedule((function(){if(!r.closed){var t,e;try{var i=n.next();t=i.value,e=i.done}catch(t){return void r.error(t)}e?r.complete():(r.next(t),this.schedule())}})))}))),i}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function Ar(t,e){return e?Lr(t,e):t instanceof ze?t:new ze(Dr(t))}var Nr=function(t){function e(e){var r=t.call(this)||this;return r.parent=e,r}return $e(e,t),e.prototype._next=function(t){this.parent.notifyNext(t)},e.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(Ae),Mr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $e(e,t),e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(Ae);function Gr(t,e){if(!e.closed){if(t instanceof ze)return t.subscribe(e);var r;try{r=Dr(t)(e)}catch(t){e.error(t)}return r}}function Ur(t,e,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof e?function(n){return n.pipe(Ur((function(r,n){return Ar(t(r,n)).pipe($r((function(t,i){return e(r,t,n,i)})))}),r))}:("number"==typeof e&&(r=e),function(e){return e.lift(new zr(t,r))})}var zr=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new Zr(t,this.project,this.concurrent))},t}(),Zr=function(t){function e(e,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=r,i.concurrent=n,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return $e(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e)},e.prototype._innerSub=function(t){var e=new Nr(this),r=this.destination;r.add(e);var n=Gr(t,e);n!==e&&r.add(n)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(Mr);function Br(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Ur(Ge,t)}function Wr(t,e,r){return r?Wr(t,e).pipe($r((function(t){return Re(t)?r.apply(void 0,t):r(t)}))):new ze((function(r){var n,i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.next(1===t.length?t[0]:t)};try{n=t(i)}catch(t){return void r.error(t)}if(Ie(e))return function(){return e(i,n)}}))}function Yr(t,e){var r;return void 0===t&&(t=0),void 0===e&&(e=wr),(Re(r=t)||!(r-parseFloat(r)+1>=0)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=wr),new ze((function(r){return r.add(e.schedule(qr,t,{subscriber:r,counter:0,period:t})),r}))}function qr(t){var e=t.subscriber,r=t.counter,n=t.period;e.next(r),this.schedule({subscriber:e,counter:r+1,period:n},n)}function Xr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return cr(i)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(r=t.pop())):"number"==typeof i&&(r=t.pop()),null===n&&1===t.length&&t[0]instanceof ze?t[0]:Br(r)(fr(t,n))}var Hr=new ze(jr);function Jr(t,e){return function(r){return r.lift(new Kr(t,e))}}var Kr=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Qr(t,this.predicate,this.thisArg))},t}(),Qr=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.predicate=r,i.thisArg=n,i.count=0,i}return $e(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(Ae);function tn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!Re(t[0]))return t[0];t=t[0]}return fr(t,void 0).lift(new en)}var en=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new rn(t))},t}(),rn=function(t){function e(e){var r=t.call(this,e)||this;return r.hasFirst=!1,r.observables=[],r.subscriptions=[],r}return $e(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var r=0;r<e&&!this.hasFirst;r++){var n=Vr(this,t[r],void 0,r);this.subscriptions&&this.subscriptions.push(n),this.add(n)}this.observables=null}},e.prototype.notifyNext=function(t,e,r){if(!this.hasFirst){this.hasFirst=!0;for(var n=0;n<this.subscriptions.length;n++)if(n!==r){var i=this.subscriptions[n];i.unsubscribe(),this.remove(i)}this.subscriptions=null}this.destination.next(e)},e}(Tr);var nn=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new on(t,this.selector,this.caught))},t}(),on=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.selector=r,i.caught=n,i}return $e(e,t),e.prototype.error=function(e){if(!this.isStopped){var r=void 0;try{r=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle();var n=new Nr(this);this.add(n);var i=Gr(r,n);i!==n&&this.add(i)}},e}(Mr);function sn(t,e){return void 0===e&&(e=wr),function(r){return r.lift(new un(t,e))}}var un=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new an(t,this.dueTime,this.scheduler))},t}(),an=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.dueTime=r,i.scheduler=n,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return $e(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(cn,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(Ae);function cn(t){t.debouncedNext()}function ln(t){return void 0===t&&(t=null),function(e){return e.lift(new hn(t))}}var hn=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new fn(t,this.defaultValue))},t}(),fn=function(t){function e(e,r){var n=t.call(this,e)||this;return n.defaultValue=r,n.isEmpty=!0,n}return $e(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(Ae);function dn(t){return t instanceof Date&&!isNaN(+t)}var pn=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new vn(t,this.delay,this.scheduler))},t}(),vn=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.delay=r,i.scheduler=n,i.queue=[],i.active=!1,i.errored=!1,i}return $e(e,t),e.dispatch=function(t){for(var e=t.source,r=e.queue,n=t.scheduler,i=t.destination;r.length>0&&r[0].time-n.now()<=0;)r.shift().notification.observe(i);if(r.length>0){var o=Math.max(0,r[0].time-n.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,r=new gn(e.now()+this.delay,t);this.queue.push(r),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(gr.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(gr.createComplete()),this.unsubscribe()},e}(Ae),gn=function(){return function(t,e){this.time=t,this.notification=e}}();var mn=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new yn(t,this.delayDurationSelector))},t}(),yn=function(t){function e(e,r){var n=t.call(this,e)||this;return n.delayDurationSelector=r,n.completed=!1,n.delayNotifierSubscriptions=[],n.index=0,n}return $e(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(t),this.removeSubscription(i),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){var e=this.index++;try{var r=this.delayDurationSelector(t,e);r&&this.tryDelay(r,t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue},e.prototype.tryDelay=function(t,e){var r=Vr(this,t,e);r&&!r.closed&&(this.destination.add(r),this.delayNotifierSubscriptions.push(r))},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(Tr),bn=function(t){function e(e,r){var n=t.call(this)||this;return n.source=e,n.subscriptionDelay=r,n}return $e(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new On(t,this.source))},e}(ze),On=function(t){function e(e,r){var n=t.call(this)||this;return n.parent=e,n.source=r,n.sourceSubscribed=!1,n}return $e(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(Ae);function wn(t,e){return function(r){return r.lift(new jn(t,e))}}var jn=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new Pn(t,this.compare,this.keySelector))},t}(),Pn=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.keySelector=n,i.hasKey=!1,"function"==typeof r&&(i.compare=r),i}return $e(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e;try{var r=this.keySelector;e=r?r(t):t}catch(t){return this.destination.error(t)}var n=!1;if(this.hasKey)try{n=(0,this.compare)(this.key,e)}catch(t){return this.destination.error(t)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))},e}(Ae);function Sn(t,e){return wn((function(r,n){return e?e(r[t],n[t]):r[t]===n[t]}))}function xn(t){return void 0===t&&(t=Cn),function(e){return e.lift(new $n(t))}}var $n=function(){function t(t){this.errorFactory=t}return t.prototype.call=function(t,e){return e.subscribe(new In(t,this.errorFactory))},t}(),In=function(t){function e(e,r){var n=t.call(this,e)||this;return n.errorFactory=r,n.hasValue=!1,n}return $e(e,t),e.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)},e}(Ae);function Cn(){return new Sr}function Tn(t){return function(e){return 0===t?ar():e.lift(new _n(t))}}var _n=function(){function t(t){if(this.total=t,this.total<0)throw new Pr}return t.prototype.call=function(t,e){return e.subscribe(new En(t,this.total))},t}(),En=function(t){function e(e,r){var n=t.call(this,e)||this;return n.total=r,n.count=0,n}return $e(e,t),e.prototype._next=function(t){var e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))},e}(Ae);function Rn(t,e){var r=arguments.length>=2;return function(n){return n.pipe(t?Jr((function(e,r){return t(e,r,n)})):Ge,Tn(1),r?ln(e):xn((function(){return new Sr})))}}function Fn(t){return function(e){return e.lift(new kn(t))}}var kn=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new Dn(t,this.value))},t}(),Dn=function(t){function e(e,r){var n=t.call(this,e)||this;return n.value=r,n}return $e(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(Ae);var Vn=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var r=this.selector,n=this.subjectFactory(),i=r(n).subscribe(t);return i.add(e.subscribe(n)),i},t}();function Ln(t,e,r,n){r&&"function"!=typeof r&&(n=r);var i="function"==typeof r?r:void 0,o=new br(t,e,n);return function(t){return function(t,e){return function(r){var n;if(n="function"==typeof t?t:function(){return t},"function"==typeof e)return r.lift(new Vn(n,e));var i=Object.create(r,tr);return i.source=r,i.subjectFactory=n,i}}((function(){return o}),i)(t)}}function An(t){return void 0===t&&(t=-1),function(e){return e.lift(new Nn(t,e))}}var Nn=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Mn(t,this.count,this.source))},t}(),Mn=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.count=r,i.source=n,i}return $e(e,t),e.prototype.error=function(e){if(!this.isStopped){var r=this.source,n=this.count;if(0===n)return t.prototype.error.call(this,e);n>-1&&(this.count=n-1),r.subscribe(this._unsubscribeAndRecycle())}},e}(Ae);function Gn(t){return function(e){return e.lift(new Un(t))}}var Un=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new zn(t,this.notifier))},t}(),zn=function(t){function e(e,r){var n=t.call(this,e)||this;n.hasValue=!1;var i=new Nr(n);n.add(i),n.innerSubscription=i;var o=Gr(r,i);return o!==i&&(n.add(o),n.innerSubscription=o),n}return $e(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(Mr);function Zn(t){return function(e){return e.lift(new Bn(t))}}var Bn=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new Wn(t,this.predicate))},t}(),Wn=function(t){function e(e,r){var n=t.call(this,e)||this;return n.predicate=r,n.skipping=!0,n.index=0,n}return $e(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},e}(Ae);function Yn(t,e){return"function"==typeof e?function(r){return r.pipe(Yn((function(r,n){return Ar(t(r,n)).pipe($r((function(t,i){return e(r,t,n,i)})))})))}:function(e){return e.lift(new qn(t))}}var qn=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new Xn(t,this.project))},t}(),Xn=function(t){function e(e,r){var n=t.call(this,e)||this;return n.project=r,n.index=0,n}return $e(e,t),e.prototype._next=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this._innerSub(e)},e.prototype._innerSub=function(t){var e=this.innerSubscription;e&&e.unsubscribe();var r=new Nr(this),n=this.destination;n.add(r),this.innerSubscription=Gr(t,r),this.innerSubscription!==r&&n.add(this.innerSubscription)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t){this.destination.next(t)},e}(Mr);function Hn(t,e,r){return function(n){return n.lift(new Jn(t,e,r))}}var Jn=function(){function t(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}return t.prototype.call=function(t,e){return e.subscribe(new Kn(t,this.nextOrObserver,this.error,this.complete))},t}(),Kn=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o._tapNext=jr,o._tapError=jr,o._tapComplete=jr,o._tapError=n||jr,o._tapComplete=i||jr,Ie(r)?(o._context=o,o._tapNext=r):r&&(o._context=r,o._tapNext=r.next||jr,o._tapError=r.error||jr,o._tapComplete=r.complete||jr),o}return $e(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(Ae);var Qn=function(){function t(t,e,r,n){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=r,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new ti(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),ti=function(t){function e(e,r,n,i,o){var s=t.call(this,e)||this;return s.absoluteTimeout=r,s.waitFor=n,s.withObservable=i,s.scheduler=o,s.scheduleTimeout(),s}return $e(e,t),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(Gr(e,new Nr(t)))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},e}(Mr);function ei(t,e){return void 0===e&&(e=wr),function(t,e,r){return void 0===r&&(r=wr),function(n){var i=dn(t),o=i?+t-r.now():Math.abs(t);return n.lift(new Qn(o,i,e,r))}}(t,pr(new xr),e)}function ri(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=N(t);if(e){var i=N(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return A(this,r)}}var ni=function(t){F(r,t);var e=ri(r);function r(t){var n;return _(this,r),T(E(n=e.call(this,t)),"name","WaitCancelError"),bt(Error.captureStackTrace)?Error.captureStackTrace(E(n),n.constructor):n.stack=new Error(t).stack,n}return r}(U(Error)),ii=function(t){F(r,t);var e=ri(r);function r(t){var n;return _(this,r),T(E(n=e.call(this,t)),"name","WaitTimeoutError"),bt(Error.captureStackTrace)?Error.captureStackTrace(E(n),n.constructor):n.stack=new Error(t).stack,n}return r}(U(Error));function oi(t,e,r){var n=function(t){return!t},i=Yr(1e3/60).pipe(bt(t)?Zn(lt(t)):Gn(t.pipe(Zn(n))),Rn()),o=Hr;e&&(o=Yr(1e3/60).pipe(bt(e)?Zn(lt(e)):Gn(e.pipe(Zn(n))),Rn(),Yn((function(){return pr(new ni("wait canceled"))}))));var s,u=tn(i,o);return r>0&&(u=u.pipe(ei(r))),u.pipe((s=function(t){throw"TimeoutError"===t.name&&(t=new ii("wait timed out")),t},function(t){var e=new nn(s),r=t.lift(e);return e.caught=r})).toPromise()}var si,ui=Object.freeze({__proto__:null,IdentityMap:ue,sequential:function(t){return be(B.mark((function e(){var r,n=arguments;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._execPromise){e.next=3;break}return e.next=3,t._execPromise;case 3:return t._execPromise=Promise.resolve(t.call.apply(t,[this].concat(Array.prototype.slice.call(n)))),e.next=6,t._execPromise;case 6:return r=e.sent,delete t._execPromise,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})))},mergeDescriptors:je,waitFor:oi,WaitCancelError:ni,WaitTimeoutError:ii,AssertionError:re,assert:ne,numeric:function(t,e){ne(Ot(t),e||"value is a number")},instanceOf:ie,log:he,warn:fe,error:de,encode:function(t){return JSON.stringify(t)},newLogger:pe,makeLog:ve,makeWarn:ge,makeError:me,noop:it,constant:ot,stubArray:st,stubObject:ut,stubCollection:function(){return new t.Collection},stubTrue:at,stubFalse:function(){return!1},identity:ct,negate:lt,or:ht,and:ft,toArray:function(t){return Array.from(t)},isBoolean:dt,isNumber:pt,isString:vt,isArray:gt,isArrayLike:mt,isCollection:yt,isFinite:function(t){return"number"==typeof t&&Y(t)},isFunction:bt,isNumeric:Ot,isObjectLike:wt,isPlainObject:jt,round:Pt,coalesce:St,plainProps:function(t){var e={};return Object.keys(t).forEach((function(r){var n;(Ot(n=t[r])||vt(n)||gt(n)||dt(n)||jt(n))&&(e[r]=t[r])})),e},replaceTokens:xt,isEqual:$t,getLength:It,isEmpty:Ct,keys:Tt,values:function(t){return Object.values(t)},seal:_t,freeze:Et,sealFactory:Rt,freezeFactory:function(t){var e=t;return e.freezed||((e=function(){return Et(t.apply(void 0,arguments))}).freezed=!0),e},forEach:Ft,reduce:kt,filter:Dt,find:Vt,map:Lt,mapValues:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;return Lt(t,e)},mapKeys:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;return kt(t,(function(t,r,n){return t[e(r,n)]=r,t}),mt(t)||yt(t)?[]:{})},every:At,some:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;return kt(t,(function(t,r,n){return t||e(r,n)}),!1)},firstEl:function(t){if(yt(t)&&(t=t.getArray()),mt(t))return t[0]},lastEl:function(t){if(yt(t)&&(t=t.getArray()),mt(t))return t[t.length-1]},pick:Nt,omit:Mt,upperFirst:Gt,lowerFirst:Ut,rangeIterator:zt,range:Zt,get:Bt,hasOwnProp:function(t,e){return wt(t)&&J.call(t,e)},hasProp:Wt,includes:Yt,difference:qt,camelCase:Xt,kebabCase:Ht,serialize:Jt,unserialize:Kt,clonePlainObject:Qt,addPrefix:te,makeWatchers:Pe,extractChildren:Se}),ai=new Uint8Array(16);function ci(){if(!si&&!(si="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return si(ai)}var li=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function hi(t){return"string"==typeof t&&li.test(t)}for(var fi=[],di=0;di<256;++di)fi.push((di+256).toString(16).substr(1));function pi(t,e,r){var n=(t=t||{}).random||(t.rng||ci)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=n[i];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(fi[t[e+0]]+fi[t[e+1]]+fi[t[e+2]]+fi[t[e+3]]+"-"+fi[t[e+4]]+fi[t[e+5]]+"-"+fi[t[e+6]]+fi[t[e+7]]+"-"+fi[t[e+8]]+fi[t[e+9]]+"-"+fi[t[e+10]]+fi[t[e+11]]+fi[t[e+12]]+fi[t[e+13]]+fi[t[e+14]]+fi[t[e+15]]).toLowerCase();if(!hi(r))throw TypeError("Stringified UUID is invalid");return r}(n)}function vi(t){if(t instanceof n.Control)return t.get("id");throw new Error("Illegal control argument")}function gi(t,e){if(t instanceof n.Control)return t.set("id",e),t;throw new Error("Illegal control argument")}function mi(t,e){return null==vi(t)&&gi(t,e||pi()),t}var yi={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},bi=-1;function Oi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;if(t)return t.map((function(t){return Pt(t,e)}))}function wi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;if(t)return t.map((function(t){return Pt(t,e)}))}function ji(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;if(t)return t.map((function(t){return wi(t,e)}))}function Pi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;if(t)return t.map((function(t){return ji(t,e)}))}function Si(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;if(t)return t.map((function(t){return Pi(t,e)}))}function xi(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bi;switch(t){case yi.POINT:case yi.CIRCLE:return wi(e,r);case yi.LINE_STRING:case yi.MULTI_POINT:return ji(e,r);case yi.POLYGON:case yi.MULTI_LINE_STRING:return Pi(e,r);case yi.MULTI_POLYGON:return Si(e,r)}}function $i(t,e){return!!$t(t.extent,e.extent)&&$t(t.coordinates,e.coordinates)}function Ii(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=r*r+n*n;return Pt(Math.sqrt(i),bi)}var Ci=ft(gt,(function(t){return t.length>=2}),(function(t){return At(t,pt)})),Ti=ft(gt,(function(t){return t.length>=0}),(function(t){return At(t,Ci)})),_i=ft(gt,(function(t){return t.length>=0}),(function(t){return At(t,Ti)})),Ei=Ti,Ri=_i,Fi=ft(gt,(function(t){return t.length>=0}),(function(t){return At(t,_i)})),ki="bottom-left",Di="bottom-right",Vi="top-left",Li="top-right";function Ai(t,e,r,n,i){return i?(i[0]=t,i[1]=e,i[2]=r,i[3]=n,i):[t,e,r,n]}function Ni(t,e){var r;return e===ki?r=i.getBottomLeft(t):e===Di?r=i.getBottomRight(t):e===Vi?r=i.getTopLeft(t):e===Li?r=i.getTopRight(t):ne(!1,"Invalid extent corner"),r}function Mi(t,e,r){return(Mi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}var Gi,Ui=6371008.8,zi={meters:Ui,metres:Ui,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:Ui/1852,inches:39.37*Ui,yards:5825721.287490856,feet:20902260.511392,radians:1,degrees:57.22891354143274};function Zi(t,e,r){if(!Xi(r=r||{}))throw new Error("options is invalid");var n=r.bbox,i=r.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&Hi(n),i&&Ji(i);var o={type:"Feature"};return i&&(o.id=i),n&&(o.bbox=n),o.properties=e||{},o.geometry=t,o}function Bi(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!qi(t[0])||!qi(t[1]))throw new Error("coordinates must contain numbers");return Zi({type:"Point",coordinates:t},e,r)}function Wi(t,e){if(!Xi(e=e||{}))throw new Error("options is invalid");var r=e.bbox,n=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");r&&Hi(r),n&&Ji(n);var i={type:"FeatureCollection"};return n&&(i.id=n),r&&(i.bbox=r),i.features=t,i}function Yi(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function qi(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Xi(t){return!!t&&t.constructor===Object}function Hi(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!qi(t))throw new Error("bbox must only contain numbers")}))}function Ji(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function Ki(t,e,r){if(null!==t)for(var n,i,o,s,u,a,c,l,h=0,f=0,d=t.type,p="FeatureCollection"===d,v="Feature"===d,g=p?t.features.length:1,m=0;m<g;m++){u=(l=!!(c=p?t.features[m].geometry:v?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var y=0;y<u;y++){var b=0,O=0;if(null!==(s=l?c.geometries[y]:c)){a=s.coordinates;var w=s.type;switch(h=!r||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(a,f,m,b,O))return!1;f++,b++;break;case"LineString":case"MultiPoint":for(n=0;n<a.length;n++){if(!1===e(a[n],f,m,b,O))return!1;f++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(n=0;n<a.length;n++){for(i=0;i<a[n].length-h;i++){if(!1===e(a[n][i],f,m,b,O))return!1;f++}"MultiLineString"===w&&b++,"Polygon"===w&&O++}"Polygon"===w&&b++;break;case"MultiPolygon":for(n=0;n<a.length;n++){for("MultiPolygon"===w&&(O=0),i=0;i<a[n].length;i++){for(o=0;o<a[n][i].length-h;o++){if(!1===e(a[n][i][o],f,m,b,O))return!1;f++}O++}b++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===Ki(s.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Qi(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function to(t){var e=[];return"FeatureCollection"===t.type?Qi(t,(function(t){Ki(t,(function(r){e.push(Bi(r,t.properties))}))})):Ki(t,(function(r){e.push(Bi(r,t.properties))})),Wi(e)}function eo(t,e){if(!Xi(e=e||{}))throw new Error("options is invalid");var r=e.properties;if(!t)throw new Error("geojson is required");var n=function(t){var e=[1/0,1/0,-1/0,-1/0];return Ki(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}(t);return Bi([(n[0]+n[2])/2,(n[1]+n[3])/2],r)}function ro(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return no(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(r){switch(r){case"type":case"features":return;default:e[r]=t[r]}})),e.features=t.features.map((function(t){return no(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return oo(t);default:throw new Error("unknown GeoJSON type")}}function no(t){var e={type:"Feature"};return Object.keys(t).forEach((function(r){switch(r){case"type":case"properties":case"geometry":return;default:e[r]=t[r]}})),e.properties=io(t.properties),e.geometry=oo(t.geometry),e}function io(t){var e={};return t?(Object.keys(t).forEach((function(r){var n=t[r];"object"==typeof n?null===n?e[r]=null:n.length?e[r]=n.map((function(t){return t})):e[r]=io(n):e[r]=n})),e):e}function oo(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return oo(t)})),e):(e.coordinates=so(t.coordinates),e)}function so(t){return"object"!=typeof t[0]?t.slice():t.map((function(t){return so(t)}))}function uo(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ao(t,e,r){if(!Xi(r=r||{}))throw new Error("options is invalid");var n=r.units,i=uo(t),o=uo(e),s=Yi(o[1]-i[1]),u=Yi(o[0]-i[0]),a=Yi(i[1]),c=Yi(o[1]),l=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(a)*Math.cos(c);return function(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var r=zi[e||"kilometers"];if(!r)throw new Error(e+" units is invalid");return t*r}(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),n)}function co(t,e,r){if("object"!=typeof(r=r||{}))throw new Error("options is invalid");var n=r.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=uo(t),o=function(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(e),s=e.geometry?e.geometry.type:e.type,u=e.bbox;if(u&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,u))return!1;"Polygon"===s&&(o=[o]);for(var a=0,c=!1;a<o.length&&!c;a++)if(lo(i,o[a][0],n)){for(var l=!1,h=1;h<o[a].length&&!l;)lo(i,o[a][h],!n)&&(l=!0),h++;l||(c=!0)}return c}function lo(t,e,r){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],u=e[i][1],a=e[o][0],c=e[o][1];if(t[1]*(s-a)+u*(a-t[0])+c*(t[0]-s)==0&&(s-t[0])*(a-t[0])<=0&&(u-t[1])*(c-t[1])<=0)return!r;u>t[1]!=c>t[1]&&t[0]<(a-s)*(t[1]-u)/(c-u)+s&&(n=!n)}return n}function ho(t){for(var e=function(t){if("FeatureCollection"!==t.type)return"Feature"!==t.type?Wi([Zi(t)]):Wi([t]);return t}(t),r=eo(e),n=!1,i=0;!n&&i<e.features.length;){var o,s=e.features[i].geometry,u=!1;if("Point"===s.type)r.geometry.coordinates[0]===s.coordinates[0]&&r.geometry.coordinates[1]===s.coordinates[1]&&(n=!0);else if("MultiPoint"===s.type){var a=!1;for(o=0;!a&&o<s.coordinates.length;)r.geometry.coordinates[0]===s.coordinates[o][0]&&r.geometry.coordinates[1]===s.coordinates[o][1]&&(n=!0,a=!0),o++}else if("LineString"===s.type)for(o=0;!u&&o<s.coordinates.length-1;)fo(r.geometry.coordinates[0],r.geometry.coordinates[1],s.coordinates[o][0],s.coordinates[o][1],s.coordinates[o+1][0],s.coordinates[o+1][1])&&(u=!0,n=!0),o++;else if("MultiLineString"===s.type)for(var c=0;c<s.coordinates.length;){u=!1,o=0;for(var l=s.coordinates[c];!u&&o<l.length-1;)fo(r.geometry.coordinates[0],r.geometry.coordinates[1],l[o][0],l[o][1],l[o+1][0],l[o+1][1])&&(u=!0,n=!0),o++;c++}else"Polygon"!==s.type&&"MultiPolygon"!==s.type||co(r,s)&&(n=!0);i++}if(n)return r;var h=Wi([]);for(i=0;i<e.features.length;i++)h.features=h.features.concat(to(e.features[i]).features);return Bi(function(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var r,n=1/0;return Qi(e,(function(e,i){var o=ao(t,e);o<n&&((r=ro(e)).properties.featureIndex=i,r.properties.distanceToPoint=o,n=o)})),r}(r,h).geometry.coordinates)}function fo(t,e,r,n,i,o){return Math.sqrt((i-r)*(i-r)+(o-n)*(o-n))===Math.sqrt((t-r)*(t-r)+(e-n)*(e-n))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function po(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function vo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?po(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):po(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function go(t,e){var r=Array.isArray(t)?t:[t,e];return new s.Point(r)}function mo(t,e){return a.circular(t,e)}function yo(t){t instanceof s.Circle?t=go(t.getCenter()):t.type===yi.CIRCLE&&(t=vo(vo({},t),{},{type:yi.POINT}));var e=t.type||t.getType();return!1===[yi.GEOMETRY_COLLECTION].includes(e)?t:(t.geometries||t.getGeometries())[0]}function bo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi,r=yo(t),n=ho({type:r.type||r.getType(),coordinates:r.coordinates||r.getCoordinates()});if(null!=n&&n.geometry)return xi(n.geometry.type,n.geometry.coordinates,e)}function Oo(t){if(t instanceof s.Geometry)return t.get("id");if(jt(t))return t.id;throw new Error("Illegal geometry argument")}function wo(t,e){if(t instanceof s.Geometry)return t.set("id",e),t;if(jt(t))return t.id=e,t;throw new Error("Illegal geometry argument")}function jo(t,e){return null==Oo(t)&&wo(t,e||pi()),t}function Po(t){return So(t)===yi.CIRCLE}function So(t){return t instanceof s.Geometry?t.getType():null==t?void 0:t.type}var xo="EPSG:4326",$o="EPSG:3857";function Io(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bi;if(t)return xi(yi.POINT,c.toLonLat(t,e),r)}function Co(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bi;if(t)return xi(yi.POINT,c.fromLonLat(t,e),r)}function To(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bi;if(t)return _o(t,e,r,n)}function _o(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bi;if(t){var i=c.transform(t,e,r);return i.some((function(t){return isNaN(t)}))&&(i=c.transform(c.transform(t,e,xo),xo,r)),xi(yi.POINT,i,n)}}function Eo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bi;if(t)return t.map((function(t){return Io(t,e,r)}))}function Ro(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bi;if(t)return t.map((function(t){return Co(t,e,r)}))}function Fo(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bi;if(t)return t.map((function(t){return To(t,e,r,n)}))}function ko(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bi;if(t)return t.map((function(t){return Eo(t,e,r)}))}function Do(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bi;if(t)return t.map((function(t){return Ro(t,e,r)}))}function Vo(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bi;if(t)return t.map((function(t){return Fo(t,e,r,n)}))}function Lo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bi;if(t)return t.map((function(t){return Io(t,e,r)}))}function Ao(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bi;if(t)return t.map((function(t){return Co(t,e,r)}))}function No(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bi;if(t)return t.map((function(t){return To(t,e,r,n)}))}function Mo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bi;if(t)return t.map((function(t){return Eo(t,e,r)}))}function Go(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bi;if(t)return t.map((function(t){return Ro(t,e,r)}))}function Uo(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bi;if(t)return t.map((function(t){return Fo(t,e,r,n)}))}function zo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bi;if(t)return t.map((function(t){return ko(t,e,r)}))}function Zo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bi;if(t)return t.map((function(t){return Do(t,e,r)}))}function Bo(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bi;if(t)return t.map((function(t){return Vo(t,e,r,n)}))}var Wo=(T(Gi={},yi.POINT,{toLonLat:Io,fromLonLat:Co,transform:To}),T(Gi,yi.LINE_STRING,{toLonLat:Eo,fromLonLat:Ro,transform:Fo}),T(Gi,yi.POLYGON,{toLonLat:ko,fromLonLat:Do,transform:Vo}),T(Gi,yi.MULTI_POINT,{toLonLat:Lo,fromLonLat:Ao,transform:No}),T(Gi,yi.MULTI_LINE_STRING,{toLonLat:Mo,fromLonLat:Go,transform:Uo}),T(Gi,yi.MULTI_POLYGON,{toLonLat:zo,fromLonLat:Zo,transform:Bo}),T(Gi,yi.CIRCLE,{toLonLat:Io,fromLonLat:Co,transform:To}),Gi);function Yo(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bi;if(t){if(t.every((function(t){return!isFinite(t)})))return t;var i=c.transformExtent(t,e,r);return i.some((function(t){return isNaN(t)}))&&(i=c.transformExtent(c.transformExtent(t,e,xo),xo,r)),Oi(i,n)}}function qo(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bi;if(t){var i=Fo([[0,0],[t,0]],e,r,n);return Ii(i[0],i[1])}}var Xo={rgb2hsl:Ho,rgb2hsv:Jo,rgb2hwb:Ko,rgb2cmyk:Qo,rgb2keyword:ts,rgb2xyz:es,rgb2lab:rs,rgb2lch:function(t){return ls(rs(t))},hsl2rgb:ns,hsl2hsv:function(t){var e=t[0],r=t[1]/100,n=t[2]/100;if(0===n)return[0,0,0];return[e,100*(2*(r*=(n*=2)<=1?n:2-n)/(n+r)),100*((n+r)/2)]},hsl2hwb:function(t){return Ko(ns(t))},hsl2cmyk:function(t){return Qo(ns(t))},hsl2keyword:function(t){return ts(ns(t))},hsv2rgb:is,hsv2hsl:function(t){var e,r,n=t[0],i=t[1]/100,o=t[2]/100;return e=i*o,[n,100*(e=(e/=(r=(2-i)*o)<=1?r:2-r)||0),100*(r/=2)]},hsv2hwb:function(t){return Ko(is(t))},hsv2cmyk:function(t){return Qo(is(t))},hsv2keyword:function(t){return ts(is(t))},hwb2rgb:os,hwb2hsl:function(t){return Ho(os(t))},hwb2hsv:function(t){return Jo(os(t))},hwb2cmyk:function(t){return Qo(os(t))},hwb2keyword:function(t){return ts(os(t))},cmyk2rgb:ss,cmyk2hsl:function(t){return Ho(ss(t))},cmyk2hsv:function(t){return Jo(ss(t))},cmyk2hwb:function(t){return Ko(ss(t))},cmyk2keyword:function(t){return ts(ss(t))},keyword2rgb:ds,keyword2hsl:function(t){return Ho(ds(t))},keyword2hsv:function(t){return Jo(ds(t))},keyword2hwb:function(t){return Ko(ds(t))},keyword2cmyk:function(t){return Qo(ds(t))},keyword2lab:function(t){return rs(ds(t))},keyword2xyz:function(t){return es(ds(t))},xyz2rgb:us,xyz2lab:as,xyz2lch:function(t){return ls(as(t))},lab2xyz:cs,lab2rgb:hs,lab2lch:ls,lch2lab:fs,lch2xyz:function(t){return cs(fs(t))},lch2rgb:function(t){return hs(fs(t))}};function Ho(t){var e,r,n=t[0]/255,i=t[1]/255,o=t[2]/255,s=Math.min(n,i,o),u=Math.max(n,i,o),a=u-s;return u==s?e=0:n==u?e=(i-o)/a:i==u?e=2+(o-n)/a:o==u&&(e=4+(n-i)/a),(e=Math.min(60*e,360))<0&&(e+=360),r=(s+u)/2,[e,100*(u==s?0:r<=.5?a/(u+s):a/(2-u-s)),100*r]}function Jo(t){var e,r,n=t[0],i=t[1],o=t[2],s=Math.min(n,i,o),u=Math.max(n,i,o),a=u-s;return r=0==u?0:a/u*1e3/10,u==s?e=0:n==u?e=(i-o)/a:i==u?e=2+(o-n)/a:o==u&&(e=4+(n-i)/a),(e=Math.min(60*e,360))<0&&(e+=360),[e,r,u/255*1e3/10]}function Ko(t){var e=t[0],r=t[1],n=t[2];return[Ho(t)[0],100*(1/255*Math.min(e,Math.min(r,n))),100*(n=1-1/255*Math.max(e,Math.max(r,n)))]}function Qo(t){var e,r=t[0]/255,n=t[1]/255,i=t[2]/255;return[100*((1-r-(e=Math.min(1-r,1-n,1-i)))/(1-e)||0),100*((1-n-e)/(1-e)||0),100*((1-i-e)/(1-e)||0),100*e]}function ts(t){return vs[JSON.stringify(t)]}function es(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*e+.7152*r+.0722*n),100*(.0193*e+.1192*r+.9505*n)]}function rs(t){var e=es(t),r=e[0],n=e[1],i=e[2];return n/=100,i/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(r-n),200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]}function ns(t){var e,r,n,i,o,s=t[0]/360,u=t[1]/100,a=t[2]/100;if(0==u)return[o=255*a,o,o];e=2*a-(r=a<.5?a*(1+u):a+u-a*u),i=[0,0,0];for(var c=0;c<3;c++)(n=s+1/3*-(c-1))<0&&n++,n>1&&n--,o=6*n<1?e+6*(r-e)*n:2*n<1?r:3*n<2?e+(r-e)*(2/3-n)*6:e,i[c]=255*o;return i}function is(t){var e=t[0]/60,r=t[1]/100,n=t[2]/100,i=Math.floor(e)%6,o=e-Math.floor(e),s=255*n*(1-r),u=255*n*(1-r*o),a=255*n*(1-r*(1-o));n*=255;switch(i){case 0:return[n,a,s];case 1:return[u,n,s];case 2:return[s,n,a];case 3:return[s,u,n];case 4:return[a,s,n];case 5:return[n,s,u]}}function os(t){var e,n,i,o,s=t[0]/360,u=t[1]/100,a=t[2]/100,c=u+a;switch(c>1&&(u/=c,a/=c),i=6*s-(e=Math.floor(6*s)),0!=(1&e)&&(i=1-i),o=u+i*((n=1-a)-u),e){default:case 6:case 0:r=n,g=o,b=u;break;case 1:r=o,g=n,b=u;break;case 2:r=u,g=n,b=o;break;case 3:r=u,g=o,b=n;break;case 4:r=o,g=u,b=n;break;case 5:r=n,g=u,b=o}return[255*r,255*g,255*b]}function ss(t){var e=t[0]/100,r=t[1]/100,n=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i))]}function us(t){var e,r,n,i=t[0]/100,o=t[1]/100,s=t[2]/100;return r=-.9689*i+1.8758*o+.0415*s,n=.0557*i+-.204*o+1.057*s,e=(e=3.2406*i+-1.5372*o+-.4986*s)>.0031308?1.055*Math.pow(e,1/2.4)-.055:e*=12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,[255*(e=Math.min(Math.max(0,e),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]}function as(t){var e=t[0],r=t[1],n=t[2];return r/=100,n/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(e-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]}function cs(t){var e,r,n,i,o=t[0],s=t[1],u=t[2];return o<=8?i=(r=100*o/903.3)/100*7.787+16/116:(r=100*Math.pow((o+16)/116,3),i=Math.pow(r/100,1/3)),[e=e/95.047<=.008856?e=95.047*(s/500+i-16/116)/7.787:95.047*Math.pow(s/500+i,3),r,n=n/108.883<=.008859?n=108.883*(i-u/200-16/116)/7.787:108.883*Math.pow(i-u/200,3)]}function ls(t){var e,r=t[0],n=t[1],i=t[2];return(e=360*Math.atan2(i,n)/2/Math.PI)<0&&(e+=360),[r,Math.sqrt(n*n+i*i),e]}function hs(t){return us(cs(t))}function fs(t){var e,r=t[0],n=t[1];return e=t[2]/360*2*Math.PI,[r,n*Math.cos(e),n*Math.sin(e)]}function ds(t){return ps[t]}var ps={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},vs={};for(var gs in ps)vs[JSON.stringify(ps[gs])]=gs;var ms=function(){return new js};for(var ys in Xo){ms[ys+"Raw"]=function(t){return function(e){return"number"==typeof e&&(e=Array.prototype.slice.call(arguments)),Xo[t](e)}}(ys);var bs=/(\w+)2(\w+)/.exec(ys),Os=bs[1],ws=bs[2];(ms[Os]=ms[Os]||{})[ws]=ms[ys]=function(t){return function(e){"number"==typeof e&&(e=Array.prototype.slice.call(arguments));var r=Xo[t](e);if("string"==typeof r||void 0===r)return r;for(var n=0;n<r.length;n++)r[n]=Math.round(r[n]);return r}}(ys)}var js=function(){this.convs={}};js.prototype.routeSpace=function(t,e){var r=e[0];return void 0===r?this.getValues(t):("number"==typeof r&&(r=Array.prototype.slice.call(e)),this.setValues(t,r))},js.prototype.setValues=function(t,e){return this.space=t,this.convs={},this.convs[t]=e,this},js.prototype.getValues=function(t){var e=this.convs[t];if(!e){var r=this.space,n=this.convs[r];e=ms[r][t](n),this.convs[t]=e}return e},["rgb","hsl","hsv","cmyk","keyword"].forEach((function(t){js.prototype[t]=function(e){return this.routeSpace(t,arguments)}}));var Ps=ms;function Ss(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xs(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ss(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ss(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $s(t){return t instanceof l.Style||t instanceof l.Image||t instanceof l.Fill||t instanceof l.Stroke||t instanceof l.Text||t instanceof Function}function Is(t){if($s(t))return t.id;throw new Error("Illegal style argument")}function Cs(t,e){if($s(t))return t.id=e,t;throw new Error("Illegal style argument")}function Ts(t,e){return null==Is(t)&&Cs(t,e||pi()),t}var _s=function(t){return null==t||"number"!=typeof t&&(("string"==typeof t||Array.isArray(t))&&!t.length||!Object.keys(t).length)};function Es(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;if(!_s(t)){var r={text:Vs(t,"text"),fill:Fs(t,"fill"),stroke:ks(t,"stroke"),image:Ds(t,"image"),geometry:Ls(t,e),zIndex:t.zIndex,renderer:t.renderer};return _s(r)?void 0:new l.Style(r)}}function Rs(t){var e=t;return"string"==typeof t&&(e=function(t){var e,r,n,i;if(e=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(t)){var o=e[1],s="cmyk"===(u=o.replace(/a$/,""))?4:3;r=Ps[u],n=e[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map((function(t,e){return/%$/.test(t)&&e===s?parseFloat(t)/100:(/%$/.test(t),parseFloat(t))})),o===u&&n.push(1),i=void 0===n[s]?1:n[s],n=n.slice(0,s),r[u]=function(){return n}}else if(/^#[A-Fa-f0-9]+$/.test(t)){var u;s=(u=t.replace(/^#/,"")).length,r=Ps.rgb,n=(n=u.split(3===s?/(.)/:/(..)/)).filter(Boolean).map((function(t){return 3===s?parseInt(t+t,16):parseInt(t,16)})),i=1,r.rgb=function(){return n},n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0)}else(r=Ps.keyword).keyword=function(){return t},n=t,i=1;var a={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{a.rgb=r.rgb(n)}catch(t){}try{a.hsl=r.hsl(n)}catch(t){}try{a.hsv=r.hsv(n)}catch(t){}try{a.cmyk=r.cmyk(n)}catch(t){}try{a.keyword=r.keyword(n)}catch(t){}return a.rgb&&(a.hex="#"+a.rgb.map((function(t){var e=t.toString(16);return 1===e.length?"0"+e:e})).join("")),a.rgb&&(a.rgba=a.rgb.concat(i)),a.hsl&&(a.hsla=a.hsl.concat(i)),a.hsv&&(a.hsva=a.hsv.concat(i)),a.cmyk&&(a.cmyka=a.cmyk.concat(i)),a}(t).rgba),e}function Fs(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=te(e);if(t[r()]instanceof l.Fill)return t[r()];var n=["color"].reduce((function(t,e){return xs(xs({},t),{},T({},r(e),e))}),{}),i=kt(t,(function(t,e,r){if(!n[r]||null==e)return t;switch(n[r]){case"color":e=Rs(e)}return t[n[r]]=e,t}),{});return _s(i)?void 0:new l.Fill(i)}function ks(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=te(e);if(t[r()]instanceof l.Stroke)return t[r()];var n=["color","width","miterLimit","lineCap","lineJoin","lineDash","lineDashOffset"].reduce((function(t,e){return xs(xs({},t),{},T({},r(e),e))}),{}),i=kt(t,(function(t,e,r){if(!n[r]||null==e)return t;switch(n[r]){case"color":e=Rs(e)}return t[n[r]]=e,t}),{});return _s(i)?void 0:new l.Stroke(i)}function Ds(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=te(n);if(!(_s(t[i("src")])&&_s(t.image)&&_s(t[i("points")]))||Ot(t[i("radius")]))return t.image instanceof l.Image?t.image:(_s(t[i("src")])&&_s(t.image)?null!=t[i("points")]?(r=l.RegularShape,e={points:t[i("points")],radius:t[i("radius")],radius1:t[i("radius1")],radius2:t[i("radius2")],angle:t[i("angle")]}):(r=l.Circle,e={radius:t[i("radius")]}):(r=l.Icon,e={anchor:t[i("anchor")],anchorOrigin:t[i("anchorOrigin")],anchorXUnits:t[i("anchorXUnits")],anchorYUnits:t[i("anchorYUnits")],color:t[i("color")],offset:t[i("offset")],offsetOrigin:t[i("offsetOrigin")],size:t[i("size")],img:t.image,imgSize:t[i("imgSize")],src:t[i("src")],crossOrigin:t[i("crossOrigin")]}),e=xs(xs({},e),{},{fill:Fs(t,i("fill")),stroke:ks(t,i("stroke")),opacity:t[i("opacity")],scale:t[i("scale")],rotation:t[i("rotation")],rotateWithView:t[i("rotateWithView")],displacement:t[i("displacement")]}),_s(e)?void 0:new r(e))}function Vs(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(null!=t.text){if(t.text instanceof l.Text)return t.text;var r=te(e),n={text:t.text,textAlign:t.textAlign,textBaseline:t.textBaseline,font:t[r("font")],scale:t[r("scale")],offsetX:t[r("offsetX")],offsetY:t[r("offsetY")],rotation:t[r("rotation")],rotateWithView:t[r("rotateWithView")],padding:t[r("padding")],maxAngle:t[r("maxAngle")],overflow:t[r("overflow")],placement:t[r("placement")],fill:Fs(t,r("fill")),stroke:ks(t,r("stroke")),backgroundFill:Fs(t,r("backgroundFill")),backgroundStroke:ks(t,r("backgroundStroke"))};return _s(n)?void 0:new l.Text(n)}}function Ls(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;return bt(t.geom)?function(e){return t.geom(e)}:t.geom instanceof s.Geometry?t.geom:t.geom?e(t.geom):null}function As(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;if(t&&!bt(t))return xs(xs(xs(xs(xs(xs({},Ns(t.getFill(),"fill")),Ms(t.getStroke(),"stroke")),Gs(t.getImage(),"image")),Us(t.getText(),"text")),zs(t.getGeometry(),e)),{},{zIndex:t.getZIndex()})}function Ns(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!t)return{};var r=te(e);return T({},r("color"),t.getColor())}function Ms(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!t)return{};var n=te(r);return T(e={},n("color"),t.getColor()),T(e,n("width"),t.getWidth()),T(e,n("miterLimit"),t.getMiterLimit()),T(e,n("lineCap"),t.getLineCap()),T(e,n("lineJoin"),t.getLineJoin()),T(e,n("lineDash"),t.getLineDash()),T(e,n("lineDashOffset"),t.getLineDashOffset()),e}function Gs(t){var e,r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!t)return{};var o=te(i),s=(T(e={},o("opacity"),t.getOpacity()),T(e,o("scale"),t.getScale()),T(e,o("rotation"),t.getRotation()),T(e,o("rotateWithView"),t.getRotateWithView()),T(e,o("displacement"),t.getDisplacement()),e);switch(!0){case t instanceof l.Icon:return xs(xs({},s),{},(T(r={},o("anchor"),t.anchor_.slice()),T(r,o("anchorOrigin"),t.anchorOrigin_),T(r,o("anchorXUnits"),t.anchorXUnits_),T(r,o("anchorYUnits"),t.anchorYUnits_),T(r,o("color"),gt(t.getColor())?t.getColor().slice():t.getColor()),T(r,o("offset"),t.offset_.slice()),T(r,o("offsetOrigin"),t.offsetOrigin_),T(r,o("size"),gt(t.getSize())?t.getSize().slice():t.getSize()),T(r,o("src"),t.getSrc()),T(r,o("crossOrigin"),t.crossOrigin_),r));case t instanceof l.Circle:return xs(xs(xs(xs({},s),Ns(t.getFill(),o("fill"))),Ms(t.getStroke(),o("stroke"))),{},T({},o("radius"),t.getRadius()));case t instanceof l.RegularShape:return xs(xs(xs(xs({},s),Ns(t.getFill(),o("fill"))),Ms(t.getStroke(),o("stroke"))),{},(T(n={},o("points"),t.getPoints()),T(n,o("radius"),t.getRadius()),T(n,o("radius2"),t.getRadius2()),T(n,o("angle"),t.getAngle()),n));default:return xs({},s)}}function Us(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!t)return{};var n=te(r);return Dt(xs(xs(xs(xs((T(e={text:t.getText(),textAlign:t.getTextAlign(),textBaseline:t.getTextBaseline()},n("font"),t.getFont()),T(e,n("scale"),t.getScale()),T(e,n("rotation"),t.getRotation()),T(e,n("offsetX"),t.getOffsetX()),T(e,n("offsetY"),t.getOffsetY()),T(e,n("rotateWithView"),t.getRotateWithView()),T(e,n("padding"),t.getPadding()),T(e,n("maxAngle"),t.getMaxAngle()),T(e,n("overflow"),t.getOverflow()),T(e,n("placement"),t.getPlacement()),e),Ns(t.getFill(),n("fill"))),Ms(t.getStroke(),n("stroke"))),Ns(t.getBackgroundFill(),n("backgroundFill"))),Ms(t.getBackgroundStroke(),n("backgroundStroke"))),(function(t){return null!=t}))}function zs(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;return t?{geom:e(t)}:{}}function Zs(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Bs(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zs(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zs(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ws(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=N(t);if(e){var i=N(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return A(this,r)}}function Ys(t){return new Js(t)}function qs(t){return new o.MVT(t)}var Xs="vl_circle",Hs="vl_style",Js=function(e){F(n,e);var r=Ws(n);function n(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _(this,n),(t=r.call(this,e)).defaultDecimals=null!=e.decimals&&e.decimals>-1?e.decimals:void 0,t.defaultStyleReader=e.styleReader||it,t.defaultStyleWriter=e.styleWriter||it,t}return se(n,[{key:"adaptOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!=t.decimals&&t.decimals<0&&(t.decimals=void 0),Mi(N(n.prototype),"adaptOptions",this).call(this,Bs({decimals:this.defaultDecimals,styleReader:this.defaultStyleReader,styleWriter:this.defaultStyleWriter},t))}},{key:"writeGeometryObject",value:function(t,e){if(e=this.adaptOptions(e),Po(t)){var r=t.getCenter().slice(),i=[r[0]+t.getRadius(),r[1]],o=u.getLength(new s.LineString([r,i]),e.featureProjection);t=mo(r=To(r,e.featureProjection,xo),o),e.featureProjection=xo}return Mi(N(n.prototype),"writeGeometryObject",this).call(this,t,e)}},{key:"writeFeatureObject",value:function(e,r){var n=this;r=this.adaptOptions(r);var i={type:"Feature",geometry:null,properties:null},o=e.getId();void 0!==o&&(i.id=o);var s=e.getGeometry();s&&(i.geometry=this.writeGeometryObject(s,r),Po(s)&&(i.properties=Bs(Bs({},i.properties||{}),{},T({},Xs,{center:To(s.getCenter(),r.featureProjection,r.dataProjection),radius:qo(s.getRadius(),r.featureProjection,r.dataProjection)}))));var u=e.getProperties();delete u[e.getGeometryName()],function(t){var e;for(e in t)return!1;return!e}(u)||(i.properties=Bs(Bs({},i.properties||{}),Qt(Mt(u,"features"))),gt(u.features)&&(i.properties.features=Lt(u.features,(function(e){return e instanceof t.Feature?n.writeFeatureObject(e,r):e}))));var a=e.getStyle();return a&&!bt(a)&&(gt(a)||(a=[a]),i.properties=Bs(Bs({},i.properties||{}),{},T({},Hs,a.map((function(t){return r.styleWriter(t,(function(t){return n.writeGeometryObject(t,r)}))}))))),i}},{key:"readFeatureFromObject",value:function(e,r){var n,i=this;r=this.adaptOptions(r),n="Feature"===e.type?Qt(e):{type:"Feature",geometry:Qt(e),properties:null};var o=new t.Feature;n.properties&&n.properties.vl_circle&&(r.circle=n.properties.vl_circle,delete n.properties.vl_circle);var s=this.readGeometryFromObject(n.geometry,r);if(this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in n!==void 0&&o.setGeometryName(n.geometry_name),o.setGeometry(s),"id"in n&&o.setId(n.id),n.properties){if(n.properties.vl_style){var u=n.properties.vl_style;gt(u)||(u=[u]),o.setStyle(u.map((function(t){return r.styleReader(t,(function(t){return i.readGeometryFromObject(t,Mt(r,["circle"]))}))}))),delete n.properties.vl_style}gt(n.properties.features)&&(n.properties.features=Lt(n.properties.features,(function(t){return iu(t)?i.readFeatureFromObject(t,r):t}))),o.setProperties(n.properties,!0)}return o}},{key:"readGeometryFromObject",value:function(t,e){var r,i;return null!==(r=(e=this.adaptOptions(e)).circle)&&void 0!==r&&r.center&&null!==(i=e.circle)&&void 0!==i&&i.radius?new s.Circle(To(e.circle.center,e.dataProjection,e.featureProjection),qo(e.circle.radius,e.dataProjection,e.featureProjection)):Mi(N(n.prototype),"readGeometryFromObject",this).call(this,Qt(t),e)}}]),n}(o.GeoJSON);function Ks(){return Ys({decimals:bi,styleReader:Es,styleWriter:As})}function Qs(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xo,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bi;if(t)return Ks().writeFeatureObject(t,{featureProjection:e,dataProjection:r,decimals:n})}function tu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xo,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bi;if(t)return Ks().readFeature(t,{featureProjection:e,dataProjection:r,decimals:n})}function eu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xo,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bi;if(t)return Ks().writeGeometryObject(t,{featureProjection:e,dataProjection:r,decimals:n})}function ru(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xo,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bi;if(t)return r=nu(t,r),Ks().readGeometry(t,{featureProjection:e,dataProjection:r,decimals:n})}function nu(t,e){return Ks().readProjection(t)||e}function iu(t){return jt(t)&&"Feature"===t.type&&ou(t.geometry)}function ou(t){return jt(t)&&Object.values(yi).includes(t.type)&&gt(t.coordinates)}function su(e){if(e instanceof t.Feature)return e.getId();if(jt(e))return e.id;throw new Error("Illegal feature format")}function uu(e,r){if(e instanceof t.Feature)return e.setId(r),e;if(jt(e))return e.id=r,e;throw new Error("Illegal feature format")}function au(t,e){return null==su(t)&&uu(t,e||pi()),t}function cu(e){return e instanceof t.Feature?e.getGeometryName():"geometry"}function lu(e){if(e)return Mt((e instanceof t.Feature?e.getProperties():e.properties)||{},[cu(e),Xs,Hs])}function hu(e,r){e&&(r=Mt(r||{},[cu(e),Xs,Hs]),e instanceof t.Feature?e.setProperties(r):e.properties=r)}function fu(t){if(t instanceof h.Interaction)return t.get("id");throw new Error("Illegal interaction argument")}function du(t,e){if(t instanceof h.Interaction)return t.set("id",e),t;throw new Error("Illegal interaction argument")}function pu(t){if(t instanceof h.Interaction)return t.get("priority");throw new Error("Illegal interaction argument")}function vu(t,e){if(t instanceof h.Interaction)return t.set("priority",e),t;throw new Error("Illegal interaction argument")}function gu(t,e,r){return null==fu(t)&&du(t,e||pi()),null==pu(t)&&vu(t,r||0),t}function mu(t){if(t instanceof x.default)return t.get("id");throw new Error("Illegal layer argument")}function yu(t,e){if(t instanceof x.default)return t.set("id",e),t;throw new Error("Illegal layer argument")}function bu(t,e){return null==mu(t)&&yu(t,e||pi()),t}function Ou(e){if(e instanceof t.PluggableMap)return e.get("id");throw new Error("Illegal map argument")}function wu(e,r){if(e instanceof t.PluggableMap)return e.set("id",r),e;throw new Error("Illegal map argument")}function ju(e){if(e instanceof t.PluggableMap)return e.get("dataProjection");throw new Error("Illegal map argument")}function Pu(e,r){if(e instanceof t.PluggableMap)return e.set("dataProjection",r),e;throw new Error("Illegal map argument")}function Su(e){if(e instanceof t.Overlay)return e.get("id");throw new Error("Illegal overlay argument")}function xu(e,r){if(e instanceof t.Overlay)return e.set("id",r),e;throw new Error("Illegal overlay argument")}function $u(t,e){return null==Su(t)&&xu(t,e||pi()),t}function Iu(t){if(t instanceof e.Source)return t.get("id");throw new Error("Illegal source argument")}function Cu(t,r){if(t instanceof e.Source)return t.set("id",r),t;throw new Error("Illegal source argument")}function Tu(t,e){return null==Iu(t)&&Cu(t,e||pi()),t}function _u(t,e){return kt(t,(function(t,r,n){return n=n.toUpperCase(),e.includes(n)||(t[n]=r),t}),{})}var Eu="degrees",Ru="ft",Fu="m",ku="us-ft",Du={};function Vu(t){var e=(t=c.get(t)).getExtent();if(!e){var r=180*Du[Eu]/t.getMetersPerUnit();e=Ai(-r,-r,r,r)}return e}function Lu(e){if(e instanceof t.View)return e.get("id");throw new Error("Illegal view argument")}function Au(e,r){if(e instanceof t.View)return e.set("id",r),e;throw new Error("Illegal view argument")}function Nu(t,e){return null==Lu(t)&&Au(t,e||pi()),t}function Mu(t){var e=[],r=/\{([a-z])-([a-z])\}/.exec(t);if(r){var n,i=r[1].charCodeAt(0),o=r[2].charCodeAt(0);for(n=i;n<=o;++n)e.push(t.replace(r[0],String.fromCharCode(n)));return e}if(r=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(r[2],10),u=parseInt(r[1],10);u<=s;u++)e.push(t.replace(r[0],u.toString()));return e}return e.push(t),e}Du[Eu]=2*Math.PI*6370997/360,Du[Ru]=.3048,Du[Fu]=1,Du[ku]=1200/3937;var Gu=Object.freeze({__proto__:null,expandUrl:Mu,getControlId:vi,setControlId:gi,initializeControl:mi,COORD_PRECISION:bi,roundExtent:Oi,roundPointCoords:wi,roundLineCoords:ji,roundPolygonCoords:Pi,roundMultiPointCoords:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return ji(t,e)},roundMultiLineCoords:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return Pi(t,e)},roundMultiPolygonCoords:Si,roundCoords:xi,flatCoords:function(t,e){var r=function(t,e){return t.concat(e)};switch(t){case yi.POINT:return[e];case yi.LINE_STRING:case yi.MULTI_POINT:return e;case yi.POLYGON:case yi.MULTI_LINE_STRING:return e.reduce(r,[]);case yi.MULTI_POLYGON:return e.reduce((function(t,e){return t.concat(e.reduce(r,[]))}),[]);default:return[]}},isEqualCoord:$i,calcDistance:Ii,isPointCoords:Ci,isLineCoords:Ti,isPolygonCoords:_i,isMultiPointCoords:Ei,isMultiLineCoords:Ri,isMultiPolygonCoords:Fi,createOrUpdate:Ai,getCorner:Ni,getFeatureId:su,setFeatureId:uu,initializeFeature:au,getFeatureGeomName:cu,getFeatureGeom:function(e){if(e instanceof t.Feature)return e.getGeometry();if(jt(e))return e.geometry;throw new Error("Illegal feature format")},getFeatureProperties:lu,setFeatureProperties:hu,createGeoJsonFmt:Ys,createMvtFmt:qs,CIRCLE_SERIALIZE_PROP:Xs,STYLE_SERIALIZE_PROP:Hs,getGeoJsonFmt:Ks,writeGeoJsonFeature:Qs,readGeoJsonFeature:tu,writeGeoJsonGeometry:eu,readGeoJsonGeometry:ru,readProjection:nu,isGeoJSONFeature:iu,isGeoJSONGeometry:ou,createPointGeom:go,createLineGeom:function(t){return new s.LineString(t)},createPolygonGeom:function(t){return new s.Polygon(t)},createMultiPointGeom:function(t){return new s.MultiPoint(t)},createMultiLineGeom:function(t){return new s.MultiLineString(t)},createMultiPolygonGeom:function(t){return new s.MultiPolygon(t)},createGeomCollection:function(t){return new s.GeometryCollection(t)},createCircularPolygon:mo,isMultiGeom:function(t){return[yi.MULTI_POINT,yi.MULTI_LINE_STRING,yi.MULTI_POLYGON,yi.GEOMETRY_COLLECTION].includes(t.type||t.getType())},toSimpleGeom:yo,findPointOnSurface:bo,getGeometryId:Oo,setGeometryId:wo,initializeGeometry:jo,isCircleGeom:Po,getGeomCoords:function(t){if(t){var e=So(t);switch(e){case yi.CIRCLE:return xi(e,t.coordinates||t.getCenter());default:return xi(e,t.coordinates||t.getCoordinates())}}},getGeomType:So,getInteractionId:fu,setInteractionId:du,getInteractionPriority:pu,setInteractionPriority:vu,initializeInteraction:gu,getLayerId:mu,setLayerId:yu,initializeLayer:bu,getMapId:Ou,setMapId:wu,getMapDataProjection:ju,setMapDataProjection:Pu,getOverlayId:Su,setOverlayId:xu,initializeOverlay:$u,EPSG_4326:xo,EPSG_3857:$o,pointToLonLat:Io,pointFromLonLat:Co,transformPoint:To,transform:_o,lineToLonLat:Eo,lineFromLonLat:Ro,transformLine:Fo,polygonToLonLat:ko,polygonFromLonLat:Do,transformPolygon:Vo,multiPointToLonLat:Lo,multiPointFromLonLat:Ao,transformMultiPoint:No,multiLineToLonLat:Mo,multiLineFromLonLat:Go,transformMultiLine:Uo,multiPolygonToLonLat:zo,multiPolygonFromLonLat:Zo,transformMultiPolygon:Bo,transforms:Wo,transformExtent:Yo,extentFromLonLat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bi;if(t)return Yo(t,xo,e,r)},extentToLonLat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bi;if(t)return Yo(t,e,xo,r)},transformDistance:qo,getSourceId:Iu,setSourceId:Cu,initializeSource:Tu,cleanSourceParams:_u,getStyleId:Is,setStyleId:Cs,initializeStyle:Ts,defaultStyle:function(){return[{fillColor:[255,255,255,.4],strokeColor:"#3399cc",strokeWidth:1.25,imageRadius:5}]},defaultEditStyle:function(){var t={},e=[255,255,255,1],r=[0,153,255,1];return t[yi.LINE_STRING]=[{strokeColor:e,strokeWidth:5},{strokeColor:r,strokeWidth:3}],t[yi.MULTI_LINE_STRING]=t[yi.LINE_STRING],t[yi.POLYGON]=[{fillColor:[255,255,255,.5]}].concat(t[yi.LINE_STRING]),t[yi.MULTI_POLYGON]=t[yi.POLYGON],t[yi.CIRCLE]=t[yi.POLYGON].concat(t[yi.LINE_STRING]),t[yi.POINT]=[{imageRadius:6,fillColor:r,strokeColor:e,strokeWidth:1.5,zIndex:1/0}],t[yi.MULTI_POINT]=t[yi.POINT],t[yi.GEOMETRY_COLLECTION]=t[yi.POLYGON].concat(t[yi.LINE_STRING],t[yi.POINT]),t},createStyle:Es,normalizeColor:Rs,createFillStyle:Fs,createStrokeStyle:ks,createImageStyle:Ds,createTextStyle:Vs,createGeomStyle:Ls,dumpStyle:As,dumpFillStyle:Ns,dumpStrokeStyle:Ms,dumpImageStyle:Gs,dumpTextStyle:Us,dumpGeomStyle:zs,extentFromProjection:Vu,getViewId:Lu,setViewId:Au,initializeView:Nu}),Uu=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=void 0,i=void 0,o=void 0,s=[];return function(){var a=zu(e),c=(new Date).getTime(),l=!n||c-n>a;n=c;for(var h=arguments.length,f=Array(h),d=0;d<h;d++)f[d]=arguments[d];if(l&&r.leading)return r.accumulate?Promise.resolve(t.call(this,[f])).then((function(t){return t[0]})):Promise.resolve(t.call.apply(t,[this].concat(f)));if(i?clearTimeout(o):i=Zu(),s.push(f),o=setTimeout(u.bind(this),a),r.accumulate){var p=s.length-1;return i.promise.then((function(t){return t[p]}))}return i.promise};function u(){var e=i;clearTimeout(o),Promise.resolve(r.accumulate?t.call(this,s):t.apply(this,s[s.length-1])).then(e.resolve,e.reject),s=[],i=null}};function zu(t){return"function"==typeof t?t():t}function Zu(){var t={};return t.promise=new Promise((function(e,r){t.resolve=e,t.reject=r})),t}var Bu="change",Wu="error",Yu="click",qu="dblclick",Xu={PROPERTYCHANGE:"propertychange"};function Hu(t){return!0===t._isVueQuery}var Ju=function(t,e){return!e||(e instanceof String||"string"==typeof e?t.$options.name===e:Hu(e)?e.vm===t:e===t)},Ku=function(t,e){var r=[];return t.$children.forEach((function(t){Ju(t,e)&&r.push(t)})),r},Qu=function(t,e,r){if(void 0===r&&(r=!0),ta(t))return[];var n=Ku(t.$parent,e);if(!r){var i=n.indexOf(t);i>-1&&n.splice(i,1)}return n},ta=function(t){return t.$root===t},ea=function(t,e,r){var n=Qu(t);if(!n.length)return null;var i=n.indexOf(t);return"Ascending"===r?i===n.length-1?null:Ju(n[i+1],e)?n[i+1]:null:0===i?null:Ju(n[i-1],e)?n[i-1]:null},ra=function(t,e,r){var n=Qu(t,e);if(!n.length)return[];var i=n.indexOf(t);return"Ascending"===r?n.slice(i+1):n.slice(0,i).reverse()},na=function(t,e,r,n){var i=Qu(t);if(!i.length)return[];if("Descending"===n&&(i=i.reverse()),i=i.slice(i.indexOf(t)+1),!e)return i;for(var o=[],s=0,u=i.length;s<u&&!Ju(i[s],e);++s)Ju(i[s],r)&&o.push(i[s]);return o},ia=function(t){if(Array.isArray(t))return t.map((function(t){return ia(t)}));if(Hu(t))return t;if(!t._isVue)throw new Error("[VueQuery] Cannot instantiate on a non-Vue element");if(!ta(t)&&!t.$options.name)throw new Error("[VueQuery] Non-root component must have a `name` option");return{vm:t,_isVueQuery:!0,children:function(e){return ia(Ku(t,e))},closest:function(e){if(Ju(t,e))return ia(t);if(!t.$parent)return null;var r=ia(t.$parent);return r?r.closest(e):null},find:function(e){var r=function(t){var n=[];return t.$children&&t.$children.length?(t.$children.forEach((function(t){Ju(t,e)&&n.push(t),n=n.concat(r(t))})),n):[]};return ia(r(t))},has:function(e){if(!t.$children||!t.$children.length)return!1;for(var r=0,n=t.$children.length;r<n;++r){if(Ju(t.$children[r],e))return!0;var i=ia(t.$children[r]);if(!i)break;return i.has(e)}return!1},is:function(e){return Array.isArray(e)?e.some((function(e){return Ju(t,e)})):Ju(t,e)},next:function(e){var r=ea(t,e||null,"Ascending");return r?ia(r):null},nextAll:function(e){return ia(ra(t,e||null,"Ascending"))},nextUntil:function(e,r){return ia(na(t,e,r,"Ascending"))},parent:function(e){return ta(t)?null:Ju(t.$parent,e)?ia(t.$parent):null},parents:function(e){var r=function(t){if(ta(t))return[];var n=[];return Ju(t.$parent,e)&&n.push(t.$parent),n=n.concat(r(t.$parent))};return ia(r(t))},parentsUntil:function(e,r){var n=function(t){if(ta(t))return[];var i=[];return e&&Ju(t.$parent,e)?i:(Ju(t.$parent,r)&&i.push(t.$parent),i.concat(n(t.$parent)))};return ia(n(t))},prev:function(e){var r=ea(t,e||null,"Descending");return r?ia(r):null},prevAll:function(e){return ia(ra(t,e||null,"Descending"))},prevUntil:function(e,r){return ia(na(t,e,r,"Descending"))},siblings:function(e){var r=Qu(t,e),n=r.indexOf(t);return n>-1&&r.splice(n,1),ia(r)}}},oa=ia;function sa(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Array.isArray(e)?Xr.apply(void 0,le(e.map((function(e){var r,i,o;return"object"===z(e)?(i=e.event,o=e.selector):i=e,(r=sa(t,i,o)).pipe.apply(r,le(n))})))):(r||(r=ct),Wr((function(r){return t.on(e,r)}),(function(r){return t.un(e,r)})).pipe($r(r)))}function ua(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(Array.isArray(e))return Xr.apply(void 0,le(e.map((function(e){var o;return(o=ua(t,e,r,n)).pipe.apply(o,le(i))}))));n||(n=ct);var o="change:".concat(e),s=sa(t,o,(function(){return t.get(e)})),u=[];return r&&(bt(r)||(r=$t),u.push(wn(r))),u.push($r((function(t){return n({prop:e,value:t})}))),s.pipe.apply(s,u)}function aa(t,e,r){return Array.isArray(e)?Xr.apply(void 0,le(e.map((function(e){var r,n;return"object"===z(e)?(r=e.event,n=e.selector):r=e,aa(t,r,n)})))):(r||(r=ct),Wr((function(r){return t.$on(e,r)}),(function(r){return t.$off(e,r)})).pipe($r(r)))}function ca(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new ze((function(n){return t.$watch(e,(function(t,e){return n.next({value:t,previous:e})}),r)}))}function la(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(e){var r=[];return e.pipe(Hn((function(t){return r.push(t)})),sn(t),$r((function(){return r})),Hn((function(){r=[]})))}}var ha=Object.freeze({__proto__:null,fromOlEvent:sa,fromOlChangeEvent:ua,fromVueEvent:aa,fromVueWatcher:ca,bufferDebounceTime:la}),fa="$vlEventBus",da={beforeCreate:function(){var t=this;!function(){if(Wt($.default,fa)||Wt($.default.prototype,fa))return;var t=new $.default;Wt($.default,fa)||Object.defineProperties($.default,T({},fa,{enumerable:!0,get:function(){return t}}));Wt($.default.prototype,fa)||Object.defineProperties($.default.prototype,T({},fa,{enumerable:!0,get:function(){return t}}))}(),Object.defineProperties(this,{$eventBus:{enumerable:!0,get:function(){return t.$vlEventBus}}})}};var pa="$vlIdentityMap",va="instances",ga={data:function(){return{idents:ut()}},beforeCreate:function(){var t=this;!function(){if(Wt($.default,pa)||Wt($.default.prototype,pa))return;var t=new ue;Wt($.default,pa)||Object.defineProperties($.default,T({},pa,{enumerable:!0,get:function(){return t}}));Wt($.default.prototype,pa)||Object.defineProperties($.default.prototype,T({},pa,{enumerable:!0,get:function(){return t}}))}(),Object.defineProperties(this,{$identityMap:{enumerable:!0,get:function(){return t.$vlIdentityMap}}})},destroyed:function(){this.unsetInstances()},methods:{makeIdent:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.filter(ct).join(".")},instanceFactoryCall:function(t,e){if(t&&this.hasInstance(t))return this.getInstance(t);var r=e();return t&&this.setInstance(t,r),r},getInstance:function(t){if(t&&this.hasInstance(t))return this.idents[t]=!0,this.$identityMap.get(t,va)},setInstance:function(t,e){t&&(this.idents[t]=!0,this.$identityMap.set(t,e,va))},hasInstance:function(t){if(t)return this.$identityMap.has(t,va)},unsetInstance:function(t){t&&(delete this.idents[t],this.$identityMap.unset(t,va))},unsetInstances:function(){Tt(this.idents).forEach(this.unsetInstance.bind(this))},moveInstance:function(t,e){return this.$identityMap.move(t,e,va)}}};var ma={beforeCreate:function(){this._rxSubs=[]},destroyed:function(){this.unsubscribeAll()},methods:{subscribeAll:function(){},unsubscribeAll:function(){this._rxSubs.forEach((function(t){return t.unsubscribe()})),this._rxSubs=[]},subscribeTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:it,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:it,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:it,i=function(t){r(t)},o=t.pipe(An(3)).subscribe(e,i,n);return this._rxSubs.push(o),o},unsubscribe:function(t){var e=this._rxSubs.indexOf(t);-1!==e&&(t.unsubscribe(),this._rxSubs.splice(e,1))}}},ya="services",ba={inject:{$services:ya},provide:function(){return T({},ya,this.getServices())},methods:{getServices:function(){return je({},this.$services||{})}},beforeCreate:function(){for(var t=this.$parent;t&&(null==t._provided||null==t._provided.services);)t=t.$parent;null!=t&&null!=t._provided.services||delete this.$options.inject.$services}};function Oa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=N(t);if(e){var i=N(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return A(this,r)}}function wa(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ja(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wa(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wa(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Pa="vm",Sa=1e3/60,xa={UNDEF:"undef",CREATING:"creating",CREATED:"created",MOUNTING:"mounting",MOUNTED:"mounted",UNMOUNTING:"unmounting",UNMOUNTED:"unmounted",DESTROYING:"destroying",DESTROYED:"destroyed"},$a={CREATED:xa.CREATED,MOUNTED:xa.MOUNTED,UNMOUNTED:xa.UNMOUNTED,DESTROYED:xa.DESTROYED,ERROR:"error"},Ia={CREATE:"create",MOUNT:"mount",UNMOUNT:"unmount",DESTROY:"destroy"},Ca={mixins:[ga,ma,ba,da],props:{id:{type:[String,Number],default:pi,validator:function(t){return null!=t&&""!==t}},ident:[String,Number]},data:function(){return{rev:0,currentId:this.id}},computed:{vmClass:function(){return Ht(this.$options.name)},vmId:function(){return[this.vmClass,this.currentId].filter(ct).join(".")},vmName:function(){return[this.$options.name,this.currentId].filter(ct).join(".")},olObjIdent:function(){if(this.ident)return this.makeIdent(this.ident)}},watch:ja({rev:function(){this.$olObject&&this.currentId!==this.getIdInternal()&&(this.currentId=this.getIdInternal())}},Ya(["id","currentId","olObjIdent"])),created:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._logger=pe(t.vmName),t._olObjectState=xa.UNDEF,t._olObject=void 0,t._olObjectEvents=Ea.call(t),Ta.call(t),_a.call(t),e.next=8,Fa.call(t,!1);case 8:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Da.call(t);case 2:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,La.call(t,!0);case 2:case"end":return e.stop()}}),e)})))()},destroyed:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Na.call(t);case 2:case"end":return e.stop()}}),e)})))()},methods:{beforeInit:function(){},init:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.instanceFactoryCall(t.olObjIdent,t.createOlObject.bind(t));case 2:return t._olObject=e.sent,t._olObject.vm||(t._olObject.vm=[]),t._olObject.vm.includes(t)||t._olObject.vm.push(t),e.next=7,t.changed();case 7:t.subscribeAll();case 8:case"end":return e.stop()}}),e)})))()},createOlObject:function(){throw new Error("".concat(this.vmName," not implemented method: createOlObject()"))},deinit:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.unsubscribeAll(),t.unsetInstances(),t._olObject&&(t._olObject.vm=t._olObject.vm.filter((function(e){return e!==t})),t._olObject=void 0);case 3:case"end":return e.stop()}}),e)})))()},beforeMount:function(){},mount:function(){},unmount:function(){},refresh:function(){var e=this;return be(B.mark((function r(){var n;return B.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.resolveOlObject();case 3:if(!((n=r.sent)instanceof t.Observable)){r.next=6;break}return r.abrupt("return",new Promise((function(t){n.once("change",(function(){return t()})),n.changed()})));case 6:r.next=10;break;case 8:r.prev=8,r.t0=r.catch(0);case 10:return r.abrupt("return",e.changed());case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},scheduleRefresh:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.debounceRefresh();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))()},remount:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$olObjectState!==xa.MOUNTED){e.next=8;break}return e.next=4,La.call(t);case 4:return e.next=6,Da.call(t);case 6:e.next=9;break;case 8:case 9:case"end":return e.stop()}}),e)})))()},scheduleRemount:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(![xa.MOUNTING,xa.MOUNTED].includes(t.$olObjectState)){e.next=6;break}return e.next=4,t.debounceRemount();case 4:e.next=7;break;case 6:case 7:case"end":return e.stop()}}),e)})))()},recreate:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(![xa.CREATED,xa.MOUNTING,xa.MOUNTED,xa.UNMOUNTING,xa.UNMOUNTED].includes(t.$olObjectState)){e.next=15;break}if(!(r=[xa.MOUNTING,xa.MOUNTED].includes(t.$olObjectState))){e.next=6;break}return e.next=6,La.call(t);case 6:return e.next=8,Na.call(t);case 8:return e.next=10,Fa.call(t);case 10:if(!r){e.next=13;break}return e.next=13,Da.call(t);case 13:e.next=16;break;case 15:case 16:case"end":return e.stop()}}),e)})))()},scheduleRecreate:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(![xa.CREATING,xa.CREATED,xa.MOUNTING,xa.MOUNTED,xa.UNMOUNTING,xa.UNMOUNTED].includes(t.$olObjectState)){e.next=6;break}return e.next=4,t.debounceRecreate();case 4:e.next=7;break;case 6:case 7:case"end":return e.stop()}}),e)})))()},getServices:function(){return ba.methods.getServices.call(this)},subscribeAll:function(){Ga.call(this)},resolveOlObject:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$createPromise;case 2:return e.abrupt("return",t.$olObject||function(t){throw t}(new Wa("".concat(t.vmName," OpenLayers object is undefined"))));case 3:case"end":return e.stop()}}),e)})))()},$nextTickPromise:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(t.$nextTick.bind(t)));case 1:case"end":return e.stop()}}),e)})))()},getId:function(){return St(this.$olObject&&this.getIdInternal(),this.currentId)},getIdInternal:function(){return this.$olObject instanceof t.Object?this.$olObject.get("id"):this.$olObject.id},setId:function(t){ne(null!=t&&""!==t,"Invalid id"),this.currentId!==t&&(this.currentId=t),this.$olObject&&this.setIdInternal(t)},setIdInternal:function(e){this.$olObject instanceof t.Object?this.$olObject.get("id")!==e&&this.$olObject.set("id",e):this.$olObject.id!==e&&(this.$olObject.id=e)},changed:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.rev++,e.next=3,t.$nextTickPromise();case 3:case"end":return e.stop()}}),e)})))()},idChanged:function(t){this.setId(t)},currentIdChanged:function(t){t!==this.id&&this.$emit("update:id",t)},olObjIdentChanged:function(t,e){t&&e?this.moveInstance(t,e):t&&!e&&this.$olObject?this.setInstance(t,this.$olObject):!t&&e&&this.unsetInstance(e)},syncNonObservable:function(){this.setId(this.getId())}}};function Ta(){this.debounceRefresh=Uu(this.refresh.bind(this),Sa),this.debounceRemount=Uu(this.remount.bind(this),Sa),this.debounceRecreate=Uu(this.recreate.bind(this),Sa),this.debounceChanged=Uu(this.changed.bind(this),Sa)}function _a(){var t=this;Object.defineProperties(this,{$vq:{enumerable:!0,get:function(){return oa(t)}},$logger:{enumerable:!0,get:function(){return t._logger}},$olObjectState:{enumerable:!0,get:function(){return t._olObjectState}},$olObject:{enumerable:!0,get:function(){return t._olObject}},$olObjectEvents:{enumerable:!0,get:function(){return t._olObjectEvents}},$createPromise:{enumerable:!0,get:function(){return Ra.call(t,Ia.CREATE,$a.CREATED,T({},xa.CREATING,[Ia.CREATE,$a.CREATED]))}},$mountPromise:{enumerable:!0,get:function(){return t.$createPromise.then((function(){var e;return Ra.call(t,Ia.MOUNT,$a.MOUNTED,(T(e={},xa.CREATING,[Ia.CREATE,$a.CREATED]),T(e,xa.MOUNTING,[Ia.MOUNT,$a.MOUNTED]),e))}))}},$unmountPromise:{enumerable:!0,get:function(){return t.$mountPromise.then((function(){var e;return Ra.call(t,Ia.UNMOUNT,$a.UNMOUNTED,(T(e={},xa.CREATING,[Ia.CREATE,$a.CREATED]),T(e,xa.MOUNTING,[Ia.MOUNT,$a.MOUNTED]),T(e,xa.UNMOUNTING,[Ia.UNMOUNT,$a.UNMOUNTED]),e))}))}},$destroyPromise:{enumerable:!0,get:function(){return t.$unmountPromise.then((function(){var e;return Ra.call(t,Ia.DESTROY,$a.DESTROYED,(T(e={},xa.CREATING,[Ia.CREATE,$a.CREATED]),T(e,xa.MOUNTING,[Ia.MOUNT,$a.MOUNTED]),T(e,xa.UNMOUNTING,[Ia.UNMOUNT,$a.UNMOUNTED]),T(e,xa.DESTROYING,[Ia.DESTROY,$a.DESTROYED]),e))}))}}})}function Ea(){var t=this;return Xr.apply(void 0,le(Object.values($a).map((function(e){return aa(t.$eventBus,e,(function(t){return{name:e,args:gt(t)?t:[t]}})).pipe(Jr((function(e){var r=e.args;return r[0]===t||r[1]===t})))})))).pipe(Ln(),He())}function Ra(t,e,r){var n=this,i=function(t,e){return tn(n.$olObjectEvents.pipe(Jr((function(t){return t.name===e}))),n.$olObjectEvents.pipe(Jr((function(e){var r=e.name,n=e.args;return r===$a.ERROR&&n[0]instanceof Ua&&n[0].action===t}))))};return Xr(i(t,e),this.$olObjectEvents.pipe(Jr((function(t){var e=t.name,r=t.args;return e===$a.ERROR&&r[0]instanceof za})))).pipe(Rn(),Ur((function(t){var e,o,s=dr(t);return t.name===$a.ERROR&&t.args[0]instanceof za&&null!=r[n.$olObjectState]&&(s=s.pipe((e=function(){return i.apply(void 0,le(r[n.$olObjectState]))},o?function(t){return new bn(t,o).lift(new mn(e))}:function(t){return t.lift(new mn(e))}))),s})),Ur((function(t){return t.name===$a.ERROR?pr(t.args[0]):dr(t)})),$r((function(t){var e=t.args;return 1===e.length?e[0]:e}))).toPromise()}function Fa(){return ka.apply(this,arguments)}function ka(){return(ka=be(B.mark((function t(){var e,r,n,i=arguments;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!(i.length>0&&void 0!==i[0])||i[0],r=this._olObjectState,e&&(this._olObjectEvents=Ea.call(this)),this._olObjectEvents.subscribe(),t.prev=4,t.next=7,Promise.race([Promise.resolve(this.beforeInit()).then((function(){return!1})),this.$olObjectEvents.pipe(Jr((function(t){var e=t.name,r=t.args;return e===$a.ERROR&&r[0]instanceof za})),Rn()).toPromise().then((function(){return!0}))]);case 7:if(!t.sent){t.next=11;break}return t.abrupt("return");case 11:return this._olObjectState=xa.CREATING,t.next=14,this.init();case 14:this._olObjectState=xa.CREATED,this.$emit($a.CREATED,this),this.$eventBus.$emit($a.CREATED,this),t.next=27;break;case 20:throw t.prev=20,t.t0=t.catch(4),n=new Ua(t.t0,this.vmName,Ia.CREATE),this._olObjectState=r,this.$emit($a.ERROR,n,this),this.$eventBus.$emit($a.ERROR,n,this),n;case 27:case"end":return t.stop()}}),t,this,[[4,20]])})))).apply(this,arguments)}function Da(){return Va.apply(this,arguments)}function Va(){return(Va=be(B.mark((function t(){var e,r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this._olObjectState,t.prev=1,t.next=4,this.$createPromise;case 4:return t.next=6,Promise.race([Promise.resolve(this.beforeMount()).then((function(){return!1})),this.$olObjectEvents.pipe(Jr((function(t){var e=t.name,r=t.args;return e===$a.ERROR&&r[0]instanceof za})),Rn()).toPromise().then((function(){return!0}))]);case 6:if(!t.sent){t.next=10;break}return t.abrupt("return");case 10:return this._olObjectState=xa.MOUNTING,t.next=13,this.mount();case 13:this._olObjectState=xa.MOUNTED,this.$emit($a.MOUNTED,this),this.$eventBus.$emit($a.MOUNTED,this),t.next=29;break;case 19:if(t.prev=19,t.t0=t.catch(1),!(t.t0 instanceof za)){t.next=24;break}return t.abrupt("return");case 24:throw r=new Ua(t.t0,this.vmName,Ia.MOUNT),this._olObjectState=e,this.$emit($a.ERROR,r,this),this.$eventBus.$emit($a.ERROR,r,this),r;case 29:case"end":return t.stop()}}),t,this,[[1,19]])})))).apply(this,arguments)}function La(){return Aa.apply(this,arguments)}function Aa(){return(Aa=be(B.mark((function t(){var e,r,n,i,o=arguments;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]&&o[0],r=this._olObjectState,e&&[xa.UNDEF,xa.CREATING,xa.CREATED,xa.MOUNTING].includes(this.$olObjectState)&&(n=new za("".concat(this.vmName," ol object lifecycle canceled")),this.$emit($a.ERROR,n,this),this.$eventBus.$emit($a.ERROR,n,this)),t.prev=3,t.prev=4,t.next=7,this.$mountPromise;case 7:t.next=18;break;case 9:if(t.prev=9,t.t0=t.catch(4),!(t.t0 instanceof za)){t.next=17;break}if(this.$olObjectState===xa.MOUNTED){t.next=15;break}return t.abrupt("return");case 15:t.next=18;break;case 17:throw t.t0;case 18:return this._olObjectState=xa.UNMOUNTING,t.next=21,this.unmount();case 21:this._olObjectState=xa.UNMOUNTED,this.$emit($a.UNMOUNTED,this),this.$eventBus.$emit($a.UNMOUNTED,this),t.next=34;break;case 27:throw t.prev=27,t.t1=t.catch(3),i=new Ua(t.t1,this.vmName,Ia.UNMOUNT),this._olObjectState=r,this.$emit($a.ERROR,this,i),this.$eventBus.$emit($a.ERROR,this,i),i;case 34:case"end":return t.stop()}}),t,this,[[3,27],[4,9]])})))).apply(this,arguments)}function Na(){return Ma.apply(this,arguments)}function Ma(){return(Ma=be(B.mark((function t(){var e,r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this._olObjectState,t.prev=1,t.prev=2,t.next=5,this.$unmountPromise;case 5:t.next=16;break;case 7:if(t.prev=7,t.t0=t.catch(2),!(t.t0 instanceof za)){t.next=15;break}if(this.$olObjectState===xa.CREATED){t.next=13;break}return t.abrupt("return");case 13:t.next=16;break;case 15:throw t.t0;case 16:return this._olObjectState=xa.DESTROYING,t.next=19,this.deinit();case 19:this._olObjectState=xa.DESTROYED,this.$emit($a.DESTROYED,this),this.$eventBus.$emit($a.DESTROYED,this),t.next=32;break;case 25:throw t.prev=25,t.t1=t.catch(1),r=new Ua(t.t1,this.vmName,Ia.DESTROY),this._olObjectState=e,this.$emit($a.ERROR,this,r),this.$eventBus.$emit($a.ERROR,this,r),r;case 32:case"end":return t.stop()}}),t,this,[[1,25],[2,7]])})))).apply(this,arguments)}function Ga(){var e=this;if(this.$olObject instanceof t.Observable){var r=te("set"),n=ua(this.$olObject,["id"],!0,(function(t){return ja(ja({},t),{},{setter:e[r(t.prop)]})}));this.subscribeTo(n,(function(t){return(0,t.setter)(t.value)})),this.subscribeTo(Xr(sa(this.$olObject,Bu),sa(this.$olObject,Xu.PROPERTYCHANGE)),this.debounceChanged.bind(this)),this.subscribeTo(sa(this.$olObject,Wu),(function(t){return e.$emit($a.ERROR,t)}))}else this.subscribeTo(Yr(Sa),this.syncNonObservable.bind(this))}var Ua=function(t){F(r,t);var e=Oa(r);function r(t,n,i){var o;_(this,r),t instanceof r&&(t=t.err);var s="".concat(n," ").concat(i," ol object failed"),u="".concat(s,": ").concat(t.message);return T(E(o=e.call(this,u)),"name","LifecycleError"),o.vmName=n,o.action=i,o.err=t,t.stack?o.stack="".concat(s,": ").concat(t.stack):bt(Error.captureStackTrace)?Error.captureStackTrace(E(o),o.constructor):o.stack=new Error(u).stack,o}return r}(U(Error)),za=function(t){F(r,t);var e=Oa(r);function r(t){var n;return _(this,r),T(E(n=e.call(this,t)),"name","CanceledError"),bt(Error.captureStackTrace)?Error.captureStackTrace(E(n),n.constructor):n.stack=new Error(t).stack,n}return r}(U(Error));function Za(t){return t instanceof Ua&&t.action===Ia.CREATE}function Ba(t){return t instanceof Ua&&t.action===Ia.MOUNT}var Wa=function(t){F(r,t);var e=Oa(r);function r(t){var n;return _(this,r),T(E(n=e.call(this,t)),"name","OLObjectNotInitializedError"),bt(Error.captureStackTrace)?Error.captureStackTrace(E(n),n.constructor):n.stack=new Error(t).stack,n}return r}(U(Error));function Ya(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Pe(t,(function(t){return{deep:e.includes(t),handler:function(){var e=this["".concat(t,"Changed")];return bt(e)?e.apply(void 0,arguments):$t(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])?void 0:this.scheduleRecreate()}}}))}function qa(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Xa(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?qa(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qa(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ha=function(t){if(null!=t)return"object"===z(t)?JSON.stringify(t):t},Ja=function(t){return _u(t,["FORMAT","F","LAYERS","LAYERDEFS","DYNAMICLAYERS","DPI","TRANSPARENT","TIME","LAYERTIMEOPTIONS","GDBVERSION","MAPSCALE","ROTATION","DATUMTRANSFORMATIONS","MAPRANGEVALUES","LAYERRANGEVALUES","LAYERPARAMETERVALUES","HISTORICMOMENT"])},Ka={props:{hidpi:{type:Boolean,default:!0},format:{type:String,default:"PNG32"},layers:[String,Array],layerDefs:[Object,String],dynamicLayers:[Array,String],dpi:Number,transparent:{type:Boolean,default:!0},time:[String,Array],layerTimeOptions:[Object,String],gdbVersion:String,mapScale:String,rotation:Number,datumTransformations:[Array,String],mapRangeValues:[Array,String],layerRangeValues:[Array,String],layerParameterValues:[Array,String],historicMoment:Number,params:Object},data:function(){return{currentParams:void 0}},computed:Xa({inputLayers:function(){return gt(this.layers)?this.layers.join(","):this.layers},inputTime:function(){return gt(this.time)?this.time.join(","):this.time},inputLayerDefs:function(){return Ha(this.layerDefs)},inputDynamicLayers:function(){return Ha(this.dynamicLayers)},inputLayerTimeOptions:function(){return Ha(this.layerTimeOptions)},inputDatumTransformations:function(){return Ha(this.datumTransformations)},inputMapRangeValues:function(){return Ha(this.mapRangeValues)},inputLayerRangeValues:function(){return Ha(this.layerRangeValues)},inputLayerParameterValues:function(){return Ha(this.layerParameterValues)},inputHistoricMoment:function(){return Ha(this.historicMoment)},customParams:function(){return this.params?Ja(this.params):void 0},inputParams:function(){return Xa(Xa({},this.customParams||{}),{},{LAYERS:this.inputLayers,FORMAT:this.format,LAYERDEFS:this.inputLayerDefs,DYNAMICLAYERS:this.inputDynamicLayers,DPI:this.dpi,TRANSPARENT:this.transparent,TIME:this.inputTime,LAYERTIMEOPTIONS:this.inputLayerTimeOptions,GDBVERSION:this.gdbVersion,MAPSCALE:this.mapScale,ROTATION:this.rotation,DATUMTRANSFORMATIONS:this.inputDatumTransformations,MAPRANGEVALUES:this.inputMapRangeValues,LAYERRANGEVALUES:this.inputLayerRangeValues,LAYERPARAMETERVALUES:this.inputLayerParameterValues,HISTORICMOMENT:this.inputHistoricMoment})}},kt(["format","inputLayers","inputLayerDefs","inputDynamicLayers","dpi","transparent","inputTime","inputLayerTimeOptions","gdbVersion","mapScale","rotation","inputDatumTransformations","inputMapRangeValues","inputLayerRangeValues","inputLayerParameterValues","inputHistoricMoment"],(function(t,e){var r="input"===e.slice(0,5)?Ut(e.slice(5)):e;return t["current"+Gt(r)]=function(){return St((this.currentParams||{})[r.toUpperCase()],(this.inputParams||{})[r.toUpperCase()])},t}),{})),watch:Xa(Xa({rev:function(){this.$source&&($t(this.currentParams,this.$source.getParams())||(this.currentParams=this.$source.getParams()))}},Pe(["currentFormat","currentLayers","currentLayerDefs","currentDynamicLayers","currentDpi","currentTransparent","currentTime","currentLayerTimeOptions","currentGdbVersion","currentMapScale","currentRotation","currentDatumTransformations","currentMapRangeValues","currentLayerRangeValues","currentLayerParameterValues","currentHistoricMoment"],(function(t){return function(e){var r=Ut(t.slice(7));$t(e,this[Wt(this,"input"+Gt(r))?"input"+Gt(r):r])||this.$emit("update:"+r,wt(e)?Qt(e):e)}}))),Ya(["hidpi","inputParams","currentParams"],["inputParams","currentParams"])),created:function(){this.currentParams=this.inputParams&&Qt(this.inputParams)},methods:{getParams:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getParams(),this.currentParams)},updateParams:function(t){$t(t=kt(Xa(Xa({},this.currentParams),t),(function(t,e,r){return Xa(Xa({},t),{},T({},r.toUpperCase(),e))}),{}),this.currentParams)||(this.currentParams=t),this.$source&&!$t(t,this.$source.getParams())&&this.$source.updateParams(t)},updateParam:function(t,e){this.updateParams(T({},t.toUpperCase(),e))},inputParamsChanged:function(t){this.updateParams(t)},currentParamsChanged:function(t){$t(t=t?Ja(t):void 0,this.customParams)||this.$emit("update:params",t&&Qt(t))}}},Qa={computed:{resolvedViewProjection:function(){return St(this.viewProjection,$o)},resolvedDataProjection:function(){var t;return St(this.dataProjection,null===(t=this.$options)||void 0===t?void 0:t.dataProjection,this.resolvedViewProjection)}},watch:{resolvedViewProjection:function(){return this.resolvedViewProjectionChanged.apply(this,arguments)},resolvedDataProjection:function(){return this.resolvedDataProjectionChanged.apply(this,arguments)}},methods:{pointToViewProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return To(t,this.resolvedDataProjection,this.resolvedViewProjection,e)},pointToDataProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return To(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},lineToViewProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return Fo(t,this.resolvedDataProjection,this.resolvedViewProjection,e)},lineToDataProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return Fo(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},polygonToViewProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return Vo(t,this.resolvedDataProjection,this.resolvedViewProjection,e)},polygonToDataProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return Vo(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},multiPointToViewProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return No(t,this.resolvedDataProjection,this.resolvedViewProjection,e)},multiPointToDataProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return No(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},multiLineToViewProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return Uo(t,this.resolvedDataProjection,this.resolvedViewProjection,e)},multiLineToDataProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return Uo(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},multiPolygonToViewProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return Bo(t,this.resolvedDataProjection,this.resolvedViewProjection,e)},multiPolygonToDataProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return Bo(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},extentToViewProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return Yo(t,this.resolvedDataProjection,this.resolvedViewProjection,e)},extentToDataProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return Yo(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},writeGeometryInDataProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return eu(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},writeGeometryInViewProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return eu(t,this.resolvedViewProjection,this.resolvedViewProjection,e)},readGeometryInDataProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return ru(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},readGeometryInViewProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return ru(t,this.resolvedViewProjection,this.resolvedViewProjection,e)},writeFeatureInDataProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return Qs(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},writeFeatureInViewProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return Qs(t,this.resolvedViewProjection,this.resolvedViewProjection,e)},readFeatureInDataProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return tu(t,this.resolvedViewProjection,this.resolvedDataProjection,e)},readFeatureInViewProj:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return tu(t,this.resolvedViewProjection,this.resolvedViewProjection,e)},resolvedViewProjectionChanged:function(t,e){t!==e&&this.$emit("update:viewProjection",t)},resolvedDataProjectionChanged:function(t,e){t!==e&&this.$emit("update:dataProjection",t)}}},tc={render:function(t){var e,r,n=(null===(e=this.$options)||void 0===e?void 0:e.stubVNode)||{};if(n.empty){var i=t();return"string"==typeof n.empty?i.text=n.empty:"function"==typeof n.empty&&(i.text=n.empty.call(this)),i}r=!1===n.slots?void 0:Se(this.$slots,n.slots);var o={attrs:"function"==typeof n.attrs?n.attrs.call(this):n.attrs,style:{display:"none !important"}};return t(n.tag||"i",o,r)}};function ec(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(n=(s=u.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}}(t,e)||ce(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rc={methods:{beforeInit:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oi((function(){return null!=t.$mapVm}),tn(t.$olObjectEvents.pipe(Jr((function(t){var e=t.name,r=t.args;return e===$a.ERROR&&r[0]instanceof za}))),aa(t.$eventBus,$a.ERROR).pipe(Jr((function(e){var r=ec(e,2),n=r[0],i=r[1];return Za(n)&&Wt(i,"$map")&&t.$vq.closest(i)})))).pipe(Fn(!0)));case 3:return t.$mapVm.resolvedViewProjection!==t.viewProjection&&(t.viewProjection=t.$mapVm.resolvedViewProjection),t.$mapVm.resolvedDataProjection!==t.dataProjection&&(t.dataProjection=t.$mapVm.resolvedDataProjection),t.subscribeTo(ca(t,(function(){return t.$mapVm.resolvedViewProjection})),(function(e){var r=e.value;r!==t.viewProjection&&(t.viewProjection=r)})),t.subscribeTo(ca(t,(function(){return t.$mapVm.resolvedDataProjection})),(function(e){var r=e.value;r!==t.dataProjection&&(t.dataProjection=r)})),e.next=9,t.$nextTickPromise();case 9:return e.abrupt("return",Ca.methods.beforeInit.call(t));case 12:throw e.prev=12,e.t0=e.catch(0),e.t0.message="".concat(t.vmName," wait for $mapVm injection: ").concat(e.t0.message),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()}}};function nc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ic(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nc(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var oc={mixins:[tc,Qa,Ca,rc],stubVNode:{attrs:function(){return{id:this.vmId,class:this.vmClass}}},props:{className:{type:String,default:"ol-layer"},opacity:{type:Number,default:1},visible:{type:Boolean,default:!0},extent:{type:Array,validator:function(t){return 4===t.length&&t.every(pt)}},extentProjection:{type:String,validator:function(t){return!!c.get(t)}},zIndex:Number,minResolution:Number,maxResolution:Number,minZoom:Number,maxZoom:Number},data:function(){return{viewProjection:$o,dataProjection:$o,currentExtentViewProj:Oi(this.extent),currentMaxResolution:this.maxResolution,currentMinResolution:this.minResolution,currentMaxZoom:this.maxZoom,currentMinZoom:this.minZoom,currentOpacity:this.opacity,currentVisible:this.visible,currentZIndex:this.zIndex}},computed:{resolvedExtentProjection:function(){return St(this.extentProjection,this.resolvedDataProjection)},extentDataProj:function(){return Oi(this.extent)},extentViewProj:function(){return Yo(this.extent,this.resolvedExtentProjection,this.resolvedViewProjection)},currentExtentDataProj:function(){return Yo(this.currentExtentViewProj,this.resolvedViewProjection,this.resolvedExtentProjection)}},watch:ic({rev:function(){this.$layer&&($t(this.currentExtentViewProj,this.$layer.getExtent())||(this.currentExtentViewProj=this.$layer.getExtent()),this.currentMaxResolution!==this.$layer.getMaxResolution()&&(this.currentMaxResolution=this.$layer.getMaxResolution()),this.currentMinResolution!==this.$layer.getMinResolution()&&(this.currentMinResolution=this.$layer.getMinResolution()),this.currentMaxZoom!==this.$layer.getMaxZoom()&&(this.currentMaxZoom=this.$layer.getMaxZoom()),this.currentMinZoom!==this.$layer.getMinZoom()&&(this.currentMinZoom=this.$layer.getMinZoom()),this.currentOpacity!==this.$layer.getOpacity()&&(this.currentOpacity=this.$layer.getOpacity()),this.currentVisible!==this.$layer.getVisible()&&(this.currentVisible=this.$layer.getVisible()),this.currentZIndex!==this.$layer.getZIndex()&&(this.currentZIndex=this.$layer.getZIndex()))}},Ya(["className","opacity","currentOpacity","visible","currentVisible","extentViewProj","currentExtentDataProj","zIndex","currentZIndex","minResolution","currentMinResolution","maxResolution","currentMaxResolution","minZoom","currentMinZoom","maxZoom","currentMaxZoom"],["extentViewProj","currentExtentDataProj"])),created:function(){var t;sc.call(this),this.currentExtentViewProj=null===(t=this.extentViewProj)||void 0===t?void 0:t.slice()},methods:{beforeInit:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Ca.methods.beforeInit.call(t),rc.methods.beforeInit.call(t)]);case 2:case"end":return e.stop()}}),e)})))()},createOlObject:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=bu,e.next=3,t.createLayer();case 3:return e.t1=e.sent,e.t2=t.currentId,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})))()},createLayer:function(){throw new Error("".concat(this.vmName," not implemented method: createLayer"))},mount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=t.$layersContainer)||void 0===r||r.addLayer(t),e.abrupt("return",Ca.methods.mount.call(t));case 2:case"end":return e.stop()}}),e)})))()},unmount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=t.$layersContainer)||void 0===r||r.removeLayer(t),e.abrupt("return",Ca.methods.unmount.call(t));case 2:case"end":return e.stop()}}),e)})))()},getServices:function(){var t=this;return je(Ca.methods.getServices.call(this),{get layerVm(){return t}})},subscribeAll:function(){Ca.methods.subscribeAll.call(this),uc.call(this)},getIdInternal:function(){return mu(this.$layer)},setIdInternal:function(t){t!==this.getIdInternal()&&yu(this.$layer,t)},resolveLayer:Ca.methods.resolveOlObject,getExtent:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.$layer)return t?this.currentExtentViewProj:this.currentExtentDataProj;var e=this.$layer.getExtent();return t?Oi(e):Yo(e,this.resolvedViewProjection,this.resolvedExtentProjection)},setExtent:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ne(null==t||gt(t)&&4===t.length,"Invalid extent"),$t(t=e?Oi(t):Yo(t,this.resolvedExtentProjection,this.resolvedViewProjection),this.currentExtentViewProj)||(this.currentExtentViewProj=t),this.$layer&&!$t(t,this.$layer.getExtent())&&this.$layer.setExtent(t)},getMaxResolution:function(){var t;return St(null===(t=this.$layer)||void 0===t?void 0:t.getMaxResolution(),this.currentMaxResolution)},setMaxResolution:function(t){ne(pt(t=Number(t)),"Invalid max resolution"),t!==this.currentMaxResolution&&(this.currentMaxResolution=t),this.$layer&&t!==this.$layer.getMaxResolution()&&this.$layer.setMaxResolution(t)},getMinResolution:function(){var t;return St(null===(t=this.$layer)||void 0===t?void 0:t.getMinResolution(),this.currentMinResolution)},setMinResolution:function(t){ne(pt(t=Number(t)),"Invalid min resolution"),t!==this.currentMinResolution&&(this.currentMinResolution=t),this.$layer&&t!==this.$layer.getMinResolution()&&this.$layer.getMinResolution(t)},getMaxZoom:function(){var t;return St(null===(t=this.$layer)||void 0===t?void 0:t.getMaxZoom(),this.currentMaxZoom)},setMaxZoom:function(t){ne(pt(t=Number(t)),"Invalid max zoom"),t!==this.currentMaxZoom&&(this.currentMaxZoom=t),this.$layer&&t!==this.$layer.getMaxZoom()&&this.$layer.setMaxZoom(t)},getMinZoom:function(){var t;return St(null===(t=this.$layer)||void 0===t?void 0:t.getMinZoom(),this.currentMinZoom)},setMinZoom:function(t){ne(pt(t=Number(t)),"Invalid min zoom"),t!==this.currentMinZoom&&(this.currentMinZoom=t),this.$layer&&t!==this.$layer.getMinZoom()&&this.$layer.setMinZoom(t)},getOpacity:function(){var t;return St(null===(t=this.$layer)||void 0===t?void 0:t.getOpacity(),this.currentOpacity)},setOpacity:function(t){ne(pt(t=Number(t)),"Invalid opacity"),t!==this.currentOpacity&&(this.currentOpacity=t),this.$layer&&t!==this.$layer.getOpacity()&&this.$layer.setOpacity(t)},getVisible:function(){var t;return St(null===(t=this.$layer)||void 0===t?void 0:t.getVisible(),this.currentVisible)},setVisible:function(t){(t=!!t)!==this.currentVisible&&(this.currentVisible=t),this.$layer&&t!==this.$layer.getVisible()&&this.$layer.setVisible(t)},getZIndex:function(){var t;return St(null===(t=this.$layer)||void 0===t?void 0:t.getZIndex(),this.currentZIndex)},setZIndex:function(t){ne(pt(t=Number(t)),"Invalid zIndex"),t!==this.currentZIndex&&(this.currentZIndex=t),this.$layer&&t!==this.$layer.getZIndex()&&this.$layer.setZIndex(t)},isAtPixel:function(t){var e=this;return be(B.mark((function r(){var n;return B.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.resolveLayer();case 2:return n=r.sent,r.abrupt("return",e.$mapVm.forEachLayerAtPixel(t,(function(t){return t===n})));case 4:case"end":return r.stop()}}),r)})))()},opacityChanged:function(t){this.setOpacity(t)},currentOpacityChanged:function(t){t!==this.opacity&&this.$emit("update:opacity",t)},visibleChanged:function(t){this.setVisible(t)},currentVisibleChanged:function(t){t!==this.visible&&this.$emit("update:visible",t)},extentViewProjChanged:function(t){this.setExtent(t,!0)},currentExtentDataProjChanged:function(t){$t(t,this.extentDataProj)||this.$emit("update:extent",t.slice())},zIndexChanged:function(t){this.setZIndex(t)},currentZIndexChanged:function(t){t!==this.zIndex&&this.$emit("update:zIndex",t)},minResolutionChanged:function(t){this.setMinResolution(t)},currentMinResolutionChanged:function(t){t!==this.minResolution&&this.$emit("update:minResolution",t)},maxResolutionChanged:function(t){this.setMaxResolution(t)},currentMaxResolutionChanged:function(t){t!==this.maxResolution&&this.$emit("update:maxResolution",t)},minZoomChanged:function(t){this.setMinZoom(t)},currentMinZoomChanged:function(t){t!==this.minZoom&&this.$emit("update:minZoom",t)},maxZoomChanged:function(t){this.setMaxZoom(t)},currentMaxZoomChanged:function(t){t!==this.maxZoom&&this.$emit("update:maxZoom",t)}}};function sc(){var t=this;Object.defineProperties(this,{$layer:{enumerable:!0,get:function(){return t.$olObject}},$mapVm:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.mapVm}},$viewVm:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.viewVm}},$layersContainer:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.layersContainer}}})}function uc(){return ac.apply(this,arguments)}function ac(){return(ac=be(B.mark((function t(){var e,r,n=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=te("set"),r=ua(this.$layer,["opacity","visible","zIndex","minResolution","maxResolution","minZoom","maxZoom","extent"],!0,(function(t){return ic(ic({},t),{},{setter:function(r){var i=[r];"extent"===t.prop&&i.push(!0),n[e(t.prop)].apply(n,i)}})})),this.subscribeTo(r,(function(t){return(0,t.setter)(t.value)}));case 3:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var cc="add",lc="remove";function hc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function fc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?hc(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var dc={mixins:[ga,ma],computed:{controlsCollectionIdent:function(){if(this.olObjIdent)return this.makeIdent(this.olObjIdent,"controls_collection")}},watch:fc({},Ya(["controlsCollectionIdent"])),created:function(){this._controlsCollection=this.instanceFactoryCall(this.controlsCollectionIdent,(function(){return new t.Collection})),this._controlSubs={},pc.call(this)},methods:{getServices:function(){var t=this;return{get controlsContainer(){return t}}},subscribeAll:function(){vc.call(this)},initDefaultControls:function(e){var r,i=this;this.getControls().forEach((function(t){t.get("vl_default")&&i.removeControl(t)})),gt(e)||e instanceof t.Collection?r=e:!1!==e&&(r=n.defaults(jt(e)?e:void 0)),r&&(r.forEach((function(t){return t.set("vl_default",!0)})),this.addControls(r))},initializeControl:function(t){var e;return ie(t=(null===(e=t)||void 0===e?void 0:e.$control)||t,n.Control),mi(t)},addControls:function(t){Ft(t,this.addControl.bind(this))},addControl:function(t){t=this.initializeControl(t),this.getControlById(vi(t))||this.$controlsCollection.push(t)},removeControls:function(t){Ft(t,this.removeControl.bind(this))},removeControl:function(t){var e;(t=this.getControlById(vi((null===(e=t)||void 0===e?void 0:e.$control)||t)))&&this.$controlsCollection.remove(t)},clearControls:function(){this.$controlsCollection.clear()},getControls:function(){return this.$controlsCollection.getArray().slice()},getControlsCollection:function(){return this._controlsCollection},getControlById:function(t){return Vt(this.getControls(),(function(e){return vi(e)===t}))},controlsCollectionIdentChanged:function(t,e){t&&e?this.moveInstance(t,e):t&&!e&&this.$controlsCollection?this.setInstance(t,this.$controlsCollection):!t&&e&&this.unsetInstance(e)}}};function pc(){Object.defineProperties(this,{$controlsCollection:{enumerable:!0,get:this.getControlsCollection}})}function vc(){var t=this,e=Xr(sa(this.$controlsCollection,cc).pipe($r((function(e){return fc(fc({},e),{},{element:t.initializeControl(e.element)})})),Hn((function(e){var r=e.element,n=p.getUid(r),i=ua(r,"id",!0);t._controlSubs[n]=t.subscribeTo(i,t.scheduleRefresh.bind(t))}))),sa(this.$controlsCollection,lc).pipe(Hn((function(e){var r=e.element,n=p.getUid(r);t._controlSubs[n]&&(t.unsubscribe(t._controlSubs[n]),delete t._controlSubs[n])})))).pipe(la(Sa));this.subscribeTo(e,function(){var e=be(B.mark((function e(r){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.debounceChanged();case 2:Ft(r,(function(e){var r=e.type,n=e.element;t.$emit(r+"control",n),t.$emit(r+":control",n)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}var gc={mixins:[Qa],created:function(){this._geometry=void 0,this._geometryVm=void 0,mc.call(this)},methods:{getServices:function(){var t=this;return{get geometryContainer(){return t}}},getGeometryTarget:function(){throw new Error("".concat(this.vmName," not implemented method: getGeometryTarget()"))},getGeometry:function(){var t;return St(null===(t=this.getGeometryTarget())||void 0===t?void 0:t.getGeometry(),this._geometry)},getGeometryVm:function(){return this._geometryVm},setGeometry:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ou(t=(null===(e=t)||void 0===e?void 0:e.$geometry)||t)&&(t=r?this.readGeometryInViewProj(t):this.readGeometryInDataProj(t)),t||(t=void 0),ne(!t||t instanceof s.Geometry,"Invalid geometry");var n,i=this.getGeometryTarget();(i&&t!==i.getGeometry()&&(i.setGeometry(t),this.scheduleRefresh()),t!==this._geometry)&&(this._geometry=t,this._geometryVm=(null===(n=t)||void 0===n?void 0:n.vm)&&t.vm[0],this.scheduleRefresh())}}};function mc(){Object.defineProperties(this,{$geometry:{enumerable:!0,get:this.getGeometry},$geometryVm:{enumerable:!0,get:this.getGeometryVm}})}var yc={created:function(){this._style=void 0,bc.call(this)},methods:{getServices:function(){var t=this;return{get styleContainer(){return t}}},getDefaultStyle:function(){},getStyleTarget:function(){throw new Error("".concat(this.vmName," not implemented method: getStyleTarget()"))},getStyle:function(){var t;return St(null===(t=this.getStyleTarget())||void 0===t?void 0:t.getStyle(),this._style)},addStyle:function(t){if(t){var e=(null==t?void 0:t.$style)||t,r=this._style;bt(e)?r=t:(gt(r)||(r=[]),r.includes(e)||r.push(e)),this.setStyle(r)}},removeStyle:function(t){var e;if(t){t=(null===(e=t)||void 0===e?void 0:e.$style)||t;var r=this._style;(r===t||gt(r)&&0===(r=r.filter((function(e){return e!==t}))).length)&&(r=void 0),this.setStyle(r)}},setStyle:function(t){t||(t=void 0),t&&(Wt(t,"$style")||Wt(t,"$styleFunction")?t=t.$style||t.$styleFunction:gt(t)&&(t=t.map((function(t){return(null==t?void 0:t.$style)||t}))),bt(t)?t=this.createStyleFunc(t,this.getDefaultStyle()):(gt(t)||(t=[t]),t.length>0||(t=void 0)));var e=this.getStyleTarget();e&&!$t(t,e.getStyle())&&(e.setStyle(t),this.scheduleRefresh()),$t(t,this._style)||(this._style=t,this.scheduleRefresh())},createStyleFunc:function(t,e){return function(r,n){var i;if(r.getGeometry())return t&&bt(t)?i=t(r,n):gt(t)&&(i=t.slice()),null==i||gt(i)&&i.length||i instanceof l.Style?i:e?bt(e)?e(r,n):e:null}}}};function bc(){Object.defineProperties(this,{$style:{enumerable:!0,get:this.getStyle}})}function Oc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var wc={mixins:[tc,Qa,gc,yc,Ca,rc],stubVNode:{empty:!1,attrs:function(){return{id:this.vmId,class:this.vmClass}}},props:{properties:{type:Object,default:ut}},data:function(){return{viewProjection:$o,dataProjection:$o,currentProperties:Qt(this.properties),currentGeometryName:"geometry"}},computed:{geometryDataProj:function(){if(this.rev&&this.$geometry)return this.writeGeometryInDataProj(this.$geometry)},geometryViewProj:function(){if(this.rev&&this.$geometry)return this.writeGeometryInViewProj(this.$geometry)},pointDataProj:function(){return this.pointToDataProj(this.pointViewProj)},pointViewProj:function(){if(this.rev&&this.$geometry)return bo(this.$geometry)},style:function(){var t=this;if(this.rev&&this.$style){var e=this.$style;if(bt(e))return e;if(e)return gt(e)||(e=[e]),e.map((function(e){return As(e,(function(e){return t.writeGeometryInDataProj(e)}))}))}}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Oc(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({rev:function(){this.$feature&&($t(this.currentProperties,lu(this.$feature))||(this.currentProperties=lu(this.$feature)),this.currentGeometryName!==this.$feature.getGeometryName()&&(this.currentGeometryName=this.$feature.getGeometryName()))}},Ya(["properties","currentProperties","currentGeometryName","geometryDataProj","pointDataProj","style"],["properties","currentProperties","geometryDataProj","pointDataProj","style"])),created:function(){jc.call(this)},methods:{beforeInit:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Ca.methods.beforeInit.call(t),rc.methods.beforeInit.call(t)]);case 2:case"end":return e.stop()}}),e)})))()},createOlObject:function(){var t=au(this.createFeature(),this.currentId);return t.setGeometryName(this.currentGeometryName),t.setGeometry(this.$geometry),t.setStyle(this.$style),t},createFeature:function(){return new t.Feature(this.currentProperties)},beforeMount:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oi((function(){return null!=t.$geometryVm}),tn(t.$olObjectEvents.pipe(Jr((function(t){var e=t.name,r=t.args;return e===$a.ERROR&&r[0]instanceof za}))),aa(t.$eventBus,Xu.ERROR).pipe(Jr((function(e){var r,n=ec(e,2),i=n[0],o=n[1];return(Za(i)||Ba(i))&&Wt(o,"$geometry")&&(null===(r=o.$vq)||void 0===r?void 0:r.closest(t))})))).pipe(Fn(!0)));case 3:return e.abrupt("return",Ca.methods.beforeMount.call(t));case 6:throw e.prev=6,e.t0=e.catch(0),e.t0.message="".concat(t.vmName," wait for $geometry failed: ").concat(e.t0.message),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))()},mount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=t.$featuresContainer)||void 0===r||r.addFeature(t),e.abrupt("return",Ca.methods.mount.call(t));case 2:case"end":return e.stop()}}),e)})))()},unmount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=t.$featuresContainer)||void 0===r||r.removeFeature(t),e.abrupt("return",Ca.methods.unmount.call(t));case 2:case"end":return e.stop()}}),e)})))()},subscribeAll:function(){Ca.methods.subscribeAll.call(this),Pc.call(this)},getServices:function(){var t=this;return je(Ca.methods.getServices.call(this),gc.methods.getServices.call(this),yc.methods.getServices.call(this),{get featureVm(){return t}})},getIdInternal:function(){return su(this.$feature)},setIdInternal:function(t){t!==this.getIdInternal()&&uu(this.$feature,t)},resolveFeature:Ca.methods.resolveOlObject,getGeometryTarget:function(){return this.$feature},getStyleTarget:function(){return this.$feature},getGeometryName:function(){var t;return St(null===(t=this.$feature)||void 0===t?void 0:t.getGeometryName(),this.currentGeometryName)},setGeometryName:function(t){ne(vt(t)&&!Ct(t),"Invalid geometry name"),t!==this.currentGeometryName&&(this.currentGeometryName=t),this.$feature&&t!==this.$feature.getGeometryName()&&this.$feature.setGeometryName(t)},getProperties:function(){return St(this.$feature&&lu(this.$feature),this.currentProperties)},setProperties:function(t){$t(t=lu({properties:t}),this.currentProperties)||(this.currentProperties=t),this.$feature&&!$t(t,lu(this.$feature))&&hu(this.$feature,t)},isAtPixel:function(t){var e=this;return be(B.mark((function r(){var n,i,o;return B.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.resolveFeature();case 2:if(n=r.sent,!e.$layerVm){r.next=8;break}return r.next=6,e.$layerVm.resolveLayer();case 6:o=r.sent,i=function(t){return t===o};case 8:return r.abrupt("return",e.$mapVm.forEachFeatureAtPixel(t,(function(t){return t===n}),{layerFilter:i}));case 9:case"end":return r.stop()}}),r)})))()},propertiesChanged:function(t){this.setProperties(t)},currentPropertiesChanged:function(t){$t(t,this.properties)||this.$emit("update:properties",t&&Qt(t))},currentGeometryNameChanged:function(t,e){t!==e&&this.$emit("update:geometryName",t)},geometryDataProjChanged:function(t,e){$t(t,e)||this.$emit("update:geometry",t&&Qt(t))},pointDataProjChanged:function(t,e){$t(t,e)||this.$emit("update:point",t&&Qt(t))},styleChanged:function(t,e){$t(t,e)||this.$emit("update:style",wt(t)?Qt(t):t)}}};function jc(){var t=this;Object.defineProperties(this,{$feature:{enumerable:!0,get:function(){return t.$olObject}},$layerVm:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.layerVm}},$mapVm:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.mapVm}},$featuresContainer:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.featuresContainer}}})}function Pc(){return Sc.apply(this,arguments)}function Sc(){return(Sc=be(B.mark((function t(){var e,r=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=sa(this.$feature,Xu.PROPERTYCHANGE,(function(t){switch(t.key){case r.$feature.getGeometryName():return{prop:"geometry",value:r.$feature.getGeometry(),setter:function(t){return r.setGeometry(t,!0)}};default:return{prop:"properties",value:lu(r.$feature),setter:r.setProperties}}})).pipe(wn($t)),this.subscribeTo(e,(function(t){return(0,t.setter)(t.value)}));case 2:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var xc={methods:{initializeFeature:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return jt(t=(null===(e=t)||void 0===e?void 0:e.$feature)||t)&&(t=r?this.readFeatureInViewProj(t):this.readFeatureInDataProj(t)),au(t)},updateFeature:function(t,e){var r;if(null===(r=this.$mapVm)||void 0===r||!r.isInteracting()){var n=this.writeFeatureInViewProj(t),i=this.writeFeatureInViewProj(e);if(!$t(n,i)){su(t)!==su(e)&&uu(t,su(e));var o=lu(e);$t(o,lu(t))||hu(t,o),$t(Bt(i,"properties.".concat(Xs))||i.geometry||null,Bt(n,"properties.".concat(Xs))||n.geometry||null)||t.setGeometry(e.getGeometry()||null);var s=e.getStyle(),u=t.getStyle();bt(u)&&bt(s)?u!==s&&t.setStyle(s):bt(s)&&t.setStyle(s),$t(Bt(i,"properties.".concat(Hs))||null,Bt(n,"properties.".concat(Hs))||null)||t.setStyle(s)}}}}};function $c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ic(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$c(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Cc={mixins:[ga,ma,Qa,xc],computed:{featuresCollectionIdent:function(){if(this.olObjIdent)return this.makeIdent(this.olObjIdent,"features_collection")}},watch:Ic({},Ya(["featuresCollectionIdent"])),created:function(){this._featuresCollection=this.instanceFactoryCall(this.featuresCollectionIdent,(function(){return new t.Collection})),this._featureSubs={},Tc.call(this)},methods:{getServices:function(){var t=this;return{get featuresContainer(){return t}}},subscribeAll:function(){_c.call(this)},addFeatures:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ft(t,(function(t){return e.addFeature(t,r)}))},addFeature:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=this.initializeFeature(t,e);var r=this.getFeatureById(su(t));null==r?this.$featuresCollection.push(t):this.updateFeature(r,t)},removeFeatures:function(t){Ft(t,this.removeFeature.bind(this))},removeFeature:function(t){var e;(t=this.getFeatureById(su((null===(e=t)||void 0===e?void 0:e.$feature)||t)))&&this.$featuresCollection.remove(t)},clearFeatures:function(){this.$featuresCollection.clear()},getFeatureById:function(t){return Vt(this.getFeatures(),(function(e){return su(e)===t}))},getFeatures:function(){return this.$featuresCollection.getArray().slice()},getFeaturesCollection:function(){return this._featuresCollection},forEachFeature:function(t){var e;return this.$featuresCollection.forEach((function(){e=t.apply(void 0,arguments)})),e},forEachFeatureInExtent:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=r?Oi(t):this.extentToViewProj(t),this.forEachFeature((function(r){var n=r.getGeometry();if(n&&n.intersectsExtent(t)){var i=e(r);if(i)return i}}))},forEachFeatureIntersectingExtent:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.forEachFeatureInExtent(t,e,r)},getFeaturesAtCoordinate:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getFeaturesInExtent([t[0],t[1],t[0],t[1]],e)},getFeaturesInExtent:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[];return this.forEachFeatureIntersectingExtent(t,(function(t){r.push(t)}),e),r},getClosestFeatureToCoordinate:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t=n?wi(t):this.pointToViewProj(t);var i=1/0;return this.forEachFeature((function(n){if(r(n)){var o=n.getGeometry();if(o){var s=o.getClosestPoint(t),u=i;(i=Math.pow(s[0]-t[0],2)+Math.pow(s[1]-t[1]))<u&&(e=n)}}})),e},getFeaturesExtent:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.forEachFeature((function(e){var r=e.getGeometry();if(r){var n=r.getExtent();t=t?[n[0]<t[0]?n[0]:t[0],n[1]<t[1]?n[1]:t[1],n[2]>t[2]?n[2]:t[2],n[3]>t[3]?n[3]:t[3]]:n}})),e?t:this.extentToDataProj(t)},featuresCollectionIdentChanged:function(t,e){t&&e?this.moveInstance(t,e):t&&!e&&this.$featuresCollection?this.setInstance(t,this.$featuresCollection):!t&&e&&this.unsetInstance(e)}}};function Tc(){Object.defineProperties(this,{$featuresCollection:{enumerable:!0,get:this.getFeaturesCollection}})}function _c(){var t=this,e=sa(this.$featuresCollection,cc).pipe($r((function(e){return Ic(Ic({},e),{},{element:t.initializeFeature(e.element)})})),Hn((function(e){var r=e.element,n=p.getUid(r),i=Xr(sa(r,Xu.PROPERTYCHANGE),sa(r,Bu)).pipe(wn($t));t._featureSubs[n]=t.subscribeTo(i,t.debounceChanged.bind(t))}))),r=Xr(e,sa(this.$featuresCollection,lc).pipe(Hn((function(e){var r=e.element,n=p.getUid(r);t._featureSubs[n]&&(t.unsubscribe(t._featureSubs[n]),delete t._featureSubs[n])})))).pipe($r((function(e){var r=e.type,n=e.element,i=t.resolvedViewProjection,o=t.resolvedDataProjection;return{type:r,feature:n,get json(){return this._json||(this._json=Qs(this.feature,i,o,bi)),this._json}}})),la(Sa));this.subscribeTo(r,function(){var e=be(B.mark((function e(r){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.debounceChanged();case 2:Ft(r,(function(e){t.$emit(e.type+"feature",e),t.$emit(e.type+":feature",e.feature)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}var Ec={created:function(){this._fill=void 0,this._fillVm=void 0,Rc.call(this)},methods:{getServices:function(){var t=this;return{get fillStyleContainer(){return t}}},getFillStyleTarget:function(){throw new Error("".concat(this.vmName," not implemented method: getFillStyleTarget()"))},getFill:function(){var t;return St(null===(t=this.getFillStyleTarget())||void 0===t?void 0:t.getFill(),this._fill)},getFillVm:function(){return this._fillVm},setFill:function(t){var e,r;((t=(null===(e=t)||void 0===e?void 0:e.$style)||t)||(t=void 0),ne(!t||t instanceof l.Fill,"Invalid fill style"),t!==this._fill)&&(this._fill=t,this._fillVm=(null===(r=t)||void 0===r?void 0:r.vm)&&t.vm[0],this.scheduleRefresh());var n=this.getFillStyleTarget();n&&t!==n.getFill()&&(n.setFill(t),this.scheduleRefresh())}}};function Rc(){Object.defineProperties(this,{$fill:{enumerable:!0,get:this.getFill},$fillVm:{enumerable:!0,get:this.getFillVm}})}function Fc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var kc={mixins:[tc,Qa,Ca,rc],stubVNode:{empty:function(){return this.vmId}},data:function(){return{viewProjection:$o,dataProjection:$o,extentViewProj:void 0}},computed:{type:function(){if(this.rev&&this.$geometry)return this.getType()},extentDataProj:function(){return this.extentToDataProj(this.extentViewProj)}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Fc(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({rev:function(){this.$geometry&&($t(this.extentViewProj,this.$geometry.getExtent())||(this.extentViewProj=this.$geometry.getExtent().slice()))}},Ya(["extentDataProj"],["extentDataProj"])),created:function(){Dc.call(this)},methods:{beforeInit:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Ca.methods.beforeInit.call(t),rc.methods.beforeInit.call(t)]);case 2:case"end":return e.stop()}}),e)})))()},createOlObject:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=jo,e.next=3,t.createGeometry();case 3:return e.t1=e.sent,e.t2=t.currentId,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})))()},createGeometry:function(){throw new Error("".concat(this.vmName," not implemented method: createGeometry()"))},mount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=t.$geometryContainer)||void 0===r||r.setGeometry(t),e.abrupt("return",Ca.methods.mount.call(t));case 2:case"end":return e.stop()}}),e)})))()},unmount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(null===(r=t.$geometryContainer)||void 0===r?void 0:r.getGeometryVm())===t&&t.$geometryContainer.setGeometry(null),e.abrupt("return",Ca.methods.unmount.call(t));case 2:case"end":return e.stop()}}),e)})))()},getServices:function(){var t=this;return je(Ca.methods.getServices.call(this),{get geometryVm(){return t}})},subscribeAll:function(){Ca.methods.subscribeAll.call(this),Vc.call(this)},getIdInternal:function(){return Oo(this.$geometry)},setIdInternal:function(t){t!==this.getIdInternal()&&wo(this.$geometry,t)},resolveGeometry:Ca.methods.resolveOlObject,getType:function(){var t;return St(null===(t=this.$geometry)||void 0===t?void 0:t.getType(),this.type)},getExtent:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=St(null===(t=this.$geometry)||void 0===t?void 0:t.getExtent(),this.extentViewProj);return e?Oi(r):this.extentToDataProj(r)},getClosestPoint:function(t){var e=arguments,r=this;return be(B.mark((function n(){var i,o;return B.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>1&&void 0!==e[1]&&e[1],t=i?wi(t):r.pointToViewProj(t),n.next=4,r.resolveGeometry();case 4:return o=n.sent.getClosestPoint(t),n.abrupt("return",i?wi(o):r.pointToDataProj(o));case 6:case"end":return n.stop()}}),n)})))()},intersectsCoordinate:function(t){var e=arguments,r=this;return be(B.mark((function n(){var i;return B.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>1&&void 0!==e[1]&&e[1],t=i?wi(t):r.pointToViewProj(t),n.next=4,r.resolveGeometry();case 4:return n.abrupt("return",n.sent.intersectsCoordinate(t));case 5:case"end":return n.stop()}}),n)})))()},intersectsExtent:function(t){var e=arguments,r=this;return be(B.mark((function n(){var i;return B.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>1&&void 0!==e[1]&&e[1],t=i?Oi(t):r.extentToViewProj(t),n.next=4,r.resolveGeometry();case 4:return n.abrupt("return",n.sent.intersectsExtent(t));case 5:case"end":return n.stop()}}),n)})))()},rotate:function(t,e){var r=arguments,n=this;return be(B.mark((function i(){var o;return B.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=r.length>2&&void 0!==r[2]&&r[2],e=o?wi(e):n.pointToViewProj(e),i.next=4,n.resolveGeometry();case 4:i.sent.rotate(t,e);case 5:case"end":return i.stop()}}),i)})))()},scale:function(t,e,r){var n=arguments,i=this;return be(B.mark((function o(){var s,u,a,c,l;return B.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s=n.length>3&&void 0!==n[3]&&n[3],r=s?wi(r):i.pointToViewProj(r),u=s?wi([t,0]):i.pointToViewProj([t,0]),a=ec(u,1),t=a[0],c=s?wi([0,e]):i.pointToViewProj([0,e]),l=ec(c,2),e=l[1],o.next=10,i.resolveGeometry();case 10:o.sent.scale(t,e,r);case 11:case"end":return o.stop()}}),o)})))()},simplify:function(t){var e=this;return be(B.mark((function r(){return B.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.resolveGeometry();case 2:return r.abrupt("return",r.sent.simplify(t));case 3:case"end":return r.stop()}}),r)})))()},translate:function(t,e){var r=arguments,n=this;return be(B.mark((function i(){var o,s,u,a,c;return B.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=r.length>2&&void 0!==r[2]&&r[2],s=o?wi([t,0]):n.pointToViewProj([t,0]),u=ec(s,1),t=u[0],a=o?wi([0,e]):n.pointToViewProj([0,e]),c=ec(a,2),e=c[1],i.next=9,n.resolveGeometry();case 9:return i.abrupt("return",i.sent.translate(t,e));case 10:case"end":return i.stop()}}),i)})))()},extentDataProjChanged:function(t,e){$t(t,e)||this.$emit("update:extent",null==t?void 0:t.slice())}}};function Dc(){var t=this;Object.defineProperties(this,{$geometry:{enumerable:!0,get:function(){return t.$olObject}},$mapVm:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.mapVm}},$viewVm:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.viewVm}},$geometryContainer:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.geometryContainer}}})}function Vc(){return Lc.apply(this,arguments)}function Lc(){return(Lc=be(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Ac="prerender",Nc="postrender",Mc="precompose",Gc="postcompose",Uc="rendercomplete",zc={created:function(){this._source=void 0,this._sourceVm=void 0,Zc.call(this)},methods:{getServices:function(){var t=this;return{get sourceContainer(){return t}}},getSourceTarget:function(){throw new Error("".concat(this.vmName," not implemented method: getSourceTarget()"))},getSource:function(){var t;return St(null===(t=this.getSourceTarget())||void 0===t?void 0:t.getSource(),this._source)},getSourceVm:function(){return this._sourceVm},setSource:function(t){var r;(t=(null===(r=t)||void 0===r?void 0:r.$source)||t)||(t=void 0),ne(!t||t instanceof e.Source,"Invalid source");var n,i=this.getSourceTarget();(i&&t!==i.getSource()&&(i.setSource(t),this.scheduleRefresh()),t!==this._source)&&(this._source=t,this._sourceVm=(null===(n=t)||void 0===n?void 0:n.vm)&&t.vm[0],this.scheduleRefresh())}}};function Zc(){Object.defineProperties(this,{$source:{enumerable:!0,get:this.getSource},$sourceVm:{enumerable:!0,get:this.getSourceVm}})}function Bc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Wc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bc(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Yc={mixins:[zc,oc],props:{render:Function,overlay:{type:Boolean,default:!1}},computed:{source:function(){if(this.rev&&this.$source)return{id:Iu(this.$source),type:this.$source.constructor.name}}},watch:Wc({},Ya(["source","render","overlay"],["source"])),methods:{mount:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.overlay||!t.$mapVm){e.next=3;break}return t.setMap(t.$mapVm),e.abrupt("return");case 3:return e.abrupt("return",oc.methods.mount.call(t));case 4:case"end":return e.stop()}}),e)})))()},unmount:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.overlay){e.next=3;break}return t.setMap(null),e.abrupt("return");case 3:return e.abrupt("return",oc.methods.unmount.call(t));case 4:case"end":return e.stop()}}),e)})))()},getServices:function(){return je(oc.methods.getServices.call(this),zc.methods.getServices.call(this))},subscribeAll:function(){oc.methods.subscribeAll.call(this),qc.call(this)},getSourceTarget:function(){return this.$layer},getRenderer:function(){var t;return null===(t=this.$layer)||void 0===t?void 0:t.getRenderer()},setMap:function(t){var e,r;t=(null===(e=t)||void 0===e?void 0:e.$map)||t,null===(r=this.$layer)||void 0===r||r.setMap(t)},sourceChanged:function(t,e){t!==e&&this.$emit("update:source",t)}}};function qc(){return Xc.apply(this,arguments)}function Xc(){return(Xc=be(B.mark((function t(){var e,r,n,i=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=te("set"),r=ua(this.$layer,"source",!0).pipe(Hn((function(t){var e=t.value;i._sourceSubs&&i.unsubscribe(i._sourceSubs),e&&(i._sourceSubs=i.subscribeTo(ua(e,"id",!0),i.scheduleRefresh.bind(i)))})),$r((function(t){return Wc(Wc({},t),{},{setter:i[e(t.prop)]})}))),this.subscribeTo(r,(function(t){return(0,t.setter)(t.value)})),n=sa(this.$layer,[Ac,Nc]),this.subscribeTo(n,(function(t){return i.$emit(t.type,t)}));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var Hc={mixins:[Yc]},Jc={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"};function Kc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var Qc=ht(vt,bt,(function(t){return gt(t)&&t.every(vt)})),tl={mixins:[tc,Qa,Ca,rc],stubVNode:{empty:function(){return this.vmId}},props:{attributions:{type:[String,Array,Function],validator:Qc},attributionsCollapsible:{type:Boolean,default:!0},projection:{type:String,validator:function(t){return!!c.get(t)}},wrapX:{type:Boolean,default:!0},state:{type:String,default:Jc.READY,validator:function(t){return Object.values(Jc).includes(t)}}},data:function(){return{viewProjection:$o,dataProjection:$o,currentAttributions:nl(this.attributions),currentState:this.state}},computed:{inputAttributions:function(){return nl(this.attributions)},currentResolutions:function(){return this.rev?this.getResolutions():[]},resolvedDataProjection:function(){var t;return St(this.projection,this.dataProjection,null===(t=this.$options)||void 0===t?void 0:t.dataProjection,this.resolvedViewProjection)}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Kc(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({rev:function(){this.$source&&(this.currentAttributions!==this.$source.getAttributions()&&(this.currentAttributions=this.$source.getAttributions()),this.currentState!==this.$source.getState()&&(this.currentState=this.$source.getState()))}},Ya(["inputAttributions","currentAttributions","state","currentState","attributionsCollapsible","projection","wrapX","currentResolutions"],["inputAttributions","currentAttributions","currentResolutions"])),created:function(){el.call(this)},methods:{beforeInit:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Ca.methods.beforeInit.call(t),rc.methods.beforeInit.call(t)]);case 2:case"end":return e.stop()}}),e)})))()},createOlObject:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Tu,e.next=3,t.createSource();case 3:return e.t1=e.sent,e.t2=t.currentId,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})))()},createSource:function(){throw new Error("".concat(this.vmName," not implemented method: createSource()"))},mount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=t.$sourceContainer)||void 0===r||r.setSource(t),e.abrupt("return",Ca.methods.mount.call(t));case 2:case"end":return e.stop()}}),e)})))()},unmount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(null===(r=t.$sourceContainer)||void 0===r?void 0:r.getSourceVm())===t&&t.$sourceContainer.setSource(null),e.abrupt("return",Ca.methods.unmount.call(t));case 2:case"end":return e.stop()}}),e)})))()},refresh:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resolveSource();case 2:return r=e.sent,e.abrupt("return",new Promise((function(t){r.once("change",(function(){return t()})),r.refresh()})));case 4:case"end":return e.stop()}}),e)})))()},getServices:function(){var t=this;return je(Ca.methods.getServices.call(this),{get sourceVm(){return t}})},subscribeAll:function(){Ca.methods.subscribeAll.call(this),rl.call(this)},getIdInternal:function(){return Iu(this.$source)},setIdInternal:function(t){t!==this.getIdInternal()&&Cu(this.$source,t)},resolveSource:Ca.methods.resolveOlObject,getAttributions:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getAttributions(),this.currentAttributions)},setAttributions:function(t){ne(!t||Qc(t),"Invalid attributions"),$t(t=nl(t),this.currentAttributions)||(this.currentAttributions=t),this.$source&&!$t(t,this.$source.getAttributions())&&this.$source.setAttributions(t)},getAttributionsCollapsible:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getAttributionsCollapsible(),this.attributionsCollapsible)},getProjection:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getProjection(),c.get(this.resolvedDataProjection))},getState:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getState(),this.currentState)},getWrapX:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getWrapX(),this.wrapX)},getResolutions:function(){try{var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getResolutions(),[])}catch(t){return[]}},inputAttributionsChanged:function(t){this.setAttributions(t)},currentAttributionsChanged:function(t){$t(t,this.inputAttributions)||this.$emit("update:attributions",t)},stateChanged:function(t){if(t!==this.currentState)return this.currentState=t,this.scheduleRecreate()},currentStateChanged:function(t){t!==this.state&&this.$emit("update:state",t)},currentResolutionsChanged:function(t,e){$t(t,e)||this.$emit("update:resolutions",null==t?void 0:t.slice())}}};function el(){var t=this;Object.defineProperties(this,{$source:{enumerable:!0,get:function(){return t.$olObject}},$mapVm:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.mapVm}},$viewVm:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.viewVm}},$sourceContainer:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.sourceContainer}}})}function rl(){}function nl(t){if(t)return bt(t)?t:function(){return gt(t)?t:[t]}}function il(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ol(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?il(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):il(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var sl="imageloadstart",ul="imageloadend",al="imageloaderror",cl={mixins:[tl],props:{projection:ol(ol({},tl.props.projection),{},{default:$o}),resolutions:Array},computed:{inputResolutions:function(){var t;return null===(t=this.resolutions)||void 0===t?void 0:t.slice()}},watch:ol({},Ya(["inputResolutions"],["inputResolutions"])),methods:{subscribeAll:function(){tl.methods.subscribeAll.call(this),ll.call(this)},attributionsCollapsibleChanged:it,wrapXChanged:it}};function ll(){return hl.apply(this,arguments)}function hl(){return(hl=be(B.mark((function t(){var e,r=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=sa(this.$source,[sl,ul,al]),this.subscribeTo(e,(function(t){return r.$emit(t.type,t)}));case 2:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var fl={mixins:[tc,Ca],stubVNode:{empty:function(){return this.vmId}},created:function(){dl.call(this)},methods:{beforeInit:function(){return Ca.methods.beforeInit.call(this)},createOlObject:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ts,e.next=3,t.createStyle();case 3:return e.t1=e.sent,e.t2=t.currentId,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})))()},createStyle:function(){throw new Error("".concat(this.vmName," not implemented method: createStyle()"))},mount:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ca.methods.mount.call(t);case 2:case"end":return e.stop()}}),e)})))()},unmount:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ca.methods.unmount.call(t);case 2:case"end":return e.stop()}}),e)})))()},remount:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ca.methods.remount.call(t);case 2:return e.next=4,t.refresh();case 4:if(!t.$mapVm){e.next=7;break}return e.next=7,t.$mapVm.render();case 7:case"end":return e.stop()}}),e)})))()},refresh:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ca.methods.refresh.call(t);case 2:case"end":return e.stop()}}),e)})))()},getServices:function(){var t=this;return je(Ca.methods.getServices.call(this),{get styleVm(){return t}})},subscribeAll:function(){Ca.methods.subscribeAll.call(this)},setId:function(t){ne(null!=t&&""!==t,"Invalid id"),this.currentId!==t&&(this.currentId=t,this.scheduleRefresh()),this.$olObject&&this.setIdInternal(t)},getIdInternal:function(){return Is(this.$style)},setIdInternal:function(t){t!==this.getIdInternal()&&(Cs(this.$style,t),this.scheduleRefresh())},resolveStyle:Ca.methods.resolveOlObject,syncNonObservable:function(){Ca.methods.syncNonObservable.call(this)}}};function dl(){var t=this;Object.defineProperties(this,{$style:{enumerable:!0,get:function(){return t.$olObject}},$styleContainer:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.styleContainer}}})}function pl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var vl={mixins:[fl],stubVNode:{empty:!1,attrs:function(){return{id:this.vmId,class:this.vmClass}}},props:{opacity:{type:Number,default:1},rotateWithView:Boolean,rotation:{type:Number,default:0},scale:{type:Number,default:1},displacement:{type:Array,default:function(){return[0,0]}}},data:function(){return{currentOpacity:this.opacity,currentRotateWithView:this.rotateWithView,currentRotation:this.rotation,currentScale:this.scale}},computed:{inputDisplacement:function(){var t;return null===(t=this.displacement)||void 0===t?void 0:t.slice()}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pl(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pl(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({rev:function(){this.$style&&(this.setOpacity(this.getOpacity()),this.setRotateWithView(this.getRotateWithView()),this.setRotation(this.getRotation()),this.setScale(this.getScale()))}},Ya(["opacity","currentOpacity","rotateWithView","currentRotateWithView","rotation","currentRotation","scale","currentScale","inputDisplacement"],["inputDisplacement"])),created:function(){gl.call(this)},methods:{mount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=t.$imageStyleContainer)||void 0===r||r.setImage(t),e.abrupt("return",fl.methods.mount.call(t));case 2:case"end":return e.stop()}}),e)})))()},unmount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(r=t.$imageStyleContainer)||void 0===r?void 0:r.getImageVm())!==t){e.next=3;break}return e.next=3,t.$imageStyleContainer.setImage(null);case 3:return e.abrupt("return",fl.methods.unmount.call(t));case 4:case"end":return e.stop()}}),e)})))()},refresh:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([fl.methods.refresh.call(t),null===(r=t.$imageStyleContainer)||void 0===r?void 0:r.refresh()]);case 2:case"end":return e.stop()}}),e)})))()},syncNonObservable:function(){fl.methods.syncNonObservable.call(this),this.setOpacity(this.getOpacity()),this.setRotateWithView(this.getRotateWithView()),this.setRotation(this.getRotation()),this.setScale(this.getScale())},getOpacity:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getOpacity(),this.currentOpacity)},setOpacity:function(t){t!==this.currentOpacity&&(this.currentOpacity=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getOpacity()&&(this.$style.setOpacity(t),this.scheduleRefresh())},getRotateWithView:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getRotateWithView(),this.currentRotateWithView)},setRotateWithView:function(t){t!==this.currentRotateWithView&&(this.currentRotateWithView=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getRotateWithView()&&(this.$style.setRotateWithView(t),this.scheduleRefresh())},getRotation:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getRotation(),this.currentRotation)},setRotation:function(t){t!==this.currentRotation&&(this.currentRotation=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getRotation()&&(this.$style.setRotation(t),this.scheduleRefresh())},getScale:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getScale(),this.currentScale)},setScale:function(t){t!==this.currentScale&&(this.currentScale=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getScale()&&(this.$style.setScale(t),this.scheduleRefresh())},getDisplacement:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getDisplacement(),this.inputDisplacement)},opacityChanged:function(t){this.setOpacity(t)},currentOpacityChanged:function(t){t!==this.opacity&&this.$emit("update:opacity",t)},rotateWithViewChanged:function(t){this.setRotateWithView(t)},currentRotateWithViewChanged:function(t){t!==this.rotateWithView&&this.$emit("update:rotateWithView",t)},rotationChanged:function(t){this.setRotation(t)},currentRotationChanged:function(t){t!==this.rotation&&this.$emit("update:rotation",t)},scaleChanged:function(t){this.setScale(t)},currentScaleChanged:function(t){t!==this.scale&&this.$emit("update:scale",t)}}};function gl(){var t=this;Object.defineProperties(this,{$imageStyleContainer:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.imageStyleContainer}}})}var ml={created:function(){this._image=void 0,this._imageVm=void 0,yl.call(this)},methods:{getServices:function(){var t=this;return{get imageStyleContainer(){return t}}},getImageStyleTarget:function(){throw new Error("".concat(this.vmName," not implemented method: getImageStyleTarget()"))},getImage:function(){var t;return St(null===(t=this.getImageStyleTarget())||void 0===t?void 0:t.getImage(),this._image)},getImageVm:function(){return this._imageVm},setImage:function(t){var e;(t=(null===(e=t)||void 0===e?void 0:e.$style)||t)||(t=void 0),ne(!t||t instanceof l.Image,"Invalid image style");var r,n=this.getImageStyleTarget();(n&&t!==n.getImage()&&(n.setImage(t),this.scheduleRefresh()),t!==this._image)&&(this._image=t,this._imageVm=(null===(r=t)||void 0===r?void 0:r.vm)&&t.vm[0],this.scheduleRefresh())}}};function yl(){Object.defineProperties(this,{$image:{enumerable:!0,get:this.getImage},$imageVm:{enumerable:!0,get:this.getImageVm}})}function bl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ol(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?bl(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bl(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var wl={mixins:[tc,Qa,Ca,rc],stubVNode:{empty:function(){return this.vmId}},props:{active:{type:Boolean,default:!0},priority:{type:Number,default:0}},data:function(){return{viewProjection:$o,dataProjection:$o,currentActive:this.active,currentPriority:this.priority,interacting:!1}},watch:Ol({rev:function(){this.$interaction&&(this.currentActive!==this.$interaction.getActive()&&(this.currentActive=this.$interaction.getActive()),this.currentPriority!==pu(this.$interaction)&&(this.currentPriority=pu(this.$interaction)))}},Ya(["active","currentActive","priority","currentPriority"])),created:function(){jl.call(this)},methods:{beforeInit:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Ca.methods.beforeInit.call(t),rc.methods.beforeInit.call(t)]);case 2:case"end":return e.stop()}}),e)})))()},createOlObject:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=gu,e.next=3,t.createInteraction();case 3:return e.t1=e.sent,e.t2=t.currentId,e.t3=t.currentPriority,(r=(0,e.t0)(e.t1,e.t2,e.t3)).setActive(t.currentActive),r.set("interacting",t.interacting),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))()},createInteraction:function(){throw new Error("".concat(this.vmName," not implemented method: createInteraction()"))},mount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=t.$interactionsContainer)||void 0===r||r.addInteraction(t),e.abrupt("return",Ca.methods.mount.call(t));case 2:case"end":return e.stop()}}),e)})))()},unmount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=t.$interactionsContainer)||void 0===r||r.removeInteraction(t),e.abrupt("return",Ca.methods.unmount.call(t));case 2:case"end":return e.stop()}}),e)})))()},getServices:function(){var t=this;return je(Ca.methods.getServices.call(this),{get interactionVm(){return t}})},subscribeAll:function(){Ca.methods.subscribeAll.call(this),Pl.call(this)},resolveInteraction:Ca.methods.resolveOlObject,getIdInternal:function(){return fu(this.$interaction)},setIdInternal:function(t){t!==this.getIdInternal()&&du(this.$interaction,t)},getActive:function(){var t;return St(null===(t=this.$interaction)||void 0===t?void 0:t.getActive(),this.currentActive)},setActive:function(t){(t=!!t)!==this.currentActive&&(this.currentActive=t),this.$interaction&&t!==this.$interaction.getActive()&&this.$interaction.setActive(t)},getPriority:function(){return St(this.$interaction&&pu(this.$interaction),this.currentPriority)},setPriority:function(t){var e;ne(pt(t),"Invalid priority"),t!==this.currentPriority&&(this.currentPriority=t),this.$interaction&&t!==pu(this.$interaction)&&vu(this.$interaction,t),null===(e=this.$interactionsContainer)||void 0===e||e.sortInteractions()},getMap:function(){var t;return St(null===(t=this.$interaction)||void 0===t?void 0:t.getMap(),this.$map)},setInteracting:function(t){(t=!!t)!==this.interacting&&(this.interacting=t),this.$interaction&&t!==this.$interaction.get("interacting")&&this.$interaction.set("interacting",t)},isInteracting:function(){var t;return St(null===(t=this.$interaction)||void 0===t?void 0:t.get("interacting"),this.interacting)},activeChanged:function(t){this.setActive(t)},currentActiveChanged:function(t){t!==this.active&&this.$emit("update:active",t)},priorityChanged:function(t){this.setPriority(t)},currentPriorityChanged:function(t){t!==this.priority&&this.$emit("update:priority",t)}}};function jl(){var t=this;Object.defineProperties(this,{$interaction:{enumerable:!0,get:function(){return t.$olObject}},$mapVm:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.mapVm}},$viewVm:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.viewVm}},$interactionsContainer:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.interactionsContainer}}})}function Pl(){return Sl.apply(this,arguments)}function Sl(){return(Sl=be(B.mark((function t(){var e,r,n=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=te("current"),r=ua(this.$interaction,["active","priority"],!0,(function(t){return Ol(Ol({},t),{},{setter:n[e(t.prop)]})})),this.subscribeTo(r,(function(t){return(0,t.setter)(t.value)}));case 3:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function xl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xl(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xl(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Il={mixins:[ga,ma],computed:{interactionsCollectionIdent:function(){if(this.olObjIdent)return this.makeIdent(this.olObjIdent,"interactions_collection")}},watch:$l({},Ya(["interactionsCollectionIdent"])),created:function(){this._interactionsCollection=this.instanceFactoryCall(this.interactionsCollectionIdent,(function(){return new t.Collection})),this._interactionSubs={},Cl.call(this)},methods:{getServices:function(){var t=this;return{get interactionsContainer(){return t}}},subscribeAll:function(){Tl.call(this)},initDefaultInteractions:function(e){var r,n=this;this.getInteractions().forEach((function(t){t.get("vl_default")&&n.removeInteraction(t)})),gt(e)||e instanceof t.Collection?r=e:!1!==e&&(r=h.defaults(jt(e)?this.defaultInteractions:void 0)),r&&(r.forEach((function(t){return t.set("vl_default",!0)})),this.addInteractions(r))},initializeInteraction:function(t){var e;return ie(t=(null===(e=t)||void 0===e?void 0:e.$interaction)||t,h.Interaction),gu(t)},addInteractions:function(t){Ft(t,this.addInteraction.bind(this))},addInteraction:function(t){t=this.initializeInteraction(t),this.getInteractionById(fu(t))||(this.$interactionsCollection.push(t),this.sortInteractions())},removeInteractions:function(t){Ft(t,this.removeInteraction.bind(this))},removeInteraction:function(t){var e;(t=this.getInteractionById(fu((null===(e=t)||void 0===e?void 0:e.$interaction)||t)))&&(this.$interactionsCollection.remove(t),this.sortInteractions())},clearInteractions:function(){this.$interactionsCollection.clear()},getInteractions:function(){return this.$interactionsCollection.getArray().slice()},getInteractionsCollection:function(){return this._interactionsCollection},getInteractionById:function(t){return Vt(this.getInteractions(),(function(e){return fu(e)===t}))},sortInteractions:function(t){t||(t=this.getDefaultInteractionsSorter()),this.$interactionsCollection.getArray().sort(t)},getDefaultInteractionsSorter:function(){return function(t,e){var r=pu(t)||0,n=pu(e)||0;return r===n?0:r-n}},interactionsCollectionIdentChanged:function(t,e){t&&e?this.moveInstance(t,e):t&&!e&&this.$interactionsCollection?this.setInstance(t,this.$interactionsCollection):!t&&e&&this.unsetInstance(e)}}};function Cl(){Object.defineProperties(this,{$interactionsCollection:{enumerable:!0,get:this.getInteractionsCollection}})}function Tl(){var t=this,e=Xr(sa(this.$interactionsCollection,cc).pipe($r((function(e){return $l($l({},e),{},{element:t.initializeInteraction(e.element)})})),Hn((function(e){var r=e.element,n=p.getUid(r),i=ua(r,"id",!0);t._interactionSubs[n]=t.subscribeTo(i,t.scheduleRefresh.bind(t))}))),sa(this.$interactionsCollection,lc).pipe(Hn((function(e){var r=e.element,n=p.getUid(r);t._interactionSubs[n]&&(t.unsubscribe(t._interactionSubs[n]),delete t._interactionSubs[n])})))).pipe(la(Sa));this.subscribeTo(e,function(){var e=be(B.mark((function e(r){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.debounceChanged();case 2:Ft(r,(function(e){var r=e.type,n=e.element;t.$emit(r+"interaction",n),t.$emit(r+":interaction",n)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function _l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function El(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_l(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Rl={mixins:[ga,ma],computed:{layersCollectionIdent:function(){if(this.olObjIdent)return this.makeIdent(this.olObjIdent,"layers_collection")}},watch:El({},Ya(["layersCollectionIdent"])),created:function(){this._layersCollection=this.instanceFactoryCall(this.layersCollectionIdent,(function(){return new t.Collection})),this._layerSubs={},Fl.call(this)},methods:{getServices:function(){var t=this;return{get layersContainer(){return t}}},subscribeAll:function(){kl.call(this)},initializeLayer:function(t){var e;return ie(t=(null===(e=t)||void 0===e?void 0:e.$layer)||t,x.default),bu(t)},addLayers:function(t){Ft(t,this.addLayer.bind(this))},addLayer:function(t){t=this.initializeLayer(t),this.getLayerById(mu(t))||this.$layersCollection.push(t)},removeLayers:function(t){Ft(t,this.removeLayer.bind(this))},removeLayer:function(t){var e;(t=this.getLayerById(mu((null===(e=t)||void 0===e?void 0:e.$layer)||t)))&&this.$layersCollection.remove(t)},clearLayers:function(){this.$layersCollection.clear()},getLayers:function(){return this.$layersCollection.getArray().slice()},getLayersCollection:function(){return this._layersCollection},getLayerById:function(t){return Vt(this.getLayers(),(function(e){return mu(e)===t}))},layersCollectionIdentChanged:function(t,e){t&&e?this.moveInstance(t,e):t&&!e&&this.$layersCollection?this.setInstance(t,this.$layersCollection):!t&&e&&this.unsetInstance(e)}}};function Fl(){Object.defineProperties(this,{$layersCollection:{enumerable:!0,get:this.getLayersCollection}})}function kl(){var t=this,e=Xr(sa(this.$layersCollection,cc).pipe($r((function(e){return El(El({},e),{},{element:t.initializeLayer(e.element)})})),Hn((function(e){var r=e.element,n=p.getUid(r),i=ua(r,"id",!0);t._layerSubs[n]=t.subscribeTo(i,t.scheduleRefresh.bind(t))}))),sa(this.$layersCollection,lc).pipe(Hn((function(e){var r=e.element,n=p.getUid(r);t._layerSubs[n]&&(t.unsubscribe(t._layerSubs[n]),delete t._layerSubs[n])})))).pipe(la(Sa));this.subscribeTo(e,function(){var e=be(B.mark((function e(r){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.debounceChanged();case 2:Ft(r,(function(e){var r=e.type,n=e.element;t.$emit(r+"layer",n),t.$emit(r+":layer",n)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function Dl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Vl(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Dl(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dl(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ll={mixins:[ga,ma],computed:{overlaysCollectionIdent:function(){if(this.olObjIdent)return this.makeIdent(this.olObjIdent,"overlays_collection")}},watch:Vl({},Ya(["overlaysCollectionIdent"])),created:function(){this._overlaysCollection=this.instanceFactoryCall(this.overlaysCollectionIdent,(function(){return new t.Collection})),this._overlaySubs={},Al.call(this)},methods:{getServices:function(){var t=this;return{get overlaysContainer(){return t}}},subscribeAll:function(){Nl.call(this)},initializeOverlay:function(e){var r;return ie(e=(null===(r=e)||void 0===r?void 0:r.$overlay)||e,t.Overlay),$u(e)},addOverlays:function(t){Ft(t,this.addOverlay.bind(this))},addOverlay:function(t){t=this.initializeOverlay(t),this.getOverlayById(Su(t))||this.$overlaysCollection.push(t)},removeOverlays:function(t){Ft(t,this.removeOverlay.bind(this))},removeOverlay:function(t){var e;(t=this.getOverlayById(Su((null===(e=t)||void 0===e?void 0:e.$overlay)||t)))&&this.$overlaysCollection.remove(t)},clearOverlays:function(){this.$overlaysCollection.clear()},getOverlays:function(){return this.$overlaysCollection.getArray().slice()},getOverlaysCollection:function(){return this._overlaysCollection},getOverlayById:function(t){return Vt(this.getOverlays(),(function(e){return Su(e)===t}))},overlaysCollectionIdentChanged:function(t,e){t&&e?this.moveInstance(t,e):t&&!e&&this.$overlaysCollection?this.setInstance(t,this.$overlaysCollection):!t&&e&&this.unsetInstance(e)}}};function Al(){Object.defineProperties(this,{$overlaysCollection:{enumerable:!0,get:this.getOverlaysCollection}})}function Nl(){var t=this,e=Xr(sa(this.$overlaysCollection,cc).pipe($r((function(e){return Vl(Vl({},e),{},{element:t.initializeOverlay(e.element)})})),Hn((function(e){var r=e.element,n=p.getUid(r),i=ua(r,"id",!0);t._overlaySubs[n]=t.subscribeTo(i,t.scheduleRefresh.bind(t))}))),sa(this.$overlaysCollection,lc).pipe(Hn((function(e){var r=e.element,n=p.getUid(r);t._overlaySubs[n]&&(t.unsubscribe(t._overlaySubs[n]),delete t._overlaySubs[n])})))).pipe(la(Sa));this.subscribeTo(e,function(){var e=be(B.mark((function e(r){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.debounceChanged();case 2:Ft(r,(function(e){var r=e.type,n=e.element;t.$emit(r+"overlay",n),t.$emit(r+":overlay",n)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}var Ml={created:function(){this._stroke=void 0,this._strokeVm=void 0,Gl.call(this)},methods:{getServices:function(){var t=this;return{get strokeStyleContainer(){return t}}},getStrokeStyleTarget:function(){throw new Error("".concat(this.vmName," not implemented method: getStrokeStyleTarget()"))},getStroke:function(){var t;return St(null===(t=this.getStrokeStyleTarget())||void 0===t?void 0:t.getStroke(),this._stroke)},getStrokeVm:function(){return this._strokeVm},setStroke:function(t){var e;(t=(null===(e=t)||void 0===e?void 0:e.$style)||t)||(t=void 0),ne(!t||t instanceof l.Stroke,"Invalid stroke");var r,n=this.getStrokeStyleTarget();(n&&t!==n.getStroke()&&(n.setStroke(t),this.scheduleRefresh()),t!==this._stroke)&&(this._stroke=t,this._strokeVm=(null===(r=t)||void 0===r?void 0:r.vm)&&t.vm[0],this.scheduleRefresh())}}};function Gl(){Object.defineProperties(this,{$stroke:{enumerable:!0,get:this.getStroke},$strokeVm:{enumerable:!0,get:this.getStrokeVm}})}function Ul(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var zl={mixins:[Ec,Ml,vl],props:{points:Number,radius:Number,radius1:Number,radius2:Number,angle:{type:Number,default:0}},computed:{stroke:function(){if(this.rev&&this.$stroke)return Ms(this.$stroke)},fill:function(){if(this.rev&&this.$fill)return Ns(this.$fill)}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ul(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ul(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Ya(["points","radius","radius1","radius2","angle","stroke","fill"],["stroke","fill"])),methods:{getServices:function(){return je(fl.methods.getServices.call(this),Ec.methods.getServices.call(this),Ml.methods.getServices.call(this))},syncNonObservable:function(){vl.methods.syncNonObservable.call(this)},getFillStyleTarget:function(){var t=this;return{getFill:function(){var e;return null===(e=t.$style)||void 0===e?void 0:e.getFill()},setFill:function(){t.scheduleRecreate()}}},getStrokeStyleTarget:function(){var t=this;return{getStroke:function(){var e;return null===(e=t.$style)||void 0===e?void 0:e.getStroke()},setStroke:function(){t.scheduleRecreate()}}},getAnchor:function(){var t;return null===(t=this.$style)||void 0===t?void 0:t.getAnchor()},getAngle:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getAngle(),this.angle)},getImage:function(){var t;return null===(t=this.$style)||void 0===t?void 0:t.getImage()},getOrigin:function(){var t;return null===(t=this.$style)||void 0===t?void 0:t.getOrigin()},getPoints:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getPoints(),this.points)},getRadius:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getRadius(),this.radius)},getRadius2:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getRadius2(),this.radius2)},getSize:function(){var t;return null===(t=this.$style)||void 0===t?void 0:t.getSize()},strokeChanged:function(t,e){$t(t,e)||this.$emit("update:stroke",t&&Qt(t))},fillChanged:function(t,e){$t(t,e)||this.$emit("update:fill",t&&Qt(t))}}},Zl="XY";function Bl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var Wl={mixins:[kc],props:{coordinates:{type:Array,required:!0,validator:lt(Ct)}},data:function(){return{currentCoordinatesViewProj:Qt(this.coordinates)}},computed:{coordinatesDataProj:function(){return xi(this.type,this.coordinates)},coordinatesViewProj:function(){return this.coordinatesToViewProj(this.coordinates)},currentCoordinatesDataProj:function(){return this.coordinatesToDataProj(this.currentCoordinatesViewProj)},pointDataProj:function(){return this.rev?this.findPointOnSurface():bo({type:this.type,coordinates:this.coordinatesDataProj})},pointViewProj:function(){return this.rev?this.findPointOnSurface(!0):bo({type:this.type,coordinates:this.coordinatesViewProj})}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bl(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bl(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({rev:function(){this.$geometry&&($i({coordinates:this.currentCoordinatesViewProj,extent:Yl(this.currentCoordinatesViewProj)},{coordinates:this.$geometry.getCoordinates(),extent:this.$geometry.getExtent()})||(this.currentCoordinatesViewProj=this.$geometry.getCoordinates()))}},Ya(["coordinatesViewProj","currentCoordinatesDataProj","pointDataProj"],["coordinatesViewProj","currentCoordinatesDataProj","pointDataProj"])),created:function(){this.currentCoordinatesViewProj=Qt(this.coordinatesViewProj),this.extentViewProj=Yl(this.currentCoordinatesViewProj)},methods:{getCoordinatesTransformFunction:function(){return Wo[this.getType()].transform},coordinatesToDataProj:function(t){return this.getCoordinatesTransformFunction()(t,this.resolvedViewProjection,this.resolvedDataProjection)},coordinatesToViewProj:function(t){return this.getCoordinatesTransformFunction()(t,this.resolvedDataProjection,this.resolvedViewProjection)},getCoordinates:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=St(null===(t=this.$geometry)||void 0===t?void 0:t.getCoordinates(),this.currentCoordinatesViewProj);return e?xi(this.getType(),r):this.coordinatesToDataProj(r)},setCoordinates:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ne(gt(t),"Invalid coordinates");var r=Yl(t=e?xi(this.getType(),t):this.coordinatesToViewProj(t));$i({coordinates:t,extent:r},{coordinates:this.currentCoordinatesViewProj,extent:this.extentViewProj})||(this.currentCoordinatesViewProj=t),this.$geometry&&!$i({coordinates:t,extent:r},{coordinates:this.$geometry.getCoordinates(),extent:this.$geometry.getExtent()})&&this.$geometry.setCoordinates(t)},getFirstCoordinate:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.$geometry)t=this.$geometry.getFirstCoordinate();else switch(this.getType()){case yi.POINT:case yi.CIRCLE:t=this.currentCoordinatesViewProj;break;case yi.LINE_STRING:case yi.MULTI_POINT:t=this.currentCoordinatesViewProj[0];break;case yi.POLYGON:case yi.MULTI_LINE_STRING:t=this.currentCoordinatesViewProj[0][0];break;case yi.MULTI_POLYGON:t=this.currentCoordinatesViewProj[0][0][0]}return e?wi(t):this.pointToDataProj(t)},getLastCoordinate:function(){var t,e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.$geometry)t=this.$geometry.getLastCoordinate();else switch(this.getType()){case yi.POINT:case yi.CIRCLE:t=this.currentCoordinatesViewProj;break;case yi.LINE_STRING:case yi.MULTI_POINT:t=this.currentCoordinatesViewProj[this.currentCoordinatesViewProj.length-1];break;case yi.POLYGON:case yi.MULTI_LINE_STRING:t=(e=this.currentCoordinatesViewProj[this.currentCoordinatesViewProj.length-1])[e.length-1];break;case yi.MULTI_POLYGON:t=(e=(e=this.currentCoordinatesViewProj[this.currentCoordinatesViewProj.length-1])[e.length-1])[e.length-1]}return r?wi(t):this.pointToDataProj(t)},getLayout:function(){var t;return St(null===(t=this.$geometry)||void 0===t?void 0:t.getLayout(),Zl)},findPointOnSurface:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return bo({type:this.getType(),coordinates:this.getCoordinates(t)})},coordinatesViewProjChanged:function(t){this.setCoordinates(t,!0)},currentCoordinatesDataProjChanged:function(t){$t(t,this.coordinatesDataProj)||this.$emit("update:coordinates",Qt(t))},pointDataProjChanged:function(t,e){$t(t,e)||this.$emit("update:point",null==t?void 0:t.slice())}}};function Yl(t){if(t)return gt(t[0])||(t=[t]),i.boundingExtent(t)}var ql={created:function(){this._text=void 0,this._textVm=void 0,Xl.call(this)},methods:{getServices:function(){var t=this;return{get textStyleContainer(){return t}}},getTextStyleTarget:function(){throw new Error("".concat(this.vmName," not implemented method: getTextStyleTarget()"))},getText:function(){var t;return St(null===(t=this.getTextStyleTarget())||void 0===t?void 0:t.getText(),this._text)},getTextVm:function(){return this._textVm},setText:function(t){var e;(t=(null===(e=t)||void 0===e?void 0:e.$style)||t)||(t=void 0),ne(!t||t instanceof l.Text,"Invalid text style");var r,n=this.getTextStyleTarget();(n&&t!==n.getText()&&(n.setText(t),this.scheduleRefresh()),t!==this._text)&&(this._text=t,this._textVm=(null===(r=t)||void 0===r?void 0:r.vm)&&t.vm[0],this.scheduleRefresh())}}};function Xl(){Object.defineProperties(this,{$text:{enumerable:!0,get:this.getText},$textVm:{enumerable:!0,get:this.getTextVm}})}var Hl="tileloadstart",Jl="tileloadend",Kl="tileloaderror";function Ql(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var th={mixins:[tl],props:{cacheSize:Number,opaque:Boolean,tilePixelRatio:{type:Number,default:1},tileGridFactory:Function,transition:Number,tileKey:String,zDirection:{type:Number,default:0}},data:function(){return{tileGrid:void 0}},computed:{tileGridIdent:function(){if(this.olObjIdent)return this.makeIdent(this.olObjIdent,"tile_grid")},derivedTileGridFactory:function(){return this.tileGridFactory},inputTileGridFactory:function(){if(bt(this.derivedTileGridFactory))return Rt(this.derivedTileGridFactory.bind(this))},resolvedDataProjection:function(){return St(this.projection,this.resolvedViewProjection)}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ql(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ql(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({rev:function(){this.$source&&this.tileGrid!==this.$source.getTileGrid()&&(this.tileGrid=this.$source.getTileGrid())}},Ya(["tileGridIdent","inputTileGridFactory","tileGrid","tileKey","opaque","tilePixelRatio","cacheSize","transition","zDirection"])),created:function(){bt(this.inputTileGridFactory)&&(this.tileGrid=this.instanceFactoryCall(this.tileGridIdent,this.inputTileGridFactory.bind(this)))},methods:{subscribeAll:function(){tl.methods.subscribeAll.call(this)},getTileGrid:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getTileGrid(),this.tileGrid)},tileGridIdentChanged:function(t,e){t&&e?this.moveInstance(t,e):t&&!e&&this.tileGrid?this.setInstance(t,this.tileGrid):!t&&e&&this.unsetInstance(e)},inputTileGridFactoryChanged:function(t){for(;this.hasInstance(this.tileGridIdent);)this.unsetInstance(this.tileGridIdent);bt(t)?this.tileGrid=this.instanceFactoryCall(this.tileGridIdent,t.bind(this)):this.tileGrid=null}}};function eh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var rh=ft(vt,lt(Ct)),nh=ft(gt,(function(t){return t.every(rh)})),ih={mixins:[th],props:{tileLoadFunction:Function,tileUrlFunc:Function,tileUrlFunction:Function,url:{type:String,validator:rh},urls:{type:Array,validator:nh}},data:function(){return{currentTileLoadFunction:void 0,currentTileUrlFunction:void 0,currentUrls:[]}},computed:{urlTokens:function(){return[]},inputUrl:function(){if(this.url)return xt(this.url,Nt(this,this.urlTokens))},parsedUrls:function(){var t=[];this.urls&&this.urls.length>0?t.push.apply(t,le(this.urls)):this.url&&t.push(this.url);var e=Nt(this,this.urlTokens);return t.map((function(t){return xt(t,e)}))},inputUrls:function(){return this.parsedUrls.reduce((function(t,e){return t.concat.apply(t,le(Mu(e)))}),[])},inputTileUrlFunction:function(){return St(this.tileUrlFunction,this.tileUrlFunc)},inputTileLoadFunction:function(){return this.tileLoadFunction}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?eh(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({rev:function(){this.$source&&(this.currentTileLoadFunction!==this.$source.getTileLoadFunction()&&(this.currentTileLoadFunction=this.$source.getTileLoadFunction()),this.currentTileUrlFunction!==this.$source.getTileUrlFunction()&&(this.currentTileUrlFunction=this.$source.getTileUrlFunction()),$t(this.currentUrls,this.$source.getUrls())||this.inputTileUrlFunction||(this.currentUrls=this.$source.getUrls()))}},Ya(["inputUrls","currentUrls","inputTileUrlFunction","currentTileUrlFunction","inputTileLoadFunction","currentTileLoadFunction"],["inputUrls","currentUrls"])),created:function(){var t;this.currentUrls=null===(t=this.inputUrls)||void 0===t?void 0:t.slice(),this.currentTileUrlFunction=this.inputTileUrlFunction,this.currentTileLoadFunction=this.inputTileLoadFunction},updated:function(){},methods:{subscribeAll:function(){th.methods.subscribeAll.call(this),oh.call(this)},getTileLoadFunction:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getTileLoadFunction(),this.currentTileLoadFunction)},setTileLoadFunction:function(t){ne(bt(t),"Invalid tile load function"),t!==this.currentTileLoadFunction&&(this.currentTileLoadFunction=t),this.$source&&t!==this.$source.getTileLoadFunction()&&this.$source.setTileLoadFunction(t)},getTileUrlFunction:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getTileUrlFunction(),this.currentTileUrlFunction)},setTileUrlFunction:function(t,e){var r;ne(bt(t),"Invalid tile url function"),e||(e=St(null===(r=this.inputUrls)||void 0===r?void 0:r.join("\n"),pi())),t!==this.currentTileUrlFunction&&(this.currentTileUrlFunction=t),this.$source&&t!==this.$source.getTileUrlFunction()&&this.$source.setTileUrlFunction(t,e)},getUrls:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getUrls(),this.currentUrls)},setUrls:function(t){ne(nh(t),"Invalid urls"),$t(t=t.slice(),this.currentUrls)||(this.currentUrls=t),this.$source&&(this.inputTileUrlFunction?this.$source.setTileUrlFunction(this.inputTileUrlFunction,t.join("\n")):$t(t,this.$source.getUrls())||this.$source.setUrls(t))},setUrl:function(t){ne(rh(t),"Invalid url"),this.setUrls(Mu(t))},inputUrlsChanged:function(t){this.setUrls(t)},currentUrlsChanged:function(t){$t(t,this.urls)||this.$emit("update:urls",null==t?void 0:t.slice())},inputTileUrlFunctionChanged:function(t){this.setTileUrlFunction(t)},currentTileUrlFunctionChanged:function(t){t!==this.inputTileUrlFunction&&this.$emit("update:tileUrlFunction",t)},inputTileLoadFunctionChanged:function(t){this.setTileLoadFunction(t)},currentTileLoadFunctionChanged:function(t){t!==this.inputTileLoadFunction&&this.$emit("update:tileLoadFunction",t)}}};function oh(){return sh.apply(this,arguments)}function sh(){return(sh=be(B.mark((function t(){var e,r=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=sa(this.$source,[Hl,Jl,Kl]),this.subscribeTo(e,(function(t){return r.$emit(t.type,t)}));case 2:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function uh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var ah={mixins:[ih],props:{crossOrigin:String,reprojectionErrorThreshold:Number,tileClass:String,imageSmoothing:{type:Boolean,default:!0}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?uh(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Ya(["crossOrigin","reprojectionErrorThreshold","tileClass","imageSmoothing"])),methods:{setRenderReprojectionEdges:function(t){var e=this;return be(B.mark((function r(){return B.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.resolveSource();case 2:r.sent.setRenderReprojectionEdges(t);case 3:case"end":return r.stop()}}),r)})))()}}};function ch(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function lh(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ch(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ch(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var hh={mixins:[Yc],props:{preload:{type:Number,default:0},useInterimTilesOnError:{type:Boolean,default:!0}},data:function(){return{currentPreload:this.preload,currentUseInterimTilesOnError:this.useInterimTilesOnError}},watch:lh({rev:function(){this.$layer&&(this.currentPreload!==this.$layer.getPreload()&&(this.currentPreload=this.$layer.getPreload()),this.currentUseInterimTilesOnError!==this.$layer.getUseInterimTilesOnError()&&(this.currentUseInterimTilesOnError=this.$layer.getUseInterimTilesOnError()))}},Ya(["preload","currentPreload","useInterimTilesOnError","currentUseInterimTilesOnError"])),methods:{subscribeAll:function(){Yc.methods.subscribeAll.call(this),fh.call(this)},getPreload:function(){var t;return St(null===(t=this.$layer)||void 0===t?void 0:t.getPreload(),this.currentPreload)},setPreload:function(t){ne(pt(t=Number(t)),"Invalid preload"),t!==this.currentPreload&&(this.currentPreload=t),this.$layer&&t!==this.$layer.getPreload()&&this.$layer.setPreload(t)},getUseInterimTilesOnError:function(){var t;return St(null===(t=this.$layer)||void 0===t?void 0:t.getUseInterimTilesOnError(),this.currentUseInterimTilesOnError)},setUseInterimTilesOnError:function(t){(t=!!t)!==this.currentUseInterimTilesOnError&&(this.currentUseInterimTilesOnError=t),this.$layer&&t!==this.$layer.getUseInterimTilesOnError()&&this.$layer.setUseInterimTilesOnError(t)},preloadChanged:function(t){this.setPreload(t)},currentPreloadChanged:function(t){t!==this.preload&&this.$emit("update:preload",t)},useInterimTilesOnErrorChanged:function(t){this.setUseInterimTilesOnError(t)},currentUseInterimTilesOnErrorChanged:function(t){t!==this.useInterimTilesOnError&&this.$emit("update:useInterimTilesOnError",t)}}};function fh(){return dh.apply(this,arguments)}function dh(){return(dh=be(B.mark((function t(){var e,r,n=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=te("current"),r=ua(this.$layer,["preload","useInterimTilesOnError"],!0,(function(t){return lh(lh({},t),{},{setter:n[e(t.prop)]})})),this.subscribeTo(r,(function(t){return(0,t.setter)(t.value)}));case 3:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function ph(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var vh={mixins:[yc,Yc],props:{renderOrder:Function,renderBuffer:{type:Number,default:100},declutter:Boolean,updateWhileAnimating:Boolean,updateWhileInteracting:Boolean},computed:{style:function(){var t=this;if(this.rev&&this.$style){var e=this.$style;if(bt(e))return e;if(e)return gt(e)||(e=[e]),e.map((function(e){return As(e,(function(e){return t.writeGeometryInDataProj(e)}))}))}}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ph(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ph(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Ya(["renderOrder","renderBuffer","declutter","updateWhileAnimating","updateWhileInteracting","style"],["style"])),methods:{getServices:function(){return je(Yc.methods.getServices.call(this),yc.methods.getServices.call(this))},subscribeAll:function(){Yc.methods.subscribeAll.call(this),gh.call(this)},getStyleTarget:function(){return this.$layer},getFeatures:function(t){var e=this;return be(B.mark((function r(){return B.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.resolveLayer();case 2:return r.abrupt("return",r.sent.getFeatures(t));case 3:case"end":return r.stop()}}),r)})))()},styleChanged:function(t,e){$t(t,e)||((jt(t)||gt(t))&&(t=Qt(t)),this.$emit("update:style",t))}}};function gh(){return mh.apply(this,arguments)}function mh(){return(mh=be(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function yh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var bh=ft(vt,lt(Ct)),Oh={mixins:[xc,Cc,tl],stubVNode:{empty:!1,attrs:function(){return{id:this.vmId,class:this.vmClass}}},props:{features:{type:Array,default:st,validator:function(t){return At(t,iu)}},formatFactory:{type:Function,default:Ks},loader:Function,loaderFactory:Function,loadingStrategy:{type:Function},strategyFactory:Function,url:{type:[String,Function],validator:function(t){return bt(t)||bh(t)}},overlaps:{type:Boolean,default:!0},useSpatialIndex:{type:Boolean,default:!0}},data:function(){return{format:void 0,currentUrl:void 0,currentLoader:void 0}},computed:{featuresDataProj:function(){return Lt(this.features,(function(t){return au(Qt(t))}))},featuresViewProj:function(){var t=this;return Lt(this.features,(function(e){return au(t.writeFeatureInViewProj(t.readFeatureInDataProj(e)))}))},currentFeaturesDataProj:function(){var t=this;return this.rev?Lt(this.getFeatures(),(function(e){return t.writeFeatureInDataProj(e)})):[]},currentFeaturesViewProj:function(){var t=this;return this.rev?Lt(this.getFeatures(),(function(e){return t.writeFeatureInViewProj(e)})):[]},extentDataProj:function(){return this.rev?this.getExtent():void 0},extentViewProj:function(){return this.rev?this.getExtent(!0):void 0},inputUrl:function(){return this.createUrlFunc(this.url)},inputLoader:function(){var t=this.loader;return!t&&this.loaderFactory&&(t=this.loaderFactory()),this.createLoaderFunc(t)},inputLoadingStrategy:function(){var t=this.loadingStrategy;return!t&&this.strategyFactory&&(t=this.strategyFactory()),t||v.all},formatIdent:function(){if(this.olObjIdent)return this.makeIdent(this.olObjIdent,"format")},inputFormatFactory:function(){return Rt(this.formatFactory.bind(this))}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yh(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({rev:function(){this.$source&&this.currentUrl!==this.$source.getUrl()&&(this.currentUrl=this.$source.getUrl())}},Ya(["featuresViewProj","currentFeaturesDataProj","extentDataProj","inputUrl","currentUrl","inputLoader","currentLoader","inputLoadingStrategy","inputFormatFactory","formatIdent","format","overlaps","useSpatialIndex"],["featuresViewProj","currentFeaturesDataProj","extentDataProj"])),created:function(){bt(this.inputFormatFactory)&&(this.format=this.instanceFactoryCall(this.formatIdent,this.inputFormatFactory.bind(this))),this.currentUrl=this.inputUrl,this.currentLoader=this.inputLoader},updated:function(){},methods:{createSource:function(){return new e.Vector({attributions:this.currentAttributions,projection:this.resolvedDataProjection,wrapX:this.wrapX,format:this.format,loader:this.currentLoader,strategy:this.inputLoadingStrategy,url:this.currentUrl,overlaps:this.overlaps,useSpatialIndex:this.useSpatialIndex,features:this.$featuresCollection})},getServices:function(){var t=this;return je(tl.methods.getServices.call(this),{get featuresContainer(){return t}})},subscribeAll:function(){tl.methods.subscribeAll.call(this),Cc.methods.subscribeAll.call(this),wh.call(this)},addFeatures:function(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.$source)return Cc.methods.addFeatures.call(this,e,n);var i=[];Ft(e||[],(function(e){ie(e=r.initializeFeature(e,n),t.Feature);var o=r.$source.getFeatureById(su(e));o?r.updateFeature(o,e):i.push(e)})),i.length&&this.$source.addFeatures(i)},addFeature:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.$source)return Cc.methods.addFeature.call(this,t,e);t=this.initializeFeature(t,e);var r=this.$source.getFeatureById(su(t));null==r?this.$source.addFeature(t):this.updateFeature(r,t)},removeFeatures:function(e){var r=this;if(!this.$source)return Cc.methods.removeFeatures.call(this,e);var n=!1;Ft(e,(function(e){if(e=r.getFeatureById(su(e))){var i=t.getUid(e);i in r.$source.nullGeometryFeatures_?delete r.$source.nullGeometryFeatures_[i]:r.$source.featuresRtree_&&r.$source.featuresRtree_.remove(e),r.$source.removeFeatureInternal(e),n=!0}})),n&&this.$source.changed()},removeFeature:function(t){var e;if(!this.$source)return Cc.methods.removeFeature.call(this,t);(t=this.$source.getFeatureById(su((null===(e=t)||void 0===e?void 0:e.$feature)||t)))&&this.$source.removeFeature(t)},getFeatureById:function(t){return this.$source?this.$source.getFeatureById(t):Cc.methods.getFeatureById.call(this,t)},getFeatures:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getFeatures(),Cc.methods.getFeatures.call(this))},getFeaturesCollection:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getFeaturesCollection(),this._featuresCollection)},isEmpty:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.isEmpty(),0===this.$featuresCollection.getLength())},clear:function(t){var e=this;return be(B.mark((function t(){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$source){t.next=2;break}return t.abrupt("return",e.clearFeatures());case 2:return t.next=4,e.resolveSource();case 4:return r=t.sent,t.abrupt("return",new Promise((function(t){r.once("change",(function(){return t()})),r.clear()})));case 6:case"end":return t.stop()}}),t)})))()},forEachFeature:function(t){return this.$source?this.$source.forEachFeature(t):Cc.methods.forEachFeature.call(this,t)},forEachFeatureInExtent:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=r?Oi(t):this.extentToViewProj(t),this.$source?this.$source.forEachFeatureInExtent(t,e):Cc.methods.forEachFeatureInExtent.call(this,t,e,!0)},forEachFeatureIntersectingExtent:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=r?Oi(t):this.extentToViewProj(t),this.$source?this.$source.forEachFeatureIntersectingExtent(t,e):Cc.methods.forEachFeatureIntersectingExtent.call(this,t,e,!0)},getFeaturesAtCoordinate:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=e?wi(t):this.pointToViewProj(t),this.$source?this.$source.getFeaturesAtCoordinate(t):Cc.methods.getFeaturesAtCoordinate.call(this,t,!0)},getFeaturesInExtent:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=e?Oi(t):this.extentToViewProj(t),this.$source?this.$source.getFeaturesInExtent(t):Cc.methods.getFeaturesInExtent.call(this,t,!0)},getClosestFeatureToCoordinate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=r?wi(t):this.pointToViewProj(t),this.$source?this.$source.getClosestFeatureToCoordinate(t,e):Cc.methods.getClosestFeatureToCoordinate.call(this,t,e,!0)},getExtent:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t=this.$source?this.$source.getExtent():Cc.methods.getFeaturesExtent.call(this,!0),e?t:this.extentToDataProj(t)},getFormat:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getFormat(),this.format)},getUrl:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getUrl(),this.currentUrl)},setUrl:function(t){(t=this.createUrlFunc(t))!==this.currentUrl&&(this.currentUrl=t),this.$source&&t!==this.$source.getUrl()&&this.$source.setUrl(t)},setLoader:function(t){var e;(t=this.createLoaderFunc(t))!==this.currentLoader&&(this.currentLoader=t,null===(e=this.$source)||void 0===e||e.setLoader(t))},removeLoadedExtent:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=r?Oi(t):this.extentToViewProj(t),null===(e=this.$source)||void 0===e||e.removeLoadedExtent(t)},createUrlFunc:function(t){if(t)return bt(t)||(t=ot(t)),this.wrapUrlFunc(t)},wrapUrlFunc:function(t){var e=this,r=t;return r.wrapped||((r=function(r,n,i){return r=jh(r,i,e.resolvedDataProjection),i=e.resolvedDataProjection,t(r,n,i)}).wrapped=!0),r},createLoaderFunc:function(t){if(bt(t))return this.wrapLoaderFunc(t)},wrapLoaderFunc:function(e){var r=this,n=e;return n.wrapped||((n=function(){var n=be(B.mark((function n(i,o,s){var u;return B.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e(jh(i,s,r.resolvedDataProjection),o,r.resolvedDataProjection);case 2:gt(u=n.sent)&&u[0]instanceof t.Feature||(u=r.readSource(u)),gt(u)&&r.addFeatures(u);case 5:case"end":return n.stop()}}),n)})));return function(t,e,r){return n.apply(this,arguments)}}()).wrapped=!0),n},readSource:function(t){return this.getFormat().readFeatures(t,{featureProjection:this.resolvedViewProjection,dataProjection:this.resolvedDataProjection})},featuresViewProjChanged:function(t){this.addFeatures(t,!0),this.removeFeatures(qt(this.getFeatures(),t,(function(t,e){return su(t)===su(e)})))},currentFeaturesDataProjChanged:function(t){$t(t,this.featuresDataProj)||this.$emit("update:features",Qt(t))},extentDataProjChanged:function(t,e){$t(t,e)||this.$emit("update:extent",null==t?void 0:t.slice())},inputUrlChanged:function(t){this.setUrl(t)},currentUrlChanged:function(t){t!==this.inputUrl&&this.$emit("update:url",t)},inputLoaderChanged:function(t){this.setLoader(t)},currentLoaderChanged:function(t){t!==this.inputLoader&&this.$emit("update:loader",t)},formatIdentChanged:function(t,e){t&&e?this.moveInstance(t,e):t&&!e&&this.format?this.setInstance(t,this.format):!t&&e&&this.unsetInstance(e)},inputFormatFactoryChanged:function(t){for(;this.hasInstance(this.formatIdent);)this.unsetInstance(this.formatIdent);bt(t)?this.format=this.instanceFactoryCall(this.formatIdent,t.bind(this)):this.format=void 0},attributionsCollapsibleChanged:it,stateChanged:it}};function wh(){}function jh(t,e,r){if(t=t.slice(),isFinite(t[0])&&isFinite(t[1])){var n=ec(_o([t[0],t[1]],e,r),2);t[0]=n[0],t[1]=n[1]}if(isFinite(t[2])&&isFinite(t[3])){var i=ec(_o([t[2],t[3]],e,r),2);t[2]=i[0],t[3]=i[1]}return t}var Ph={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"};function Sh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xh(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Sh(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var $h=function(t){return _u(t,["LAYERS","VERSION","STYLES","FORMAT","TRANSPARENT","BGCOLOR","TIME"])},Ih={props:{hidpi:{type:Boolean,default:!0},serverType:{type:String,validator:function(t){return Object.values(Ph).includes(t)}},layers:{type:String,required:!0},styles:String,version:{type:String,default:"1.3.0"},transparent:{type:Boolean,default:!0},format:{type:String,default:"image/png"},bgColor:String,time:String,params:Object},data:function(){return{currentParams:void 0}},computed:xh({inputLayers:function(){return gt(this.layers)?this.layers.join(","):this.layers},inputStyles:function(){return gt(this.styles)?this.styles.join(","):this.styles},customParams:function(){return this.params?$h(this.params):void 0},inputParams:function(){return xh(xh({},this.customParams||{}),{},{LAYERS:this.inputLayers,STYLES:this.inputStyles,VERSION:this.version,FORMAT:this.format,TRANSPARENT:this.transparent,BGCOLOR:this.bgColor,TIME:this.time})}},kt(["inputLayers","inputStyles","version","format","transparent","bgColor","time"],(function(t,e){var r="input"===e.slice(0,5)?Ut(e.slice(5)):e;return t["current"+Gt(r)]=function(){return St((this.currentParams||{})[r.toUpperCase()],(this.inputParams||{})[r.toUpperCase()])},t}),{})),watch:xh(xh({rev:function(){this.$source&&($t(this.currentParams,this.$source.getParams())||(this.currentParams=this.$source.getParams()))}},Pe(["currentLayers","currentStyles","currentVersion","currentFormat","currentTransparent","currentBgColor","currentTime"],(function(t){return function(e){var r=Ut(t.slice(7));$t(e,this[Wt(this,"input"+Gt(r))?"input"+Gt(r):r])||this.$emit("update:"+r,wt(e)?Qt(e):e)}}))),Ya(["hidpi","serverType","inputParams","currentParams"],["inputParams","currentParams"])),created:function(){this.currentParams=this.inputParams&&Qt(this.inputParams)},methods:{getFeatureInfoUrl:function(t,e,r){var n=arguments,i=this;return be(B.mark((function o(){var s,u;return B.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return u=n.length>3&&void 0!==n[3]?n[3]:{},e||(e=null===(s=i.$viewVm)||void 0===s?void 0:s.getResolution()),r||(r=i.resolvedDataProjection),o.next=5,i.resolveSource();case 5:return o.abrupt("return",o.sent.getFeatureInfoUrl(t,e,r,u));case 6:case"end":return o.stop()}}),o)})))()},getLegendUrl:function(t){var e=arguments,r=this;return be(B.mark((function n(){var i;return B.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:{},n.next=3,r.resolveSource();case 3:return n.abrupt("return",n.sent.getLegendUrl(t,i));case 4:case"end":return n.stop()}}),n)})))()},getParams:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getParams(),this.currentParams)},updateParams:function(t){$t(t=kt(xh(xh({},this.currentParams),t),(function(t,e,r){return xh(xh({},t),{},T({},r.toUpperCase(),e))}),{}),this.currentParams)||(this.currentParams=t),this.$source&&!$t(t,this.$source.getParams())&&this.$source.updateParams(t)},updateParam:function(t,e){this.updateParams(T({},t.toUpperCase(),e))},inputParamsChanged:function(t){this.updateParams(t)},currentParamsChanged:function(t){$t(t=t?$h(t):void 0,this.customParams)||this.$emit("update:params",t&&Qt(t))}}};function Ch(t,e){var r=e-t.toString().length+1;return(new Array(parseInt(r>0&&r,10)).join("0")+t).toString().slice(-e)}var Th=/{z}/g,_h=/{0z}/g,Eh=/{x\d?}/g,Rh=/{y\d?}/g,Fh=/{-y\d?}/g;function kh(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.createXYZ();return function(r){if(null!=r)return t.replace(Th,Vh(r[0])).replace(_h,Vh(r[0],!0)).replace(Eh,Lh(r[1])).replace(Rh,Lh(r[2])).replace(Fh,(function(t){var n=r[0],i=e.getFullTileRange(n);if(!i)throw new Error("The {-y} placeholder requires a tile grid with extent.");return Lh(i.getHeight()-r[2]-1)(t)}))}}function Dh(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.createXYZ();return Nh(t.map((function(t){return kh(t,e)})))}function Vh(t,e){return function(){return e?Ch(t,2):t.toString()}}function Lh(t){return function(e){var r=e.match(/\d/);return r?Ch(t,9).slice(3*(r[0]-1),3*r[0]):t.toString()}}function Ah(t){var e=[],r=/{(\d)-(\d)}/.exec(t)||/{([a-z])-([a-z])}/.exec(t);if(r)for(var n=r[1].charCodeAt(0),i=r[2].charCodeAt(0),o=n;o<=i;++o)e.push(t.replace(r[0],String.fromCharCode(o)));else e.push(t);return e}function Nh(t){return 1===t.length?t[0]:function(e,r,n){if(null!=e){var i=function(t,e){var r=t%e;return r*e<0?r+e:r}((e[1]<<e[0])+e[2],t.length);return t[i](e,r,n)}}}function Mh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Gh(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Mh(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}"undefined"!=typeof window&&"object"===L(window.ol)&&(window.ol.tileCacheUrlFn={createTileUrlFunction:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.createXYZ();return Dh(Ah(t),e)},createTileUrlFunctionFromTemplate:kh,createTileUrlFunctionFromTemplates:Dh});var Uh=ht(pt,ft(gt,(function(t){return 2===t.length&&t.every(pt)}))),zh={mixins:[ah],props:{projection:Gh(Gh({},tl.props.projection),{},{default:$o}),maxZoom:{type:Number,default:42},minZoom:{type:Number,default:0,validator:function(t){return t>=0}},maxResolution:Number,tileSize:{type:[Number,Array],default:function(){return[256,256]},validator:Uh}},computed:{inputTileSize:function(){return gt(this.tileSize)?this.tileSize.slice():[this.tileSize,this.tileSize]},derivedTileGridFactory:function(){if(bt(this.tileGridFactory))return this.tileGridFactory;var t=Vu(this.resolvedDataProjection),e=this.maxZoom,r=this.minZoom,n=this.maxResolution,i=this.inputTileSize;return function(){return m.createXYZ({extent:t,maxZoom:e,minZoom:r,maxResolution:n,tileSize:i})}},inputTileUrlFunction:function(){var t=St(this.tileUrlFunction,this.tileUrlFunc);return bt(t)?t:0!==this.currentUrls.length?Dh(this.currentUrls,this.tileGrid):void 0}},methods:{createSource:function(){return new e.XYZ({attributions:this.currentAttributions,attributionsCollapsible:this.attributionsCollapsible,projection:this.resolvedDataProjection,wrapX:this.wrapX,cacheSize:this.cacheSize,opaque:this.opaque,tilePixelRatio:this.tilePixelRatio,transition:this.transition,zDirection:this.zDirection,tileGrid:this.tileGrid,tileLoadFunction:this.currentTileLoadFunction,tileUrlFunction:this.currentTileUrlFunction,crossOrigin:this.crossOrigin,reprojectionErrorThreshold:this.reprojectionErrorThreshold,tileClass:this.tileClass,imageSmoothing:this.imageSmoothing})},tileKeyChanged:it,stateChanged:it}},Zh=Object.freeze({__proto__:null,arcgisSource:Ka,baseLayer:oc,controlsContainer:dc,eventBus:da,feature:wc,featureHelper:xc,featuresContainer:Cc,fillStyleContainer:Ec,geometry:kc,geometryContainer:gc,identMap:ga,imageLayer:Hc,imageSource:cl,imageStyle:vl,imageStyleContainer:ml,interaction:wl,interactionsContainer:Il,layer:Yc,layersContainer:Rl,olCmp:Ca,overlaysContainer:Ll,projTransforms:Qa,regShapeStyle:zl,rxSubs:ma,services:ba,simpleGeometry:Wl,source:tl,sourceContainer:zc,strokeStyleContainer:Ml,stubVNode:tc,style:fl,styleContainer:yc,textStyleContainer:ql,tileImageSource:ah,tileLayer:hh,tileSource:th,urlTileSource:ih,vectorLayer:vh,vectorSource:Oh,waitForMap:rc,wmsSource:Ih,xyzSource:zh,EVENT_BUS_PROP:fa,IDENTITY_MAP_PROP:pa,INSTANCES_POOL:va,VM_PROP:Pa,FRAME_TIME:Sa,OlObjectState:xa,OlObjectEvent:$a,OlObjectAction:Ia,LifecycleError:Ua,CanceledError:za,isCreateError:Za,isMountError:Ba,isUnmountError:function(t){return t instanceof Ua&&t.action===Ia.UNMOUNT},isDestroyError:function(t){return t instanceof Ua&&t.action===Ia.DESTROY},makeChangeOrRecreateWatchers:Ya,SERVICES_PROP:ya});function Bh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Wh(t,e,r,n,i,o,s,u,a,c){"boolean"!=typeof s&&(a=u,u=s,s=!1);const l="function"==typeof r?r.options:r;let h;if(t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),n&&(l._scopeId=n),o?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,a(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=h):e&&(h=s?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,u(t))}),h)if(l.functional){const t=l.render;l.render=function(e,r){return h.call(r),t(e,r)}}else{const t=l.beforeCreate;l.beforeCreate=t?[].concat(t,h):[h]}return r}var Yh=Wh({},undefined,{name:"VlSourceBingmaps",mixins:[ah],props:{hidpi:{type:Boolean,default:!1},culture:{type:String,default:"en-us"},apiKey:{type:String,required:!0},imagerySet:{type:String,required:!0},maxZoom:{type:Number,default:21}},computed:{tileGridIdent:it,inputTileGridFactory:it,inputUrl:it,inputUrls:it,inputTileUrlFunction:it,inputAttributions:it},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bh(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Ya(["hidpi","culture","apiKey","imagerySet","maxZoom"])),methods:{createSource:function(){return new e.BingMaps({wrapX:this.wrapX,cacheSize:this.cacheSize,opaque:this.opaque,transition:this.transition,tileLoadFunction:this.currentTileLoadFunction,reprojectionErrorThreshold:this.reprojectionErrorThreshold,imageSmoothing:this.imageSmoothing,hidpi:this.hidpi,culture:this.culture,key:this.apiKey,imagerySet:this.imagerySet,maxZoom:this.maxZoom})},getApiKey:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getApiKey(),this.apiKey)},getImagerySet:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getImagerySet(),this.imagerySet)},stateChanged:it,attributionsCollapsibleChanged:it,projectionChanged:it,tileGridIdentChanged:it,inputTileGridFactoryChanged:it,tileGridChanged:it,tileKeyChanged:it,tilePixelRatioChanged:it,zDirectionChanged:it,inputTileUrlFunctionChanged:it,inputUrlsChanged:it,crossOriginChanged:it,tileClassChanged:it}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function qh(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qh.installed||(qh.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Yh,e),t.component(Yh.name,Yh))}var Xh=Object.freeze({__proto__:null,default:qh,install:qh,Source:Yh});function Hh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Jh(){Object.defineProperties(this,{$innerSource:{enumerable:!0,get:this.getInnerSource},$innerSourceVm:{enumerable:!0,get:this.getInnerSourceVm}})}function Kh(t){var e=t.getGeometry();if(e){var r=bo(e);return r?go(r):void 0}}var Qh=Wh({render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("i",{class:t.vmClass,staticStyle:{display:"none !important"},attrs:{id:t.vmId}},[r("InnerSource",{attrs:{id:"vl-"+t.currentId+"-inner-source"}},[t._t("default")],2)],1)},staticRenderFns:[]},undefined,{name:"VlSourceCluster",components:{InnerSource:Wh({},undefined,{name:"VlSourceInnerAdapter",mixins:[tc,zc,Ca],stubVNode:{empty:!1,attrs:function(){return{id:this.vmId,class:this.vmClass}}},computed:{source:function(){if(this.rev&&this.$source)return{id:Iu(this.$source),type:this.$source.constructor.name}}},watch:{source:{deep:!0,handler:function(t,e){$t(t,e)||this.$emit("update:source",t&&Qt(t))}}},created:function(){var t=this;Object.defineProperties(this,{$innerSourceContainer:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.innerSourceContainer}}})},methods:{createOlObject:function(){var t=ut();return t.id=this.currentId,t},getServices:function(){return je(Ca.methods.getServices.call(this),zc.methods.getServices.call(this))},getSourceTarget:function(){var t=this;return{getSource:function(){var e;return null===(e=t.$innerSourceContainer)||void 0===e?void 0:e.getInnerSource()},setSource:function(e){var r;return null===(r=t.$innerSourceContainer)||void 0===r?void 0:r.setInnerSource(e)}}}}},undefined,undefined,undefined,!1,void 0,void 0,void 0)},mixins:[Oh],props:{distance:{type:Number,default:20},geometryFunction:{type:Function},geomFunc:Function,geomFuncFactory:Function},data:function(){return{currentDistance:this.distance}},computed:{inputGeometryFunction:function(){var t=this.geometryFunction||this.geomFunc;return!t&&this.geomFuncFactory&&(t=this.geomFuncFactory()),t||Kh},innerSource:function(){if(this.rev&&this.$innerSource)return{id:Iu(this.$innerSource),type:this.$innerSource.constructor.name}},inputUrl:it,inputLoader:it,inputLoadingStrategy:it,formatIdent:it,inputFormatFactory:it},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Hh(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({rev:function(){this.$source&&this.currentDistance!==this.$source.getDistance()&&(this.currentDistance=this.$source.getDistance())},distance:function(t){this.setDistance(t)},currentDistance:function(t){t!==this.distance&&this.$emit("update:distance",t)},innerSource:{deep:!0,handler:function(t,e){t!==e&&this.$emit("update:innerSource",t&&Qt(t))}}},Ya(["inputGeometryFunction"])),created:function(){this._innerSource=void 0,this._innerSourceVm=void 0,Jh.call(this)},updated:function(){},methods:{createSource:function(){return new e.Cluster({attributions:this.currentAttributions,wrapX:this.wrapX,source:this.$innerSource,distance:this.currentDistance,geometryFunction:this.inputGeometryFunction})},getServices:function(){var t=this;return je(Oh.methods.getServices.call(this),{get innerSourceContainer(){return t}})},getDistance:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getDistance(),this.currentDistance)},setDistance:function(t){ne(pt(t),"Invalid distance"),t!==this.currentDistance&&(this.currentDistance=t),this.$source&&t!==this.$source.getDistance()&&this.$source.setDistance(t)},getInnerSource:function(){return this._innerSource},getInnerSourceVm:function(){return this._innerSourceVm},setInnerSource:function(t){var r,n;(ne(!(t=(null===(r=t)||void 0===r?void 0:r.$source)||t)||t instanceof e.Source),t||(t=void 0),t!==this._innerSource)&&(this._innerSource=t,this._innerSourceVm=(null===(n=t)||void 0===n?void 0:n.vm)&&t.vm[0],this.scheduleRefresh());this.$source&&t!==this.$source.getSource()&&(this.$source.setSource(t),this.scheduleRefresh())},projectionChanged:it,inputUrlChanged:it,inputLoaderChanged:it,inputLoadingStrategyChanged:it,inputFormatFactoryChanged:it,formatIdentChanged:it,formatChanged:it,overlapsChanged:it,useSpatialIndexChanged:it}},undefined,false,undefined,!1,void 0,void 0,void 0);function tf(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};tf.installed||(tf.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Qh,e),t.component(Qh.name,Qh))}var ef=Object.freeze({__proto__:null,default:tf,install:tf,Source:Qh});function rf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function nf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rf(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var of=function(t){return Gt(Xt(t))};function sf(){var t=this,e=sa(this.$interaction,"drawstart").pipe($r((function(t){return nf(nf({},t),{},{feature:au(t.feature)})})),Hn((function(){return t.setInteracting(!0)}))),r=function(){var e,r;return null!==(e=t._source)&&void 0!==e&&null!==(r=e.vm)&&void 0!==r&&r.length?aa(t._source.vm[0],"update:features").pipe(Rn()):dr(!0).pipe(function(t,e){void 0===e&&(e=wr);var r=dn(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new pn(r,e))}}(50))},n=Xr(e,sa(this.$interaction,"drawend").pipe(Ur((function(t){return r().pipe(Fn(t))})),Hn((function(){return t.setInteracting(!1)})))).pipe($r((function(e){var r=e.type,n=e.feature,i=t.resolvedViewProjection,o=t.resolvedDataProjection;return{type:r,feature:n,get json(){return this._json||(this._json=Qs(this.feature,i,o,bi)),this._json}}})));this.subscribeTo(n,(function(e){return t.$emit(e.type,e)}))}var uf=Wh({},undefined,{name:"VlInteractionDraw",mixins:[wl,yc],stubVNode:{empty:!1,attrs:function(){return{id:this.vmId,class:this.vmClass}}},props:{source:{type:String,required:!0},clickTolerance:{type:Number,default:6},snapTolerance:{type:Number,default:12},type:{type:String,required:!0,validator:function(t){return Object.values(yi).includes(of(t))}},stopClick:{type:Boolean,default:!1},maxPoints:Number,minPoints:Number,finishCondition:Function,geometryFunction:Function,geometryName:{type:String,default:"geometry"},condition:{type:Function,default:y.noModifierKeys},freehand:{type:Boolean,default:!1},freehandCondition:{type:Function,default:y.shiftKeyOnly},wrapX:{type:Boolean,default:!1},dragVertexDelay:{type:Number,default:500}},computed:{inputType:function(){return of(this.type)}},watch:nf({},Ya(["source","clickTolerance","snapTolerance","inputType","stopClick","maxPoints","minPoints","finishCondition","geometryFunction","geometryName","condition","freehand","freehandCondition","wrapX","dragVertexDelay"])),methods:{createInteraction:function(){var r=this;return be(B.mark((function n(){var i,o;return B.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.getInstance(r.source);case 2:return ne(!!(i=r._source=n.sent),'Source "'.concat(r.source,'" not found in identity map.')),i instanceof e.Vector||(bt(i.getFeaturesCollection)?o=i.getFeaturesCollection():bt(i.getFeatures)&&(o=i.getFeatures()),ie(o,t.Collection,'Source "'.concat(r.source,"\" doesn't provide features collection.")),i=null),n.abrupt("return",new h.Draw({source:i,features:o,clickTolerance:r.clickTolerance,snapTolerance:r.snapTolerance,type:r.inputType,stopClick:r.stopClick,maxPoints:r.maxPoints,minPoints:r.minPoints,finishCondition:r.finishCondition,geometryFunction:r.geometryFunction,geometryName:r.geometryName,condition:r.condition,freehand:r.freehand,freehandCondition:r.freehandCondition,wrapX:r.wrapX,dragVertexDelay:r.dragVertexDelay,style:r.$style}));case 6:case"end":return n.stop()}}),n)})))()},getServices:function(){return je(wl.methods.getServices.call(this),yc.methods.getServices.call(this))},subscribeAll:function(){wl.methods.subscribeAll.call(this),sf.call(this)},getStyleTarget:function(){var t=this;return{getStyle:function(){return t._style},setStyle:function(){t.scheduleRecreate()}}},getOverlay:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resolveInteraction();case 2:return e.abrupt("return",e.sent.getOverlay());case 3:case"end":return e.stop()}}),e)})))()},abortDrawing:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resolveInteraction();case 2:e.sent.abortDrawing();case 3:case"end":return e.stop()}}),e)})))()},finishDrawing:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resolveInteraction();case 2:e.sent.finishDrawing();case 3:case"end":return e.stop()}}),e)})))()},appendCoordinates:function(t){var e=arguments,r=this;return be(B.mark((function n(){var i;return B.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>1&&void 0!==e[1]&&e[1],t=i?ji(t):r.lineToViewProj(t),n.next=4,r.resolveInteraction();case 4:n.sent.appendCoordinates(t);case 5:case"end":return n.stop()}}),n)})))()},removeLastPoint:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resolveInteraction();case 2:e.sent.removeLastPoint();case 3:case"end":return e.stop()}}),e)})))()},getPointerCount:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resolveInteraction();case 2:return e.abrupt("return",e.sent.getPointerCount());case 3:case"end":return e.stop()}}),e)})))()}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function af(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};af.installed||(af.installed=!0,e=Nt(e,"dataProjection"),Object.assign(uf,e),t.component(uf.name,uf))}var cf=Object.freeze({__proto__:null,default:af,install:af,Interaction:uf});function lf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function hf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?lf(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ff=Wh({},undefined,{name:"VlGeomCircle",mixins:[Wl],props:{coordinates:hf(hf({},Wl.props.coordinates),{},{validator:Ci}),radius:{type:Number,default:0},radiusProjection:{type:String,validator:function(t){return!!c.get(t)}}},data:function(){return{currentRadiusViewProj:this.radius}},computed:{type:ot(yi.CIRCLE),resolvedRadiusProjection:function(){return this.radiusProjection||this.resolvedDataProjection},radiusDataProj:function(){return Pt(this.radius)},radiusViewProj:function(){return this.radiusToViewProj(this.radius,this.coordinatesDataProj)},currentRadiusDataProj:function(){return this.radiusToDataProj(this.currentRadiusViewProj)}},watch:{radiusViewProj:function(t){this.setRadius(t,!0)},currentRadiusDataProj:function(t){t!==this.radiusDataProj&&this.$emit("update:radius",t)}},created:function(){this.currentRadiusViewProj=this.radiusViewProj},methods:{createGeometry:function(){return new s.Circle(this.currentCoordinatesViewProj,this.currentRadiusViewProj)},getCoordinates:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getCenter(t)},setCoordinates:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setCenter(t,e)},getCenter:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=St(null===(t=this.$geometry)||void 0===t?void 0:t.getCenter(),this.currentCoordinatesViewProj);return e?wi(r):this.pointToDataProj(r)},setCenter:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ne(Ci(t),"Invalid center"),$t(t=e?wi(t):this.pointToViewProj(t),this.currentCoordinatesViewProj)||(this.currentCoordinatesViewProj=t),this.$geometry&&!$t(t,this.$geometry.getCenter())&&this.$geometry.setCenter(t)},getRadius:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=St(null===(t=this.$geometry)||void 0===t?void 0:t.getRadius(),this.currentRadiusViewProj);return e?Pt(r):this.radiusToDataProj(r)},setRadius:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ne(pt(t),"Invalid radius"),(t=e?Pt(t):this.radiusToDataProj(t))!==this.currentRadiusViewProj&&(this.currentRadiusViewProj=t),this.$geometry&&t!==this.$geometry.getRadius()&&this.$geometry.setRadius(t)},setCenterAndRadius:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t=r?wi(t):this.pointToViewProj(t),e=r?Pt(e):this.radiusToViewProj(e),this.$geometry?this.$geometry.setCenterAndRadius(t,e):(this.setCenter(t,!0),this.setRadius(e,!0))},radiusToViewProj:function(t){return qo(t,this.resolvedRadiusProjection,this.resolvedViewProjection)},radiusToDataProj:function(t){return qo(t,this.resolvedViewProjection,this.resolvedRadiusProjection)}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function df(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function pf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?df(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):df(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var vf=Wh({},undefined,{name:"VlGeomPoint",mixins:[Wl],props:{coordinates:pf(pf({},Wl.props.coordinates),{},{validator:Ci})},computed:{type:ot(yi.POINT)},methods:{createGeometry:function(){return new s.Point(this.currentCoordinatesViewProj)},setCoordinates:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ne(Ci(t),"Invalid coordinates"),Wl.methods.setCoordinates.call(this,t,e)}}},undefined,undefined,undefined,!1,void 0,void 0,void 0),gf=Wh({render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("i",{class:t.vmClass,staticStyle:{display:"none !important"},attrs:{id:t.vmId}},[t._t("default",[r("PointGeom",{attrs:{id:"vl-"+t.currentId+"-default-geom",coordinates:[0,0]}})],{id:t.currentId,properties:t.currentProperties})],2)},staticRenderFns:[]},undefined,{name:"VlFeature",components:{PointGeom:vf},mixins:[wc]},undefined,false,undefined,!1,void 0,void 0,void 0);function mf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function yf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mf(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var bf=Wh({},undefined,{name:"VlGeomLineString",mixins:[Wl],props:{coordinates:yf(yf({},Wl.props.coordinates),{},{validator:Ti})},computed:{type:ot(yi.LINE_STRING)},methods:{createGeometry:function(){return new s.LineString(this.currentCoordinatesViewProj)},setCoordinates:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ne(Ti(t),"Invalid coordinates"),Wl.methods.setCoordinates.call(this,t,e)}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Of(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function wf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Of(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Of(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var jf=Wh({},undefined,{name:"VlGeomMultiLineString",mixins:[Wl],props:{coordinates:wf(wf({},Wl.props.coordinates),{},{validator:Ri})},computed:{type:ot(yi.MULTI_LINE_STRING)},methods:{createGeometry:function(){return new s.MultiLineString(this.currentCoordinatesViewProj)},setCoordinates:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ne(Ri(t),"Invalid coordinates"),Wl.methods.setCoordinates.call(this,t,e)}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Pf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Sf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pf(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var xf=Wh({},undefined,{name:"VlGeomMultiPoint",mixins:[Wl],props:{coordinates:Sf(Sf({},Wl.props.coordinates),{},{validator:Ei})},computed:{type:ot(yi.MULTI_POINT)},methods:{createGeometry:function(){return new s.MultiPoint(this.currentCoordinatesViewProj)},setCoordinates:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ne(Ei(t),"Invalid coordinates"),Wl.methods.setCoordinates.call(this,t,e)}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function $f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function If(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$f(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Cf=Wh({},undefined,{name:"VlGeomMultiPolygon",mixins:[Wl],props:{coordinates:If(If({},Wl.props.coordinates),{},{validator:Fi})},computed:{type:ot(yi.MULTI_POLYGON)},methods:{createGeometry:function(){return new s.MultiPolygon(this.currentCoordinatesViewProj)},setCoordinates:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ne(Fi(t),"Invalid coordinates"),Wl.methods.setCoordinates.call(this,t,e)}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Tf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tf(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ef=Wh({},undefined,{name:"VlGeomPolygon",mixins:[Wl],props:{coordinates:_f(_f({},Wl.props.coordinates),{},{validator:_i})},computed:{type:ot(yi.POLYGON)},methods:{createGeometry:function(){return new s.Polygon(this.currentCoordinatesViewProj)},setCoordinates:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ne(_i(t),"Invalid coordinates"),Wl.methods.setCoordinates.call(this,t,e)}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Rf(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Rf.installed||(Rf.installed=!0,e=Nt(e,"dataProjection"),Object.assign(gf,e),Object.assign(ff,e),Object.assign(vf,e),Object.assign(bf,e),Object.assign(Ef,e),Object.assign(xf,e),Object.assign(jf,e),Object.assign(Cf,e),t.component(gf.name,gf),t.component(ff.name,ff),t.component(vf.name,vf),t.component(bf.name,bf),t.component(Ef.name,Ef),t.component(xf.name,xf),t.component(jf.name,jf),t.component(Cf.name,Cf))}var Ff=Object.freeze({__proto__:null,default:Rf,install:Rf,Feature:gf,CircleGeom:ff,PointGeom:vf,LineStringGeom:bf,PolygonGeom:Ef,MultiPointGeom:xf,MultiLineStringGeom:jf,MultiPolygonGeom:Cf});function kf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Df(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?kf(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Vf=ft(vt,(function(t){return null!=c.get(t)}));function Lf(){var t=this;Object.defineProperties(this,{$geolocation:{enumerable:!0,get:function(){return t.$olObject}},$mapVm:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.mapVm}},$viewVm:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.viewVm}}})}function Af(){var t=this,e=te("set"),r=Xr(ua(this.$geolocation,"projection",!0,(function(t){return Df(Df({},t),{},{value:c.get(t.value).getCode()})})),ua(this.$geolocation,["tracking","trackingOptions"],!0)).pipe($r((function(r){return Df(Df({},r),{},{setter:function(n){t[e(r.prop)](n),t.scheduleRefresh()}})})));this.subscribeTo(r,(function(t){return(0,t.setter)(t.value)}));var n=ua(this.$geolocation,["accuracy","accuracyGeometry","altitude","altitudeAccuracy","heading","speed","position"],!0);this.subscribeTo(n,this.scheduleRefresh.bind(this))}var Nf=Wh({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("i",{class:t.vmClass,staticStyle:{display:"none !important"},attrs:{id:t.vmId}},[t._t("default",null,{accuracy:t.accuracy,accuracyGeometry:t.accuracyGeometryDataProj,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,position:t.positionDataProj,speed:t.speed})],2)},staticRenderFns:[]},undefined,{name:"VlGeoloc",mixins:[Qa,Ca,rc],stubVNode:{empty:function(){return this.vmId}},props:{tracking:{type:Boolean,default:!0},trackingOptions:Object,projection:{type:String,validator:Vf}},data:function(){return{viewProjection:$o,dataProjection:$o,currentTracking:this.tracking,currentTrackingOptions:this.trackingOptions&&Qt(this.trackingOptions),currentProjection:this.projection}},computed:{resolvedDataProjection:function(){var t;return St(this.currentProjection,null===(t=this.$options)||void 0===t?void 0:t.dataProjection,this.dataProjection,this.resolvedViewProjection)},accuracy:function(){return this.rev?this.getAccuracy():void 0},accuracyGeometryDataProj:function(){return this.rev?this.writeGeometryInDataProj(this.getAccuracyGeometry()):void 0},accuracyGeometryViewProj:function(){return this.rev?this.writeGeometryInViewProj(this.getAccuracyGeometry()):void 0},altitude:function(){return this.rev?this.getAltitude():void 0},altitudeAccuracy:function(){return this.rev?this.getAltitudeAccuracy():void 0},heading:function(){return this.rev?this.getHeading():void 0},speed:function(){return this.rev?this.getSpeed():void 0},positionDataProj:function(){return this.rev?this.getPosition():void 0},positionViewProj:function(){return this.rev?this.pointToViewProj(this.getPosition()):void 0}},watch:{rev:function(){this.$geolocation&&(this.currentTracking!==this.$geolocation.getTracking()&&(this.currentTracking=this.$geolocation.getTracking()),$t(this.currentTrackingOptions,this.$geolocation.getTrackingOptions())||(this.currentTrackingOptions=this.$geolocation.getTrackingOptions()),this.currentProjection!==this.$geolocation.getProjection().getCode()&&(this.currentProjection=this.$geolocation.getProjection().getCode()))},tracking:function(t){this.setTracking(t)},currentTracking:function(t){t!==this.tracking&&this.$emit("update:tracking",t)},tracingOptions:{deep:!0,handler:function(t){this.setTrackingOptions(t)}},currentTrackingOptions:{deep:!0,handler:function(t){$t(t,this.trackingOptions)||this.$emit("update:tracingOptions",t&&Qt(t))}},projection:function(t){this.setProjection(t)},currentProjection:function(t){t!==this.projection&&this.$emit("update:projection",t)},accuracy:function(t,e){t!==e&&this.$emit("update:accuracy",t)},accuracyGeometryDataProj:function(t,e){$t(t,e)||this.$emit("update:accuracyGeometry",t)},currentAltitude:function(t,e){t!==e&&this.$emit("update:altitude",t)},altitudeAccuracy:function(t,e){t!==e&&this.$emit("update:altitudeAccuracy",t)},heading:function(t,e){t!==e&&this.$emit("update:heading",t)},speed:function(t,e){t!==e&&this.$emit("update:speed",t)},positionDataProj:function(t,e){$t(t,e)||this.$emit("update:position",t)}},created:function(){Lf.call(this)},methods:{beforeInit:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Ca.methods.beforeInit.call(t),rc.methods.beforeInit.call(t)]);case 2:case"end":return e.stop()}}),e)})))()},createOlObject:function(){var e=new t.Geolocation({tracking:this.currentTracking,trackingOptions:this.currentTrackingOptions,projection:this.resolvedDataProjection});return e.set("id",this.currentId),e},mount:function(){return this.setTracking(this.tracking),Ca.methods.mount.call(this)},unmount:function(){return this.setTracking(!1),Ca.methods.unmount.call(this)},subscribeAll:function(){Ca.methods.subscribeAll.call(this),Af.call(this)},resolveGeolocation:Ca.methods.resolveOlObject,getIdInternal:function(){return this.$geolocation.get("id")},setIdInternal:function(t){t!==this.getIdInternal()&&this.$geolocation.set("id",t)},getAccuracy:function(){var t;return null===(t=this.$geolocation)||void 0===t?void 0:t.getAccuracy()},getAccuracyGeometry:function(){var t;return null===(t=this.$geolocation)||void 0===t?void 0:t.getAccuracyGeometry()},getAltitude:function(){var t;return null===(t=this.$geolocation)||void 0===t?void 0:t.getAltitude()},getAltitudeAccuracy:function(){var t;return null===(t=this.$geolocation)||void 0===t?void 0:t.getAltitudeAccuracy()},getHeading:function(){var t;return null===(t=this.$geolocation)||void 0===t?void 0:t.getHeading()},getPosition:function(){var t;return null===(t=this.$geolocation)||void 0===t?void 0:t.getPosition()},getProjection:function(){var t;return St(null===(t=this.$geolocation)||void 0===t?void 0:t.getProjection(),this.currentProjection)},setProjection:function(t){ne(Vf(t),"Invalid projection"),(t=c.get(t)).getCode()!==this.currentProjection&&(this.currentProjection=t.getCode()),this.$geolocation&&t!==this.$geolocation.getProjection()&&this.$geolocation.setProjection(t)},getSpeed:function(){var t;return null===(t=this.$geolocation)||void 0===t?void 0:t.getSpeed()},getTracking:function(){var t;return St(null===(t=this.$geolocation)||void 0===t?void 0:t.getTracking(),this.currentTracking)},setTracking:function(t){t!==this.currentTracking&&(this.currentTracking=t),this.$geolocation&&t!==this.$geolocation.getTracking()&&this.$geolocation.setTracking(t)},getTrackingOptions:function(){var t;return St(null===(t=this.$geolocation)||void 0===t?void 0:t.getTrackingOptions(),this.currentTrackingOptions)},setTrackingOptions:function(t){$t(t,this.currentTrackingOptions)||(this.currentTrackingOptions=t),this.$geolocation&&!$t(t,this.$geolocation.getTrackingOptions())&&this.$geolocation.setTrackingOptions(t)}}},undefined,false,undefined,!1,void 0,void 0,void 0);function Mf(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Mf.installed||(Mf.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Nf,e),t.component(Nf.name,Nf))}var Gf=Object.freeze({__proto__:null,default:Mf,install:Mf,Geoloc:Nf});function Uf(){var t=this;Object.defineProperties(this,{$fillStyleContainer:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.fillStyleContainer}}})}var zf=Wh({},undefined,{name:"VlStyleFill",mixins:[fl],props:{color:{type:[String,Array],default:function(){return[255,255,255,.4]}}},data:function(){return{currentColor:Rs(this.color)}},computed:{inputColor:function(){return Rs(this.color)}},watch:{rev:function(){this.$style&&this.setColor(this.getColor())},inputColor:{deep:!0,handler:function(t){this.setColor(t)}},currentColor:{deep:!0,handler:function(t){$t(t,this.inputColor)||this.$emit("update:color",null==t?void 0:t.slice())}}},created:function(){Uf.call(this)},methods:{createStyle:function(){return new l.Fill({color:this.currentColor})},mount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=t.$fillStyleContainer)||void 0===r||r.setFill(t),e.abrupt("return",fl.methods.mount.call(t));case 2:case"end":return e.stop()}}),e)})))()},unmount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(null===(r=t.$fillStyleContainer)||void 0===r?void 0:r.getFillVm())===t&&t.$fillStyleContainer.setFill(null),e.abrupt("return",fl.methods.unmount.call(t));case 2:case"end":return e.stop()}}),e)})))()},refresh:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([fl.methods.refresh.call(t),null===(r=t.$fillStyleContainer)||void 0===r?void 0:r.refresh()]);case 2:case"end":return e.stop()}}),e)})))()},syncNonObservable:function(){fl.methods.syncNonObservable.call(this),this.setColor(this.getColor())},getColor:function(){var t;return Rs(St(null===(t=this.$style)||void 0===t?void 0:t.getColor(),this.currentColor))},setColor:function(t){$t(t=Rs(t),this.currentColor)||(this.currentColor=t,this.scheduleRefresh()),this.$style&&!$t(t,this.$style.getColor())&&(this.$style.setColor(t),this.scheduleRefresh())}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Zf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Bf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zf(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Wf(){var t=this;Object.defineProperties(this,{$strokeStyleContainer:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.strokeStyleContainer}}})}var Yf=Wh({},undefined,{name:"VlStyleStroke",mixins:[fl],props:{color:{type:[Array,String],default:"#3399cc"},lineCap:{type:String,default:"round"},lineJoin:{type:String,default:"round"},lineDash:Array,lineDashOffset:{type:Number,default:0},miterLimit:{type:Number,default:10},width:{type:Number,default:1.25}},data:function(){var t;return{currentColor:Rs(this.color),currentLineCap:this.lineCap,currentLineJoin:this.lineJoin,currentLineDash:null===(t=this.lineDash)||void 0===t?void 0:t.slice(),currentLineDashOffset:this.lineDashOffset,currentMiterLimit:this.miterLimit,currentWidth:this.width}},computed:{inputColor:function(){return Rs(this.color)},inputLineDash:function(){var t;return null===(t=this.lineDash)||void 0===t?void 0:t.slice()}},watch:Bf(Bf(Bf({rev:function(){this.$style&&(this.setColor(this.getColor()),this.setLineCap(this.getLineCap()),this.setLineJoin(this.getLineJoin()),this.setLineDash(this.getLineDash()),this.setLineDashOffset(this.getLineDashOffset()),this.setMiterLimit(this.getMiterLimit()),this.setWidth(this.getWidth()))}},Pe(["inputColor","lineCap","lineJoin","inputLineDash","lineDashOffset","miterLimit","width"],(function(t){var e="set"+Gt("input"===t.slice(0,5)?Ut(t.slice(5)):t);return{deep:["inputColor","inputLineDash"].includes(t),handler:function(t){this[e](t)}}}))),Pe(["currentColor","currentLineCap","currentLineJoin","currentLineDash","currentLineDashOffset","currentMiterLimit","currentWidth"],(function(t){var e="current"===t.slice(0,7)?Ut(t.slice(7)):t,r="input"+Gt(e);return{deep:["currentColor","currentLineDash"].includes(t),handler:function(t){$t(t,St(this[r],this[e]))||this.$emit("update:".concat(e),wt(t)?Qt(t):t)}}}))),{},{inputColor:{deep:!0,handler:function(t){this.setColor(t)}},currentColor:{deep:!0,handler:function(t){$t(t,this.inputColor)||this.$emit("update:color",null==t?void 0:t.slice())}},lineCap:function(t){this.setLineCap(t)},currentLineCap:function(t){t!==this.lineCap&&this.$emit("update:lineCap",t)},lineJoin:function(t){this.setLineJoin(t)},currentLineJoin:function(t){t!==this.lineJoin&&this.$emit("update:lineJoin",t)},inputLineDash:{deep:!0,handler:function(t){this.setLineDash(t)}},currentLineDash:{deep:!0,handler:function(t){$t(t,this.currentLineDash)||this.$emit("update:lineDash",null==t?void 0:t.slice())}},lineDashOffset:function(t){this.setLineDashOffset(t)},currentLineDashOffset:function(t){t!==this.lineDashOffset&&this.$emit("update:lineDashOffset",t)},miterLimit:function(t){this.setMiterLimit(t)},currentMiterLimit:function(t){t!==this.miterLimit&&this.$emit("update:miterLimit",t)},width:function(t){this.setWidth(t)},currentWidth:function(t){t!==this.width&&this.$emit("update:width",t)}}),created:function(){Wf.call(this)},methods:{createStyle:function(){return new l.Stroke({color:this.currentColor,lineCap:this.currentLineCap,lineJoin:this.currentLineJoin,lineDash:this.currentLineDash,lineDashOffset:this.currentLineDashOffset,miterLimit:this.currentMiterLimit,width:this.currentWidth})},mount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=t.$strokeStyleContainer)||void 0===r||r.setStroke(t),e.abrupt("return",fl.methods.mount.call(t));case 2:case"end":return e.stop()}}),e)})))()},unmount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(null===(r=t.$strokeStyleContainer)||void 0===r?void 0:r.getStrokeVm())===t&&t.$strokeStyleContainer.setStroke(null),e.abrupt("return",fl.methods.unmount.call(t));case 2:case"end":return e.stop()}}),e)})))()},refresh:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([fl.methods.refresh.call(t),null===(r=t.$strokeStyleContainer)||void 0===r?void 0:r.refresh()]);case 2:case"end":return e.stop()}}),e)})))()},syncNonObservable:function(){fl.methods.syncNonObservable.call(this),this.setColor(this.getColor()),this.setLineCap(this.getLineCap()),this.setLineJoin(this.getLineJoin()),this.setLineDash(this.getLineDash()),this.setLineDashOffset(this.getLineDashOffset()),this.setMiterLimit(this.getMiterLimit()),this.setWidth(this.getWidth())},getColor:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getColor(),this.currentColor)},setColor:function(t){$t(t=Rs(t),this.currentColor)||(this.currentColor=t,this.scheduleRefresh()),this.$style&&!$t(t,this.$style.getColor())&&(this.$style.setColor(t),this.scheduleRefresh())},getLineCap:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getLineCap(),this.currentLineCap)},setLineCap:function(t){t!==this.currentLineCap&&(this.currentLineCap=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getLineCap()&&(this.$style.setLineCap(t),this.scheduleRefresh())},getLineJoin:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getLineJoin(),this.currentLineJoin)},setLineJoin:function(t){t!==this.currentLineJoin&&(this.currentLineJoin=t),this.$style&&t!==this.$style.getLineJoin()&&(this.$style.setLineJoin(t),this.scheduleRefresh())},getLineDash:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getLineDash(),this.currentLineDash)},setLineDash:function(t){var e;$t(t=null===(e=t)||void 0===e?void 0:e.slice(),this.currentLineDash)||(this.currentLineDash=t,this.scheduleRefresh()),this.$style&&!$t(t,this.$style.getLineDash())&&(this.$style.setLineDash(t),this.scheduleRefresh())},getLineDashOffset:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getLineDashOffset(),this.currentLineDashOffset)},setLineDashOffset:function(t){t!==this.currentLineDashOffset&&(this.currentLineDashOffset=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getLineDashOffset()&&(this.$style.setLineDashOffset(t),this.scheduleRefresh())},getMiterLimit:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getMiterLimit(),this.currentMiterLimit)},setMiterLimit:function(t){t!==this.currentMiterLimit&&(this.currentMiterLimit=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getMiterLimit()&&(this.$style.setMiterLimit(t),this.scheduleRefresh())},getWidth:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getWidth(),this.currentWidth)},setWidth:function(t){t!==this.currentWidth&&(this.currentWidth=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getWidth()&&(this.$style.setWidth(t),this.scheduleRefresh())}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function qf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Xf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?qf(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Hf=Wh({render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("i",{class:t.vmClass,staticStyle:{display:"none !important"},attrs:{id:t.vmId}},[t._t("default",[r("FillStyle",{attrs:{id:"vl-"+t.currentId+"-default-fill-style"}}),t._v(" "),r("StrokeStyle",{attrs:{id:"vl-"+t.currentId+"-default-stroke-style"}})])],2)},staticRenderFns:[]},undefined,{name:"VlStyleCircle",components:{FillStyle:zf,StrokeStyle:Yf},mixins:[zl],props:{radius:Xf(Xf({},zl.props.radius),{},{default:5})},data:function(){return{currentRadius:this.radius}},watch:{rev:function(){this.$style&&this.setRadius(this.getRadius())},currentRadius:function(t){t!==this.radius&&this.$emit("update:radius",t)}},methods:{createStyle:function(){return new l.Circle({displacement:this.inputDisplacement,radius:this.currentRadius,fill:this.$fill,stroke:this.$stroke})},syncNonObservable:function(){zl.methods.syncNonObservable.call(this),this.setRadius(this.getRadius())},getRadius:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getRadius(),this.currentRadius)},setRadius:function(t){t!==this.currentRadius&&(this.currentRadius=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getRadius()&&(this.$style.setRadius(t),this.scheduleRefresh())},radiusChanged:function(t){this.setRadius(t)},pointsChanged:it,radius1Changed:it,radius2Changed:it,angleChanged:it}},undefined,false,undefined,!1,void 0,void 0,void 0),Jf="fraction",Kf={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};function Qf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var td=Wh({},undefined,{name:"VlStyleIcon",mixins:[vl],props:{src:String,size:{type:Array,validator:function(t){return 2===t.length}},img:Image,imgSize:{type:Array,validator:function(t){return 2===t.length}},anchor:{type:Array,default:function(){return[.5,.5]},validator:function(t){return 2===t.length}},anchorOrigin:{type:String,default:Kf.TOP_LEFT},anchorXUnits:{type:String,default:Jf},anchorYUnits:{type:String,default:Jf},color:[Array,String],crossOrigin:String,offset:{type:Array,default:function(){return[0,0]},validator:function(t){return 2===t.length}},offsetOrigin:{type:String,default:Kf.TOP_LEFT}},data:function(){var t;return{currentAnchor:null===(t=this.anchor)||void 0===t?void 0:t.slice()}},computed:{inputSize:function(){var t;return null===(t=this.size)||void 0===t?void 0:t.slice()},inputImgSize:function(){var t;return null===(t=this.imgSize)||void 0===t?void 0:t.slice()},inputAnchor:function(){var t;return null===(t=this.anchor)||void 0===t?void 0:t.slice()},inputColor:function(){return this.color?Rs(this.color):void 0},inputOffset:function(){var t;return null===(t=this.offset)||void 0===t?void 0:t.slice()}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qf(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({rev:function(){this.$style&&this.setAnchor(this.getAnchor())},inputAnchor:{deep:!0,handler:function(t){this.setAnchor(t)}},currentAnchor:{deep:!0,handler:function(t){$t(t,this.inputAnchor)||this.$emit("update:anchor",null==t?void 0:t.slice())}}},Ya(["src","inputSize","img","inputImgSize","anchorOrigin","anchorXUnits","anchorYUnits","anchorYUnits","inputColor","crossOrigin","inputOffset","offsetOrigin"],["inputSize","inputImgSize","inputColor","inputOffset"])),methods:{createStyle:function(){return ne(this.src&&!this.img||!this.src&&this.img,"vl-style-icon one of 'image' or 'src' prop must be provided.'"),ne(!this.img||this.img&&!Ct(this.imgSize),"vl-style-icon 'imgSize' must be set when image is provided."),new l.Icon({opacity:this.currentOpacity,scale:this.currentScale,rotateWithView:this.currentRotateWithView,rotation:this.currentRotation,displacement:this.inputDisplacement,anchor:this.currentAnchor,anchorOrigin:this.anchorOrigin,anchorXUnits:this.anchorXUnits,anchorYUnits:this.anchorYUnits,color:this.inputColor,crossOrigin:this.crossOrigin,offset:this.inputOffset,offsetOrigin:this.offsetOrigin,size:this.inputSize,src:this.src,img:this.img,imgSize:this.inputImgSize})},syncNonObservable:function(){vl.methods.syncNonObservable.call(this),this.setAnchor(this.getAnchor())},getAnchor:function(){var t,e,r=null===(t=this.$style)||void 0===t||null===(e=t.getAnchor())||void 0===e?void 0:e.slice();if(!r)return this.currentAnchor;var n=this.getSize();return n?(this.anchorXUnits===Jf&&(r[0]/=n[0]),this.anchorYUnits===Jf&&(r[1]/=n[1]),[Kf.TOP_RIGHT,Kf.BOTTOM_RIGHT].includes(this.anchorOrigin)&&(r[0]=1-r[0]),[Kf.BOTTOM_LEFT,Kf.BOTTOM_RIGHT].includes(this.anchorOrigin)&&(r[1]=1-r[1]),r[0]=Pt(r[0],3),r[1]=Pt(r[1],3),r):void 0},setAnchor:function(t){var e;$t(t=null===(e=t)||void 0===e?void 0:e.slice(),this.currentAnchor)||(this.currentAnchor=t,this.scheduleRefresh()),this.$style&&!$t(t,this.$style.getAnchor())&&(this.$style.setAnchor(t),this.scheduleRefresh())},getColor:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getColor(),this.inputColor)},getImage:function(t){var e;return null===(e=this.$style)||void 0===e?void 0:e.getImage(t)},getPixelRatio:function(t){var e;return null===(e=this.$style)||void 0===e?void 0:e.getPixelRatio(t)},getOrigin:function(){var t;return null===(t=this.$style)||void 0===t?void 0:t.getOrigin()},getSize:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getSize(),this.inputSize)},getSrc:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getSrc(),this.src)},load:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resolveStyle();case 2:e.sent.load();case 3:case"end":return e.stop()}}),e)})))()}}},undefined,undefined,undefined,!1,void 0,void 0,void 0),ed=Wh({},undefined,{name:"VlStyleRegShape",mixins:[zl],methods:{createStyle:function(){return new l.RegularShape({rotation:this.currentRotation,rotateWithView:this.currentRotateWithView,displacement:this.inputDisplacement,points:this.points,radius:this.radius,radius1:this.radius1,radius2:this.radius2,angle:this.angle,fill:this.$fill,stroke:this.$stroke})}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function rd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function nd(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rd(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function id(){var t=this;Object.defineProperties(this,{$mapVm:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.mapVm}},$viewVm:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.viewVm}}})}var od=Wh({render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("i",{class:t.vmClass,staticStyle:{display:"none !important"},attrs:{id:t.vmId}},[t._t("default",[r("CircleStyle",{attrs:{id:"vl-"+t.currentId+"-default-circle-style"}}),t._v(" "),r("FillStyle",{attrs:{id:"vl-"+t.currentId+"-default-fill-style"}}),t._v(" "),r("StrokeStyle",{attrs:{id:"vl-"+t.currentId+"-default-stroke-style"}})])],2)},staticRenderFns:[]},undefined,{name:"VlStyle",components:{CircleStyle:Hf,FillStyle:zf,StrokeStyle:Yf},mixins:[Qa,Ec,Ml,ql,ml,gc,fl,rc],stubVNode:{empty:!1,attrs:function(){return{id:this.vmId,class:this.vmClass}}},props:{zIndex:{type:Number,default:0},renderer:Function,condition:[Boolean,Function]},data:function(){return{viewProjection:$o,dataProjection:$o,currentZIndex:this.zIndex,currentRenderer:this.renderer}},computed:{stroke:function(){if(this.rev&&this.$stroke)return Ms(this.$stroke)},fill:function(){if(this.rev&&this.$fill)return Ns(this.$fill)},text:function(){if(this.rev&&this.$text)return Us(this.$text)},image:function(){if(this.rev&&this.$image)return Gs(this.$image)},geometryDataProj:function(){if(this.rev&&this.$geometry)return this.writeGeometryInDataProj(this.$geometry)},geometryViewProj:function(){if(this.rev&&this.$geometry)return this.writeGeometryInViewProj(this.$geometry)}},watch:nd(nd(nd({rev:function(){this.$style&&(this.setZIndex(this.getZIndex()),this.setRenderer(this.getRenderer()))}},Pe(["zIndex","renderer"],(function(t){var e="set"+Gt("input"===t.slice(0,5)?Ut(t.slice(5)):t);return function(t){this[e](t)}}))),Pe(["currentZIndex","currentRenderer"],(function(t){var e="current"===t.slice(0,7)?Ut(t.slice(7)):t,r="input"+Gt(e);return function(t){$t(t,St(this[r],this[e]))||this.$emit("update:".concat(e),wt(t)?Qt(t):t)}}))),Pe(["fill","stroke","text","image","geometryDataProj"],(function(t){return t=t.replace(/(DataProj|ViewProj)$/i,""),{deep:!0,handler:function(e,r){$t(e,r)||this.$emit("update:".concat(t),wt(e)?Qt(e):e)}}}))),created:function(){id.call(this)},updated:function(){},methods:{beforeInit:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([fl.methods.beforeInit.call(t),rc.methods.beforeInit.call(t)]);case 2:case"end":return e.stop()}}),e)})))()},createStyle:function(){return new l.Style({zIndex:this.currentZIndex,renderer:this.currentRenderer,fill:this.$fill,stroke:this.$stroke,image:this.$image,text:this.$text,geometry:this.$geometry})},mount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=t.$styleContainer)||void 0===r||r.addStyle(t),e.abrupt("return",fl.methods.mount.call(t));case 2:case"end":return e.stop()}}),e)})))()},unmount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=t.$styleContainer)||void 0===r||r.removeStyle(t),e.abrupt("return",fl.methods.unmount.call(t));case 2:case"end":return e.stop()}}),e)})))()},refresh:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([fl.methods.refresh.call(t),null===(r=t.$styleContainer)||void 0===r?void 0:r.refresh()]);case 2:case"end":return e.stop()}}),e)})))()},getServices:function(){return je(fl.methods.getServices.call(this),Ec.methods.getServices.call(this),Ml.methods.getServices.call(this),ql.methods.getServices.call(this),ml.methods.getServices.call(this),gc.methods.getServices.call(this))},syncNonObservable:function(){fl.methods.syncNonObservable.call(this),this.setZIndex(this.getZIndex()),this.setRenderer(this.getRenderer())},getFillStyleTarget:function(){return this.$style},getStrokeStyleTarget:function(){return this.$style},getTextStyleTarget:function(){return this.$style},getImageStyleTarget:function(){return this.$style},getGeometryTarget:function(){return this.$style},getZIndex:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getZIndex(),this.currentZIndex)},setZIndex:function(t){t!==this.currentZIndex&&(this.currentZIndex=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getZIndex()&&(this.$style.setZIndex(t),this.scheduleRefresh())},getRenderer:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getRenderer(),this.currentRenderer)},setRenderer:function(t){t!==this.currentRenderer&&(this.currentRenderer=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getRenderer()&&(this.$style.setRenderer(t),this.scheduleRefresh())},getGeometryFunction:function(){var t;return null===(t=this.$style)||void 0===t?void 0:t.getGeometryFunction()}}},undefined,false,undefined,!1,void 0,void 0,void 0);function sd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ud(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ad(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ud(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ud(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function cd(){var t=this;Object.defineProperties(this,{$textStyleContainer:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.textStyleContainer}},$bgFill:{enumerable:!0,get:this.getBackgroundFill},$bgFillVm:{enumerable:!0,get:function(){return t._bgFillVm}},$bgStroke:{enumerable:!0,get:this.getBackgroundStroke},$bgStrokeVm:{enumerable:!0,get:function(){return t._bgStrokeVm}}})}var ld=Wh({render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("i",{class:t.vmClass,staticStyle:{display:"none !important"},attrs:{id:t.vmId}},[t._t("default",[r("FillStyle",{attrs:{id:"vl-"+t.currentId+"-default-fill-style",color:"#333"}}),t._v(" "),r("StrokeStyle",{attrs:{id:"vl-"+t.currentId+"-default-stroke-style",color:"#eee"}})]),t._v(" "),r("BackgroundStyle",{attrs:{id:"vl-"+t.currentId+"-background-style"}},[t._t("background")],2)],2)},staticRenderFns:[]},undefined,{name:"VlStyleText",components:{BackgroundStyle:Wh({},undefined,{name:"VlStyleBackgroundAdapter",mixins:[tc,Ec,Ml,Ca],stubVNode:{empty:!1,attrs:function(){return{id:this.vmId,class:this.vmClass}}},computed:{stroke:function(){if(this.rev&&this.$strokeStyle)return Ms(this.$strokeStyle)},fill:function(){if(this.rev&&this.$fill)return Ns(this.$fill)}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sd(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Pe(["fill","stroke"],(function(t){return function(e,r){$t(e,r)||this.$emit("update:".concat(t),wt(e)?Qt(e):e)}}))),created:function(){var t=this;Object.defineProperties(this,{$bgStyleContainer:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.bgStyleContainer}}})},methods:{createOlObject:function(){var t=ut();return t.id=this.currentId,t},getServices:function(){return je(Ca.methods.getServices.call(this),Ec.methods.getServices.call(this),Ml.methods.getServices.call(this))},getFillStyleTarget:function(){var t=this;return{getFill:function(){var e;return null===(e=t.$bgStyleContainer)||void 0===e?void 0:e.getBackgroundFill()},setFill:function(e){var r;return null===(r=t.$bgStyleContainer)||void 0===r?void 0:r.setBackgroundFill(e)}}},getStrokeStyleTarget:function(){var t=this;return{getStroke:function(){var e;return null===(e=t.$bgStyleContainer)||void 0===e?void 0:e.getBackgroundStroke()},setStroke:function(e){var r;return null===(r=t.$bgStyleContainer)||void 0===r?void 0:r.setBackgroundStroke(e)}}}}},undefined,undefined,undefined,!1,void 0,void 0,void 0),FillStyle:zf,StrokeStyle:Yf},mixins:[Ec,Ml,fl],stubVNode:{empty:!1,attrs:function(){return{id:this.vmId,class:this.vmClass}}},props:{font:{type:String,default:"10px sans-serif"},maxAngle:Number,placement:String,offsetX:{type:Number,default:0},offsetY:{type:Number,default:0},overflow:Boolean,rotateWithView:{type:Boolean,default:!1},rotation:{type:Number,default:0},scale:{type:Number,default:1},text:String,textAlign:String,textBaseline:String,padding:{type:Array,default:function(){return[0,0,0,0]},validate:function(t){return t.length&&4===t.length}}},data:function(){var t;return{currentFont:this.font,currentMaxAngle:this.maxAngle,currentPlacement:this.placement,currentOffsetX:this.offsetX,currentOffsetY:this.offsetY,currentOverflow:this.overflow,currentRotateWithView:this.rotateWithView,currentRotation:this.rotation,currentScale:this.scale,currentText:this.text,currentTextAlign:this.textAlign,currentTextBaseline:this.textBaseline,currentPadding:null===(t=this.padding)||void 0===t?void 0:t.slice()}},computed:{inputPadding:function(){var t;return null===(t=this.padding)||void 0===t?void 0:t.slice()},stroke:function(){if(this.rev&&this.$stroke)return Ms(this.$stroke)},fill:function(){if(this.rev&&this.$fill)return Ns(this.$fill)},backgroundFill:function(){if(this.rev&&this.$bgFill)return Ns(this.$bgFill)},backgroundStroke:function(){if(this.rev&&this.$bgStroke)return Ms(this.$bgStroke)}},watch:ad(ad(ad({rev:function(){this.$style&&(this.setFont(this.getFont()),this.setMaxAngle(this.getMaxAngle()),this.setPlacement(this.getPlacement()),this.setOffsetX(this.getOffsetX()),this.setOffsetY(this.getOffsetY()),this.setOverflow(this.getOverflow()),this.setRotateWithView(this.getRotateWithView()),this.setRotation(this.getRotation()),this.setScale(this.getScale()),this.setText(this.getText()),this.setTextAlign(this.getTextAlign()),this.setTextBaseline(this.getTextBaseline()),this.setPadding(this.getPadding()))}},Pe(["font","maxAngle","placement","offsetX","offsetY","overflow","rotateWithView","rotation","scale","text","textAlign","textBaseline","inputPadding"],(function(t){var e="set"+Gt("input"===t.slice(0,5)?Ut(t.slice(5)):t);return{deep:["inputPadding"].includes(t),handler:function(t){this[e](t)}}}))),Pe(["currentFont","currentMaxAngle","currentPlacement","currentOffsetX","currentOffsetY","currentOverflow","currentRotateWithView","currentRotation","currentScale","currentText","currentTextAlign","currentTextBaseline","currentPadding"],(function(t){var e="current"===t.slice(0,7)?Ut(t.slice(7)):t,r="input"+Gt(e);return{deep:["currentPadding"].includes(t),handler:function(t){$t(t,St(this[r],this[e]))||this.$emit("update:".concat(e),wt(t)?Qt(t):t)}}}))),Pe(["fill","stroke","backgroundFill","backgroundStroke"],(function(t){return{deep:!0,handler:function(e,r){$t(e,r)||this.$emit("update:".concat(t),wt(e)?Qt(e):e)}}}))),created:function(){this._bgFill=void 0,this._bgFillVm=void 0,this._bgStroke=void 0,this._bgStrokeVm=void 0,cd.call(this)},methods:{createStyle:function(){return new l.Text({font:this.currentFont,maxAngle:this.currentMaxAngle,placement:this.currentPlacement,offsetX:this.currentOffsetX,offsetY:this.currentOffsetY,overflow:this.currentOverflow,rotateWithView:this.currentRotateWithView,rotation:this.currentRotation,scale:this.currentScale,text:this.currentText,textAlign:this.currentTextAlign,textBaseline:this.currentTextBaseline,padding:this.currentPadding,fill:this.$fill,stroke:this.$stroke,backgroundFill:this.$bgFill,backgroundStroke:this.$bgStroke})},mount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=t.$textStyleContainer)||void 0===r||r.setText(t),e.abrupt("return",fl.methods.mount.call(t));case 2:case"end":return e.stop()}}),e)})))()},unmount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(r=t.$textStyleContainer)||void 0===r?void 0:r.getTextVm())!==t){e.next=3;break}return e.next=3,t.$textStyleContainer.setText(null);case 3:return e.abrupt("return",fl.methods.unmount.call(t));case 4:case"end":return e.stop()}}),e)})))()},refresh:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([fl.methods.refresh.call(t),null===(r=t.$textStyleContainer)||void 0===r?void 0:r.refresh()]);case 2:case"end":return e.stop()}}),e)})))()},getServices:function(){var t=this;return je(fl.methods.getServices.call(this),Ec.methods.getServices.call(this),Ml.methods.getServices.call(this),{get bgStyleContainer(){return t}})},syncNonObservable:function(){fl.methods.syncNonObservable.call(this),this.setFont(this.getFont()),this.setMaxAngle(this.getMaxAngle()),this.setPlacement(this.getPlacement()),this.setOffsetX(this.getOffsetX()),this.setOffsetY(this.getOffsetY()),this.setOverflow(this.getOverflow()),this.setRotateWithView(this.getRotateWithView()),this.setRotation(this.getRotation()),this.setScale(this.getScale()),this.setText(this.getText()),this.setTextAlign(this.getTextAlign()),this.setTextBaseline(this.getTextBaseline()),this.setPadding(this.getPadding())},getFont:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getFont(),this.currentFont)},setFont:function(t){t!==this.currentFont&&(this.currentFont=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getFont()&&(this.$style.setFont(t),this.scheduleRefresh())},getMaxAngle:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getMaxAngle(),this.currentMaxAngle)},setMaxAngle:function(t){t!==this.currentMaxAngle&&(this.currentMaxAngle=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getMaxAngle()&&(this.$style.setMaxAngle(t),this.scheduleRefresh())},getOffsetX:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getOffsetX(),this.currentOffsetX)},setOffsetX:function(t){t!==this.currentOffsetX&&(this.currentOffsetX=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getOffsetX()&&(this.$style.setOffsetX(t),this.scheduleRefresh())},getOffsetY:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getOffsetY(),this.currentOffsetY)},setOffsetY:function(t){t!==this.currentOffsetY&&(this.currentOffsetY=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getOffsetY()&&(this.$style.setOffsetY(t),this.scheduleRefresh())},getOverflow:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getOverflow(),this.currentOverflow)},setOverflow:function(t){t!==this.currentOverflow&&(this.currentOverflow=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getOverflow()&&(this.$style.setOverflow(t),this.scheduleRefresh())},getPadding:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getPadding(),this.currentPadding)},setPadding:function(t){var e;$t(t=null===(e=t)||void 0===e?void 0:e.slice(),this.currentPadding)||(this.currentPadding=t,this.scheduleRefresh()),this.$style&&!$t(t,this.$style.getPadding())&&(this.$style.setPadding(t),this.scheduleRefresh())},getPlacement:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getPlacement(),this.currentPlacement)},setPlacement:function(t){t!==this.currentPlacement&&(this.currentPlacement=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getPlacement()&&(this.$style.setPlacement(t),this.scheduleRefresh())},getRotateWithView:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getRotateWithView(),this.currentRotateWithView)},setRotateWithView:function(t){t!==this.currentRotateWithView&&(this.currentRotateWithView=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getRotateWithView()&&(this.$style.setRotateWithView(t),this.scheduleRefresh())},getRotation:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getRotation(),this.currentRotation)},setRotation:function(t){t!==this.currentRotation&&(this.currentRotation=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getRotation()&&(this.$style.setRotation(t),this.scheduleRefresh())},getScale:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getScale(),this.currentScale)},setScale:function(t){t!==this.currentScale&&(this.currentScale=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getScale()&&(this.$style.setScale(t),this.scheduleRefresh())},getText:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getText(),this.currentText)},setText:function(t){t!==this.currentText&&(this.currentText=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getText()&&(this.$style.setText(t),this.scheduleRefresh())},getTextAlign:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getTextAlign(),this.currentTextAlign)},setTextAlign:function(t){t!==this.currentTextAlign&&(this.currentTextAlign=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getTextAlign()&&(this.$style.setTextAlign(t),this.scheduleRefresh())},getTextBaseline:function(){var t;return St(null===(t=this.$style)||void 0===t?void 0:t.getTextBaseline(),this.currentTextBaseline)},setTextBaseline:function(t){t!==this.currentTextBaseline&&(this.currentTextBaseline=t,this.scheduleRefresh()),this.$style&&t!==this.$style.getTextBaseline()&&(this.$style.setTextBaseline(t),this.scheduleRefresh())},getFillStyleTarget:function(){return this.$style},getStrokeStyleTarget:function(){return this.$style},getBackgroundFill:function(){return this._bgFill},setBackgroundFill:function(t){var e,r;((t=(null===(e=t)||void 0===e?void 0:e.$fill)||t)||(t=void 0),t!==this._bgFill)&&(this._bgFill=t,this._bgFillVm=(null===(r=t)||void 0===r?void 0:r.vm)&&t.vm[0],this.scheduleRefresh());this.$style&&t!==this.$style.getBackgroundFill()&&(this.$style.setBackgroundFill(t),this.scheduleRefresh())},getBackgroundStroke:function(){return this._bgStroke},setBackgroundStroke:function(t){var e,r;((t=(null===(e=t)||void 0===e?void 0:e.$stroke)||t)||(t=void 0),t!==this._bgStroke)&&(this._bgStroke=t,this._bgStrokeVm=(null===(r=t)||void 0===r?void 0:r.vm)&&t.vm[0],this.scheduleRefresh());this.$style&&t!==this.$style.getBackgroundStroke()&&(this.$style.setBackgroundStroke(t),this.scheduleRefresh())}}},undefined,false,undefined,!1,void 0,void 0,void 0);function hd(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};hd.installed||(hd.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Hf,e),Object.assign(zf,e),Object.assign(td,e),Object.assign(ed,e),Object.assign(Yf,e),Object.assign(od,e),Object.assign(ld,e),t.component(Hf.name,Hf),t.component(zf.name,zf),t.component(td.name,td),t.component(ed.name,ed),t.component(Yf.name,Yf),t.component(od.name,od),t.component(ld.name,ld),t.component("VlStyleBox",{name:"VlStyleBox",extends:od,created:function(){}}))}var fd=Object.freeze({__proto__:null,default:hd,install:hd,CircleStyle:Hf,FillStyle:zf,IconStyle:td,RegShapeStyle:ed,StrokeStyle:Yf,Style:od,TextStyle:ld}),dd=Wh({},undefined,{name:"VlLayerGraticuleLatStyleAdapter",mixins:[tc,ql,Ca],stubVNode:{empty:!1,attrs:function(){return{id:this.vmId,class:this.vmClass}}},computed:{text:function(){if(this.rev&&this.$text)return Us(this.$text)}},watch:{text:{deep:!0,handler:function(t,e){$t(t,e)&&this.$emit("update:text",t&&Qt(t))}}},created:function(){var t=this;Object.defineProperties(this,{$latStyleContainer:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.latStyleContainer}}})},methods:{createOlObject:function(){var t=ut();return t.id=this.currentId,t},getServices:function(){return je(Ca.methods.getServices.call(this),ql.methods.getServices.call(this))},getTextStyleTarget:function(){var t=this;return{getText:function(){var e;return null===(e=t.$latStyleContainer)||void 0===e?void 0:e.getLatLabelStyle()},setText:function(e){var r;return null===(r=t.$latStyleContainer)||void 0===r?void 0:r.setLatLabelStyle(e)}}}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function pd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var vd=Wh({render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("i",{class:t.vmClass,staticStyle:{display:"none !important"},attrs:{id:t.vmId}},[r("LonStyle",{attrs:{id:"vl-"+t.currentId+"-lon-style"}},[t._t("lon",[r("TextStyle",{attrs:{id:"vl-"+t.currentId+"-default-text-style",font:"'12px sans-serif'","text-baseline":"bottom"}},[r("FillStyle",{attrs:{id:"vl-"+t.currentId+"-default-fill-style",color:"rgba(0,0,0,1)"}}),t._v(" "),r("StrokeStyle",{attrs:{id:"vl-"+t.currentId+"-default-stroke-style",color:"rgba(255,255,255,1)",width:3}})],1)])],2),t._v(" "),r("LatStyle",{attrs:{id:"vl-"+t.currentId+"-lat-style"}},[t._t("lat",[r("TextStyle",{attrs:{id:"vl-"+t.currentId+"-default-text-style",font:"'12px Calibri,sans-serif'","text-baseline":"bottom"}},[r("FillStyle",{attrs:{id:"vl-"+t.currentId+"-default-fill-style",color:"rgba(0,0,0,1)"}}),t._v(" "),r("StrokeStyle",{attrs:{id:"vl-"+t.currentId+"-default-stroke-style",color:"rgba(255,255,255,1)",width:3}})],1)])],2),t._v(" "),r("GStrokeStyle",{attrs:{id:"vl-"+t.currentId+"-graticule-style"}},[t._t("stroke",[r("StrokeStyle",{attrs:{id:"vl-"+t.currentId+"-default-graticule-stroke-style",color:"rgba(0,0,0,0.2)"}})])],2)],1)},staticRenderFns:[]},undefined,{name:"VlLayerGraticule",components:{LonStyle:Wh({},undefined,{name:"VlLayerGraticuleLonStyleAdapter",mixins:[tc,ql,Ca],stubVNode:{empty:!1,attrs:function(){return{id:this.vmId,class:this.vmClass}}},computed:{text:function(){if(this.rev&&this.$text)return Us(this.$text)}},watch:{text:{deep:!0,handler:function(t,e){$t(t,e)&&this.$emit("update:text",t&&Qt(t))}}},created:function(){var t=this;Object.defineProperties(this,{$lonStyleContainer:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.lonStyleContainer}}})},methods:{createOlObject:function(){var t=ut();return t.id=this.currentId,t},getServices:function(){return je(Ca.methods.getServices.call(this),ql.methods.getServices.call(this))},getTextStyleTarget:function(){var t=this;return{getText:function(){var e;return null===(e=t.$lonStyleContainer)||void 0===e?void 0:e.getLonLabelStyle()},setText:function(e){var r;return null===(r=t.$lonStyleContainer)||void 0===r?void 0:r.setLonLabelStyle(e)}}}}},undefined,undefined,undefined,!1,void 0,void 0,void 0),LatStyle:dd,GStrokeStyle:Wh({},undefined,{name:"VlLayerGraticuleStrokeStyleAdapter",mixins:[tc,Ml,Ca],stubVNode:{empty:!1,attrs:function(){return{id:this.vmId,class:this.vmClass}}},computed:{stroke:function(){if(this.rev&&this.$stroke)return Ms(this.$stroke)}},watch:{stroke:{deep:!0,handler:function(t,e){$t(t,e)||this.$emit("update:stroke",t&&Qt(t))}}},created:function(){var t=this;Object.defineProperties(this,{$strokeStyleContainer:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.strokeStyleContainer}}})},methods:{createOlObject:function(){var t=ut();return t.id=this.currentId,t},getServices:function(){return je(Ca.methods.getServices.call(this),Ml.methods.getServices.call(this))},getStrokeStyleTarget:function(){var t=this;return{setStroke:function(e){return t.$strokeStyleContainer.setStrokeStyle(e)},getStroke:function(){return t.$strokeStyleContainer.getStrokeStyle()}}}}},undefined,undefined,undefined,!1,void 0,void 0,void 0),TextStyle:ld,FillStyle:zf,StrokeStyle:Yf},mixins:[vh],props:{maxLines:{type:Number,default:100},targetSize:{type:Number,default:100},showLabels:{type:Boolean,default:!1},lonLabelFormatter:Function,latLabelFormatter:Function,lonLabelPosition:{type:Number,default:0},latLabelPosition:{type:Number,default:1},intervals:{type:Array,default:function(){return[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001]}},wrapX:{type:Boolean,default:!0}},computed:{inputIntervals:function(){var t;return null===(t=this.intervals)||void 0===t?void 0:t.slice()},meridians:function(){var t=this;return this.rev?Lt(this.getMeridians(),(function(e){return t.writeGeometryInDataProj(e)})):[]},parallels:function(){var t=this;return this.rev?Lt(this.getParallels(),(function(e){return t.writeGeometryInDataProj(e)})):[]},lonLabelStyle:function(){if(this.rev&&this.$lonLabelStyle)return Us(this.$lonLabelStyle)},latLabelStyle:function(){if(this.rev&&this.$latLabelStyle)return Us(this.$latLabelStyle)},strokeStyle:function(){if(this.rev&&this.$strokeStyle)return Ms(this.$strokeStyle)}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pd(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({meridians:{deep:!0,handler:function(t,e){$t(t,e)||this.$emit("update:meridians",Qt(t))}},parallels:{deep:!0,handler:function(t,e){$t(t,e)||this.$emit("update:parallels",Qt(t))}},lonLabelStyle:{deep:!0,handler:function(t,e){$t(t,e)||this.$emit("update:lonLabelStyle",t&&Qt(t))}},latLabelStyle:{deep:!0,handler:function(t,e){$t(t,e)||this.$emit("update:latLabelStyle",t&&Qt(t))}},strokeStyle:{deep:!0,handler:function(t,e){$t(t,e)||this.$emit("update:strokeStyle",t&&Qt(t))}}},Ya(["maxLines","targetSize","showLabels","lonLabelFormatter","latLabelFormatter","lonLabelPosition","latLabelPosition","inputIntervals","wrapX"],["inputIntervals"])),created:function(){this._lonLabelStyle=void 0,this._lonLabelStyleVm=void 0,this._latLabelStyle=void 0,this._latLabelStyleVm=void 0,this._strokeStyle=void 0,this._strokeStyleVm=void 0,Object.defineProperties(this,{$lonLabelStyle:{enumerable:!0,get:this.getLonLabelStyle},$lonLabelStyleVm:{enumerable:!0,get:this.getLonLabelStyleVm},$latLabelStyle:{enumerable:!0,get:this.getLatLabelStyle},$latLabelStyleVm:{enumerable:!0,get:this.getLatLabelStyleVm},$strokeStyle:{enumerable:!0,get:this.getStrokeStyle},$strokeStyleVm:{enumerable:!0,get:this.getStrokeStyleVm}})},methods:{createLayer:function(){return new I.default({className:this.className,opacity:this.currentOpacity,visible:this.currentVisible,extent:this.currentExtentViewProj,zIndex:this.currentZIndex,minResolution:this.currentMinResolution,maxResolution:this.currentMaxResolution,minZoom:this.currentMinZoom,maxZoom:this.currentMaxZoom,render:this.render,renderOrder:this.renderOrder,renderBuffer:this.renderBuffer,declutter:this.declutter,updateWhileAnimating:this.updateWhileAnimating,updateWhileInteracting:this.updateWhileInteracting,style:this.$style,maxLines:this.maxLines,strokeStyle:this.$strokeStyle,targetSize:this.targetSize,showLabels:this.showLabels,lonLabelFormatter:this.lonLabelFormatter,latLabelFormatter:this.latLabelFormatter,lonLabelPosition:this.lonLabelPosition,latLabelPosition:this.latLabelPosition,lonLabelStyle:this.$lonLabelStyle,latLabelStyle:this.$latLabelStyle,intervals:this.inputIntervals,wrapX:this.wrapX})},getServices:function(){var t=this;return je(vh.methods.getServices.call(this),{get lonStyleContainer(){return t},get latStyleContainer(){return t},get strokeStyleContainer(){return t}})},getMeridians:function(){var t;return St(null===(t=this.$layer)||void 0===t?void 0:t.getMeridians(),[])},getParallels:function(){var t;return St(null===(t=this.$layer)||void 0===t?void 0:t.getParallels(),[])},getLonLabelStyle:function(){return this._lonLabelStyle},getLonLabelStyleVm:function(){return this._lonLabelStyleVm},setLonLabelStyle:function(t){var e,r,n;(t=(null===(e=t)||void 0===e?void 0:e.$style)||t)||(t=void 0),ne(!t||t instanceof l.Text,"Invalid lon label style"),t!==this._lonLabelStyle&&(this._lonLabelStyle=t,this._lonLabelStyleVm=(null===(r=t)||void 0===r?void 0:r.vm)&&(null===(n=t)||void 0===n?void 0:n.vm[0]),this.scheduleRecreate())},getLatLabelStyle:function(){return this._latLabelStyle},getLatLabelStyleVm:function(){return this._latLabelStyleVm},setLatLabelStyle:function(t){var e,r,n;(t=(null===(e=t)||void 0===e?void 0:e.$style)||t)||(t=void 0),ne(!t||t instanceof l.Text,"Invalid lat label style"),t!==this._latLabelStyle&&(this._latLabelStyle=t,this._latLabelStyleVm=(null===(r=t)||void 0===r?void 0:r.vm)&&(null===(n=t)||void 0===n?void 0:n.vm[0]),this.scheduleRecreate())},getStrokeStyle:function(){return this._strokeStyle},getStrokeStyleVm:function(){return this._strokeStyleVm},setStrokeStyle:function(t){var e,r,n;(t=null===(e=t)||void 0===e?void 0:e.$style)||(t=void 0),ne(!t||t instanceof l.Stroke,"Invalid stroke style"),t!==this._strokeStyle&&(this._strokeStyle=t,this._strokeStyleVm=(null===(r=t)||void 0===r?void 0:r.vm)&&(null===(n=t)||void 0===n?void 0:n.vm[0]),this.scheduleRecreate())}}},undefined,false,undefined,!1,void 0,void 0,void 0);function gd(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};gd.installed||(gd.installed=!0,e=Nt(e,"dataProjection"),Object.assign(vd,e),t.component(vd.name,vd),t.component("VlGraticule",{name:"VlGraticule",extends:vd,created:function(){}}))}var md=Object.freeze({__proto__:null,default:gd,install:gd,Layer:vd}),yd=Wh({},undefined,{name:"VlLayerGroup",mixins:[Rl,oc],computed:{layers:function(){return this.rev?Lt(this.getLayers(),(function(t){return{id:mu(t),type:t.constructor.name}})):[]}},watch:{layers:{deep:!0,handler:function(t,e){$t(t,e)||this.$emit("update:layers",t.slice())}}},methods:{createLayer:function(){return new w.Group({className:this.className,opacity:this.currentOpacity,visible:this.currentVisible,extent:this.currentExtentViewProj,zIndex:this.currentZIndex,minResolution:this.currentMinResolution,maxResolution:this.currentMaxResolution,minZoom:this.currentMinZoom,maxZoom:this.currentMaxZoom,layers:this.$layersCollection})},getServices:function(){return je(oc.methods.getServices.call(this),Rl.methods.getServices.call(this))},subscribeAll:function(){Rl.methods.subscribeAll.call(this),oc.methods.subscribeAll.call(this)}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function bd(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};bd.installed||(bd.installed=!0,e=Nt(e,"dataProjection"),Object.assign(yd,e),t.component(yd.name,yd))}var Od=Object.freeze({__proto__:null,default:bd,install:bd,Layer:yd});function wd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function jd(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wd(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Pd(){var t=this,e=te("set"),r=ua(this.$layer,["blur","gradient","radius"],!0,(function(r){return jd(jd({},r),{},{setter:t[e(r.prop)]})}));this.subscribeTo(r,(function(t){return(0,t.setter)(t.value)}))}var Sd=Wh({},undefined,{name:"VlLayerHeatmap",mixins:[vh],props:{gradient:{type:Array,default:function(){return["#0000ff","#00ffff","#00ff00","#ffff00","#ff0000"]}},radius:{type:Number,default:8},blur:{type:Number,default:15},weight:{type:[String,Function],default:"weight"}},data:function(){return{currentGradient:this.gradient.slice(),currentRadius:this.radius,currentBlur:this.blur}},computed:{inputGradient:function(){return this.gradient.slice()}},watch:jd({rev:function(){this.$layer&&($t(this.currentGradient,this.$layer.getGradient())||(this.currentGradient=this.$layer.getGradient()),this.currentRadius!==this.$layer.getRadius()&&(this.currentRadius=this.$layer.getRadius()),this.currentBlur!==this.$layer.getBlur()&&(this.currentBlur=this.$layer.getBlur()))},inputGradient:function(t){this.setGradient(t)},currentGradient:{deep:!0,handler:function(t){$t(t,this.inputGradient)||this.$emit("update:gradient",t.slice())}},radius:function(t){this.setRadius(t)},currentRadius:function(t){t!==this.radius&&this.$emit("update:radius",t)},blur:function(t){this.setBlur(t)},currentBlur:function(t){t!==this.blur&&this.$emit("update:blur",t)}},Ya(["weight"])),methods:{createLayer:function(){return new w.Heatmap({className:this.className,opacity:this.currentOpacity,visible:this.currentVisible,extent:this.currentExtentViewProj,zIndex:this.currentZIndex,minResolution:this.currentMinResolution,maxResolution:this.currentMaxResolution,minZoom:this.currentMinZoom,maxZoom:this.currentMaxZoom,render:this.render,source:this.$source,renderOrder:this.renderOrder,renderBuffer:this.renderBuffer,declutter:this.declutter,updateWhileAnimating:this.updateWhileAnimating,updateWhileInteracting:this.updateWhileInteracting,style:this.$style,blur:this.currentBlur,gradient:this.currentGradient,radius:this.currentRadius,weight:this.weight})},subscribeAll:function(){vh.methods.subscribeAll.call(this),Pd.call(this)},getBlur:function(){var t;return St(null===(t=this.$layer)||void 0===t?void 0:t.getBlur(),this.currentBlur)},setBlur:function(t){ne(pt(t=Number(t)),"Invalid blur"),t!==this.currentBlur&&(this.currentBlur=t),this.$layer&&t!==this.$layer.getBlur()&&this.$layer.setBlur(t)},getGradient:function(){var t;return St(null===(t=this.$layer)||void 0===t?void 0:t.getGradient(),this.currentGradient)},setGradient:function(t){ne(gt(t),"Invalid gradient"),$t(t=t.slice(),this.currentGradient)||(this.currentGradient=t),this.$layer&&!$t(t,this.$layer.getGradient())&&this.$layer.setGradient(t)},getRadius:function(){var t;return St(null===(t=this.$layer)||void 0===t?void 0:t.getRadius(),this.currentRadius)},setRadius:function(t){ne(pt(t=Number(t)),"Invalid radius"),t!==this.currentRadius&&(this.currentRadius=t),this.$layer&&t!==this.$layer.getRadius()&&this.$layer.setRadius(t)}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function xd(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};xd.installed||(xd.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Sd,e),t.component(Sd.name,Sd))}var $d=Object.freeze({__proto__:null,default:xd,install:xd,Layer:Sd});function Id(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var Cd=ft(vt,lt(Ct)),Td=Wh({},undefined,{name:"VlSourceImageArcgisRest",mixins:[Ka,cl],props:{crossOrigin:String,imageLoadFunction:Function,imageLoadFunc:Function,imageSmoothing:{type:Boolean,default:!0},ratio:{type:Number,default:1.5},url:{type:String,required:!0,validator:Cd}},data:function(){return{currentImageLoadFunction:this.imageLoadFunction,currentUrl:this.url}},computed:{inputImageLoadFunction:function(){return this.imageLoadFunction||this.imageLoadFunc}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Id(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Id(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({rev:function(){this.$source&&(this.currentImageLoadFunction!==this.$source.getImageLoadFunction()&&(this.currentImageLoadFunction=this.$source.getImageLoadFunction()),this.currentUrl!==this.$source.getUrl()&&(this.currentUrl=this.$source.getUrl()))},url:function(t){this.setUrl(t)},currentUrl:function(t){t!==this.url&&this.$emit("update:url",t)},inputImageLoadFunction:function(t){this.setImageLoadFunction(t)},currentImageLoadFunction:function(t){t!==this.imageLoadFunction&&this.$emit("update:imageLoadFunction",t)}},Ya(["crossOrigin","imageSmoothing","ratio"])),created:function(){this.currentImageLoadFunction=this.inputImageLoadFunction},updated:function(){},methods:{createSource:function(){return new e.ImageArcGISRest({attributions:this.currentAttributions,projection:this.resolvedDataProjection,resolutions:this.inputResolutions,crossOrigin:this.crossOrigin,hidpi:this.hidpi,imageLoadFunction:this.currentImageLoadFunction,imageSmoothing:this.imageSmoothing,params:this.currentParams,ratio:this.ratio,url:this.currentUrl})},getUrl:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getUrl(),this.currentUrl)},setUrl:function(t){ne(Cd(t),"Invalid url"),t!==this.currentUrl&&(this.currentUrl=t),this.$source&&t!==this.$source.getUrl()&&this.$source.setUrl(t)},getImageLoadFunction:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getImageLoadFunction(),this.currentImageLoadFunction)},setImageLoadFunction:function(t){ne(bt(t),"Invalid image load function"),t!==this.currentImageLoadFunction&&(this.currentImageLoadFunction=t),this.$source&&t!==this.$source.getImageLoadFunction()&&this.$source.setImageLoadFunction(t)},stateChanged:it}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function _d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_d.installed||(_d.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Td,e),t.component(Td.name,Td))}var Ed=Object.freeze({__proto__:null,default:_d,install:_d,Source:Td}),Rd=Wh({},undefined,{name:"VlLayerImage",mixins:[Hc],methods:{createLayer:function(){return new w.Image({className:this.className,opacity:this.currentOpacity,visible:this.currentVisible,extent:this.currentExtentViewProj,zIndex:this.currentZIndex,minResolution:this.currentMinResolution,maxResolution:this.currentMaxResolution,minZoom:this.currentMinZoom,maxZoom:this.currentMaxZoom,render:this.render,source:this.$source})}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Fd(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Fd.installed||(Fd.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Rd,e),t.component(Rd.name,Rd))}var kd=Object.freeze({__proto__:null,default:Fd,install:Fd,Layer:Rd});function Dd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var Vd=Wh({},undefined,{name:"VlSourceImageStatic",mixins:[cl],props:{crossOrigin:String,imageExtent:{type:Array,validator:function(t){return 4===t.length}},imgExtent:{type:Array,validator:function(t){return 4===t.length}},extent:{type:Array,validator:function(t){return 4===t.length}},imageLoadFunction:Function,imgLoadFunc:Function,loadFunc:Function,imageSize:{type:Array,validator:function(t){return 2===t.length}},imgSize:{type:Array,validator:function(t){return 2===t.length}},size:{type:Array,validator:function(t){return 2===t.length}},imageSmoothing:{type:Boolean,default:!0},url:{type:String,required:!0,validator:lt(Ct)}},computed:{inputImageExtent:function(){var t;return null===(t=St(this.imageExtent,this.imgExtent,this.extent))||void 0===t?void 0:t.slice()},inputImageLoadFunction:function(){return St(this.imageLoadFunction,this.imgLoadFunc,this.loadFunc)},inputImageSize:function(){var t;return null===(t=St(this.imageSize,this.imgSize,this.size))||void 0===t?void 0:t.slice()}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Dd(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Ya(["crossOrigin","inputImageExtent","inputImageLoadFunction","inputImageSize","imageSmoothing","url"],["inputImageExtent","inputImageSize"])),created:function(){},updated:function(){},methods:{createSource:function(){return new e.ImageStatic({attributions:this.currentAttributions,projection:this.resolvedDataProjection,crossOrigin:this.crossOrigin,imageExtent:this.inputImageExtent,imageLoadFunction:this.inputImageLoadFunction,imageSize:this.inputImageSize,imageSmoothing:this.imageSmoothing,url:this.url})},getUrl:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getUrl(),this.url)},getImageExtent:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getImageExtent(),this.inputImageExtent)},stateChanged:it}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Ld(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ld.installed||(Ld.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Vd,e),t.component(Vd.name,Vd))}var Ad=Object.freeze({__proto__:null,default:Ld,install:Ld,Source:Vd});function Nd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var Md=ft(vt,lt(Ct)),Gd=Wh({},undefined,{name:"VlSourceImageWms",mixins:[Ih,cl],props:{crossOrigin:String,imageLoadFunction:Function,imageLoadFunc:Function,imageSmoothing:{type:Boolean,default:!0},ratio:{type:Number,default:1.5},url:{type:String,required:!0,validator:Md}},data:function(){return{currentImageLoadFunction:this.imageLoadFunction,currentUrl:this.url}},computed:{inputImageLoadFunction:function(){return this.imageLoadFunction||this.imageLoadFunc}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Nd(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({rev:function(){this.$source&&(this.currentUrl!==this.$source.getUrl()&&(this.currentUrl=this.$source.getUrl()),this.currentImageLoadFunction!==this.$source.getImageLoadFunction()&&(this.currentImageLoadFunction=this.$source.getImageLoadFunction()))},url:function(t){this.setUrl(t)},currentUrl:function(t){t!==this.url&&this.$emit("update:url",t)},inputImageLoadFunction:function(t){this.setImageLoadFunction(t)},currentImageLoadFunc:function(t){t!==this.imageLoadFunction&&this.$emit("update:imageLoadFunction",t)}},Ya(["crossOrigin","imageSmoothing","ratio"])),created:function(){this.currentImageLoadFunction=this.inputImageLoadFunction},updated:function(){},methods:{createSource:function(){return new e.ImageWMS({attributions:this.currentAttributions,projection:this.resolvedDataProjection,resolutions:this.inputResolutions,crossOrigin:this.crossOrigin,hidpi:this.hidpi,serverType:this.serverType,imageLoadFunction:this.currentImageLoadFunction,imageSmoothing:this.imageSmoothing,params:this.currentParams,ratio:this.ratio,url:this.currentUrl})},getUrl:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getUrl(),this.currentUrl)},setUrl:function(t){ne(Md(t),"Invalid url"),t!==this.currentUrl&&(this.currentUrl=t),this.$source&&t!==this.$source.getUrl()&&this.$source.setUrls(t)},getImageLoadFunction:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getImageLoadFunction(),this.currentImageLoadFunction)},setImageLoadFunction:function(t){ne(bt(t),"Invalid image load function"),t!==this.currentImageLoadFunction&&(this.currentImageLoadFunction=t),this.$source&&t!==this.$source.getImageLoadFunction()&&this.$source.setImageLoadFunction(t)},stateChanged:it}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Ud(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ud.installed||(Ud.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Gd,e),t.component(Gd.name,Gd))}var zd=Object.freeze({__proto__:null,default:Ud,install:Ud,Source:Gd}),Zd={SINGLECLICK:"singleclick",CLICK:Yu,DBLCLICK:qu,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Bd="postrender",Wd="movestart",Yd="moveend",qd=Wh({},undefined,{name:"VlLayerVector",mixins:[vh],props:{renderMode:String},created:function(){},updated:function(){},methods:{createLayer:function(){return new w.Vector({className:this.className,opacity:this.currentOpacity,visible:this.currentVisible,extent:this.currentExtentViewProj,zIndex:this.currentZIndex,minResolution:this.currentMinResolution,maxResolution:this.currentMaxResolution,minZoom:this.currentMinZoom,maxZoom:this.currentMaxZoom,render:this.render,source:this.$source,renderOrder:this.renderOrder,renderBuffer:this.renderBuffer,declutter:this.declutter,updateWhileAnimating:this.updateWhileAnimating,updateWhileInteracting:this.updateWhileInteracting,style:this.$style})}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Xd(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Xd.installed||(Xd.installed=!0,e=Nt(e,"dataProjection"),Object.assign(qd,e),t.component(qd.name,qd))}var Hd=Object.freeze({__proto__:null,default:Xd,install:Xd,Layer:qd}),Jd=Wh({},undefined,{name:"VlSourceVector",mixins:[Oh]},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Kd(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Kd.installed||(Kd.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Jd,e),t.component(Jd.name,Jd))}var Qd=Object.freeze({__proto__:null,default:Kd,install:Kd,Source:Jd});function tp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ep(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tp(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function rp(){var t=this;Object.defineProperties(this,{$view:{enumerable:!0,get:function(){return t.$olObject}},$viewContainer:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.viewContainer}},$mapVm:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.mapVm}}})}function np(){return ip.apply(this,arguments)}function ip(){return(ip=be(B.mark((function t(){var e,r,n,i,o=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=te("set"),r=ua(this.$view,"resolution",!0),n=r.pipe($r((function(){return{prop:"zoom",value:o.getZoom()}})),Sn("value")),i=Xr(ua(this.$view,["id","rotation","center"],!0),r,n).pipe($r((function(t){return ep(ep({},t),{},{setter:function(r){var n=[r];"center"===t.prop&&n.push(!0),o[e(t.prop)].apply(o,n)}})}))),this.subscribeTo(i,(function(t){return(0,t.setter)(t.value)}));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var op=Wh({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("i",{class:t.vmClass,staticStyle:{display:"none !important"},attrs:{id:t.vmId}},[t._t("default",null,{center:t.currentCenterDataProj,zoom:t.currentZoom,resolution:t.currentResolution,rotation:t.currentRotation,extent:t.visibleExtentDataProj})],2)},staticRenderFns:[]},undefined,{name:"VlView",mixins:[Qa,Ca,rc],stubVNode:{empty:function(){return this.vmId}},props:{center:{type:Array,default:function(){return[0,0]},validator:function(t){return 2===t.length&&t.every(pt)}},constrainOnlyCenter:Boolean,extent:{type:Array,validator:function(t){return 4===t.length&&t.every(pt)}},smoothExtentConstraint:{type:Boolean,default:!0},rotation:{type:Number,default:0},enableRotation:{type:Boolean,default:!0},constrainRotation:{type:[Boolean,Number],default:!0},resolution:Number,resolutions:{type:Array,validator:function(t){return t.every(pt)}},maxResolution:Number,minResolution:Number,constrainResolution:Boolean,smoothResolutionConstraint:{type:Boolean,default:!0},zoom:{type:Number,default:0},zoomFactor:{type:Number,default:2},maxZoom:{type:Number,default:28},minZoom:{type:Number,default:0},multiWorld:Boolean,projection:{type:String,default:$o,validator:function(t){return null!=c.get(t)}},showFullExtent:Boolean},data:function(){var t;return{dataProjection:this.projection,currentProjection:this.projection,currentCenterViewProj:wi(this.center),currentZoom:this.zoom,currentRotation:this.rotation,currentResolution:this.resolution,currentMinZoom:this.minZoom,currentMaxZoom:this.maxZoom,currentResolutions:null===(t=this.resolutions)||void 0===t?void 0:t.slice(),currentMaxResolution:this.maxResolution,currentMinResolution:this.minResolution}},computed:{centerDataProj:function(){return wi(this.center)},centerViewProj:function(){return this.pointToViewProj(this.center)},currentCenterDataProj:function(){return this.pointToDataProj(this.currentCenterViewProj)},extentDataProj:function(){return Oi(this.extent)},extentViewProj:function(){return this.extentToViewProj(this.extent)},inputResolutions:function(){var t;return null===(t=this.resolutions)||void 0===t?void 0:t.slice()},visibleExtentDataProj:function(){var t;if(this.rev)return null===(t=this.getExtent())||void 0===t?void 0:t.slice()},visibleExtentViewProj:function(){var t;if(this.rev)return null===(t=this.getExtent(!0))||void 0===t?void 0:t.slice()},animating:function(){return!(!this.rev||!this.getAnimating())},interacting:function(){return!(!this.rev||!this.getInteracting())},resolvedViewProjection:function(){return this.currentProjection}},watch:ep({rev:function(){this.$view&&(this.currentProjection!==this.$view.getProjection().getCode()&&(this.currentProjection=this.$view.getProjection().getCode()),$t(this.currentCenterViewProj,this.$view.getCenter())||(this.currentCenterViewProj=this.$view.getCenter()),this.currentZoom!==this.$view.getZoom()&&(this.currentZoom=this.$view.getZoom()),this.currentRotation!==this.$view.getRotation()&&(this.currentRotation=this.$view.getRotation()),this.currentResolution!==this.$view.getResolution()&&(this.currentResolution=this.$view.getResolution()),this.currentMinZoom!==this.$view.getMinZoom()&&(this.currentMinZoom=this.$view.getMinZoom()),this.currentMaxZoom!==this.$view.getMaxZoom()&&(this.currentMaxZoom=this.$view.getMaxZoom()),$t(this.currentResolutions,this.$view.getResolutions())||(this.currentResolutions=this.$view.getResolutions()),this.currentMaxResolution!==this.$view.getMaxResolution()&&(this.currentMaxResolution=this.$view.getMaxResolution()),this.currentMinResolution!==this.$view.getMinResolution()&&(this.currentMinResolution=this.$view.getMinResolution()))},centerViewProj:{deep:!0,handler:function(t,e){this.getAnimating()||this.setCenter(t,!0)}},currentCenterDataProj:{deep:!0,handler:function(t,e){$t(t,this.centerDataProj)||this.$emit("update:center",t.slice())}},rotation:function(t){this.getAnimating()||this.setRotation(t)},currentRotation:function(t){t!==this.rotation&&this.$emit("update:rotation",t)},resolution:function(t){this.getAnimating()||this.setResolution(t)},currentResolution:function(t){t!==this.resolution&&this.$emit("update:resolution",t)},constrainResolution:function(t){this.setConstrainResolution(t)},zoom:function(t){this.getAnimating()||this.setZoom(t)},currentZoom:function(t){t!==this.zoom&&this.$emit("update:zoom",t)},minZoom:function(t){this.setMinZoom(t)},currentMinZoom:function(t){t!==this.minZoom&&this.$emit("update:minZoom",t)},maxZoom:function(t){this.setMaxZoom(t)},currentMaxZoom:function(t){t!==this.maxZoom&&this.$emit("update:maxZoom",t)},inputResolutions:{deep:!0,handler:function(t){if(t!==this.currentResolutions)return this.currentResolutions=null==t?void 0:t.slice(),this.scheduleRecreate()}},currentResolutions:{deep:!0,handler:function(t){$t(t,this.inputResolutions)||this.$emit("update:resolutions",null==t?void 0:t.slice())}},maxResolution:function(t){if(t!==this.currentMaxResolution)return this.currentMaxResolution=t,this.scheduleRecreate()},currentMaxResolution:function(t){t!==this.maxResolution&&this.$emit("update:maxResolution",t)},minResolution:function(t){if(t!==this.currentMinResolution)return this.currentMinResolution=t,this.scheduleRecreate()},currentMinResolution:function(t){t!==this.minResolution&&this.$emit("update:minResolution",t)},projection:function(t){var e;if(t!==this.currentProjection)return this.currentProjection=this.dataProjection=t,this.currentResolution=this.resolution,this.currentResolutions=null===(e=this.inputResolutions)||void 0===e?void 0:e.slice(),this.currentMaxResolution=this.maxResolution,this.currentMinResolution=this.minResolution,this.scheduleRecreate()},currentProjection:function(t){t!==this.projection&&this.$emit("update:projection",t)},animating:function(t,e){t!==e&&this.$emit("update:animating",t)},interacting:function(t,e){t!==e&&this.$emit("update:interacting",t)},visibleExtentDataProj:{deep:!0,handler:function(t,e){$t(t,e)||this.$emit("update:visibleExtent",null==t?void 0:t.slice())}}},Ya(["constrainOnlyCenter","smoothExtentConstraint","enableRotation","constrainRotation","constrainResolution","smoothResolutionConstraint","zoomFactor","multiWorld","extentViewProj"],["extentViewProj"])),created:function(){rp.call(this),this.currentCenterViewProj=this.centerViewProj.slice()},methods:{beforeInit:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Ca.methods.beforeInit.call(t),rc.methods.beforeInit.call(t)]);case 2:case"end":return e.stop()}}),e)})))()},createOlObject:function(){var e=new t.View({center:this.currentCenterViewProj,constrainOnlyCenter:this.constrainOnlyCenter,extent:this.extentViewProj,smoothExtentConstraint:this.smoothExtentConstraint,rotation:this.currentRotation,enableRotation:this.enableRotation,constrainRotation:this.constrainRotation,resolution:this.currentResolution,resolutions:this.currentResolutions,maxResolution:this.currentMaxResolution,minResolution:this.currentMinResolution,constrainResolution:this.constrainResolution,smoothResolutionConstraint:this.smoothResolutionConstraint,zoom:this.currentZoom,zoomFactor:this.zoomFactor,maxZoom:this.currentMaxZoom,minZoom:this.currentMinZoom,multiWorld:this.multiWorld,projection:this.currentProjection,showFullExtent:this.showFullExtent});return Nu(e,this.currentId),e},mount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=t.$viewContainer)||void 0===r||r.setView(t),e.abrupt("return",Ca.methods.mount.call(t));case 2:case"end":return e.stop()}}),e)})))()},unmount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(null===(r=t.$viewContainer)||void 0===r?void 0:r.getViewVm())===t&&t.$viewContainer.setView(null),e.abrupt("return",Ca.methods.unmount.call(t));case 2:case"end":return e.stop()}}),e)})))()},subscribeAll:function(){Ca.methods.subscribeAll.call(this),np.call(this)},getIdInternal:function(){return Lu(this.$view)},setIdInternal:function(t){t!==this.getIdInternal()&&Au(this.$view,t)},resolveView:Ca.methods.resolveOlObject,animate:function(){var t=arguments,e=this;return be(B.mark((function r(){var n,i,o,s,u;return B.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(n=t.length,i=new Array(n),o=0;o<n;o++)i[o]=t[o];return s=it,bt(i[i.length-1])&&(s=i[i.length-1],i=i.slice(0,i.length-1)),i.forEach((function(t){gt(t.center)&&(t.viewProj||(t.center=e.pointToViewProj(t.center)))})),r.next=6,e.resolveView();case 6:return u=r.sent,r.abrupt("return",new Promise((function(t){u.animate.apply(u,le(i).concat([function(e){s(e),t(e)}]))})));case 8:case"end":return r.stop()}}),r)})))()},fit:function(t){var e=arguments,r=this;return be(B.mark((function n(){var i,o,s;return B.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.length>1&&void 0!==e[1]?e[1]:{},!ou(t)){n.next=5;break}t=i.viewProj?r.readGeometryInViewProj(t):r.readGeometryInDataProj(t),n.next=9;break;case 5:if(!bt(t.resolveOlObject)){n.next=9;break}return n.next=8,t.resolveOlObject();case 8:t=n.sent;case 9:return o=i.callback||it,n.next=12,r.resolveView();case 12:return s=n.sent,n.abrupt("return",new Promise((function(e){s.fit(t,ep(ep({},i),{},{callback:function(t){o(t),e(t)}}))})));case 14:case"end":return n.stop()}}),n)})))()},cancelAnimations:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resolveView();case 2:e.sent.cancelAnimations();case 3:case"end":return e.stop()}}),e)})))()},getAnimating:function(){var t;return St(null===(t=this.$view)||void 0===t?void 0:t.getAnimating(),!1)},beginInteraction:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resolveView();case 2:e.sent.beginInteraction();case 3:case"end":return e.stop()}}),e)})))()},endInteraction:function(t,e,r){var n=arguments,i=this;return be(B.mark((function o(){return B.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return n.length>3&&void 0!==n[3]&&n[3]||(r=i.pointToViewProj(r)),o.next=4,i.resolveView();case 4:o.sent.endInteraction(t,e,r);case 5:case"end":return o.stop()}}),o)})))()},getInteracting:function(){var t;return St(null===(t=this.$view)||void 0===t?void 0:t.getInteracting(),!1)},calculateExtent:function(t){var e=arguments,r=this;return be(B.mark((function n(){var i,o;return B.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>1&&void 0!==e[1]&&e[1],n.next=3,r.resolveView();case 3:if(o=n.sent.calculateExtent(t),!i){n.next=6;break}return n.abrupt("return",Oi(o));case 6:return n.abrupt("return",r.extentToDataProj(o));case 7:case"end":return n.stop()}}),n)})))()},getExtent:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.$view){var e=this.$view.calculateExtent();return t?Oi(e):this.extentToDataProj(e)}},centerOn:function(t,e,r){var n=arguments,i=this;return be(B.mark((function o(){return B.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return n.length>3&&void 0!==n[3]&&n[3]||(t=i.pointToViewProj(t)),o.next=4,i.resolveView();case 4:o.sent.centerOn(t,e,r);case 5:case"end":return o.stop()}}),o)})))()},getCenter:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.$view)return t?this.currentCenterViewProj:this.currentCenterDataProj;var e=this.$view.getCenter();return t?e:this.pointToDataProj(e)},setCenter:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ne(gt(t)&&2===t.length,"Invalid center"),$t(t=e?wi(t):this.pointToViewProj(t),this.currentCenterViewProj)||(this.currentCenterViewProj=t),this.$view&&!$t(t,this.$view.getCenter())&&this.$view.setCenter(t)},getResolution:function(){var t;return St(null===(t=this.$view)||void 0===t?void 0:t.getResolution(),this.currentResolution)},setResolution:function(t){ne(pt(t=Number(t)),"Invalid resolution"),t!==this.currentResolution&&(this.currentResolution=t),this.$view&&t!==this.$view.getResolution()&&this.$view.setResolution(t)},getResolutionForExtent:function(t,e){var r=arguments,n=this;return be(B.mark((function i(){return B.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r.length>2&&void 0!==r[2]&&r[2]||(t=n.extentToViewProj(t)),i.next=4,n.resolveView();case 4:return i.abrupt("return",i.sent.getResolutionForExtent(t,e));case 5:case"end":return i.stop()}}),i)})))()},getResolutionForZoom:function(t){var e=this;return be(B.mark((function r(){return B.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.resolveView();case 2:return r.abrupt("return",r.sent.getResolutionForZoom(t));case 3:case"end":return r.stop()}}),r)})))()},getResolutions:function(){var t;return St(null===(t=this.$view)||void 0===t?void 0:t.getResolutions(),this.currentResolutions)},getMaxResolution:function(){var t;return St(null===(t=this.$view)||void 0===t?void 0:t.getMaxResolution(),this.currentMaxResolution)},getMinResolution:function(){var t;return St(null===(t=this.$view)||void 0===t?void 0:t.getMinResolution(),this.currentMinResolution)},getZoom:function(){var t;return St(null===(t=this.$view)||void 0===t?void 0:t.getZoom(),this.currentZoom)},setZoom:function(t){ne(pt(t=Number(t)),"Invalid zoom"),t!==this.currentZoom&&(this.currentZoom=t),this.$view&&t!==this.$view.getZoom()&&this.$view.setZoom(t)},getZoomForResolution:function(t){var e=this;return be(B.mark((function r(){return B.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.resolveView();case 2:return r.abrupt("return",r.sent.getZoomForResolution(t));case 3:case"end":return r.stop()}}),r)})))()},getMaxZoom:function(){var t;return St(null===(t=this.$view)||void 0===t?void 0:t.getMaxZoom(),this.currentMaxZoom)},setMaxZoom:function(t){ne(pt(t=Number(t)),"Invalid maxZoom"),t!==this.currentMaxZoom&&(this.currentMaxZoom=t),this.$view&&t!==this.$view.getMaxZoom()&&this.$view.setMaxZoom(t)},getMinZoom:function(){var t;return St(null===(t=this.$view)||void 0===t?void 0:t.getMinZoom(),this.currentMinZoom)},setMinZoom:function(t){ne(pt(t=Number(t)),"Invalid minZoom"),t!==this.currentMinZoom&&(this.currentMinZoom=t),this.$view&&t!==this.$view.getMinZoom()&&this.$view.setMinZoom(t)},getProjection:function(){var t;return St(null===(t=this.$view)||void 0===t?void 0:t.getProjection(),c.get(this.currentProjection))},getRotation:function(){var t;return St(null===(t=this.$view)||void 0===t?void 0:t.getRotation(),this.currentRotation)},setRotation:function(t){ne(pt(t=Number(t)),"Invalid rotation"),t!==this.currentRotation&&(this.currentRotation=t),this.$view&&t!==this.$view.getRotation()&&this.$view.setRotation(t)}}},undefined,false,undefined,!1,void 0,void 0,void 0);function sp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function up(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sp(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ap(){var t=this;Object.defineProperties(this,{$map:{enumerable:!0,get:function(){return t.$olObject}},$view:{enumerable:!0,get:this.getView},$viewVm:{enumerable:!0,get:this.getViewVm},$featuresOverlayVm:{enumerable:!0,get:function(){var e;return null===(e=t.$refs)||void 0===e?void 0:e.featuresOverlay}},$featuresOverlaySourceVm:{enumerable:!0,get:function(){var e;return null===(e=t.$refs)||void 0===e?void 0:e.featuresOverlaySource}}})}function cp(){return lp.apply(this,arguments)}function lp(){return(lp=be(B.mark((function t(){var e,r,n,i,o,s=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=te("set"),r=ua(this.$map,"view",!0).pipe(Hn((function(t){var e=t.value;s._viewSubs&&s.unsubscribe(s._viewSubs),e&&(s._viewSubs=s.subscribeTo(ua(e,"id",!0),s.scheduleRefresh.bind(s))),s.viewProjection=(null==e?void 0:e.getProjection().getCode())||$o,s.withCustomView=e&&(!e.vm||e.vm.some((function(t){return t!==s.$refs.view})))}))),n=Xr(r,ua(this.$map,["dataProjection","size","target"],!0)).pipe($r((function(t){return up(up({},t),{},{setter:s[e(t.prop)]})}))),this.subscribeTo(n,(function(t){return(0,t.setter)(t.value)})),i=Xr(sa(this.$map,[Zd.CLICK,Zd.DBLCLICK,Zd.SINGLECLICK]),sa(this.$map,[Zd.POINTERDRAG,Zd.POINTERMOVE],null,[wn((function(t,e){return $t({t:t.type,c:t.coordinate},{t:e.type,c:e.coordinate})}))])).pipe($r((function(t){return Mt(up(up({},t),{},{pixel:t.pixel,coordinate:s.pointToDataProj(t.coordinate)}),["pixel_","coordinate_"])}))),o=sa(this.$map,[Wd,Yd,Bd,Mc,Gc,Uc]),this.subscribeTo(Xr(i,o),(function(t){return s.$emit(t.type,t)}));case 7:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var hp=Wh({render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:t.vmClass,attrs:{id:t.vmId,tabindex:t.tabindex}},[t._t("default"),t._v(" "),t.withCustomView?t._e():r("ViewCmp",{ref:"view",attrs:{id:"vl-"+t.currentId+"-default-view"}}),t._v(" "),r("VectorLayerCmp",{ref:"featuresOverlay",attrs:{id:"vl-"+t.currentId+"-default-layer",overlay:!0,"update-while-animating":t.updateWhileAnimating,"update-while-interacting":t.updateWhileInteracting}},[r("VectorSourceCmp",{ref:"featuresOverlaySource",attrs:{id:"vl-"+t.currentId+"-default-source","wrap-x":t.wrapX,projection:t.currentDataProjection},on:{created:t.featuresOverlaySourceCreated}},[t._t("overlay")],2)],1)],2)},staticRenderFns:[]},undefined,{name:"VlMap",components:{ViewCmp:op,VectorLayerCmp:qd,VectorSourceCmp:Jd},mixins:[Qa,Rl,dc,Il,Ll,Cc,Ca],props:{defaultControls:{type:[Object,Boolean],default:!0},defaultInteractions:{type:[Object,Boolean],default:!0},keyboardEventTarget:[String,Element,Document],moveTolerance:{type:Number,default:1},pixelRatio:{type:Number,default:function(){return window.devicePixelRatio||1}},maxTilesLoading:{type:Number,default:16},tabindex:[String,Number],dataProjection:{type:String,validator:function(t){return null!=c.get(t)}},wrapX:{type:Boolean,default:!0},updateWhileAnimating:{type:Boolean,default:!1},updateWhileInteracting:{type:Boolean,default:!1}},data:function(){return{viewProjection:$o,withCustomView:!1,size:void 0,currentDataProjection:this.dataProjection}},computed:{resolvedDataProjection:function(){var t;return St(this.currentDataProjection,this.dataProjection,null===(t=this.$options)||void 0===t?void 0:t.dataProjection,this.viewProjection)},view:function(){if(this.rev&&this.$view)return{id:Lu(this.$view),type:this.$view.constructor.name}},layers:function(){return this.rev?Lt(this.getLayers(),(function(t){return{id:mu(t),type:t.constructor.name}})):[]},controls:function(){return this.rev?Lt(this.getControls(),(function(t){return{id:vi(t),type:t.constructor.name}})):[]},interactions:function(){return this.rev?Lt(this.getInteractions(),(function(t){return{id:fu(t),type:t.constructor.name}})):[]},overlays:function(){return this.rev?Lt(this.getOverlays(),(function(t){return{id:Su(t),type:t.constructor.name}})):[]},featuresDataProj:function(){var t=this;return this.rev?Lt(this.getFeatures(),(function(e){return t.writeFeatureInDataProj(e)})):[]},featuresViewProj:function(){var t=this;return this.rev?Lt(this.getFeatures(),(function(e){return t.writeFeatureInViewProj(e)})):[]}},watch:up({rev:function(){this.$map&&($t(this.size,this.$map.getSize())||(this.size=this.$map.getSize()))},size:{deep:!0,handler:function(t,e){$t(t,e)||this.$emit("update:size",null==t?void 0:t.slice())}},defaultControls:{deep:!0,handler:function(t){this.initDefaultControls(t)}},defaultInteractions:{deep:!0,handler:function(t){this.initDefaultInteractions(t)}},dataProjection:function(t){this.setDataProjection(t)},view:{deep:!0,handler:function(t,e){t!==e&&this.$emit("update:view",t)}},layers:{deep:!0,handler:function(t,e){$t(t,e)||this.$emit("update:layers",t.slice())}},controls:{deep:!0,handler:function(t,e){$t(t,e)||this.$emit("update:controls",t.slice())}},interactions:{deep:!0,handler:function(t,e){$t(t,e)||this.$emit("update:interactions",t.slice())}},overlays:{deep:!0,handler:function(t,e){$t(t,e)||this.$emit("update:overlays",t.slice())}},featuresDataProj:{deep:!0,handler:function(t,e){$t(t,e)||this.$emit("update:features",Qt(t))}}},Ya(["keyboardEventTarget","moveTolerance","pixelRatio","maxTilesLoading"])),created:function(){this._view=new t.View({center:[0,0],zoom:2}),this._viewVm=void 0,ap.call(this),this.initDefaultControls(this.defaultControls),this.initDefaultInteractions(this.defaultInteractions)},methods:{createOlObject:function(){var e=this;return be(B.mark((function r(){var n;return B.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return wu(n=new t.Map({pixelRatio:e.pixelRatio,moveTolerance:e.moveTolerance,keyboardEventTarget:e.keyboardEventTarget,maxTilesLoading:e.maxTilesLoading,controls:e.$controlsCollection,interactions:e.$interactionsCollection,layers:e.$layersCollection,overlays:e.$overlaysCollection,view:e.$view}),e.currentId),Pu(n,e.resolvedDataProjection),e.size&&n.setSize(e.size),r.abrupt("return",n);case 5:case"end":return r.stop()}}),r)})))()},mount:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setTarget(t.$el),e.abrupt("return",Ca.methods.mount.call(t));case 2:case"end":return e.stop()}}),e)})))()},unmount:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setTarget(null),e.abrupt("return",Ca.methods.unmount.call(t));case 2:case"end":return e.stop()}}),e)})))()},subscribeAll:function(){var t=this;Ca.methods.subscribeAll.call(this),Rl.methods.subscribeAll.call(this),dc.methods.subscribeAll.call(this),Il.methods.subscribeAll.call(this),Ll.methods.subscribeAll.call(this),Cc.methods.subscribeAll.call(this),cp.call(this),this.subscribeTo(ca(this,(function(){var e;return null===(e=t.$viewVm)||void 0===e?void 0:e.resolvedViewProjection})),(function(e){var r=e.value;t.viewProjection=r||$o}))},getServices:function(){var t=this;return je(Ca.methods.getServices.call(this),Rl.methods.getServices.call(this),dc.methods.getServices.call(this),Il.methods.getServices.call(this),Ll.methods.getServices.call(this),Cc.methods.getServices.call(this),{get mapVm(){return t},get viewVm(){return t.$viewVm},get viewContainer(){return t}})},getIdInternal:function(){return Ou(this.$map)},setIdInternal:function(t){t!==this.getIdInternal()&&wu(this.$map,t)},resolveMap:Ca.methods.resolveOlObject,forEachFeatureAtPixel:function(t,e){var r=arguments,n=this;return be(B.mark((function i(){var o;return B.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=r.length>2&&void 0!==r[2]?r[2]:{},i.next=3,n.resolveMap();case 3:return i.abrupt("return",i.sent.forEachFeatureAtPixel(t,e,o));case 4:case"end":return i.stop()}}),i)})))()},forEachLayerAtPixel:function(t,e){var r=arguments,n=this;return be(B.mark((function i(){var o;return B.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=r.length>2&&void 0!==r[2]?r[2]:{},i.next=3,n.resolveMap();case 3:return i.abrupt("return",i.sent.forEachLayerAtPixel(t,e,o));case 4:case"end":return i.stop()}}),i)})))()},getCoordinateFromPixel:function(t){var e=arguments,r=this;return be(B.mark((function n(){var i,o;return B.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>1&&void 0!==e[1]&&e[1],n.next=3,r.resolveMap();case 3:if(o=n.sent.getCoordinateFromPixel(t),!i){n.next=6;break}return n.abrupt("return",wi(o));case 6:return n.abrupt("return",r.pointToDataProj(o));case 7:case"end":return n.stop()}}),n)})))()},getEventCoordinate:function(t){var e=arguments,r=this;return be(B.mark((function n(){var i,o;return B.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>1&&void 0!==e[1]&&e[1],n.next=3,r.resolveMap();case 3:if(o=n.sent.getEventCoordinate(t),!i){n.next=6;break}return n.abrupt("return",wi(o));case 6:return n.abrupt("return",r.pointToDataProj(o));case 7:case"end":return n.stop()}}),n)})))()},getEventPixel:function(t){var e=this;return be(B.mark((function r(){return B.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.resolveMap();case 2:return r.abrupt("return",r.sent.getEventPixel(t));case 3:case"end":return r.stop()}}),r)})))()},getFeaturesAtPixel:function(t){var e=arguments,r=this;return be(B.mark((function n(){var i;return B.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:{},n.next=3,r.resolveMap();case 3:return n.abrupt("return",n.sent.getFeaturesAtPixel(t,i));case 4:case"end":return n.stop()}}),n)})))()},hasFeatureAtPixel:function(t){var e=arguments,r=this;return be(B.mark((function n(){var i;return B.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:{},n.next=3,r.resolveMap();case 3:return n.abrupt("return",n.sent.hasFeatureAtPixel(t,i));case 4:case"end":return n.stop()}}),n)})))()},getPixelFromCoordinate:function(t){var e=arguments,r=this;return be(B.mark((function n(){return B.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.length>1&&void 0!==e[1]&&e[1]||(t=r.pointToViewProj(t)),n.next=4,r.resolveMap();case 4:return n.abrupt("return",n.sent.getPixelFromCoordinate(t));case 5:case"end":return n.stop()}}),n)})))()},getSize:function(){var t;return St(null===(t=this.$map)||void 0===t?void 0:t.getSize(),this.size)},setSize:function(t){ne(gt(t)&&2===t.length,"Invalid size"),$t(t=t.slice(),this.size)||(this.size=t),this.$map&&!$t(t,this.$map.getSize())&&this.$map.setSize(t)},updateSize:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resolveMap();case 2:e.sent.updateSize();case 3:case"end":return e.stop()}}),e)})))()},render:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resolveMap();case 2:return r=e.sent,e.abrupt("return",new Promise((function(t){r.once("postrender",(function(){return t()})),r.render()})));case 4:case"end":return e.stop()}}),e)})))()},getTarget:function(){var t;return St(null===(t=this.$map)||void 0===t?void 0:t.getTarget(),this.$el)},setTarget:function(t){this.$map&&t!==this.$map.getTarget()&&(this.$map.setTarget(t),this.$emit("update:target",t))},getViewport:function(){var t;return null===(t=this.$map)||void 0===t?void 0:t.getViewport()},getView:function(){var t;return St(null===(t=this.$map)||void 0===t?void 0:t.getView(),this._view)},getViewVm:function(){return this._viewVm},setView:function(e){var r,n,i;(ne(!(e=(null===(r=e)||void 0===r?void 0:r.$view)||e)||e instanceof t.View,"Invalid view"),e!==this._view)&&(this._view=e,this._viewVm=(null===(n=e)||void 0===n?void 0:n.vm)&&(null===(i=e)||void 0===i?void 0:i.vm[0]));this.$map&&e!==this.$map.getView()&&this.$map.setView(e),this.scheduleRefresh()},getDataProjection:function(){return St(this.$map&&ju(this.$map),this.resolvedDataProjection)},setDataProjection:function(t){ne(null!=(t=c.get(t)),"Invalid projection"),t.getCode()!==this.currentDataProjection&&(this.currentDataProjection=t.getCode()),this.$map&&t.getCode()!==ju(this.$map)&&Pu(this.$map,t.getCode())},focus:function(){this.$el.focus()},refresh:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.updateSize();case 2:return e.next=4,t.render();case 4:return e.abrupt("return",Ca.methods.refresh.call(t));case 5:case"end":return e.stop()}}),e)})))()},isInteracting:function(){return!!this.$map&&this.getInteractions().some((function(t){return!!t.get("interacting")}))},featuresOverlaySourceCreated:function(t){t.addFeatures(this.getFeatures());var e=aa(this,"addfeature").pipe($r((function(t){return t.feature})),la(Sa));this.subscribeTo(e,(function(e){return t.addFeatures(e)}));var r=aa(this,"removefeature").pipe($r((function(t){return t.feature})),la(Sa));this.subscribeTo(r,(function(e){return t.removeFeatures(e)}))},resolvedDataProjectionChanged:function(t){t!==this.dataProjection&&this.$emit("update:dataProjection",t)}}},undefined,false,undefined,!1,void 0,void 0,void 0);function fp(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};fp.installed||(fp.installed=!0,e=Nt(e,"dataProjection"),Object.assign(hp,e),Object.assign(op,e),t.component(hp.name,hp),t.component(op.name,op))}var dp=Object.freeze({__proto__:null,default:fp,install:fp,Map:hp,View:op});function pp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function vp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pp(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var gp=Wh({},undefined,{name:"VlSourceMapbox",mixins:[zh],props:{attributions:vp(vp({},tl.props.attributions),{},{default:'&copy; <a href="https://www.mapbox.com/" target="_blank">MapBox</a>.'}),url:vp(vp({},ih.props.url),{},{default:"https://{a-c}.tiles.mapbox.com/v4/{mapId}/{z}/{x}/{y}{tileNameSuffix}.{tileFormat}?access_token={accessToken}"}),accessToken:{type:String,required:!0},mapId:{type:String,required:!0},tileFormat:{type:String,default:"png"}},computed:{tileNameSuffix:function(){return(t=function(t){return(t=St(t,1))>1?2:1}(t=this.tilePixelRatio))>1?["@",t,"x"].join(""):"";var t},urlTokens:function(){return["mapId","accessToken","tileNameSuffix","tileFormat"]}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function mp(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};mp.installed||(mp.installed=!0,e=Nt(e,"dataProjection"),Object.assign(gp,e),t.component(gp.name,gp))}var yp=Object.freeze({__proto__:null,default:mp,install:mp,Source:gp}),bp={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"};function Op(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var wp=Wh({},undefined,{name:"VlLayerVectorTile",mixins:[hh,vh],props:{renderMode:{type:String,default:bp.HYBRID,validator:function(t){return Object.values(bp).includes(t)}}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Op(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Op(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Ya(["renderMode"])),methods:{createLayer:function(){return new w.VectorTile({className:this.className,opacity:this.currentOpacity,visible:this.currentVisible,extent:this.currentExtentViewProj,zIndex:this.currentZIndex,minResolution:this.currentMinResolution,maxResolution:this.currentMaxResolution,minZoom:this.currentMinZoom,maxZoom:this.currentMaxZoom,render:this.render,source:this.$source,renderOrder:this.renderOrder,renderBuffer:this.renderBuffer,declutter:this.declutter,updateWhileAnimating:this.updateWhileAnimating,updateWhileInteracting:this.updateWhileInteracting,style:this.$style,preload:this.currentPreload,useInterimTilesOnError:this.currentUseInterimTilesOnError,renderMode:this.renderMode})}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function jp(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jp.installed||(jp.installed=!0,e=Nt(e,"dataProjection"),Object.assign(wp,e),t.component(wp.name,wp))}var Pp=Object.freeze({__proto__:null,default:jp,install:jp,Layer:wp});function Sp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Sp(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var $p=Wh({},undefined,{name:"VlLayerMapboxVector",extends:wp,props:{styleUrl:{type:String,required:!0},accessToken:{type:String,required:!0},sourceId:String,layerIds:{type:Array,validate:function(t){return gt(t)&&t.every(vt)}},declutter:xp(xp({},vh.props.declutter),{},{default:!0})},watch:xp({},Ya(["styleUrl","accessToken","sourceId","layerIds"],["layerIds"])),methods:{createLayer:function(){return new w.MapboxVector({className:this.className,opacity:this.currentOpacity,visible:this.currentVisible,extent:this.currentExtentViewProj,zIndex:this.currentZIndex,minResolution:this.currentMinResolution,maxResolution:this.currentMaxResolution,minZoom:this.currentMinZoom,maxZoom:this.currentMaxZoom,renderOrder:this.renderOrder,renderBuffer:this.renderBuffer,declutter:this.declutter,updateWhileAnimating:this.updateWhileAnimating,updateWhileInteracting:this.updateWhileInteracting,preload:this.currentPreload,useInterimTilesOnError:this.currentUseInterimTilesOnError,styleUrl:this.styleUrl,accessToken:this.accessToken,source:this.sourceId,layers:this.layerIds})}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Ip(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ip.installed||(Ip.installed=!0,e=Nt(e,"dataProjection"),Object.assign($p,e),t.component($p.name,$p))}var Cp=Object.freeze({__proto__:null,default:Ip,install:Ip,Layer:$p});function Tp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tp(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ep(){var e,r=this,n=Xr(sa(this.$interaction,"modifystart").pipe(Hn((function(t){r.setInteracting(!0),e=[],t.features.forEach((function(t){e[t.getId()]=t.getRevision()}))}))),sa(this.$interaction,"modifyend").pipe($r((function(t){return _p(_p({},t),{},{modified:t.features.getArray().reduce((function(t,r,n){return e[r.getId()]!==r.getRevision()&&(t[n]=r.getId()),t}),{})})})),Hn((function(){return r.setInteracting(!1)})))).pipe($r((function(e){var n=e.type,i=e.features,o=e.modified,s=r.resolvedViewProjection,u=r.resolvedDataProjection;return{type:n,features:i instanceof t.Collection?i.getArray():i,modified:o||{},get json(){return this._json||(this._json=Lt(this.features,(function(t){return Qs(t,s,u,bi)}))),this._json}}})));this.subscribeTo(n,(function(t){return r.$emit(t.type,t)}))}var Rp=Wh({},undefined,{name:"VlInteractionModify",mixins:[wl,yc],stubVNode:{empty:!1,attrs:function(){return{id:this.vmId,class:this.vmClass}}},props:{source:{type:String,required:!0},condition:{type:Function,default:y.primaryAction},deleteCondition:{type:Function,default:y.altKeyOnly},insertVertexCondition:{type:Function,default:y.always},pixelTolerance:{type:Number,default:10},wrapX:{type:Boolean,default:!1}},watch:_p({},Ya(["source","condition","deleteCondition","insertVertexCondition","pixelTolerance","wrapX"])),methods:{createInteraction:function(){var r=this;return be(B.mark((function n(){var i,o;return B.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.getInstance(r.source);case 2:return ne(!!(i=r._source=n.sent),'Source "'.concat(r.source,'" not found in identity map.')),i instanceof e.Vector?(o=i.getFeaturesCollection())&&(ie(o,t.Collection,'Source "'.concat(r.source,"\" doesn't provide features collection.")),i=null):(bt(i.getFeaturesCollection)?o=i.getFeaturesCollection():bt(i.getFeatures)&&(o=i.getFeatures()),ie(o,t.Collection,'Source "'.concat(r.source,"\" doesn't provide features collection.")),i=null),n.abrupt("return",new h.Modify({source:i,features:o,condition:r.condition,deleteCondition:r.deleteCondition,insertVertexCondition:r.insertVertexCondition,pixelTolerance:r.pixelTolerance,wrapX:r.wrapX,style:r.$style}));case 6:case"end":return n.stop()}}),n)})))()},getServices:function(){return je(wl.methods.getServices.call(this),yc.methods.getServices.call(this))},subscribeAll:function(){wl.methods.subscribeAll.call(this),Ep.call(this)},getStyleTarget:function(){var t=this;return{getStyle:function(){return t._style},setStyle:function(){t.scheduleRecreate()}}},getOverlay:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resolveInteraction();case 2:return e.abrupt("return",e.sent.getOverlay());case 3:case"end":return e.stop()}}),e)})))()},getPointerCount:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resolveInteraction();case 2:return e.abrupt("return",e.sent.getPointerCount());case 3:case"end":return e.stop()}}),e)})))()},removePoint:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resolveInteraction();case 2:return e.abrupt("return",e.sent.removePoint());case 3:case"end":return e.stop()}}),e)})))()}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Fp(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Fp.installed||(Fp.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Rp,e),t.component(Rp.name,Rp))}var kp=Object.freeze({__proto__:null,default:Fp,install:Fp,Interaction:Rp});function Dp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Vp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Dp(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Lp=Wh({},undefined,{name:"VlSourceOsm",mixins:[zh],props:{attributions:Vp(Vp({},tl.props.attributions),{},{default:'&copy; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'}),url:Vp(Vp({},ih.props.url),{},{default:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),maxZoom:Vp(Vp({},zh.props.maxZoom),{},{default:19})},computed:{tileGridIdent:it,inputTileGridFactory:it,inputTileUrlFunction:it},watch:Vp({},Ya(["inputUrl","maxZoom"])),methods:{createSource:function(){return new e.OSM({attributions:this.currentAttributions,wrapX:this.wrapX,cacheSize:this.cacheSize,opaque:this.opaque,tileLoadFunction:this.currentTileLoadFunction,url:this.currentUrls[0],crossOrigin:this.crossOrigin,reprojectionErrorThreshold:this.reprojectionErrorThreshold,imageSmoothing:this.imageSmoothing,maxZoom:this.maxZoom})},inputUrlChanged:function(t){this.setUrl(t)},tileClassChanged:it,inputTileUrlFunctionChanged:it,inputTileGridFactoryChanged:it,tileGridChanged:it,tilePixelRatioChanged:it,transitionChanged:it,zDirectionChanged:it,attributionsCollapsibleChanged:it,projectionChanged:it}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Ap(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ap.installed||(Ap.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Lp,e),t.component(Lp.name,Lp))}var Np=Object.freeze({__proto__:null,default:Ap,install:Ap,Source:Lp}),Mp={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};function Gp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Up(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Gp(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function zp(){var t=this;Object.defineProperties(this,{$overlay:{enumerable:!0,get:function(){return t.$olObject}},$mapVm:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.mapVm}},$viewVm:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.viewVm}},$overlaysContainer:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.overlaysContainer}}})}function Zp(){var t=this,e=te("set"),r=ua(this.$overlay,["offset","position","positioning"],!0,(function(r){return Up(Up({},r),{},{setter:function(n){var i=[n];"position"===r.prop&&i.push(!0),t[e(r.prop)].apply(t,i)}})}));this.subscribeTo(r,(function(t){return(0,t.setter)(t.value)}))}var Bp=Wh({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:t.classes,attrs:{id:t.vmId}},[t._t("default",null,{id:t.currentId,position:t.currentPositionDataProj,offset:t.currentOffset,positioning:t.currentPositioning})],2)},staticRenderFns:[]},undefined,{name:"VlOverlay",mixins:[Qa,Ca,rc],props:{offset:{type:Array,default:function(){return[0,0]},validator:function(t){return 2===t.length}},position:{type:Array,validator:function(t){return 2===t.length}},positioning:{type:String,default:Mp.TOP_LEFT,validator:function(t){return Object.values(Mp).includes(t)}},stopEvent:{type:Boolean,default:!0},insertFirst:{type:Boolean,default:!0},autoPan:[Boolean,Object],autoPanMargin:Number,autoPanAnimation:Object,autoPanOptions:Object,className:String},data:function(){return{visible:!1,viewProjection:$o,dataProjection:$o,currentOffset:this.offset.slice(),currentPositionViewProj:wi(this.position),currentPositioning:this.positioning}},computed:{positionDataProj:function(){return wi(this.position)},positionViewProj:function(){return this.pointToViewProj(this.position)},currentPositionDataProj:function(){return this.pointToDataProj(this.currentPositionViewProj)},inputOffset:function(){return this.offset.slice()},inputAutoPan:function(){return jt(this.autoPan)?Qt(this.autoPan):this.autoPan},inputAutoPanAnimation:function(){return jt(this.autoPanAnimation)?Qt(this.autoPanAnimation):this.autoPanAnimation},inputAutoPanOptions:function(){return jt(this.autoPanOptions)?Qt(this.autoPanOptions):this.autoPanOptions},classes:function(){return[this.vmClass,this.visible?"visible":void 0].filter(ct)}},watch:Up({rev:function(){this.$overlay&&($t(this.currentOffset,this.$overlay.getOffset())||(this.currentOffset=this.$overlay.getOffset()),$t(this.currentPositionViewProj,this.$overlay.getPosition())||(this.currentPositionViewProj=this.$overlay.getPosition()),this.currentPositioning!==this.$overlay.getPositioning()&&(this.currentPositioning=this.$overlay.getPositioning()))},inputOffset:{deep:!0,handler:function(t){this.setOffset(t)}},currentOffset:{deep:!0,handler:function(t){$t(t,this.inputOffset)||this.$emit("update:offset",t.slice())}},positionViewProj:{deep:!0,handler:function(t){this.setPosition(t,!0)}},currentPositionDataProj:{deep:!0,handler:function(t){$t(t,this.positionDataProj)||this.$emit("update:position",null==t?void 0:t.slice())}},positioning:function(t){this.setPositioning(t)},currentPositioning:function(t){t!==this.positioning&&this.$emit("update:positioning",t)}},Ya(["stopEvent","insertFirst","autoPanMargin","className","inputAutoPan","inputAutoPanAnimation","inputAutoPanOptions"],["inputAutoPan","inputAutoPanAnimation","inputAutoPanOptions"])),methods:{beforeInit:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zp.call(t),e.next=3,Promise.all([Ca.methods.beforeInit.call(t),rc.methods.beforeInit.call(t)]);case 3:case"end":return e.stop()}}),e)})))()},createOlObject:function(){var e=new t.Overlay({id:this.currentId,element:this.$el,offset:this.currentOffset,position:this.currentPositionViewProj,positioning:this.currentPositioning,stopEvent:this.stopEvent,insertFirst:this.insertFirst,autoPan:this.inputAutoPan,autoPanMargin:this.autoPanMargin,autoPanAnimation:this.inputAutoPanAnimation,autoPanOptions:this.inputAutoPanOptions,className:this.className});return $u(e,this.currentId),e},mount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.visible=!0,null===(r=t.$overlaysContainer)||void 0===r||r.addOverlay(t.$overlay),e.abrupt("return",Ca.methods.mount.call(t));case 3:case"end":return e.stop()}}),e)})))()},unmount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=t.$overlaysContainer)||void 0===r||r.removeOverlay(t.$overlay),t.visible=!1,e.abrupt("return",Ca.methods.unmount.call(t));case 3:case"end":return e.stop()}}),e)})))()},subscribeAll:function(){Ca.methods.subscribeAll.call(this),Zp.call(this)},getIdInternal:function(){return Su(this.$overlay)},setIdInternal:function(t){t!==this.getIdInternal()&&xu(this.$overlay,t)},resolveOverlay:Ca.methods.resolveOlObject,getOffset:function(){var t;return St(null===(t=this.$overlay)||void 0===t?void 0:t.getOffset(),this.currentOffset)},setOffset:function(t){ne(gt(t)&&2===t.length,"Invalid offset"),$t(t=t.slice(),this.currentOffset)||(this.currentOffset=t),this.$overlay&&!$t(t,this.$overlay.getOffset())&&this.$overlay.setOffset(t)},getPosition:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.$overlay)return t?this.currentPositionViewProj:this.currentPositionDataProj;var e=this.$overlay.getPosition();return t?wi(e):this.pointToDataProj(e)},setPosition:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ne(null==t||gt(t)&&2===t.length,"Invalid position"),t=null===(e=t)||void 0===e?void 0:e.slice(),r||(t=this.pointToViewProj(t)),$t(t,this.currentPositionViewProj)||(this.currentPositionViewProj=t),this.$overlay&&!$t(t,this.$overlay.getPosition())&&this.$overlay.setPosition(t)},getPositioning:function(){var t;return(null===(t=this.$overlay)||void 0===t?void 0:t.getPositioning())||this.currentPositioning},setPositioning:function(t){t!==this.currentPositioning&&(this.currentPositioning=t),this.$overlay&&t!==this.$overlay.getPositioning()&&this.$overlay.setPositioning(t)},panIntoView:function(){var t=arguments,e=this;return be(B.mark((function r(){var n;return B.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:{},r.next=3,e.resolveOverlay();case 3:r.sent.panIntoView(n);case 4:case"end":return r.stop()}}),r)})))()}}},undefined,false,undefined,!1,void 0,void 0,void 0);function Wp(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Wp.installed||(Wp.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Bp,e),t.component(Bp.name,Bp))}var Yp=Object.freeze({__proto__:null,default:Wp,install:Wp,Overlay:Bp}),qp=k(D((function(t){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},t.exports.default=t.exports,t.exports.__esModule=!0}))),Xp=k(D((function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0}))),Hp=k(D((function(t){function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t},t.exports.default=t.exports,t.exports.__esModule=!0}))),Jp=D((function(t){function e(r){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,e(r)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0})),Kp=k(Jp),Qp=D((function(t){t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jp(t)););return t},t.exports.default=t.exports,t.exports.__esModule=!0})),tv=k(D((function(t){function e(r,n,i){return"undefined"!=typeof Reflect&&Reflect.get?(t.exports=e=Reflect.get,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=e=function(t,e,r){var n=Qp(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}},t.exports.default=t.exports,t.exports.__esModule=!0),e(r,n,i||r)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0}))),ev=D((function(t){function e(r,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,e(r,n)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0})),rv=k(D((function(t){t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ev(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0}))),nv=D((function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0})),iv=k(D((function(t){var e=V.default;t.exports=function(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?nv(t):r},t.exports.default=t.exports,t.exports.__esModule=!0})));function ov(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e=["Assertion failed",e].join(": "),!t)throw new Error(e)}function sv(t){return t}function uv(t,e){return-1!==t.indexOf(e)}function av(t){return"[object Array]"===Object.prototype.toString.call(t)}var cv="rotatestart",lv="rotating",hv="rotateend",fv=function(){function t(e,r,n,i){Xp(this,t),this.propagationStopped_=!1,this.type_=e,this.features_=r,this.angle_=n,this.anchor_=i}return Hp(t,[{key:"preventDefault",value:function(){this.propagationStopped_=!0}},{key:"stopPropagation",value:function(){this.propagationStopped_=!0}},{key:"propagationStopped",get:function(){return this.propagationStopped_}},{key:"type",get:function(){return this.type_}},{key:"features",get:function(){return this.features_}},{key:"angle",get:function(){return this.angle_}},{key:"anchor",get:function(){return this.anchor_}}]),t}(),dv="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",pv=-1!==dv.indexOf("macintosh"),vv=-1!==dv.indexOf("webkit")&&-1==dv.indexOf("edge");function gv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Kp(t);if(e){var i=Kp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return iv(this,r)}}var mv="rotate-anchor",yv="rotate-arrow",bv="angle",Ov="anchor",wv=function(r){rv(i,r);var n=gv(i);function i(){var r,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Xp(this,i),(o=n.call(this,{handleDownEvent:jv,handleUpEvent:Pv,handleDragEvent:Sv,handleMoveEvent:xv})).previousCursor_=void 0,o.anchorFeature_=void 0,o.arrowFeature_=void 0,o.lastCoordinate_=void 0,o.anchorMoving_=!1,o.overlay_=new w.Vector({style:s.style||$v(),source:new e.Vector({features:new t.Collection})}),o.condition_=s.condition?s.condition:y.always,o.features_=void 0,s.features)if(av(s.features))o.features_=new t.Collection(s.features);else{if(!(s.features instanceof t.Collection))throw new Error("Features option should be an array or collection of features, got "+L(s.features));o.features_=s.features}else o.features_=new t.Collection;return o.allowAnchorMovement=void 0===s.allowAnchorMovement||s.allowAnchorMovement,o.setAnchor(s.anchor||Iv(o.features_)),o.setAngle(s.angle||0),o.features_.on("add",(r=o).onFeatureAdd_.bind(r)),o.features_.on("remove",(r=o).onFeatureRemove_.bind(r)),o.on("change:angle",(r=o).onAngleChange_.bind(r)),o.on("change:anchor",(r=o).onAnchorChange_.bind(r)),o.createOrUpdateAnchorFeature_(),o.createOrUpdateArrowFeature_(),o}return Hp(i,[{key:"setMap",value:function(t){this.overlay_.setMap(t),tv(Kp(i.prototype),"setMap",this).call(this,t)}},{key:"setActive",value:function(t){this.overlay_&&this.overlay_.setMap(t?this.map:void 0),tv(Kp(i.prototype),"setActive",this).call(this,t)}},{key:"setAngle",value:function(t){ov(!isNaN(parseFloat(t)),"Numeric value passed"),this.set(bv,parseFloat(t))}},{key:"getAngle",value:function(){return this.get(bv)}},{key:"setAnchor",value:function(t){ov(null==t||av(t)&&2===t.length,"Array of two elements passed"),this.set(Ov,null!=t?t.map(parseFloat):Iv(this.features_))}},{key:"getAnchor",value:function(){return this.get(Ov)}},{key:"createOrUpdateAnchorFeature_",value:function(){var e,r=this.getAngle(),n=this.getAnchor();n&&(this.anchorFeature_?(this.anchorFeature_.getGeometry().setCoordinates(n),this.anchorFeature_.set(bv,r)):(this.anchorFeature_=new t.Feature((e={geometry:new s.Point(n)},qp(e,bv,r),qp(e,mv,!0),e)),this.overlay_.getSource().addFeature(this.anchorFeature_)))}},{key:"createOrUpdateArrowFeature_",value:function(){var e,r=this.getAngle(),n=this.getAnchor();n&&(this.arrowFeature_?(this.arrowFeature_.getGeometry().setCoordinates(n),this.arrowFeature_.set(bv,r)):(this.arrowFeature_=new t.Feature((e={geometry:new s.Point(n)},qp(e,bv,r),qp(e,yv,!0),e)),this.overlay_.getSource().addFeature(this.arrowFeature_)))}},{key:"resetAngleAndAnchor_",value:function(){this.resetAngle_(),this.resetAnchor_()}},{key:"resetAngle_",value:function(){this.set(bv,0,!0),this.arrowFeature_&&this.arrowFeature_.set(bv,this.getAngle()),this.anchorFeature_&&this.anchorFeature_.set(bv,this.getAngle())}},{key:"resetAnchor_",value:function(){this.set(Ov,Iv(this.features_),!0),this.getAnchor()&&(this.arrowFeature_&&this.arrowFeature_.getGeometry().setCoordinates(this.getAnchor()),this.anchorFeature_&&this.anchorFeature_.getGeometry().setCoordinates(this.getAnchor()))}},{key:"onFeatureAdd_",value:function(){this.resetAngleAndAnchor_(),this.createOrUpdateAnchorFeature_(),this.createOrUpdateArrowFeature_()}},{key:"onFeatureRemove_",value:function(){this.resetAngleAndAnchor_(),this.features_.getLength()?(this.createOrUpdateAnchorFeature_(),this.createOrUpdateArrowFeature_()):(this.overlay_.getSource().clear(),this.anchorFeature_=this.arrowFeature_=void 0)}},{key:"onAngleChange_",value:function(t){var e=this,r=t.oldValue;this.features_.forEach((function(t){return t.getGeometry().rotate(e.getAngle()-r,e.getAnchor())})),this.arrowFeature_&&this.arrowFeature_.set(bv,this.getAngle()),this.anchorFeature_&&this.anchorFeature_.set(bv,this.getAngle())}},{key:"onAnchorChange_",value:function(){var t=this.getAnchor();t&&(this.anchorFeature_&&this.anchorFeature_.getGeometry().setCoordinates(t),this.arrowFeature_&&this.arrowFeature_.getGeometry().setCoordinates(t))}},{key:"dispatchRotateStartEvent_",value:function(t){this.dispatchEvent(new fv(cv,t,this.getAngle(),this.getAnchor()))}},{key:"dispatchRotatingEvent_",value:function(t){this.dispatchEvent(new fv(lv,t,this.getAngle(),this.getAnchor()))}},{key:"dispatchRotateEndEvent_",value:function(t){this.dispatchEvent(new fv(hv,t,this.getAngle(),this.getAnchor()))}},{key:"features",get:function(){return this.features_}},{key:"angle",get:function(){return this.getAngle()},set:function(t){this.setAngle(t)}},{key:"anchor",get:function(){return this.getAnchor()},set:function(t){this.setAnchor(t)}},{key:"map",set:function(t){this.setMap(t)},get:function(){return this.getMap()}},{key:"active",set:function(t){this.setActive(t)},get:function(){return this.getActive()}}]),i}(h.Pointer);function jv(t){if(!y.mouseOnly(t))return!1;if(0==(r=t.originalEvent).button&&!(vv&&pv&&r.ctrlKey)&&this.condition_(t)){var e=t.map.forEachFeatureAtPixel(t.pixel,sv);if(uv(["click","singleclick","dblclick"],t.type)&&uv([this.anchorFeature_,this.arrowFeature_],e))return!1;if(e&&!this.lastCoordinate_&&(uv(this.features_.getArray(),e)||e===this.arrowFeature_))return this.lastCoordinate_=t.coordinate,xv.call(this,t),this.dispatchRotateStartEvent_(this.features_),!0;if(e&&e===this.anchorFeature_&&this.allowAnchorMovement)return this.anchorMoving_=!0,xv.call(this,t),!0}var r;return!1}function Pv(t){return this.lastCoordinate_?(this.lastCoordinate_=void 0,xv.call(this,t),this.dispatchRotateEndEvent_(this.features_),!0):!!this.anchorMoving_&&(this.anchorMoving_=!1,xv.call(this,t),!0)}function Sv(t){var e=t.coordinate,r=this.anchorFeature_.getGeometry().getCoordinates();if(this.lastCoordinate_){var n=[this.lastCoordinate_[0]-r[0],this.lastCoordinate_[1]-r[1]],i=[e[0]-r[0],e[1]-r[1]],o=Math.atan2(n[0]*i[1]-i[0]*n[1],n[0]*i[0]+n[1]*i[1]);this.setAngle(this.getAngle()+o),this.dispatchRotatingEvent_(this.features_),this.lastCoordinate_=e}else this.anchorMoving_&&this.setAnchor(e)}function xv(t){var e=t.map,r=t.pixel,n=e.getTargetElement(),i=e.forEachFeatureAtPixel(r,sv),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&(n.style.cursor="-webkit-"+t,n.style.cursor="-moz-"+t),n.style.cursor=t};this.lastCoordinate_?(this.previousCursor_=n.style.cursor,o("grabbing",!0)):i&&(uv(this.features_.getArray(),i)||i===this.arrowFeature_)?(this.previousCursor_=n.style.cursor,o("grab",!0)):i&&i===this.anchorFeature_&&this.allowAnchorMovement||this.anchorMoving_?(this.previousCursor_=n.style.cursor,o("crosshair")):(o(this.previousCursor_||""),this.previousCursor_=void 0)}function $v(){var t,e=[255,255,255,.8],r=[0,153,255,.8],n=[255,255,255,.01],i=(qp(t={},mv,[new l.Style({image:new l.RegularShape({fill:new l.Fill({color:[0,153,255,.8]}),stroke:new l.Stroke({color:r,width:1}),radius:4,points:6}),zIndex:1/0})]),qp(t,yv,[new l.Style({fill:new l.Fill({color:n}),stroke:new l.Stroke({color:e,width:4}),text:new l.Text({font:"12px sans-serif",offsetX:20,offsetY:-20,fill:new l.Fill({color:"blue"}),stroke:new l.Stroke({color:e,width:3})}),zIndex:1/0}),new l.Style({fill:new l.Fill({color:n}),stroke:new l.Stroke({color:r,width:2}),zIndex:1/0})]),t);return function(t,e){var r,n=t.get(bv)||0;switch(!0){case t.get(mv):return(r=i[mv])[0].getImage().setRotation(-n),r;case t.get(yv):r=i[yv];var o=t.getGeometry().getCoordinates(),u=new s.Polygon([[[o[0],o[1]-6*e],[o[0]+8*e,o[1]-12*e],[o[0],o[1]+30*e],[o[0]-8*e,o[1]-12*e],[o[0],o[1]-6*e]]]);return u.rotate(n,o),r[0].setGeometry(u),r[1].setGeometry(u),r[0].getText().setText(Math.round(180*-n/Math.PI)+"°"),r}}}function Iv(e){if((e=e instanceof t.Collection?e.getArray():e).length)return i.getCenter(function(e){if((e=e instanceof t.Collection?e.getArray():e).length)return new s.GeometryCollection(e.map((function(t){return t.getGeometry()}))).getExtent()}(e))}"undefined"!=typeof window&&window.ol&&window.ol.interaction&&(window.ol.interaction.RotateFeature=wv);var Cv="addfeature",Tv="removefeature";function _v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ev(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_v(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Rv(){var e=this,r=te("set"),n=ua(this.$interaction,["angle","anchor"],!0,(function(t){return Ev(Ev({},t),{},{setter:function(n){var i=[n];"anchor"===t.prop&&i.push(!0),e[r(t.prop)].apply(e,i)}})}));this.subscribeTo(n,(function(t){return(0,t.setter)(t.value)}));var i=Xr(sa(this.$interaction,"rotatestart").pipe(Hn((function(){return e.setInteracting(!0)}))),sa(this.$interaction,"rotateend").pipe(Hn((function(){return e.setInteracting(!1)}))),sa(this.$interaction,"rotating")).pipe($r((function(r){var n=r.type,i=r.features,o=r.angle,s=r.anchor,u=e.resolvedViewProjection,a=e.resolvedDataProjection;return{type:n,features:i instanceof t.Collection?i.getArray():i,angle:o,anchor:e.pointToDataProj(s),get json(){return this._json||(this._json=Lt(this.features,(function(t){return Qs(t,u,a,bi)}))),this._json}}})));this.subscribeTo(i,(function(t){return e.$emit(t.type,t)}))}var Fv=Wh({},undefined,{name:"VlInteractionRotate",mixins:[wl,yc],stubVNode:{empty:!1,attrs:function(){return{id:this.vmId,class:this.vmClass}}},props:{source:{type:String,required:!0},angle:{type:Number,default:0},anchor:{type:Array,validator:function(t){return t.length>=2}},condition:{type:Function,default:y.always},allowAnchorMovement:{type:Boolean,default:!0}},data:function(){return{currentAnchorViewProj:wi(this.anchor),currentAngle:this.angle}},computed:{anchorDataProj:function(){return wi(this.anchor)},anchorViewProj:function(){return this.pointToViewProj(this.anchor)},currentAnchorDataProj:function(){return this.pointToDataProj(this.currentAnchorViewProj)}},watch:Ev({rev:function(){this.$interaction&&($t(this.currentAnchorViewProj,this.$interaction.getAnchor())||(this.currentAnchorViewProj=this.$interaction.getAnchor()),this.currentAngle!==this.$interaction.getAngle()&&(this.currentAngle=this.$interaction.getAngle()))},anchorViewProj:{deep:!0,handler:function(t){t&&this.setAnchor(t,!0)}},currentAnchorDataProj:{deep:!0,handler:function(t){$t(t,this.anchorDataProj)||this.$emit("update:anchor",null==t?void 0:t.slice())}},angle:function(t){this.setAngle(t)},currentAngle:function(t){t!==this.angle&&this.$emit("update:angle",t)}},Ya(["source","condition","allowAnchorMovement"])),created:function(){var t;this.currentAnchorViewProj=null===(t=this.anchorViewProj)||void 0===t?void 0:t.slice()},methods:{createInteraction:function(){var r=this;return be(B.mark((function n(){var i,o;return B.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.getInstance(r.source);case 2:return ne(!!(i=r._source=n.sent),'Source "'.concat(r.source,'" not found in identity map.')),i instanceof e.Vector?((o=i.getFeaturesCollection())||(o=new t.Collection(i.getFeatures()),r.subscribeTo(sa(i,Cv),(function(t){var e=t.feature;return e&&o.push(e)})),r.subscribeTo(sa(i,Tv),(function(t){var e=t.feature;return e&&o.remove(e)}))),ie(o,t.Collection,'Source "'.concat(r.source,"\" doesn't provide features collection."))):(bt(i.getFeaturesCollection)?o=i.getFeaturesCollection():bt(i.getFeatures)&&(o=i.getFeatures()),ie(o,t.Collection,'Source "'.concat(r.source,"\" doesn't provide features collection."))),n.abrupt("return",new wv({features:o,angle:r.currentAngle,anchor:r.currentAnchorViewProj,allowAnchorMovement:r.allowAnchorMovement,condition:r.condition,style:r.$style}));case 6:case"end":return n.stop()}}),n)})))()},getServices:function(){return je(wl.methods.getServices.call(this),yc.methods.getServices.call(this))},subscribeAll:function(){wl.methods.subscribeAll.call(this),Rv.call(this)},getStyleTarget:function(){var t=this;return{getStyle:function(){return t._style},setStyle:function(){t.scheduleRecreate()}}},getAngle:function(){var t;return St(null===(t=this.$interaction)||void 0===t?void 0:t.getAngle(),this.currentAngle)},setAngle:function(t){ne(pt(t),"Invalid angle"),t!==this.currentAngle&&(this.currentAngle=t),this.$interaction&&t!==this.$interaction.getAngle()&&this.$interaction.setAngle(t)},getAnchor:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=St(null===(t=this.$interaction)||void 0===t?void 0:t.getAnchor(),this.currentAnchorViewProj);return e?wi(r):this.pointToDataProj(r)},setAnchor:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ne(Ci(t),"Invalid anchor"),$t(t=e?wi(t):this.pointToViewProj(t),this.currentAnchorViewProj)||(this.currentAnchorViewProj=t),this.$interaction&&!$t(t,this.$interaction.getAnchor())&&this.$interaction.setAnchor(t)}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function kv(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};kv.installed||(kv.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Fv,e),t.component(Fv.name,Fv))}var Dv=Object.freeze({__proto__:null,default:kv,install:kv,Interaction:Fv});function Vv(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Lv(){var t=this,e=Xr(aa(this,"addfeature",(function(t){return{type:"select",feature:t.feature,get json(){return t.json}}})),aa(this,"removefeature",(function(t){return{type:"unselect",feature:t.feature,get json(){return t.json}}})));this.subscribeTo(e,(function(e){return t.$emit(e.type,e)}))}var Av=Wh({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("i",{class:t.vmClass,staticStyle:{display:"none !important"},attrs:{id:t.vmId}},[t._t("default",null,{features:t.currentFeaturesDataProj})],2)},staticRenderFns:[]},undefined,{name:"VlInteractionSelect",mixins:[Cc,yc,wl],props:{filter:{type:Function,default:ot(!0)},layers:{type:[Array,Function],default:void 0},hitTolerance:{type:Number,default:0},multi:{type:Boolean,default:!1},features:{type:Array,default:st,validator:function(t){return t.every(ht(vt,pt,iu))}},addCondition:{type:Function,default:y.never},condition:{type:Function,default:y.singleClick},removeCondition:{type:Function,default:y.never},toggleCondition:{type:Function,default:y.shiftKeyOnly}},data:function(){return{currentHitTolerance:this.hitTolerance}},computed:{featuresDataProj:function(){return Lt(this.features,(function(t){return iu(t)&&(t=au(Qt(t))),t}))},featuresViewProj:function(){var t=this;return Lt(this.features,(function(e){return iu(e)&&(e=t.writeFeatureInViewProj(t.readFeatureInDataProj(e))),e}))},currentFeaturesDataProj:function(){var t=this;return this.rev?Lt(this.getFeatures(),(function(e){return t.writeFeatureInDataProj(e)})):[]},currentFeaturesViewProj:function(){var t=this;return this.rev?Lt(this.getFeatures(),(function(e){return t.writeFeatureInViewProj(e)})):[]},currentFeatureIds:function(){return Lt(this.currentFeaturesDataProj,(function(t){return su(t)}))},layerFilter:function(){var t=this;return Array.isArray(this.layers)?function(e){return t.layers.includes(mu(e))}:this.layers},style:function(){var t=this;if(this.rev&&this.$style){var e=this.$style;if(bt(e))return e;if(e)return gt(e)||(e=[e]),e.map((function(e){return As(e,(function(e){return t.writeGeometryInDataProj(e)}))}))}}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vv(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vv(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({rev:function(){this.$interaction&&this.currentHitTolerance!==this.$interaction.getHitTolerance()&&(this.currentHitTolerance=this.$interaction.getHitTolerance())},featuresViewProj:{deep:!0,handler:function(t){$t(Lt(t,(function(t){return wt(t)?su(t):t})),this.currentFeatureIds)||(this.unselectAll(),Ft(t,this.select.bind(this)))}},currentFeaturesDataProj:{deep:!0,handler:function(t){$t(t,this.featuresDataProj)||this.$emit("update:features",t&&Qt(t))}},hitTolerance:function(t){this.setHitTolerance(t)},currentHitTolerance:function(t){t!==this.hitTolerance&&this.$emit("update:hitTolerance",t)},style:{deep:!0,handler:function(t,e){$t(t,e)||((jt(t)||gt(t))&&(t=Qt(t)),this.$emit("update:style",t))}}},Ya(["filter","multi","wrapX","addCondition","condition","removeCondition","toggleCondition"])),methods:{createInteraction:function(){return new h.Select({multi:this.multi,filter:this.filter,layers:this.layerFilter,hitTolerance:this.currentHitTolerance,addCondition:this.addCondition,condition:this.condition,removeCondition:this.removeCondition,toggleCondition:this.toggleCondition,style:this.$style,features:this.$featuresCollection})},getServices:function(){return je(wl.methods.getServices.call(this),Cc.methods.getServices.call(this),yc.methods.getServices.call(this))},subscribeAll:function(){wl.methods.subscribeAll.call(this),Cc.methods.subscribeAll.call(this),Lv.call(this)},getStyleTarget:function(){var t=this;return{getStyle:function(){return t._style},setStyle:function(){t.scheduleRecreate()}}},select:function(t){(t=this.resolveFeature(t))&&this.addFeature(t)},unselect:function(t){(t=this.resolveFeature(t))&&this.removeFeature(t)},unselectAll:function(){this.clearFeatures()},resolveFeature:function(e){var r,n=this;if(e){if((e=(null===(r=e)||void 0===r?void 0:r.$feature)||e)instanceof t.Feature)return e;var i=vt(e)||pt(e)?e:su(e);if(!i)throw new Error("".concat(this.vmName," undefined feature id"));return e=null,Ft(this.$mapVm.getLayers(),(function(t){if(!n.layerFilter||n.layerFilter(t)){var r=t.getSource();return bt(null==r?void 0:r.getFeatureById)&&(e=r.getFeatureById(i)),!e}})),e}},updateFeature:function(t){},getHitTolerance:function(){var t;return St(null===(t=this.$interaction)||void 0===t?void 0:t.getHitTolerance(),this.currentHitTolerance)},setHitTolerance:function(t){ne(pt(t),"Invalid tolerance"),t!==this.currentHitTolerance&&(this.currentHitTolerance=t),this.$interaction&&t!==this.$interaction.getHitTolerance()&&this.$interaction.setHitTolerance(t)},getLayer:function(t){var e=this;return be(B.mark((function r(){return B.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.resolveFeature(t),r.next=3,e.resolveInteraction();case 3:return r.abrupt("return",r.sent.getLayer(t));case 4:case"end":return r.stop()}}),r)})))()}}},undefined,false,undefined,!1,void 0,void 0,void 0);function Nv(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Nv.installed||(Nv.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Av,e),t.component(Av.name,Av))}var Mv=Object.freeze({__proto__:null,default:Nv,install:Nv,Interaction:Av});function Gv(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var Uv=Wh({},undefined,{name:"VlInteractionSnap",mixins:[wl],props:{source:{type:String,required:!0},edge:{type:Boolean,default:!0},vertex:{type:Boolean,default:!0},pixelTolerance:{type:Number,default:10}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Gv(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gv(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Ya(["source","edge","vertex","pixelTolerance"])),methods:{createInteraction:function(){var r=this;return be(B.mark((function n(){var i,o;return B.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.getInstance(r.source);case 2:return ne(!!(i=n.sent),'Source "'.concat(r.source,'" not found in identity map.')),i instanceof e.Vector||(bt(i.getFeaturesCollection)?o=i.getFeaturesCollection():bt(i.getFeatures)&&(o=i.getFeatures()),ie(o,t.Collection,'Source "'.concat(r.source,"\" doesn't provide features collection.")),i=null),n.abrupt("return",new h.Snap({source:i,features:o,edge:r.edge,vertex:r.vertex,pixelTolerance:r.pixelTolerance}));case 6:case"end":return n.stop()}}),n)})))()}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function zv(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};zv.installed||(zv.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Uv,e),t.component(Uv.name,Uv))}var Zv=Object.freeze({__proto__:null,default:zv,install:zv,Interaction:Uv});function Bv(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Wv(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bv(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bv(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Yv=Wh({},undefined,{name:"VlSourceSputnik",mixins:[zh],props:{attributions:Wv(Wv({},tl.props.attributions),{},{default:'&copy; <a href="http://rt.ru/" target="_blank">Ростелеком</a>. '}),url:Wv(Wv({},ih.props.url),{},{default:"http://tiles.maps.sputnik.ru/{z}/{x}/{y}.png?apikey={apikey}"}),apiKey:{type:String}},computed:{urlTokens:function(){return["apiKey"]}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function qv(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qv.installed||(qv.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Yv,e),t.component(Yv.name,Yv))}var Xv=Object.freeze({__proto__:null,default:qv,install:qv,Source:Yv}),Hv=Wh({},undefined,{name:"VlSourceStamen",mixins:[zh],props:{layer:{type:String,required:!0}},computed:{tileGridIdent:it,inputTileGridFactory:it,inputTileUrlFunction:it},methods:{createSource:function(){return new e.Stamen({wrapX:this.wrapX,cacheSize:this.cacheSize,opaque:this.opaque,transition:this.transition,tileLoadFunction:this.currentTileLoadFunction,url:this.currentUrls[0],reprojectionErrorThreshold:this.reprojectionErrorThreshold,imageSmoothing:this.imageSmoothing,minZoom:this.minZoom,maxZoom:this.maxZoom,layer:this.layer})},inputUrlChanged:function(t){this.setUrl(t)},attributionsCollapsibleChanged:it,projectionChanged:it,inputTileGridFactoryChanged:it,tileGridChanged:it,zDirectionChanged:it,inputTileUrlFunctionChanged:it,crossOriginChanged:it,tileClassChanged:it}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Jv(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Jv.installed||(Jv.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Hv,e),t.component(Hv.name,Hv))}var Kv=Object.freeze({__proto__:null,default:Jv,install:Jv,Source:Hv});function Qv(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function tg(){var t=this;Object.defineProperties(this,{$styleFunction:{enumerable:!0,get:function(){return t.$olObject}},$mapVm:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.mapVm}},$viewVm:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.viewVm}},$styleContainer:{enumerable:!0,get:function(){var e;return null===(e=t.$services)||void 0===e?void 0:e.styleContainer}}})}var eg=Wh({},undefined,{name:"VlStyleFunc",mixins:[tc,Qa,yc,Ca,rc],stubVNode:{empty:!1,attrs:function(){return{id:this.vmId,class:this.vmClass}}},props:{function:{type:Function},func:Function,factory:Function},data:function(){return{viewProjection:$o,dataProjection:$o}},computed:{inputFunction:function(){var t=this.function||this.func;return!t&&this.factory&&(t=this.factory()),t}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qv(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qv(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Ya(["inputFunction"])),created:function(){tg.call(this)},updated:function(){},methods:{beforeInit:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Ca.methods.beforeInit.call(t),rc.methods.beforeInit.call(t)]);case 2:case"end":return e.stop()}}),e)})))()},createOlObject:function(){var t=this.inputFunction,e=this.createStyleFunc(this.$style,this.getDefaultStyle()),r=function(r,n){var i=t(r,n);return null==i||Array.isArray(i)&&i.length||i instanceof l.Style?i:e(r,n)};return r.id=this.currentId,r},getServices:function(){return je(Ca.methods.getServices.call(this),yc.methods.getServices.call(this))},mount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=t.$styleContainer)||void 0===r||r.setStyle(t),e.abrupt("return",Ca.methods.mount.call(t));case 2:case"end":return e.stop()}}),e)})))()},unmount:function(){var t=this;return be(B.mark((function e(){var r;return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(null===(r=t.$styleContainer)||void 0===r?void 0:r.getStyle())===t.$styleFunction&&t.$styleContainer.setStyle(null),e.abrupt("return",Ca.methods.unmount.call(t));case 2:case"end":return e.stop()}}),e)})))()},getStyleTarget:function(){var t,e=this;return{getStyle:function(){return e._style},setStyle:(t=be(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,e.scheduleRecreate();case 3:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function rg(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};rg.installed||(rg.installed=!0,e=Nt(e,"dataProjection"),Object.assign(eg,e),t.component(eg.name,eg))}var ng=Object.freeze({__proto__:null,default:rg,install:rg,Style:eg}),ig=Wh({},undefined,{name:"VlSourceTileArcgisRest",mixins:[Ka,ah],computed:{inputTileUrlFunction:it},methods:{createSource:function(){return new e.TileArcGISRest({attributions:this.currentAttributions,projection:this.resolvedDataProjection,wrapX:this.wrapX,cacheSize:this.cacheSize,tileGrid:this.tileGrid,transition:this.transition,tileLoadFunction:this.currentTileLoadFunction,urls:this.currentUrls,crossOrigin:this.crossOrigin,reprojectionErrorThreshold:this.reprojectionErrorThreshold,imageSmoothing:this.imageSmoothing,hidpi:this.hidpi,params:this.currentParams})},stateChanged:it,attributionsCollapsibleChanged:it,tileKeyChanged:it,opaqueChanged:it,tilePixelRatioChanged:it,zDirectionChanged:it,inputTileUrlFunctionChanged:it,tileClassChanged:it}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function og(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};og.installed||(og.installed=!0,e=Nt(e,"dataProjection"),Object.assign(ig,e),t.component(ig.name,ig),t.component("VlSourceArcgisRest",{name:"VlSourceArcgisRest",extends:ig,created:function(){}}))}var sg=Object.freeze({__proto__:null,default:og,install:og,Source:ig}),ug=Wh({},undefined,{name:"VlLayerTile",mixins:[hh],methods:{createLayer:function(){return new w.Tile({className:this.className,opacity:this.currentOpacity,visible:this.currentVisible,extent:this.currentExtentViewProj,zIndex:this.currentZIndex,minResolution:this.currentMinResolution,maxResolution:this.currentMaxResolution,minZoom:this.currentMinZoom,maxZoom:this.currentMaxZoom,render:this.render,source:this.$source,preload:this.currentPreload,useInterimTilesOnError:this.currentUseInterimTilesOnError})}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function ag(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ag.installed||(ag.installed=!0,e=Nt(e,"dataProjection"),Object.assign(ug,e),t.component(ug.name,ug))}var cg=Object.freeze({__proto__:null,default:ag,install:ag,Layer:ug});function lg(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var hg=Wh({},undefined,{name:"VlSourceTileWms",mixins:[Ih,ah],props:{gutter:{type:Number,default:0}},computed:{inputTileUrlFunction:it},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?lg(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Ya(["gutter"])),methods:{createSource:function(){return new e.TileWMS({attributions:this.currentAttributions,projection:this.resolvedDataProjection,wrapX:this.wrapX,cacheSize:this.cacheSize,tileGrid:this.tileGrid,transition:this.transition,tileLoadFunction:this.currentTileLoadFunction,urls:this.currentUrls,crossOrigin:this.crossOrigin,reprojectionErrorThreshold:this.reprojectionErrorThreshold,tileClass:this.tileClass,imageSmoothing:this.imageSmoothing,gutter:this.gutter,hidpi:this.hidpi,serverType:this.serverType,params:this.currentParams})},stateChanged:it,attributionsCollapsibleChanged:it,tileKeyChanged:it,opaqueChanged:it,tilePixelRatioChanged:it,zDirectionChanged:it,inputTileUrlFunctionChanged:it}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function fg(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};fg.installed||(fg.installed=!0,e=Nt(e,"dataProjection"),Object.assign(hg,e),t.component(hg.name,hg),t.component("VlSourceWms",{name:"VlSourceWms",extends:hg,created:function(){}}))}var dg=Object.freeze({__proto__:null,default:fg,install:fg,Source:hg});function pg(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function vg(){var e=this,r=Xr(sa(this.$interaction,"translatestart").pipe(Hn((function(){return e.setInteracting(!0)}))),sa(this.$interaction,"translateend").pipe(Hn((function(){return e.setInteracting(!1)}))),sa(this.$interaction,"translating")).pipe($r((function(r){var n=r.type,i=r.features,o=r.coordinate,s=r.startCoordinate,u=e.resolvedViewProjection,a=e.resolvedDataProjection;return{type:n,features:i instanceof t.Collection?i.getArray():i,coordinate:e.pointToDataProj(o),startCoordinate:e.pointToDataProj(s),get json(){return this._json||(this._json=Lt(this.features,(function(t){return Qs(t,u,a,bi)}))),this._json}}})));this.subscribeTo(r,(function(t){return e.$emit(t.type,t)}))}var gg=Wh({},undefined,{name:"VlInteractionTranslate",mixins:[wl],stubVNode:{empty:!1,attrs:function(){return{id:this.vmId,class:this.vmClass}}},props:{source:{type:String,required:!0},layers:[String,Array],filter:Function,hitTolerance:{type:Number,default:0}},data:function(){return{currentHitTolerance:this.hitTolerance}},computed:{inputFilter:function(){if(bt(this.filter))return this.filter;var t=this.layers;return t?(vt(t)&&(t=[t]),function(e,r){return t.includes(mu(r))}):void 0}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pg(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({rev:function(){this.$interaction&&this.currentHitTolerance!==this.$interaction.getHitTolerance()&&(this.currentHitTolerance=this.$interaction.getHitTolerance())},hitTolerance:function(t){this.setHitTolerance(t)},currentHitTolerance:function(t){t!==this.hitTolerance&&this.$emit("update:hitTolerance",t)}},Ya(["source","inputFilter"])),methods:{createInteraction:function(){var r=this;return be(B.mark((function n(){var i,o;return B.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.getInstance(r.source);case 2:return ne(!!(i=r._source=n.sent),'Source "'.concat(r.source,'" not found in identity map.')),i instanceof e.Vector?((o=i.getFeaturesCollection())||(o=new t.Collection(i.getFeatures()),r.subscribeTo(sa(i,Cv),(function(t){var e=t.feature;return e&&o.push(e)})),r.subscribeTo(sa(i,Tv),(function(t){var e=t.feature;return e&&o.remove(e)}))),ie(o,t.Collection,'Source "'.concat(r.source,"\" doesn't provide features collection."))):(bt(i.getFeaturesCollection)?o=i.getFeaturesCollection():bt(i.getFeatures)&&(o=i.getFeatures()),ie(o,t.Collection,'Source "'.concat(r.source,"\" doesn't provide features collection."))),n.abrupt("return",new h.Translate({features:o,filter:r.inputFilter,hitTolerance:r.currentHitTolerance}));case 6:case"end":return n.stop()}}),n)})))()},subscribeAll:function(){wl.methods.subscribeAll.call(this),vg.call(this)},getHitTolerance:function(){var t;return St(null===(t=this.$interaction)||void 0===t?void 0:t.getHitTolerance(),this.currentHitTolerance)},setHitTolerance:function(t){ne(pt(t),"Invalid hit tolerance"),t!==this.currentHitTolerance&&(this.currentHitTolerance=t),this.$interaction&&t!==this.$interaction.getHitTolerance()&&this.$interaction.setHitTolerance(t)}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function mg(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};mg.installed||(mg.installed=!0,e=Nt(e,"dataProjection"),Object.assign(gg,e),t.component(gg.name,gg))}var yg=Object.freeze({__proto__:null,default:mg,install:mg,Interaction:gg});function bg(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var Og=Wh({},undefined,{name:"VlLayerVectorImage",mixins:[vh],props:{imageRatio:{type:Number,default:1}},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?bg(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Ya(["imageRatio"])),methods:{createLayer:function(){return new w.VectorImage({className:this.className,opacity:this.currentOpacity,visible:this.currentVisible,extent:this.currentExtentViewProj,zIndex:this.currentZIndex,minResolution:this.currentMinResolution,maxResolution:this.currentMaxResolution,minZoom:this.currentMinZoom,maxZoom:this.currentMaxZoom,render:this.render,source:this.$source,renderOrder:this.renderOrder,renderBuffer:this.renderBuffer,declutter:this.declutter,updateWhileAnimating:this.updateWhileAnimating,updateWhileInteracting:this.updateWhileInteracting,style:this.$style,imageRatio:this.imageRatio})}}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function wg(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};wg.installed||(wg.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Og,e),t.component(Og.name,Og))}var jg=Object.freeze({__proto__:null,default:wg,install:wg,Layer:Og});function Pg(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Sg(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pg(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var xg=ht(pt,ft(gt,(function(t){return 2===t.length&&t.every(pt)})));function $g(){var e=this;this.subscribeTo(sa(this.$source,Jl),(function(r){r.tile&&Ft(r.tile.getFeatures(),(function(r){r instanceof t.Feature&&e.initializeFeature(r)}))}))}var Ig=Wh({},undefined,{name:"VlSourceVectorTile",mixins:[ih,xc],props:{cacheSize:Sg(Sg({},th.props.cacheSize),{},{default:128}),zDirection:Sg(Sg({},th.props.zDirection),{},{default:1}),extent:{type:Array,validator:function(t){return 4===t.length&&t.every(pt)}},formatFactory:{type:Function,default:qs},overlaps:{type:Boolean,default:!0},tileClass:Function,maxZoom:{type:Number,default:22},minZoom:{type:Number,default:0,validator:function(t){return t>=0}},maxResolution:Number,tileSize:{type:[Number,Array],default:function(){return[512,512]},validator:xg}},data:function(){return{format:void 0}},computed:{inputTileSize:function(){return gt(this.tileSize)?this.tileSize:[this.tileSize,this.tileSize]},derivedTileGridFactory:function(){if(bt(this.tileGridFactory))return this.tileGridFactory;var t=this.extentDataProj||Vu(this.resolvedDataProjection),e=this.maxZoom,r=this.minZoom,n=this.maxResolution,i=this.inputTileSize;return function(){return m.createXYZ({extent:t,maxZoom:e,minZoom:r,maxResolution:n,tileSize:i})}},extentDataProj:function(){return Oi(this.extent)},extentViewProj:function(){return this.extentToViewProj(this.extent)},formatIdent:function(){if(this.olObjIdent)return this.makeIdent(this.olObjIdent,"format")},inputFormatFactory:function(){return Rt(this.formatFactory.bind(this))},inputTileUrlFunction:function(){var t=St(this.tileUrlFunction,this.tileUrlFunc);return bt(t)?t:0!==this.currentUrls.length?Dh(this.currentUrls,this.tileGrid):void 0}},watch:Sg({formatIdent:function(t,e){t&&e?this.moveInstance(t,e):t&&!e&&this.format?this.setInstance(t,this.format):!t&&e&&this.unsetInstance(e)},inputFormatFactory:function(t){for(;this.hasInstance(this.formatIdent);)this.unsetInstance(this.formatIdent);bt(t)?this.format=this.instanceFactoryCall(this.formatIdent,t.bind(this)):this.format=void 0}},Ya(["extentViewProj","overlaps","tileClass"],["extentViewProj"])),created:function(){bt(this.inputFormatFactory)&&(this.format=this.instanceFactoryCall(this.formatIdent,this.inputFormatFactory.bind(this)))},methods:{createSource:function(){return new e.VectorTile({attributions:this.currentAttributions,attributionsCollapsible:this.attributionsCollapsible,projection:this.resolvedDataProjection,state:this.currentState,wrapX:this.wrapX,cacheSize:this.cacheSize,tileGrid:this.tileGrid,transition:this.transition,zDirection:this.zDirection,tileLoadFunction:this.currentTileLoadFunction,tileUrlFunction:this.currentTileUrlFunction,format:this.format,extent:this.extentViewProj,overlaps:this.overlaps,tileClass:this.tileClass})},subscribeAll:function(){ih.methods.subscribeAll.call(this),$g.call(this)},getFeaturesInExtent:function(t){var e=arguments,r=this;return be(B.mark((function n(){var i;return B.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>1&&void 0!==e[1]&&e[1],t=i?Oi(t):r.extentToViewProj(t),n.next=4,r.resolveSource();case 4:return n.abrupt("return",n.sent.getFeaturesInExtent(t));case 5:case"end":return n.stop()}}),n)})))()},clear:function(){var t=this;return be(B.mark((function e(){return B.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resolveSource();case 2:e.sent.clear();case 3:case"end":return e.stop()}}),e)})))()},tileKeyChanged:it,opaqueChanged:it,tilePixelRatioChanged:it}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Cg(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Cg.installed||(Cg.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Ig,e),t.component(Ig.name,Ig))}var Tg=Object.freeze({__proto__:null,default:Cg,install:Cg,Source:Ig});function _g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Eg(t,e,r,n){e=void 0!==e?e:42;var o=i.getHeight(t),s=i.getWidth(t);r=j.toSize(void 0!==r?r:256),n=n>0?n:Math.max(s/r[0],o/r[1]);for(var u=e+1,a=new Array(u),c=0;c<u;++c)a[c]=n/Math.pow(2,c);return a}var Rg=Wh({},undefined,{name:"VlSourceWmts",mixins:[ah],props:{layerName:{type:String,required:!0},styleName:{type:String,required:!0},matrixSet:{type:String,required:!0},dimensions:Object,format:{type:String,default:"image/jpeg"},requestEncoding:{type:String,default:"KVP"},version:{type:String,default:"1.0.0"},extent:{type:Array,validator:function(t){return 4===t.length&&t.every(pt)}},resolutions:{type:Array,validator:function(t){return t.every(pt)}},origin:{type:Array,validator:function(t){return 2===t.length&&t.every(pt)}},matrixIds:{type:Array,validator:function(t){return t.every(pt)}},maxZoom:{type:Number,default:42},minZoom:{type:Number,default:0},tileSize:{type:[Number,Array],default:function(){return[256,256]}}},computed:{extentDataProj:function(){return Oi(this.extent)},extentViewProj:function(){return this.extentToViewProj(this.extent)},originDataProj:function(){return wi(this.origin)},originViewProj:function(){return this.pointToViewProj(this.origin)},inputTileSize:function(){return gt(this.tileSize)?this.tileSize:[this.tileSize,this.tileSize]},derivedTileGridFactory:function(){if(bt(this.tileGridFactory))return this.tileGridFactory;var t=this.extentDataProj||Vu(this.resolvedDataProjection),e=this.resolutions||Eg(t,this.maxZoom,this.inputTileSize),r=this.originDataProj||Ni(t,Vi),n=this.matrixIds||Zt(this.minZoom,e.length),i=this.inputTileSize,o=this.minZoom;return function(){return new C.default({extent:t,origin:r,resolutions:e,minZoom:o,matrixIds:n,tileSize:i})}},inputTileUrlFunction:it},watch:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_g(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Ya(["dimensions","format","layerName","styleName","matrixSet","requestEncoding","version"],["dimensions"])),methods:{createSource:function(){return new e.WMTS({attributions:this.currentAttributions,projection:this.resolvedDataProjection,wrapX:this.wrapX,cacheSize:this.cacheSize,tileGrid:this.tileGrid,tilePixelRatio:this.tilePixelRatio,transition:this.transition,urls:this.currentUrls,tileLoadFunction:this.currentTileLoadFunction,crossOrigin:this.crossOrigin,reprojectionErrorThreshold:this.reprojectionErrorThreshold,tileClass:this.tileClass,imageSmoothing:this.imageSmoothing,dimensions:this.dimensions,format:this.format,layer:this.layerName,style:this.styleName,matrixSet:this.matrixSet,requestEncoding:this.requestEncoding,version:this.version})},getDimensions:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getDimensions(),this.dimensions)},getFormat:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getFormat(),this.format)},getLayer:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getLayer(),this.layerName)},getMatrixSet:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getMatrixSet(),this.matrixSet)},getRequestEncoding:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getRequestEncoding(),this.requestEncoding)},getStyle:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getStyle(),this.styleName)},getVersion:function(){var t;return St(null===(t=this.$source)||void 0===t?void 0:t.getVersion(),this.version)},attributionsCollapsibleChanged:it,stateChanged:it,tileKeyChanged:it,opaqueChanged:it,zDirectionChanged:it,inputTileUrlFunctionChanged:it}},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Fg(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Fg.installed||(Fg.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Rg,e),t.component(Rg.name,Rg))}var kg=Object.freeze({__proto__:null,default:Fg,install:Fg,Source:Rg}),Dg=Wh({},undefined,{name:"VlSourceXyz",mixins:[zh]},undefined,undefined,undefined,!1,void 0,void 0,void 0);function Vg(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Vg.installed||(Vg.installed=!0,e=Nt(e,"dataProjection"),Object.assign(Dg,e),t.component(Dg.name,Dg))}var Lg=Object.freeze({__proto__:null,default:Vg,install:Vg,Source:Dg});function Ag(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ag.installed||(Ag.installed=!0,t.use(Xh,e),t.use(ef,e),t.use(cf,e),t.use(Ff,e),t.use(Gf,e),t.use(md,e),t.use(Od,e),t.use($d,e),t.use(Ed,e),t.use(kd,e),t.use(Ad,e),t.use(zd,e),t.use(dp,e),t.use(yp,e),t.use(Cp,e),t.use(kp,e),t.use(Np,e),t.use(Yp,e),t.use(Dv,e),t.use(Mv,e),t.use(Zv,e),t.use(Xv,e),t.use(Kv,e),t.use(fd,e),t.use(ng,e),t.use(sg,e),t.use(cg,e),t.use(dg,e),t.use(yg,e),t.use(jg,e),t.use(Hd,e),t.use(Qd,e),t.use(Pp,e),t.use(Tg,e),t.use(kg,e),t.use(Lg,e))}var Ng=Object.freeze({__proto__:null,VERSION:"0.12.0-rc.26",default:Ag,install:Ag,BingmapsSource:Xh,ClusterSource:ef,DrawInteraction:cf,Feature:Ff,Geoloc:Gf,GraticuleLayer:md,GroupLayer:Od,HeatmapLayer:$d,ImageArcgisRestSource:Ed,ImageLayer:kd,ImageStaticSource:Ad,ImageWmsSource:zd,Map:dp,MapboxSource:yp,MapboxVectorLayer:Cp,ModifyInteraction:kp,OsmSource:Np,Overlay:Yp,RotateInteraction:Dv,SelectInteraction:Mv,SnapInteraction:Zv,SputnikSource:Xv,StamenSource:Kv,Style:fd,StyleFunc:ng,TileArcgisRestSource:sg,TileLayer:cg,TileWmsSource:dg,TranslateInteraction:yg,VectorImageLayer:jg,VectorLayer:Hd,VectorSource:Qd,VectorTileLayer:Pp,VectorTileSource:Tg,WmtsSource:kg,XyzSource:Lg});function Mg(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Gg(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Mg(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ug=Gg(Gg({},Ng),{},{mixins:Zh,olExt:Gu,rxExt:ha,utils:ui});return void 0!==window.Vue&&window.Vue.use(Ng),Ug}));
//# sourceMappingURL=vuelayers.umd.min.js.map
