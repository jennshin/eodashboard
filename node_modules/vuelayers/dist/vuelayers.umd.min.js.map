{"version":3,"file":"vuelayers.umd.min.js","sources":["../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/@babel/runtime/helpers/esm/construct.js","../node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","../node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/regenerator-runtime/runtime.js","../src/utils/minilo.js","../src/utils/assert.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../src/utils/identity-map.js","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../src/utils/log.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/merge-descriptors/index.js","../src/utils/merge-descriptors.js","../src/utils/vue-helpers.js","../node_modules/rxjs/node_modules/tslib/tslib.es6.js","../node_modules/rxjs/_esm5/internal/util/isFunction.js","../node_modules/rxjs/_esm5/internal/config.js","../node_modules/rxjs/_esm5/internal/util/hostReportError.js","../node_modules/rxjs/_esm5/internal/Observer.js","../node_modules/rxjs/_esm5/internal/util/isArray.js","../node_modules/rxjs/_esm5/internal/util/isObject.js","../node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js","../node_modules/rxjs/_esm5/internal/Subscription.js","../node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js","../node_modules/rxjs/_esm5/internal/Subscriber.js","../node_modules/rxjs/_esm5/internal/symbol/observable.js","../node_modules/rxjs/_esm5/internal/util/identity.js","../node_modules/rxjs/_esm5/internal/util/pipe.js","../node_modules/rxjs/_esm5/internal/Observable.js","../node_modules/rxjs/_esm5/internal/util/toSubscriber.js","../node_modules/rxjs/_esm5/internal/util/canReportError.js","../node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js","../node_modules/rxjs/_esm5/internal/SubjectSubscription.js","../node_modules/rxjs/_esm5/internal/Subject.js","../node_modules/rxjs/_esm5/internal/operators/refCount.js","../node_modules/rxjs/_esm5/internal/observable/ConnectableObservable.js","../node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js","../node_modules/rxjs/_esm5/internal/scheduler/Action.js","../node_modules/rxjs/_esm5/internal/scheduler/QueueAction.js","../node_modules/rxjs/_esm5/internal/Scheduler.js","../node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js","../node_modules/rxjs/_esm5/internal/scheduler/queue.js","../node_modules/rxjs/_esm5/internal/scheduler/QueueScheduler.js","../node_modules/rxjs/_esm5/internal/observable/empty.js","../node_modules/rxjs/_esm5/internal/util/isScheduler.js","../node_modules/rxjs/_esm5/internal/util/subscribeToArray.js","../node_modules/rxjs/_esm5/internal/scheduled/scheduleArray.js","../node_modules/rxjs/_esm5/internal/observable/fromArray.js","../node_modules/rxjs/_esm5/internal/observable/of.js","../node_modules/rxjs/_esm5/internal/observable/throwError.js","../node_modules/rxjs/_esm5/internal/Notification.js","../node_modules/rxjs/_esm5/internal/operators/observeOn.js","../node_modules/rxjs/_esm5/internal/ReplaySubject.js","../node_modules/rxjs/_esm5/internal/scheduler/async.js","../node_modules/rxjs/_esm5/internal/util/noop.js","../node_modules/rxjs/_esm5/internal/util/ArgumentOutOfRangeError.js","../node_modules/rxjs/_esm5/internal/util/EmptyError.js","../node_modules/rxjs/_esm5/internal/util/TimeoutError.js","../node_modules/rxjs/_esm5/internal/operators/map.js","../node_modules/rxjs/_esm5/internal/OuterSubscriber.js","../node_modules/rxjs/_esm5/internal/InnerSubscriber.js","../node_modules/rxjs/_esm5/internal/symbol/iterator.js","../node_modules/rxjs/_esm5/internal/util/isArrayLike.js","../node_modules/rxjs/_esm5/internal/util/isPromise.js","../node_modules/rxjs/_esm5/internal/util/subscribeTo.js","../node_modules/rxjs/_esm5/internal/util/subscribeToObservable.js","../node_modules/rxjs/_esm5/internal/util/subscribeToPromise.js","../node_modules/rxjs/_esm5/internal/util/subscribeToIterable.js","../node_modules/rxjs/_esm5/internal/util/subscribeToResult.js","../node_modules/rxjs/_esm5/internal/scheduled/scheduled.js","../node_modules/rxjs/_esm5/internal/util/isInteropObservable.js","../node_modules/rxjs/_esm5/internal/scheduled/scheduleObservable.js","../node_modules/rxjs/_esm5/internal/scheduled/schedulePromise.js","../node_modules/rxjs/_esm5/internal/util/isIterable.js","../node_modules/rxjs/_esm5/internal/scheduled/scheduleIterable.js","../node_modules/rxjs/_esm5/internal/observable/from.js","../node_modules/rxjs/_esm5/internal/innerSubscribe.js","../node_modules/rxjs/_esm5/internal/operators/mergeMap.js","../node_modules/rxjs/_esm5/internal/operators/mergeAll.js","../node_modules/rxjs/_esm5/internal/observable/fromEventPattern.js","../node_modules/rxjs/_esm5/internal/observable/interval.js","../node_modules/rxjs/_esm5/internal/util/isNumeric.js","../node_modules/rxjs/_esm5/internal/observable/merge.js","../node_modules/rxjs/_esm5/internal/observable/never.js","../node_modules/rxjs/_esm5/internal/operators/filter.js","../node_modules/rxjs/_esm5/internal/observable/race.js","../node_modules/rxjs/_esm5/internal/operators/catchError.js","../node_modules/rxjs/_esm5/internal/operators/debounceTime.js","../node_modules/rxjs/_esm5/internal/operators/defaultIfEmpty.js","../node_modules/rxjs/_esm5/internal/util/isDate.js","../node_modules/rxjs/_esm5/internal/operators/delay.js","../node_modules/rxjs/_esm5/internal/operators/delayWhen.js","../node_modules/rxjs/_esm5/internal/operators/distinctUntilChanged.js","../node_modules/rxjs/_esm5/internal/operators/distinctUntilKeyChanged.js","../node_modules/rxjs/_esm5/internal/operators/throwIfEmpty.js","../node_modules/rxjs/_esm5/internal/operators/take.js","../node_modules/rxjs/_esm5/internal/operators/first.js","../node_modules/rxjs/_esm5/internal/operators/mapTo.js","../node_modules/rxjs/_esm5/internal/operators/multicast.js","../node_modules/rxjs/_esm5/internal/operators/publishReplay.js","../node_modules/rxjs/_esm5/internal/operators/retry.js","../node_modules/rxjs/_esm5/internal/operators/skipUntil.js","../node_modules/rxjs/_esm5/internal/operators/skipWhile.js","../node_modules/rxjs/_esm5/internal/operators/switchMap.js","../node_modules/rxjs/_esm5/internal/operators/tap.js","../node_modules/rxjs/_esm5/internal/operators/timeoutWith.js","../node_modules/rxjs/_esm5/internal/operators/timeout.js","../src/utils/wait-for.js","../node_modules/uuid/dist/esm-browser/rng.js","../src/utils/sequential.js","../node_modules/uuid/dist/esm-browser/regex.js","../node_modules/uuid/dist/esm-browser/validate.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/v4.js","../src/ol-ext/control.js","../node_modules/ol/geom/GeometryType.js","../src/ol-ext/coord.js","../node_modules/ol/extent/Corner.js","../src/ol-ext/extent.js","../node_modules/@babel/runtime/helpers/esm/get.js","../node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/@turf/helpers/main.es.js","../node_modules/@turf/meta/main.es.js","../node_modules/@turf/explode/main.es.js","../node_modules/@turf/center/main.es.js","../node_modules/@turf/bbox/main.es.js","../node_modules/@turf/clone/main.es.js","../node_modules/@turf/invariant/main.es.js","../node_modules/@turf/distance/main.es.js","../node_modules/@turf/boolean-point-in-polygon/main.es.js","../node_modules/@turf/point-on-feature/main.es.js","../node_modules/@turf/nearest-point/main.es.js","../src/ol-ext/geom.js","../src/ol-ext/proj.js","../node_modules/parse-color/node_modules/color-convert/conversions.js","../node_modules/parse-color/node_modules/color-convert/index.js","../src/ol-ext/style.js","../node_modules/parse-color/index.js","../src/ol-ext/format.js","../node_modules/ol/obj.js","../src/ol-ext/feature.js","../src/ol-ext/interaction.js","../src/ol-ext/layer.js","../src/ol-ext/map.js","../src/ol-ext/overlay.js","../src/ol-ext/source.js","../node_modules/ol/proj/Units.js","../src/ol-ext/tilegrid.js","../src/ol-ext/view.js","../src/ol-ext/index.js","../node_modules/debounce-promise/dist/index.js","../node_modules/ol/events/EventType.js","../node_modules/ol/ObjectEventType.js","../node_modules/vuequery/dist/vuequery.js","../src/rx-ext/observable.js","../src/rx-ext/operators.js","../src/mixins/event-bus.js","../src/mixins/ident-map.js","../src/mixins/rx-subs.js","../src/mixins/services.js","../src/mixins/ol-cmp.js","../src/mixins/arcgis-source.js","../src/mixins/proj-transforms.js","../src/mixins/stub-vnode.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../src/mixins/wait-for-map.js","../src/mixins/base-layer.js","../node_modules/ol/CollectionEventType.js","../src/mixins/controls-container.js","../src/mixins/geometry-container.js","../src/mixins/style-container.js","../src/mixins/feature.js","../src/mixins/feature-helper.js","../src/mixins/features-container.js","../src/mixins/fill-style-container.js","../src/mixins/geometry.js","../node_modules/ol/render/EventType.js","../src/mixins/source-container.js","../src/mixins/layer.js","../src/mixins/image-layer.js","../node_modules/ol/source/State.js","../src/mixins/source.js","../src/mixins/image-source.js","../src/mixins/style.js","../src/mixins/image-style.js","../src/mixins/image-style-container.js","../src/mixins/interaction.js","../src/mixins/interactions-container.js","../src/mixins/layers-container.js","../src/mixins/overlays-container.js","../src/mixins/stroke-style-container.js","../src/mixins/reg-shape-style.js","../node_modules/ol/geom/GeometryLayout.js","../src/mixins/simple-geometry.js","../src/mixins/text-style-container.js","../node_modules/ol/source/TileEventType.js","../src/mixins/tile-source.js","../src/mixins/url-tile-source.js","../src/mixins/tile-image-source.js","../src/mixins/tile-layer.js","../src/mixins/vector-layer.js","../src/mixins/vector-source.js","../node_modules/ol/source/WMSServerType.js","../src/mixins/wms-source.js","../node_modules/ol-tilecache/dist/ol-tilecache.esm.js","../src/mixins/xyz-source.js","../node_modules/vue-runtime-helpers/dist/normalize-component.mjs","../src/components/bingmaps-source/source.vue","../src/components/bingmaps-source/source.vue?rollup-plugin-vue=script.js","../src/components/bingmaps-source/index.js","../src/components/cluster-source/source.vue?rollup-plugin-vue=script.js","../src/components/cluster-source/source.vue","../src/components/cluster-source/inner-source.vue?rollup-plugin-vue=script.js","../src/components/cluster-source/index.js","../src/components/draw-interaction/interaction.vue?rollup-plugin-vue=script.js","../src/components/draw-interaction/interaction.vue","../src/components/draw-interaction/index.js","../src/components/feature/circle-geom.vue?rollup-plugin-vue=script.js","../src/components/feature/point-geom.vue?rollup-plugin-vue=script.js","../src/components/feature/feature.vue?rollup-plugin-vue=script.js","../src/components/feature/line-string-geom.vue?rollup-plugin-vue=script.js","../src/components/feature/multi-line-string-geom.vue?rollup-plugin-vue=script.js","../src/components/feature/multi-point-geom.vue?rollup-plugin-vue=script.js","../src/components/feature/multi-polygon-geom.vue?rollup-plugin-vue=script.js","../src/components/feature/polygon-geom.vue?rollup-plugin-vue=script.js","../src/components/feature/index.js","../src/components/geoloc/geoloc.vue?rollup-plugin-vue=script.js","../src/components/geoloc/geoloc.vue","../src/components/geoloc/index.js","../src/components/style/fill.vue?rollup-plugin-vue=script.js","../src/components/style/fill.vue","../src/components/style/stroke.vue?rollup-plugin-vue=script.js","../src/components/style/stroke.vue","../src/components/style/circle.vue?rollup-plugin-vue=script.js","../node_modules/ol/style/IconAnchorUnits.js","../node_modules/ol/style/IconOrigin.js","../src/components/style/icon.vue?rollup-plugin-vue=script.js","../src/components/style/reg-shape.vue?rollup-plugin-vue=script.js","../src/components/style/style.vue?rollup-plugin-vue=script.js","../src/components/style/style.vue","../src/components/style/text.vue?rollup-plugin-vue=script.js","../src/components/style/text.vue","../src/components/style/background.vue?rollup-plugin-vue=script.js","../src/components/style/index.js","../src/components/graticule-layer/lat-style.vue?rollup-plugin-vue=script.js","../src/components/graticule-layer/layer.vue?rollup-plugin-vue=script.js","../src/components/graticule-layer/lon-style.vue?rollup-plugin-vue=script.js","../src/components/graticule-layer/stroke-style.vue?rollup-plugin-vue=script.js","../src/components/graticule-layer/index.js","../src/components/group-layer/layer.vue?rollup-plugin-vue=script.js","../src/components/group-layer/index.js","../src/components/heatmap-layer/layer.vue?rollup-plugin-vue=script.js","../src/components/heatmap-layer/layer.vue","../src/components/heatmap-layer/index.js","../src/components/image-arcgis-rest-source/source.vue?rollup-plugin-vue=script.js","../src/components/image-arcgis-rest-source/index.js","../src/components/image-layer/layer.vue?rollup-plugin-vue=script.js","../src/components/image-layer/index.js","../src/components/image-static-source/source.vue?rollup-plugin-vue=script.js","../src/components/image-static-source/index.js","../src/components/image-wms-source/source.vue?rollup-plugin-vue=script.js","../src/components/image-wms-source/index.js","../node_modules/ol/MapBrowserEventType.js","../node_modules/ol/MapEventType.js","../src/components/vector-layer/layer.vue?rollup-plugin-vue=script.js","../src/components/vector-layer/index.js","../src/components/vector-source/source.vue?rollup-plugin-vue=script.js","../src/components/vector-source/index.js","../src/components/map/view.vue?rollup-plugin-vue=script.js","../src/components/map/view.vue","../src/components/map/map.vue?rollup-plugin-vue=script.js","../src/components/map/map.vue","../src/components/map/index.js","../src/components/mapbox-source/source.vue","../src/components/mapbox-source/source.vue?rollup-plugin-vue=script.js","../src/components/mapbox-source/index.js","../node_modules/ol/layer/VectorTileRenderType.js","../src/components/vector-tile-layer/layer.vue?rollup-plugin-vue=script.js","../src/components/vector-tile-layer/index.js","../src/components/mapbox-vector-layer/layer.vue?rollup-plugin-vue=script.js","../src/components/mapbox-vector-layer/index.js","../src/components/modify-interaction/interaction.vue?rollup-plugin-vue=script.js","../src/components/modify-interaction/interaction.vue","../src/components/modify-interaction/index.js","../src/components/osm-source/source.vue?rollup-plugin-vue=script.js","../src/components/osm-source/index.js","../node_modules/ol/OverlayPositioning.js","../src/components/overlay/overlay.vue?rollup-plugin-vue=script.js","../src/components/overlay/overlay.vue","../src/components/overlay/index.js","../node_modules/@babel/runtime/helpers/defineProperty.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/superPropBase.js","../node_modules/@babel/runtime/helpers/get.js","../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/inherits.js","../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../node_modules/ol-rotate-feature/dist/ol-rotate-feature.esm.js","../node_modules/ol/source/VectorEventType.js","../src/components/rotate-interaction/interaction.vue?rollup-plugin-vue=script.js","../src/components/rotate-interaction/interaction.vue","../src/components/rotate-interaction/index.js","../src/components/select-interaction/interaction.vue?rollup-plugin-vue=script.js","../src/components/select-interaction/interaction.vue","../src/components/select-interaction/index.js","../src/components/snap-interaction/interaction.vue?rollup-plugin-vue=script.js","../src/components/snap-interaction/index.js","../src/components/sputnik-source/source.vue?rollup-plugin-vue=script.js","../src/components/sputnik-source/index.js","../src/components/stamen-source/source.vue?rollup-plugin-vue=script.js","../src/components/stamen-source/index.js","../src/components/style-func/style.vue?rollup-plugin-vue=script.js","../src/components/style-func/style.vue","../src/components/style-func/index.js","../src/components/tile-arcgis-rest-source/source.vue?rollup-plugin-vue=script.js","../src/components/tile-arcgis-rest-source/index.js","../src/components/tile-layer/layer.vue?rollup-plugin-vue=script.js","../src/components/tile-layer/index.js","../src/components/tile-wms-source/source.vue?rollup-plugin-vue=script.js","../src/components/tile-wms-source/index.js","../src/components/translate-interaction/interaction.vue?rollup-plugin-vue=script.js","../src/components/translate-interaction/interaction.vue","../src/components/translate-interaction/index.js","../src/components/vector-image-layer/layer.vue?rollup-plugin-vue=script.js","../src/components/vector-image-layer/index.js","../src/components/vector-tile-source/source.vue?rollup-plugin-vue=script.js","../src/components/vector-tile-source/source.vue","../src/components/vector-tile-source/index.js","../src/components/wmts-source/source.vue?rollup-plugin-vue=script.js","../node_modules/ol/tilegrid/common.js","../src/components/wmts-source/source.vue","../src/components/wmts-source/index.js","../src/components/xyz-source/source.vue?rollup-plugin-vue=script.js","../src/components/xyz-source/index.js","../src/index.js","../src/index.umd.js"],"sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","import { Collection } from 'ol'\n\n/**\n * Mini Lodash.\n */\nconst glob = typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : {}\nconst globIsFinite = glob.isFinite || noop\n\nconst objectProto = Object.prototype\nconst funcProto = Object.prototype\n\nconst objectToString = objectProto.toString\nconst objectHasOwnProp = objectProto.hasOwnProperty\nconst funcToString = funcProto.toString\n\nconst objectTag = /*#__PURE__*/{}::objectToString()\nconst numberTag = /*#__PURE__*/0::objectToString()\nconst stringTag = /*#__PURE__*/''::objectToString()\nconst booleanTag = /*#__PURE__*/true::objectToString()\n\nconst objectCtorString = /*#__PURE__*/Object::funcToString()\n\nexport function noop () {\n  // do nothing\n}\n\nexport function constant (value) {\n  return () => value\n}\n\nexport function stubArray () {\n  return []\n}\n\nexport function stubObject () {\n  return Object.create(null)\n}\n\nexport function stubCollection () {\n  return new Collection()\n}\n\nexport function stubTrue () {\n  return true\n}\n\nexport function stubFalse () {\n  return false\n}\n\nexport function identity (value) {\n  return value\n}\n\nexport function negate (func) {\n  return function (...args) {\n    return !func(...args)\n  }\n}\n\nexport function or (...funcs) {\n  return function (...args) {\n    return reduce(funcs, (result, fn) => {\n      return result || fn(...args)\n    }, false)\n  }\n}\n\nexport function and (...funcs) {\n  return function (...args) {\n    return reduce(funcs, (result, fn) => {\n      return result && fn(...args)\n    }, true)\n  }\n}\n\nexport function toArray (value) {\n  return Array.from(value)\n}\n\nexport function isBoolean (value) {\n  return value::objectToString() === booleanTag\n}\n\nexport function isNumber (value) {\n  return value::objectToString() === numberTag\n}\n\nexport function isString (value) {\n  return value::objectToString() === stringTag\n}\n\nexport function isArray (value) {\n  return Array.isArray(value)\n}\n\nexport function isArrayLike (value) {\n  return isObjectLike(value) && value::objectHasOwnProp('length')\n}\n\nexport function isCollection (value) {\n  return value instanceof Collection\n}\n\nexport function isFinite (value) {\n  return typeof value === 'number' && globIsFinite(value)\n}\n\nexport function isFunction (value) {\n  return typeof value === 'function'\n}\n\n/**\n * @param {*} value\n * @return {boolean} True if value is number or numeric string.\n */\nexport function isNumeric (value) {\n  return !isNaN(parseFloat(value)) && globIsFinite(value)\n}\n\nexport function isObjectLike (value) {\n  return value != null && typeof value === 'object'\n}\n\nexport function isPlainObject (value) {\n  if (!isObjectLike(value) || value::objectToString() !== objectTag) {\n    return false\n  }\n  const proto = Object.getPrototypeOf(value)\n  if (proto == null) {\n    return true\n  }\n  const Ctor = proto.constructor\n  return typeof Ctor === 'function' &&\n    Ctor instanceof Ctor &&\n    Ctor::funcToString() === objectCtorString\n}\n\nexport function round (number, precision = 0) {\n  if (!globIsFinite(number)) return number\n  if (precision < 0) return Number(number)\n\n  return Number(Number(number).toFixed(precision))\n}\n\n/**\n * @param {...*} [args]\n *\n * @return {*}\n */\nexport function coalesce (...args) {\n  return args.find(val => val != null)\n}\n\n/**\n * @param {Object} object\n * @return {Object} Returns object only with plain properties.\n */\nexport function plainProps (object) {\n  const newObject = {}\n  const isPlain = x => isNumeric(x) || isString(x) || isArray(x) || isBoolean(x) || isPlainObject(x)\n  Object.keys(object).forEach(key => {\n    if (isPlain(object[key])) {\n      newObject[key] = object[key]\n    }\n  })\n  return newObject\n}\n\n/**\n * Replaces `tokens` in the `string` by values from the `replaces`.\n *\n * @param {string} string\n * @param {Object} replaces\n *\n * @returns {string}\n */\nexport function replaceTokens (string, replaces) {\n  const regExp = new RegExp(Object.keys(replaces).map(field => '(\\\\{' + field + '\\\\})').join('|'), 'ig')\n\n  return string.replace(regExp, match => replaces[match.substr(1, match.length - 2)] || '')\n}\n\nexport function isEqual (value, other) {\n  if (value === other) {\n    return true\n  }\n  if (value == null || other == null || !(isObjectLike(value) && isObjectLike(other))) {\n    // eslint-disable-next-line no-self-compare\n    return value !== value && other !== other\n  }\n\n  const valueProps = Object.keys(value)\n  const otherProps = Object.keys(other)\n  if (valueProps.length !== otherProps.length) {\n    return false\n  }\n\n  // if (serialize(value) === serialize(other)) return\n\n  const checked = []\n  const traverse = (valueProps, otherProps) => {\n    for (let i = 0, l = valueProps.length; i < l; i++) {\n      const valueProp = valueProps[i]\n\n      if (checked.includes(valueProp)) {\n        continue\n      }\n      if (other::objectHasOwnProp(valueProp) === false) {\n        return false\n      }\n\n      const otherProp = otherProps[i]\n\n      if (!isEqual(value[valueProp], other[otherProp])) {\n        return false\n      }\n\n      checked.push(otherProp)\n    }\n\n    return true\n  }\n\n  if (traverse(valueProps, otherProps) === false) {\n    return false\n  }\n\n  return traverse(otherProps, valueProps)\n}\n\nexport function getLength (value) {\n  if (isCollection(value)) {\n    value = value.getArray()\n  }\n  if (isArrayLike(value)) {\n    return value.length\n  }\n  return 0\n}\n\nexport function isEmpty (value) {\n  if (isCollection(value)) {\n    value = value.getArray()\n  }\n  if (isObjectLike(value)) {\n    value = Object.values(value).filter(negate(isEmpty))\n  }\n  return !value || (isArrayLike(value) && getLength(value) === 0)\n}\n\nexport function keys (object) {\n  return Object.keys(object)\n}\n\nexport function values (object) {\n  return Object.values(object)\n}\n\nexport function seal (object) {\n  return Object.seal(object)\n}\n\nexport function freeze (object) {\n  return Object.freeze(object)\n}\n\nexport function sealFactory (factory) {\n  let fn = factory\n  if (!fn.sealed) {\n    fn = function (...args) {\n      return seal(factory(...args))\n    }\n    fn.sealed = true\n  }\n  return fn\n}\n\nexport function freezeFactory (factory) {\n  let fn = factory\n  if (!fn.freezed) {\n    fn = function (...args) {\n      return freeze(factory(...args))\n    }\n    fn.freezed = true\n  }\n  return fn\n}\n\nexport function forEach (collection, iteratee) {\n  if (isCollection(collection)) {\n    collection = collection.getArray()\n  }\n  const keys = Object.keys(collection)\n  for (let i = 0, l = keys.length; i < l; i++) {\n    const key = keys[i]\n    const value = collection[key]\n    if (iteratee(value, key) === false) {\n      return\n    }\n  }\n}\n\nexport function reduce (collection, iteratee, initial) {\n  let result = initial\n  forEach(collection, (value, key) => {\n    result = iteratee(result, value, key)\n  })\n  return result\n}\n\nexport function filter (collection, iteratee = negate(isEmpty)) {\n  return reduce(collection, (newCollection, value, key) => {\n    if (iteratee(value, key)) {\n      if (isArray(newCollection)) {\n        newCollection.push(value)\n      } else {\n        newCollection[key] = value\n      }\n    }\n    return newCollection\n  }, isArrayLike(collection) || isCollection(collection) ? [] : {})\n}\n\nexport function find (collection, iteratee = identity) {\n  const res = filter(collection, iteratee)\n  if (isArray(res)) return res[0]\n  return res[keys(res)[0]]\n}\n\nexport function map (collection, iteratee = identity) {\n  return reduce(collection, (newCollection, value, key) => {\n    newCollection[key] = iteratee(value, key)\n    return newCollection\n  }, isArrayLike(collection) || isCollection(collection) ? [] : {})\n}\n\nexport function mapValues (object, iteratee = identity) {\n  return map(object, iteratee)\n}\n\nexport function mapKeys (object, iteratee = identity) {\n  return reduce(object, (newObject, value, key) => {\n    newObject[iteratee(value, key)] = value\n    return newObject\n  }, isArrayLike(object) || isCollection(object) ? [] : {})\n}\n\nexport function every (collection, iteratee = identity) {\n  return reduce(collection, (result, value, key) => {\n    return result && iteratee(value, key)\n  }, true)\n}\n\nexport function some (collection, iteratee = identity) {\n  return reduce(collection, (result, value, key) => {\n    return result || iteratee(value, key)\n  }, false)\n}\n\nexport function firstEl (object) {\n  if (isCollection(object)) {\n    object = object.getArray()\n  }\n  if (!isArrayLike(object)) return\n\n  return object[0]\n}\n\nexport function lastEl (object) {\n  if (isCollection(object)) {\n    object = object.getArray()\n  }\n  if (!isArrayLike(object)) return\n\n  return object[object.length - 1]\n}\n\nexport function pick (object, key, ...keys) {\n  if (Array.isArray(key)) {\n    keys = key\n  } else {\n    keys = [key].concat(keys)\n  }\n  return reduce(keys, (picked, key) => {\n    picked[key] = object[key]\n    return picked\n  }, {})\n}\n\nexport function omit (object, key, ...keys) {\n  if (Array.isArray(key)) {\n    keys = key\n  } else {\n    keys = [key].concat(keys)\n  }\n  return filter(object, (value, key) => !keys.includes(key))\n}\n\nexport function upperFirst (string) {\n  string = String(string)\n  if (string.length === 0) {\n    return ''\n  }\n  return string[0].toUpperCase() + string.slice(1)\n}\n\nexport function lowerFirst (string) {\n  string = String(string)\n  if (string.length === 0) {\n    return ''\n  }\n  return string[0].toLowerCase() + string.slice(1)\n}\n\nexport function* rangeIterator (start, end, step = 1) {\n  for (let i = start; i < end; i += step) {\n    yield i\n  }\n}\n\nexport function range (start, end, step = 1) {\n  return Array.from(rangeIterator(start, end, step))\n}\n\n/**\n * https://github.com/you-dont-need/You-Dont-Need-Lodash-Underscore#_get\n *\n * @param obj\n * @param path\n * @param defaultValue\n * @return {*}\n */\nexport function get (obj, path, defaultValue) {\n  const travel = regexp =>\n    String.prototype.split\n      .call(path, regexp)\n      .filter(Boolean)\n      .reduce((res, key) => (res !== null && res !== undefined ? res[key] : res), obj)\n  const result = travel(/[,[\\]]+?/) || travel(/[,[\\].]+?/)\n  return result === undefined || result === obj ? defaultValue : result\n}\n\nexport function hasOwnProp (object, prop) {\n  return isObjectLike(object) && object::objectHasOwnProp(prop)\n}\n\nexport function hasProp (object, prop) {\n  return isObjectLike(object) && (prop in object)\n}\n\nexport function includes (array, value, comparator = isEqual) {\n  const elems = filter(array, elem => comparator(elem, value))\n  return elems.shift()\n}\n\nexport function difference (array1, array2, comparator = isEqual) {\n  return filter(array1, value => !includes(array2, value, comparator))\n}\n\n/**\n * @param {string} str\n * @return {string}\n */\nexport function camelCase (str) {\n  const regExp = /([-_]\\w)/g\n  return str.replace(regExp, matches => matches[1].toUpperCase())\n}\n\n/**\n * @param {string} str\n * @returns {string}\n */\nexport function kebabCase (str) {\n  return str.match(/[A-Z]{2,}(?=[A-Z][a-z0-9]*|\\b)|[A-Z]?[a-z0-9]*|[A-Z]|[0-9]+/g)\n    .filter(Boolean)\n    .map(x => x.toLowerCase())\n    .join('-')\n}\n\nexport function serialize (value) {\n  return JSON.stringify(value)\n}\n\nexport function unserialize (value) {\n  if (!isString(value)) return\n  return JSON.parse(value)\n}\n\nexport function clonePlainObject (obj) {\n  return unserialize(serialize(obj))\n}\n\nexport function addPrefix (prefix) {\n  return str => prefix + (prefix ? upperFirst(str) : str)\n}\n","import { isNumeric } from './minilo'\n\nexport class AssertionError extends Error {\n  constructor (message) {\n    super(message)\n    this.name = this.constructor.name\n    if (typeof Error.captureStackTrace === 'function') {\n      Error.captureStackTrace(this, this.constructor)\n    } else {\n      this.stack = (new Error(message)).stack\n    }\n  }\n}\n\n/**\n * @param {*} value\n * @param {string} message\n * @throws AssertionError\n */\nexport function assert (value, message) {\n  if (!value) {\n    throw new AssertionError(message || 'Assertion failed')\n  }\n}\n\n/**\n * @param {*} value\n * @param {string|undefined} [msg]\n * @throws {AssertionError}\n */\nexport function numeric (value, msg) {\n  assert(isNumeric(value), msg || 'value is a number')\n}\n\n/**\n * @param {*} value\n * @param {Function} Ctor\n * @param {string|undefined} [msg]\n * @throws {AssertionError}\n */\nexport function instanceOf (value, Ctor, msg) {\n  assert(value instanceof Ctor, msg || `value is an instance of ${Ctor.name}`)\n}\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","/**\n * Simple Identity map with refs count\n */\nexport default class IdentityMap {\n  _pools = Object.create(null)\n\n  /**\n   * @param {string} pool\n   * @private\n   */\n  _preparePool (pool) {\n    this._pools[pool] || (this._pools[pool] = Object.create(null))\n  }\n\n  /**\n   * @param {string} id\n   * @param {*} value\n   * @param {string} pool\n   */\n  set (id, value, pool = 'default') {\n    if (value == null) return\n\n    this._preparePool(pool)\n\n    this._pools[pool][id] = {\n      value,\n      refs: 1,\n    }\n  }\n\n  /**\n   * @param {string} id\n   * @param {string} pool\n   */\n  get (id, pool = 'default') {\n    this._preparePool(pool)\n\n    const rec = this._pools[pool][id]\n    if (!rec || rec.value == null) return\n\n    rec.refs++\n    this._pools[pool][id] = rec\n\n    return rec.value\n  }\n\n  /**\n   * @param {string} id\n   * @param {string} pool\n   */\n  unset (id, pool = 'default') {\n    this._preparePool(pool)\n\n    const rec = this._pools[pool][id]\n    if (!rec || rec.value == null) return\n\n    rec.refs--\n    if (rec.refs === 0) {\n      delete this._pools[pool][id]\n    }\n  }\n\n  /**\n   * @param {string} id\n   * @param {string} pool\n   * @return {boolean}\n   */\n  has (id, pool = 'default') {\n    this._preparePool(pool)\n\n    return !!this._pools[pool][id]\n  }\n\n  /**\n   * @param {string} fromId\n   * @param {string} toId\n   * @param {string} [pool]\n   * @returns {boolean}\n   */\n  move (fromId, toId, pool = 'default') {\n    if (!this.has(fromId, pool) || !toId) return false\n\n    this._pools[pool][toId] = this._pools[pool][fromId]\n    delete this._pools[pool][fromId]\n\n    return true\n  }\n\n  /**\n   * @param {string} pool\n   * @return {string[]}\n   */\n  ids (pool = 'default') {\n    this._preparePool(pool)\n\n    return Object.keys(this._pools[pool])\n  }\n\n  /**\n   * @param {string} id\n   * @param {string} pool\n   * @return {*}\n   */\n  refs (id, pool = 'default') {\n    this._preparePool(pool)\n\n    return this.has(id, pool) ? this._pools[pool][id].refs : undefined\n  }\n}\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import { isString } from './minilo'\n\n/* eslint-disable no-console */\nexport const log = makeLog('[C_PKG_FULLNAME]')\n\nexport const warn = makeWarn('[C_PKG_FULLNAME] WARN')\n\nexport const error = makeError('[C_PKG_FULLNAME] ERR')\n/* eslint-enable no-console */\n\nexport function encode (val) {\n  return JSON.stringify(val)\n}\n\nexport function newLogger (prefix = '') {\n  return {\n    log: makeLog(`[C_PKG_FULLNAME] ${prefix}`),\n    warn: makeWarn(`[C_PKG_FULLNAME] WARN ${prefix}`),\n    error: makeError(`[C_PKG_FULLNAME] ERR ${prefix}`),\n  }\n}\n\nexport function makeLog (prefix = '') {\n  return function (...args) {\n    if (prefix) {\n      if (isString(args[0])) {\n        args[0] = prefix.trim() + ' ' + args[0]\n      } else {\n        args = [prefix.trim(), ...args]\n      }\n    }\n    console.log(...args)\n  }\n}\n\nexport function makeWarn (prefix = '') {\n  return function (...args) {\n    if (prefix) {\n      if (isString(args[0])) {\n        args[0] = prefix.trim() + ' ' + args[0]\n      } else {\n        args = [prefix.trim(), ...args]\n      }\n    }\n    console.warn(...args)\n  }\n}\n\nexport function makeError (prefix = '') {\n  return function (...args) {\n    if (prefix) {\n      if (isString(args[0])) {\n        args[0] = prefix.trim() + ' ' + args[0]\n      } else {\n        args = [prefix.trim(), ...args]\n      }\n    }\n    console.error(...args)\n  }\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","/*!\n * merge-descriptors\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = merge\n\n/**\n * Module variables.\n * @private\n */\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty\n\n/**\n * Merge the property descriptors of `src` into `dest`\n *\n * @param {object} dest Object to add descriptors to\n * @param {object} src Object to clone descriptors from\n * @param {boolean} [redefine=true] Redefine `dest` properties with `src` properties\n * @returns {object} Reference to dest\n * @public\n */\n\nfunction merge(dest, src, redefine) {\n  if (!dest) {\n    throw new TypeError('argument dest is required')\n  }\n\n  if (!src) {\n    throw new TypeError('argument src is required')\n  }\n\n  if (redefine === undefined) {\n    // Default to true\n    redefine = true\n  }\n\n  Object.getOwnPropertyNames(src).forEach(function forEachOwnPropertyName(name) {\n    if (!redefine && hasOwnProperty.call(dest, name)) {\n      // Skip desriptor\n      return\n    }\n\n    // Copy descriptor\n    var descriptor = Object.getOwnPropertyDescriptor(src, name)\n    Object.defineProperty(dest, name, descriptor)\n  })\n\n  return dest\n}\n","import baseMergeDescriptors from 'merge-descriptors'\n\n/**\n * @param {...Object} args\n * @returns {Object}\n */\nexport default function mergeDescriptors (...args) {\n  let redefine\n  if (typeof args[args.length - 1] !== 'object') {\n    redefine = args.pop()\n  }\n\n  return args.slice(1).reduce(\n    (dest, src, i) => baseMergeDescriptors(dest, src, redefine),\n    args[0],\n  )\n}\n","/**\n * Constructs watch hash for multiple properties.\n * @param {string[]} props\n * @param {function|Object} watcherFactory\n */\nexport function makeWatchers (props, watcherFactory) {\n  return props.reduce((hash, prop) => {\n    hash[prop] = watcherFactory(prop)\n    return hash\n  }, {})\n}\n\nexport function extractChildren (slots, slotNames = []) {\n  return Object.keys(slots).reduce((all, name) => {\n    if (!slotNames.length || slotNames.includes(name)) {\n      all = all.concat(slots[name])\n    }\n\n    return all\n  }, [])\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isFunction(x) {\n    return typeof x === 'function';\n}\n//# sourceMappingURL=isFunction.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\nexport var config = {\n    Promise: undefined,\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = /*@__PURE__*/ new Error();\n            /*@__PURE__*/ console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            /*@__PURE__*/ console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n//# sourceMappingURL=config.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function hostReportError(err) {\n    setTimeout(function () { throw err; }, 0);\n}\n//# sourceMappingURL=hostReportError.js.map\n","/** PURE_IMPORTS_START _config,_util_hostReportError PURE_IMPORTS_END */\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nexport var empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArray = /*@__PURE__*/ (function () { return Array.isArray || (function (x) { return x && typeof x.length === 'number'; }); })();\n//# sourceMappingURL=isArray.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isObject(x) {\n    return x !== null && typeof x === 'object';\n}\n//# sourceMappingURL=isObject.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar UnsubscriptionErrorImpl = /*@__PURE__*/ (function () {\n    function UnsubscriptionErrorImpl(errors) {\n        Error.call(this);\n        this.message = errors ?\n            errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n        return this;\n    }\n    UnsubscriptionErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return UnsubscriptionErrorImpl;\n})();\nexport var UnsubscriptionError = UnsubscriptionErrorImpl;\n//# sourceMappingURL=UnsubscriptionError.js.map\n","/** PURE_IMPORTS_START _util_isArray,_util_isObject,_util_isFunction,_util_UnsubscriptionError PURE_IMPORTS_END */\nimport { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nvar Subscription = /*@__PURE__*/ (function () {\n    function Subscription(unsubscribe) {\n        this.closed = false;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._ctorUnsubscribe = true;\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parentOrParents = _a._parentOrParents, _ctorUnsubscribe = _a._ctorUnsubscribe, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (_parentOrParents instanceof Subscription) {\n            _parentOrParents.remove(this);\n        }\n        else if (_parentOrParents !== null) {\n            for (var index = 0; index < _parentOrParents.length; ++index) {\n                var parent_1 = _parentOrParents[index];\n                parent_1.remove(this);\n            }\n        }\n        if (isFunction(_unsubscribe)) {\n            if (_ctorUnsubscribe) {\n                this._unsubscribe = undefined;\n            }\n            try {\n                _unsubscribe.call(this);\n            }\n            catch (e) {\n                errors = e instanceof UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n            }\n        }\n        if (isArray(_subscriptions)) {\n            var index = -1;\n            var len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    try {\n                        sub.unsubscribe();\n                    }\n                    catch (e) {\n                        errors = errors || [];\n                        if (e instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n                        }\n                        else {\n                            errors.push(e);\n                        }\n                    }\n                }\n            }\n        }\n        if (errors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var subscription = teardown;\n        if (!teardown) {\n            return Subscription.EMPTY;\n        }\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (!(subscription instanceof Subscription)) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default: {\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n            }\n        }\n        var _parentOrParents = subscription._parentOrParents;\n        if (_parentOrParents === null) {\n            subscription._parentOrParents = this;\n        }\n        else if (_parentOrParents instanceof Subscription) {\n            if (_parentOrParents === this) {\n                return subscription;\n            }\n            subscription._parentOrParents = [_parentOrParents, this];\n        }\n        else if (_parentOrParents.indexOf(this) === -1) {\n            _parentOrParents.push(this);\n        }\n        else {\n            return subscription;\n        }\n        var subscriptions = this._subscriptions;\n        if (subscriptions === null) {\n            this._subscriptions = [subscription];\n        }\n        else {\n            subscriptions.push(subscription);\n        }\n        return subscription;\n    };\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexport { Subscription };\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var rxSubscriber = /*@__PURE__*/ (function () {\n    return typeof Symbol === 'function'\n        ? /*@__PURE__*/ Symbol('rxSubscriber')\n        : '@@rxSubscriber_' + /*@__PURE__*/ Math.random();\n})();\nexport var $$rxSubscriber = rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map\n","/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nvar Subscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subscriber, _super);\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this.syncErrorValue = null;\n        _this.syncErrorThrown = false;\n        _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = emptyObserver;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = emptyObserver;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n                        _this.destination = destinationOrNext;\n                        destinationOrNext.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriberSymbol] = function () { return this; };\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _parentOrParents = this._parentOrParents;\n        this._parentOrParents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parentOrParents = _parentOrParents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar SafeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== emptyObserver) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\n//# sourceMappingURL=Subscriber.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var observable = /*@__PURE__*/ (function () { return typeof Symbol === 'function' && Symbol.observable || '@@observable'; })();\n//# sourceMappingURL=observable.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map\n","/** PURE_IMPORTS_START _identity PURE_IMPORTS_END */\nimport { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map\n","/** PURE_IMPORTS_START _util_canReportError,_util_toSubscriber,_symbol_observable,_util_pipe,_config PURE_IMPORTS_END */\nimport { canReportError } from './util/canReportError';\nimport { toSubscriber } from './util/toSubscriber';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nvar Observable = /*@__PURE__*/ (function () {\n    function Observable(subscribe) {\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            sink.add(operator.call(sink, this.source));\n        }\n        else {\n            sink.add(this.source || (config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n                this._subscribe(sink) :\n                this._trySubscribe(sink));\n        }\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            if (sink.syncErrorThrowable) {\n                sink.syncErrorThrowable = false;\n                if (sink.syncErrorThrown) {\n                    throw sink.syncErrorValue;\n                }\n            }\n        }\n        return sink;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                sink.syncErrorThrown = true;\n                sink.syncErrorValue = err;\n            }\n            if (canReportError(sink)) {\n                sink.error(err);\n            }\n            else {\n                console.warn(err);\n            }\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                try {\n                    next(value);\n                }\n                catch (err) {\n                    reject(err);\n                    if (subscription) {\n                        subscription.unsubscribe();\n                    }\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        return source && source.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        if (operations.length === 0) {\n            return this;\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    if (!promiseCtor) {\n        promiseCtor = config.Promise || Promise;\n    }\n    if (!promiseCtor) {\n        throw new Error('no Promise impl found');\n    }\n    return promiseCtor;\n}\n//# sourceMappingURL=Observable.js.map\n","/** PURE_IMPORTS_START _Subscriber,_symbol_rxSubscriber,_Observer PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nimport { rxSubscriber as rxSubscriberSymbol } from '../symbol/rxSubscriber';\nimport { empty as emptyObserver } from '../Observer';\nexport function toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriberSymbol]) {\n            return nextOrObserver[rxSubscriberSymbol]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber(emptyObserver);\n    }\n    return new Subscriber(nextOrObserver, error, complete);\n}\n//# sourceMappingURL=toSubscriber.js.map\n","/** PURE_IMPORTS_START _Subscriber PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nexport function canReportError(observer) {\n    while (observer) {\n        var _a = observer, closed_1 = _a.closed, destination = _a.destination, isStopped = _a.isStopped;\n        if (closed_1 || isStopped) {\n            return false;\n        }\n        else if (destination && destination instanceof Subscriber) {\n            observer = destination;\n        }\n        else {\n            observer = null;\n        }\n    }\n    return true;\n}\n//# sourceMappingURL=canReportError.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar ObjectUnsubscribedErrorImpl = /*@__PURE__*/ (function () {\n    function ObjectUnsubscribedErrorImpl() {\n        Error.call(this);\n        this.message = 'object unsubscribed';\n        this.name = 'ObjectUnsubscribedError';\n        return this;\n    }\n    ObjectUnsubscribedErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return ObjectUnsubscribedErrorImpl;\n})();\nexport var ObjectUnsubscribedError = ObjectUnsubscribedErrorImpl;\n//# sourceMappingURL=ObjectUnsubscribedError.js.map\n","/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscription } from './Subscription';\nvar SubjectSubscription = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscription, _super);\n    function SubjectSubscription(subject, subscriber) {\n        var _this = _super.call(this) || this;\n        _this.subject = subject;\n        _this.subscriber = subscriber;\n        _this.closed = false;\n        return _this;\n    }\n    SubjectSubscription.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        var subject = this.subject;\n        var observers = subject.observers;\n        this.subject = null;\n        if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n            return;\n        }\n        var subscriberIndex = observers.indexOf(this.subscriber);\n        if (subscriberIndex !== -1) {\n            observers.splice(subscriberIndex, 1);\n        }\n    };\n    return SubjectSubscription;\n}(Subscription));\nexport { SubjectSubscription };\n//# sourceMappingURL=SubjectSubscription.js.map\n","/** PURE_IMPORTS_START tslib,_Observable,_Subscriber,_Subscription,_util_ObjectUnsubscribedError,_SubjectSubscription,_internal_symbol_rxSubscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nvar SubjectSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscriber, _super);\n    function SubjectSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        return _this;\n    }\n    return SubjectSubscriber;\n}(Subscriber));\nexport { SubjectSubscriber };\nvar Subject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.observers = [];\n        _this.closed = false;\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype[rxSubscriberSymbol] = function () {\n        return new SubjectSubscriber(this);\n    };\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype.next = function (value) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        if (!this.isStopped) {\n            var observers = this.observers;\n            var len = observers.length;\n            var copy = observers.slice();\n            for (var i = 0; i < len; i++) {\n                copy[i].next(value);\n            }\n        }\n    };\n    Subject.prototype.error = function (err) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.hasError = true;\n        this.thrownError = err;\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].error(err);\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.complete = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].complete();\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = true;\n        this.closed = true;\n        this.observers = null;\n    };\n    Subject.prototype._trySubscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return _super.prototype._trySubscribe.call(this, subscriber);\n        }\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            return new SubjectSubscription(this, subscriber);\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var destination = this.destination;\n        if (destination && destination.next) {\n            destination.next(value);\n        }\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var destination = this.destination;\n        if (destination && destination.error) {\n            this.destination.error(err);\n        }\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var destination = this.destination;\n        if (destination && destination.complete) {\n            this.destination.complete();\n        }\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        if (source) {\n            return this.source.subscribe(subscriber);\n        }\n        else {\n            return Subscription.EMPTY;\n        }\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function refCount() {\n    return function refCountOperatorFunction(source) {\n        return source.lift(new RefCountOperator(source));\n    };\n}\nvar RefCountOperator = /*@__PURE__*/ (function () {\n    function RefCountOperator(connectable) {\n        this.connectable = connectable;\n    }\n    RefCountOperator.prototype.call = function (subscriber, source) {\n        var connectable = this.connectable;\n        connectable._refCount++;\n        var refCounter = new RefCountSubscriber(subscriber, connectable);\n        var subscription = source.subscribe(refCounter);\n        if (!refCounter.closed) {\n            refCounter.connection = connectable.connect();\n        }\n        return subscription;\n    };\n    return RefCountOperator;\n}());\nvar RefCountSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(RefCountSubscriber, _super);\n    function RefCountSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    RefCountSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (!connectable) {\n            this.connection = null;\n            return;\n        }\n        this.connectable = null;\n        var refCount = connectable._refCount;\n        if (refCount <= 0) {\n            this.connection = null;\n            return;\n        }\n        connectable._refCount = refCount - 1;\n        if (refCount > 1) {\n            this.connection = null;\n            return;\n        }\n        var connection = this.connection;\n        var sharedConnection = connectable._connection;\n        this.connection = null;\n        if (sharedConnection && (!connection || sharedConnection === connection)) {\n            sharedConnection.unsubscribe();\n        }\n    };\n    return RefCountSubscriber;\n}(Subscriber));\n//# sourceMappingURL=refCount.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_Observable,_Subscriber,_Subscription,_operators_refCount PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { SubjectSubscriber } from '../Subject';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { refCount as higherOrderRefCount } from '../operators/refCount';\nvar ConnectableObservable = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ConnectableObservable, _super);\n    function ConnectableObservable(source, subjectFactory) {\n        var _this = _super.call(this) || this;\n        _this.source = source;\n        _this.subjectFactory = subjectFactory;\n        _this._refCount = 0;\n        _this._isComplete = false;\n        return _this;\n    }\n    ConnectableObservable.prototype._subscribe = function (subscriber) {\n        return this.getSubject().subscribe(subscriber);\n    };\n    ConnectableObservable.prototype.getSubject = function () {\n        var subject = this._subject;\n        if (!subject || subject.isStopped) {\n            this._subject = this.subjectFactory();\n        }\n        return this._subject;\n    };\n    ConnectableObservable.prototype.connect = function () {\n        var connection = this._connection;\n        if (!connection) {\n            this._isComplete = false;\n            connection = this._connection = new Subscription();\n            connection.add(this.source\n                .subscribe(new ConnectableSubscriber(this.getSubject(), this)));\n            if (connection.closed) {\n                this._connection = null;\n                connection = Subscription.EMPTY;\n            }\n        }\n        return connection;\n    };\n    ConnectableObservable.prototype.refCount = function () {\n        return higherOrderRefCount()(this);\n    };\n    return ConnectableObservable;\n}(Observable));\nexport { ConnectableObservable };\nexport var connectableObservableDescriptor = /*@__PURE__*/ (function () {\n    var connectableProto = ConnectableObservable.prototype;\n    return {\n        operator: { value: null },\n        _refCount: { value: 0, writable: true },\n        _subject: { value: null, writable: true },\n        _connection: { value: null, writable: true },\n        _subscribe: { value: connectableProto._subscribe },\n        _isComplete: { value: connectableProto._isComplete, writable: true },\n        getSubject: { value: connectableProto.getSubject },\n        connect: { value: connectableProto.connect },\n        refCount: { value: connectableProto.refCount }\n    };\n})();\nvar ConnectableSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ConnectableSubscriber, _super);\n    function ConnectableSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    ConnectableSubscriber.prototype._error = function (err) {\n        this._unsubscribe();\n        _super.prototype._error.call(this, err);\n    };\n    ConnectableSubscriber.prototype._complete = function () {\n        this.connectable._isComplete = true;\n        this._unsubscribe();\n        _super.prototype._complete.call(this);\n    };\n    ConnectableSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (connectable) {\n            this.connectable = null;\n            var connection = connectable._connection;\n            connectable._refCount = 0;\n            connectable._subject = null;\n            connectable._connection = null;\n            if (connection) {\n                connection.unsubscribe();\n            }\n        }\n    };\n    return ConnectableSubscriber;\n}(SubjectSubscriber));\nvar RefCountOperator = /*@__PURE__*/ (function () {\n    function RefCountOperator(connectable) {\n        this.connectable = connectable;\n    }\n    RefCountOperator.prototype.call = function (subscriber, source) {\n        var connectable = this.connectable;\n        connectable._refCount++;\n        var refCounter = new RefCountSubscriber(subscriber, connectable);\n        var subscription = source.subscribe(refCounter);\n        if (!refCounter.closed) {\n            refCounter.connection = connectable.connect();\n        }\n        return subscription;\n    };\n    return RefCountOperator;\n}());\nvar RefCountSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(RefCountSubscriber, _super);\n    function RefCountSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    RefCountSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (!connectable) {\n            this.connection = null;\n            return;\n        }\n        this.connectable = null;\n        var refCount = connectable._refCount;\n        if (refCount <= 0) {\n            this.connection = null;\n            return;\n        }\n        connectable._refCount = refCount - 1;\n        if (refCount > 1) {\n            this.connection = null;\n            return;\n        }\n        var connection = this.connection;\n        var sharedConnection = connectable._connection;\n        this.connection = null;\n        if (sharedConnection && (!connection || sharedConnection === connection)) {\n            sharedConnection.unsubscribe();\n        }\n    };\n    return RefCountSubscriber;\n}(Subscriber));\n//# sourceMappingURL=ConnectableObservable.js.map\n","/** PURE_IMPORTS_START tslib,_Action PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Action } from './Action';\nvar AsyncAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncAction, _super);\n    function AsyncAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.pending = false;\n        return _this;\n    }\n    AsyncAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (this.closed) {\n            return this;\n        }\n        this.state = state;\n        var id = this.id;\n        var scheduler = this.scheduler;\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        this.pending = true;\n        this.delay = delay;\n        this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    };\n    AsyncAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return setInterval(scheduler.flush.bind(scheduler, this), delay);\n    };\n    AsyncAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay !== null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        clearInterval(id);\n        return undefined;\n    };\n    AsyncAction.prototype.execute = function (state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        var error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    };\n    AsyncAction.prototype._execute = function (state, delay) {\n        var errored = false;\n        var errorValue = undefined;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = !!e && e || new Error(e);\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    };\n    AsyncAction.prototype._unsubscribe = function () {\n        var id = this.id;\n        var scheduler = this.scheduler;\n        var actions = scheduler.actions;\n        var index = actions.indexOf(this);\n        this.work = null;\n        this.state = null;\n        this.pending = false;\n        this.scheduler = null;\n        if (index !== -1) {\n            actions.splice(index, 1);\n        }\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, null);\n        }\n        this.delay = null;\n    };\n    return AsyncAction;\n}(Action));\nexport { AsyncAction };\n//# sourceMappingURL=AsyncAction.js.map\n","/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscription } from '../Subscription';\nvar Action = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Action, _super);\n    function Action(scheduler, work) {\n        return _super.call(this) || this;\n    }\n    Action.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return this;\n    };\n    return Action;\n}(Subscription));\nexport { Action };\n//# sourceMappingURL=Action.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncAction PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncAction } from './AsyncAction';\nvar QueueAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(QueueAction, _super);\n    function QueueAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    QueueAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay > 0) {\n            return _super.prototype.schedule.call(this, state, delay);\n        }\n        this.delay = delay;\n        this.state = state;\n        this.scheduler.flush(this);\n        return this;\n    };\n    QueueAction.prototype.execute = function (state, delay) {\n        return (delay > 0 || this.closed) ?\n            _super.prototype.execute.call(this, state, delay) :\n            this._execute(state, delay);\n    };\n    QueueAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        return scheduler.flush(this);\n    };\n    return QueueAction;\n}(AsyncAction));\nexport { QueueAction };\n//# sourceMappingURL=QueueAction.js.map\n","var Scheduler = /*@__PURE__*/ (function () {\n    function Scheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        this.SchedulerAction = SchedulerAction;\n        this.now = now;\n    }\n    Scheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return new this.SchedulerAction(this, work).schedule(state, delay);\n    };\n    Scheduler.now = function () { return Date.now(); };\n    return Scheduler;\n}());\nexport { Scheduler };\n//# sourceMappingURL=Scheduler.js.map\n","/** PURE_IMPORTS_START tslib,_Scheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Scheduler } from '../Scheduler';\nvar AsyncScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncScheduler, _super);\n    function AsyncScheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        var _this = _super.call(this, SchedulerAction, function () {\n            if (AsyncScheduler.delegate && AsyncScheduler.delegate !== _this) {\n                return AsyncScheduler.delegate.now();\n            }\n            else {\n                return now();\n            }\n        }) || this;\n        _this.actions = [];\n        _this.active = false;\n        _this.scheduled = undefined;\n        return _this;\n    }\n    AsyncScheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (AsyncScheduler.delegate && AsyncScheduler.delegate !== this) {\n            return AsyncScheduler.delegate.schedule(work, delay, state);\n        }\n        else {\n            return _super.prototype.schedule.call(this, work, delay, state);\n        }\n    };\n    AsyncScheduler.prototype.flush = function (action) {\n        var actions = this.actions;\n        if (this.active) {\n            actions.push(action);\n            return;\n        }\n        var error;\n        this.active = true;\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (action = actions.shift());\n        this.active = false;\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsyncScheduler;\n}(Scheduler));\nexport { AsyncScheduler };\n//# sourceMappingURL=AsyncScheduler.js.map\n","/** PURE_IMPORTS_START _QueueAction,_QueueScheduler PURE_IMPORTS_END */\nimport { QueueAction } from './QueueAction';\nimport { QueueScheduler } from './QueueScheduler';\nexport var queueScheduler = /*@__PURE__*/ new QueueScheduler(QueueAction);\nexport var queue = queueScheduler;\n//# sourceMappingURL=queue.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncScheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncScheduler } from './AsyncScheduler';\nvar QueueScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(QueueScheduler, _super);\n    function QueueScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return QueueScheduler;\n}(AsyncScheduler));\nexport { QueueScheduler };\n//# sourceMappingURL=QueueScheduler.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport var EMPTY = /*@__PURE__*/ new Observable(function (subscriber) { return subscriber.complete(); });\nexport function empty(scheduler) {\n    return scheduler ? emptyScheduled(scheduler) : EMPTY;\n}\nfunction emptyScheduled(scheduler) {\n    return new Observable(function (subscriber) { return scheduler.schedule(function () { return subscriber.complete(); }); });\n}\n//# sourceMappingURL=empty.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isScheduler(value) {\n    return value && typeof value.schedule === 'function';\n}\n//# sourceMappingURL=isScheduler.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var subscribeToArray = function (array) {\n    return function (subscriber) {\n        for (var i = 0, len = array.length; i < len && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    };\n};\n//# sourceMappingURL=subscribeToArray.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nexport function scheduleArray(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        var i = 0;\n        sub.add(scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n                return;\n            }\n            subscriber.next(input[i++]);\n            if (!subscriber.closed) {\n                sub.add(this.schedule());\n            }\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleArray.js.map\n","/** PURE_IMPORTS_START _Observable,_util_subscribeToArray,_scheduled_scheduleArray PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { subscribeToArray } from '../util/subscribeToArray';\nimport { scheduleArray } from '../scheduled/scheduleArray';\nexport function fromArray(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToArray(input));\n    }\n    else {\n        return scheduleArray(input, scheduler);\n    }\n}\n//# sourceMappingURL=fromArray.js.map\n","/** PURE_IMPORTS_START _util_isScheduler,_fromArray,_scheduled_scheduleArray PURE_IMPORTS_END */\nimport { isScheduler } from '../util/isScheduler';\nimport { fromArray } from './fromArray';\nimport { scheduleArray } from '../scheduled/scheduleArray';\nexport function of() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = args[args.length - 1];\n    if (isScheduler(scheduler)) {\n        args.pop();\n        return scheduleArray(args, scheduler);\n    }\n    else {\n        return fromArray(args);\n    }\n}\n//# sourceMappingURL=of.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport function throwError(error, scheduler) {\n    if (!scheduler) {\n        return new Observable(function (subscriber) { return subscriber.error(error); });\n    }\n    else {\n        return new Observable(function (subscriber) { return scheduler.schedule(dispatch, 0, { error: error, subscriber: subscriber }); });\n    }\n}\nfunction dispatch(_a) {\n    var error = _a.error, subscriber = _a.subscriber;\n    subscriber.error(error);\n}\n//# sourceMappingURL=throwError.js.map\n","/** PURE_IMPORTS_START _observable_empty,_observable_of,_observable_throwError PURE_IMPORTS_END */\nimport { empty } from './observable/empty';\nimport { of } from './observable/of';\nimport { throwError } from './observable/throwError';\nexport var NotificationKind;\n/*@__PURE__*/ (function (NotificationKind) {\n    NotificationKind[\"NEXT\"] = \"N\";\n    NotificationKind[\"ERROR\"] = \"E\";\n    NotificationKind[\"COMPLETE\"] = \"C\";\n})(NotificationKind || (NotificationKind = {}));\nvar Notification = /*@__PURE__*/ (function () {\n    function Notification(kind, value, error) {\n        this.kind = kind;\n        this.value = value;\n        this.error = error;\n        this.hasValue = kind === 'N';\n    }\n    Notification.prototype.observe = function (observer) {\n        switch (this.kind) {\n            case 'N':\n                return observer.next && observer.next(this.value);\n            case 'E':\n                return observer.error && observer.error(this.error);\n            case 'C':\n                return observer.complete && observer.complete();\n        }\n    };\n    Notification.prototype.do = function (next, error, complete) {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return next && next(this.value);\n            case 'E':\n                return error && error(this.error);\n            case 'C':\n                return complete && complete();\n        }\n    };\n    Notification.prototype.accept = function (nextOrObserver, error, complete) {\n        if (nextOrObserver && typeof nextOrObserver.next === 'function') {\n            return this.observe(nextOrObserver);\n        }\n        else {\n            return this.do(nextOrObserver, error, complete);\n        }\n    };\n    Notification.prototype.toObservable = function () {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return of(this.value);\n            case 'E':\n                return throwError(this.error);\n            case 'C':\n                return empty();\n        }\n        throw new Error('unexpected notification kind value');\n    };\n    Notification.createNext = function (value) {\n        if (typeof value !== 'undefined') {\n            return new Notification('N', value);\n        }\n        return Notification.undefinedValueNotification;\n    };\n    Notification.createError = function (err) {\n        return new Notification('E', undefined, err);\n    };\n    Notification.createComplete = function () {\n        return Notification.completeNotification;\n    };\n    Notification.completeNotification = new Notification('C');\n    Notification.undefinedValueNotification = new Notification('N', undefined);\n    return Notification;\n}());\nexport { Notification };\n//# sourceMappingURL=Notification.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_Notification PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { Notification } from '../Notification';\nexport function observeOn(scheduler, delay) {\n    if (delay === void 0) {\n        delay = 0;\n    }\n    return function observeOnOperatorFunction(source) {\n        return source.lift(new ObserveOnOperator(scheduler, delay));\n    };\n}\nvar ObserveOnOperator = /*@__PURE__*/ (function () {\n    function ObserveOnOperator(scheduler, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        this.scheduler = scheduler;\n        this.delay = delay;\n    }\n    ObserveOnOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new ObserveOnSubscriber(subscriber, this.scheduler, this.delay));\n    };\n    return ObserveOnOperator;\n}());\nexport { ObserveOnOperator };\nvar ObserveOnSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ObserveOnSubscriber, _super);\n    function ObserveOnSubscriber(destination, scheduler, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        var _this = _super.call(this, destination) || this;\n        _this.scheduler = scheduler;\n        _this.delay = delay;\n        return _this;\n    }\n    ObserveOnSubscriber.dispatch = function (arg) {\n        var notification = arg.notification, destination = arg.destination;\n        notification.observe(destination);\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype.scheduleMessage = function (notification) {\n        var destination = this.destination;\n        destination.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch, this.delay, new ObserveOnMessage(notification, this.destination)));\n    };\n    ObserveOnSubscriber.prototype._next = function (value) {\n        this.scheduleMessage(Notification.createNext(value));\n    };\n    ObserveOnSubscriber.prototype._error = function (err) {\n        this.scheduleMessage(Notification.createError(err));\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype._complete = function () {\n        this.scheduleMessage(Notification.createComplete());\n        this.unsubscribe();\n    };\n    return ObserveOnSubscriber;\n}(Subscriber));\nexport { ObserveOnSubscriber };\nvar ObserveOnMessage = /*@__PURE__*/ (function () {\n    function ObserveOnMessage(notification, destination) {\n        this.notification = notification;\n        this.destination = destination;\n    }\n    return ObserveOnMessage;\n}());\nexport { ObserveOnMessage };\n//# sourceMappingURL=observeOn.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_scheduler_queue,_Subscription,_operators_observeOn,_util_ObjectUnsubscribedError,_SubjectSubscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from './Subject';\nimport { queue } from './scheduler/queue';\nimport { Subscription } from './Subscription';\nimport { ObserveOnSubscriber } from './operators/observeOn';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nvar ReplaySubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ReplaySubject, _super);\n    function ReplaySubject(bufferSize, windowTime, scheduler) {\n        if (bufferSize === void 0) {\n            bufferSize = Number.POSITIVE_INFINITY;\n        }\n        if (windowTime === void 0) {\n            windowTime = Number.POSITIVE_INFINITY;\n        }\n        var _this = _super.call(this) || this;\n        _this.scheduler = scheduler;\n        _this._events = [];\n        _this._infiniteTimeWindow = false;\n        _this._bufferSize = bufferSize < 1 ? 1 : bufferSize;\n        _this._windowTime = windowTime < 1 ? 1 : windowTime;\n        if (windowTime === Number.POSITIVE_INFINITY) {\n            _this._infiniteTimeWindow = true;\n            _this.next = _this.nextInfiniteTimeWindow;\n        }\n        else {\n            _this.next = _this.nextTimeWindow;\n        }\n        return _this;\n    }\n    ReplaySubject.prototype.nextInfiniteTimeWindow = function (value) {\n        if (!this.isStopped) {\n            var _events = this._events;\n            _events.push(value);\n            if (_events.length > this._bufferSize) {\n                _events.shift();\n            }\n        }\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype.nextTimeWindow = function (value) {\n        if (!this.isStopped) {\n            this._events.push(new ReplayEvent(this._getNow(), value));\n            this._trimBufferThenGetEvents();\n        }\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype._subscribe = function (subscriber) {\n        var _infiniteTimeWindow = this._infiniteTimeWindow;\n        var _events = _infiniteTimeWindow ? this._events : this._trimBufferThenGetEvents();\n        var scheduler = this.scheduler;\n        var len = _events.length;\n        var subscription;\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.isStopped || this.hasError) {\n            subscription = Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            subscription = new SubjectSubscription(this, subscriber);\n        }\n        if (scheduler) {\n            subscriber.add(subscriber = new ObserveOnSubscriber(subscriber, scheduler));\n        }\n        if (_infiniteTimeWindow) {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i]);\n            }\n        }\n        else {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i].value);\n            }\n        }\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n        }\n        return subscription;\n    };\n    ReplaySubject.prototype._getNow = function () {\n        return (this.scheduler || queue).now();\n    };\n    ReplaySubject.prototype._trimBufferThenGetEvents = function () {\n        var now = this._getNow();\n        var _bufferSize = this._bufferSize;\n        var _windowTime = this._windowTime;\n        var _events = this._events;\n        var eventsCount = _events.length;\n        var spliceCount = 0;\n        while (spliceCount < eventsCount) {\n            if ((now - _events[spliceCount].time) < _windowTime) {\n                break;\n            }\n            spliceCount++;\n        }\n        if (eventsCount > _bufferSize) {\n            spliceCount = Math.max(spliceCount, eventsCount - _bufferSize);\n        }\n        if (spliceCount > 0) {\n            _events.splice(0, spliceCount);\n        }\n        return _events;\n    };\n    return ReplaySubject;\n}(Subject));\nexport { ReplaySubject };\nvar ReplayEvent = /*@__PURE__*/ (function () {\n    function ReplayEvent(time, value) {\n        this.time = time;\n        this.value = value;\n    }\n    return ReplayEvent;\n}());\n//# sourceMappingURL=ReplaySubject.js.map\n","/** PURE_IMPORTS_START _AsyncAction,_AsyncScheduler PURE_IMPORTS_END */\nimport { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\nexport var asyncScheduler = /*@__PURE__*/ new AsyncScheduler(AsyncAction);\nexport var async = asyncScheduler;\n//# sourceMappingURL=async.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function noop() { }\n//# sourceMappingURL=noop.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar ArgumentOutOfRangeErrorImpl = /*@__PURE__*/ (function () {\n    function ArgumentOutOfRangeErrorImpl() {\n        Error.call(this);\n        this.message = 'argument out of range';\n        this.name = 'ArgumentOutOfRangeError';\n        return this;\n    }\n    ArgumentOutOfRangeErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return ArgumentOutOfRangeErrorImpl;\n})();\nexport var ArgumentOutOfRangeError = ArgumentOutOfRangeErrorImpl;\n//# sourceMappingURL=ArgumentOutOfRangeError.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar EmptyErrorImpl = /*@__PURE__*/ (function () {\n    function EmptyErrorImpl() {\n        Error.call(this);\n        this.message = 'no elements in sequence';\n        this.name = 'EmptyError';\n        return this;\n    }\n    EmptyErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return EmptyErrorImpl;\n})();\nexport var EmptyError = EmptyErrorImpl;\n//# sourceMappingURL=EmptyError.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar TimeoutErrorImpl = /*@__PURE__*/ (function () {\n    function TimeoutErrorImpl() {\n        Error.call(this);\n        this.message = 'Timeout has occurred';\n        this.name = 'TimeoutError';\n        return this;\n    }\n    TimeoutErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return TimeoutErrorImpl;\n})();\nexport var TimeoutError = TimeoutErrorImpl;\n//# sourceMappingURL=TimeoutError.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function map(project, thisArg) {\n    return function mapOperation(source) {\n        if (typeof project !== 'function') {\n            throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n        }\n        return source.lift(new MapOperator(project, thisArg));\n    };\n}\nvar MapOperator = /*@__PURE__*/ (function () {\n    function MapOperator(project, thisArg) {\n        this.project = project;\n        this.thisArg = thisArg;\n    }\n    MapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n    };\n    return MapOperator;\n}());\nexport { MapOperator };\nvar MapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(MapSubscriber, _super);\n    function MapSubscriber(destination, project, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.count = 0;\n        _this.thisArg = thisArg || _this;\n        return _this;\n    }\n    MapSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.project.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return MapSubscriber;\n}(Subscriber));\n//# sourceMappingURL=map.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from './Subscriber';\nvar OuterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(OuterSubscriber, _super);\n    function OuterSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OuterSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    OuterSubscriber.prototype.notifyError = function (error, innerSub) {\n        this.destination.error(error);\n    };\n    OuterSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.destination.complete();\n    };\n    return OuterSubscriber;\n}(Subscriber));\nexport { OuterSubscriber };\n//# sourceMappingURL=OuterSubscriber.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from './Subscriber';\nvar InnerSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(InnerSubscriber, _super);\n    function InnerSubscriber(parent, outerValue, outerIndex) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.outerValue = outerValue;\n        _this.outerIndex = outerIndex;\n        _this.index = 0;\n        return _this;\n    }\n    InnerSubscriber.prototype._next = function (value) {\n        this.parent.notifyNext(this.outerValue, value, this.outerIndex, this.index++, this);\n    };\n    InnerSubscriber.prototype._error = function (error) {\n        this.parent.notifyError(error, this);\n        this.unsubscribe();\n    };\n    InnerSubscriber.prototype._complete = function () {\n        this.parent.notifyComplete(this);\n        this.unsubscribe();\n    };\n    return InnerSubscriber;\n}(Subscriber));\nexport { InnerSubscriber };\n//# sourceMappingURL=InnerSubscriber.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = /*@__PURE__*/ getSymbolIterator();\nexport var $$iterator = iterator;\n//# sourceMappingURL=iterator.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isPromise(value) {\n    return !!value && typeof value.subscribe !== 'function' && typeof value.then === 'function';\n}\n//# sourceMappingURL=isPromise.js.map\n","/** PURE_IMPORTS_START _subscribeToArray,_subscribeToPromise,_subscribeToIterable,_subscribeToObservable,_isArrayLike,_isPromise,_isObject,_symbol_iterator,_symbol_observable PURE_IMPORTS_END */\nimport { subscribeToArray } from './subscribeToArray';\nimport { subscribeToPromise } from './subscribeToPromise';\nimport { subscribeToIterable } from './subscribeToIterable';\nimport { subscribeToObservable } from './subscribeToObservable';\nimport { isArrayLike } from './isArrayLike';\nimport { isPromise } from './isPromise';\nimport { isObject } from './isObject';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport var subscribeTo = function (result) {\n    if (!!result && typeof result[Symbol_observable] === 'function') {\n        return subscribeToObservable(result);\n    }\n    else if (isArrayLike(result)) {\n        return subscribeToArray(result);\n    }\n    else if (isPromise(result)) {\n        return subscribeToPromise(result);\n    }\n    else if (!!result && typeof result[Symbol_iterator] === 'function') {\n        return subscribeToIterable(result);\n    }\n    else {\n        var value = isObject(result) ? 'an invalid object' : \"'\" + result + \"'\";\n        var msg = \"You provided \" + value + \" where a stream was expected.\"\n            + ' You can provide an Observable, Promise, Array, or Iterable.';\n        throw new TypeError(msg);\n    }\n};\n//# sourceMappingURL=subscribeTo.js.map\n","/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport var subscribeToObservable = function (obj) {\n    return function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (typeof obs.subscribe !== 'function') {\n            throw new TypeError('Provided object does not correctly implement Symbol.observable');\n        }\n        else {\n            return obs.subscribe(subscriber);\n        }\n    };\n};\n//# sourceMappingURL=subscribeToObservable.js.map\n","/** PURE_IMPORTS_START _hostReportError PURE_IMPORTS_END */\nimport { hostReportError } from './hostReportError';\nexport var subscribeToPromise = function (promise) {\n    return function (subscriber) {\n        promise.then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, hostReportError);\n        return subscriber;\n    };\n};\n//# sourceMappingURL=subscribeToPromise.js.map\n","/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport var subscribeToIterable = function (iterable) {\n    return function (subscriber) {\n        var iterator = iterable[Symbol_iterator]();\n        do {\n            var item = void 0;\n            try {\n                item = iterator.next();\n            }\n            catch (err) {\n                subscriber.error(err);\n                return subscriber;\n            }\n            if (item.done) {\n                subscriber.complete();\n                break;\n            }\n            subscriber.next(item.value);\n            if (subscriber.closed) {\n                break;\n            }\n        } while (true);\n        if (typeof iterator.return === 'function') {\n            subscriber.add(function () {\n                if (iterator.return) {\n                    iterator.return();\n                }\n            });\n        }\n        return subscriber;\n    };\n};\n//# sourceMappingURL=subscribeToIterable.js.map\n","/** PURE_IMPORTS_START _InnerSubscriber,_subscribeTo,_Observable PURE_IMPORTS_END */\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeTo } from './subscribeTo';\nimport { Observable } from '../Observable';\nexport function subscribeToResult(outerSubscriber, result, outerValue, outerIndex, innerSubscriber) {\n    if (innerSubscriber === void 0) {\n        innerSubscriber = new InnerSubscriber(outerSubscriber, outerValue, outerIndex);\n    }\n    if (innerSubscriber.closed) {\n        return undefined;\n    }\n    if (result instanceof Observable) {\n        return result.subscribe(innerSubscriber);\n    }\n    return subscribeTo(result)(innerSubscriber);\n}\n//# sourceMappingURL=subscribeToResult.js.map\n","/** PURE_IMPORTS_START _scheduleObservable,_schedulePromise,_scheduleArray,_scheduleIterable,_util_isInteropObservable,_util_isPromise,_util_isArrayLike,_util_isIterable PURE_IMPORTS_END */\nimport { scheduleObservable } from './scheduleObservable';\nimport { schedulePromise } from './schedulePromise';\nimport { scheduleArray } from './scheduleArray';\nimport { scheduleIterable } from './scheduleIterable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isPromise } from '../util/isPromise';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isIterable } from '../util/isIterable';\nexport function scheduled(input, scheduler) {\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return scheduleObservable(input, scheduler);\n        }\n        else if (isPromise(input)) {\n            return schedulePromise(input, scheduler);\n        }\n        else if (isArrayLike(input)) {\n            return scheduleArray(input, scheduler);\n        }\n        else if (isIterable(input) || typeof input === 'string') {\n            return scheduleIterable(input, scheduler);\n        }\n    }\n    throw new TypeError((input !== null && typeof input || input) + ' is not observable');\n}\n//# sourceMappingURL=scheduled.js.map\n","/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function isInteropObservable(input) {\n    return input && typeof input[Symbol_observable] === 'function';\n}\n//# sourceMappingURL=isInteropObservable.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function scheduleObservable(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        sub.add(scheduler.schedule(function () {\n            var observable = input[Symbol_observable]();\n            sub.add(observable.subscribe({\n                next: function (value) { sub.add(scheduler.schedule(function () { return subscriber.next(value); })); },\n                error: function (err) { sub.add(scheduler.schedule(function () { return subscriber.error(err); })); },\n                complete: function () { sub.add(scheduler.schedule(function () { return subscriber.complete(); })); },\n            }));\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleObservable.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nexport function schedulePromise(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        sub.add(scheduler.schedule(function () {\n            return input.then(function (value) {\n                sub.add(scheduler.schedule(function () {\n                    subscriber.next(value);\n                    sub.add(scheduler.schedule(function () { return subscriber.complete(); }));\n                }));\n            }, function (err) {\n                sub.add(scheduler.schedule(function () { return subscriber.error(err); }));\n            });\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=schedulePromise.js.map\n","/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport function isIterable(input) {\n    return input && typeof input[Symbol_iterator] === 'function';\n}\n//# sourceMappingURL=isIterable.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_iterator PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport function scheduleIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        var iterator;\n        sub.add(function () {\n            if (iterator && typeof iterator.return === 'function') {\n                iterator.return();\n            }\n        });\n        sub.add(scheduler.schedule(function () {\n            iterator = input[Symbol_iterator]();\n            sub.add(scheduler.schedule(function () {\n                if (subscriber.closed) {\n                    return;\n                }\n                var value;\n                var done;\n                try {\n                    var result = iterator.next();\n                    value = result.value;\n                    done = result.done;\n                }\n                catch (err) {\n                    subscriber.error(err);\n                    return;\n                }\n                if (done) {\n                    subscriber.complete();\n                }\n                else {\n                    subscriber.next(value);\n                    this.schedule();\n                }\n            }));\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleIterable.js.map\n","/** PURE_IMPORTS_START _Observable,_util_subscribeTo,_scheduled_scheduled PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { subscribeTo } from '../util/subscribeTo';\nimport { scheduled } from '../scheduled/scheduled';\nexport function from(input, scheduler) {\n    if (!scheduler) {\n        if (input instanceof Observable) {\n            return input;\n        }\n        return new Observable(subscribeTo(input));\n    }\n    else {\n        return scheduled(input, scheduler);\n    }\n}\n//# sourceMappingURL=from.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_Observable,_util_subscribeTo PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from './Subscriber';\nimport { Observable } from './Observable';\nimport { subscribeTo } from './util/subscribeTo';\nvar SimpleInnerSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SimpleInnerSubscriber, _super);\n    function SimpleInnerSubscriber(parent) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        return _this;\n    }\n    SimpleInnerSubscriber.prototype._next = function (value) {\n        this.parent.notifyNext(value);\n    };\n    SimpleInnerSubscriber.prototype._error = function (error) {\n        this.parent.notifyError(error);\n        this.unsubscribe();\n    };\n    SimpleInnerSubscriber.prototype._complete = function () {\n        this.parent.notifyComplete();\n        this.unsubscribe();\n    };\n    return SimpleInnerSubscriber;\n}(Subscriber));\nexport { SimpleInnerSubscriber };\nvar ComplexInnerSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ComplexInnerSubscriber, _super);\n    function ComplexInnerSubscriber(parent, outerValue, outerIndex) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.outerValue = outerValue;\n        _this.outerIndex = outerIndex;\n        return _this;\n    }\n    ComplexInnerSubscriber.prototype._next = function (value) {\n        this.parent.notifyNext(this.outerValue, value, this.outerIndex, this);\n    };\n    ComplexInnerSubscriber.prototype._error = function (error) {\n        this.parent.notifyError(error);\n        this.unsubscribe();\n    };\n    ComplexInnerSubscriber.prototype._complete = function () {\n        this.parent.notifyComplete(this);\n        this.unsubscribe();\n    };\n    return ComplexInnerSubscriber;\n}(Subscriber));\nexport { ComplexInnerSubscriber };\nvar SimpleOuterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SimpleOuterSubscriber, _super);\n    function SimpleOuterSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SimpleOuterSubscriber.prototype.notifyNext = function (innerValue) {\n        this.destination.next(innerValue);\n    };\n    SimpleOuterSubscriber.prototype.notifyError = function (err) {\n        this.destination.error(err);\n    };\n    SimpleOuterSubscriber.prototype.notifyComplete = function () {\n        this.destination.complete();\n    };\n    return SimpleOuterSubscriber;\n}(Subscriber));\nexport { SimpleOuterSubscriber };\nvar ComplexOuterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ComplexOuterSubscriber, _super);\n    function ComplexOuterSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ComplexOuterSubscriber.prototype.notifyNext = function (_outerValue, innerValue, _outerIndex, _innerSub) {\n        this.destination.next(innerValue);\n    };\n    ComplexOuterSubscriber.prototype.notifyError = function (error) {\n        this.destination.error(error);\n    };\n    ComplexOuterSubscriber.prototype.notifyComplete = function (_innerSub) {\n        this.destination.complete();\n    };\n    return ComplexOuterSubscriber;\n}(Subscriber));\nexport { ComplexOuterSubscriber };\nexport function innerSubscribe(result, innerSubscriber) {\n    if (innerSubscriber.closed) {\n        return undefined;\n    }\n    if (result instanceof Observable) {\n        return result.subscribe(innerSubscriber);\n    }\n    var subscription;\n    try {\n        subscription = subscribeTo(result)(innerSubscriber);\n    }\n    catch (error) {\n        innerSubscriber.error(error);\n    }\n    return subscription;\n}\n//# sourceMappingURL=innerSubscribe.js.map\n","/** PURE_IMPORTS_START tslib,_map,_observable_from,_innerSubscribe PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { map } from './map';\nimport { from } from '../observable/from';\nimport { SimpleOuterSubscriber, SimpleInnerSubscriber, innerSubscribe } from '../innerSubscribe';\nexport function mergeMap(project, resultSelector, concurrent) {\n    if (concurrent === void 0) {\n        concurrent = Number.POSITIVE_INFINITY;\n    }\n    if (typeof resultSelector === 'function') {\n        return function (source) { return source.pipe(mergeMap(function (a, i) { return from(project(a, i)).pipe(map(function (b, ii) { return resultSelector(a, b, i, ii); })); }, concurrent)); };\n    }\n    else if (typeof resultSelector === 'number') {\n        concurrent = resultSelector;\n    }\n    return function (source) { return source.lift(new MergeMapOperator(project, concurrent)); };\n}\nvar MergeMapOperator = /*@__PURE__*/ (function () {\n    function MergeMapOperator(project, concurrent) {\n        if (concurrent === void 0) {\n            concurrent = Number.POSITIVE_INFINITY;\n        }\n        this.project = project;\n        this.concurrent = concurrent;\n    }\n    MergeMapOperator.prototype.call = function (observer, source) {\n        return source.subscribe(new MergeMapSubscriber(observer, this.project, this.concurrent));\n    };\n    return MergeMapOperator;\n}());\nexport { MergeMapOperator };\nvar MergeMapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(MergeMapSubscriber, _super);\n    function MergeMapSubscriber(destination, project, concurrent) {\n        if (concurrent === void 0) {\n            concurrent = Number.POSITIVE_INFINITY;\n        }\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.concurrent = concurrent;\n        _this.hasCompleted = false;\n        _this.buffer = [];\n        _this.active = 0;\n        _this.index = 0;\n        return _this;\n    }\n    MergeMapSubscriber.prototype._next = function (value) {\n        if (this.active < this.concurrent) {\n            this._tryNext(value);\n        }\n        else {\n            this.buffer.push(value);\n        }\n    };\n    MergeMapSubscriber.prototype._tryNext = function (value) {\n        var result;\n        var index = this.index++;\n        try {\n            result = this.project(value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.active++;\n        this._innerSub(result);\n    };\n    MergeMapSubscriber.prototype._innerSub = function (ish) {\n        var innerSubscriber = new SimpleInnerSubscriber(this);\n        var destination = this.destination;\n        destination.add(innerSubscriber);\n        var innerSubscription = innerSubscribe(ish, innerSubscriber);\n        if (innerSubscription !== innerSubscriber) {\n            destination.add(innerSubscription);\n        }\n    };\n    MergeMapSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (this.active === 0 && this.buffer.length === 0) {\n            this.destination.complete();\n        }\n        this.unsubscribe();\n    };\n    MergeMapSubscriber.prototype.notifyNext = function (innerValue) {\n        this.destination.next(innerValue);\n    };\n    MergeMapSubscriber.prototype.notifyComplete = function () {\n        var buffer = this.buffer;\n        this.active--;\n        if (buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        else if (this.active === 0 && this.hasCompleted) {\n            this.destination.complete();\n        }\n    };\n    return MergeMapSubscriber;\n}(SimpleOuterSubscriber));\nexport { MergeMapSubscriber };\nexport var flatMap = mergeMap;\n//# sourceMappingURL=mergeMap.js.map\n","/** PURE_IMPORTS_START _mergeMap,_util_identity PURE_IMPORTS_END */\nimport { mergeMap } from './mergeMap';\nimport { identity } from '../util/identity';\nexport function mergeAll(concurrent) {\n    if (concurrent === void 0) {\n        concurrent = Number.POSITIVE_INFINITY;\n    }\n    return mergeMap(identity, concurrent);\n}\n//# sourceMappingURL=mergeAll.js.map\n","/** PURE_IMPORTS_START _Observable,_util_isArray,_util_isFunction,_operators_map PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { isFunction } from '../util/isFunction';\nimport { map } from '../operators/map';\nexport function fromEventPattern(addHandler, removeHandler, resultSelector) {\n    if (resultSelector) {\n        return fromEventPattern(addHandler, removeHandler).pipe(map(function (args) { return isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args); }));\n    }\n    return new Observable(function (subscriber) {\n        var handler = function () {\n            var e = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                e[_i] = arguments[_i];\n            }\n            return subscriber.next(e.length === 1 ? e[0] : e);\n        };\n        var retValue;\n        try {\n            retValue = addHandler(handler);\n        }\n        catch (err) {\n            subscriber.error(err);\n            return undefined;\n        }\n        if (!isFunction(removeHandler)) {\n            return undefined;\n        }\n        return function () { return removeHandler(handler, retValue); };\n    });\n}\n//# sourceMappingURL=fromEventPattern.js.map\n","/** PURE_IMPORTS_START _Observable,_scheduler_async,_util_isNumeric PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { async } from '../scheduler/async';\nimport { isNumeric } from '../util/isNumeric';\nexport function interval(period, scheduler) {\n    if (period === void 0) {\n        period = 0;\n    }\n    if (scheduler === void 0) {\n        scheduler = async;\n    }\n    if (!isNumeric(period) || period < 0) {\n        period = 0;\n    }\n    if (!scheduler || typeof scheduler.schedule !== 'function') {\n        scheduler = async;\n    }\n    return new Observable(function (subscriber) {\n        subscriber.add(scheduler.schedule(dispatch, period, { subscriber: subscriber, counter: 0, period: period }));\n        return subscriber;\n    });\n}\nfunction dispatch(state) {\n    var subscriber = state.subscriber, counter = state.counter, period = state.period;\n    subscriber.next(counter);\n    this.schedule({ subscriber: subscriber, counter: counter + 1, period: period }, period);\n}\n//# sourceMappingURL=interval.js.map\n","/** PURE_IMPORTS_START _isArray PURE_IMPORTS_END */\nimport { isArray } from './isArray';\nexport function isNumeric(val) {\n    return !isArray(val) && (val - parseFloat(val) + 1) >= 0;\n}\n//# sourceMappingURL=isNumeric.js.map\n","/** PURE_IMPORTS_START _Observable,_util_isScheduler,_operators_mergeAll,_fromArray PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isScheduler } from '../util/isScheduler';\nimport { mergeAll } from '../operators/mergeAll';\nimport { fromArray } from './fromArray';\nexport function merge() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    var concurrent = Number.POSITIVE_INFINITY;\n    var scheduler = null;\n    var last = observables[observables.length - 1];\n    if (isScheduler(last)) {\n        scheduler = observables.pop();\n        if (observables.length > 1 && typeof observables[observables.length - 1] === 'number') {\n            concurrent = observables.pop();\n        }\n    }\n    else if (typeof last === 'number') {\n        concurrent = observables.pop();\n    }\n    if (scheduler === null && observables.length === 1 && observables[0] instanceof Observable) {\n        return observables[0];\n    }\n    return mergeAll(concurrent)(fromArray(observables, scheduler));\n}\n//# sourceMappingURL=merge.js.map\n","/** PURE_IMPORTS_START _Observable,_util_noop PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { noop } from '../util/noop';\nexport var NEVER = /*@__PURE__*/ new Observable(noop);\nexport function never() {\n    return NEVER;\n}\n//# sourceMappingURL=never.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function filter(predicate, thisArg) {\n    return function filterOperatorFunction(source) {\n        return source.lift(new FilterOperator(predicate, thisArg));\n    };\n}\nvar FilterOperator = /*@__PURE__*/ (function () {\n    function FilterOperator(predicate, thisArg) {\n        this.predicate = predicate;\n        this.thisArg = thisArg;\n    }\n    FilterOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));\n    };\n    return FilterOperator;\n}());\nvar FilterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(FilterSubscriber, _super);\n    function FilterSubscriber(destination, predicate, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.thisArg = thisArg;\n        _this.count = 0;\n        return _this;\n    }\n    FilterSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.destination.next(value);\n        }\n    };\n    return FilterSubscriber;\n}(Subscriber));\n//# sourceMappingURL=filter.js.map\n","/** PURE_IMPORTS_START tslib,_util_isArray,_fromArray,_OuterSubscriber,_util_subscribeToResult PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isArray } from '../util/isArray';\nimport { fromArray } from './fromArray';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function race() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    if (observables.length === 1) {\n        if (isArray(observables[0])) {\n            observables = observables[0];\n        }\n        else {\n            return observables[0];\n        }\n    }\n    return fromArray(observables, undefined).lift(new RaceOperator());\n}\nvar RaceOperator = /*@__PURE__*/ (function () {\n    function RaceOperator() {\n    }\n    RaceOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new RaceSubscriber(subscriber));\n    };\n    return RaceOperator;\n}());\nexport { RaceOperator };\nvar RaceSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(RaceSubscriber, _super);\n    function RaceSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.hasFirst = false;\n        _this.observables = [];\n        _this.subscriptions = [];\n        return _this;\n    }\n    RaceSubscriber.prototype._next = function (observable) {\n        this.observables.push(observable);\n    };\n    RaceSubscriber.prototype._complete = function () {\n        var observables = this.observables;\n        var len = observables.length;\n        if (len === 0) {\n            this.destination.complete();\n        }\n        else {\n            for (var i = 0; i < len && !this.hasFirst; i++) {\n                var observable = observables[i];\n                var subscription = subscribeToResult(this, observable, undefined, i);\n                if (this.subscriptions) {\n                    this.subscriptions.push(subscription);\n                }\n                this.add(subscription);\n            }\n            this.observables = null;\n        }\n    };\n    RaceSubscriber.prototype.notifyNext = function (_outerValue, innerValue, outerIndex) {\n        if (!this.hasFirst) {\n            this.hasFirst = true;\n            for (var i = 0; i < this.subscriptions.length; i++) {\n                if (i !== outerIndex) {\n                    var subscription = this.subscriptions[i];\n                    subscription.unsubscribe();\n                    this.remove(subscription);\n                }\n            }\n            this.subscriptions = null;\n        }\n        this.destination.next(innerValue);\n    };\n    return RaceSubscriber;\n}(OuterSubscriber));\nexport { RaceSubscriber };\n//# sourceMappingURL=race.js.map\n","/** PURE_IMPORTS_START tslib,_innerSubscribe PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { SimpleOuterSubscriber, SimpleInnerSubscriber, innerSubscribe } from '../innerSubscribe';\nexport function catchError(selector) {\n    return function catchErrorOperatorFunction(source) {\n        var operator = new CatchOperator(selector);\n        var caught = source.lift(operator);\n        return (operator.caught = caught);\n    };\n}\nvar CatchOperator = /*@__PURE__*/ (function () {\n    function CatchOperator(selector) {\n        this.selector = selector;\n    }\n    CatchOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new CatchSubscriber(subscriber, this.selector, this.caught));\n    };\n    return CatchOperator;\n}());\nvar CatchSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(CatchSubscriber, _super);\n    function CatchSubscriber(destination, selector, caught) {\n        var _this = _super.call(this, destination) || this;\n        _this.selector = selector;\n        _this.caught = caught;\n        return _this;\n    }\n    CatchSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var result = void 0;\n            try {\n                result = this.selector(err, this.caught);\n            }\n            catch (err2) {\n                _super.prototype.error.call(this, err2);\n                return;\n            }\n            this._unsubscribeAndRecycle();\n            var innerSubscriber = new SimpleInnerSubscriber(this);\n            this.add(innerSubscriber);\n            var innerSubscription = innerSubscribe(result, innerSubscriber);\n            if (innerSubscription !== innerSubscriber) {\n                this.add(innerSubscription);\n            }\n        }\n    };\n    return CatchSubscriber;\n}(SimpleOuterSubscriber));\n//# sourceMappingURL=catchError.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_scheduler_async PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { async } from '../scheduler/async';\nexport function debounceTime(dueTime, scheduler) {\n    if (scheduler === void 0) {\n        scheduler = async;\n    }\n    return function (source) { return source.lift(new DebounceTimeOperator(dueTime, scheduler)); };\n}\nvar DebounceTimeOperator = /*@__PURE__*/ (function () {\n    function DebounceTimeOperator(dueTime, scheduler) {\n        this.dueTime = dueTime;\n        this.scheduler = scheduler;\n    }\n    DebounceTimeOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DebounceTimeSubscriber(subscriber, this.dueTime, this.scheduler));\n    };\n    return DebounceTimeOperator;\n}());\nvar DebounceTimeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(DebounceTimeSubscriber, _super);\n    function DebounceTimeSubscriber(destination, dueTime, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.dueTime = dueTime;\n        _this.scheduler = scheduler;\n        _this.debouncedSubscription = null;\n        _this.lastValue = null;\n        _this.hasValue = false;\n        return _this;\n    }\n    DebounceTimeSubscriber.prototype._next = function (value) {\n        this.clearDebounce();\n        this.lastValue = value;\n        this.hasValue = true;\n        this.add(this.debouncedSubscription = this.scheduler.schedule(dispatchNext, this.dueTime, this));\n    };\n    DebounceTimeSubscriber.prototype._complete = function () {\n        this.debouncedNext();\n        this.destination.complete();\n    };\n    DebounceTimeSubscriber.prototype.debouncedNext = function () {\n        this.clearDebounce();\n        if (this.hasValue) {\n            var lastValue = this.lastValue;\n            this.lastValue = null;\n            this.hasValue = false;\n            this.destination.next(lastValue);\n        }\n    };\n    DebounceTimeSubscriber.prototype.clearDebounce = function () {\n        var debouncedSubscription = this.debouncedSubscription;\n        if (debouncedSubscription !== null) {\n            this.remove(debouncedSubscription);\n            debouncedSubscription.unsubscribe();\n            this.debouncedSubscription = null;\n        }\n    };\n    return DebounceTimeSubscriber;\n}(Subscriber));\nfunction dispatchNext(subscriber) {\n    subscriber.debouncedNext();\n}\n//# sourceMappingURL=debounceTime.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function defaultIfEmpty(defaultValue) {\n    if (defaultValue === void 0) {\n        defaultValue = null;\n    }\n    return function (source) { return source.lift(new DefaultIfEmptyOperator(defaultValue)); };\n}\nvar DefaultIfEmptyOperator = /*@__PURE__*/ (function () {\n    function DefaultIfEmptyOperator(defaultValue) {\n        this.defaultValue = defaultValue;\n    }\n    DefaultIfEmptyOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DefaultIfEmptySubscriber(subscriber, this.defaultValue));\n    };\n    return DefaultIfEmptyOperator;\n}());\nvar DefaultIfEmptySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(DefaultIfEmptySubscriber, _super);\n    function DefaultIfEmptySubscriber(destination, defaultValue) {\n        var _this = _super.call(this, destination) || this;\n        _this.defaultValue = defaultValue;\n        _this.isEmpty = true;\n        return _this;\n    }\n    DefaultIfEmptySubscriber.prototype._next = function (value) {\n        this.isEmpty = false;\n        this.destination.next(value);\n    };\n    DefaultIfEmptySubscriber.prototype._complete = function () {\n        if (this.isEmpty) {\n            this.destination.next(this.defaultValue);\n        }\n        this.destination.complete();\n    };\n    return DefaultIfEmptySubscriber;\n}(Subscriber));\n//# sourceMappingURL=defaultIfEmpty.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isDate(value) {\n    return value instanceof Date && !isNaN(+value);\n}\n//# sourceMappingURL=isDate.js.map\n","/** PURE_IMPORTS_START tslib,_scheduler_async,_util_isDate,_Subscriber,_Notification PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { async } from '../scheduler/async';\nimport { isDate } from '../util/isDate';\nimport { Subscriber } from '../Subscriber';\nimport { Notification } from '../Notification';\nexport function delay(delay, scheduler) {\n    if (scheduler === void 0) {\n        scheduler = async;\n    }\n    var absoluteDelay = isDate(delay);\n    var delayFor = absoluteDelay ? (+delay - scheduler.now()) : Math.abs(delay);\n    return function (source) { return source.lift(new DelayOperator(delayFor, scheduler)); };\n}\nvar DelayOperator = /*@__PURE__*/ (function () {\n    function DelayOperator(delay, scheduler) {\n        this.delay = delay;\n        this.scheduler = scheduler;\n    }\n    DelayOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DelaySubscriber(subscriber, this.delay, this.scheduler));\n    };\n    return DelayOperator;\n}());\nvar DelaySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(DelaySubscriber, _super);\n    function DelaySubscriber(destination, delay, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.delay = delay;\n        _this.scheduler = scheduler;\n        _this.queue = [];\n        _this.active = false;\n        _this.errored = false;\n        return _this;\n    }\n    DelaySubscriber.dispatch = function (state) {\n        var source = state.source;\n        var queue = source.queue;\n        var scheduler = state.scheduler;\n        var destination = state.destination;\n        while (queue.length > 0 && (queue[0].time - scheduler.now()) <= 0) {\n            queue.shift().notification.observe(destination);\n        }\n        if (queue.length > 0) {\n            var delay_1 = Math.max(0, queue[0].time - scheduler.now());\n            this.schedule(state, delay_1);\n        }\n        else {\n            this.unsubscribe();\n            source.active = false;\n        }\n    };\n    DelaySubscriber.prototype._schedule = function (scheduler) {\n        this.active = true;\n        var destination = this.destination;\n        destination.add(scheduler.schedule(DelaySubscriber.dispatch, this.delay, {\n            source: this, destination: this.destination, scheduler: scheduler\n        }));\n    };\n    DelaySubscriber.prototype.scheduleNotification = function (notification) {\n        if (this.errored === true) {\n            return;\n        }\n        var scheduler = this.scheduler;\n        var message = new DelayMessage(scheduler.now() + this.delay, notification);\n        this.queue.push(message);\n        if (this.active === false) {\n            this._schedule(scheduler);\n        }\n    };\n    DelaySubscriber.prototype._next = function (value) {\n        this.scheduleNotification(Notification.createNext(value));\n    };\n    DelaySubscriber.prototype._error = function (err) {\n        this.errored = true;\n        this.queue = [];\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    DelaySubscriber.prototype._complete = function () {\n        this.scheduleNotification(Notification.createComplete());\n        this.unsubscribe();\n    };\n    return DelaySubscriber;\n}(Subscriber));\nvar DelayMessage = /*@__PURE__*/ (function () {\n    function DelayMessage(time, notification) {\n        this.time = time;\n        this.notification = notification;\n    }\n    return DelayMessage;\n}());\n//# sourceMappingURL=delay.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_Observable,_OuterSubscriber,_util_subscribeToResult PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function delayWhen(delayDurationSelector, subscriptionDelay) {\n    if (subscriptionDelay) {\n        return function (source) {\n            return new SubscriptionDelayObservable(source, subscriptionDelay)\n                .lift(new DelayWhenOperator(delayDurationSelector));\n        };\n    }\n    return function (source) { return source.lift(new DelayWhenOperator(delayDurationSelector)); };\n}\nvar DelayWhenOperator = /*@__PURE__*/ (function () {\n    function DelayWhenOperator(delayDurationSelector) {\n        this.delayDurationSelector = delayDurationSelector;\n    }\n    DelayWhenOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DelayWhenSubscriber(subscriber, this.delayDurationSelector));\n    };\n    return DelayWhenOperator;\n}());\nvar DelayWhenSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(DelayWhenSubscriber, _super);\n    function DelayWhenSubscriber(destination, delayDurationSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.delayDurationSelector = delayDurationSelector;\n        _this.completed = false;\n        _this.delayNotifierSubscriptions = [];\n        _this.index = 0;\n        return _this;\n    }\n    DelayWhenSubscriber.prototype.notifyNext = function (outerValue, _innerValue, _outerIndex, _innerIndex, innerSub) {\n        this.destination.next(outerValue);\n        this.removeSubscription(innerSub);\n        this.tryComplete();\n    };\n    DelayWhenSubscriber.prototype.notifyError = function (error, innerSub) {\n        this._error(error);\n    };\n    DelayWhenSubscriber.prototype.notifyComplete = function (innerSub) {\n        var value = this.removeSubscription(innerSub);\n        if (value) {\n            this.destination.next(value);\n        }\n        this.tryComplete();\n    };\n    DelayWhenSubscriber.prototype._next = function (value) {\n        var index = this.index++;\n        try {\n            var delayNotifier = this.delayDurationSelector(value, index);\n            if (delayNotifier) {\n                this.tryDelay(delayNotifier, value);\n            }\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    };\n    DelayWhenSubscriber.prototype._complete = function () {\n        this.completed = true;\n        this.tryComplete();\n        this.unsubscribe();\n    };\n    DelayWhenSubscriber.prototype.removeSubscription = function (subscription) {\n        subscription.unsubscribe();\n        var subscriptionIdx = this.delayNotifierSubscriptions.indexOf(subscription);\n        if (subscriptionIdx !== -1) {\n            this.delayNotifierSubscriptions.splice(subscriptionIdx, 1);\n        }\n        return subscription.outerValue;\n    };\n    DelayWhenSubscriber.prototype.tryDelay = function (delayNotifier, value) {\n        var notifierSubscription = subscribeToResult(this, delayNotifier, value);\n        if (notifierSubscription && !notifierSubscription.closed) {\n            var destination = this.destination;\n            destination.add(notifierSubscription);\n            this.delayNotifierSubscriptions.push(notifierSubscription);\n        }\n    };\n    DelayWhenSubscriber.prototype.tryComplete = function () {\n        if (this.completed && this.delayNotifierSubscriptions.length === 0) {\n            this.destination.complete();\n        }\n    };\n    return DelayWhenSubscriber;\n}(OuterSubscriber));\nvar SubscriptionDelayObservable = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubscriptionDelayObservable, _super);\n    function SubscriptionDelayObservable(source, subscriptionDelay) {\n        var _this = _super.call(this) || this;\n        _this.source = source;\n        _this.subscriptionDelay = subscriptionDelay;\n        return _this;\n    }\n    SubscriptionDelayObservable.prototype._subscribe = function (subscriber) {\n        this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(subscriber, this.source));\n    };\n    return SubscriptionDelayObservable;\n}(Observable));\nvar SubscriptionDelaySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubscriptionDelaySubscriber, _super);\n    function SubscriptionDelaySubscriber(parent, source) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.source = source;\n        _this.sourceSubscribed = false;\n        return _this;\n    }\n    SubscriptionDelaySubscriber.prototype._next = function (unused) {\n        this.subscribeToSource();\n    };\n    SubscriptionDelaySubscriber.prototype._error = function (err) {\n        this.unsubscribe();\n        this.parent.error(err);\n    };\n    SubscriptionDelaySubscriber.prototype._complete = function () {\n        this.unsubscribe();\n        this.subscribeToSource();\n    };\n    SubscriptionDelaySubscriber.prototype.subscribeToSource = function () {\n        if (!this.sourceSubscribed) {\n            this.sourceSubscribed = true;\n            this.unsubscribe();\n            this.source.subscribe(this.parent);\n        }\n    };\n    return SubscriptionDelaySubscriber;\n}(Subscriber));\n//# sourceMappingURL=delayWhen.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function distinctUntilChanged(compare, keySelector) {\n    return function (source) { return source.lift(new DistinctUntilChangedOperator(compare, keySelector)); };\n}\nvar DistinctUntilChangedOperator = /*@__PURE__*/ (function () {\n    function DistinctUntilChangedOperator(compare, keySelector) {\n        this.compare = compare;\n        this.keySelector = keySelector;\n    }\n    DistinctUntilChangedOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DistinctUntilChangedSubscriber(subscriber, this.compare, this.keySelector));\n    };\n    return DistinctUntilChangedOperator;\n}());\nvar DistinctUntilChangedSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(DistinctUntilChangedSubscriber, _super);\n    function DistinctUntilChangedSubscriber(destination, compare, keySelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.keySelector = keySelector;\n        _this.hasKey = false;\n        if (typeof compare === 'function') {\n            _this.compare = compare;\n        }\n        return _this;\n    }\n    DistinctUntilChangedSubscriber.prototype.compare = function (x, y) {\n        return x === y;\n    };\n    DistinctUntilChangedSubscriber.prototype._next = function (value) {\n        var key;\n        try {\n            var keySelector = this.keySelector;\n            key = keySelector ? keySelector(value) : value;\n        }\n        catch (err) {\n            return this.destination.error(err);\n        }\n        var result = false;\n        if (this.hasKey) {\n            try {\n                var compare = this.compare;\n                result = compare(this.key, key);\n            }\n            catch (err) {\n                return this.destination.error(err);\n            }\n        }\n        else {\n            this.hasKey = true;\n        }\n        if (!result) {\n            this.key = key;\n            this.destination.next(value);\n        }\n    };\n    return DistinctUntilChangedSubscriber;\n}(Subscriber));\n//# sourceMappingURL=distinctUntilChanged.js.map\n","/** PURE_IMPORTS_START _distinctUntilChanged PURE_IMPORTS_END */\nimport { distinctUntilChanged } from './distinctUntilChanged';\nexport function distinctUntilKeyChanged(key, compare) {\n    return distinctUntilChanged(function (x, y) { return compare ? compare(x[key], y[key]) : x[key] === y[key]; });\n}\n//# sourceMappingURL=distinctUntilKeyChanged.js.map\n","/** PURE_IMPORTS_START tslib,_util_EmptyError,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { EmptyError } from '../util/EmptyError';\nimport { Subscriber } from '../Subscriber';\nexport function throwIfEmpty(errorFactory) {\n    if (errorFactory === void 0) {\n        errorFactory = defaultErrorFactory;\n    }\n    return function (source) {\n        return source.lift(new ThrowIfEmptyOperator(errorFactory));\n    };\n}\nvar ThrowIfEmptyOperator = /*@__PURE__*/ (function () {\n    function ThrowIfEmptyOperator(errorFactory) {\n        this.errorFactory = errorFactory;\n    }\n    ThrowIfEmptyOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new ThrowIfEmptySubscriber(subscriber, this.errorFactory));\n    };\n    return ThrowIfEmptyOperator;\n}());\nvar ThrowIfEmptySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ThrowIfEmptySubscriber, _super);\n    function ThrowIfEmptySubscriber(destination, errorFactory) {\n        var _this = _super.call(this, destination) || this;\n        _this.errorFactory = errorFactory;\n        _this.hasValue = false;\n        return _this;\n    }\n    ThrowIfEmptySubscriber.prototype._next = function (value) {\n        this.hasValue = true;\n        this.destination.next(value);\n    };\n    ThrowIfEmptySubscriber.prototype._complete = function () {\n        if (!this.hasValue) {\n            var err = void 0;\n            try {\n                err = this.errorFactory();\n            }\n            catch (e) {\n                err = e;\n            }\n            this.destination.error(err);\n        }\n        else {\n            return this.destination.complete();\n        }\n    };\n    return ThrowIfEmptySubscriber;\n}(Subscriber));\nfunction defaultErrorFactory() {\n    return new EmptyError();\n}\n//# sourceMappingURL=throwIfEmpty.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_util_ArgumentOutOfRangeError,_observable_empty PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { ArgumentOutOfRangeError } from '../util/ArgumentOutOfRangeError';\nimport { empty } from '../observable/empty';\nexport function take(count) {\n    return function (source) {\n        if (count === 0) {\n            return empty();\n        }\n        else {\n            return source.lift(new TakeOperator(count));\n        }\n    };\n}\nvar TakeOperator = /*@__PURE__*/ (function () {\n    function TakeOperator(total) {\n        this.total = total;\n        if (this.total < 0) {\n            throw new ArgumentOutOfRangeError;\n        }\n    }\n    TakeOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new TakeSubscriber(subscriber, this.total));\n    };\n    return TakeOperator;\n}());\nvar TakeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(TakeSubscriber, _super);\n    function TakeSubscriber(destination, total) {\n        var _this = _super.call(this, destination) || this;\n        _this.total = total;\n        _this.count = 0;\n        return _this;\n    }\n    TakeSubscriber.prototype._next = function (value) {\n        var total = this.total;\n        var count = ++this.count;\n        if (count <= total) {\n            this.destination.next(value);\n            if (count === total) {\n                this.destination.complete();\n                this.unsubscribe();\n            }\n        }\n    };\n    return TakeSubscriber;\n}(Subscriber));\n//# sourceMappingURL=take.js.map\n","/** PURE_IMPORTS_START _util_EmptyError,_filter,_take,_defaultIfEmpty,_throwIfEmpty,_util_identity PURE_IMPORTS_END */\nimport { EmptyError } from '../util/EmptyError';\nimport { filter } from './filter';\nimport { take } from './take';\nimport { defaultIfEmpty } from './defaultIfEmpty';\nimport { throwIfEmpty } from './throwIfEmpty';\nimport { identity } from '../util/identity';\nexport function first(predicate, defaultValue) {\n    var hasDefaultValue = arguments.length >= 2;\n    return function (source) { return source.pipe(predicate ? filter(function (v, i) { return predicate(v, i, source); }) : identity, take(1), hasDefaultValue ? defaultIfEmpty(defaultValue) : throwIfEmpty(function () { return new EmptyError(); })); };\n}\n//# sourceMappingURL=first.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function mapTo(value) {\n    return function (source) { return source.lift(new MapToOperator(value)); };\n}\nvar MapToOperator = /*@__PURE__*/ (function () {\n    function MapToOperator(value) {\n        this.value = value;\n    }\n    MapToOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new MapToSubscriber(subscriber, this.value));\n    };\n    return MapToOperator;\n}());\nvar MapToSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(MapToSubscriber, _super);\n    function MapToSubscriber(destination, value) {\n        var _this = _super.call(this, destination) || this;\n        _this.value = value;\n        return _this;\n    }\n    MapToSubscriber.prototype._next = function (x) {\n        this.destination.next(this.value);\n    };\n    return MapToSubscriber;\n}(Subscriber));\n//# sourceMappingURL=mapTo.js.map\n","/** PURE_IMPORTS_START _observable_ConnectableObservable PURE_IMPORTS_END */\nimport { connectableObservableDescriptor } from '../observable/ConnectableObservable';\nexport function multicast(subjectOrSubjectFactory, selector) {\n    return function multicastOperatorFunction(source) {\n        var subjectFactory;\n        if (typeof subjectOrSubjectFactory === 'function') {\n            subjectFactory = subjectOrSubjectFactory;\n        }\n        else {\n            subjectFactory = function subjectFactory() {\n                return subjectOrSubjectFactory;\n            };\n        }\n        if (typeof selector === 'function') {\n            return source.lift(new MulticastOperator(subjectFactory, selector));\n        }\n        var connectable = Object.create(source, connectableObservableDescriptor);\n        connectable.source = source;\n        connectable.subjectFactory = subjectFactory;\n        return connectable;\n    };\n}\nvar MulticastOperator = /*@__PURE__*/ (function () {\n    function MulticastOperator(subjectFactory, selector) {\n        this.subjectFactory = subjectFactory;\n        this.selector = selector;\n    }\n    MulticastOperator.prototype.call = function (subscriber, source) {\n        var selector = this.selector;\n        var subject = this.subjectFactory();\n        var subscription = selector(subject).subscribe(subscriber);\n        subscription.add(source.subscribe(subject));\n        return subscription;\n    };\n    return MulticastOperator;\n}());\nexport { MulticastOperator };\n//# sourceMappingURL=multicast.js.map\n","/** PURE_IMPORTS_START _ReplaySubject,_multicast PURE_IMPORTS_END */\nimport { ReplaySubject } from '../ReplaySubject';\nimport { multicast } from './multicast';\nexport function publishReplay(bufferSize, windowTime, selectorOrScheduler, scheduler) {\n    if (selectorOrScheduler && typeof selectorOrScheduler !== 'function') {\n        scheduler = selectorOrScheduler;\n    }\n    var selector = typeof selectorOrScheduler === 'function' ? selectorOrScheduler : undefined;\n    var subject = new ReplaySubject(bufferSize, windowTime, scheduler);\n    return function (source) { return multicast(function () { return subject; }, selector)(source); };\n}\n//# sourceMappingURL=publishReplay.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function retry(count) {\n    if (count === void 0) {\n        count = -1;\n    }\n    return function (source) { return source.lift(new RetryOperator(count, source)); };\n}\nvar RetryOperator = /*@__PURE__*/ (function () {\n    function RetryOperator(count, source) {\n        this.count = count;\n        this.source = source;\n    }\n    RetryOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new RetrySubscriber(subscriber, this.count, this.source));\n    };\n    return RetryOperator;\n}());\nvar RetrySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(RetrySubscriber, _super);\n    function RetrySubscriber(destination, count, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.count = count;\n        _this.source = source;\n        return _this;\n    }\n    RetrySubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _a = this, source = _a.source, count = _a.count;\n            if (count === 0) {\n                return _super.prototype.error.call(this, err);\n            }\n            else if (count > -1) {\n                this.count = count - 1;\n            }\n            source.subscribe(this._unsubscribeAndRecycle());\n        }\n    };\n    return RetrySubscriber;\n}(Subscriber));\n//# sourceMappingURL=retry.js.map\n","/** PURE_IMPORTS_START tslib,_innerSubscribe PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { SimpleOuterSubscriber, SimpleInnerSubscriber, innerSubscribe } from '../innerSubscribe';\nexport function skipUntil(notifier) {\n    return function (source) { return source.lift(new SkipUntilOperator(notifier)); };\n}\nvar SkipUntilOperator = /*@__PURE__*/ (function () {\n    function SkipUntilOperator(notifier) {\n        this.notifier = notifier;\n    }\n    SkipUntilOperator.prototype.call = function (destination, source) {\n        return source.subscribe(new SkipUntilSubscriber(destination, this.notifier));\n    };\n    return SkipUntilOperator;\n}());\nvar SkipUntilSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SkipUntilSubscriber, _super);\n    function SkipUntilSubscriber(destination, notifier) {\n        var _this = _super.call(this, destination) || this;\n        _this.hasValue = false;\n        var innerSubscriber = new SimpleInnerSubscriber(_this);\n        _this.add(innerSubscriber);\n        _this.innerSubscription = innerSubscriber;\n        var innerSubscription = innerSubscribe(notifier, innerSubscriber);\n        if (innerSubscription !== innerSubscriber) {\n            _this.add(innerSubscription);\n            _this.innerSubscription = innerSubscription;\n        }\n        return _this;\n    }\n    SkipUntilSubscriber.prototype._next = function (value) {\n        if (this.hasValue) {\n            _super.prototype._next.call(this, value);\n        }\n    };\n    SkipUntilSubscriber.prototype.notifyNext = function () {\n        this.hasValue = true;\n        if (this.innerSubscription) {\n            this.innerSubscription.unsubscribe();\n        }\n    };\n    SkipUntilSubscriber.prototype.notifyComplete = function () {\n    };\n    return SkipUntilSubscriber;\n}(SimpleOuterSubscriber));\n//# sourceMappingURL=skipUntil.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function skipWhile(predicate) {\n    return function (source) { return source.lift(new SkipWhileOperator(predicate)); };\n}\nvar SkipWhileOperator = /*@__PURE__*/ (function () {\n    function SkipWhileOperator(predicate) {\n        this.predicate = predicate;\n    }\n    SkipWhileOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new SkipWhileSubscriber(subscriber, this.predicate));\n    };\n    return SkipWhileOperator;\n}());\nvar SkipWhileSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SkipWhileSubscriber, _super);\n    function SkipWhileSubscriber(destination, predicate) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.skipping = true;\n        _this.index = 0;\n        return _this;\n    }\n    SkipWhileSubscriber.prototype._next = function (value) {\n        var destination = this.destination;\n        if (this.skipping) {\n            this.tryCallPredicate(value);\n        }\n        if (!this.skipping) {\n            destination.next(value);\n        }\n    };\n    SkipWhileSubscriber.prototype.tryCallPredicate = function (value) {\n        try {\n            var result = this.predicate(value, this.index++);\n            this.skipping = Boolean(result);\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    };\n    return SkipWhileSubscriber;\n}(Subscriber));\n//# sourceMappingURL=skipWhile.js.map\n","/** PURE_IMPORTS_START tslib,_map,_observable_from,_innerSubscribe PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { map } from './map';\nimport { from } from '../observable/from';\nimport { SimpleOuterSubscriber, SimpleInnerSubscriber, innerSubscribe } from '../innerSubscribe';\nexport function switchMap(project, resultSelector) {\n    if (typeof resultSelector === 'function') {\n        return function (source) { return source.pipe(switchMap(function (a, i) { return from(project(a, i)).pipe(map(function (b, ii) { return resultSelector(a, b, i, ii); })); })); };\n    }\n    return function (source) { return source.lift(new SwitchMapOperator(project)); };\n}\nvar SwitchMapOperator = /*@__PURE__*/ (function () {\n    function SwitchMapOperator(project) {\n        this.project = project;\n    }\n    SwitchMapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new SwitchMapSubscriber(subscriber, this.project));\n    };\n    return SwitchMapOperator;\n}());\nvar SwitchMapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SwitchMapSubscriber, _super);\n    function SwitchMapSubscriber(destination, project) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.index = 0;\n        return _this;\n    }\n    SwitchMapSubscriber.prototype._next = function (value) {\n        var result;\n        var index = this.index++;\n        try {\n            result = this.project(value, index);\n        }\n        catch (error) {\n            this.destination.error(error);\n            return;\n        }\n        this._innerSub(result);\n    };\n    SwitchMapSubscriber.prototype._innerSub = function (result) {\n        var innerSubscription = this.innerSubscription;\n        if (innerSubscription) {\n            innerSubscription.unsubscribe();\n        }\n        var innerSubscriber = new SimpleInnerSubscriber(this);\n        var destination = this.destination;\n        destination.add(innerSubscriber);\n        this.innerSubscription = innerSubscribe(result, innerSubscriber);\n        if (this.innerSubscription !== innerSubscriber) {\n            destination.add(this.innerSubscription);\n        }\n    };\n    SwitchMapSubscriber.prototype._complete = function () {\n        var innerSubscription = this.innerSubscription;\n        if (!innerSubscription || innerSubscription.closed) {\n            _super.prototype._complete.call(this);\n        }\n        this.unsubscribe();\n    };\n    SwitchMapSubscriber.prototype._unsubscribe = function () {\n        this.innerSubscription = undefined;\n    };\n    SwitchMapSubscriber.prototype.notifyComplete = function () {\n        this.innerSubscription = undefined;\n        if (this.isStopped) {\n            _super.prototype._complete.call(this);\n        }\n    };\n    SwitchMapSubscriber.prototype.notifyNext = function (innerValue) {\n        this.destination.next(innerValue);\n    };\n    return SwitchMapSubscriber;\n}(SimpleOuterSubscriber));\n//# sourceMappingURL=switchMap.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_util_noop,_util_isFunction PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { noop } from '../util/noop';\nimport { isFunction } from '../util/isFunction';\nexport function tap(nextOrObserver, error, complete) {\n    return function tapOperatorFunction(source) {\n        return source.lift(new DoOperator(nextOrObserver, error, complete));\n    };\n}\nvar DoOperator = /*@__PURE__*/ (function () {\n    function DoOperator(nextOrObserver, error, complete) {\n        this.nextOrObserver = nextOrObserver;\n        this.error = error;\n        this.complete = complete;\n    }\n    DoOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new TapSubscriber(subscriber, this.nextOrObserver, this.error, this.complete));\n    };\n    return DoOperator;\n}());\nvar TapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(TapSubscriber, _super);\n    function TapSubscriber(destination, observerOrNext, error, complete) {\n        var _this = _super.call(this, destination) || this;\n        _this._tapNext = noop;\n        _this._tapError = noop;\n        _this._tapComplete = noop;\n        _this._tapError = error || noop;\n        _this._tapComplete = complete || noop;\n        if (isFunction(observerOrNext)) {\n            _this._context = _this;\n            _this._tapNext = observerOrNext;\n        }\n        else if (observerOrNext) {\n            _this._context = observerOrNext;\n            _this._tapNext = observerOrNext.next || noop;\n            _this._tapError = observerOrNext.error || noop;\n            _this._tapComplete = observerOrNext.complete || noop;\n        }\n        return _this;\n    }\n    TapSubscriber.prototype._next = function (value) {\n        try {\n            this._tapNext.call(this._context, value);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(value);\n    };\n    TapSubscriber.prototype._error = function (err) {\n        try {\n            this._tapError.call(this._context, err);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.error(err);\n    };\n    TapSubscriber.prototype._complete = function () {\n        try {\n            this._tapComplete.call(this._context);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        return this.destination.complete();\n    };\n    return TapSubscriber;\n}(Subscriber));\n//# sourceMappingURL=tap.js.map\n","/** PURE_IMPORTS_START tslib,_scheduler_async,_util_isDate,_innerSubscribe PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { async } from '../scheduler/async';\nimport { isDate } from '../util/isDate';\nimport { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';\nexport function timeoutWith(due, withObservable, scheduler) {\n    if (scheduler === void 0) {\n        scheduler = async;\n    }\n    return function (source) {\n        var absoluteTimeout = isDate(due);\n        var waitFor = absoluteTimeout ? (+due - scheduler.now()) : Math.abs(due);\n        return source.lift(new TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler));\n    };\n}\nvar TimeoutWithOperator = /*@__PURE__*/ (function () {\n    function TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler) {\n        this.waitFor = waitFor;\n        this.absoluteTimeout = absoluteTimeout;\n        this.withObservable = withObservable;\n        this.scheduler = scheduler;\n    }\n    TimeoutWithOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new TimeoutWithSubscriber(subscriber, this.absoluteTimeout, this.waitFor, this.withObservable, this.scheduler));\n    };\n    return TimeoutWithOperator;\n}());\nvar TimeoutWithSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(TimeoutWithSubscriber, _super);\n    function TimeoutWithSubscriber(destination, absoluteTimeout, waitFor, withObservable, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.absoluteTimeout = absoluteTimeout;\n        _this.waitFor = waitFor;\n        _this.withObservable = withObservable;\n        _this.scheduler = scheduler;\n        _this.scheduleTimeout();\n        return _this;\n    }\n    TimeoutWithSubscriber.dispatchTimeout = function (subscriber) {\n        var withObservable = subscriber.withObservable;\n        subscriber._unsubscribeAndRecycle();\n        subscriber.add(innerSubscribe(withObservable, new SimpleInnerSubscriber(subscriber)));\n    };\n    TimeoutWithSubscriber.prototype.scheduleTimeout = function () {\n        var action = this.action;\n        if (action) {\n            this.action = action.schedule(this, this.waitFor);\n        }\n        else {\n            this.add(this.action = this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout, this.waitFor, this));\n        }\n    };\n    TimeoutWithSubscriber.prototype._next = function (value) {\n        if (!this.absoluteTimeout) {\n            this.scheduleTimeout();\n        }\n        _super.prototype._next.call(this, value);\n    };\n    TimeoutWithSubscriber.prototype._unsubscribe = function () {\n        this.action = undefined;\n        this.scheduler = null;\n        this.withObservable = null;\n    };\n    return TimeoutWithSubscriber;\n}(SimpleOuterSubscriber));\n//# sourceMappingURL=timeoutWith.js.map\n","/** PURE_IMPORTS_START _scheduler_async,_util_TimeoutError,_timeoutWith,_observable_throwError PURE_IMPORTS_END */\nimport { async } from '../scheduler/async';\nimport { TimeoutError } from '../util/TimeoutError';\nimport { timeoutWith } from './timeoutWith';\nimport { throwError } from '../observable/throwError';\nexport function timeout(due, scheduler) {\n    if (scheduler === void 0) {\n        scheduler = async;\n    }\n    return timeoutWith(due, throwError(new TimeoutError()), scheduler);\n}\n//# sourceMappingURL=timeout.js.map\n","import { interval as intervalObs, NEVER as NEVER_OBS, race as raceObs, throwError as throwErrorObs } from 'rxjs'\nimport {\n  catchError as catchErrorObs,\n  first as firstObs,\n  skipUntil as skipUntilObs,\n  skipWhile as skipWhileObs,\n  switchMap as switchMapObs,\n  timeout as timeoutObs,\n} from 'rxjs/operators'\nimport { isFunction, negate } from './minilo'\n\nexport class WaitCancelError extends Error {\n  name = 'WaitCancelError'\n\n  constructor (message) {\n    super(message)\n    if (isFunction(Error.captureStackTrace)) {\n      Error.captureStackTrace(this, this.constructor)\n    } else {\n      this.stack = (new Error(message)).stack\n    }\n  }\n}\n\nexport class WaitTimeoutError extends Error {\n  name = 'WaitTimeoutError'\n\n  constructor (message) {\n    super(message)\n    if (isFunction(Error.captureStackTrace)) {\n      Error.captureStackTrace(this, this.constructor)\n    } else {\n      this.stack = (new Error(message)).stack\n    }\n  }\n}\n\n/**\n * @param {function|Observable} condition\n * @param {function|Observable} [breakOn]\n * @param {number} [timeout]\n * @returns {Promise<boolean>}\n */\nexport default function waitFor (condition, breakOn, timeout) {\n  const defCond = x => !x\n  const success = intervalObs(1000 / 60).pipe(\n    isFunction(condition)\n      ? skipWhileObs(negate(condition))\n      : skipUntilObs(condition.pipe(skipWhileObs(defCond))),\n    firstObs(),\n  )\n  let failed = NEVER_OBS\n  if (breakOn) {\n    failed = intervalObs(1000 / 60).pipe(\n      isFunction(breakOn)\n        ? skipWhileObs(negate(breakOn))\n        : skipUntilObs(breakOn.pipe(skipWhileObs(defCond))),\n      firstObs(),\n      switchMapObs(() => throwErrorObs(new WaitCancelError('wait canceled'))),\n    )\n  }\n  let obs = raceObs(success, failed)\n  if (timeout > 0) {\n    obs = obs.pipe(timeoutObs(timeout))\n  }\n  return obs.pipe(\n    catchErrorObs(err => {\n      if (err.name === 'TimeoutError') {\n        err = new WaitTimeoutError('wait timed out')\n      }\n      throw err\n    }),\n  ).toPromise()\n}\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default function (fn) {\n  return async function (...args) {\n    if (fn._execPromise) {\n      await fn._execPromise\n    }\n    fn._execPromise = Promise.resolve(this::fn(...args))\n    const res = await fn._execPromise\n    delete fn._execPromise\n    return res\n  }\n}\n","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","import { Control } from 'ol/control'\nimport { v4 as uuid } from 'uuid'\n\nexport function getControlId (control) {\n  if (control instanceof Control) {\n    return control.get('id')\n  }\n\n  throw new Error('Illegal control argument')\n}\n\nexport function setControlId (control, controlId) {\n  if (control instanceof Control) {\n    control.set('id', controlId)\n\n    return control\n  }\n\n  throw new Error('Illegal control argument')\n}\n\nexport function initializeControl (control, defaultControlId) {\n  if (getControlId(control) == null) {\n    setControlId(control, defaultControlId || uuid())\n  }\n\n  return control\n}\n","/**\n * @module ol/geom/GeometryType\n */\n/**\n * The geometry type. One of `'Point'`, `'LineString'`, `'LinearRing'`,\n * `'Polygon'`, `'MultiPoint'`, `'MultiLineString'`, `'MultiPolygon'`,\n * `'GeometryCollection'`, `'Circle'`.\n * @enum {string}\n */\nexport default {\n    POINT: 'Point',\n    LINE_STRING: 'LineString',\n    LINEAR_RING: 'LinearRing',\n    POLYGON: 'Polygon',\n    MULTI_POINT: 'MultiPoint',\n    MULTI_LINE_STRING: 'MultiLineString',\n    MULTI_POLYGON: 'MultiPolygon',\n    GEOMETRY_COLLECTION: 'GeometryCollection',\n    CIRCLE: 'Circle',\n};\n//# sourceMappingURL=GeometryType.js.map","import GeometryType from 'ol/geom/GeometryType'\nimport { and, every, isArray, isEqual, isNumber, round } from '../utils'\n\nexport const COORD_PRECISION = -1\n\nexport function roundExtent (extent, precision = COORD_PRECISION) {\n  if (!extent) return\n\n  return extent.map(x => round(x, precision))\n}\n\nexport function roundPointCoords (coordinates, precision = COORD_PRECISION) {\n  if (!coordinates) return\n\n  return coordinates.map(x => round(x, precision))\n}\n\nexport function roundLineCoords (coordinates, precision = COORD_PRECISION) {\n  if (!coordinates) return\n\n  return coordinates.map(point => roundPointCoords(point, precision))\n}\n\nexport function roundPolygonCoords (coordinates, precision = COORD_PRECISION) {\n  if (!coordinates) return\n\n  return coordinates.map(line => roundLineCoords(line, precision))\n}\n\nexport function roundMultiPointCoords (coordinates, precision = COORD_PRECISION) {\n  return roundLineCoords(coordinates, precision)\n}\n\nexport function roundMultiLineCoords (coordinates, precision = COORD_PRECISION) {\n  return roundPolygonCoords(coordinates, precision)\n}\n\nexport function roundMultiPolygonCoords (coordinates, precision = COORD_PRECISION) {\n  if (!coordinates) return\n\n  return coordinates.map(polygon => roundPolygonCoords(polygon, precision))\n}\n\nexport function roundCoords (geomType, coordinates, precision = COORD_PRECISION) {\n  switch (geomType) {\n    case GeometryType.POINT:\n    case GeometryType.CIRCLE:\n      return roundPointCoords(coordinates, precision)\n    case GeometryType.LINE_STRING:\n    case GeometryType.MULTI_POINT:\n      return roundLineCoords(coordinates, precision)\n    case GeometryType.POLYGON:\n    case GeometryType.MULTI_LINE_STRING:\n      return roundPolygonCoords(coordinates, precision)\n    case GeometryType.MULTI_POLYGON:\n      return roundMultiPolygonCoords(coordinates, precision)\n  }\n}\n\nexport function flatCoords (geomType, coordinates) {\n  const polygonReducer = (coords, lineString) => coords.concat(lineString)\n\n  switch (geomType) {\n    case GeometryType.POINT:\n      return [coordinates]\n    case GeometryType.LINE_STRING:\n    case GeometryType.MULTI_POINT:\n      return coordinates\n    case GeometryType.POLYGON:\n    case GeometryType.MULTI_LINE_STRING:\n      return coordinates.reduce(polygonReducer, [])\n    case GeometryType.MULTI_POLYGON:\n      return coordinates.reduce((coords, polygon) => coords.concat(polygon.reduce(polygonReducer, [])), [])\n    default:\n      // todo maybe return null?\n      return []\n  }\n}\n\n/**\n * @param {{coordinates: number[], extent: number[]}} a\n * @param {{coordinates: number[], extent: number[]}} b\n * @returns {boolean}\n */\nexport function isEqualCoord (a, b) {\n  return isEqual(a.extent, b.extent)\n    ? isEqual(a.coordinates, b.coordinates)\n    : false\n}\n\nexport function calcDistance (point1, point2, precision = COORD_PRECISION) {\n  const dx = point2[0] - point1[0]\n  const dy = point2[1] - point1[1]\n  const squared = dx * dx + dy * dy\n\n  return round(Math.sqrt(squared), COORD_PRECISION)\n}\n\nexport const isPointCoords = /*#__PURE__*/and(\n  isArray,\n  point => point.length >= 2,\n  point => every(point, isNumber),\n)\nexport const isLineCoords = /*#__PURE__*/and(\n  isArray,\n  line => line.length >= 0,\n  line => every(line, isPointCoords),\n)\nexport const isPolygonCoords = /*#__PURE__*/and(\n  isArray,\n  polygon => polygon.length >= 0,\n  polygon => every(polygon, isLineCoords),\n)\nexport const isMultiPointCoords = isLineCoords\nexport const isMultiLineCoords = isPolygonCoords\nexport const isMultiPolygonCoords = /*#__PURE__*/and(\n  isArray,\n  multiPolygon => multiPolygon.length >= 0,\n  multiPolygon => every(multiPolygon, isPolygonCoords),\n)\n","/**\n * @module ol/extent/Corner\n */\n/**\n * Extent corner.\n * @enum {string}\n */\nexport default {\n    BOTTOM_LEFT: 'bottom-left',\n    BOTTOM_RIGHT: 'bottom-right',\n    TOP_LEFT: 'top-left',\n    TOP_RIGHT: 'top-right',\n};\n//# sourceMappingURL=Corner.js.map","// copy-paste from ol/extent\nimport { getBottomLeft, getBottomRight, getTopLeft, getTopRight } from 'ol/extent'\nimport Corner from 'ol/extent/Corner'\nimport { assert } from '../utils'\n\nexport function createOrUpdate (minX, minY, maxX, maxY, extent) {\n  if (extent) {\n    extent[0] = minX\n    extent[1] = minY\n    extent[2] = maxX\n    extent[3] = maxY\n    return extent\n  }\n  return [minX, minY, maxX, maxY]\n}\n\nexport function getCorner (extent, corner) {\n  let coordinate\n  if (corner === Corner.BOTTOM_LEFT) {\n    coordinate = getBottomLeft(extent)\n  } else if (corner === Corner.BOTTOM_RIGHT) {\n    coordinate = getBottomRight(extent)\n  } else if (corner === Corner.TOP_LEFT) {\n    coordinate = getTopLeft(extent)\n  } else if (corner === Corner.TOP_RIGHT) {\n    coordinate = getTopRight(extent)\n  } else {\n    assert(false, 'Invalid extent corner')\n  }\n  return coordinate\n}\n","import superPropBase from \"./superPropBase.js\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","/**\n * Earth Radius used with the Harvesine formula and approximates using a spherical (non-ellipsoid) Earth.\n */\nvar earthRadius = 6371008.8;\n\n/**\n * Unit of measurement factors using a spherical (non-ellipsoid) earth radius.\n */\nvar factors = {\n    meters: earthRadius,\n    metres: earthRadius,\n    millimeters: earthRadius * 1000,\n    millimetres: earthRadius * 1000,\n    centimeters: earthRadius * 100,\n    centimetres: earthRadius * 100,\n    kilometers: earthRadius / 1000,\n    kilometres: earthRadius / 1000,\n    miles: earthRadius / 1609.344,\n    nauticalmiles: earthRadius / 1852,\n    inches: earthRadius * 39.370,\n    yards: earthRadius / 1.0936,\n    feet: earthRadius * 3.28084,\n    radians: 1,\n    degrees: earthRadius / 111325,\n};\n\n/**\n * Units of measurement factors based on 1 meter.\n */\nvar unitsFactors = {\n    meters: 1,\n    metres: 1,\n    millimeters: 1000,\n    millimetres: 1000,\n    centimeters: 100,\n    centimetres: 100,\n    kilometers: 1 / 1000,\n    kilometres: 1 / 1000,\n    miles: 1 / 1609.344,\n    nauticalmiles: 1 / 1852,\n    inches: 39.370,\n    yards: 1 / 1.0936,\n    feet: 3.28084,\n    radians: 1 / earthRadius,\n    degrees: 1 / 111325,\n};\n\n/**\n * Area of measurement factors based on 1 square meter.\n */\nvar areaFactors = {\n    meters: 1,\n    metres: 1,\n    millimeters: 1000000,\n    millimetres: 1000000,\n    centimeters: 10000,\n    centimetres: 10000,\n    kilometers: 0.000001,\n    kilometres: 0.000001,\n    acres: 0.000247105,\n    miles: 3.86e-7,\n    yards: 1.195990046,\n    feet: 10.763910417,\n    inches: 1550.003100006\n};\n\n/**\n * Wraps a GeoJSON {@link Geometry} in a GeoJSON {@link Feature}.\n *\n * @name feature\n * @param {Geometry} geometry input geometry\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature} a GeoJSON Feature\n * @example\n * var geometry = {\n *   \"type\": \"Point\",\n *   \"coordinates\": [110, 50]\n * };\n *\n * var feature = turf.feature(geometry);\n *\n * //=feature\n */\nfunction feature(geometry, properties, options) {\n    // Optional Parameters\n    options = options || {};\n    if (!isObject(options)) throw new Error('options is invalid');\n    var bbox = options.bbox;\n    var id = options.id;\n\n    // Validation\n    if (geometry === undefined) throw new Error('geometry is required');\n    if (properties && properties.constructor !== Object) throw new Error('properties must be an Object');\n    if (bbox) validateBBox(bbox);\n    if (id) validateId(id);\n\n    // Main\n    var feat = {type: 'Feature'};\n    if (id) feat.id = id;\n    if (bbox) feat.bbox = bbox;\n    feat.properties = properties || {};\n    feat.geometry = geometry;\n    return feat;\n}\n\n/**\n * Creates a GeoJSON {@link Geometry} from a Geometry string type & coordinates.\n * For GeometryCollection type use `helpers.geometryCollection`\n *\n * @name geometry\n * @param {string} type Geometry Type\n * @param {Array<number>} coordinates Coordinates\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Geometry\n * @returns {Geometry} a GeoJSON Geometry\n * @example\n * var type = 'Point';\n * var coordinates = [110, 50];\n *\n * var geometry = turf.geometry(type, coordinates);\n *\n * //=geometry\n */\nfunction geometry(type, coordinates, options) {\n    // Optional Parameters\n    options = options || {};\n    if (!isObject(options)) throw new Error('options is invalid');\n    var bbox = options.bbox;\n\n    // Validation\n    if (!type) throw new Error('type is required');\n    if (!coordinates) throw new Error('coordinates is required');\n    if (!Array.isArray(coordinates)) throw new Error('coordinates must be an Array');\n    if (bbox) validateBBox(bbox);\n\n    // Main\n    var geom;\n    switch (type) {\n    case 'Point': geom = point(coordinates).geometry; break;\n    case 'LineString': geom = lineString(coordinates).geometry; break;\n    case 'Polygon': geom = polygon(coordinates).geometry; break;\n    case 'MultiPoint': geom = multiPoint(coordinates).geometry; break;\n    case 'MultiLineString': geom = multiLineString(coordinates).geometry; break;\n    case 'MultiPolygon': geom = multiPolygon(coordinates).geometry; break;\n    default: throw new Error(type + ' is invalid');\n    }\n    if (bbox) geom.bbox = bbox;\n    return geom;\n}\n\n/**\n * Creates a {@link Point} {@link Feature} from a Position.\n *\n * @name point\n * @param {Array<number>} coordinates longitude, latitude position (each in decimal degrees)\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<Point>} a Point feature\n * @example\n * var point = turf.point([-75.343, 39.984]);\n *\n * //=point\n */\nfunction point(coordinates, properties, options) {\n    if (!coordinates) throw new Error('coordinates is required');\n    if (!Array.isArray(coordinates)) throw new Error('coordinates must be an Array');\n    if (coordinates.length < 2) throw new Error('coordinates must be at least 2 numbers long');\n    if (!isNumber(coordinates[0]) || !isNumber(coordinates[1])) throw new Error('coordinates must contain numbers');\n\n    return feature({\n        type: 'Point',\n        coordinates: coordinates\n    }, properties, options);\n}\n\n/**\n * Creates a {@link Point} {@link FeatureCollection} from an Array of Point coordinates.\n *\n * @name points\n * @param {Array<Array<number>>} coordinates an array of Points\n * @param {Object} [properties={}] Translate these properties to each Feature\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the FeatureCollection\n * @param {string|number} [options.id] Identifier associated with the FeatureCollection\n * @returns {FeatureCollection<Point>} Point Feature\n * @example\n * var points = turf.points([\n *   [-75, 39],\n *   [-80, 45],\n *   [-78, 50]\n * ]);\n *\n * //=points\n */\nfunction points(coordinates, properties, options) {\n    if (!coordinates) throw new Error('coordinates is required');\n    if (!Array.isArray(coordinates)) throw new Error('coordinates must be an Array');\n\n    return featureCollection(coordinates.map(function (coords) {\n        return point(coords, properties);\n    }), options);\n}\n\n/**\n * Creates a {@link Polygon} {@link Feature} from an Array of LinearRings.\n *\n * @name polygon\n * @param {Array<Array<Array<number>>>} coordinates an array of LinearRings\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<Polygon>} Polygon Feature\n * @example\n * var polygon = turf.polygon([[[-5, 52], [-4, 56], [-2, 51], [-7, 54], [-5, 52]]], { name: 'poly1' });\n *\n * //=polygon\n */\nfunction polygon(coordinates, properties, options) {\n    if (!coordinates) throw new Error('coordinates is required');\n\n    for (var i = 0; i < coordinates.length; i++) {\n        var ring = coordinates[i];\n        if (ring.length < 4) {\n            throw new Error('Each LinearRing of a Polygon must have 4 or more Positions.');\n        }\n        for (var j = 0; j < ring[ring.length - 1].length; j++) {\n            // Check if first point of Polygon contains two numbers\n            if (i === 0 && j === 0 && !isNumber(ring[0][0]) || !isNumber(ring[0][1])) throw new Error('coordinates must contain numbers');\n            if (ring[ring.length - 1][j] !== ring[0][j]) {\n                throw new Error('First and last Position are not equivalent.');\n            }\n        }\n    }\n\n    return feature({\n        type: 'Polygon',\n        coordinates: coordinates\n    }, properties, options);\n}\n\n/**\n * Creates a {@link Polygon} {@link FeatureCollection} from an Array of Polygon coordinates.\n *\n * @name polygons\n * @param {Array<Array<Array<Array<number>>>>} coordinates an array of Polygon coordinates\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the FeatureCollection\n * @returns {FeatureCollection<Polygon>} Polygon FeatureCollection\n * @example\n * var polygons = turf.polygons([\n *   [[[-5, 52], [-4, 56], [-2, 51], [-7, 54], [-5, 52]]],\n *   [[[-15, 42], [-14, 46], [-12, 41], [-17, 44], [-15, 42]]],\n * ]);\n *\n * //=polygons\n */\nfunction polygons(coordinates, properties, options) {\n    if (!coordinates) throw new Error('coordinates is required');\n    if (!Array.isArray(coordinates)) throw new Error('coordinates must be an Array');\n\n    return featureCollection(coordinates.map(function (coords) {\n        return polygon(coords, properties);\n    }), options);\n}\n\n/**\n * Creates a {@link LineString} {@link Feature} from an Array of Positions.\n *\n * @name lineString\n * @param {Array<Array<number>>} coordinates an array of Positions\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<LineString>} LineString Feature\n * @example\n * var linestring1 = turf.lineString([[-24, 63], [-23, 60], [-25, 65], [-20, 69]], {name: 'line 1'});\n * var linestring2 = turf.lineString([[-14, 43], [-13, 40], [-15, 45], [-10, 49]], {name: 'line 2'});\n *\n * //=linestring1\n * //=linestring2\n */\nfunction lineString(coordinates, properties, options) {\n    if (!coordinates) throw new Error('coordinates is required');\n    if (coordinates.length < 2) throw new Error('coordinates must be an array of two or more positions');\n    // Check if first point of LineString contains two numbers\n    if (!isNumber(coordinates[0][1]) || !isNumber(coordinates[0][1])) throw new Error('coordinates must contain numbers');\n\n    return feature({\n        type: 'LineString',\n        coordinates: coordinates\n    }, properties, options);\n}\n\n/**\n * Creates a {@link LineString} {@link FeatureCollection} from an Array of LineString coordinates.\n *\n * @name lineStrings\n * @param {Array<Array<number>>} coordinates an array of LinearRings\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the FeatureCollection\n * @param {string|number} [options.id] Identifier associated with the FeatureCollection\n * @returns {FeatureCollection<LineString>} LineString FeatureCollection\n * @example\n * var linestrings = turf.lineStrings([\n *   [[-24, 63], [-23, 60], [-25, 65], [-20, 69]],\n *   [[-14, 43], [-13, 40], [-15, 45], [-10, 49]]\n * ]);\n *\n * //=linestrings\n */\nfunction lineStrings(coordinates, properties, options) {\n    if (!coordinates) throw new Error('coordinates is required');\n    if (!Array.isArray(coordinates)) throw new Error('coordinates must be an Array');\n\n    return featureCollection(coordinates.map(function (coords) {\n        return lineString(coords, properties);\n    }), options);\n}\n\n/**\n * Takes one or more {@link Feature|Features} and creates a {@link FeatureCollection}.\n *\n * @name featureCollection\n * @param {Feature[]} features input features\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {FeatureCollection} FeatureCollection of Features\n * @example\n * var locationA = turf.point([-75.343, 39.984], {name: 'Location A'});\n * var locationB = turf.point([-75.833, 39.284], {name: 'Location B'});\n * var locationC = turf.point([-75.534, 39.123], {name: 'Location C'});\n *\n * var collection = turf.featureCollection([\n *   locationA,\n *   locationB,\n *   locationC\n * ]);\n *\n * //=collection\n */\nfunction featureCollection(features, options) {\n    // Optional Parameters\n    options = options || {};\n    if (!isObject(options)) throw new Error('options is invalid');\n    var bbox = options.bbox;\n    var id = options.id;\n\n    // Validation\n    if (!features) throw new Error('No features passed');\n    if (!Array.isArray(features)) throw new Error('features must be an Array');\n    if (bbox) validateBBox(bbox);\n    if (id) validateId(id);\n\n    // Main\n    var fc = {type: 'FeatureCollection'};\n    if (id) fc.id = id;\n    if (bbox) fc.bbox = bbox;\n    fc.features = features;\n    return fc;\n}\n\n/**\n * Creates a {@link Feature<MultiLineString>} based on a\n * coordinate array. Properties can be added optionally.\n *\n * @name multiLineString\n * @param {Array<Array<Array<number>>>} coordinates an array of LineStrings\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<MultiLineString>} a MultiLineString feature\n * @throws {Error} if no coordinates are passed\n * @example\n * var multiLine = turf.multiLineString([[[0,0],[10,10]]]);\n *\n * //=multiLine\n */\nfunction multiLineString(coordinates, properties, options) {\n    if (!coordinates) throw new Error('coordinates is required');\n\n    return feature({\n        type: 'MultiLineString',\n        coordinates: coordinates\n    }, properties, options);\n}\n\n/**\n * Creates a {@link Feature<MultiPoint>} based on a\n * coordinate array. Properties can be added optionally.\n *\n * @name multiPoint\n * @param {Array<Array<number>>} coordinates an array of Positions\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<MultiPoint>} a MultiPoint feature\n * @throws {Error} if no coordinates are passed\n * @example\n * var multiPt = turf.multiPoint([[0,0],[10,10]]);\n *\n * //=multiPt\n */\nfunction multiPoint(coordinates, properties, options) {\n    if (!coordinates) throw new Error('coordinates is required');\n\n    return feature({\n        type: 'MultiPoint',\n        coordinates: coordinates\n    }, properties, options);\n}\n\n/**\n * Creates a {@link Feature<MultiPolygon>} based on a\n * coordinate array. Properties can be added optionally.\n *\n * @name multiPolygon\n * @param {Array<Array<Array<Array<number>>>>} coordinates an array of Polygons\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<MultiPolygon>} a multipolygon feature\n * @throws {Error} if no coordinates are passed\n * @example\n * var multiPoly = turf.multiPolygon([[[[0,0],[0,10],[10,10],[10,0],[0,0]]]]);\n *\n * //=multiPoly\n *\n */\nfunction multiPolygon(coordinates, properties, options) {\n    if (!coordinates) throw new Error('coordinates is required');\n\n    return feature({\n        type: 'MultiPolygon',\n        coordinates: coordinates\n    }, properties, options);\n}\n\n/**\n * Creates a {@link Feature<GeometryCollection>} based on a\n * coordinate array. Properties can be added optionally.\n *\n * @name geometryCollection\n * @param {Array<Geometry>} geometries an array of GeoJSON Geometries\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<GeometryCollection>} a GeoJSON GeometryCollection Feature\n * @example\n * var pt = {\n *     \"type\": \"Point\",\n *       \"coordinates\": [100, 0]\n *     };\n * var line = {\n *     \"type\": \"LineString\",\n *     \"coordinates\": [ [101, 0], [102, 1] ]\n *   };\n * var collection = turf.geometryCollection([pt, line]);\n *\n * //=collection\n */\nfunction geometryCollection(geometries, properties, options) {\n    if (!geometries) throw new Error('geometries is required');\n    if (!Array.isArray(geometries)) throw new Error('geometries must be an Array');\n\n    return feature({\n        type: 'GeometryCollection',\n        geometries: geometries\n    }, properties, options);\n}\n\n/**\n * Round number to precision\n *\n * @param {number} num Number\n * @param {number} [precision=0] Precision\n * @returns {number} rounded number\n * @example\n * turf.round(120.4321)\n * //=120\n *\n * turf.round(120.4321, 2)\n * //=120.43\n */\nfunction round(num, precision) {\n    if (num === undefined || num === null || isNaN(num)) throw new Error('num is required');\n    if (precision && !(precision >= 0)) throw new Error('precision must be a positive number');\n    var multiplier = Math.pow(10, precision || 0);\n    return Math.round(num * multiplier) / multiplier;\n}\n\n/**\n * Convert a distance measurement (assuming a spherical Earth) from radians to a more friendly unit.\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @name radiansToLength\n * @param {number} radians in radians across the sphere\n * @param {string} [units='kilometers'] can be degrees, radians, miles, or kilometers inches, yards, metres, meters, kilometres, kilometers.\n * @returns {number} distance\n */\nfunction radiansToLength(radians, units) {\n    if (radians === undefined || radians === null) throw new Error('radians is required');\n\n    if (units && typeof units !== 'string') throw new Error('units must be a string');\n    var factor = factors[units || 'kilometers'];\n    if (!factor) throw new Error(units + ' units is invalid');\n    return radians * factor;\n}\n\n/**\n * Convert a distance measurement (assuming a spherical Earth) from a real-world unit into radians\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @name lengthToRadians\n * @param {number} distance in real units\n * @param {string} [units='kilometers'] can be degrees, radians, miles, or kilometers inches, yards, metres, meters, kilometres, kilometers.\n * @returns {number} radians\n */\nfunction lengthToRadians(distance, units) {\n    if (distance === undefined || distance === null) throw new Error('distance is required');\n\n    if (units && typeof units !== 'string') throw new Error('units must be a string');\n    var factor = factors[units || 'kilometers'];\n    if (!factor) throw new Error(units + ' units is invalid');\n    return distance / factor;\n}\n\n/**\n * Convert a distance measurement (assuming a spherical Earth) from a real-world unit into degrees\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, centimeters, kilometres, feet\n *\n * @name lengthToDegrees\n * @param {number} distance in real units\n * @param {string} [units='kilometers'] can be degrees, radians, miles, or kilometers inches, yards, metres, meters, kilometres, kilometers.\n * @returns {number} degrees\n */\nfunction lengthToDegrees(distance, units) {\n    return radiansToDegrees(lengthToRadians(distance, units));\n}\n\n/**\n * Converts any bearing angle from the north line direction (positive clockwise)\n * and returns an angle between 0-360 degrees (positive clockwise), 0 being the north line\n *\n * @name bearingToAzimuth\n * @param {number} bearing angle, between -180 and +180 degrees\n * @returns {number} angle between 0 and 360 degrees\n */\nfunction bearingToAzimuth(bearing) {\n    if (bearing === null || bearing === undefined) throw new Error('bearing is required');\n\n    var angle = bearing % 360;\n    if (angle < 0) angle += 360;\n    return angle;\n}\n\n/**\n * Converts an angle in radians to degrees\n *\n * @name radiansToDegrees\n * @param {number} radians angle in radians\n * @returns {number} degrees between 0 and 360 degrees\n */\nfunction radiansToDegrees(radians) {\n    if (radians === null || radians === undefined) throw new Error('radians is required');\n\n    var degrees = radians % (2 * Math.PI);\n    return degrees * 180 / Math.PI;\n}\n\n/**\n * Converts an angle in degrees to radians\n *\n * @name degreesToRadians\n * @param {number} degrees angle between 0 and 360 degrees\n * @returns {number} angle in radians\n */\nfunction degreesToRadians(degrees) {\n    if (degrees === null || degrees === undefined) throw new Error('degrees is required');\n\n    var radians = degrees % 360;\n    return radians * Math.PI / 180;\n}\n\n/**\n * Converts a length to the requested unit.\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @param {number} length to be converted\n * @param {string} originalUnit of the length\n * @param {string} [finalUnit='kilometers'] returned unit\n * @returns {number} the converted length\n */\nfunction convertLength(length, originalUnit, finalUnit) {\n    if (length === null || length === undefined) throw new Error('length is required');\n    if (!(length >= 0)) throw new Error('length must be a positive number');\n\n    return radiansToLength(lengthToRadians(length, originalUnit), finalUnit || 'kilometers');\n}\n\n/**\n * Converts a area to the requested unit.\n * Valid units: kilometers, kilometres, meters, metres, centimetres, millimeters, acres, miles, yards, feet, inches\n * @param {number} area to be converted\n * @param {string} [originalUnit='meters'] of the distance\n * @param {string} [finalUnit='kilometers'] returned unit\n * @returns {number} the converted distance\n */\nfunction convertArea(area, originalUnit, finalUnit) {\n    if (area === null || area === undefined) throw new Error('area is required');\n    if (!(area >= 0)) throw new Error('area must be a positive number');\n\n    var startFactor = areaFactors[originalUnit || 'meters'];\n    if (!startFactor) throw new Error('invalid original units');\n\n    var finalFactor = areaFactors[finalUnit || 'kilometers'];\n    if (!finalFactor) throw new Error('invalid final units');\n\n    return (area / startFactor) * finalFactor;\n}\n\n/**\n * isNumber\n *\n * @param {*} num Number to validate\n * @returns {boolean} true/false\n * @example\n * turf.isNumber(123)\n * //=true\n * turf.isNumber('foo')\n * //=false\n */\nfunction isNumber(num) {\n    return !isNaN(num) && num !== null && !Array.isArray(num);\n}\n\n/**\n * isObject\n *\n * @param {*} input variable to validate\n * @returns {boolean} true/false\n * @example\n * turf.isObject({elevation: 10})\n * //=true\n * turf.isObject('foo')\n * //=false\n */\nfunction isObject(input) {\n    return (!!input) && (input.constructor === Object);\n}\n\n/**\n * Validate BBox\n *\n * @private\n * @param {Array<number>} bbox BBox to validate\n * @returns {void}\n * @throws Error if BBox is not valid\n * @example\n * validateBBox([-180, -40, 110, 50])\n * //=OK\n * validateBBox([-180, -40])\n * //=Error\n * validateBBox('Foo')\n * //=Error\n * validateBBox(5)\n * //=Error\n * validateBBox(null)\n * //=Error\n * validateBBox(undefined)\n * //=Error\n */\nfunction validateBBox(bbox) {\n    if (!bbox) throw new Error('bbox is required');\n    if (!Array.isArray(bbox)) throw new Error('bbox must be an Array');\n    if (bbox.length !== 4 && bbox.length !== 6) throw new Error('bbox must be an Array of 4 or 6 numbers');\n    bbox.forEach(function (num) {\n        if (!isNumber(num)) throw new Error('bbox must only contain numbers');\n    });\n}\n\n/**\n * Validate Id\n *\n * @private\n * @param {string|number} id Id to validate\n * @returns {void}\n * @throws Error if Id is not valid\n * @example\n * validateId([-180, -40, 110, 50])\n * //=Error\n * validateId([-180, -40])\n * //=Error\n * validateId('Foo')\n * //=OK\n * validateId(5)\n * //=OK\n * validateId(null)\n * //=Error\n * validateId(undefined)\n * //=Error\n */\nfunction validateId(id) {\n    if (!id) throw new Error('id is required');\n    if (['string', 'number'].indexOf(typeof id) === -1) throw new Error('id must be a number or a string');\n}\n\n// Deprecated methods\nfunction radians2degrees() {\n    throw new Error('method has been renamed to `radiansToDegrees`');\n}\n\nfunction degrees2radians() {\n    throw new Error('method has been renamed to `degreesToRadians`');\n}\n\nfunction distanceToDegrees() {\n    throw new Error('method has been renamed to `lengthToDegrees`');\n}\n\nfunction distanceToRadians() {\n    throw new Error('method has been renamed to `lengthToRadians`');\n}\n\nfunction radiansToDistance() {\n    throw new Error('method has been renamed to `radiansToLength`');\n}\n\nfunction bearingToAngle() {\n    throw new Error('method has been renamed to `bearingToAzimuth`');\n}\n\nfunction convertDistance() {\n    throw new Error('method has been renamed to `convertLength`');\n}\n\nexport { earthRadius, factors, unitsFactors, areaFactors, feature, geometry, point, points, polygon, polygons, lineString, lineStrings, featureCollection, multiLineString, multiPoint, multiPolygon, geometryCollection, round, radiansToLength, lengthToRadians, lengthToDegrees, bearingToAzimuth, radiansToDegrees, degreesToRadians, convertLength, convertArea, isNumber, isObject, validateBBox, validateId, radians2degrees, degrees2radians, distanceToDegrees, distanceToRadians, radiansToDistance, bearingToAngle, convertDistance };\n","import { feature, isObject, lineString, point } from '@turf/helpers';\n\n/**\n * Callback for coordEach\n *\n * @callback coordEachCallback\n * @param {Array<number>} currentCoord The current coordinate being processed.\n * @param {number} coordIndex The current index of the coordinate being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n * @param {number} geometryIndex The current index of the Geometry being processed.\n */\n\n/**\n * Iterate over coordinates in any GeoJSON object, similar to Array.forEach()\n *\n * @name coordEach\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (currentCoord, coordIndex, featureIndex, multiFeatureIndex)\n * @param {boolean} [excludeWrapCoord=false] whether or not to include the final coordinate of LinearRings that wraps the ring in its iteration.\n * @returns {void}\n * @example\n * var features = turf.featureCollection([\n *   turf.point([26, 37], {\"foo\": \"bar\"}),\n *   turf.point([36, 53], {\"hello\": \"world\"})\n * ]);\n *\n * turf.coordEach(features, function (currentCoord, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) {\n *   //=currentCoord\n *   //=coordIndex\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   //=geometryIndex\n * });\n */\nfunction coordEach(geojson, callback, excludeWrapCoord) {\n    // Handles null Geometry -- Skips this GeoJSON\n    if (geojson === null) return;\n    var j, k, l, geometry, stopG, coords,\n        geometryMaybeCollection,\n        wrapShrink = 0,\n        coordIndex = 0,\n        isGeometryCollection,\n        type = geojson.type,\n        isFeatureCollection = type === 'FeatureCollection',\n        isFeature = type === 'Feature',\n        stop = isFeatureCollection ? geojson.features.length : 1;\n\n    // This logic may look a little weird. The reason why it is that way\n    // is because it's trying to be fast. GeoJSON supports multiple kinds\n    // of objects at its root: FeatureCollection, Features, Geometries.\n    // This function has the responsibility of handling all of them, and that\n    // means that some of the `for` loops you see below actually just don't apply\n    // to certain inputs. For instance, if you give this just a\n    // Point geometry, then both loops are short-circuited and all we do\n    // is gradually rename the input until it's called 'geometry'.\n    //\n    // This also aims to allocate as few resources as possible: just a\n    // few numbers and booleans, rather than any temporary arrays as would\n    // be required with the normalization approach.\n    for (var featureIndex = 0; featureIndex < stop; featureIndex++) {\n        geometryMaybeCollection = (isFeatureCollection ? geojson.features[featureIndex].geometry :\n            (isFeature ? geojson.geometry : geojson));\n        isGeometryCollection = (geometryMaybeCollection) ? geometryMaybeCollection.type === 'GeometryCollection' : false;\n        stopG = isGeometryCollection ? geometryMaybeCollection.geometries.length : 1;\n\n        for (var geomIndex = 0; geomIndex < stopG; geomIndex++) {\n            var multiFeatureIndex = 0;\n            var geometryIndex = 0;\n            geometry = isGeometryCollection ?\n                geometryMaybeCollection.geometries[geomIndex] : geometryMaybeCollection;\n\n            // Handles null Geometry -- Skips this geometry\n            if (geometry === null) continue;\n            coords = geometry.coordinates;\n            var geomType = geometry.type;\n\n            wrapShrink = (excludeWrapCoord && (geomType === 'Polygon' || geomType === 'MultiPolygon')) ? 1 : 0;\n\n            switch (geomType) {\n            case null:\n                break;\n            case 'Point':\n                if (callback(coords, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) return false;\n                coordIndex++;\n                multiFeatureIndex++;\n                break;\n            case 'LineString':\n            case 'MultiPoint':\n                for (j = 0; j < coords.length; j++) {\n                    if (callback(coords[j], coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) return false;\n                    coordIndex++;\n                    if (geomType === 'MultiPoint') multiFeatureIndex++;\n                }\n                if (geomType === 'LineString') multiFeatureIndex++;\n                break;\n            case 'Polygon':\n            case 'MultiLineString':\n                for (j = 0; j < coords.length; j++) {\n                    for (k = 0; k < coords[j].length - wrapShrink; k++) {\n                        if (callback(coords[j][k], coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) return false;\n                        coordIndex++;\n                    }\n                    if (geomType === 'MultiLineString') multiFeatureIndex++;\n                    if (geomType === 'Polygon') geometryIndex++;\n                }\n                if (geomType === 'Polygon') multiFeatureIndex++;\n                break;\n            case 'MultiPolygon':\n                for (j = 0; j < coords.length; j++) {\n                    if (geomType === 'MultiPolygon') geometryIndex = 0;\n                    for (k = 0; k < coords[j].length; k++) {\n                        for (l = 0; l < coords[j][k].length - wrapShrink; l++) {\n                            if (callback(coords[j][k][l], coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) return false;\n                            coordIndex++;\n                        }\n                        geometryIndex++;\n                    }\n                    multiFeatureIndex++;\n                }\n                break;\n            case 'GeometryCollection':\n                for (j = 0; j < geometry.geometries.length; j++)\n                    if (coordEach(geometry.geometries[j], callback, excludeWrapCoord) === false) return false;\n                break;\n            default:\n                throw new Error('Unknown Geometry Type');\n            }\n        }\n    }\n}\n\n/**\n * Callback for coordReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback coordReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {Array<number>} currentCoord The current coordinate being processed.\n * @param {number} coordIndex The current index of the coordinate being processed.\n * Starts at index 0, if an initialValue is provided, and at index 1 otherwise.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n * @param {number} geometryIndex The current index of the Geometry being processed.\n */\n\n/**\n * Reduce coordinates in any GeoJSON object, similar to Array.reduce()\n *\n * @name coordReduce\n * @param {FeatureCollection|Geometry|Feature} geojson any GeoJSON object\n * @param {Function} callback a method that takes (previousValue, currentCoord, coordIndex)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @param {boolean} [excludeWrapCoord=false] whether or not to include the final coordinate of LinearRings that wraps the ring in its iteration.\n * @returns {*} The value that results from the reduction.\n * @example\n * var features = turf.featureCollection([\n *   turf.point([26, 37], {\"foo\": \"bar\"}),\n *   turf.point([36, 53], {\"hello\": \"world\"})\n * ]);\n *\n * turf.coordReduce(features, function (previousValue, currentCoord, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) {\n *   //=previousValue\n *   //=currentCoord\n *   //=coordIndex\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   //=geometryIndex\n *   return currentCoord;\n * });\n */\nfunction coordReduce(geojson, callback, initialValue, excludeWrapCoord) {\n    var previousValue = initialValue;\n    coordEach(geojson, function (currentCoord, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) {\n        if (coordIndex === 0 && initialValue === undefined) previousValue = currentCoord;\n        else previousValue = callback(previousValue, currentCoord, coordIndex, featureIndex, multiFeatureIndex, geometryIndex);\n    }, excludeWrapCoord);\n    return previousValue;\n}\n\n/**\n * Callback for propEach\n *\n * @callback propEachCallback\n * @param {Object} currentProperties The current Properties being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n */\n\n/**\n * Iterate over properties in any GeoJSON object, similar to Array.forEach()\n *\n * @name propEach\n * @param {FeatureCollection|Feature} geojson any GeoJSON object\n * @param {Function} callback a method that takes (currentProperties, featureIndex)\n * @returns {void}\n * @example\n * var features = turf.featureCollection([\n *     turf.point([26, 37], {foo: 'bar'}),\n *     turf.point([36, 53], {hello: 'world'})\n * ]);\n *\n * turf.propEach(features, function (currentProperties, featureIndex) {\n *   //=currentProperties\n *   //=featureIndex\n * });\n */\nfunction propEach(geojson, callback) {\n    var i;\n    switch (geojson.type) {\n    case 'FeatureCollection':\n        for (i = 0; i < geojson.features.length; i++) {\n            if (callback(geojson.features[i].properties, i) === false) break;\n        }\n        break;\n    case 'Feature':\n        callback(geojson.properties, 0);\n        break;\n    }\n}\n\n\n/**\n * Callback for propReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback propReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {*} currentProperties The current Properties being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n */\n\n/**\n * Reduce properties in any GeoJSON object into a single value,\n * similar to how Array.reduce works. However, in this case we lazily run\n * the reduction, so an array of all properties is unnecessary.\n *\n * @name propReduce\n * @param {FeatureCollection|Feature} geojson any GeoJSON object\n * @param {Function} callback a method that takes (previousValue, currentProperties, featureIndex)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @returns {*} The value that results from the reduction.\n * @example\n * var features = turf.featureCollection([\n *     turf.point([26, 37], {foo: 'bar'}),\n *     turf.point([36, 53], {hello: 'world'})\n * ]);\n *\n * turf.propReduce(features, function (previousValue, currentProperties, featureIndex) {\n *   //=previousValue\n *   //=currentProperties\n *   //=featureIndex\n *   return currentProperties\n * });\n */\nfunction propReduce(geojson, callback, initialValue) {\n    var previousValue = initialValue;\n    propEach(geojson, function (currentProperties, featureIndex) {\n        if (featureIndex === 0 && initialValue === undefined) previousValue = currentProperties;\n        else previousValue = callback(previousValue, currentProperties, featureIndex);\n    });\n    return previousValue;\n}\n\n/**\n * Callback for featureEach\n *\n * @callback featureEachCallback\n * @param {Feature<any>} currentFeature The current Feature being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n */\n\n/**\n * Iterate over features in any GeoJSON object, similar to\n * Array.forEach.\n *\n * @name featureEach\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (currentFeature, featureIndex)\n * @returns {void}\n * @example\n * var features = turf.featureCollection([\n *   turf.point([26, 37], {foo: 'bar'}),\n *   turf.point([36, 53], {hello: 'world'})\n * ]);\n *\n * turf.featureEach(features, function (currentFeature, featureIndex) {\n *   //=currentFeature\n *   //=featureIndex\n * });\n */\nfunction featureEach(geojson, callback) {\n    if (geojson.type === 'Feature') {\n        callback(geojson, 0);\n    } else if (geojson.type === 'FeatureCollection') {\n        for (var i = 0; i < geojson.features.length; i++) {\n            if (callback(geojson.features[i], i) === false) break;\n        }\n    }\n}\n\n/**\n * Callback for featureReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback featureReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {Feature} currentFeature The current Feature being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n */\n\n/**\n * Reduce features in any GeoJSON object, similar to Array.reduce().\n *\n * @name featureReduce\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (previousValue, currentFeature, featureIndex)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @returns {*} The value that results from the reduction.\n * @example\n * var features = turf.featureCollection([\n *   turf.point([26, 37], {\"foo\": \"bar\"}),\n *   turf.point([36, 53], {\"hello\": \"world\"})\n * ]);\n *\n * turf.featureReduce(features, function (previousValue, currentFeature, featureIndex) {\n *   //=previousValue\n *   //=currentFeature\n *   //=featureIndex\n *   return currentFeature\n * });\n */\nfunction featureReduce(geojson, callback, initialValue) {\n    var previousValue = initialValue;\n    featureEach(geojson, function (currentFeature, featureIndex) {\n        if (featureIndex === 0 && initialValue === undefined) previousValue = currentFeature;\n        else previousValue = callback(previousValue, currentFeature, featureIndex);\n    });\n    return previousValue;\n}\n\n/**\n * Get all coordinates from any GeoJSON object.\n *\n * @name coordAll\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @returns {Array<Array<number>>} coordinate position array\n * @example\n * var features = turf.featureCollection([\n *   turf.point([26, 37], {foo: 'bar'}),\n *   turf.point([36, 53], {hello: 'world'})\n * ]);\n *\n * var coords = turf.coordAll(features);\n * //= [[26, 37], [36, 53]]\n */\nfunction coordAll(geojson) {\n    var coords = [];\n    coordEach(geojson, function (coord) {\n        coords.push(coord);\n    });\n    return coords;\n}\n\n/**\n * Callback for geomEach\n *\n * @callback geomEachCallback\n * @param {Geometry} currentGeometry The current Geometry being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {Object} featureProperties The current Feature Properties being processed.\n * @param {Array<number>} featureBBox The current Feature BBox being processed.\n * @param {number|string} featureId The current Feature Id being processed.\n */\n\n/**\n * Iterate over each geometry in any GeoJSON object, similar to Array.forEach()\n *\n * @name geomEach\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (currentGeometry, featureIndex, featureProperties, featureBBox, featureId)\n * @returns {void}\n * @example\n * var features = turf.featureCollection([\n *     turf.point([26, 37], {foo: 'bar'}),\n *     turf.point([36, 53], {hello: 'world'})\n * ]);\n *\n * turf.geomEach(features, function (currentGeometry, featureIndex, featureProperties, featureBBox, featureId) {\n *   //=currentGeometry\n *   //=featureIndex\n *   //=featureProperties\n *   //=featureBBox\n *   //=featureId\n * });\n */\nfunction geomEach(geojson, callback) {\n    var i, j, g, geometry, stopG,\n        geometryMaybeCollection,\n        isGeometryCollection,\n        featureProperties,\n        featureBBox,\n        featureId,\n        featureIndex = 0,\n        isFeatureCollection = geojson.type === 'FeatureCollection',\n        isFeature = geojson.type === 'Feature',\n        stop = isFeatureCollection ? geojson.features.length : 1;\n\n    // This logic may look a little weird. The reason why it is that way\n    // is because it's trying to be fast. GeoJSON supports multiple kinds\n    // of objects at its root: FeatureCollection, Features, Geometries.\n    // This function has the responsibility of handling all of them, and that\n    // means that some of the `for` loops you see below actually just don't apply\n    // to certain inputs. For instance, if you give this just a\n    // Point geometry, then both loops are short-circuited and all we do\n    // is gradually rename the input until it's called 'geometry'.\n    //\n    // This also aims to allocate as few resources as possible: just a\n    // few numbers and booleans, rather than any temporary arrays as would\n    // be required with the normalization approach.\n    for (i = 0; i < stop; i++) {\n\n        geometryMaybeCollection = (isFeatureCollection ? geojson.features[i].geometry :\n            (isFeature ? geojson.geometry : geojson));\n        featureProperties = (isFeatureCollection ? geojson.features[i].properties :\n            (isFeature ? geojson.properties : {}));\n        featureBBox = (isFeatureCollection ? geojson.features[i].bbox :\n            (isFeature ? geojson.bbox : undefined));\n        featureId = (isFeatureCollection ? geojson.features[i].id :\n            (isFeature ? geojson.id : undefined));\n        isGeometryCollection = (geometryMaybeCollection) ? geometryMaybeCollection.type === 'GeometryCollection' : false;\n        stopG = isGeometryCollection ? geometryMaybeCollection.geometries.length : 1;\n\n        for (g = 0; g < stopG; g++) {\n            geometry = isGeometryCollection ?\n                geometryMaybeCollection.geometries[g] : geometryMaybeCollection;\n\n            // Handle null Geometry\n            if (geometry === null) {\n                if (callback(null, featureIndex, featureProperties, featureBBox, featureId) === false) return false;\n                continue;\n            }\n            switch (geometry.type) {\n            case 'Point':\n            case 'LineString':\n            case 'MultiPoint':\n            case 'Polygon':\n            case 'MultiLineString':\n            case 'MultiPolygon': {\n                if (callback(geometry, featureIndex, featureProperties, featureBBox, featureId) === false) return false;\n                break;\n            }\n            case 'GeometryCollection': {\n                for (j = 0; j < geometry.geometries.length; j++) {\n                    if (callback(geometry.geometries[j], featureIndex, featureProperties, featureBBox, featureId) === false) return false;\n                }\n                break;\n            }\n            default:\n                throw new Error('Unknown Geometry Type');\n            }\n        }\n        // Only increase `featureIndex` per each feature\n        featureIndex++;\n    }\n}\n\n/**\n * Callback for geomReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback geomReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {Geometry} currentGeometry The current Geometry being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {Object} featureProperties The current Feature Properties being processed.\n * @param {Array<number>} featureBBox The current Feature BBox being processed.\n * @param {number|string} featureId The current Feature Id being processed.\n */\n\n/**\n * Reduce geometry in any GeoJSON object, similar to Array.reduce().\n *\n * @name geomReduce\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (previousValue, currentGeometry, featureIndex, featureProperties, featureBBox, featureId)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @returns {*} The value that results from the reduction.\n * @example\n * var features = turf.featureCollection([\n *     turf.point([26, 37], {foo: 'bar'}),\n *     turf.point([36, 53], {hello: 'world'})\n * ]);\n *\n * turf.geomReduce(features, function (previousValue, currentGeometry, featureIndex, featureProperties, featureBBox, featureId) {\n *   //=previousValue\n *   //=currentGeometry\n *   //=featureIndex\n *   //=featureProperties\n *   //=featureBBox\n *   //=featureId\n *   return currentGeometry\n * });\n */\nfunction geomReduce(geojson, callback, initialValue) {\n    var previousValue = initialValue;\n    geomEach(geojson, function (currentGeometry, featureIndex, featureProperties, featureBBox, featureId) {\n        if (featureIndex === 0 && initialValue === undefined) previousValue = currentGeometry;\n        else previousValue = callback(previousValue, currentGeometry, featureIndex, featureProperties, featureBBox, featureId);\n    });\n    return previousValue;\n}\n\n/**\n * Callback for flattenEach\n *\n * @callback flattenEachCallback\n * @param {Feature} currentFeature The current flattened feature being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n */\n\n/**\n * Iterate over flattened features in any GeoJSON object, similar to\n * Array.forEach.\n *\n * @name flattenEach\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (currentFeature, featureIndex, multiFeatureIndex)\n * @example\n * var features = turf.featureCollection([\n *     turf.point([26, 37], {foo: 'bar'}),\n *     turf.multiPoint([[40, 30], [36, 53]], {hello: 'world'})\n * ]);\n *\n * turf.flattenEach(features, function (currentFeature, featureIndex, multiFeatureIndex) {\n *   //=currentFeature\n *   //=featureIndex\n *   //=multiFeatureIndex\n * });\n */\nfunction flattenEach(geojson, callback) {\n    geomEach(geojson, function (geometry, featureIndex, properties, bbox, id) {\n        // Callback for single geometry\n        var type = (geometry === null) ? null : geometry.type;\n        switch (type) {\n        case null:\n        case 'Point':\n        case 'LineString':\n        case 'Polygon':\n            if (callback(feature(geometry, properties, {bbox: bbox, id: id}), featureIndex, 0) === false) return false;\n            return;\n        }\n\n        var geomType;\n\n        // Callback for multi-geometry\n        switch (type) {\n        case 'MultiPoint':\n            geomType = 'Point';\n            break;\n        case 'MultiLineString':\n            geomType = 'LineString';\n            break;\n        case 'MultiPolygon':\n            geomType = 'Polygon';\n            break;\n        }\n\n        for (var multiFeatureIndex = 0; multiFeatureIndex < geometry.coordinates.length; multiFeatureIndex++) {\n            var coordinate = geometry.coordinates[multiFeatureIndex];\n            var geom = {\n                type: geomType,\n                coordinates: coordinate\n            };\n            if (callback(feature(geom, properties), featureIndex, multiFeatureIndex) === false) return false;\n        }\n    });\n}\n\n/**\n * Callback for flattenReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback flattenReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {Feature} currentFeature The current Feature being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n */\n\n/**\n * Reduce flattened features in any GeoJSON object, similar to Array.reduce().\n *\n * @name flattenReduce\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (previousValue, currentFeature, featureIndex, multiFeatureIndex)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @returns {*} The value that results from the reduction.\n * @example\n * var features = turf.featureCollection([\n *     turf.point([26, 37], {foo: 'bar'}),\n *     turf.multiPoint([[40, 30], [36, 53]], {hello: 'world'})\n * ]);\n *\n * turf.flattenReduce(features, function (previousValue, currentFeature, featureIndex, multiFeatureIndex) {\n *   //=previousValue\n *   //=currentFeature\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   return currentFeature\n * });\n */\nfunction flattenReduce(geojson, callback, initialValue) {\n    var previousValue = initialValue;\n    flattenEach(geojson, function (currentFeature, featureIndex, multiFeatureIndex) {\n        if (featureIndex === 0 && multiFeatureIndex === 0 && initialValue === undefined) previousValue = currentFeature;\n        else previousValue = callback(previousValue, currentFeature, featureIndex, multiFeatureIndex);\n    });\n    return previousValue;\n}\n\n/**\n * Callback for segmentEach\n *\n * @callback segmentEachCallback\n * @param {Feature<LineString>} currentSegment The current Segment being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n * @param {number} geometryIndex The current index of the Geometry being processed.\n * @param {number} segmentIndex The current index of the Segment being processed.\n * @returns {void}\n */\n\n/**\n * Iterate over 2-vertex line segment in any GeoJSON object, similar to Array.forEach()\n * (Multi)Point geometries do not contain segments therefore they are ignored during this operation.\n *\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON\n * @param {Function} callback a method that takes (currentSegment, featureIndex, multiFeatureIndex, geometryIndex, segmentIndex)\n * @returns {void}\n * @example\n * var polygon = turf.polygon([[[-50, 5], [-40, -10], [-50, -10], [-40, 5], [-50, 5]]]);\n *\n * // Iterate over GeoJSON by 2-vertex segments\n * turf.segmentEach(polygon, function (currentSegment, featureIndex, multiFeatureIndex, geometryIndex, segmentIndex) {\n *   //=currentSegment\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   //=geometryIndex\n *   //=segmentIndex\n * });\n *\n * // Calculate the total number of segments\n * var total = 0;\n * turf.segmentEach(polygon, function () {\n *     total++;\n * });\n */\nfunction segmentEach(geojson, callback) {\n    flattenEach(geojson, function (feature$$1, featureIndex, multiFeatureIndex) {\n        var segmentIndex = 0;\n\n        // Exclude null Geometries\n        if (!feature$$1.geometry) return;\n        // (Multi)Point geometries do not contain segments therefore they are ignored during this operation.\n        var type = feature$$1.geometry.type;\n        if (type === 'Point' || type === 'MultiPoint') return;\n\n        // Generate 2-vertex line segments\n        var previousCoords;\n        if (coordEach(feature$$1, function (currentCoord, coordIndex, featureIndexCoord, mutliPartIndexCoord, geometryIndex) {\n            // Simulating a meta.coordReduce() since `reduce` operations cannot be stopped by returning `false`\n            if (previousCoords === undefined) {\n                previousCoords = currentCoord;\n                return;\n            }\n            var currentSegment = lineString([previousCoords, currentCoord], feature$$1.properties);\n            if (callback(currentSegment, featureIndex, multiFeatureIndex, geometryIndex, segmentIndex) === false) return false;\n            segmentIndex++;\n            previousCoords = currentCoord;\n        }) === false) return false;\n    });\n}\n\n/**\n * Callback for segmentReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback segmentReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {Feature<LineString>} currentSegment The current Segment being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n * @param {number} geometryIndex The current index of the Geometry being processed.\n * @param {number} segmentIndex The current index of the Segment being processed.\n */\n\n/**\n * Reduce 2-vertex line segment in any GeoJSON object, similar to Array.reduce()\n * (Multi)Point geometries do not contain segments therefore they are ignored during this operation.\n *\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON\n * @param {Function} callback a method that takes (previousValue, currentSegment, currentIndex)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @returns {void}\n * @example\n * var polygon = turf.polygon([[[-50, 5], [-40, -10], [-50, -10], [-40, 5], [-50, 5]]]);\n *\n * // Iterate over GeoJSON by 2-vertex segments\n * turf.segmentReduce(polygon, function (previousSegment, currentSegment, featureIndex, multiFeatureIndex, geometryIndex, segmentIndex) {\n *   //= previousSegment\n *   //= currentSegment\n *   //= featureIndex\n *   //= multiFeatureIndex\n *   //= geometryIndex\n *   //= segmentInex\n *   return currentSegment\n * });\n *\n * // Calculate the total number of segments\n * var initialValue = 0\n * var total = turf.segmentReduce(polygon, function (previousValue) {\n *     previousValue++;\n *     return previousValue;\n * }, initialValue);\n */\nfunction segmentReduce(geojson, callback, initialValue) {\n    var previousValue = initialValue;\n    var started = false;\n    segmentEach(geojson, function (currentSegment, featureIndex, multiFeatureIndex, geometryIndex, segmentIndex) {\n        if (started === false && initialValue === undefined) previousValue = currentSegment;\n        else previousValue = callback(previousValue, currentSegment, featureIndex, multiFeatureIndex, geometryIndex, segmentIndex);\n        started = true;\n    });\n    return previousValue;\n}\n\n/**\n * Callback for lineEach\n *\n * @callback lineEachCallback\n * @param {Feature<LineString>} currentLine The current LineString|LinearRing being processed\n * @param {number} featureIndex The current index of the Feature being processed\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed\n * @param {number} geometryIndex The current index of the Geometry being processed\n */\n\n/**\n * Iterate over line or ring coordinates in LineString, Polygon, MultiLineString, MultiPolygon Features or Geometries,\n * similar to Array.forEach.\n *\n * @name lineEach\n * @param {Geometry|Feature<LineString|Polygon|MultiLineString|MultiPolygon>} geojson object\n * @param {Function} callback a method that takes (currentLine, featureIndex, multiFeatureIndex, geometryIndex)\n * @example\n * var multiLine = turf.multiLineString([\n *   [[26, 37], [35, 45]],\n *   [[36, 53], [38, 50], [41, 55]]\n * ]);\n *\n * turf.lineEach(multiLine, function (currentLine, featureIndex, multiFeatureIndex, geometryIndex) {\n *   //=currentLine\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   //=geometryIndex\n * });\n */\nfunction lineEach(geojson, callback) {\n    // validation\n    if (!geojson) throw new Error('geojson is required');\n\n    flattenEach(geojson, function (feature$$1, featureIndex, multiFeatureIndex) {\n        if (feature$$1.geometry === null) return;\n        var type = feature$$1.geometry.type;\n        var coords = feature$$1.geometry.coordinates;\n        switch (type) {\n        case 'LineString':\n            if (callback(feature$$1, featureIndex, multiFeatureIndex, 0, 0) === false) return false;\n            break;\n        case 'Polygon':\n            for (var geometryIndex = 0; geometryIndex < coords.length; geometryIndex++) {\n                if (callback(lineString(coords[geometryIndex], feature$$1.properties), featureIndex, multiFeatureIndex, geometryIndex) === false) return false;\n            }\n            break;\n        }\n    });\n}\n\n/**\n * Callback for lineReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback lineReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {Feature<LineString>} currentLine The current LineString|LinearRing being processed.\n * @param {number} featureIndex The current index of the Feature being processed\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed\n * @param {number} geometryIndex The current index of the Geometry being processed\n */\n\n/**\n * Reduce features in any GeoJSON object, similar to Array.reduce().\n *\n * @name lineReduce\n * @param {Geometry|Feature<LineString|Polygon|MultiLineString|MultiPolygon>} geojson object\n * @param {Function} callback a method that takes (previousValue, currentLine, featureIndex, multiFeatureIndex, geometryIndex)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @returns {*} The value that results from the reduction.\n * @example\n * var multiPoly = turf.multiPolygon([\n *   turf.polygon([[[12,48],[2,41],[24,38],[12,48]], [[9,44],[13,41],[13,45],[9,44]]]),\n *   turf.polygon([[[5, 5], [0, 0], [2, 2], [4, 4], [5, 5]]])\n * ]);\n *\n * turf.lineReduce(multiPoly, function (previousValue, currentLine, featureIndex, multiFeatureIndex, geometryIndex) {\n *   //=previousValue\n *   //=currentLine\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   //=geometryIndex\n *   return currentLine\n * });\n */\nfunction lineReduce(geojson, callback, initialValue) {\n    var previousValue = initialValue;\n    lineEach(geojson, function (currentLine, featureIndex, multiFeatureIndex, geometryIndex) {\n        if (featureIndex === 0 && initialValue === undefined) previousValue = currentLine;\n        else previousValue = callback(previousValue, currentLine, featureIndex, multiFeatureIndex, geometryIndex);\n    });\n    return previousValue;\n}\n\n/**\n * Finds a particular 2-vertex LineString Segment from a GeoJSON using `@turf/meta` indexes.\n *\n * Negative indexes are permitted.\n * Point & MultiPoint will always return null.\n *\n * @param {FeatureCollection|Feature|Geometry} geojson Any GeoJSON Feature or Geometry\n * @param {Object} [options={}] Optional parameters\n * @param {number} [options.featureIndex=0] Feature Index\n * @param {number} [options.multiFeatureIndex=0] Multi-Feature Index\n * @param {number} [options.geometryIndex=0] Geometry Index\n * @param {number} [options.segmentIndex=0] Segment Index\n * @param {Object} [options.properties={}] Translate Properties to output LineString\n * @param {BBox} [options.bbox={}] Translate BBox to output LineString\n * @param {number|string} [options.id={}] Translate Id to output LineString\n * @returns {Feature<LineString>} 2-vertex GeoJSON Feature LineString\n * @example\n * var multiLine = turf.multiLineString([\n *     [[10, 10], [50, 30], [30, 40]],\n *     [[-10, -10], [-50, -30], [-30, -40]]\n * ]);\n *\n * // First Segment (defaults are 0)\n * turf.findSegment(multiLine);\n * // => Feature<LineString<[[10, 10], [50, 30]]>>\n *\n * // First Segment of 2nd Multi Feature\n * turf.findSegment(multiLine, {multiFeatureIndex: 1});\n * // => Feature<LineString<[[-10, -10], [-50, -30]]>>\n *\n * // Last Segment of Last Multi Feature\n * turf.findSegment(multiLine, {multiFeatureIndex: -1, segmentIndex: -1});\n * // => Feature<LineString<[[-50, -30], [-30, -40]]>>\n */\nfunction findSegment(geojson, options) {\n    // Optional Parameters\n    options = options || {};\n    if (!isObject(options)) throw new Error('options is invalid');\n    var featureIndex = options.featureIndex || 0;\n    var multiFeatureIndex = options.multiFeatureIndex || 0;\n    var geometryIndex = options.geometryIndex || 0;\n    var segmentIndex = options.segmentIndex || 0;\n\n    // Find FeatureIndex\n    var properties = options.properties;\n    var geometry;\n\n    switch (geojson.type) {\n    case 'FeatureCollection':\n        if (featureIndex < 0) featureIndex = geojson.features.length + featureIndex;\n        properties = properties || geojson.features[featureIndex].properties;\n        geometry = geojson.features[featureIndex].geometry;\n        break;\n    case 'Feature':\n        properties = properties || geojson.properties;\n        geometry = geojson.geometry;\n        break;\n    case 'Point':\n    case 'MultiPoint':\n        return null;\n    case 'LineString':\n    case 'Polygon':\n    case 'MultiLineString':\n    case 'MultiPolygon':\n        geometry = geojson;\n        break;\n    default:\n        throw new Error('geojson is invalid');\n    }\n\n    // Find SegmentIndex\n    if (geometry === null) return null;\n    var coords = geometry.coordinates;\n    switch (geometry.type) {\n    case 'Point':\n    case 'MultiPoint':\n        return null;\n    case 'LineString':\n        if (segmentIndex < 0) segmentIndex = coords.length + segmentIndex - 1;\n        return lineString([coords[segmentIndex], coords[segmentIndex + 1]], properties, options);\n    case 'Polygon':\n        if (geometryIndex < 0) geometryIndex = coords.length + geometryIndex;\n        if (segmentIndex < 0) segmentIndex = coords[geometryIndex].length + segmentIndex - 1;\n        return lineString([coords[geometryIndex][segmentIndex], coords[geometryIndex][segmentIndex + 1]], properties, options);\n    case 'MultiLineString':\n        if (multiFeatureIndex < 0) multiFeatureIndex = coords.length + multiFeatureIndex;\n        if (segmentIndex < 0) segmentIndex = coords[multiFeatureIndex].length + segmentIndex - 1;\n        return lineString([coords[multiFeatureIndex][segmentIndex], coords[multiFeatureIndex][segmentIndex + 1]], properties, options);\n    case 'MultiPolygon':\n        if (multiFeatureIndex < 0) multiFeatureIndex = coords.length + multiFeatureIndex;\n        if (geometryIndex < 0) geometryIndex = coords[multiFeatureIndex].length + geometryIndex;\n        if (segmentIndex < 0) segmentIndex = coords[multiFeatureIndex][geometryIndex].length - segmentIndex - 1;\n        return lineString([coords[multiFeatureIndex][geometryIndex][segmentIndex], coords[multiFeatureIndex][geometryIndex][segmentIndex + 1]], properties, options);\n    }\n    throw new Error('geojson is invalid');\n}\n\n/**\n * Finds a particular Point from a GeoJSON using `@turf/meta` indexes.\n *\n * Negative indexes are permitted.\n *\n * @param {FeatureCollection|Feature|Geometry} geojson Any GeoJSON Feature or Geometry\n * @param {Object} [options={}] Optional parameters\n * @param {number} [options.featureIndex=0] Feature Index\n * @param {number} [options.multiFeatureIndex=0] Multi-Feature Index\n * @param {number} [options.geometryIndex=0] Geometry Index\n * @param {number} [options.coordIndex=0] Coord Index\n * @param {Object} [options.properties={}] Translate Properties to output Point\n * @param {BBox} [options.bbox={}] Translate BBox to output Point\n * @param {number|string} [options.id={}] Translate Id to output Point\n * @returns {Feature<Point>} 2-vertex GeoJSON Feature Point\n * @example\n * var multiLine = turf.multiLineString([\n *     [[10, 10], [50, 30], [30, 40]],\n *     [[-10, -10], [-50, -30], [-30, -40]]\n * ]);\n *\n * // First Segment (defaults are 0)\n * turf.findPoint(multiLine);\n * // => Feature<Point<[10, 10]>>\n *\n * // First Segment of the 2nd Multi-Feature\n * turf.findPoint(multiLine, {multiFeatureIndex: 1});\n * // => Feature<Point<[-10, -10]>>\n *\n * // Last Segment of last Multi-Feature\n * turf.findPoint(multiLine, {multiFeatureIndex: -1, coordIndex: -1});\n * // => Feature<Point<[-30, -40]>>\n */\nfunction findPoint(geojson, options) {\n    // Optional Parameters\n    options = options || {};\n    if (!isObject(options)) throw new Error('options is invalid');\n    var featureIndex = options.featureIndex || 0;\n    var multiFeatureIndex = options.multiFeatureIndex || 0;\n    var geometryIndex = options.geometryIndex || 0;\n    var coordIndex = options.coordIndex || 0;\n\n    // Find FeatureIndex\n    var properties = options.properties;\n    var geometry;\n\n    switch (geojson.type) {\n    case 'FeatureCollection':\n        if (featureIndex < 0) featureIndex = geojson.features.length + featureIndex;\n        properties = properties || geojson.features[featureIndex].properties;\n        geometry = geojson.features[featureIndex].geometry;\n        break;\n    case 'Feature':\n        properties = properties || geojson.properties;\n        geometry = geojson.geometry;\n        break;\n    case 'Point':\n    case 'MultiPoint':\n        return null;\n    case 'LineString':\n    case 'Polygon':\n    case 'MultiLineString':\n    case 'MultiPolygon':\n        geometry = geojson;\n        break;\n    default:\n        throw new Error('geojson is invalid');\n    }\n\n    // Find Coord Index\n    if (geometry === null) return null;\n    var coords = geometry.coordinates;\n    switch (geometry.type) {\n    case 'Point':\n        return point(coords, properties, options);\n    case 'MultiPoint':\n        if (multiFeatureIndex < 0) multiFeatureIndex = coords.length + multiFeatureIndex;\n        return point(coords[multiFeatureIndex], properties, options);\n    case 'LineString':\n        if (coordIndex < 0) coordIndex = coords.length + coordIndex;\n        return point(coords[coordIndex], properties, options);\n    case 'Polygon':\n        if (geometryIndex < 0) geometryIndex = coords.length + geometryIndex;\n        if (coordIndex < 0) coordIndex = coords[geometryIndex].length + coordIndex;\n        return point(coords[geometryIndex][coordIndex], properties, options);\n    case 'MultiLineString':\n        if (multiFeatureIndex < 0) multiFeatureIndex = coords.length + multiFeatureIndex;\n        if (coordIndex < 0) coordIndex = coords[multiFeatureIndex].length + coordIndex;\n        return point(coords[multiFeatureIndex][coordIndex], properties, options);\n    case 'MultiPolygon':\n        if (multiFeatureIndex < 0) multiFeatureIndex = coords.length + multiFeatureIndex;\n        if (geometryIndex < 0) geometryIndex = coords[multiFeatureIndex].length + geometryIndex;\n        if (coordIndex < 0) coordIndex = coords[multiFeatureIndex][geometryIndex].length - coordIndex;\n        return point(coords[multiFeatureIndex][geometryIndex][coordIndex], properties, options);\n    }\n    throw new Error('geojson is invalid');\n}\n\nexport { coordEach, coordReduce, propEach, propReduce, featureEach, featureReduce, coordAll, geomEach, geomReduce, flattenEach, flattenReduce, segmentEach, segmentReduce, lineEach, lineReduce, findSegment, findPoint };\n","import { coordEach, featureEach } from '@turf/meta';\nimport { featureCollection, point } from '@turf/helpers';\n\n/**\n * Takes a feature or set of features and returns all positions as {@link Point|points}.\n *\n * @name explode\n * @param {GeoJSON} geojson input features\n * @returns {FeatureCollection<point>} points representing the exploded input features\n * @throws {Error} if it encounters an unknown geometry type\n * @example\n * var polygon = turf.polygon([[[-81, 41], [-88, 36], [-84, 31], [-80, 33], [-77, 39], [-81, 41]]]);\n *\n * var explode = turf.explode(polygon);\n *\n * //addToMap\n * var addToMap = [polygon, explode]\n */\nfunction explode(geojson) {\n    var points = [];\n    if (geojson.type === 'FeatureCollection') {\n        featureEach(geojson, function (feature) {\n            coordEach(feature, function (coord) {\n                points.push(point(coord, feature.properties));\n            });\n        });\n    } else {\n        coordEach(geojson, function (coord) {\n            points.push(point(coord, geojson.properties));\n        });\n    }\n    return featureCollection(points);\n}\n\nexport default explode;\n","import bbox from '@turf/bbox';\nimport { isObject, point } from '@turf/helpers';\n\n/**\n * Takes a {@link Feature} or {@link FeatureCollection} and returns the absolute center point of all features.\n *\n * @name center\n * @param {GeoJSON} geojson GeoJSON to be centered\n * @param {Object} [options={}] Optional parameters\n * @param {Object} [options.properties={}] an Object that is used as the {@link Feature}'s properties\n * @returns {Feature<Point>} a Point feature at the absolute center point of all input features\n * @example\n * var features = turf.featureCollection([\n *   turf.point( [-97.522259, 35.4691]),\n *   turf.point( [-97.502754, 35.463455]),\n *   turf.point( [-97.508269, 35.463245])\n * ]);\n *\n * var center = turf.center(features);\n *\n * //addToMap\n * var addToMap = [features, center]\n * center.properties['marker-size'] = 'large';\n * center.properties['marker-color'] = '#000';\n */\nfunction center(geojson, options) {\n    // Optional parameters\n    options = options || {};\n    if (!isObject(options)) throw new Error('options is invalid');\n    var properties = options.properties;\n\n    // Input validation\n    if (!geojson) throw new Error('geojson is required');\n\n    var ext = bbox(geojson);\n    var x = (ext[0] + ext[2]) / 2;\n    var y = (ext[1] + ext[3]) / 2;\n    return point([x, y], properties);\n}\n\nexport default center;\n","import { coordEach } from '@turf/meta';\n\n/**\n * Takes a set of features, calculates the bbox of all input features, and returns a bounding box.\n *\n * @name bbox\n * @param {GeoJSON} geojson any GeoJSON object\n * @returns {BBox} bbox extent in [minX, minY, maxX, maxY] order\n * @example\n * var line = turf.lineString([[-74, 40], [-78, 42], [-82, 35]]);\n * var bbox = turf.bbox(line);\n * var bboxPolygon = turf.bboxPolygon(bbox);\n *\n * //addToMap\n * var addToMap = [line, bboxPolygon]\n */\nfunction bbox(geojson) {\n    var BBox = [Infinity, Infinity, -Infinity, -Infinity];\n    coordEach(geojson, function (coord) {\n        if (BBox[0] > coord[0]) BBox[0] = coord[0];\n        if (BBox[1] > coord[1]) BBox[1] = coord[1];\n        if (BBox[2] < coord[0]) BBox[2] = coord[0];\n        if (BBox[3] < coord[1]) BBox[3] = coord[1];\n    });\n    return BBox;\n}\n\nexport default bbox;\n","/**\n * Returns a cloned copy of the passed GeoJSON Object, including possible 'Foreign Members'.\n * ~3-5x faster than the common JSON.parse + JSON.stringify combo method.\n *\n * @name clone\n * @param {GeoJSON} geojson GeoJSON Object\n * @returns {GeoJSON} cloned GeoJSON Object\n * @example\n * var line = turf.lineString([[-74, 40], [-78, 42], [-82, 35]], {color: 'red'});\n *\n * var lineCloned = turf.clone(line);\n */\nfunction clone(geojson) {\n    if (!geojson) throw new Error('geojson is required');\n\n    switch (geojson.type) {\n    case 'Feature':\n        return cloneFeature(geojson);\n    case 'FeatureCollection':\n        return cloneFeatureCollection(geojson);\n    case 'Point':\n    case 'LineString':\n    case 'Polygon':\n    case 'MultiPoint':\n    case 'MultiLineString':\n    case 'MultiPolygon':\n    case 'GeometryCollection':\n        return cloneGeometry(geojson);\n    default:\n        throw new Error('unknown GeoJSON type');\n    }\n}\n\n/**\n * Clone Feature\n *\n * @private\n * @param {Feature<any>} geojson GeoJSON Feature\n * @returns {Feature<any>} cloned Feature\n */\nfunction cloneFeature(geojson) {\n    var cloned = {type: 'Feature'};\n    // Preserve Foreign Members\n    Object.keys(geojson).forEach(function (key) {\n        switch (key) {\n        case 'type':\n        case 'properties':\n        case 'geometry':\n            return;\n        default:\n            cloned[key] = geojson[key];\n        }\n    });\n    // Add properties & geometry last\n    cloned.properties = cloneProperties(geojson.properties);\n    cloned.geometry = cloneGeometry(geojson.geometry);\n    return cloned;\n}\n\n/**\n * Clone Properties\n *\n * @private\n * @param {Object} properties GeoJSON Properties\n * @returns {Object} cloned Properties\n */\nfunction cloneProperties(properties) {\n    var cloned = {};\n    if (!properties) return cloned;\n    Object.keys(properties).forEach(function (key) {\n        var value = properties[key];\n        if (typeof value === 'object') {\n            if (value === null) {\n                // handle null\n                cloned[key] = null;\n            } else if (value.length) {\n                // handle Array\n                cloned[key] = value.map(function (item) {\n                    return item;\n                });\n            } else {\n                // handle generic Object\n                cloned[key] = cloneProperties(value);\n            }\n        } else cloned[key] = value;\n    });\n    return cloned;\n}\n\n/**\n * Clone Feature Collection\n *\n * @private\n * @param {FeatureCollection<any>} geojson GeoJSON Feature Collection\n * @returns {FeatureCollection<any>} cloned Feature Collection\n */\nfunction cloneFeatureCollection(geojson) {\n    var cloned = {type: 'FeatureCollection'};\n\n    // Preserve Foreign Members\n    Object.keys(geojson).forEach(function (key) {\n        switch (key) {\n        case 'type':\n        case 'features':\n            return;\n        default:\n            cloned[key] = geojson[key];\n        }\n    });\n    // Add features\n    cloned.features = geojson.features.map(function (feature) {\n        return cloneFeature(feature);\n    });\n    return cloned;\n}\n\n/**\n * Clone Geometry\n *\n * @private\n * @param {Geometry<any>} geometry GeoJSON Geometry\n * @returns {Geometry<any>} cloned Geometry\n */\nfunction cloneGeometry(geometry) {\n    var geom = {type: geometry.type};\n    if (geometry.bbox) geom.bbox = geometry.bbox;\n\n    if (geometry.type === 'GeometryCollection') {\n        geom.geometries = geometry.geometries.map(function (geom) {\n            return cloneGeometry(geom);\n        });\n        return geom;\n    }\n    geom.coordinates = deepSlice(geometry.coordinates);\n    return geom;\n}\n\n/**\n * Deep Slice coordinates\n *\n * @private\n * @param {Coordinates} coords Coordinates\n * @returns {Coordinates} all coordinates sliced\n */\nfunction deepSlice(coords) {\n    if (typeof coords[0] !== 'object') { return coords.slice(); }\n    return coords.map(function (coord) {\n        return deepSlice(coord);\n    });\n}\n\nexport default clone;\n","import { isNumber } from '@turf/helpers';\n\n/**\n * Unwrap a coordinate from a Point Feature, Geometry or a single coordinate.\n *\n * @name getCoord\n * @param {Array<number>|Geometry<Point>|Feature<Point>} coord GeoJSON Point or an Array of numbers\n * @returns {Array<number>} coordinates\n * @example\n * var pt = turf.point([10, 10]);\n *\n * var coord = turf.getCoord(pt);\n * //= [10, 10]\n */\nfunction getCoord(coord) {\n    if (!coord) throw new Error('coord is required');\n    if (coord.type === 'Feature' && coord.geometry !== null && coord.geometry.type === 'Point') return coord.geometry.coordinates;\n    if (coord.type === 'Point') return coord.coordinates;\n    if (Array.isArray(coord) && coord.length >= 2 && coord[0].length === undefined && coord[1].length === undefined) return coord;\n\n    throw new Error('coord must be GeoJSON Point or an Array of numbers');\n}\n\n/**\n * Unwrap coordinates from a Feature, Geometry Object or an Array\n *\n * @name getCoords\n * @param {Array<any>|Geometry|Feature} coords Feature, Geometry Object or an Array\n * @returns {Array<any>} coordinates\n * @example\n * var poly = turf.polygon([[[119.32, -8.7], [119.55, -8.69], [119.51, -8.54], [119.32, -8.7]]]);\n *\n * var coords = turf.getCoords(poly);\n * //= [[[119.32, -8.7], [119.55, -8.69], [119.51, -8.54], [119.32, -8.7]]]\n */\nfunction getCoords(coords) {\n    if (!coords) throw new Error('coords is required');\n\n    // Feature\n    if (coords.type === 'Feature' && coords.geometry !== null) return coords.geometry.coordinates;\n\n    // Geometry\n    if (coords.coordinates) return coords.coordinates;\n\n    // Array of numbers\n    if (Array.isArray(coords)) return coords;\n\n    throw new Error('coords must be GeoJSON Feature, Geometry Object or an Array');\n}\n\n/**\n * Checks if coordinates contains a number\n *\n * @name containsNumber\n * @param {Array<any>} coordinates GeoJSON Coordinates\n * @returns {boolean} true if Array contains a number\n */\nfunction containsNumber(coordinates) {\n    if (coordinates.length > 1 && isNumber(coordinates[0]) && isNumber(coordinates[1])) {\n        return true;\n    }\n\n    if (Array.isArray(coordinates[0]) && coordinates[0].length) {\n        return containsNumber(coordinates[0]);\n    }\n    throw new Error('coordinates must only contain numbers');\n}\n\n/**\n * Enforce expectations about types of GeoJSON objects for Turf.\n *\n * @name geojsonType\n * @param {GeoJSON} value any GeoJSON object\n * @param {string} type expected GeoJSON type\n * @param {string} name name of calling function\n * @throws {Error} if value is not the expected type.\n */\nfunction geojsonType(value, type, name) {\n    if (!type || !name) throw new Error('type and name required');\n\n    if (!value || value.type !== type) {\n        throw new Error('Invalid input to ' + name + ': must be a ' + type + ', given ' + value.type);\n    }\n}\n\n/**\n * Enforce expectations about types of {@link Feature} inputs for Turf.\n * Internally this uses {@link geojsonType} to judge geometry types.\n *\n * @name featureOf\n * @param {Feature} feature a feature with an expected geometry type\n * @param {string} type expected GeoJSON type\n * @param {string} name name of calling function\n * @throws {Error} error if value is not the expected type.\n */\nfunction featureOf(feature, type, name) {\n    if (!feature) throw new Error('No feature passed');\n    if (!name) throw new Error('.featureOf() requires a name');\n    if (!feature || feature.type !== 'Feature' || !feature.geometry) {\n        throw new Error('Invalid input to ' + name + ', Feature with geometry required');\n    }\n    if (!feature.geometry || feature.geometry.type !== type) {\n        throw new Error('Invalid input to ' + name + ': must be a ' + type + ', given ' + feature.geometry.type);\n    }\n}\n\n/**\n * Enforce expectations about types of {@link FeatureCollection} inputs for Turf.\n * Internally this uses {@link geojsonType} to judge geometry types.\n *\n * @name collectionOf\n * @param {FeatureCollection} featureCollection a FeatureCollection for which features will be judged\n * @param {string} type expected GeoJSON type\n * @param {string} name name of calling function\n * @throws {Error} if value is not the expected type.\n */\nfunction collectionOf(featureCollection, type, name) {\n    if (!featureCollection) throw new Error('No featureCollection passed');\n    if (!name) throw new Error('.collectionOf() requires a name');\n    if (!featureCollection || featureCollection.type !== 'FeatureCollection') {\n        throw new Error('Invalid input to ' + name + ', FeatureCollection required');\n    }\n    for (var i = 0; i < featureCollection.features.length; i++) {\n        var feature = featureCollection.features[i];\n        if (!feature || feature.type !== 'Feature' || !feature.geometry) {\n            throw new Error('Invalid input to ' + name + ', Feature with geometry required');\n        }\n        if (!feature.geometry || feature.geometry.type !== type) {\n            throw new Error('Invalid input to ' + name + ': must be a ' + type + ', given ' + feature.geometry.type);\n        }\n    }\n}\n\n/**\n * Get Geometry from Feature or Geometry Object\n *\n * @param {Feature|Geometry} geojson GeoJSON Feature or Geometry Object\n * @returns {Geometry|null} GeoJSON Geometry Object\n * @throws {Error} if geojson is not a Feature or Geometry Object\n * @example\n * var point = {\n *   \"type\": \"Feature\",\n *   \"properties\": {},\n *   \"geometry\": {\n *     \"type\": \"Point\",\n *     \"coordinates\": [110, 40]\n *   }\n * }\n * var geom = turf.getGeom(point)\n * //={\"type\": \"Point\", \"coordinates\": [110, 40]}\n */\nfunction getGeom(geojson) {\n    if (!geojson) throw new Error('geojson is required');\n    if (geojson.geometry !== undefined) return geojson.geometry;\n    if (geojson.coordinates || geojson.geometries) return geojson;\n    throw new Error('geojson must be a valid Feature or Geometry Object');\n}\n\n/**\n * Get Geometry Type from Feature or Geometry Object\n *\n * @throws {Error} **DEPRECATED** in v5.0.0 in favor of getType\n */\nfunction getGeomType() {\n    throw new Error('invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType');\n}\n\n/**\n * Get GeoJSON object's type, Geometry type is prioritize.\n *\n * @param {GeoJSON} geojson GeoJSON object\n * @param {string} [name=\"geojson\"] name of the variable to display in error message\n * @returns {string} GeoJSON type\n * @example\n * var point = {\n *   \"type\": \"Feature\",\n *   \"properties\": {},\n *   \"geometry\": {\n *     \"type\": \"Point\",\n *     \"coordinates\": [110, 40]\n *   }\n * }\n * var geom = turf.getType(point)\n * //=\"Point\"\n */\nfunction getType(geojson, name) {\n    if (!geojson) throw new Error((name || 'geojson') + ' is required');\n    // GeoJSON Feature & GeometryCollection\n    if (geojson.geometry && geojson.geometry.type) return geojson.geometry.type;\n    // GeoJSON Geometry & FeatureCollection\n    if (geojson.type) return geojson.type;\n    throw new Error((name || 'geojson') + ' is invalid');\n}\n\nexport { getCoord, getCoords, containsNumber, geojsonType, featureOf, collectionOf, getGeom, getGeomType, getType };\n","import { getCoord } from '@turf/invariant';\nimport { degreesToRadians, isObject, radiansToLength } from '@turf/helpers';\n\n//http://en.wikipedia.org/wiki/Haversine_formula\n//http://www.movable-type.co.uk/scripts/latlong.html\n\n/**\n * Calculates the distance between two {@link Point|points} in degrees, radians,\n * miles, or kilometers. This uses the\n * [Haversine formula](http://en.wikipedia.org/wiki/Haversine_formula)\n * to account for global curvature.\n *\n * @name distance\n * @param {Coord} from origin point\n * @param {Coord} to destination point\n * @param {Object} [options={}] Optional parameters\n * @param {string} [options.units='kilometers'] can be degrees, radians, miles, or kilometers\n * @returns {number} distance between the two points\n * @example\n * var from = turf.point([-75.343, 39.984]);\n * var to = turf.point([-75.534, 39.123]);\n * var options = {units: 'miles'};\n *\n * var distance = turf.distance(from, to, options);\n *\n * //addToMap\n * var addToMap = [from, to];\n * from.properties.distance = distance;\n * to.properties.distance = distance;\n */\nfunction distance(from, to, options) {\n    // Optional parameters\n    options = options || {};\n    if (!isObject(options)) throw new Error('options is invalid');\n    var units = options.units;\n\n    var coordinates1 = getCoord(from);\n    var coordinates2 = getCoord(to);\n    var dLat = degreesToRadians((coordinates2[1] - coordinates1[1]));\n    var dLon = degreesToRadians((coordinates2[0] - coordinates1[0]));\n    var lat1 = degreesToRadians(coordinates1[1]);\n    var lat2 = degreesToRadians(coordinates2[1]);\n\n    var a = Math.pow(Math.sin(dLat / 2), 2) +\n          Math.pow(Math.sin(dLon / 2), 2) * Math.cos(lat1) * Math.cos(lat2);\n\n    return radiansToLength(2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)), units);\n}\n\nexport default distance;\n","import { getCoord, getCoords } from '@turf/invariant';\n\n// http://en.wikipedia.org/wiki/Even%E2%80%93odd_rule\n// modified from: https://github.com/substack/point-in-polygon/blob/master/index.js\n// which was modified from http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\n\n/**\n * Takes a {@link Point} and a {@link Polygon} or {@link MultiPolygon} and determines if the point resides inside the polygon. The polygon can\n * be convex or concave. The function accounts for holes.\n *\n * @name booleanPointInPolygon\n * @param {Coord} point input point\n * @param {Feature<Polygon|MultiPolygon>} polygon input polygon or multipolygon\n * @param {Object} [options={}] Optional parameters\n * @param {boolean} [options.ignoreBoundary=false] True if polygon boundary should be ignored when determining if the point is inside the polygon otherwise false.\n * @returns {boolean} `true` if the Point is inside the Polygon; `false` if the Point is not inside the Polygon\n * @example\n * var pt = turf.point([-77, 44]);\n * var poly = turf.polygon([[\n *   [-81, 41],\n *   [-81, 47],\n *   [-72, 47],\n *   [-72, 41],\n *   [-81, 41]\n * ]]);\n *\n * turf.booleanPointInPolygon(pt, poly);\n * //= true\n */\nfunction booleanPointInPolygon(point, polygon, options) {\n    // Optional parameters\n    options = options || {};\n    if (typeof options !== 'object') throw new Error('options is invalid');\n    var ignoreBoundary = options.ignoreBoundary;\n\n    // validation\n    if (!point) throw new Error('point is required');\n    if (!polygon) throw new Error('polygon is required');\n\n    var pt = getCoord(point);\n    var polys = getCoords(polygon);\n    var type = (polygon.geometry) ? polygon.geometry.type : polygon.type;\n    var bbox = polygon.bbox;\n\n    // Quick elimination if point is not inside bbox\n    if (bbox && inBBox(pt, bbox) === false) return false;\n\n    // normalize to multipolygon\n    if (type === 'Polygon') polys = [polys];\n\n    for (var i = 0, insidePoly = false; i < polys.length && !insidePoly; i++) {\n        // check if it is in the outer ring first\n        if (inRing(pt, polys[i][0], ignoreBoundary)) {\n            var inHole = false;\n            var k = 1;\n            // check for the point in any of the holes\n            while (k < polys[i].length && !inHole) {\n                if (inRing(pt, polys[i][k], !ignoreBoundary)) {\n                    inHole = true;\n                }\n                k++;\n            }\n            if (!inHole) insidePoly = true;\n        }\n    }\n    return insidePoly;\n}\n\n/**\n * inRing\n *\n * @private\n * @param {Array<number>} pt [x,y]\n * @param {Array<Array<number>>} ring [[x,y], [x,y],..]\n * @param {boolean} ignoreBoundary ignoreBoundary\n * @returns {boolean} inRing\n */\nfunction inRing(pt, ring, ignoreBoundary) {\n    var isInside = false;\n    if (ring[0][0] === ring[ring.length - 1][0] && ring[0][1] === ring[ring.length - 1][1]) ring = ring.slice(0, ring.length - 1);\n\n    for (var i = 0, j = ring.length - 1; i < ring.length; j = i++) {\n        var xi = ring[i][0], yi = ring[i][1];\n        var xj = ring[j][0], yj = ring[j][1];\n        var onBoundary = (pt[1] * (xi - xj) + yi * (xj - pt[0]) + yj * (pt[0] - xi) === 0) &&\n            ((xi - pt[0]) * (xj - pt[0]) <= 0) && ((yi - pt[1]) * (yj - pt[1]) <= 0);\n        if (onBoundary) return !ignoreBoundary;\n        var intersect = ((yi > pt[1]) !== (yj > pt[1])) &&\n        (pt[0] < (xj - xi) * (pt[1] - yi) / (yj - yi) + xi);\n        if (intersect) isInside = !isInside;\n    }\n    return isInside;\n}\n\n/**\n * inBBox\n *\n * @private\n * @param {Position} pt point [x,y]\n * @param {BBox} bbox BBox [west, south, east, north]\n * @returns {boolean} true/false if point is inside BBox\n */\nfunction inBBox(pt, bbox) {\n    return bbox[0] <= pt[0] &&\n           bbox[1] <= pt[1] &&\n           bbox[2] >= pt[0] &&\n           bbox[3] >= pt[1];\n}\n\nexport default booleanPointInPolygon;\n","import explode from '@turf/explode';\nimport centroid from '@turf/center';\nimport nearestPoint from '@turf/nearest-point';\nimport booleanPointInPolygon from '@turf/boolean-point-in-polygon';\nimport { feature, featureCollection, point } from '@turf/helpers';\n\n/**\n * Takes a Feature or FeatureCollection and returns a {@link Point} guaranteed to be on the surface of the feature.\n *\n * * Given a {@link Polygon}, the point will be in the area of the polygon\n * * Given a {@link LineString}, the point will be along the string\n * * Given a {@link Point}, the point will the same as the input\n *\n * @name pointOnFeature\n * @param {GeoJSON} geojson any Feature or FeatureCollection\n * @returns {Feature<Point>} a point on the surface of `input`\n * @example\n * var polygon = turf.polygon([[\n *   [116, -36],\n *   [131, -32],\n *   [146, -43],\n *   [155, -25],\n *   [133, -9],\n *   [111, -22],\n *   [116, -36]\n * ]]);\n *\n * var pointOnPolygon = turf.pointOnFeature(polygon);\n *\n * //addToMap\n * var addToMap = [polygon, pointOnPolygon];\n */\nfunction pointOnFeature(geojson) {\n    // normalize\n    var fc = normalize(geojson);\n\n    // get centroid\n    var cent = centroid(fc);\n\n    // check to see if centroid is on surface\n    var onSurface = false;\n    var i = 0;\n    while (!onSurface && i < fc.features.length) {\n        var geom = fc.features[i].geometry;\n        var x, y, x1, y1, x2, y2, k;\n        var onLine = false;\n        if (geom.type === 'Point') {\n            if (cent.geometry.coordinates[0] === geom.coordinates[0] &&\n                cent.geometry.coordinates[1] === geom.coordinates[1]) {\n                onSurface = true;\n            }\n        } else if (geom.type === 'MultiPoint') {\n            var onMultiPoint = false;\n            k = 0;\n            while (!onMultiPoint && k < geom.coordinates.length) {\n                if (cent.geometry.coordinates[0] === geom.coordinates[k][0] &&\n          cent.geometry.coordinates[1] === geom.coordinates[k][1]) {\n                    onSurface = true;\n                    onMultiPoint = true;\n                }\n                k++;\n            }\n        } else if (geom.type === 'LineString') {\n            k = 0;\n            while (!onLine && k < geom.coordinates.length - 1) {\n                x = cent.geometry.coordinates[0];\n                y = cent.geometry.coordinates[1];\n                x1 = geom.coordinates[k][0];\n                y1 = geom.coordinates[k][1];\n                x2 = geom.coordinates[k + 1][0];\n                y2 = geom.coordinates[k + 1][1];\n                if (pointOnSegment(x, y, x1, y1, x2, y2)) {\n                    onLine = true;\n                    onSurface = true;\n                }\n                k++;\n            }\n        } else if (geom.type === 'MultiLineString') {\n            var j = 0;\n            while (j < geom.coordinates.length) {\n                onLine = false;\n                k = 0;\n                var line = geom.coordinates[j];\n                while (!onLine && k < line.length - 1) {\n                    x = cent.geometry.coordinates[0];\n                    y = cent.geometry.coordinates[1];\n                    x1 = line[k][0];\n                    y1 = line[k][1];\n                    x2 = line[k + 1][0];\n                    y2 = line[k + 1][1];\n                    if (pointOnSegment(x, y, x1, y1, x2, y2)) {\n                        onLine = true;\n                        onSurface = true;\n                    }\n                    k++;\n                }\n                j++;\n            }\n        } else if (geom.type === 'Polygon' || geom.type === 'MultiPolygon') {\n            if (booleanPointInPolygon(cent, geom)) {\n                onSurface = true;\n            }\n        }\n        i++;\n    }\n    if (onSurface) {\n        return cent;\n    } else {\n        var vertices = featureCollection([]);\n        for (i = 0; i < fc.features.length; i++) {\n            vertices.features = vertices.features.concat(explode(fc.features[i]).features);\n        }\n        // Remove distanceToPoint properties from nearestPoint()\n        return point(nearestPoint(cent, vertices).geometry.coordinates);\n    }\n}\n\n/**\n * Normalizes any GeoJSON to a FeatureCollection\n *\n * @private\n * @name normalize\n * @param {GeoJSON} geojson Any GeoJSON\n * @returns {FeatureCollection} FeatureCollection\n */\nfunction normalize(geojson) {\n    if (geojson.type !== 'FeatureCollection') {\n        if (geojson.type !== 'Feature') {\n            return featureCollection([feature(geojson)]);\n        }\n        return featureCollection([geojson]);\n    }\n    return geojson;\n}\n\nfunction pointOnSegment(x, y, x1, y1, x2, y2) {\n    var ab = Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    var ap = Math.sqrt((x - x1) * (x - x1) + (y - y1) * (y - y1));\n    var pb = Math.sqrt((x2 - x) * (x2 - x) + (y2 - y) * (y2 - y));\n    return ab === ap + pb;\n}\n\nexport default pointOnFeature;\n","import clone from '@turf/clone';\nimport distance from '@turf/distance';\nimport { featureEach } from '@turf/meta';\n\n/**\n * Takes a reference {@link Point|point} and a FeatureCollection of Features\n * with Point geometries and returns the\n * point from the FeatureCollection closest to the reference. This calculation\n * is geodesic.\n *\n * @name nearestPoint\n * @param {Coord} targetPoint the reference point\n * @param {FeatureCollection<Point>} points against input point set\n * @returns {Feature<Point>} the closest point in the set to the reference point\n * @example\n * var targetPoint = turf.point([28.965797, 41.010086], {\"marker-color\": \"#0F0\"});\n * var points = turf.featureCollection([\n *     turf.point([28.973865, 41.011122]),\n *     turf.point([28.948459, 41.024204]),\n *     turf.point([28.938674, 41.013324])\n * ]);\n *\n * var nearest = turf.nearestPoint(targetPoint, points);\n *\n * //addToMap\n * var addToMap = [targetPoint, points, nearest];\n * nearest.properties['marker-color'] = '#F00';\n */\nfunction nearestPoint(targetPoint, points) {\n    // Input validation\n    if (!targetPoint) throw new Error('targetPoint is required');\n    if (!points) throw new Error('points is required');\n\n    var nearest;\n    var minDist = Infinity;\n    featureEach(points, function (pt, featureIndex) {\n        var distanceToPoint = distance(targetPoint, pt);\n        if (distanceToPoint < minDist) {\n            nearest = clone(pt);\n            nearest.properties.featureIndex = featureIndex;\n            nearest.properties.distanceToPoint = distanceToPoint;\n            minDist = distanceToPoint;\n        }\n\n    });\n    return nearest;\n}\n\nexport default nearestPoint;\n","import pointOnFeature from '@turf/point-on-feature'\nimport {\n  Circle,\n  Geometry,\n  GeometryCollection,\n  LineString,\n  MultiLineString,\n  MultiPoint,\n  MultiPolygon,\n  Point,\n  Polygon,\n} from 'ol/geom'\nimport GeometryType from 'ol/geom/GeometryType'\nimport { circular as circularPolygon } from 'ol/geom/Polygon'\nimport { v4 as uuid } from 'uuid'\nimport { isPlainObject } from '../utils'\nimport { COORD_PRECISION, roundCoords } from './coord'\n\n/**\n * @param {number|number[]} lonOrCoordinates\n * @param {number} [lat]\n * @return {Point}\n */\nexport function createPointGeom (lonOrCoordinates, lat) {\n  const coordinates = Array.isArray(lonOrCoordinates)\n    ? lonOrCoordinates\n    : [lonOrCoordinates, lat]\n\n  return new Point(coordinates)\n}\n\n/**\n * @param {Array<number[]>} points\n * @returns {LineString}\n */\nexport function createLineGeom (points) {\n  return new LineString(points)\n}\n\n/**\n * @param {Array<Array<number[]>>} rings\n * @returns {Polygon}\n */\nexport function createPolygonGeom (rings) {\n  return new Polygon(rings)\n}\n\n/**\n * @param {Array<number[]>} points\n * @returns {MultiPoint}\n */\nexport function createMultiPointGeom (points) {\n  return new MultiPoint(points)\n}\n\n/**\n * @param {Array<Array<number[]>>} lines\n * @returns {MultiLineString}\n */\nexport function createMultiLineGeom (lines) {\n  return new MultiLineString(lines)\n}\n\n/**\n * @param {Array<Array<Array<number[]>>>} polygons\n * @returns {MultiPolygon}\n */\nexport function createMultiPolygonGeom (polygons) {\n  return new MultiPolygon(polygons)\n}\n\n/**\n * @param {Geometry[]} geoms\n * @returns {GeometryCollection}\n */\nexport function createGeomCollection (geoms) {\n  return new GeometryCollection(geoms)\n}\n\n/**\n * @param {Coordinate|number[]} center\n * @param {number} radius\n * @return {Polygon}\n */\nexport function createCircularPolygon (center, radius) {\n  return circularPolygon(center, radius)\n}\n\n/**\n * @param {Geometry|Object} geom\n * @return {boolean}\n * @throws {Error}\n */\nexport function isMultiGeom (geom) {\n  const multiTypes = [\n    GeometryType.MULTI_POINT,\n    GeometryType.MULTI_LINE_STRING,\n    GeometryType.MULTI_POLYGON,\n    GeometryType.GEOMETRY_COLLECTION,\n  ]\n\n  return multiTypes.includes(geom.type || geom.getType())\n}\n\n/**\n * @param {Geometry|Object} geom\n * @return {SimpleGeometry|Object}\n * @throws {Error}\n */\nexport function toSimpleGeom (geom) {\n  if (geom instanceof Circle) {\n    geom = createPointGeom(geom.getCenter())\n  } else if (geom.type === GeometryType.CIRCLE) {\n    geom = { ...geom, type: GeometryType.POINT }\n  }\n\n  const type = geom.type || geom.getType()\n  const complexTypes = [\n    GeometryType.GEOMETRY_COLLECTION,\n  ]\n\n  if (complexTypes.includes(type) === false) {\n    return geom\n  }\n\n  return (geom.geometries || geom.getGeometries())[0]\n}\n\n/**\n * @param {Geometry|Object} geom\n * @param {number} [precision=COORD_PRECISION]\n * @return {Coordinate|undefined}\n */\nexport function findPointOnSurface (geom, precision = COORD_PRECISION) {\n  const simpleGeom = toSimpleGeom(geom)\n  const pointFeature = pointOnFeature({\n    type: simpleGeom.type || simpleGeom.getType(),\n    coordinates: simpleGeom.coordinates || simpleGeom.getCoordinates(),\n  })\n  if (pointFeature?.geometry) {\n    return roundCoords(\n      pointFeature.geometry.type,\n      pointFeature.geometry.coordinates,\n      precision,\n    )\n  }\n}\n\nexport function getGeometryId (geometry) {\n  if (geometry instanceof Geometry) {\n    return geometry.get('id')\n  } else if (isPlainObject(geometry)) {\n    return geometry.id\n  }\n\n  throw new Error('Illegal geometry argument')\n}\n\nexport function setGeometryId (geometry, geometryId) {\n  if (geometry instanceof Geometry) {\n    geometry.set('id', geometryId)\n\n    return geometry\n  } else if (isPlainObject(geometry)) {\n    geometry.id = geometryId\n\n    return geometry\n  }\n\n  throw new Error('Illegal geometry argument')\n}\n\nexport function initializeGeometry (geometry, defaultGeometryId) {\n  if (getGeometryId(geometry) == null) {\n    setGeometryId(geometry, defaultGeometryId || uuid())\n  }\n\n  return geometry\n}\n\n/**\n * @param value\n * @return {boolean}\n */\nexport function isCircleGeom (value) {\n  return getGeomType(value) === GeometryType.CIRCLE\n}\n\nexport function getGeomCoords (geom) {\n  if (!geom) return\n\n  const type = getGeomType(geom)\n  switch (type) {\n    case GeometryType.CIRCLE:\n      return roundCoords(type, geom.coordinates || geom.getCenter())\n    default:\n      return roundCoords(type, geom.coordinates || geom.getCoordinates())\n  }\n}\n\nexport function getGeomType (geom) {\n  if (geom instanceof Geometry) {\n    return geom.getType()\n  }\n  return geom?.type\n}\n","import GeometryType from 'ol/geom/GeometryType'\nimport { fromLonLat, toLonLat, transform as baseTransform, transformExtent as baseTransformExtent } from 'ol/proj'\nimport { calcDistance, COORD_PRECISION, roundCoords, roundExtent } from './coord'\n\nexport const EPSG_4326 = 'EPSG:4326'\nexport const EPSG_3857 = 'EPSG:3857'\n\n/**\n * @param {number[]} coordinate\n * @param {module:ol/proj.ProjectionLike} [projection=EPSG_3857]\n * @param {number} [precision=COORD_PRECISION]\n * @return {Coordinate|number[]}\n */\nexport function pointToLonLat (\n  coordinate,\n  projection = EPSG_3857,\n  precision = COORD_PRECISION,\n) {\n  if (!coordinate) return\n\n  return roundCoords(GeometryType.POINT, toLonLat(coordinate, projection), precision)\n}\n\n/**\n * @param {number[]} coordinate\n * @param {module:ol/proj.ProjectionLike} [projection]\n * @param {number} [precision=COORD_PRECISION]\n * @return {number[]}\n */\nexport function pointFromLonLat (\n  coordinate,\n  projection = EPSG_3857,\n  precision = COORD_PRECISION,\n) {\n  if (!coordinate) return\n\n  return roundCoords(GeometryType.POINT, fromLonLat(coordinate, projection), precision)\n}\n\n/**\n * @param {number[]} coordinate\n * @param {module:ol/proj.ProjectionLike} sourceProjection\n * @param {module:ol/proj.ProjectionLike} destProjection\n * @param {number} [precision=COORD_PRECISION]\n * @returns {number[]}\n */\nexport function transformPoint (\n  coordinate,\n  sourceProjection,\n  destProjection,\n  precision = COORD_PRECISION,\n) {\n  if (!coordinate) return\n\n  return transform(coordinate, sourceProjection, destProjection, precision)\n}\n\n/**\n * @param {number[]} coordinate\n * @param {module:ol/proj.ProjectionLike} sourceProjection\n * @param {module:ol/proj.ProjectionLike} destProjection\n * @param {number} [precision=COORD_PRECISION]\n * @returns {number[]}\n */\nexport function transform (\n  coordinate,\n  sourceProjection,\n  destProjection,\n  precision = COORD_PRECISION,\n) {\n  if (!coordinate) return\n  let coord = baseTransform(coordinate, sourceProjection, destProjection)\n  if (coord.some(x => isNaN(x))) {\n    coord = baseTransform(baseTransform(coordinate, sourceProjection, EPSG_4326), EPSG_4326, destProjection)\n  }\n  return roundCoords(GeometryType.POINT, coord, precision)\n}\n\n/**\n * @param {Array<number[]>} coordinates\n * @param {module:ol/proj.ProjectionLike} [projection=EPSG_3857]\n * @param {number} [precision=COORD_PRECISION]\n * @return {Array<number[]>}\n */\nexport function lineToLonLat (\n  coordinates,\n  projection = EPSG_3857,\n  precision = COORD_PRECISION,\n) {\n  if (!coordinates) return\n\n  return coordinates.map(point => pointToLonLat(point, projection, precision))\n}\n\n/**\n * @param {Array<number[]>} coordinates\n * @param {ProjectionLike} [projection=EPSG_3857]\n * @param {number} [precision=COORD_PRECISION]\n * @return {Array<number[]>}\n */\nexport function lineFromLonLat (\n  coordinates,\n  projection = EPSG_3857,\n  precision = COORD_PRECISION,\n) {\n  if (!coordinates) return\n\n  return coordinates.map(point => pointFromLonLat(point, projection, precision))\n}\n\n/**\n * @param {Array<number[]>} coordinates\n * @param {module:ol/proj.ProjectionLike} sourceProjection\n * @param {module:ol/proj.ProjectionLike} destProjection\n * @param {number} [precision=COORD_PRECISION]\n * @returns {number[]}\n */\nexport function transformLine (\n  coordinates,\n  sourceProjection,\n  destProjection,\n  precision = COORD_PRECISION,\n) {\n  if (!coordinates) return\n\n  return coordinates.map(point => transformPoint(point, sourceProjection, destProjection, precision))\n}\n\n/**\n * @param {Array<Array<number[]>>} coordinates\n * @param {module:ol/proj.ProjectionLike} [projection=EPSG_3857]\n * @param {number} [precision=COORD_PRECISION]\n * @return {Array<Array<number[]>>}\n */\nexport function polygonToLonLat (\n  coordinates,\n  projection = EPSG_3857,\n  precision = COORD_PRECISION,\n) {\n  if (!coordinates) return\n\n  return coordinates.map(line => lineToLonLat(line, projection, precision))\n}\n\n/**\n * @param {Array<Array<number[]>>} coordinates\n * @param {module:ol/proj.ProjectionLike} [projection=EPSG_3857]\n * @param {number} [precision=COORD_PRECISION]\n * @return {Array<Array<number[]>>}\n */\nexport function polygonFromLonLat (\n  coordinates,\n  projection = EPSG_3857,\n  precision = COORD_PRECISION,\n) {\n  if (!coordinates) return\n\n  return coordinates.map(line => lineFromLonLat(line, projection, precision))\n}\n\n/**\n * @param {Array<Array<number[]>>} coordinates\n * @param {module:ol/proj.ProjectionLike} sourceProjection\n * @param {module:ol/proj.ProjectionLike} destProjection\n * @param {number} [precision=COORD_PRECISION]\n * @returns {*}\n */\nexport function transformPolygon (\n  coordinates,\n  sourceProjection,\n  destProjection,\n  precision = COORD_PRECISION,\n) {\n  if (!coordinates) return\n\n  return coordinates.map(line => transformLine(line, sourceProjection, destProjection, precision))\n}\n\n/**\n * @param {Array<number[]>} coordinates\n * @param {module:ol/proj.ProjectionLike} [projection=EPSG_3857]\n * @param {number} [precision=COORD_PRECISION]\n * @return {Array<number[]>}\n */\nexport function multiPointToLonLat (\n  coordinates,\n  projection = EPSG_3857,\n  precision = COORD_PRECISION,\n) {\n  if (!coordinates) return\n\n  return coordinates.map(point => pointToLonLat(point, projection, precision))\n}\n\n/**\n * @param {Array<number[]>} coordinates\n * @param {module:ol/proj.ProjectionLike} [projection=EPSG_3857]\n * @param {number} [precision=COORD_PRECISION]\n * @return {Array<number[]>}\n */\nexport function multiPointFromLonLat (\n  coordinates,\n  projection = EPSG_3857,\n  precision = COORD_PRECISION,\n) {\n  if (!coordinates) return\n\n  return coordinates.map(point => pointFromLonLat(point, projection, precision))\n}\n\n/**\n * @param {Array<number[]>} coordinates\n * @param {module:ol/proj.ProjectionLike} sourceProjection\n * @param {module:ol/proj.ProjectionLike} destProjection\n * @param {number} [precision=COORD_PRECISION]\n * @return {Array<number[]>}\n */\nexport function transformMultiPoint (\n  coordinates,\n  sourceProjection,\n  destProjection,\n  precision = COORD_PRECISION,\n) {\n  if (!coordinates) return\n\n  return coordinates.map(point => transformPoint(point, sourceProjection, destProjection, precision))\n}\n\n/**\n * @param {Array<Array<number[]>>} coordinates\n * @param {module:ol/proj.ProjectionLike} [projection=EPSG_3857]\n * @param {number} [precision=COORD_PRECISION]\n * @return {Array<Array<number[]>>}\n */\nexport function multiLineToLonLat (\n  coordinates,\n  projection = EPSG_3857,\n  precision = COORD_PRECISION,\n) {\n  if (!coordinates) return\n\n  return coordinates.map(line => lineToLonLat(line, projection, precision))\n}\n\n/**\n * @param {Array<Array<number[]>>} coordinates\n * @param {module:ol/proj.ProjectionLike} [projection=EPSG_3857]\n * @param {number} [precision=COORD_PRECISION]\n * @return {Array<Array<number[]>>}\n */\nexport function multiLineFromLonLat (\n  coordinates,\n  projection = EPSG_3857,\n  precision = COORD_PRECISION,\n) {\n  if (!coordinates) return\n\n  return coordinates.map(line => lineFromLonLat(line, projection, precision))\n}\n\n/**\n * @param {Array<Array<number[]>>} coordinates\n * @param {module:ol/proj.ProjectionLike} sourceProjection\n * @param {module:ol/proj.ProjectionLike} destProjection\n * @param {number} [precision=COORD_PRECISION]\n * @return {Array<Array<number[]>>}\n */\nexport function transformMultiLine (\n  coordinates,\n  sourceProjection,\n  destProjection,\n  precision = COORD_PRECISION,\n) {\n  if (!coordinates) return\n\n  return coordinates.map(line => transformLine(line, sourceProjection, destProjection, precision))\n}\n\n/**\n * @param {Array<Array<Array<number[]>>>} coordinates\n * @param {module:ol/proj.ProjectionLike} [projection=EPSG_3857]\n * @param {number} [precision=COORD_PRECISION]\n * @return {Array<Array<Array<number[]>>>}\n */\nexport function multiPolygonToLonLat (\n  coordinates,\n  projection = EPSG_3857,\n  precision = COORD_PRECISION,\n) {\n  if (!coordinates) return\n\n  return coordinates.map(polygon => polygonToLonLat(polygon, projection, precision))\n}\n\n/**\n * @param {Array<Array<Array<number[]>>>} coordinates\n * @param {module:ol/proj.ProjectionLike} [projection=EPSG_3857]\n * @param {number} [precision=COORD_PRECISION]\n * @return {Array<Array<Array<number[]>>>}\n */\nexport function multiPolygonFromLonLat (\n  coordinates,\n  projection = EPSG_3857,\n  precision = COORD_PRECISION,\n) {\n  if (!coordinates) return\n\n  return coordinates.map(polygon => polygonFromLonLat(polygon, projection, precision))\n}\n\n/**\n * @param {Array<Array<Array<number[]>>>} coordinates\n * @param {module:ol/proj.ProjectionLike} sourceProjection\n * @param {module:ol/proj.ProjectionLike} destProjection\n * @param {number} [precision=COORD_PRECISION]\n * @return {Array<Array<Array<number[]>>>}\n */\nexport function transformMultiPolygon (\n  coordinates,\n  sourceProjection,\n  destProjection,\n  precision = COORD_PRECISION,\n) {\n  if (!coordinates) return\n\n  return coordinates.map(polygon => transformPolygon(polygon, sourceProjection, destProjection, precision))\n}\n\n/**\n * Transforms by geom type\n * @type {Object<string, function>}\n */\nexport const transforms = /*#__PURE__*/{\n  [GeometryType.POINT]: {\n    toLonLat: pointToLonLat,\n    fromLonLat: pointFromLonLat,\n    transform: transformPoint,\n  },\n  [GeometryType.LINE_STRING]: {\n    toLonLat: lineToLonLat,\n    fromLonLat: lineFromLonLat,\n    transform: transformLine,\n  },\n  [GeometryType.POLYGON]: {\n    toLonLat: polygonToLonLat,\n    fromLonLat: polygonFromLonLat,\n    transform: transformPolygon,\n  },\n  [GeometryType.MULTI_POINT]: {\n    toLonLat: multiPointToLonLat,\n    fromLonLat: multiPointFromLonLat,\n    transform: transformMultiPoint,\n  },\n  [GeometryType.MULTI_LINE_STRING]: {\n    toLonLat: multiLineToLonLat,\n    fromLonLat: multiLineFromLonLat,\n    transform: transformMultiLine,\n  },\n  [GeometryType.MULTI_POLYGON]: {\n    toLonLat: multiPolygonToLonLat,\n    fromLonLat: multiPolygonFromLonLat,\n    transform: transformMultiPolygon,\n  },\n  [GeometryType.CIRCLE]: {\n    toLonLat: pointToLonLat,\n    fromLonLat: pointFromLonLat,\n    transform: transformPoint,\n  },\n}\n\n/**\n * @param {number[]} extent\n * @param {module:ol/proj.ProjectionLike} sourceProjection\n * @param {module:ol/proj.ProjectionLike} destProjection\n * @param {number} [precision=COORD_PRECISION]\n * @return {number[]}\n */\nexport function transformExtent (\n  extent,\n  sourceProjection,\n  destProjection,\n  precision = COORD_PRECISION,\n) {\n  if (!extent) return\n  if (extent.every(x => !isFinite(x))) return extent\n  let ext = baseTransformExtent(extent, sourceProjection, destProjection)\n  if (ext.some(x => isNaN(x))) {\n    ext = baseTransformExtent(baseTransformExtent(extent, sourceProjection, EPSG_4326), EPSG_4326, destProjection)\n  }\n  return roundExtent(ext, precision)\n}\n\n/**\n * @param {number[]} extent\n * @param {module:ol/proj.ProjectionLike} [projection=EPSG:3857]\n * @param {number} [precision=COORD_PRECISION]\n * @return {number[]}\n */\nexport function extentFromLonLat (\n  extent,\n  projection = EPSG_3857,\n  precision = COORD_PRECISION,\n) {\n  if (!extent) return\n\n  return transformExtent(extent, EPSG_4326, projection, precision)\n}\n\n/**\n * @param {number[]} extent\n * @param {module:ol/proj.ProjectionLike} [projection=EPSG:3857]\n * @param {number} [precision=COORD_PRECISION]\n * @return {number[]}\n */\nexport function extentToLonLat (\n  extent,\n  projection = EPSG_3857,\n  precision = COORD_PRECISION,\n) {\n  if (!extent) return\n\n  return transformExtent(extent, projection, EPSG_4326, precision)\n}\n\nexport function transformDistance (\n  distance,\n  sourceProjection,\n  destProjection,\n  precision = COORD_PRECISION,\n) {\n  if (!distance) return\n\n  const line = transformLine(\n    [[0, 0], [distance, 0]],\n    sourceProjection,\n    destProjection,\n    precision,\n  )\n\n  return calcDistance(line[0], line[1], precision)\n}\n","/* MIT license */\n\nmodule.exports = {\n  rgb2hsl: rgb2hsl,\n  rgb2hsv: rgb2hsv,\n  rgb2hwb: rgb2hwb,\n  rgb2cmyk: rgb2cmyk,\n  rgb2keyword: rgb2keyword,\n  rgb2xyz: rgb2xyz,\n  rgb2lab: rgb2lab,\n  rgb2lch: rgb2lch,\n\n  hsl2rgb: hsl2rgb,\n  hsl2hsv: hsl2hsv,\n  hsl2hwb: hsl2hwb,\n  hsl2cmyk: hsl2cmyk,\n  hsl2keyword: hsl2keyword,\n\n  hsv2rgb: hsv2rgb,\n  hsv2hsl: hsv2hsl,\n  hsv2hwb: hsv2hwb,\n  hsv2cmyk: hsv2cmyk,\n  hsv2keyword: hsv2keyword,\n\n  hwb2rgb: hwb2rgb,\n  hwb2hsl: hwb2hsl,\n  hwb2hsv: hwb2hsv,\n  hwb2cmyk: hwb2cmyk,\n  hwb2keyword: hwb2keyword,\n\n  cmyk2rgb: cmyk2rgb,\n  cmyk2hsl: cmyk2hsl,\n  cmyk2hsv: cmyk2hsv,\n  cmyk2hwb: cmyk2hwb,\n  cmyk2keyword: cmyk2keyword,\n\n  keyword2rgb: keyword2rgb,\n  keyword2hsl: keyword2hsl,\n  keyword2hsv: keyword2hsv,\n  keyword2hwb: keyword2hwb,\n  keyword2cmyk: keyword2cmyk,\n  keyword2lab: keyword2lab,\n  keyword2xyz: keyword2xyz,\n\n  xyz2rgb: xyz2rgb,\n  xyz2lab: xyz2lab,\n  xyz2lch: xyz2lch,\n\n  lab2xyz: lab2xyz,\n  lab2rgb: lab2rgb,\n  lab2lch: lab2lch,\n\n  lch2lab: lch2lab,\n  lch2xyz: lch2xyz,\n  lch2rgb: lch2rgb\n}\n\n\nfunction rgb2hsl(rgb) {\n  var r = rgb[0]/255,\n      g = rgb[1]/255,\n      b = rgb[2]/255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      delta = max - min,\n      h, s, l;\n\n  if (max == min)\n    h = 0;\n  else if (r == max)\n    h = (g - b) / delta;\n  else if (g == max)\n    h = 2 + (b - r) / delta;\n  else if (b == max)\n    h = 4 + (r - g)/ delta;\n\n  h = Math.min(h * 60, 360);\n\n  if (h < 0)\n    h += 360;\n\n  l = (min + max) / 2;\n\n  if (max == min)\n    s = 0;\n  else if (l <= 0.5)\n    s = delta / (max + min);\n  else\n    s = delta / (2 - max - min);\n\n  return [h, s * 100, l * 100];\n}\n\nfunction rgb2hsv(rgb) {\n  var r = rgb[0],\n      g = rgb[1],\n      b = rgb[2],\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      delta = max - min,\n      h, s, v;\n\n  if (max == 0)\n    s = 0;\n  else\n    s = (delta/max * 1000)/10;\n\n  if (max == min)\n    h = 0;\n  else if (r == max)\n    h = (g - b) / delta;\n  else if (g == max)\n    h = 2 + (b - r) / delta;\n  else if (b == max)\n    h = 4 + (r - g) / delta;\n\n  h = Math.min(h * 60, 360);\n\n  if (h < 0)\n    h += 360;\n\n  v = ((max / 255) * 1000) / 10;\n\n  return [h, s, v];\n}\n\nfunction rgb2hwb(rgb) {\n  var r = rgb[0],\n      g = rgb[1],\n      b = rgb[2],\n      h = rgb2hsl(rgb)[0],\n      w = 1/255 * Math.min(r, Math.min(g, b)),\n      b = 1 - 1/255 * Math.max(r, Math.max(g, b));\n\n  return [h, w * 100, b * 100];\n}\n\nfunction rgb2cmyk(rgb) {\n  var r = rgb[0] / 255,\n      g = rgb[1] / 255,\n      b = rgb[2] / 255,\n      c, m, y, k;\n\n  k = Math.min(1 - r, 1 - g, 1 - b);\n  c = (1 - r - k) / (1 - k) || 0;\n  m = (1 - g - k) / (1 - k) || 0;\n  y = (1 - b - k) / (1 - k) || 0;\n  return [c * 100, m * 100, y * 100, k * 100];\n}\n\nfunction rgb2keyword(rgb) {\n  return reverseKeywords[JSON.stringify(rgb)];\n}\n\nfunction rgb2xyz(rgb) {\n  var r = rgb[0] / 255,\n      g = rgb[1] / 255,\n      b = rgb[2] / 255;\n\n  // assume sRGB\n  r = r > 0.04045 ? Math.pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);\n  g = g > 0.04045 ? Math.pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);\n  b = b > 0.04045 ? Math.pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);\n\n  var x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);\n  var y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);\n  var z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);\n\n  return [x * 100, y *100, z * 100];\n}\n\nfunction rgb2lab(rgb) {\n  var xyz = rgb2xyz(rgb),\n        x = xyz[0],\n        y = xyz[1],\n        z = xyz[2],\n        l, a, b;\n\n  x /= 95.047;\n  y /= 100;\n  z /= 108.883;\n\n  x = x > 0.008856 ? Math.pow(x, 1/3) : (7.787 * x) + (16 / 116);\n  y = y > 0.008856 ? Math.pow(y, 1/3) : (7.787 * y) + (16 / 116);\n  z = z > 0.008856 ? Math.pow(z, 1/3) : (7.787 * z) + (16 / 116);\n\n  l = (116 * y) - 16;\n  a = 500 * (x - y);\n  b = 200 * (y - z);\n\n  return [l, a, b];\n}\n\nfunction rgb2lch(args) {\n  return lab2lch(rgb2lab(args));\n}\n\nfunction hsl2rgb(hsl) {\n  var h = hsl[0] / 360,\n      s = hsl[1] / 100,\n      l = hsl[2] / 100,\n      t1, t2, t3, rgb, val;\n\n  if (s == 0) {\n    val = l * 255;\n    return [val, val, val];\n  }\n\n  if (l < 0.5)\n    t2 = l * (1 + s);\n  else\n    t2 = l + s - l * s;\n  t1 = 2 * l - t2;\n\n  rgb = [0, 0, 0];\n  for (var i = 0; i < 3; i++) {\n    t3 = h + 1 / 3 * - (i - 1);\n    t3 < 0 && t3++;\n    t3 > 1 && t3--;\n\n    if (6 * t3 < 1)\n      val = t1 + (t2 - t1) * 6 * t3;\n    else if (2 * t3 < 1)\n      val = t2;\n    else if (3 * t3 < 2)\n      val = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n    else\n      val = t1;\n\n    rgb[i] = val * 255;\n  }\n\n  return rgb;\n}\n\nfunction hsl2hsv(hsl) {\n  var h = hsl[0],\n      s = hsl[1] / 100,\n      l = hsl[2] / 100,\n      sv, v;\n\n  if(l === 0) {\n      // no need to do calc on black\n      // also avoids divide by 0 error\n      return [0, 0, 0];\n  }\n\n  l *= 2;\n  s *= (l <= 1) ? l : 2 - l;\n  v = (l + s) / 2;\n  sv = (2 * s) / (l + s);\n  return [h, sv * 100, v * 100];\n}\n\nfunction hsl2hwb(args) {\n  return rgb2hwb(hsl2rgb(args));\n}\n\nfunction hsl2cmyk(args) {\n  return rgb2cmyk(hsl2rgb(args));\n}\n\nfunction hsl2keyword(args) {\n  return rgb2keyword(hsl2rgb(args));\n}\n\n\nfunction hsv2rgb(hsv) {\n  var h = hsv[0] / 60,\n      s = hsv[1] / 100,\n      v = hsv[2] / 100,\n      hi = Math.floor(h) % 6;\n\n  var f = h - Math.floor(h),\n      p = 255 * v * (1 - s),\n      q = 255 * v * (1 - (s * f)),\n      t = 255 * v * (1 - (s * (1 - f))),\n      v = 255 * v;\n\n  switch(hi) {\n    case 0:\n      return [v, t, p];\n    case 1:\n      return [q, v, p];\n    case 2:\n      return [p, v, t];\n    case 3:\n      return [p, q, v];\n    case 4:\n      return [t, p, v];\n    case 5:\n      return [v, p, q];\n  }\n}\n\nfunction hsv2hsl(hsv) {\n  var h = hsv[0],\n      s = hsv[1] / 100,\n      v = hsv[2] / 100,\n      sl, l;\n\n  l = (2 - s) * v;\n  sl = s * v;\n  sl /= (l <= 1) ? l : 2 - l;\n  sl = sl || 0;\n  l /= 2;\n  return [h, sl * 100, l * 100];\n}\n\nfunction hsv2hwb(args) {\n  return rgb2hwb(hsv2rgb(args))\n}\n\nfunction hsv2cmyk(args) {\n  return rgb2cmyk(hsv2rgb(args));\n}\n\nfunction hsv2keyword(args) {\n  return rgb2keyword(hsv2rgb(args));\n}\n\n// http://dev.w3.org/csswg/css-color/#hwb-to-rgb\nfunction hwb2rgb(hwb) {\n  var h = hwb[0] / 360,\n      wh = hwb[1] / 100,\n      bl = hwb[2] / 100,\n      ratio = wh + bl,\n      i, v, f, n;\n\n  // wh + bl cant be > 1\n  if (ratio > 1) {\n    wh /= ratio;\n    bl /= ratio;\n  }\n\n  i = Math.floor(6 * h);\n  v = 1 - bl;\n  f = 6 * h - i;\n  if ((i & 0x01) != 0) {\n    f = 1 - f;\n  }\n  n = wh + f * (v - wh);  // linear interpolation\n\n  switch (i) {\n    default:\n    case 6:\n    case 0: r = v; g = n; b = wh; break;\n    case 1: r = n; g = v; b = wh; break;\n    case 2: r = wh; g = v; b = n; break;\n    case 3: r = wh; g = n; b = v; break;\n    case 4: r = n; g = wh; b = v; break;\n    case 5: r = v; g = wh; b = n; break;\n  }\n\n  return [r * 255, g * 255, b * 255];\n}\n\nfunction hwb2hsl(args) {\n  return rgb2hsl(hwb2rgb(args));\n}\n\nfunction hwb2hsv(args) {\n  return rgb2hsv(hwb2rgb(args));\n}\n\nfunction hwb2cmyk(args) {\n  return rgb2cmyk(hwb2rgb(args));\n}\n\nfunction hwb2keyword(args) {\n  return rgb2keyword(hwb2rgb(args));\n}\n\nfunction cmyk2rgb(cmyk) {\n  var c = cmyk[0] / 100,\n      m = cmyk[1] / 100,\n      y = cmyk[2] / 100,\n      k = cmyk[3] / 100,\n      r, g, b;\n\n  r = 1 - Math.min(1, c * (1 - k) + k);\n  g = 1 - Math.min(1, m * (1 - k) + k);\n  b = 1 - Math.min(1, y * (1 - k) + k);\n  return [r * 255, g * 255, b * 255];\n}\n\nfunction cmyk2hsl(args) {\n  return rgb2hsl(cmyk2rgb(args));\n}\n\nfunction cmyk2hsv(args) {\n  return rgb2hsv(cmyk2rgb(args));\n}\n\nfunction cmyk2hwb(args) {\n  return rgb2hwb(cmyk2rgb(args));\n}\n\nfunction cmyk2keyword(args) {\n  return rgb2keyword(cmyk2rgb(args));\n}\n\n\nfunction xyz2rgb(xyz) {\n  var x = xyz[0] / 100,\n      y = xyz[1] / 100,\n      z = xyz[2] / 100,\n      r, g, b;\n\n  r = (x * 3.2406) + (y * -1.5372) + (z * -0.4986);\n  g = (x * -0.9689) + (y * 1.8758) + (z * 0.0415);\n  b = (x * 0.0557) + (y * -0.2040) + (z * 1.0570);\n\n  // assume sRGB\n  r = r > 0.0031308 ? ((1.055 * Math.pow(r, 1.0 / 2.4)) - 0.055)\n    : r = (r * 12.92);\n\n  g = g > 0.0031308 ? ((1.055 * Math.pow(g, 1.0 / 2.4)) - 0.055)\n    : g = (g * 12.92);\n\n  b = b > 0.0031308 ? ((1.055 * Math.pow(b, 1.0 / 2.4)) - 0.055)\n    : b = (b * 12.92);\n\n  r = Math.min(Math.max(0, r), 1);\n  g = Math.min(Math.max(0, g), 1);\n  b = Math.min(Math.max(0, b), 1);\n\n  return [r * 255, g * 255, b * 255];\n}\n\nfunction xyz2lab(xyz) {\n  var x = xyz[0],\n      y = xyz[1],\n      z = xyz[2],\n      l, a, b;\n\n  x /= 95.047;\n  y /= 100;\n  z /= 108.883;\n\n  x = x > 0.008856 ? Math.pow(x, 1/3) : (7.787 * x) + (16 / 116);\n  y = y > 0.008856 ? Math.pow(y, 1/3) : (7.787 * y) + (16 / 116);\n  z = z > 0.008856 ? Math.pow(z, 1/3) : (7.787 * z) + (16 / 116);\n\n  l = (116 * y) - 16;\n  a = 500 * (x - y);\n  b = 200 * (y - z);\n\n  return [l, a, b];\n}\n\nfunction xyz2lch(args) {\n  return lab2lch(xyz2lab(args));\n}\n\nfunction lab2xyz(lab) {\n  var l = lab[0],\n      a = lab[1],\n      b = lab[2],\n      x, y, z, y2;\n\n  if (l <= 8) {\n    y = (l * 100) / 903.3;\n    y2 = (7.787 * (y / 100)) + (16 / 116);\n  } else {\n    y = 100 * Math.pow((l + 16) / 116, 3);\n    y2 = Math.pow(y / 100, 1/3);\n  }\n\n  x = x / 95.047 <= 0.008856 ? x = (95.047 * ((a / 500) + y2 - (16 / 116))) / 7.787 : 95.047 * Math.pow((a / 500) + y2, 3);\n\n  z = z / 108.883 <= 0.008859 ? z = (108.883 * (y2 - (b / 200) - (16 / 116))) / 7.787 : 108.883 * Math.pow(y2 - (b / 200), 3);\n\n  return [x, y, z];\n}\n\nfunction lab2lch(lab) {\n  var l = lab[0],\n      a = lab[1],\n      b = lab[2],\n      hr, h, c;\n\n  hr = Math.atan2(b, a);\n  h = hr * 360 / 2 / Math.PI;\n  if (h < 0) {\n    h += 360;\n  }\n  c = Math.sqrt(a * a + b * b);\n  return [l, c, h];\n}\n\nfunction lab2rgb(args) {\n  return xyz2rgb(lab2xyz(args));\n}\n\nfunction lch2lab(lch) {\n  var l = lch[0],\n      c = lch[1],\n      h = lch[2],\n      a, b, hr;\n\n  hr = h / 360 * 2 * Math.PI;\n  a = c * Math.cos(hr);\n  b = c * Math.sin(hr);\n  return [l, a, b];\n}\n\nfunction lch2xyz(args) {\n  return lab2xyz(lch2lab(args));\n}\n\nfunction lch2rgb(args) {\n  return lab2rgb(lch2lab(args));\n}\n\nfunction keyword2rgb(keyword) {\n  return cssKeywords[keyword];\n}\n\nfunction keyword2hsl(args) {\n  return rgb2hsl(keyword2rgb(args));\n}\n\nfunction keyword2hsv(args) {\n  return rgb2hsv(keyword2rgb(args));\n}\n\nfunction keyword2hwb(args) {\n  return rgb2hwb(keyword2rgb(args));\n}\n\nfunction keyword2cmyk(args) {\n  return rgb2cmyk(keyword2rgb(args));\n}\n\nfunction keyword2lab(args) {\n  return rgb2lab(keyword2rgb(args));\n}\n\nfunction keyword2xyz(args) {\n  return rgb2xyz(keyword2rgb(args));\n}\n\nvar cssKeywords = {\n  aliceblue:  [240,248,255],\n  antiquewhite: [250,235,215],\n  aqua: [0,255,255],\n  aquamarine: [127,255,212],\n  azure:  [240,255,255],\n  beige:  [245,245,220],\n  bisque: [255,228,196],\n  black:  [0,0,0],\n  blanchedalmond: [255,235,205],\n  blue: [0,0,255],\n  blueviolet: [138,43,226],\n  brown:  [165,42,42],\n  burlywood:  [222,184,135],\n  cadetblue:  [95,158,160],\n  chartreuse: [127,255,0],\n  chocolate:  [210,105,30],\n  coral:  [255,127,80],\n  cornflowerblue: [100,149,237],\n  cornsilk: [255,248,220],\n  crimson:  [220,20,60],\n  cyan: [0,255,255],\n  darkblue: [0,0,139],\n  darkcyan: [0,139,139],\n  darkgoldenrod:  [184,134,11],\n  darkgray: [169,169,169],\n  darkgreen:  [0,100,0],\n  darkgrey: [169,169,169],\n  darkkhaki:  [189,183,107],\n  darkmagenta:  [139,0,139],\n  darkolivegreen: [85,107,47],\n  darkorange: [255,140,0],\n  darkorchid: [153,50,204],\n  darkred:  [139,0,0],\n  darksalmon: [233,150,122],\n  darkseagreen: [143,188,143],\n  darkslateblue:  [72,61,139],\n  darkslategray:  [47,79,79],\n  darkslategrey:  [47,79,79],\n  darkturquoise:  [0,206,209],\n  darkviolet: [148,0,211],\n  deeppink: [255,20,147],\n  deepskyblue:  [0,191,255],\n  dimgray:  [105,105,105],\n  dimgrey:  [105,105,105],\n  dodgerblue: [30,144,255],\n  firebrick:  [178,34,34],\n  floralwhite:  [255,250,240],\n  forestgreen:  [34,139,34],\n  fuchsia:  [255,0,255],\n  gainsboro:  [220,220,220],\n  ghostwhite: [248,248,255],\n  gold: [255,215,0],\n  goldenrod:  [218,165,32],\n  gray: [128,128,128],\n  green:  [0,128,0],\n  greenyellow:  [173,255,47],\n  grey: [128,128,128],\n  honeydew: [240,255,240],\n  hotpink:  [255,105,180],\n  indianred:  [205,92,92],\n  indigo: [75,0,130],\n  ivory:  [255,255,240],\n  khaki:  [240,230,140],\n  lavender: [230,230,250],\n  lavenderblush:  [255,240,245],\n  lawngreen:  [124,252,0],\n  lemonchiffon: [255,250,205],\n  lightblue:  [173,216,230],\n  lightcoral: [240,128,128],\n  lightcyan:  [224,255,255],\n  lightgoldenrodyellow: [250,250,210],\n  lightgray:  [211,211,211],\n  lightgreen: [144,238,144],\n  lightgrey:  [211,211,211],\n  lightpink:  [255,182,193],\n  lightsalmon:  [255,160,122],\n  lightseagreen:  [32,178,170],\n  lightskyblue: [135,206,250],\n  lightslategray: [119,136,153],\n  lightslategrey: [119,136,153],\n  lightsteelblue: [176,196,222],\n  lightyellow:  [255,255,224],\n  lime: [0,255,0],\n  limegreen:  [50,205,50],\n  linen:  [250,240,230],\n  magenta:  [255,0,255],\n  maroon: [128,0,0],\n  mediumaquamarine: [102,205,170],\n  mediumblue: [0,0,205],\n  mediumorchid: [186,85,211],\n  mediumpurple: [147,112,219],\n  mediumseagreen: [60,179,113],\n  mediumslateblue:  [123,104,238],\n  mediumspringgreen:  [0,250,154],\n  mediumturquoise:  [72,209,204],\n  mediumvioletred:  [199,21,133],\n  midnightblue: [25,25,112],\n  mintcream:  [245,255,250],\n  mistyrose:  [255,228,225],\n  moccasin: [255,228,181],\n  navajowhite:  [255,222,173],\n  navy: [0,0,128],\n  oldlace:  [253,245,230],\n  olive:  [128,128,0],\n  olivedrab:  [107,142,35],\n  orange: [255,165,0],\n  orangered:  [255,69,0],\n  orchid: [218,112,214],\n  palegoldenrod:  [238,232,170],\n  palegreen:  [152,251,152],\n  paleturquoise:  [175,238,238],\n  palevioletred:  [219,112,147],\n  papayawhip: [255,239,213],\n  peachpuff:  [255,218,185],\n  peru: [205,133,63],\n  pink: [255,192,203],\n  plum: [221,160,221],\n  powderblue: [176,224,230],\n  purple: [128,0,128],\n  rebeccapurple: [102, 51, 153],\n  red:  [255,0,0],\n  rosybrown:  [188,143,143],\n  royalblue:  [65,105,225],\n  saddlebrown:  [139,69,19],\n  salmon: [250,128,114],\n  sandybrown: [244,164,96],\n  seagreen: [46,139,87],\n  seashell: [255,245,238],\n  sienna: [160,82,45],\n  silver: [192,192,192],\n  skyblue:  [135,206,235],\n  slateblue:  [106,90,205],\n  slategray:  [112,128,144],\n  slategrey:  [112,128,144],\n  snow: [255,250,250],\n  springgreen:  [0,255,127],\n  steelblue:  [70,130,180],\n  tan:  [210,180,140],\n  teal: [0,128,128],\n  thistle:  [216,191,216],\n  tomato: [255,99,71],\n  turquoise:  [64,224,208],\n  violet: [238,130,238],\n  wheat:  [245,222,179],\n  white:  [255,255,255],\n  whitesmoke: [245,245,245],\n  yellow: [255,255,0],\n  yellowgreen:  [154,205,50]\n};\n\nvar reverseKeywords = {};\nfor (var key in cssKeywords) {\n  reverseKeywords[JSON.stringify(cssKeywords[key])] = key;\n}\n","var conversions = require(\"./conversions\");\n\nvar convert = function() {\n   return new Converter();\n}\n\nfor (var func in conversions) {\n  // export Raw versions\n  convert[func + \"Raw\"] =  (function(func) {\n    // accept array or plain args\n    return function(arg) {\n      if (typeof arg == \"number\")\n        arg = Array.prototype.slice.call(arguments);\n      return conversions[func](arg);\n    }\n  })(func);\n\n  var pair = /(\\w+)2(\\w+)/.exec(func),\n      from = pair[1],\n      to = pair[2];\n\n  // export rgb2hsl and [\"rgb\"][\"hsl\"]\n  convert[from] = convert[from] || {};\n\n  convert[from][to] = convert[func] = (function(func) { \n    return function(arg) {\n      if (typeof arg == \"number\")\n        arg = Array.prototype.slice.call(arguments);\n      \n      var val = conversions[func](arg);\n      if (typeof val == \"string\" || val === undefined)\n        return val; // keyword\n\n      for (var i = 0; i < val.length; i++)\n        val[i] = Math.round(val[i]);\n      return val;\n    }\n  })(func);\n}\n\n\n/* Converter does lazy conversion and caching */\nvar Converter = function() {\n   this.convs = {};\n};\n\n/* Either get the values for a space or\n  set the values for a space, depending on args */\nConverter.prototype.routeSpace = function(space, args) {\n   var values = args[0];\n   if (values === undefined) {\n      // color.rgb()\n      return this.getValues(space);\n   }\n   // color.rgb(10, 10, 10)\n   if (typeof values == \"number\") {\n      values = Array.prototype.slice.call(args);        \n   }\n\n   return this.setValues(space, values);\n};\n  \n/* Set the values for a space, invalidating cache */\nConverter.prototype.setValues = function(space, values) {\n   this.space = space;\n   this.convs = {};\n   this.convs[space] = values;\n   return this;\n};\n\n/* Get the values for a space. If there's already\n  a conversion for the space, fetch it, otherwise\n  compute it */\nConverter.prototype.getValues = function(space) {\n   var vals = this.convs[space];\n   if (!vals) {\n      var fspace = this.space,\n          from = this.convs[fspace];\n      vals = convert[fspace][space](from);\n\n      this.convs[space] = vals;\n   }\n  return vals;\n};\n\n[\"rgb\", \"hsl\", \"hsv\", \"cmyk\", \"keyword\"].forEach(function(space) {\n   Converter.prototype[space] = function(vals) {\n      return this.routeSpace(space, arguments);\n   }\n});\n\nmodule.exports = convert;","import { Geometry } from 'ol/geom'\nimport GeometryType from 'ol/geom/GeometryType'\nimport { Circle, Fill, Icon, Image as ImageStyle, RegularShape, Stroke, Style, Text } from 'ol/style'\nimport parseColor from 'parse-color'\nimport { v4 as uuid } from 'uuid'\nimport { addPrefix, filter, identity, isArray, isFunction, isNumeric, reduce } from '../utils'\n\nfunction isStyle (style) {\n  return style instanceof Style ||\n    style instanceof ImageStyle ||\n    style instanceof Fill ||\n    style instanceof Stroke ||\n    style instanceof Text ||\n    style instanceof Function\n}\n\nexport function getStyleId (style) {\n  if (isStyle(style)) {\n    return style.id\n  }\n\n  throw new Error('Illegal style argument')\n}\n\nexport function setStyleId (style, styleId) {\n  if (isStyle(style)) {\n    style.id = styleId\n\n    return style\n  }\n\n  throw new Error('Illegal style argument')\n}\n\nexport function initializeStyle (style, defaultStyleId) {\n  if (getStyleId(style) == null) {\n    setStyleId(style, defaultStyleId || uuid())\n  }\n\n  return style\n}\n\n/**\n * @return {VlStyle[]}\n */\nexport function defaultStyle () {\n  return [\n    {\n      fillColor: [255, 255, 255, 0.4],\n      strokeColor: '#3399cc',\n      strokeWidth: 1.25,\n      imageRadius: 5,\n    },\n  ]\n}\n\n/**\n * @return {Object<GeometryType, VlStyle[]>}\n */\nexport function defaultEditStyle () {\n  /** @type {Object<GeometryType, VlStyle[]>} */\n  const styles = {}\n  const white = [255, 255, 255, 1]\n  const blue = [0, 153, 255, 1]\n  const width = 3\n\n  styles[GeometryType.LINE_STRING] = [\n    {\n      strokeColor: white,\n      strokeWidth: width + 2,\n    }, {\n      strokeColor: blue,\n      strokeWidth: width,\n    },\n  ]\n  styles[GeometryType.MULTI_LINE_STRING] = styles[GeometryType.LINE_STRING]\n\n  styles[GeometryType.POLYGON] = [\n    {\n      fillColor: [255, 255, 255, 0.5],\n    },\n  ].concat(styles[GeometryType.LINE_STRING])\n  styles[GeometryType.MULTI_POLYGON] = styles[GeometryType.POLYGON]\n\n  styles[GeometryType.CIRCLE] = styles[GeometryType.POLYGON].concat(styles[GeometryType.LINE_STRING])\n\n  styles[GeometryType.POINT] = [\n    {\n      imageRadius: width * 2,\n      fillColor: blue,\n      strokeColor: white,\n      strokeWidth: width / 2,\n      zIndex: Infinity,\n    },\n  ]\n  styles[GeometryType.MULTI_POINT] = styles[GeometryType.POINT]\n\n  styles[GeometryType.GEOMETRY_COLLECTION] = styles[GeometryType.POLYGON].concat(\n    styles[GeometryType.LINE_STRING],\n    styles[GeometryType.POINT],\n  )\n\n  return styles\n}\n\nconst isEmpty = x => {\n  if (x == null) return true\n  if (typeof x === 'number') return false\n\n  return ((typeof x === 'string' || Array.isArray(x)) && !x.length) || !Object.keys(x).length\n}\n\n/**\n * @param {VlStyle} vlStyle\n * @param {function} [geomReader=identity]\n * @return {Style|undefined}\n */\nexport function createStyle (vlStyle, geomReader = identity) {\n  if (isEmpty(vlStyle)) return\n\n  const olStyle = {\n    text: createTextStyle(vlStyle, 'text'),\n    fill: createFillStyle(vlStyle, 'fill'),\n    stroke: createStrokeStyle(vlStyle, 'stroke'),\n    image: createImageStyle(vlStyle, 'image'),\n    geometry: createGeomStyle(vlStyle, geomReader),\n    zIndex: vlStyle.zIndex,\n    renderer: vlStyle.renderer,\n  }\n\n  if (!isEmpty(olStyle)) {\n    return new Style(olStyle)\n  }\n}\n\n/**\n * @param {*} color\n * @returns {*}\n */\nexport function normalizeColor (color) {\n  let c = color\n\n  if (typeof color === 'string') {\n    c = parseColor(color).rgba\n  }\n\n  return c\n}\n\n/**\n * @param {VlStyle} vlStyle\n * @param {string} [prefix]\n * @returns {Fill|undefined}\n */\nexport function createFillStyle (vlStyle, prefix = '') {\n  const prefixKey = addPrefix(prefix)\n  // check on already compiled style existence\n  if (vlStyle[prefixKey()] instanceof Fill) return vlStyle[prefixKey()]\n\n  const keys = [\n    'color',\n  ].reduce((keys, key) => ({\n    ...keys,\n    [prefixKey(key)]: key,\n  }), {})\n  const fillStyle = reduce(vlStyle, (style, value, name) => {\n    if (!keys[name] || value == null) return style\n\n    switch (keys[name]) {\n      case 'color':\n        value = normalizeColor(value)\n        break\n    }\n\n    style[keys[name]] = value\n\n    return style\n  }, {})\n\n  if (!isEmpty(fillStyle)) {\n    return new Fill(fillStyle)\n  }\n}\n\n/**\n * @param {VlStyle} vlStyle\n * @param {string} [prefix]\n * @returns {Stroke|undefined}\n */\nexport function createStrokeStyle (vlStyle, prefix = '') {\n  const prefixKey = addPrefix(prefix)\n  if (vlStyle[prefixKey()] instanceof Stroke) return vlStyle[prefixKey()]\n\n  const keys = [\n    'color',\n    'width',\n    'miterLimit',\n    'lineCap',\n    'lineJoin',\n    'lineDash',\n    'lineDashOffset',\n  ].reduce((keys, key) => ({\n    ...keys,\n    [prefixKey(key)]: key,\n  }), {})\n  const strokeStyle = reduce(vlStyle, (style, value, name) => {\n    if (!keys[name] || value == null) return style\n\n    switch (keys[name]) {\n      case 'color':\n        value = normalizeColor(value)\n        break\n    }\n\n    style[keys[name]] = value\n\n    return style\n  }, {})\n\n  if (!isEmpty(strokeStyle)) {\n    return new Stroke(strokeStyle)\n  }\n}\n\n/**\n * @param {VlStyle} vlStyle\n * @param {string} [prefix]\n * @returns {Image|undefined}\n * @todo split to separate circle, regShape, Icon\n */\nexport function createImageStyle (vlStyle, prefix = '') {\n  const prefixKey = addPrefix(prefix)\n\n  if (\n    isEmpty(vlStyle[prefixKey('src')]) &&\n    isEmpty(vlStyle.image) &&\n    isEmpty(vlStyle[prefixKey('points')]) &&\n    !isNumeric(vlStyle[prefixKey('radius')])\n  ) {\n    return\n  }\n\n  if (vlStyle.image instanceof ImageStyle) return vlStyle.image\n\n  let imageStyle, Ctor\n\n  if (!isEmpty(vlStyle[prefixKey('src')]) || !isEmpty(vlStyle.image)) {\n    // icon construction\n    Ctor = Icon\n    // then create Icon options\n    imageStyle = {\n      anchor: vlStyle[prefixKey('anchor')],\n      anchorOrigin: vlStyle[prefixKey('anchorOrigin')],\n      anchorXUnits: vlStyle[prefixKey('anchorXUnits')],\n      anchorYUnits: vlStyle[prefixKey('anchorYUnits')],\n      color: vlStyle[prefixKey('color')],\n      offset: vlStyle[prefixKey('offset')],\n      offsetOrigin: vlStyle[prefixKey('offsetOrigin')],\n      size: vlStyle[prefixKey('size')],\n      img: vlStyle.image,\n      imgSize: vlStyle[prefixKey('imgSize')],\n      src: vlStyle[prefixKey('src')],\n      crossOrigin: vlStyle[prefixKey('crossOrigin')],\n    }\n  } else if (vlStyle[prefixKey('points')] != null) {\n    // regular shape construction\n    Ctor = RegularShape\n    // create RegularShape options\n    imageStyle = {\n      points: vlStyle[prefixKey('points')],\n      radius: vlStyle[prefixKey('radius')],\n      radius1: vlStyle[prefixKey('radius1')],\n      radius2: vlStyle[prefixKey('radius2')],\n      angle: vlStyle[prefixKey('angle')],\n    }\n  } else {\n    // circle construction\n    Ctor = Circle\n    // create Circle options\n    imageStyle = {\n      radius: vlStyle[prefixKey('radius')],\n    }\n  }\n\n  imageStyle = {\n    ...imageStyle,\n    fill: createFillStyle(vlStyle, prefixKey('fill')),\n    stroke: createStrokeStyle(vlStyle, prefixKey('stroke')),\n    opacity: vlStyle[prefixKey('opacity')],\n    scale: vlStyle[prefixKey('scale')],\n    rotation: vlStyle[prefixKey('rotation')],\n    rotateWithView: vlStyle[prefixKey('rotateWithView')],\n    displacement: vlStyle[prefixKey('displacement')],\n  }\n\n  if (!isEmpty(imageStyle)) {\n    return new Ctor(imageStyle)\n  }\n}\n\n/**\n * @param {VlStyle} vlStyle\n * @param {string} [prefix]\n * @returns {Text|undefined}\n */\nexport function createTextStyle (vlStyle, prefix = '') {\n  if (vlStyle.text == null) return\n  if (vlStyle.text instanceof Text) return vlStyle.text\n\n  const prefixKey = addPrefix(prefix)\n  const textStyle = {\n    text: vlStyle.text,\n    textAlign: vlStyle.textAlign,\n    textBaseline: vlStyle.textBaseline,\n    font: vlStyle[prefixKey('font')],\n    scale: vlStyle[prefixKey('scale')],\n    offsetX: vlStyle[prefixKey('offsetX')],\n    offsetY: vlStyle[prefixKey('offsetY')],\n    rotation: vlStyle[prefixKey('rotation')],\n    rotateWithView: vlStyle[prefixKey('rotateWithView')],\n    padding: vlStyle[prefixKey('padding')],\n    maxAngle: vlStyle[prefixKey('maxAngle')],\n    overflow: vlStyle[prefixKey('overflow')],\n    placement: vlStyle[prefixKey('placement')],\n    fill: createFillStyle(vlStyle, prefixKey('fill')),\n    stroke: createStrokeStyle(vlStyle, prefixKey('stroke')),\n    backgroundFill: createFillStyle(vlStyle, prefixKey('backgroundFill')),\n    backgroundStroke: createStrokeStyle(vlStyle, prefixKey('backgroundStroke')),\n  }\n\n  if (!isEmpty(textStyle)) {\n    return new Text(textStyle)\n  }\n}\n\n/**\n * @param {VlStyle} vlStyle\n * @param {function} [geomReader=identity]\n * @return {Geometry|Object|function|undefined}\n */\nexport function createGeomStyle (vlStyle, geomReader = identity) {\n  if (isFunction(vlStyle.geom)) {\n    return function __styleGeomFunc (feature) {\n      return vlStyle.geom(feature)\n    }\n  }\n  if (vlStyle.geom instanceof Geometry) {\n    return vlStyle.geom\n  }\n  if (vlStyle.geom) {\n    return geomReader(vlStyle.geom)\n  }\n  return null\n}\n\nexport function dumpStyle (olStyle, geomWriter = identity) {\n  if (!olStyle || isFunction(olStyle)) return\n\n  return {\n    ...dumpFillStyle(olStyle.getFill(), 'fill'),\n    ...dumpStrokeStyle(olStyle.getStroke(), 'stroke'),\n    ...dumpImageStyle(olStyle.getImage(), 'image'),\n    ...dumpTextStyle(olStyle.getText(), 'text'),\n    ...dumpGeomStyle(olStyle.getGeometry(), geomWriter),\n    zIndex: olStyle.getZIndex(),\n    // renderer: olStyle.getRenderer(),\n  }\n}\n\nexport function dumpFillStyle (fillStyle, prefix = '') {\n  if (!fillStyle) return {}\n\n  const prefixKey = addPrefix(prefix)\n\n  return {\n    [prefixKey('color')]: fillStyle.getColor(),\n  }\n}\n\nexport function dumpStrokeStyle (strokeStyle, prefix = '') {\n  if (!strokeStyle) return {}\n\n  const prefixKey = addPrefix(prefix)\n\n  return {\n    [prefixKey('color')]: strokeStyle.getColor(),\n    [prefixKey('width')]: strokeStyle.getWidth(),\n    [prefixKey('miterLimit')]: strokeStyle.getMiterLimit(),\n    [prefixKey('lineCap')]: strokeStyle.getLineCap(),\n    [prefixKey('lineJoin')]: strokeStyle.getLineJoin(),\n    [prefixKey('lineDash')]: strokeStyle.getLineDash(),\n    [prefixKey('lineDashOffset')]: strokeStyle.getLineDashOffset(),\n  }\n}\n\nexport function dumpImageStyle (imageStyle, prefix = '') {\n  if (!imageStyle) return {}\n\n  const prefixKey = addPrefix(prefix)\n  const common = {\n    [prefixKey('opacity')]: imageStyle.getOpacity(),\n    [prefixKey('scale')]: imageStyle.getScale(),\n    [prefixKey('rotation')]: imageStyle.getRotation(),\n    [prefixKey('rotateWithView')]: imageStyle.getRotateWithView(),\n    [prefixKey('displacement')]: imageStyle.getDisplacement(),\n  }\n\n  switch (true) {\n    case imageStyle instanceof Icon:\n      return {\n        ...common,\n        // fixme avoid using of internal fields, but currently Icon haven't getters for several fields\n        [prefixKey('anchor')]: imageStyle.anchor_.slice(),\n        [prefixKey('anchorOrigin')]: imageStyle.anchorOrigin_,\n        [prefixKey('anchorXUnits')]: imageStyle.anchorXUnits_,\n        [prefixKey('anchorYUnits')]: imageStyle.anchorYUnits_,\n        [prefixKey('color')]: isArray(imageStyle.getColor()) ? imageStyle.getColor().slice() : imageStyle.getColor(),\n        [prefixKey('offset')]: imageStyle.offset_.slice(),\n        [prefixKey('offsetOrigin')]: imageStyle.offsetOrigin_,\n        [prefixKey('size')]: isArray(imageStyle.getSize()) ? imageStyle.getSize().slice() : imageStyle.getSize(),\n        [prefixKey('src')]: imageStyle.getSrc(),\n        [prefixKey('crossOrigin')]: imageStyle.crossOrigin_,\n      }\n    case imageStyle instanceof Circle:\n      return {\n        ...common,\n        ...dumpFillStyle(imageStyle.getFill(), prefixKey('fill')),\n        ...dumpStrokeStyle(imageStyle.getStroke(), prefixKey('stroke')),\n        [prefixKey('radius')]: imageStyle.getRadius(),\n      }\n    case imageStyle instanceof RegularShape:\n      return {\n        ...common,\n        ...dumpFillStyle(imageStyle.getFill(), prefixKey('fill')),\n        ...dumpStrokeStyle(imageStyle.getStroke(), prefixKey('stroke')),\n        [prefixKey('points')]: imageStyle.getPoints(),\n        [prefixKey('radius')]: imageStyle.getRadius(),\n        [prefixKey('radius2')]: imageStyle.getRadius2(),\n        [prefixKey('angle')]: imageStyle.getAngle(),\n      }\n    default:\n      return {\n        ...common,\n      }\n  }\n}\n\nexport function dumpTextStyle (textStyle, prefix = '') {\n  if (!textStyle) return {}\n\n  const prefixKey = addPrefix(prefix)\n\n  return filter({\n    text: textStyle.getText(),\n    textAlign: textStyle.getTextAlign(),\n    textBaseline: textStyle.getTextBaseline(),\n    [prefixKey('font')]: textStyle.getFont(),\n    [prefixKey('scale')]: textStyle.getScale(),\n    [prefixKey('rotation')]: textStyle.getRotation(),\n    [prefixKey('offsetX')]: textStyle.getOffsetX(),\n    [prefixKey('offsetY')]: textStyle.getOffsetY(),\n    [prefixKey('rotateWithView')]: textStyle.getRotateWithView(),\n    [prefixKey('padding')]: textStyle.getPadding(),\n    [prefixKey('maxAngle')]: textStyle.getMaxAngle(),\n    [prefixKey('overflow')]: textStyle.getOverflow(),\n    [prefixKey('placement')]: textStyle.getPlacement(),\n    ...dumpFillStyle(textStyle.getFill(), prefixKey('fill')),\n    ...dumpStrokeStyle(textStyle.getStroke(), prefixKey('stroke')),\n    ...dumpFillStyle(textStyle.getBackgroundFill(), prefixKey('backgroundFill')),\n    ...dumpStrokeStyle(textStyle.getBackgroundStroke(), prefixKey('backgroundStroke')),\n  }, value => value != null)\n}\n\nexport function dumpGeomStyle (geom, geomWriter = identity) {\n  if (!geom) return {}\n\n  return {\n    geom: geomWriter(geom),\n  }\n}\n\n/**\n * @typedef {\n *            module:ol/style/Style~Style |\n *            module:ol/style/Image~ImageStyle |\n *            module:ol/style/Fill~Fill |\n *            module:ol/style/Stroke~Stroke |\n *            module:ol/style/Text~Text |\n *            module:ol/style/Style~StyleFunction\n *          } OlAllStyle\n */\n\n/**\n * @typedef {Object} VlStyle\n *\n * Shared\n * @property {string|number[]|undefined} fillColor\n * @property {string|number[]|undefined} strokeColor\n * @property {number|undefined} strokeWidth\n * @property {number|undefined} strokeMiterLimit\n * @property {number[]|undefined} strokeLineDash\n * @property {number|undefined} strokeLineDashOffset\n * @property {string|undefined} strokeLineCap\n * @property {string|undefined} strokeLineJoin\n * @property {number|undefined} zIndex\n * @property {Fill|undefined} fill\n * @property {Stroke|undefined} stroke\n * @property {RenderFunction|undefined} renderer\n *\n * Text only\n * @property {string|Text|undefined} text\n * @property {string|undefined} textFont\n * @property {number|string|undefined} textFontSize\n * @property {string|undefined} textFontWeight\n * @property {string|number[]|undefined} textFillColor\n * @property {string|number[]|undefined} textStrokeColor\n * @property {number|undefined} textStrokeWidth\n * @property {number|undefined} textStrokeMiterLimit\n * @property {number[]|undefined} textStrokeLineDash\n * @property {number|undefined} textStrokeLineDashOffset\n * @property {string|undefined} textStrokeLineCap\n * @property {string|undefined} textStrokeLineJoin\n * @property {number|undefined} textScale\n * @property {string|undefined} textAlign\n * @property {number|undefined} textRotation\n * @property {number|undefined} textOffsetX\n * @property {number|undefined} textOffsetY\n * @property {Stroke|undefined} textStroke\n * @property {Fill|undefined} textFill\n * @property {boolean|undefined} textRotateWithView\n * @property {number[]|undefined} textPadding\n * @property {number|undefined} textMaxAngle\n * @property {boolean|undefined} textOverflow\n * @property {string|undefined} textPlacement\n * @property {string|undefined} textBaseline\n * @property {Fill|undefined} textBackgroundFillColor\n * @property {Stroke|undefined} textBackgroundStrokeColor\n * @property {Stroke|undefined} textBackgroundStrokeWidth\n * @property {number|undefined} textBackgroundStrokeMiterLimit\n * @property {Stroke|undefined} textBackgroundStrokeLineDash\n * @property {number|undefined} textBackgroundStrokeLineDashOffset\n * @property {Stroke|undefined} textBackgroundStrokeCap\n * @property {Stroke|undefined} textBackgroundStrokeJoin\n *\n * Image only\n * @property {Image|undefined} image\n * @property {string|undefined} imageSrc\n * @property {number[]|undefined} imageSize\n * @property {number[]|undefined} imageImgSize\n * @property {number|undefined} imageOffset\n * @property {number[]|undefined} imageAnchor\n * @property {string|undefined} imageAnchorXUnits\n * @property {string|undefined} imageAnchorYUnits\n * @property {number|undefined} imageScale\n * @property {number|undefined} imageRotation\n * @property {number|undefined} imageRadius\n * @property {number|undefined} imageRadius1\n * @property {number|undefined} imageRadius2\n * @property {number|undefined} imagePoints\n * @property {number|undefined} imageAngle\n * @property {number|undefined} imageOpacity\n * @property {string|number[]|undefined} imageFillColor\n * @property {string|number[]|undefined} imageStrokeColor\n * @property {number|undefined} imageStrokeWidth\n * @property {number|undefined} imageStrokeMiterLimit\n * @property {number[]|undefined} imageStrokeLineDash\n * @property {number|undefined} imageStrokeLineDashOffset\n * @property {string|undefined} imageStrokeLineCap\n * @property {string|undefined} imageStrokeLineJoin\n * @property {IconOrigin|undefined} imageAnchorOrigin\n * @property {ColorLike|undefined} imageColor\n * @property {IconOrigin|undefined} imageOffsetOrigin\n * @property {Stroke|undefined} imageStroke\n * @property {Fill|undefined} imageFill\n * @property {string|undefined} imageCrossOrigin\n * @property {boolean|undefined} imageRotateWithView\n * @property {number[]|undefined} imageDisplacement\n *\n * @property {Geometry|Object|function|undefined} geom Coordinates should be in map projection\n */\n","var convert = require('color-convert');\n\nmodule.exports = function (cstr) {\n    var m, conv, parts, alpha;\n    if (m = /^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\\s*\\(([^\\)]*)\\)/.exec(cstr)) {\n        var name = m[1];\n        var base = name.replace(/a$/, '');\n        var size = base === 'cmyk' ? 4 : 3;\n        conv = convert[base];\n        \n        parts = m[2].replace(/^\\s+|\\s+$/g, '')\n            .split(/\\s*,\\s*/)\n            .map(function (x, i) {\n                if (/%$/.test(x) && i === size) {\n                    return parseFloat(x) / 100;\n                }\n                else if (/%$/.test(x)) {\n                    return parseFloat(x);\n                }\n                return parseFloat(x);\n            })\n        ;\n        if (name === base) parts.push(1);\n        alpha = parts[size] === undefined ? 1 : parts[size];\n        parts = parts.slice(0, size);\n        \n        conv[base] = function () { return parts };\n    }\n    else if (/^#[A-Fa-f0-9]+$/.test(cstr)) {\n        var base = cstr.replace(/^#/,'');\n        var size = base.length;\n        conv = convert.rgb;\n        parts = base.split(size === 3 ? /(.)/ : /(..)/);\n        parts = parts.filter(Boolean)\n            .map(function (x) {\n                if (size === 3) {\n                    return parseInt(x + x, 16);\n                }\n                else {\n                    return parseInt(x, 16)\n                }\n            })\n        ;\n        alpha = 1;\n        conv.rgb = function () { return parts };\n        if (!parts[0]) parts[0] = 0;\n        if (!parts[1]) parts[1] = 0;\n        if (!parts[2]) parts[2] = 0;\n    }\n    else {\n        conv = convert.keyword;\n        conv.keyword = function () { return cstr };\n        parts = cstr;\n        alpha = 1;\n    }\n    \n    var res = {\n        rgb: undefined,\n        hsl: undefined,\n        hsv: undefined,\n        cmyk: undefined,\n        keyword: undefined,\n        hex: undefined\n    };\n    try { res.rgb = conv.rgb(parts) } catch (e) {}\n    try { res.hsl = conv.hsl(parts) } catch (e) {}\n    try { res.hsv = conv.hsv(parts) } catch (e) {}\n    try { res.cmyk = conv.cmyk(parts) } catch (e) {}\n    try { res.keyword = conv.keyword(parts) } catch (e) {}\n    \n    if (res.rgb) res.hex = '#' + res.rgb.map(function (x) {\n        var s = x.toString(16);\n        if (s.length === 1) return '0' + s;\n        return s;\n    }).join('');\n    \n    if (res.rgb) res.rgba = res.rgb.concat(alpha);\n    if (res.hsl) res.hsla = res.hsl.concat(alpha);\n    if (res.hsv) res.hsva = res.hsv.concat(alpha);\n    if (res.cmyk) res.cmyka = res.cmyk.concat(alpha);\n    \n    return res;\n};\n","import { Feature } from 'ol'\nimport { GeoJSON as BaseGeoJSON, MVT } from 'ol/format'\nimport { Circle, LineString } from 'ol/geom'\nimport GeometryType from 'ol/geom/GeometryType'\nimport { isEmpty } from 'ol/obj'\nimport { getLength } from 'ol/sphere'\nimport { clonePlainObject, isArray, isFunction, isPlainObject, map, noop, omit } from '../utils'\nimport { COORD_PRECISION } from './coord'\nimport { createCircularPolygon, isCircleGeom } from './geom'\nimport { EPSG_3857, EPSG_4326, transformDistance, transformPoint } from './proj'\nimport { createStyle, dumpStyle } from './style'\n\n/**\n * @param {Object} [options]\n * @return {GeoJSON}\n */\nexport function createGeoJsonFmt (options) {\n  return new GeoJSON(options)\n}\n\n/**\n * @param [options]\n * @return {MVT}\n */\nexport function createMvtFmt (options) {\n  return new MVT(options)\n}\n\nexport const CIRCLE_SERIALIZE_PROP = 'vl_circle'\nexport const STYLE_SERIALIZE_PROP = 'vl_style'\n\nclass GeoJSON extends BaseGeoJSON {\n  constructor (options = {}) {\n    super(options)\n\n    this.defaultDecimals = options.decimals != null && options.decimals > -1 ? options.decimals : undefined\n    this.defaultStyleReader = options.styleReader || noop\n    this.defaultStyleWriter = options.styleWriter || noop\n  }\n\n  adaptOptions (options = {}) {\n    if (options.decimals != null && options.decimals < 0) {\n      options.decimals = undefined\n    }\n\n    return super.adaptOptions({\n      decimals: this.defaultDecimals,\n      styleReader: this.defaultStyleReader,\n      styleWriter: this.defaultStyleWriter,\n      ...options,\n    })\n  }\n\n  writeGeometryObject (geometry, options) {\n    options = this.adaptOptions(options)\n\n    if (isCircleGeom(geometry)) {\n      let center = geometry.getCenter().slice()\n      const end = [center[0] + geometry.getRadius(), center[1]]\n      const radius = getLength(new LineString([center, end]), options.featureProjection)\n      center = transformPoint(center, options.featureProjection, EPSG_4326)\n      geometry = createCircularPolygon(center, radius)\n      options.featureProjection = EPSG_4326\n    }\n\n    return super.writeGeometryObject(geometry, options)\n  }\n\n  writeFeatureObject (feature, options) {\n    options = this.adaptOptions(options)\n\n    /** @type {GeoJSONFeature} */\n    const object = {\n      type: 'Feature',\n      geometry: null,\n      properties: null,\n    }\n\n    const id = feature.getId()\n    if (id !== undefined) {\n      object.id = id\n    }\n\n    /* eslint-disable quote-props */\n\n    const geometry = feature.getGeometry()\n    if (geometry) {\n      object.geometry = this.writeGeometryObject(geometry, options)\n      if (isCircleGeom(geometry)) {\n        object.properties = {\n          ...object.properties || {},\n          [CIRCLE_SERIALIZE_PROP]: {\n            center: transformPoint(\n              geometry.getCenter(),\n              options.featureProjection,\n              options.dataProjection,\n            ),\n            radius: transformDistance(\n              geometry.getRadius(),\n              options.featureProjection,\n              options.dataProjection,\n            ),\n          },\n        }\n      }\n    }\n\n    const properties = feature.getProperties()\n    delete properties[feature.getGeometryName()]\n    if (!isEmpty(properties)) {\n      object.properties = {\n        ...object.properties || {},\n        ...clonePlainObject(omit(properties, 'features')),\n      }\n\n      if (isArray(properties.features)) {\n        object.properties.features = map(properties.features, feature => {\n          if (feature instanceof Feature) {\n            return this.writeFeatureObject(feature, options)\n          }\n          return feature\n        })\n      }\n    }\n\n    let style = feature.getStyle()\n    if (style && !isFunction(style)) {\n      isArray(style) || (style = [style])\n      object.properties = {\n        ...object.properties || {},\n        [STYLE_SERIALIZE_PROP]: style.map(style => options.styleWriter(\n          style,\n          geometry => this.writeGeometryObject(geometry, options),\n        )),\n      }\n    }\n\n    /* eslint-enable quote-props */\n\n    return object\n  }\n\n  readFeatureFromObject (object, options) {\n    options = this.adaptOptions(options)\n    /**\n     * @type {GeoJSONFeature}\n     */\n    let geoJSONFeature\n    if (object.type === 'Feature') {\n      geoJSONFeature = clonePlainObject(object)\n    } else {\n      geoJSONFeature = {\n        type: 'Feature',\n        geometry: clonePlainObject(object),\n        properties: null,\n      }\n    }\n\n    const feature = new Feature()\n\n    /* eslint-disable dot-notation */\n\n    if (geoJSONFeature.properties && geoJSONFeature.properties[CIRCLE_SERIALIZE_PROP]) {\n      options.circle = geoJSONFeature.properties[CIRCLE_SERIALIZE_PROP]\n      delete geoJSONFeature.properties[CIRCLE_SERIALIZE_PROP]\n    }\n    const geometry = this.readGeometryFromObject(geoJSONFeature.geometry, options)\n    if (this.geometryName_) {\n      feature.setGeometryName(this.geometryName_)\n    } else if (this.extractGeometryName_ && 'geometry_name' in geoJSONFeature !== undefined) {\n      feature.setGeometryName(geoJSONFeature.geometry_name)\n    }\n    feature.setGeometry(geometry)\n\n    if ('id' in geoJSONFeature) {\n      feature.setId(geoJSONFeature.id)\n    }\n\n    if (geoJSONFeature.properties) {\n      if (geoJSONFeature.properties[STYLE_SERIALIZE_PROP]) {\n        let style = geoJSONFeature.properties[STYLE_SERIALIZE_PROP]\n        isArray(style) || (style = [style])\n        feature.setStyle(\n          style.map(style => options.styleReader(\n            style,\n            geometry => this.readGeometryFromObject(geometry, omit(options, ['circle'])),\n          )),\n        )\n        delete geoJSONFeature.properties[STYLE_SERIALIZE_PROP]\n      }\n\n      if (isArray(geoJSONFeature.properties.features)) {\n        geoJSONFeature.properties.features = map(geoJSONFeature.properties.features, feature => {\n          if (isGeoJSONFeature(feature)) {\n            return this.readFeatureFromObject(feature, options)\n          }\n          return feature\n        })\n      }\n\n      feature.setProperties(geoJSONFeature.properties, true)\n    }\n\n    /* eslint-enable dot-notation */\n\n    return feature\n  }\n\n  readGeometryFromObject (object, options) {\n    options = this.adaptOptions(options)\n\n    if (options.circle?.center && options.circle?.radius) {\n      return new Circle(\n        transformPoint(\n          options.circle.center,\n          options.dataProjection,\n          options.featureProjection,\n        ),\n        transformDistance(\n          options.circle.radius,\n          options.dataProjection,\n          options.featureProjection,\n        ),\n      )\n    }\n\n    return super.readGeometryFromObject(clonePlainObject(object), options)\n  }\n}\n\nlet geoJsonFmt\n\nexport function getGeoJsonFmt () {\n  if (geoJsonFmt) {\n    return geoJsonFmt\n  }\n  return createGeoJsonFmt({\n    decimals: COORD_PRECISION,\n    styleReader: createStyle,\n    styleWriter: dumpStyle,\n  })\n}\n\n/**\n * @param {Feature} feature\n * @param {ProjectionLike|undefined} [featureProjection=EPSG:3857]\n * @param {ProjectionLike|undefined} [dataProjection=EPSG:4326]\n * @param {number} [decimals=COORD_PRECISION]\n * @return {Object}\n */\nexport function writeGeoJsonFeature (\n  feature,\n  featureProjection = EPSG_3857,\n  dataProjection = EPSG_4326,\n  decimals = COORD_PRECISION,\n) {\n  if (!feature) return\n\n  return getGeoJsonFmt().writeFeatureObject(feature, {\n    featureProjection,\n    dataProjection,\n    decimals,\n  })\n}\n\n/**\n * @param {Object} geoJsonFeature\n * @param {ProjectionLike|undefined} [featureProjection=EPSG:3857]\n * @param {ProjectionLike|undefined} [dataProjection=EPSG:4326]\n * @param {number} [decimals=COORD_PRECISION]\n * @return {Feature}\n */\nexport function readGeoJsonFeature (\n  geoJsonFeature,\n  featureProjection = EPSG_3857,\n  dataProjection = EPSG_4326,\n  decimals = COORD_PRECISION,\n) {\n  if (!geoJsonFeature) return\n\n  return getGeoJsonFmt().readFeature(geoJsonFeature, {\n    featureProjection,\n    dataProjection,\n    decimals,\n  })\n}\n\n/**\n * @param {Geometry} geometry\n * @param {ProjectionLike|undefined} [geometryProjection=EPSG:3857]\n * @param {ProjectionLike|undefined} [dataProjection=EPSG:4326]\n * @param {number} [decimals=COORD_PRECISION]\n * @return {Object}\n */\nexport function writeGeoJsonGeometry (\n  geometry,\n  geometryProjection = EPSG_3857,\n  dataProjection = EPSG_4326,\n  decimals = COORD_PRECISION,\n) {\n  if (!geometry) return\n\n  return getGeoJsonFmt().writeGeometryObject(geometry, {\n    featureProjection: geometryProjection,\n    dataProjection,\n    decimals,\n  })\n}\n\n/**\n * @param {Object|Object} geoJsonGeometry\n * @param {ProjectionLike|undefined} [geometryProjection=EPSG:3857]\n * @param {ProjectionLike|undefined} [dataProjection=EPSG:4326]\n * @param {number} [decimals=COORD_PRECISION]\n * @return {Geometry}\n */\nexport function readGeoJsonGeometry (\n  geoJsonGeometry,\n  geometryProjection = EPSG_3857,\n  dataProjection = EPSG_4326,\n  decimals = COORD_PRECISION,\n) {\n  if (!geoJsonGeometry) return\n\n  dataProjection = readProjection(geoJsonGeometry, dataProjection)\n\n  return getGeoJsonFmt().readGeometry(geoJsonGeometry, {\n    featureProjection: geometryProjection,\n    dataProjection,\n    decimals,\n  })\n}\n\nexport function readProjection (geoJsonObj, defaultProjection) {\n  return getGeoJsonFmt().readProjection(geoJsonObj) || defaultProjection\n}\n\n/**\n * @param {Object} feature\n * @returns {boolean}\n */\nexport function isGeoJSONFeature (feature) {\n  return isPlainObject(feature) && feature.type === 'Feature' &&\n    isGeoJSONGeometry(feature.geometry)\n}\n\nexport function isGeoJSONGeometry (geometry) {\n  return isPlainObject(geometry) &&\n    Object.values(GeometryType).includes(geometry.type) &&\n    isArray(geometry.coordinates)\n}\n","/**\n * @module ol/obj\n */\n/**\n * Polyfill for Object.assign().  Assigns enumerable and own properties from\n * one or more source objects to a target object.\n * See https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign.\n *\n * @param {!Object} target The target object.\n * @param {...Object} var_sources The source object(s).\n * @return {!Object} The modified target object.\n */\nexport var assign = typeof Object.assign === 'function'\n    ? Object.assign\n    : function (target, var_sources) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n        var output = Object(target);\n        for (var i = 1, ii = arguments.length; i < ii; ++i) {\n            var source = arguments[i];\n            if (source !== undefined && source !== null) {\n                for (var key in source) {\n                    if (source.hasOwnProperty(key)) {\n                        output[key] = source[key];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n/**\n * Removes all properties from an object.\n * @param {Object} object The object to clear.\n */\nexport function clear(object) {\n    for (var property in object) {\n        delete object[property];\n    }\n}\n/**\n * Polyfill for Object.values().  Get an array of property values from an object.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values\n *\n * @param {!Object<K,V>} object The object from which to get the values.\n * @return {!Array<V>} The property values.\n * @template K,V\n */\nexport var getValues = typeof Object.values === 'function'\n    ? Object.values\n    : function (object) {\n        var values = [];\n        for (var property in object) {\n            values.push(object[property]);\n        }\n        return values;\n    };\n/**\n * Determine if an object has any properties.\n * @param {Object} object The object to check.\n * @return {boolean} The object is empty.\n */\nexport function isEmpty(object) {\n    var property;\n    for (property in object) {\n        return false;\n    }\n    return !property;\n}\n//# sourceMappingURL=obj.js.map","import { Feature } from 'ol'\nimport { v4 as uuid } from 'uuid'\nimport { isPlainObject, omit } from '../utils'\nimport { CIRCLE_SERIALIZE_PROP, STYLE_SERIALIZE_PROP } from './format'\n\n/**\n * @param {Object|module:ol/Feature~Feature|string|number} feature\n * @return {string|number}\n * @throws {Error}\n */\nexport function getFeatureId (feature) {\n  if (feature instanceof Feature) {\n    return feature.getId()\n  } else if (isPlainObject(feature)) {\n    return feature.id\n  }\n\n  throw new Error('Illegal feature format')\n}\n\n/**\n * @param {module:ol/Feature~Feature|Object} feature\n * @param {string} featureId\n * @returns {module:ol/Feature~Feature|Object}\n */\nexport function setFeatureId (feature, featureId) {\n  if (feature instanceof Feature) {\n    feature.setId(featureId)\n\n    return feature\n  } else if (isPlainObject(feature)) {\n    feature.id = featureId\n\n    return feature\n  }\n\n  throw new Error('Illegal feature format')\n}\n\n/**\n * @param {module:ol/Feature~Feature} feature\n * @param {string|undefined} defaultFeatureId\n * @returns {Feature}\n */\nexport function initializeFeature (feature, defaultFeatureId) {\n  if (getFeatureId(feature) == null) {\n    setFeatureId(feature, defaultFeatureId || uuid())\n  }\n\n  return feature\n}\n\nexport function getFeatureGeomName (feature) {\n  if (feature instanceof Feature) {\n    return feature.getGeometryName()\n  }\n  return 'geometry'\n}\n\nexport function getFeatureGeom (feature) {\n  if (feature instanceof Feature) {\n    return feature.getGeometry()\n  } else if (isPlainObject(feature)) {\n    return feature.geometry\n  }\n\n  throw new Error('Illegal feature format')\n}\n\nexport function getFeatureProperties (feature) {\n  if (!feature) return\n\n  return omit(\n    (feature instanceof Feature ? feature.getProperties() : feature.properties) || {},\n    [\n      getFeatureGeomName(feature),\n      CIRCLE_SERIALIZE_PROP,\n      STYLE_SERIALIZE_PROP,\n    ],\n  )\n}\n\nexport function setFeatureProperties (feature, properties) {\n  if (!feature) return\n\n  properties = omit(properties || {}, [\n    getFeatureGeomName(feature),\n    CIRCLE_SERIALIZE_PROP,\n    STYLE_SERIALIZE_PROP,\n  ])\n\n  if (feature instanceof Feature) {\n    feature.setProperties(properties)\n  } else {\n    feature.properties = properties\n  }\n}\n","import { Interaction } from 'ol/interaction'\nimport { v4 as uuid } from 'uuid'\n\n/**\n * @param {module:ol/interaction/Interaction~Interaction|Object} interaction\n * @returns {string|null}\n */\nexport function getInteractionId (interaction) {\n  if (interaction instanceof Interaction) {\n    return interaction.get('id')\n  }\n\n  throw new Error('Illegal interaction argument')\n}\n\n/**\n * @param {module:ol/interaction/Interaction~Interaction|Object} interaction\n * @param {string} interactionId\n * @returns {module:ol/interaction/Interaction~Interaction|Object}\n */\nexport function setInteractionId (interaction, interactionId) {\n  if (interaction instanceof Interaction) {\n    interaction.set('id', interactionId)\n\n    return interaction\n  }\n\n  throw new Error('Illegal interaction argument')\n}\n\nexport function getInteractionPriority (interaction) {\n  if (interaction instanceof Interaction) {\n    return interaction.get('priority')\n  }\n\n  throw new Error('Illegal interaction argument')\n}\n\nexport function setInteractionPriority (interaction, priority) {\n  if (interaction instanceof Interaction) {\n    interaction.set('priority', priority)\n\n    return interaction\n  }\n\n  throw new Error('Illegal interaction argument')\n}\n\nexport function initializeInteraction (interaction, defaultInteractionId, defaultPriority) {\n  if (getInteractionId(interaction) == null) {\n    setInteractionId(interaction, defaultInteractionId || uuid())\n  }\n  if (getInteractionPriority(interaction) == null) {\n    setInteractionPriority(interaction, defaultPriority || 0)\n  }\n\n  return interaction\n}\n","import BaseLayer from 'ol/layer/Base'\nimport { v4 as uuid } from 'uuid'\n\nexport function getLayerId (layer) {\n  if (layer instanceof BaseLayer) {\n    return layer.get('id')\n  }\n\n  throw new Error('Illegal layer argument')\n}\n\nexport function setLayerId (layer, layerId) {\n  if (layer instanceof BaseLayer) {\n    layer.set('id', layerId)\n\n    return layer\n  }\n\n  throw new Error('Illegal layer argument')\n}\n\nexport function initializeLayer (layer, defaultLayerId) {\n  if (getLayerId(layer) == null) {\n    setLayerId(layer, defaultLayerId || uuid())\n  }\n\n  return layer\n}\n","import { PluggableMap } from 'ol'\n\nexport function getMapId (map) {\n  if (map instanceof PluggableMap) {\n    return map.get('id')\n  }\n\n  throw new Error('Illegal map argument')\n}\n\nexport function setMapId (map, mapId) {\n  if (map instanceof PluggableMap) {\n    map.set('id', mapId)\n\n    return map\n  }\n\n  throw new Error('Illegal map argument')\n}\n\nexport function getMapDataProjection (map) {\n  if (map instanceof PluggableMap) {\n    return map.get('dataProjection')\n  }\n\n  throw new Error('Illegal map argument')\n}\n\nexport function setMapDataProjection (map, dataProjection) {\n  if (map instanceof PluggableMap) {\n    map.set('dataProjection', dataProjection)\n\n    return map\n  }\n\n  throw new Error('Illegal map argument')\n}\n","import { Overlay } from 'ol'\nimport { v4 as uuid } from 'uuid'\n\nexport function getOverlayId (overlay) {\n  if (overlay instanceof Overlay) {\n    return overlay.get('id')\n  }\n\n  throw new Error('Illegal overlay argument')\n}\n\nexport function setOverlayId (overlay, overlayId) {\n  if (overlay instanceof Overlay) {\n    overlay.set('id', overlayId)\n\n    return overlay\n  }\n\n  throw new Error('Illegal overlay argument')\n}\n\nexport function initializeOverlay (overlay, defaultOverlay) {\n  if (getOverlayId(overlay) == null) {\n    setOverlayId(overlay, defaultOverlay || uuid())\n  }\n\n  return overlay\n}\n","import { Source } from 'ol/source'\nimport { v4 as uuid } from 'uuid'\nimport { reduce } from '../utils'\n\nexport function getSourceId (source) {\n  if (source instanceof Source) {\n    return source.get('id')\n  }\n\n  throw new Error('Illegal source argument')\n}\n\nexport function setSourceId (source, sourceId) {\n  if (source instanceof Source) {\n    source.set('id', sourceId)\n\n    return source\n  }\n\n  throw new Error('Illegal source argument')\n}\n\nexport function initializeSource (source, defaultSourceId) {\n  if (getSourceId(source) == null) {\n    setSourceId(source, defaultSourceId || uuid())\n  }\n\n  return source\n}\n\nexport function cleanSourceParams (params, filterKeys) {\n  return reduce(params, (params, value, key) => {\n    key = key.toUpperCase()\n    if (filterKeys.includes(key)) {\n      return params\n    }\n\n    params[key] = value\n\n    return params\n  }, {})\n}\n","/**\n * @module ol/proj/Units\n */\n/**\n * Projection units: `'degrees'`, `'ft'`, `'m'`, `'pixels'`, `'tile-pixels'` or\n * `'us-ft'`.\n * @enum {string}\n */\nvar Units = {\n    /**\n     * Degrees\n     * @api\n     */\n    DEGREES: 'degrees',\n    /**\n     * Feet\n     * @api\n     */\n    FEET: 'ft',\n    /**\n     * Meters\n     * @api\n     */\n    METERS: 'm',\n    /**\n     * Pixels\n     * @api\n     */\n    PIXELS: 'pixels',\n    /**\n     * Tile Pixels\n     * @api\n     */\n    TILE_PIXELS: 'tile-pixels',\n    /**\n     * US Feet\n     * @api\n     */\n    USFEET: 'us-ft',\n};\n/**\n * Meters per unit lookup table.\n * @const\n * @type {Object<Units, number>}\n * @api\n */\nexport var METERS_PER_UNIT = {};\n// use the radius of the Normal sphere\nMETERS_PER_UNIT[Units.DEGREES] = (2 * Math.PI * 6370997) / 360;\nMETERS_PER_UNIT[Units.FEET] = 0.3048;\nMETERS_PER_UNIT[Units.METERS] = 1;\nMETERS_PER_UNIT[Units.USFEET] = 1200 / 3937;\nexport default Units;\n//# sourceMappingURL=Units.js.map","import { get as getProjection } from 'ol/proj'\nimport Units, { METERS_PER_UNIT } from 'ol/proj/Units'\nimport { createOrUpdate } from './extent'\n\n// copy-paste from ol/tilegrid\nexport function extentFromProjection (projection) {\n  projection = getProjection(projection)\n  let extent = projection.getExtent()\n  if (!extent) {\n    const half = 180 * METERS_PER_UNIT[Units.DEGREES] / projection.getMetersPerUnit()\n    extent = createOrUpdate(-half, -half, half, half)\n  }\n  return extent\n}\n","import { View } from 'ol'\nimport { v4 as uuid } from 'uuid'\n\nexport function getViewId (view) {\n  if (view instanceof View) {\n    return view.get('id')\n  }\n\n  throw new Error('Illegal view argument')\n}\n\nexport function setViewId (view, viewId) {\n  if (view instanceof View) {\n    view.set('id', viewId)\n\n    return view\n  }\n\n  throw new Error('Illegal view argument')\n}\n\nexport function initializeView (view, defaultViewId) {\n  if (getViewId(view) == null) {\n    setViewId(view, defaultViewId || uuid())\n  }\n\n  return view\n}\n","export * from './control'\nexport * from './coord'\nexport * from './extent'\nexport * from './feature'\nexport * from './format'\nexport * from './geom'\nexport * from './interaction'\nexport * from './layer'\nexport * from './map'\nexport * from './overlay'\nexport * from './proj'\nexport * from './source'\nexport * from './style'\nexport * from './tilegrid'\nexport * from './view'\n\nexport function expandUrl (url) {\n  const urls = []\n  let match = /\\{([a-z])-([a-z])\\}/.exec(url)\n  if (match) {\n    // char range\n    const startCharCode = match[1].charCodeAt(0)\n    const stopCharCode = match[2].charCodeAt(0)\n    let charCode\n    for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n      urls.push(url.replace(match[0], String.fromCharCode(charCode)))\n    }\n    return urls\n  }\n  match = /\\{(\\d+)-(\\d+)\\}/.exec(url)\n  if (match) {\n    // number range\n    const stop1 = parseInt(match[2], 10)\n    for (let i = parseInt(match[1], 10); i <= stop1; i++) {\n      urls.push(url.replace(match[0], i.toString()))\n    }\n    return urls\n  }\n  urls.push(url)\n  return urls\n}\n","'use strict';\n\n/* global setTimeout, clearTimeout */\n\nmodule.exports = function debounce(fn) {\n  var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var lastCallAt = void 0;\n  var deferred = void 0;\n  var timer = void 0;\n  var pendingArgs = [];\n  return function debounced() {\n    var currentWait = getWait(wait);\n    var currentTime = new Date().getTime();\n\n    var isCold = !lastCallAt || currentTime - lastCallAt > currentWait;\n\n    lastCallAt = currentTime;\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (isCold && options.leading) {\n      return options.accumulate ? Promise.resolve(fn.call(this, [args])).then(function (result) {\n        return result[0];\n      }) : Promise.resolve(fn.call.apply(fn, [this].concat(args)));\n    }\n\n    if (deferred) {\n      clearTimeout(timer);\n    } else {\n      deferred = defer();\n    }\n\n    pendingArgs.push(args);\n    timer = setTimeout(flush.bind(this), currentWait);\n\n    if (options.accumulate) {\n      var argsIndex = pendingArgs.length - 1;\n      return deferred.promise.then(function (results) {\n        return results[argsIndex];\n      });\n    }\n\n    return deferred.promise;\n  };\n\n  function flush() {\n    var thisDeferred = deferred;\n    clearTimeout(timer);\n\n    Promise.resolve(options.accumulate ? fn.call(this, pendingArgs) : fn.apply(this, pendingArgs[pendingArgs.length - 1])).then(thisDeferred.resolve, thisDeferred.reject);\n\n    pendingArgs = [];\n    deferred = null;\n  }\n};\n\nfunction getWait(wait) {\n  return typeof wait === 'function' ? wait() : wait;\n}\n\nfunction defer() {\n  var deferred = {};\n  deferred.promise = new Promise(function (resolve, reject) {\n    deferred.resolve = resolve;\n    deferred.reject = reject;\n  });\n  return deferred;\n}\n//# sourceMappingURL=index.js.map","/**\n * @module ol/events/EventType\n */\n/**\n * @enum {string}\n * @const\n */\nexport default {\n    /**\n     * Generic change event. Triggered when the revision counter is increased.\n     * @event module:ol/events/Event~BaseEvent#change\n     * @api\n     */\n    CHANGE: 'change',\n    /**\n     * Generic error event. Triggered when an error occurs.\n     * @event module:ol/events/Event~BaseEvent#error\n     * @api\n     */\n    ERROR: 'error',\n    BLUR: 'blur',\n    CLEAR: 'clear',\n    CONTEXTMENU: 'contextmenu',\n    CLICK: 'click',\n    DBLCLICK: 'dblclick',\n    DRAGENTER: 'dragenter',\n    DRAGOVER: 'dragover',\n    DROP: 'drop',\n    FOCUS: 'focus',\n    KEYDOWN: 'keydown',\n    KEYPRESS: 'keypress',\n    LOAD: 'load',\n    RESIZE: 'resize',\n    TOUCHMOVE: 'touchmove',\n    WHEEL: 'wheel',\n};\n//# sourceMappingURL=EventType.js.map","/**\n * @module ol/ObjectEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when a property is changed.\n     * @event module:ol/Object.ObjectEvent#propertychange\n     * @api\n     */\n    PROPERTYCHANGE: 'propertychange',\n};\n//# sourceMappingURL=ObjectEventType.js.map","'use strict';\n\nfunction isVueQuery(selector) {\n    return selector._isVueQuery === true;\n}\n/**\n * Checks if a Vue component matches against a selector.\n * The selector can be either:\n * - a string (name of the component)\n * - a VueComponent object\n * - a VueQuery object\n */\nvar matches = function (vm, selector) {\n    if (!selector) {\n        return true;\n    }\n    if (selector instanceof String || typeof selector === 'string') {\n        return vm.$options.name === selector;\n    }\n    if (isVueQuery(selector)) {\n        return selector.vm === vm;\n    }\n    return selector === vm;\n};\n/**\n * Get all children of a Vue component, optionally filtered by a selector.\n */\nvar rawChildren = function (vm, selector) {\n    var collected = [];\n    vm.$children.forEach(function (child) {\n        if (matches(child, selector)) {\n            collected.push(child);\n        }\n    });\n    return collected;\n};\n/**\n * Get all siblings of a Vue component, optionally filtered by a selector.\n * @param  {Boolean} withSelf Whether to include the current vm\n */\nvar rawSiblings = function (vm, selector, withSelf) {\n    if (withSelf === void 0) { withSelf = true; }\n    if (isRoot(vm)) {\n        return [];\n    }\n    var collected = rawChildren(vm.$parent, selector);\n    if (!withSelf) {\n        var index = collected.indexOf(vm);\n        if (index > -1) {\n            collected.splice(index, 1);\n        }\n    }\n    return collected;\n};\n/**\n * Check if a Vue component is the root instance.\n */\nvar isRoot = function (vm) {\n    return vm.$root === vm;\n};\n/**\n * Get the first sibling of a Vue component filtered by a selector.\n */\nvar siblingsWithSort = function (vm, selector, direction) {\n    var siblings = rawSiblings(vm);\n    if (!siblings.length) {\n        return null;\n    }\n    var i = siblings.indexOf(vm);\n    if (direction === \"Ascending\") {\n        if (i === siblings.length - 1) {\n            return null;\n        }\n        return matches(siblings[i + 1], selector) ? siblings[i + 1] : null;\n    }\n    if (i === 0) {\n        return null;\n    }\n    return matches(siblings[i - 1], selector) ? siblings[i - 1] : null;\n};\n/**\n * Get all siblings of a Vue component filtered by a selector.\n */\nvar siblingsAllWithSort = function (vm, selector, direction) {\n    var siblings = rawSiblings(vm, selector);\n    if (!siblings.length) {\n        return [];\n    }\n    var i = siblings.indexOf(vm);\n    return direction === \"Ascending\"\n        ? siblings.slice(i + 1)\n        : siblings.slice(0, i).reverse();\n};\n/**\n * Get all siblings of a Vue component filtered by a \"filter\" selector, and up to but\n * not including the \"until\" selector passed.\n */\nvar siblingsUntilWithSort = function (vm, until, filter, direction) {\n    var siblings = rawSiblings(vm);\n    if (!siblings.length) {\n        return [];\n    }\n    if (direction === \"Descending\") {\n        siblings = siblings.reverse();\n    }\n    siblings = siblings.slice(siblings.indexOf(vm) + 1);\n    if (!until) {\n        return siblings;\n    }\n    var collected = [];\n    for (var i = 0, j = siblings.length; i < j; ++i) {\n        if (matches(siblings[i], until)) {\n            break;\n        }\n        if (matches(siblings[i], filter)) {\n            collected.push(siblings[i]);\n        }\n    }\n    return collected;\n};\n\nvar $ = function (vm) {\n    if (Array.isArray(vm)) {\n        // If the argument is an array, we VueQuery'fy the elements.\n        return vm.map(function (c) {\n            return $(c);\n        });\n    }\n    // Avoid double encapsulation\n    if (isVueQuery(vm)) {\n        return vm;\n    }\n    // @ts-ignore\n    if (!vm._isVue) {\n        throw new Error('[VueQuery] Cannot instantiate on a non-Vue element');\n    }\n    if (!isRoot(vm) && !vm.$options.name) {\n        throw new Error('[VueQuery] Non-root component must have a `name` option');\n    }\n    return {\n        vm: vm,\n        _isVueQuery: true,\n        children: function (selector) {\n            return $(rawChildren(vm, selector));\n        },\n        closest: function (selector) {\n            if (matches(vm, selector)) {\n                return $(vm);\n            }\n            if (!vm.$parent) {\n                return null;\n            }\n            var $parent = $(vm.$parent);\n            return $parent ? $parent.closest(selector) : null;\n        },\n        find: function (selector) {\n            var _find = function (component) {\n                var collected = [];\n                if (!component.$children || !component.$children.length) {\n                    return [];\n                }\n                component.$children.forEach(function (c) {\n                    if (matches(c, selector)) {\n                        collected.push(c);\n                    }\n                    collected = collected.concat(_find(c));\n                });\n                return collected;\n            };\n            return $(_find(vm));\n        },\n        has: function (selector) {\n            if (!vm.$children || !vm.$children.length) {\n                return false;\n            }\n            for (var i = 0, j = vm.$children.length; i < j; ++i) {\n                if (matches(vm.$children[i], selector)) {\n                    return true;\n                }\n                var $c = $(vm.$children[i]);\n                if (!$c) {\n                    break;\n                }\n                return $c.has(selector);\n            }\n            return false;\n        },\n        is: function (selector) {\n            if (Array.isArray(selector)) {\n                return selector.some(function (item) { return matches(vm, item); });\n            }\n            return matches(vm, selector);\n        },\n        next: function (selector) {\n            var _next = siblingsWithSort(vm, selector ? selector : null, 'Ascending');\n            return _next ? $(_next) : null;\n        },\n        nextAll: function (selector) {\n            return $(siblingsAllWithSort(vm, selector ? selector : null, 'Ascending'));\n        },\n        nextUntil: function (until, filter) {\n            return $(siblingsUntilWithSort(vm, until, filter, 'Ascending'));\n        },\n        parent: function (selector) {\n            if (isRoot(vm)) {\n                return null;\n            }\n            return matches(vm.$parent, selector) ? $(vm.$parent) : null;\n        },\n        parents: function (selector) {\n            var _parents = function (component) {\n                if (isRoot(component)) {\n                    return [];\n                }\n                var collected = [];\n                if (matches(component.$parent, selector)) {\n                    collected.push(component.$parent);\n                }\n                collected = collected.concat(_parents(component.$parent));\n                return collected;\n            };\n            return $(_parents(vm));\n        },\n        parentsUntil: function (until, filter) {\n            var _parentsUntil = function (component) {\n                if (isRoot(component)) {\n                    return [];\n                }\n                var collected = [];\n                if (until && matches(component.$parent, until)) {\n                    return collected;\n                }\n                if (matches(component.$parent, filter)) {\n                    collected.push(component.$parent);\n                }\n                return collected.concat(_parentsUntil(component.$parent));\n            };\n            return $(_parentsUntil(vm));\n        },\n        prev: function (selector) {\n            var _prev = siblingsWithSort(vm, selector ? selector : null, 'Descending');\n            return _prev ? $(_prev) : null;\n        },\n        prevAll: function (selector) {\n            return $(siblingsAllWithSort(vm, selector ? selector : null, 'Descending'));\n        },\n        prevUntil: function (until, filter) {\n            return $(siblingsUntilWithSort(vm, until, filter, 'Descending'));\n        },\n        siblings: function (selector) {\n            var children = rawSiblings(vm, selector);\n            var index = children.indexOf(vm);\n            if (index > -1) {\n                children.splice(index, 1);\n            }\n            return $(children);\n        }\n    };\n};\n\nmodule.exports = $;\n","import { fromEventPattern, merge as mergeObs, Observable } from 'rxjs'\nimport { distinctUntilChanged, map as mapObs } from 'rxjs/operators'\nimport { identity, isEqual, isFunction } from '../utils'\n\n/**\n * Creates an Observable using OpenLayers event pattern that emits events coming from the given event target.\n *\n * @example **Subscribe on view center change events**\n * const map = ol.Map({ ... })\n * const changes = Observable.fromOlEvent(map.getView(), 'change:center')\n *\n * changes.subscribe(({ coordinate }) => console.log(coordinate))\n *\n * @param {module:ol/Observable~Observable} target OpenLayers event target.\n * @param {string|Object[]} eventName The event name of interest, being emitted by the `target`\n *                          or an array of events/selectors like `[{ event: 'event1', selector?: x => x }, ...]`.\n * @param {function(...*): *} [selector] An optional function to post-process results. It takes the arguments\n *    from the event handler and should return a single value.\n * @param {Observable[]} [pipeEach]\n * @return {Observable<T>}\n * @memberOf {Observable}\n */\nexport function fromOlEvent (target, eventName, selector, pipeEach = []) {\n  if (Array.isArray(eventName)) {\n    return mergeObs(\n      ...eventName.map(\n        elem => {\n          let eventName, selector\n\n          if (typeof elem === 'object') {\n            eventName = elem.event\n            selector = elem.selector\n          } else {\n            eventName = elem\n          }\n\n          return fromOlEvent(target, eventName, selector).pipe(...pipeEach)\n        },\n      ),\n    )\n  }\n\n  selector || (selector = identity)\n\n  return fromEventPattern(\n    handler => target.on(eventName, handler),\n    handler => target.un(eventName, handler),\n  ).pipe(mapObs(selector))\n}\n\n/**\n * Creates Observable from OpenLayers change:* event\n * @param {module:ol/Observable~Observable} target\n * @param {string|string[]} [prop]\n * @param {boolean|function(a, b):boolean|undefined} [distinct] Distinct values by isEqual fn or by custom comparator\n * @param {function|undefined} [selector] Custom selector\n * @param {Observable[]} [pipeEach]\n * @return {Observable<{prop: string, value: *}>}\n */\nexport function fromOlChangeEvent (\n  target,\n  prop,\n  distinct,\n  selector,\n  pipeEach = [],\n) {\n  if (Array.isArray(prop)) {\n    return mergeObs(...prop.map(p => fromOlChangeEvent(target, p, distinct, selector).pipe(...pipeEach)))\n  }\n\n  selector || (selector = identity)\n  const event = `change:${prop}`\n  const observable = fromOlEvent(target, event, () => target.get(prop))\n  const operations = []\n\n  if (distinct) {\n    isFunction(distinct) || (distinct = isEqual)\n    operations.push(distinctUntilChanged(distinct))\n  }\n\n  operations.push(mapObs(value => selector({ prop, value })))\n\n  return observable.pipe(...operations)\n}\n\nexport function fromVueEvent (target, eventName, selector) {\n  if (Array.isArray(eventName)) {\n    return mergeObs(\n      ...eventName.map(\n        elem => {\n          let eventName, selector\n\n          if (typeof elem === 'object') {\n            eventName = elem.event\n            selector = elem.selector\n          } else {\n            eventName = elem\n          }\n\n          return fromVueEvent(target, eventName, selector)\n        },\n      ),\n    )\n  }\n\n  selector || (selector = identity)\n\n  return fromEventPattern(\n    handler => target.$on(eventName, handler),\n    handler => target.$off(eventName, handler),\n  ).pipe(mapObs(selector))\n}\n\nexport function fromVueWatcher (target, exprOrFn, options = {}) {\n  return new Observable(s => {\n    return target.$watch(exprOrFn, (value, previous) => s.next({ value, previous }), options)\n  })\n}\n","import { debounceTime, map, tap } from 'rxjs/operators'\n\nexport function bufferDebounceTime (time = 0) {\n  return source => {\n    let bufferedValues = []\n\n    return source.pipe(\n      tap(value => bufferedValues.push(value)),\n      debounceTime(time),\n      map(() => bufferedValues),\n      tap(() => { bufferedValues = [] }),\n    )\n  }\n}\n","import Vue from 'vue'\nimport { hasProp } from '../utils'\n\nexport const EVENT_BUS_PROP = '$vlEventBus'\n\nexport default {\n  beforeCreate () {\n    initEventBus()\n    // define local getter\n    Object.defineProperties(this, {\n      /**\n       * @type {Vue}\n       */\n      $eventBus: {\n        enumerable: true,\n        get: () => this[EVENT_BUS_PROP],\n      },\n    })\n  },\n}\n\nfunction initEventBus () {\n  if (\n    hasProp(Vue, EVENT_BUS_PROP) ||\n    hasProp(Vue.prototype, EVENT_BUS_PROP)\n  ) return\n\n  const bus = new Vue()\n\n  if (!hasProp(Vue, EVENT_BUS_PROP)) {\n    Object.defineProperties(Vue, {\n      [EVENT_BUS_PROP]: {\n        enumerable: true,\n        get: () => bus,\n      },\n    })\n  }\n\n  if (!hasProp(Vue.prototype, EVENT_BUS_PROP)) {\n    Object.defineProperties(Vue.prototype, {\n      [EVENT_BUS_PROP]: {\n        enumerable: true,\n        get: () => bus,\n      },\n    })\n  }\n}\n","import Vue from 'vue'\nimport { hasProp, identity, IdentityMap, keys, stubObject } from '../utils'\n\n// global prop\nexport const IDENTITY_MAP_PROP = '$vlIdentityMap'\nexport const INSTANCES_POOL = 'instances'\n\nexport default {\n  data () {\n    return {\n      idents: stubObject(),\n    }\n  },\n  beforeCreate () {\n    initIdentityMap()\n    // define local getter\n    Object.defineProperties(this, {\n      $identityMap: {\n        enumerable: true,\n        get: () => this[IDENTITY_MAP_PROP],\n      },\n    })\n  },\n  destroyed () {\n    this.unsetInstances()\n  },\n  methods: {\n    /**\n     * @param parts\n     * @return {string}\n     */\n    makeIdent (...parts) {\n      return parts.filter(identity).join('.')\n    },\n    /**\n     * Caches or reuse factory result in the identity map\n     * and returns result.\n     *\n     * @param {string|undefined} ident\n     * @param {function} factory\n     * @returns {*}\n     */\n    instanceFactoryCall (ident, factory) {\n      if (ident && this.hasInstance(ident)) {\n        return this.getInstance(ident)\n      }\n\n      const inst = factory()\n\n      if (ident) {\n        this.setInstance(ident, inst)\n      }\n\n      return inst\n    },\n    /**\n     * @param {string|undefined} ident\n     * @returns {*}\n     */\n    getInstance (ident) {\n      if (!ident || !this.hasInstance(ident)) return\n\n      this.idents[ident] = true\n\n      return this.$identityMap.get(ident, INSTANCES_POOL)\n    },\n    /**\n     * @param ident\n     * @param inst\n     */\n    setInstance (ident, inst) {\n      if (!ident) return\n\n      this.idents[ident] = true\n      this.$identityMap.set(ident, inst, INSTANCES_POOL)\n    },\n    /**\n     * @param {string|undefined} ident\n     * @returns {*}\n     */\n    hasInstance (ident) {\n      if (!ident) return\n\n      return this.$identityMap.has(ident, INSTANCES_POOL)\n    },\n    /**\n     * @param {string|undefined} ident\n     * @return {void}\n     */\n    unsetInstance (ident) {\n      if (!ident) return\n\n      delete this.idents[ident]\n      this.$identityMap.unset(ident, INSTANCES_POOL)\n    },\n    /**\n     * Unsets all self indets\n     * @return {void}\n     */\n    unsetInstances () {\n      keys(this.idents).forEach(::this.unsetInstance)\n    },\n    /**\n     * @param {string|undefined} fromIdent\n     * @param {string|undefined} toIdent\n     * @returns {boolean}\n     */\n    moveInstance (fromIdent, toIdent) {\n      return this.$identityMap.move(fromIdent, toIdent, INSTANCES_POOL)\n    },\n  },\n}\n\nfunction initIdentityMap () {\n  if (\n    hasProp(Vue, IDENTITY_MAP_PROP) ||\n    hasProp(Vue.prototype, IDENTITY_MAP_PROP)\n  ) return\n\n  const imap = new IdentityMap()\n\n  if (!hasProp(Vue, IDENTITY_MAP_PROP)) {\n    Object.defineProperties(Vue, {\n      [IDENTITY_MAP_PROP]: {\n        enumerable: true,\n        get: () => imap,\n      },\n    })\n  }\n\n  if (!hasProp(Vue.prototype, IDENTITY_MAP_PROP)) {\n    Object.defineProperties(Vue.prototype, {\n      [IDENTITY_MAP_PROP]: {\n        enumerable: true,\n        get: () => imap,\n      },\n    })\n  }\n}\n","import { retry } from 'rxjs/operators'\nimport { newLogger, noop } from '../utils'\n\n/**\n * RxJS subscriptions manager.\n */\nexport default {\n  beforeCreate () {\n    /**\n     * @type {Subscription[]}\n     * @private\n     */\n    this._rxSubs = []\n  },\n  destroyed () {\n    this.unsubscribeAll()\n  },\n  methods: {\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () { },\n    /**\n     * @return {void}\n     * @protected\n     */\n    unsubscribeAll () {\n      this._rxSubs.forEach(subs => subs.unsubscribe())\n      this._rxSubs = []\n    },\n    /**\n     * @param {Observable<T>} observable\n     * @param {function} [next] Next handler or Observer object.\n     * @param {function} [error] Error handler.\n     * @param {function} [complete] Complete handler.\n     * @return {Subscription}\n     * @protected\n     */\n    subscribeTo (observable, next = noop, error = noop, complete = noop) {\n      const errorWrap = err => {\n        if (process.env.NODE_ENV !== 'production') {\n          if (this.$logger) {\n            this.$logger.error(err.stack)\n          } else {\n            newLogger(this.vmName).error(err.stack)\n          }\n        }\n        error(err)\n      }\n\n      const subs = observable.pipe(\n        retry(3),\n      ).subscribe(next, errorWrap, complete)\n      this._rxSubs.push(subs)\n\n      return subs\n    },\n    unsubscribe (subs) {\n      const idx = this._rxSubs.indexOf(subs)\n      if (idx === -1) return\n\n      subs.unsubscribe()\n      this._rxSubs.splice(idx, 1)\n    },\n  },\n}\n","import { mergeDescriptors } from '../utils'\n\n// todo uncomment when IE 11 will die\n// const SERVICES_PROP = Symbol('services')\nexport const SERVICES_PROP = 'services'\n\n/**\n * Service container mixin\n */\nexport default {\n  inject: {\n    $services: SERVICES_PROP,\n    // todo works only in Vue 2.5.x\n    // $services: {from: SERVICES_PROP, default: Object.create(null)},\n  },\n  provide () {\n    return {\n      [SERVICES_PROP]: this.getServices(),\n    }\n  },\n  methods: {\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return mergeDescriptors({}, this.$services || {})\n    },\n  },\n  beforeCreate () {\n    let source = this.$parent\n    while (source) {\n      if (source._provided != null && source._provided[SERVICES_PROP] != null) {\n        break\n      }\n      source = source.$parent\n    }\n    if (source == null || source._provided[SERVICES_PROP] == null) {\n      delete this.$options.inject.$services\n    }\n  },\n}\n","import debounce from 'debounce-promise'\nimport { Object as OlObject, Observable } from 'ol'\nimport EventType from 'ol/events/EventType'\nimport ObjectEventType from 'ol/ObjectEventType'\nimport { interval, merge as mergeObs, of as obsOf, race as raceObs, throwError as throwErrorObs } from 'rxjs'\nimport {\n  delayWhen,\n  filter as filterObs,\n  first as firstObs,\n  map as mapObs,\n  mergeMap,\n  publishReplay,\n  refCount,\n} from 'rxjs/operators'\nimport { v4 as uuid } from 'uuid'\nimport VueQuery from 'vuequery'\nimport { fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent, fromVueEvent } from '../rx-ext'\nimport {\n  addPrefix,\n  assert,\n  coalesce,\n  identity,\n  isArray,\n  isEqual,\n  isFunction,\n  kebabCase,\n  makeWatchers,\n  newLogger,\n} from '../utils'\nimport eventBus from './event-bus'\nimport identMap from './ident-map'\nimport rxSubs from './rx-subs'\nimport services from './services'\n\nexport const VM_PROP = 'vm'\nexport const FRAME_TIME = 1000 / 60\n\nexport const OlObjectState = {\n  UNDEF: 'undef',\n  CREATING: 'creating',\n  CREATED: 'created',\n  MOUNTING: 'mounting',\n  MOUNTED: 'mounted',\n  UNMOUNTING: 'unmounting',\n  UNMOUNTED: 'unmounted',\n  DESTROYING: 'destroying',\n  DESTROYED: 'destroyed',\n}\n\nexport const OlObjectEvent = {\n  CREATED: OlObjectState.CREATED,\n  MOUNTED: OlObjectState.MOUNTED,\n  UNMOUNTED: OlObjectState.UNMOUNTED,\n  DESTROYED: OlObjectState.DESTROYED,\n  ERROR: 'error',\n}\n\nexport const OlObjectAction = {\n  CREATE: 'create',\n  MOUNT: 'mount',\n  UNMOUNT: 'unmount',\n  DESTROY: 'destroy',\n}\n\n/**\n * Basic ol component mixin.\n * todo try to subscribe to generic change event here and update rev according to internal ol counter\n */\nexport default {\n  mixins: [\n    identMap,\n    rxSubs,\n    services,\n    eventBus,\n  ],\n  props: {\n    /**\n     * @type {string|number}\n     */\n    id: {\n      type: [String, Number],\n      default: uuid,\n      validator: value => value != null && value !== '',\n    },\n    /**\n     * Unique key for saving to identity map\n     * @type {string|number|undefined}\n     */\n    ident: [String, Number],\n  },\n  data () {\n    return {\n      rev: 0,\n      currentId: this.id,\n    }\n  },\n  computed: {\n    /**\n     * @type {string}\n     */\n    vmClass () {\n      return kebabCase(this.$options.name)\n    },\n    /**\n     * @type {string}\n     */\n    vmId () {\n      return [this.vmClass, this.currentId].filter(identity).join('.')\n    },\n    /**\n     * @type {string}\n     */\n    vmName () {\n      return [this.$options.name, this.currentId].filter(identity).join('.')\n    },\n    /**\n     * @type {string|undefined}\n     */\n    olObjIdent () {\n      if (!this.ident) return\n\n      return this.makeIdent(this.ident)\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$olObject) return\n\n      if (this.currentId !== this.getIdInternal()) {\n        this.currentId = this.getIdInternal()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'id',\n      'currentId',\n      'olObjIdent',\n    ]),\n  },\n  async created () {\n    /**\n     * @type {{warn: (function(...[*]): void), log: (function(...[*]): void), error: (function(...[*]): void)}}\n     * @private\n     */\n    this._logger = newLogger(this.vmName)\n    /**\n     * @type {number}\n     * @private\n     */\n    this._olObjectState = OlObjectState.UNDEF\n    /**\n     * @type {module:ol/Object~BaseObject}\n     * @private\n     */\n    this._olObject = undefined\n    /**\n     * @type {Observable}\n     * @private\n     */\n    this._olObjectEvents = this::newOlObjectEventsObs()\n\n    this::defineDebounceMethods()\n    this::defineServices()\n\n    await this::execInit(false)\n  },\n  async mounted () {\n    await this::execMount()\n  },\n  async beforeDestroy () {\n    await this::execUnmount(true)\n  },\n  async destroyed () {\n    await this::execDeinit()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>} Resolves when initialization completes\n     * @protected\n     */\n    beforeInit () {},\n    /**\n     * @return {Promise<void>} Resolves when initialization completes\n     * @protected\n     */\n    async init () {\n      this._olObject = await this.instanceFactoryCall(this.olObjIdent, ::this.createOlObject)\n      this._olObject[VM_PROP] || (this._olObject[VM_PROP] = [])\n\n      // for loaded from IdentityMap\n      if (!this._olObject[VM_PROP].includes(this)) {\n        this._olObject[VM_PROP].push(this)\n      }\n\n      await this.changed()\n      this.subscribeAll()\n    },\n    /**\n     * @return {module:ol/Object~BaseObject|Promise<module:ol/Object~BaseObject>}\n     * @protected\n     * @abstract\n     */\n    createOlObject () {\n      throw new Error(`${this.vmName} not implemented method: createOlObject()`)\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async deinit () {\n      this.unsubscribeAll()\n      this.unsetInstances()\n\n      if (this._olObject) {\n        this._olObject[VM_PROP] = this._olObject[VM_PROP].filter(vm => vm !== this)\n        this._olObject = undefined\n      }\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    beforeMount () {},\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    mount () {},\n    /**\n     * @return {void|Promise<void>}\n     * @protected\n     */\n    unmount () {},\n    /**\n     * Refresh internal ol objects\n     * @return {Promise<void>}\n     */\n    async refresh () {\n      let olObj\n      try {\n        olObj = await this.resolveOlObject()\n        if (olObj instanceof Observable) {\n          return new Promise(resolve => {\n            olObj.once('change', () => resolve())\n            olObj.changed()\n          })\n        }\n      } catch (err) {\n        // todo check why this catch not catching OLObjectNotInitializedError from resolveOlObject\n      }\n\n      return this.changed()\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async scheduleRefresh () {\n      try {\n        await this.debounceRefresh()\n      } catch (err) {}\n    },\n    /**\n     * Internal usage only in components that doesn't support refreshing.\n     * @return {Promise<void>}\n     * @protected\n     */\n    async remount () {\n      if (this.$olObjectState === OlObjectState.MOUNTED) {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('remounting...')\n        }\n\n        await this::execUnmount()\n        await this::execMount()\n      } else {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('remount discarded')\n        }\n      }\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async scheduleRemount () {\n      if ([\n        OlObjectState.MOUNTING,\n        OlObjectState.MOUNTED,\n      ].includes(this.$olObjectState)) {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('remount scheduled')\n        }\n\n        await this.debounceRemount()\n      } else {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('remount discarded')\n        }\n      }\n    },\n    /**\n     * Only for internal purpose to support watching for properties\n     * for which OpenLayers doesn't provide setters.\n     * @return {Promise}\n     * @protected\n     */\n    async recreate () {\n      if ([\n        OlObjectState.CREATED,\n        OlObjectState.MOUNTING,\n        OlObjectState.MOUNTED,\n        OlObjectState.UNMOUNTING,\n        OlObjectState.UNMOUNTED,\n      ].includes(this.$olObjectState)) {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('recreating...')\n        }\n\n        const mounted = [\n          OlObjectState.MOUNTING,\n          OlObjectState.MOUNTED,\n        ].includes(this.$olObjectState)\n        if (mounted) {\n          await this::execUnmount()\n        }\n\n        await this::execDeinit()\n        await this::execInit()\n\n        if (mounted) {\n          await this::execMount()\n        }\n      } else {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('recreate discarded')\n        }\n      }\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async scheduleRecreate () {\n      if ([\n        OlObjectState.CREATING,\n        OlObjectState.CREATED,\n        OlObjectState.MOUNTING,\n        OlObjectState.MOUNTED,\n        OlObjectState.UNMOUNTING,\n        OlObjectState.UNMOUNTED,\n      ].includes(this.$olObjectState)) {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('recreate scheduled')\n        }\n\n        await this.debounceRecreate()\n      } else {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('recreate discarded')\n        }\n      }\n    },\n    /**\n     * Redefine for easy call in child components\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return this::services.methods.getServices()\n    },\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::subscribeToOlObjectEvents()\n    },\n    /**\n     * @returns {Promise<Object>}\n     * @throws {Error} If underlying OpenLayers object not initialized (incorrect initialization, already destroy).\n     */\n    async resolveOlObject () {\n      await this.$createPromise\n\n      return this.$olObject || throw new OLObjectNotInitializedError(`${this.vmName} OpenLayers object is undefined`)\n    },\n    /**\n     * @return {Promise}\n     */\n    async $nextTickPromise () {\n      return new Promise(::this.$nextTick)\n    },\n    /**\n     * @return {string|number}\n     */\n    getId () {\n      return coalesce(this.$olObject && this.getIdInternal(), this.currentId)\n    },\n    /**\n     * @return {*}\n     * @protected\n     */\n    getIdInternal () {\n      if (this.$olObject instanceof OlObject) {\n        return this.$olObject.get('id')\n      }\n\n      return this.$olObject.id\n    },\n    /**\n     * @param {string|number} id\n     */\n    setId (id) {\n      assert(id != null && id !== '', 'Invalid id')\n\n      if (this.currentId !== id) {\n        this.currentId = id\n      }\n      this.$olObject && this.setIdInternal(id)\n    },\n    /**\n     * @param {*} id\n     * @protected\n     */\n    setIdInternal (id) {\n      if (this.$olObject instanceof OlObject) {\n        if (this.$olObject.get('id') !== id) {\n          this.$olObject.set('id', id)\n        }\n\n        return\n      }\n\n      if (this.$olObject.id !== id) {\n        this.$olObject.id = id\n      }\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async changed () {\n      this.rev++\n      await this.$nextTickPromise()\n    },\n    /**\n     * @param {string|number} value\n     * @protected\n     */\n    idChanged (value) {\n      this.setId(value)\n    },\n    /**\n     * @param {string|number} value\n     * @protected\n     */\n    currentIdChanged (value) {\n      if (value === this.id) return\n\n      this.$emit('update:id', value)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    olObjIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.$olObject) {\n        this.setInstance(value, this.$olObject)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n    /**\n     * @protected\n     */\n    syncNonObservable () {\n      this.setId(this.getId())\n    },\n  },\n}\n\nfunction defineDebounceMethods () {\n  this.debounceRefresh = debounce(::this.refresh, FRAME_TIME)\n  this.debounceRemount = debounce(::this.remount, FRAME_TIME)\n  this.debounceRecreate = debounce(::this.recreate, FRAME_TIME)\n  this.debounceChanged = debounce(::this.changed, FRAME_TIME)\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $vq: {\n      enumerable: true,\n      get: () => VueQuery(this),\n    },\n    /**\n     * @type {{warn: (function(...[*]): void), log: (function(...[*]): void), error: (function(...[*]): void)}}\n     */\n    $logger: {\n      enumerable: true,\n      get: () => this._logger,\n    },\n    /**\n     * @type {string}\n     */\n    $olObjectState: {\n      enumerable: true,\n      get: () => this._olObjectState,\n    },\n    /**\n     * @type {module:ol/Object~BaseObject|undefined}\n     */\n    $olObject: {\n      enumerable: true,\n      get: () => this._olObject,\n    },\n    $olObjectEvents: {\n      enumerable: true,\n      get: () => this._olObjectEvents,\n    },\n    /**\n     * @type {Promise<void>}\n     */\n    $createPromise: {\n      enumerable: true,\n      get: () => this::newLifecyclePromise(\n        OlObjectAction.CREATE,\n        OlObjectEvent.CREATED,\n        {\n          [OlObjectState.CREATING]: [OlObjectAction.CREATE, OlObjectEvent.CREATED],\n        },\n      ),\n    },\n    /**\n     * @type {Promise<void>}\n     */\n    $mountPromise: {\n      enumerable: true,\n      get: () => this.$createPromise.then(() => this::newLifecyclePromise(\n        OlObjectAction.MOUNT,\n        OlObjectEvent.MOUNTED,\n        {\n          [OlObjectState.CREATING]: [OlObjectAction.CREATE, OlObjectEvent.CREATED],\n          [OlObjectState.MOUNTING]: [OlObjectAction.MOUNT, OlObjectEvent.MOUNTED],\n        },\n      )),\n    },\n    /**\n     * @type {Promise<void>}\n     */\n    $unmountPromise: {\n      enumerable: true,\n      get: () => this.$mountPromise.then(() => this::newLifecyclePromise(\n        OlObjectAction.UNMOUNT,\n        OlObjectEvent.UNMOUNTED,\n        {\n          [OlObjectState.CREATING]: [OlObjectAction.CREATE, OlObjectEvent.CREATED],\n          [OlObjectState.MOUNTING]: [OlObjectAction.MOUNT, OlObjectEvent.MOUNTED],\n          [OlObjectState.UNMOUNTING]: [OlObjectAction.UNMOUNT, OlObjectEvent.UNMOUNTED],\n        },\n      )),\n    },\n    /**\n     * @type {Promise<void>}\n     */\n    $destroyPromise: {\n      enumerable: true,\n      get: () => this.$unmountPromise.then(() => this::newLifecyclePromise(\n        OlObjectAction.DESTROY,\n        OlObjectEvent.DESTROYED,\n        {\n          [OlObjectState.CREATING]: [OlObjectAction.CREATE, OlObjectEvent.CREATED],\n          [OlObjectState.MOUNTING]: [OlObjectAction.MOUNT, OlObjectEvent.MOUNTED],\n          [OlObjectState.UNMOUNTING]: [OlObjectAction.UNMOUNT, OlObjectEvent.UNMOUNTED],\n          [OlObjectState.DESTROYING]: [OlObjectAction.DESTROY, OlObjectEvent.DESTROYED],\n        },\n      )),\n    },\n  })\n}\n\nfunction newOlObjectEventsObs () {\n  return mergeObs(\n    ...Object.values(OlObjectEvent)\n      .map(name => fromVueEvent(this.$eventBus, name, args => ({ name, args: isArray(args) ? args : [args] }))\n        .pipe(\n          filterObs(({ args }) => args[0] === this || args[1] === this),\n        )),\n  ).pipe(\n    publishReplay(),\n    refCount(),\n  )\n}\n\nfunction newLifecyclePromise (action, endEvent, startStates) {\n  const newFinishObs = (action, endEvent) => raceObs(\n    this.$olObjectEvents.pipe(filterObs(({ name }) => name === endEvent)),\n    this.$olObjectEvents.pipe(filterObs(({ name, args }) => {\n      return name === OlObjectEvent.ERROR &&\n        args[0] instanceof LifecycleError &&\n        args[0].action === action\n    })),\n  )\n\n  return mergeObs(\n    newFinishObs(action, endEvent),\n    this.$olObjectEvents.pipe(\n      filterObs(({ name, args }) => {\n        return name === OlObjectEvent.ERROR &&\n          args[0] instanceof CanceledError\n      }),\n    ),\n  ).pipe(\n    firstObs(),\n    mergeMap(evt => {\n      let obs = obsOf(evt)\n      // If at the time of CancelError the ol object stay in some intermediate state\n      // we need to delay observable emit until current hook complete\n      if (\n        evt.name === OlObjectEvent.ERROR &&\n        evt.args[0] instanceof CanceledError &&\n        startStates[this.$olObjectState] != null\n      ) {\n        obs = obs.pipe(delayWhen(() => newFinishObs(...startStates[this.$olObjectState])))\n      }\n      return obs\n    }),\n    mergeMap(evt => {\n      if (evt.name === OlObjectEvent.ERROR) {\n        return throwErrorObs(evt.args[0])\n      }\n      return obsOf(evt)\n    }),\n    mapObs(({ args }) => args.length === 1 ? args[0] : args),\n  ).toPromise()\n}\n\n/**\n * @param {boolean} [resetEventsObs=true]\n * @returns {Promise<void>}\n * @private\n */\nasync function execInit (resetEventsObs = true) {\n  const prevState = this._olObjectState\n\n  if (resetEventsObs) {\n    this._olObjectEvents = this::newOlObjectEventsObs()\n  }\n  this._olObjectEvents.subscribe()\n\n  try {\n    const canceled = await Promise.race([\n      Promise.resolve(this.beforeInit()).then(() => false),\n      this.$olObjectEvents.pipe(\n        filterObs(({ name, args }) => {\n          return name === OlObjectEvent.ERROR &&\n            args[0] instanceof CanceledError\n        }),\n        firstObs(),\n      ).toPromise()\n        .then(() => true),\n    ])\n    if (canceled) {\n      if (process.env.VUELAYERS_DEBUG) {\n        this.$logger.log(`ol object ${OlObjectAction.CREATE} canceled`)\n      }\n      return\n    }\n\n    this._olObjectState = OlObjectState.CREATING\n\n    await this.init()\n\n    this._olObjectState = OlObjectState.CREATED\n\n    if (process.env.VUELAYERS_DEBUG) {\n      this.$logger.log(`ol object ${OlObjectEvent.CREATED}`)\n    }\n\n    this.$emit(OlObjectEvent.CREATED, this)\n    this.$eventBus.$emit(OlObjectEvent.CREATED, this)\n  } catch (err) {\n    const lcErr = new LifecycleError(err, this.vmName, OlObjectAction.CREATE)\n    this._olObjectState = prevState\n\n    this.$emit(OlObjectEvent.ERROR, lcErr, this)\n    this.$eventBus.$emit(OlObjectEvent.ERROR, lcErr, this)\n\n    throw lcErr\n  }\n}\n\n/**\n * @return {Promise<void>}\n * @private\n */\nasync function execMount () {\n  const prevState = this._olObjectState\n\n  try {\n    await this.$createPromise\n\n    const canceled = await Promise.race([\n      Promise.resolve(this.beforeMount()).then(() => false),\n      this.$olObjectEvents.pipe(\n        filterObs(({ name, args }) => {\n          return name === OlObjectEvent.ERROR &&\n            args[0] instanceof CanceledError\n        }),\n        firstObs(),\n      ).toPromise()\n        .then(() => true),\n    ])\n    if (canceled) {\n      if (process.env.VUELAYERS_DEBUG) {\n        this.$logger.log(`ol object ${OlObjectAction.MOUNT} canceled`)\n      }\n      return\n    }\n\n    this._olObjectState = OlObjectState.MOUNTING\n\n    await this.mount()\n\n    this._olObjectState = OlObjectState.MOUNTED\n\n    if (process.env.VUELAYERS_DEBUG) {\n      this.$logger.log(`ol object ${OlObjectEvent.MOUNTED}`)\n    }\n\n    this.$emit(OlObjectEvent.MOUNTED, this)\n    this.$eventBus.$emit(OlObjectEvent.MOUNTED, this)\n  } catch (err) {\n    if (err instanceof CanceledError) {\n      if (process.env.VUELAYERS_DEBUG) {\n        this.$logger.log(`ol object ${OlObjectAction.MOUNT} canceled`)\n      }\n\n      return\n    }\n\n    const lcErr = new LifecycleError(err, this.vmName, OlObjectAction.MOUNT)\n    this._olObjectState = prevState\n\n    this.$emit(OlObjectEvent.ERROR, lcErr, this)\n    this.$eventBus.$emit(OlObjectEvent.ERROR, lcErr, this)\n\n    throw lcErr\n  }\n}\n\n/**\n * @param {boolean} [fireCancel=false]\n * @return {void|Promise<void>}\n * @private\n */\nasync function execUnmount (fireCancel = false) {\n  const prevState = this._olObjectState\n\n  if (fireCancel) {\n    if ([\n      OlObjectState.UNDEF,\n      OlObjectState.CREATING,\n      OlObjectState.CREATED,\n      OlObjectState.MOUNTING,\n    ].includes(this.$olObjectState)) {\n      const err = new CanceledError(`${this.vmName} ol object lifecycle canceled`)\n      this.$emit(OlObjectEvent.ERROR, err, this)\n      this.$eventBus.$emit(OlObjectEvent.ERROR, err, this)\n    }\n  }\n\n  try {\n    try {\n      await this.$mountPromise\n    } catch (err) {\n      if (err instanceof CanceledError) {\n        if (this.$olObjectState !== OlObjectState.MOUNTED) {\n          if (process.env.VUELAYERS_DEBUG) {\n            this.$logger.log(`ol object ${OlObjectAction.UNMOUNT} canceled`)\n          }\n\n          return\n        }\n      } else {\n        throw err\n      }\n    }\n\n    this._olObjectState = OlObjectState.UNMOUNTING\n\n    await this.unmount()\n\n    this._olObjectState = OlObjectState.UNMOUNTED\n\n    if (process.env.VUELAYERS_DEBUG) {\n      this.$logger.log(`ol object ${OlObjectEvent.UNMOUNTED}`)\n    }\n\n    this.$emit(OlObjectEvent.UNMOUNTED, this)\n    this.$eventBus.$emit(OlObjectEvent.UNMOUNTED, this)\n  } catch (err) {\n    const lcErr = new LifecycleError(err, this.vmName, OlObjectAction.UNMOUNT)\n    this._olObjectState = prevState\n\n    this.$emit(OlObjectEvent.ERROR, this, lcErr)\n    this.$eventBus.$emit(OlObjectEvent.ERROR, this, lcErr)\n\n    throw lcErr\n  }\n}\n\n/**\n * @returns {Promise<void>}\n * @private\n */\nasync function execDeinit () {\n  const prevState = this._olObjectState\n\n  try {\n    try {\n      await this.$unmountPromise\n    } catch (err) {\n      if (err instanceof CanceledError) {\n        if (this.$olObjectState !== OlObjectState.CREATED) {\n          if (process.env.VUELAYERS_DEBUG) {\n            this.$logger.log(`ol object ${OlObjectAction.DESTROY} canceled`)\n          }\n\n          return\n        }\n      } else {\n        throw err\n      }\n    }\n\n    this._olObjectState = OlObjectState.DESTROYING\n\n    await this.deinit()\n\n    this._olObjectState = OlObjectState.DESTROYED\n\n    if (process.env.VUELAYERS_DEBUG) {\n      this.$logger.log(`ol object ${OlObjectEvent.DESTROYED}`)\n    }\n\n    this.$emit(OlObjectEvent.DESTROYED, this)\n    this.$eventBus.$emit(OlObjectEvent.DESTROYED, this)\n  } catch (err) {\n    const lcErr = new LifecycleError(err, this.vmName, OlObjectAction.DESTROY)\n    this._olObjectState = prevState\n\n    this.$emit(OlObjectEvent.ERROR, this, lcErr)\n    this.$eventBus.$emit(OlObjectEvent.ERROR, this, lcErr)\n\n    throw lcErr\n  }\n}\n\nfunction subscribeToOlObjectEvents () {\n  if (this.$olObject instanceof Observable) {\n    const setterKey = addPrefix('set')\n    const propChanges = obsFromOlChangeEvent(this.$olObject, [\n      'id',\n    ], true, evt => ({\n      ...evt,\n      setter: this[setterKey(evt.prop)],\n    }))\n    this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n\n    this.subscribeTo(\n      mergeObs(\n        obsFromOlEvent(this.$olObject, EventType.CHANGE),\n        obsFromOlEvent(this.$olObject, ObjectEventType.PROPERTYCHANGE),\n      ),\n      ::this.debounceChanged,\n    )\n\n    this.subscribeTo(obsFromOlEvent(this.$olObject, EventType.ERROR), evt => this.$emit(OlObjectEvent.ERROR, evt))\n  } else {\n    this.subscribeTo(interval(FRAME_TIME), ::this.syncNonObservable)\n  }\n}\n\nexport class LifecycleError extends Error {\n  name = 'LifecycleError'\n\n  constructor (err, vmName, action) {\n    if (err instanceof LifecycleError) {\n      err = err.err\n    }\n    const baseMessage = `${vmName} ${action} ol object failed`\n    const message = `${baseMessage}: ${err.message}`\n    super(message)\n    this.vmName = vmName\n    this.action = action\n    this.err = err\n    if (err.stack) {\n      this.stack = `${baseMessage}: ${err.stack}`\n    } else {\n      if (isFunction(Error.captureStackTrace)) {\n        Error.captureStackTrace(this, this.constructor)\n      } else {\n        this.stack = (new Error(message)).stack\n      }\n    }\n  }\n}\n\nexport class CanceledError extends Error {\n  name = 'CanceledError'\n\n  constructor (message) {\n    super(message)\n    if (isFunction(Error.captureStackTrace)) {\n      Error.captureStackTrace(this, this.constructor)\n    } else {\n      this.stack = (new Error(message)).stack\n    }\n  }\n}\n\nexport function isCreateError (err) {\n  return err instanceof LifecycleError &&\n    err.action === OlObjectAction.CREATE\n}\n\nexport function isMountError (err) {\n  return err instanceof LifecycleError &&\n    err.action === OlObjectAction.MOUNT\n}\n\nexport function isUnmountError (err) {\n  return err instanceof LifecycleError &&\n    err.action === OlObjectAction.UNMOUNT\n}\n\nexport function isDestroyError (err) {\n  return err instanceof LifecycleError &&\n    err.action === OlObjectAction.DESTROY\n}\n\nexport class OLObjectNotInitializedError extends Error {\n  name = 'OLObjectNotInitializedError'\n\n  constructor (message) {\n    super(message)\n    if (isFunction(Error.captureStackTrace)) {\n      Error.captureStackTrace(this, this.constructor)\n    } else {\n      this.stack = (new Error(message)).stack\n    }\n  }\n}\n\nexport function makeChangeOrRecreateWatchers (props, deepProps = []) {\n  return makeWatchers(props, prop => ({\n    deep: deepProps.includes(prop),\n    handler (...args) {\n      const handler = this[`${prop}Changed`]\n      if (isFunction(handler)) {\n        return handler(...args)\n      }\n\n      if (isEqual(args[0], args[1])) return\n\n      if (process.env.VUELAYERS_DEBUG) {\n        this.$logger.log(`${prop} changed, scheduling recreate... %O ===> %O`, args[1], args[0])\n      }\n\n      return this.scheduleRecreate()\n    },\n  }))\n}\n","import { cleanSourceParams } from '../ol-ext'\nimport {\n  clonePlainObject,\n  coalesce,\n  hasProp,\n  isArray,\n  isEqual,\n  lowerFirst,\n  makeWatchers,\n  reduce,\n  upperFirst,\n  isObjectLike,\n} from '../utils'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\n\nconst serialize = value => {\n  if (value == null) return\n\n  return typeof value === 'object' ? JSON.stringify(value) : value\n}\nconst cleanArcGisSourceParams = params => cleanSourceParams(params, [\n  'FORMAT',\n  'F',\n  'LAYERS',\n  'LAYERDEFS',\n  'DYNAMICLAYERS',\n  'DPI',\n  'TRANSPARENT',\n  'TIME',\n  'LAYERTIMEOPTIONS',\n  'GDBVERSION',\n  'MAPSCALE',\n  'ROTATION',\n  'DATUMTRANSFORMATIONS',\n  'MAPRANGEVALUES',\n  'LAYERRANGEVALUES',\n  'LAYERPARAMETERVALUES',\n  'HISTORICMOMENT',\n])\n\n/**\n * Shared ArcGIS source params and methods.\n */\nexport default {\n  props: {\n    // ArcGIS params from https://developers.arcgis.com/rest/services-reference/export-map.htm\n    /**\n     * @type {boolean}\n     */\n    hidpi: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {string}\n     */\n    format: {\n      type: String,\n      default: 'PNG32',\n    },\n    /**\n     * @type {string|string[]|undefined}\n     */\n    layers: [String, Array],\n    /**\n     * @type {Object|string|undefined}\n     */\n    layerDefs: [Object, String],\n    /**\n     * @type {Object[]|string|undefined}\n     */\n    dynamicLayers: [Array, String],\n    /**\n     * @type {number|undefined}\n     */\n    dpi: Number,\n    /**\n     * @type {boolean}\n     */\n    transparent: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {string|string[]|undefined}\n     */\n    time: [String, Array],\n    /**\n     * @type {Object|string|undefined}\n     */\n    layerTimeOptions: [Object, String],\n    /**\n     * @type {string|undefined}\n     */\n    gdbVersion: String,\n    /**\n     * @type {string|undefined}\n     */\n    mapScale: String,\n    /**\n     * @type {number|undefined}\n     */\n    rotation: Number,\n    /**\n     * @type {Array|string|undefined}\n     */\n    datumTransformations: [Array, String],\n    /**\n     * @type {Array|string|undefined}\n     */\n    mapRangeValues: [Array, String],\n    /**\n     * @type {Array|string|undefined}\n     */\n    layerRangeValues: [Array, String],\n    /**\n     * @type {Array|string|undefined}\n     */\n    layerParameterValues: [Array, String],\n    /**\n     * @type {number|undefined}\n     */\n    historicMoment: Number,\n    /**\n     * Additional ArcGIS request parameters\n     * @params {Object|undefined}\n     */\n    params: Object,\n  },\n  data () {\n    return {\n      currentParams: undefined,\n    }\n  },\n  computed: {\n    /**\n     * @returns {string|undefined}\n     */\n    inputLayers () {\n      return isArray(this.layers) ? this.layers.join(',') : this.layers\n    },\n    /**\n     * @type {string|undefined}\n     */\n    inputTime () {\n      return isArray(this.time) ? this.time.join(',') : this.time\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputLayerDefs () {\n      return serialize(this.layerDefs)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputDynamicLayers () {\n      return serialize(this.dynamicLayers)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputLayerTimeOptions () {\n      return serialize(this.layerTimeOptions)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputDatumTransformations () {\n      return serialize(this.datumTransformations)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputMapRangeValues () {\n      return serialize(this.mapRangeValues)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputLayerRangeValues () {\n      return serialize(this.layerRangeValues)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputLayerParameterValues () {\n      return serialize(this.layerParameterValues)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputHistoricMoment () {\n      return serialize(this.historicMoment)\n    },\n    /**\n     * @returns {Object|null}\n     */\n    customParams () {\n      return this.params ? cleanArcGisSourceParams(this.params) : undefined\n    },\n    /**\n     * @returns {Object}\n     */\n    inputParams () {\n      return {\n        ...this.customParams || {},\n        LAYERS: this.inputLayers,\n        FORMAT: this.format,\n        LAYERDEFS: this.inputLayerDefs,\n        DYNAMICLAYERS: this.inputDynamicLayers,\n        DPI: this.dpi,\n        TRANSPARENT: this.transparent,\n        TIME: this.inputTime,\n        LAYERTIMEOPTIONS: this.inputLayerTimeOptions,\n        GDBVERSION: this.gdbVersion,\n        MAPSCALE: this.mapScale,\n        ROTATION: this.rotation,\n        DATUMTRANSFORMATIONS: this.inputDatumTransformations,\n        MAPRANGEVALUES: this.inputMapRangeValues,\n        LAYERRANGEVALUES: this.inputLayerRangeValues,\n        LAYERPARAMETERVALUES: this.inputLayerParameterValues,\n        HISTORICMOMENT: this.inputHistoricMoment,\n      }\n    },\n    .../*#__PURE__*/reduce([\n      'format',\n      'inputLayers',\n      'inputLayerDefs',\n      'inputDynamicLayers',\n      'dpi',\n      'transparent',\n      'inputTime',\n      'inputLayerTimeOptions',\n      'gdbVersion',\n      'mapScale',\n      'rotation',\n      'inputDatumTransformations',\n      'inputMapRangeValues',\n      'inputLayerRangeValues',\n      'inputLayerParameterValues',\n      'inputHistoricMoment',\n    ], (props, inProp) => {\n      const prop = inProp.slice(0, 5) === 'input' ? lowerFirst(inProp.slice(5)) : inProp\n      const curProp = 'current' + upperFirst(prop)\n      props[curProp] = function () {\n        return coalesce((this.currentParams || {})[prop.toUpperCase()], (this.inputParams || {})[prop.toUpperCase()])\n      }\n\n      return props\n    }, {}),\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (!isEqual(this.currentParams, this.$source.getParams())) {\n        this.currentParams = this.$source.getParams()\n      }\n    },\n    .../*#__PURE__*/makeWatchers([\n      'currentFormat',\n      'currentLayers',\n      'currentLayerDefs',\n      'currentDynamicLayers',\n      'currentDpi',\n      'currentTransparent',\n      'currentTime',\n      'currentLayerTimeOptions',\n      'currentGdbVersion',\n      'currentMapScale',\n      'currentRotation',\n      'currentDatumTransformations',\n      'currentMapRangeValues',\n      'currentLayerRangeValues',\n      'currentLayerParameterValues',\n      'currentHistoricMoment',\n    ], curProp => function (value) {\n      const prop = lowerFirst(curProp.slice(7))\n      const inProp = hasProp(this, 'input' + upperFirst(prop)) ? 'input' + upperFirst(prop) : prop\n\n      if (isEqual(value, this[inProp])) return\n\n      this.$emit('update:' + prop, isObjectLike(value) ? clonePlainObject(value) : value)\n    }),\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'hidpi',\n      'inputParams',\n      'currentParams',\n    ], [\n      'inputParams',\n      'currentParams',\n    ]),\n  },\n  created () {\n    this.currentParams = this.inputParams && clonePlainObject(this.inputParams)\n  },\n  methods: {\n    /**\n     * @returns {Object}\n     */\n    getParams () {\n      return coalesce(this.$source?.getParams(), this.currentParams)\n    },\n    /**\n     * @param {Object} params\n     */\n    updateParams (params) {\n      params = reduce({ ...this.currentParams, ...params }, (params, value, name) => ({\n        ...params,\n        [name.toUpperCase()]: value,\n      }), {})\n\n      if (!isEqual(params, this.currentParams)) {\n        this.currentParams = params\n      }\n      if (this.$source && !isEqual(params, this.$source.getParams())) {\n        this.$source.updateParams(params)\n      }\n    },\n    /**\n     * @param {string} param\n     * @param {*} value\n     */\n    updateParam (param, value) {\n      this.updateParams({ [param.toUpperCase()]: value })\n    },\n    /**\n     * @param {Object|undefined} value\n     * @protected\n     */\n    inputParamsChanged (value) {\n      this.updateParams(value)\n    },\n    /**\n     * @param {Object|undefined} value\n     * @protected\n     */\n    currentParamsChanged (value) {\n      value = value ? cleanArcGisSourceParams(value) : undefined\n      if (isEqual(value, this.customParams)) return\n\n      this.$emit('update:params', value && clonePlainObject(value))\n    },\n  },\n}\n","import {\n  COORD_PRECISION,\n  EPSG_3857,\n  readGeoJsonFeature,\n  readGeoJsonGeometry,\n  transformExtent,\n  transformLine,\n  transformMultiLine,\n  transformMultiPoint,\n  transformMultiPolygon,\n  transformPoint,\n  transformPolygon,\n  writeGeoJsonFeature,\n  writeGeoJsonGeometry,\n} from '../ol-ext'\nimport { coalesce } from '../utils'\n\n/**\n * Mixin with helpers for projection transforms between current view projection and global defined projection.\n */\nexport default {\n  computed: {\n    /**\n     * @return {module:ol/proj~ProjectionLike}\n     */\n    resolvedViewProjection () {\n      return coalesce(\n        this.viewProjection, // may or may not be present\n        EPSG_3857,\n      )\n    },\n    /**\n     * @return {module:ol/proj~ProjectionLike}\n     */\n    resolvedDataProjection () {\n      return coalesce(\n        this.dataProjection, // may or may not be present\n        this.$options?.dataProjection, // may or may not be present\n        this.resolvedViewProjection,\n      )\n    },\n  },\n  watch: {\n    resolvedViewProjection (...args) {\n      return this.resolvedViewProjectionChanged(...args)\n    },\n    resolvedDataProjection (...args) {\n      return this.resolvedDataProjectionChanged(...args)\n    },\n  },\n  methods: {\n    pointToViewProj (point, precision = COORD_PRECISION) {\n      return transformPoint(point, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    pointToDataProj (point, precision = COORD_PRECISION) {\n      return transformPoint(point, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    lineToViewProj (line, precision = COORD_PRECISION) {\n      return transformLine(line, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    lineToDataProj (line, precision = COORD_PRECISION) {\n      return transformLine(line, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    polygonToViewProj (polygon, precision = COORD_PRECISION) {\n      return transformPolygon(polygon, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    polygonToDataProj (polygon, precision = COORD_PRECISION) {\n      return transformPolygon(polygon, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    multiPointToViewProj (multiPoint, precision = COORD_PRECISION) {\n      return transformMultiPoint(multiPoint, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    multiPointToDataProj (multiPoint, precision = COORD_PRECISION) {\n      return transformMultiPoint(multiPoint, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    multiLineToViewProj (multiLine, precision = COORD_PRECISION) {\n      return transformMultiLine(multiLine, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    multiLineToDataProj (multiLine, precision = COORD_PRECISION) {\n      return transformMultiLine(multiLine, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    multiPolygonToViewProj (multiPolygon, precision = COORD_PRECISION) {\n      return transformMultiPolygon(multiPolygon, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    multiPolygonToDataProj (multiPolygon, precision = COORD_PRECISION) {\n      return transformMultiPolygon(multiPolygon, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n\n    extentToViewProj (extent, precision = COORD_PRECISION) {\n      return transformExtent(extent, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    extentToDataProj (extent, precision = COORD_PRECISION) {\n      return transformExtent(extent, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n\n    writeGeometryInDataProj (geometry, precision = COORD_PRECISION) {\n      return writeGeoJsonGeometry(geometry, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    writeGeometryInViewProj (geometry, precision = COORD_PRECISION) {\n      return writeGeoJsonGeometry(geometry, this.resolvedViewProjection, this.resolvedViewProjection, precision)\n    },\n    readGeometryInDataProj (geometry, precision = COORD_PRECISION) {\n      return readGeoJsonGeometry(geometry, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    readGeometryInViewProj (geometry, precision = COORD_PRECISION) {\n      return readGeoJsonGeometry(geometry, this.resolvedViewProjection, this.resolvedViewProjection, precision)\n    },\n\n    writeFeatureInDataProj (feature, precision = COORD_PRECISION) {\n      return writeGeoJsonFeature(feature, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    writeFeatureInViewProj (feature, precision = COORD_PRECISION) {\n      return writeGeoJsonFeature(feature, this.resolvedViewProjection, this.resolvedViewProjection, precision)\n    },\n    readFeatureInDataProj (feature, precision = COORD_PRECISION) {\n      return readGeoJsonFeature(feature, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    readFeatureInViewProj (feature, precision = COORD_PRECISION) {\n      return readGeoJsonFeature(feature, this.resolvedViewProjection, this.resolvedViewProjection, precision)\n    },\n    /**\n     * @param {string} value\n     * @param {string} prev\n     * @protected\n     */\n    resolvedViewProjectionChanged (value, prev) {\n      if (value === prev) return\n\n      this.$emit('update:viewProjection', value)\n    },\n    /**\n     * @param {string} value\n     * @param {string} prev\n     * @protected\n     */\n    resolvedDataProjectionChanged (value, prev) {\n      if (value === prev) return\n\n      this.$emit('update:dataProjection', value)\n    },\n  },\n}\n","import { extractChildren } from '../utils'\n\n/**\n * Renders stub VNode for component.\n */\nexport default {\n  /**\n   * @param {function} h\n   * @returns {VNode}\n   */\n  render (h) {\n    const options = this.$options?.stubVNode || {}\n    // render as HTML comment\n    if (options.empty) {\n      const vnode = h()\n      if (typeof options.empty === 'string') {\n        vnode.text = options.empty\n      } else if (typeof options.empty === 'function') {\n        vnode.text = this::options.empty()\n      }\n\n      return vnode\n    }\n\n    let children\n    if (options.slots === false) {\n      children = undefined\n    } else {\n      children = extractChildren(this.$slots, options.slots)\n    }\n\n    const attrs = typeof options.attrs === 'function'\n      ? this::options.attrs()\n      : options.attrs\n\n    const data = {\n      attrs,\n      style: {\n        display: 'none !important',\n      },\n    }\n\n    return h(options.tag || 'i', data, children)\n  },\n}\n","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import { race as raceObs } from 'rxjs'\nimport { filter as filterObs, mapTo } from 'rxjs/operators'\nimport { fromVueEvent as obsFromVueEvent, fromVueWatcher as obsFromVueWatcher } from '../rx-ext'\nimport { hasProp, stubTrue, waitFor } from '../utils'\nimport olCmp, { CanceledError, isCreateError, OlObjectEvent } from './ol-cmp'\n\nexport default {\n  methods: {\n    async beforeInit () {\n      try {\n        await waitFor(\n          () => this.$mapVm != null,\n          raceObs(\n            this.$olObjectEvents.pipe(\n              filterObs(({ name, args }) => {\n                return name === OlObjectEvent.ERROR &&\n                  args[0] instanceof CanceledError\n              }),\n            ),\n            obsFromVueEvent(this.$eventBus, OlObjectEvent.ERROR).pipe(\n              filterObs(([err, vm]) => {\n                return isCreateError(err) &&\n                  hasProp(vm, '$map') &&\n                  this.$vq.closest(vm)\n              }),\n            ),\n          ).pipe(\n            mapTo(stubTrue()),\n          ),\n        )\n        if (this.$mapVm.resolvedViewProjection !== this.viewProjection) {\n          this.viewProjection = this.$mapVm.resolvedViewProjection\n        }\n        if (this.$mapVm.resolvedDataProjection !== this.dataProjection) {\n          this.dataProjection = this.$mapVm.resolvedDataProjection\n        }\n        this.subscribeTo(\n          obsFromVueWatcher(this, () => this.$mapVm.resolvedViewProjection),\n          ({ value }) => {\n            if (value !== this.viewProjection) {\n              this.viewProjection = value\n            }\n          },\n        )\n        this.subscribeTo(\n          obsFromVueWatcher(this, () => this.$mapVm.resolvedDataProjection),\n          ({ value }) => {\n            if (value !== this.dataProjection) {\n              this.dataProjection = value\n            }\n          },\n        )\n        await this.$nextTickPromise()\n\n        return this::olCmp.methods.beforeInit()\n      } catch (err) {\n        err.message = `${this.vmName} wait for $mapVm injection: ${err.message}`\n        throw err\n      }\n    },\n  },\n}\n","import { get as getProj } from 'ol/proj'\nimport { EPSG_3857, getLayerId, initializeLayer, roundExtent, setLayerId, transformExtent } from '../ol-ext'\nimport { fromOlChangeEvent as obsFromOlChangeEvent } from '../rx-ext'\nimport { addPrefix, assert, coalesce, isArray, isEqual, isNumber, mergeDescriptors } from '../utils'\nimport olCmp, { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport projTransforms from './proj-transforms'\nimport stubVNode from './stub-vnode'\nimport waitForMap from './wait-for-map'\n\n/**\n * Base layer mixin.\n */\nexport default {\n  mixins: [\n    stubVNode,\n    projTransforms,\n    olCmp,\n    waitForMap,\n  ],\n  stubVNode: {\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  props: {\n    // ol/layer/Base\n    /**\n     * A CSS class name to set to the layer element.\n     * @type {string}\n     */\n    className: {\n      type: String,\n      default: 'ol-layer',\n    },\n    /**\n     * @type {number}\n     */\n    opacity: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * @type {boolean}\n     */\n    visible: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {number[]|undefined}\n     */\n    extent: {\n      type: Array,\n      validator: value => value.length === 4 && value.every(isNumber),\n    },\n    /**\n     * @type {string|undefined}\n     */\n    extentProjection: {\n      type: String,\n      validator: value => !!getProj(value),\n    },\n    /**\n     * @type {number|undefined}\n     */\n    zIndex: Number,\n    /**\n     * @type {number|undefined}\n     */\n    minResolution: Number,\n    /**\n     * @type {number|undefined}\n     */\n    maxResolution: Number,\n    /**\n     * @type {number|undefined}\n     */\n    minZoom: Number,\n    /**\n     * @type {number|undefined}\n     */\n    maxZoom: Number,\n  },\n  data () {\n    return {\n      viewProjection: EPSG_3857,\n      dataProjection: EPSG_3857,\n      currentExtentViewProj: roundExtent(this.extent),\n      currentMaxResolution: this.maxResolution,\n      currentMinResolution: this.minResolution,\n      currentMaxZoom: this.maxZoom,\n      currentMinZoom: this.minZoom,\n      currentOpacity: this.opacity,\n      currentVisible: this.visible,\n      currentZIndex: this.zIndex,\n    }\n  },\n  computed: {\n    resolvedExtentProjection () {\n      return coalesce(this.extentProjection, this.resolvedDataProjection)\n    },\n    extentDataProj () {\n      return roundExtent(this.extent)\n    },\n    extentViewProj () {\n      return transformExtent(this.extent, this.resolvedExtentProjection, this.resolvedViewProjection)\n    },\n    currentExtentDataProj () {\n      return transformExtent(this.currentExtentViewProj, this.resolvedViewProjection, this.resolvedExtentProjection)\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$layer) return\n\n      if (!isEqual(this.currentExtentViewProj, this.$layer.getExtent())) {\n        this.currentExtentViewProj = this.$layer.getExtent()\n      }\n      if (this.currentMaxResolution !== this.$layer.getMaxResolution()) {\n        this.currentMaxResolution = this.$layer.getMaxResolution()\n      }\n      if (this.currentMinResolution !== this.$layer.getMinResolution()) {\n        this.currentMinResolution = this.$layer.getMinResolution()\n      }\n      if (this.currentMaxZoom !== this.$layer.getMaxZoom()) {\n        this.currentMaxZoom = this.$layer.getMaxZoom()\n      }\n      if (this.currentMinZoom !== this.$layer.getMinZoom()) {\n        this.currentMinZoom = this.$layer.getMinZoom()\n      }\n      if (this.currentOpacity !== this.$layer.getOpacity()) {\n        this.currentOpacity = this.$layer.getOpacity()\n      }\n      if (this.currentVisible !== this.$layer.getVisible()) {\n        this.currentVisible = this.$layer.getVisible()\n      }\n      if (this.currentZIndex !== this.$layer.getZIndex()) {\n        this.currentZIndex = this.$layer.getZIndex()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'className',\n      'opacity',\n      'currentOpacity',\n      'visible',\n      'currentVisible',\n      'extentViewProj',\n      'currentExtentDataProj',\n      'zIndex',\n      'currentZIndex',\n      'minResolution',\n      'currentMinResolution',\n      'maxResolution',\n      'currentMaxResolution',\n      'minZoom',\n      'currentMinZoom',\n      'maxZoom',\n      'currentMaxZoom',\n    ], [\n      'extentViewProj',\n      'currentExtentDataProj',\n    ]),\n  },\n  created () {\n    this::defineServices()\n\n    this.currentExtentViewProj = this.extentViewProj?.slice()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      await Promise.all([\n        this::olCmp.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * @return {Promise<module:ol/layer/Base~BaseLayer>}\n     * @protected\n     */\n    async createOlObject () {\n      return initializeLayer(await this.createLayer(), this.currentId)\n    },\n    /**\n     * @return {module:ol/layer/Base~BaseLayer|Promise<module:ol/layer/Base~BaseLayer>}\n     * @protected\n     * @abstract\n     */\n    createLayer () {\n      throw new Error(`${this.vmName} not implemented method: createLayer`)\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$layersContainer?.addLayer(this)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      this.$layersContainer?.removeLayer(this)\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        {\n          get layerVm () { return vm },\n        },\n      )\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n      this::subscribeToLayerEvents()\n    },\n    /**\n     * @returns {string|number}\n     * @protected\n     */\n    getIdInternal () {\n      return getLayerId(this.$layer)\n    },\n    /**\n     * @param {string|number} id\n     * @protected\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setLayerId(this.$layer, id)\n    },\n    /**\n     * @return {Promise<module:ol/layer/Base~BaseLayer>}\n     */\n    resolveLayer: olCmp.methods.resolveOlObject,\n    /**\n     * @param {boolean} [viewProj=false]\n     * @returns {number[]|undefined}\n     */\n    getExtent (viewProj = false) {\n      if (!this.$layer) {\n        return viewProj ? this.currentExtentViewProj : this.currentExtentDataProj\n      }\n\n      const extent = this.$layer.getExtent()\n      if (viewProj) return roundExtent(extent)\n\n      return transformExtent(extent, this.resolvedViewProjection, this.resolvedExtentProjection)\n    },\n    /**\n     * @param {number[]} extent\n     * @param {boolean} [viewProj=false]\n     */\n    setExtent (extent, viewProj = false) {\n      assert(extent == null || (isArray(extent) && extent.length === 4), 'Invalid extent')\n      extent = viewProj\n        ? roundExtent(extent)\n        : transformExtent(extent, this.resolvedExtentProjection, this.resolvedViewProjection)\n\n      if (!isEqual(extent, this.currentExtentViewProj)) {\n        this.currentExtentViewProj = extent\n      }\n      if (this.$layer && !isEqual(extent, this.$layer.getExtent())) {\n        this.$layer.setExtent(extent)\n      }\n    },\n    /**\n     * @returns {number|undefined}\n     */\n    getMaxResolution () {\n      return coalesce(this.$layer?.getMaxResolution(), this.currentMaxResolution)\n    },\n    /**\n     * @param {number} resolution\n     */\n    setMaxResolution (resolution) {\n      resolution = Number(resolution)\n      assert(isNumber(resolution), 'Invalid max resolution')\n\n      if (resolution !== this.currentMaxResolution) {\n        this.currentMaxResolution = resolution\n      }\n      if (this.$layer && resolution !== this.$layer.getMaxResolution()) {\n        this.$layer.setMaxResolution(resolution)\n      }\n    },\n    /**\n     * @returns {number|undefined}\n     */\n    getMinResolution () {\n      return coalesce(this.$layer?.getMinResolution(), this.currentMinResolution)\n    },\n    /**\n     * @param {number} resolution\n     */\n    setMinResolution (resolution) {\n      resolution = Number(resolution)\n      assert(isNumber(resolution), 'Invalid min resolution')\n\n      if (resolution !== this.currentMinResolution) {\n        this.currentMinResolution = resolution\n      }\n      if (this.$layer && resolution !== this.$layer.getMinResolution()) {\n        this.$layer.getMinResolution(resolution)\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getMaxZoom () {\n      return coalesce(this.$layer?.getMaxZoom(), this.currentMaxZoom)\n    },\n    /**\n     * @param {number} zoom\n     */\n    setMaxZoom (zoom) {\n      zoom = Number(zoom)\n      assert(isNumber(zoom), 'Invalid max zoom')\n\n      if (zoom !== this.currentMaxZoom) {\n        this.currentMaxZoom = zoom\n      }\n      if (this.$layer && zoom !== this.$layer.getMaxZoom()) {\n        this.$layer.setMaxZoom(zoom)\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getMinZoom () {\n      return coalesce(this.$layer?.getMinZoom(), this.currentMinZoom)\n    },\n    /**\n     * @param {number} zoom\n     */\n    setMinZoom (zoom) {\n      zoom = Number(zoom)\n      assert(isNumber(zoom), 'Invalid min zoom')\n\n      if (zoom !== this.currentMinZoom) {\n        this.currentMinZoom = zoom\n      }\n      if (this.$layer && zoom !== this.$layer.getMinZoom()) {\n        this.$layer.setMinZoom(zoom)\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getOpacity () {\n      return coalesce(this.$layer?.getOpacity(), this.currentOpacity)\n    },\n    /**\n     * @param {number} opacity\n     */\n    setOpacity (opacity) {\n      opacity = Number(opacity)\n      assert(isNumber(opacity), 'Invalid opacity')\n\n      if (opacity !== this.currentOpacity) {\n        this.currentOpacity = opacity\n      }\n      if (this.$layer && opacity !== this.$layer.getOpacity()) {\n        this.$layer.setOpacity(opacity)\n      }\n    },\n    /**\n     * @returns {boolean}\n     */\n    getVisible () {\n      return coalesce(this.$layer?.getVisible(), this.currentVisible)\n    },\n    /**\n     * @param {boolean} visible\n     */\n    setVisible (visible) {\n      visible = !!visible\n\n      if (visible !== this.currentVisible) {\n        this.currentVisible = visible\n      }\n      if (this.$layer && visible !== this.$layer.getVisible()) {\n        this.$layer.setVisible(visible)\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getZIndex () {\n      return coalesce(this.$layer?.getZIndex(), this.currentZIndex)\n    },\n    /**\n     * @param {number} zIndex\n     */\n    setZIndex (zIndex) {\n      zIndex = Number(zIndex)\n      assert(isNumber(zIndex), 'Invalid zIndex')\n\n      if (zIndex !== this.currentZIndex) {\n        this.currentZIndex = zIndex\n      }\n      if (this.$layer && zIndex !== this.$layer.getZIndex()) {\n        this.$layer.setZIndex(zIndex)\n      }\n    },\n    /**\n     * @param {number[]} pixel\n     * @return {boolean}\n     */\n    async isAtPixel (pixel) {\n      const layer = await this.resolveLayer()\n\n      return this.$mapVm.forEachLayerAtPixel(pixel, mapLayer => mapLayer === layer)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    opacityChanged (value) {\n      this.setOpacity(value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    currentOpacityChanged (value) {\n      if (value === this.opacity) return\n\n      this.$emit('update:opacity', value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    visibleChanged (value) {\n      this.setVisible(value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    currentVisibleChanged (value) {\n      if (value === this.visible) return\n\n      this.$emit('update:visible', value)\n    },\n    /**\n     * @param {number[]|undefined} value\n     * @protected\n     */\n    extentViewProjChanged (value) {\n      this.setExtent(value, true)\n    },\n    /**\n     * @param {number[]|undefined} value\n     * @protected\n     */\n    currentExtentDataProjChanged (value) {\n      if (isEqual(value, this.extentDataProj)) return\n\n      this.$emit('update:extent', value.slice())\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    zIndexChanged (value) {\n      this.setZIndex(value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    currentZIndexChanged (value) {\n      if (value === this.zIndex) return\n\n      this.$emit('update:zIndex', value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    minResolutionChanged (value) {\n      this.setMinResolution(value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    currentMinResolutionChanged (value) {\n      if (value === this.minResolution) return\n\n      this.$emit('update:minResolution', value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    maxResolutionChanged (value) {\n      this.setMaxResolution(value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    currentMaxResolutionChanged (value) {\n      if (value === this.maxResolution) return\n\n      this.$emit('update:maxResolution', value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    minZoomChanged (value) {\n      this.setMinZoom(value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    currentMinZoomChanged (value) {\n      if (value === this.minZoom) return\n\n      this.$emit('update:minZoom', value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    maxZoomChanged (value) {\n      this.setMaxZoom(value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    currentMaxZoomChanged (value) {\n      if (value === this.maxZoom) return\n\n      this.$emit('update:maxZoom', value)\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {module:ol/layer/Base~BaseLayer|undefined}\n     */\n    $layer: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $viewVm: {\n      enumerable: true,\n      get: () => this.$services?.viewVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $layersContainer: {\n      enumerable: true,\n      get: () => this.$services?.layersContainer,\n    },\n  })\n}\n\nasync function subscribeToLayerEvents () {\n  const setterKey = addPrefix('set')\n  const propChanges = obsFromOlChangeEvent(this.$layer, [\n    'opacity',\n    'visible',\n    'zIndex',\n    'minResolution',\n    'maxResolution',\n    'minZoom',\n    'maxZoom',\n    'extent',\n  ], true, evt => ({\n    ...evt,\n    setter: val => {\n      const args = [val]\n      if (evt.prop === 'extent') {\n        args.push(true)\n      }\n      this[setterKey(evt.prop)](...args)\n    },\n  }))\n  this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n}\n","/**\n * @module ol/CollectionEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when an item is added to the collection.\n     * @event module:ol/Collection.CollectionEvent#add\n     * @api\n     */\n    ADD: 'add',\n    /**\n     * Triggered when an item is removed from the collection.\n     * @event module:ol/Collection.CollectionEvent#remove\n     * @api\n     */\n    REMOVE: 'remove',\n};\n//# sourceMappingURL=CollectionEventType.js.map","import { Collection } from 'ol'\nimport CollectionEventType from 'ol/CollectionEventType'\nimport { Control, defaults as createDefaultControls } from 'ol/control'\nimport { getUid } from 'ol/util'\nimport { merge as mergeObs } from 'rxjs'\nimport { map as mapObs, tap } from 'rxjs/operators'\nimport { getControlId, initializeControl } from '../ol-ext'\nimport { bufferDebounceTime, fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { find, forEach, instanceOf, isArray, isPlainObject } from '../utils'\nimport identMap from './ident-map'\nimport { FRAME_TIME, makeChangeOrRecreateWatchers } from './ol-cmp'\nimport rxSubs from './rx-subs'\n\n/**\n * @typedef {module:ol/control/Control~Control|Object} ControlLike\n */\n\n/**\n * Controls collection\n */\nexport default {\n  mixins: [\n    identMap,\n    rxSubs,\n  ],\n  computed: {\n    /**\n     * @type {string|undefined}\n     */\n    controlsCollectionIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'controls_collection')\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'controlsCollectionIdent',\n    ]),\n  },\n  created () {\n    /**\n     * @type {module:ol/Collection~Collection<module:ol/control/Control~Control>}\n     * @private\n     */\n    this._controlsCollection = this.instanceFactoryCall(this.controlsCollectionIdent, () => new Collection())\n    this._controlSubs = {}\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly controlsContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get controlsContainer () { return vm },\n      }\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::subscribeToCollectionEvents()\n    },\n    /**\n     * @param {ControlLike[]|module:ol/Collection~Collection<ControlLike>} defaultControls\n     */\n    initDefaultControls (defaultControls) {\n      this.getControls().forEach(control => {\n        if (control.get('vl_default')) {\n          this.removeControl(control)\n        }\n      })\n\n      let controls\n      if (isArray(defaultControls) || defaultControls instanceof Collection) {\n        controls = defaultControls\n      } else if (defaultControls !== false) {\n        controls = createDefaultControls(\n          isPlainObject(defaultControls)\n            ? defaultControls\n            : undefined,\n        )\n      }\n      if (controls) {\n        controls.forEach(control => control.set('vl_default', true))\n        this.addControls(controls)\n      }\n    },\n    /**\n     * @param {ControlLike} control\n     * @return {Control}\n     */\n    initializeControl (control) {\n      control = control?.$control || control\n      instanceOf(control, Control)\n\n      return initializeControl(control)\n    },\n    /**\n     * @param {ControlLike[]|module:ol/Collection~Collection<ControlLike>} controls\n     */\n    addControls (controls) {\n      forEach(controls, ::this.addControl)\n    },\n    /**\n     * @param {ControlLike} control\n     */\n    addControl (control) {\n      control = this.initializeControl(control)\n\n      if (this.getControlById(getControlId(control))) return\n\n      this.$controlsCollection.push(control)\n    },\n    /**\n     * @param {ControlLike[]|module:ol/Collection~Collection<ControlLike>} controls\n     */\n    removeControls (controls) {\n      forEach(controls, ::this.removeControl)\n    },\n    /**\n     * @param {ControlLike} control\n     */\n    removeControl (control) {\n      control = this.getControlById(getControlId(control?.$control || control))\n      if (!control) return\n\n      this.$controlsCollection.remove(control)\n    },\n    /**\n     * @return {void}\n     */\n    clearControls () {\n      this.$controlsCollection.clear()\n    },\n    /**\n     * @returns {Array<module:ol/control/Control~Control>}\n     */\n    getControls () {\n      return this.$controlsCollection.getArray().slice()\n    },\n    /**\n     * @returns {module:ol/Collection~Collection<module:ol/control/Control~Control>}\n     */\n    getControlsCollection () {\n      return this._controlsCollection\n    },\n    /**\n     * @param {string|number} controlId\n     * @returns {ControlLike}\n     */\n    getControlById (controlId) {\n      return find(this.getControls(), control => getControlId(control) === controlId)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    controlsCollectionIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.$controlsCollection) {\n        this.setInstance(value, this.$controlsCollection)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $controlsCollection: {\n      enumerable: true,\n      get: this.getControlsCollection,\n    },\n  })\n}\n\nfunction subscribeToCollectionEvents () {\n  const adds = obsFromOlEvent(this.$controlsCollection, CollectionEventType.ADD).pipe(\n    mapObs(evt => ({\n      ...evt,\n      element: this.initializeControl(evt.element),\n    })),\n    tap(({ element }) => {\n      const uid = getUid(element)\n      const propChanges = obsFromOlChangeEvent(element, 'id', true)\n      this._controlSubs[uid] = this.subscribeTo(propChanges, ::this.scheduleRefresh)\n    }),\n  )\n  const removes = obsFromOlEvent(this.$controlsCollection, CollectionEventType.REMOVE).pipe(\n    tap(({ element }) => {\n      const uid = getUid(element)\n      if (this._controlSubs[uid]) {\n        this.unsubscribe(this._controlSubs[uid])\n        delete this._controlSubs[uid]\n      }\n    }),\n  )\n  const events = mergeObs(adds, removes).pipe(\n    bufferDebounceTime(FRAME_TIME),\n  )\n  this.subscribeTo(events, async events => {\n    await this.debounceChanged()\n    forEach(events, ({ type, element }) => {\n      this.$emit(type + 'control', element)\n      // todo remove in v0.13.x\n      this.$emit(type + ':control', element)\n    })\n  })\n}\n","import { Geometry } from 'ol/geom'\nimport { isGeoJSONGeometry } from '../ol-ext'\nimport { assert, coalesce } from '../utils'\nimport projTransforms from './proj-transforms'\n\n/**\n * @typedef {Geometry|Object} GeometryLike\n */\n/**\n * @typedef {Object} GeometryTarget\n * @property {function(): Geometry|undefined} getGeometry\n * @property {function(Geometry|undefined): void} setGeometry\n */\n\n/**\n * Geometry container\n */\nexport default {\n  mixins: [\n    projTransforms,\n  ],\n  created () {\n    this._geometry = undefined\n    this._geometryVm = undefined\n\n    this::defineService()\n  },\n  methods: {\n    /**\n     * @returns {{readonly geometryContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get geometryContainer () { return vm },\n      }\n    },\n    /**\n     * @return {GeometryTarget|undefined}\n     * @protected\n     */\n    getGeometryTarget () {\n      throw new Error(`${this.vmName} not implemented method: getGeometryTarget()`)\n    },\n    /**\n     * @return {module:ol/geom/Geometry~Geometry|undefined}\n     */\n    getGeometry () {\n      return coalesce(this.getGeometryTarget()?.getGeometry(), this._geometry)\n    },\n    /**\n     * @return {Object}\n     */\n    getGeometryVm () {\n      return this._geometryVm\n    },\n    /**\n     * @param {GeometryLike|undefined} geom\n     * @param {boolean} [viewProj=false]\n     */\n    setGeometry (geom, viewProj = false) {\n      geom = geom?.$geometry || geom\n      if (isGeoJSONGeometry(geom)) {\n        if (viewProj) {\n          geom = this.readGeometryInViewProj(geom)\n        } else {\n          geom = this.readGeometryInDataProj(geom)\n        }\n      }\n      geom || (geom = undefined)\n      assert(!geom || geom instanceof Geometry, 'Invalid geometry')\n\n      const geomTarget = this.getGeometryTarget()\n      if (geomTarget && geom !== geomTarget.getGeometry()) {\n        geomTarget.setGeometry(geom)\n        this.scheduleRefresh()\n      }\n      if (geom !== this._geometry) {\n        this._geometry = geom\n        this._geometryVm = geom?.vm && geom.vm[0]\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineService () {\n  Object.defineProperties(this, {\n    $geometry: {\n      enumerable: true,\n      get: this.getGeometry,\n    },\n    $geometryVm: {\n      enumerable: true,\n      get: this.getGeometryVm,\n    },\n  })\n}\n","import { Style } from 'ol/style'\nimport { coalesce, hasProp, isArray, isEqual, isFunction } from '../utils'\n\n/**\n * @typedef {\n *            module:ol/style/Style~Style |\n *            Array<module:ol/style/Style~Style> |\n *            module:ol/style/Style~StyleFunction\n *          } OlStyleLike\n */\n/**\n * @typedef {Object} StyleTarget\n * @property {function(OlStyleLike|undefined): void} setStyle\n * @property {function(): OlStyleLike|undefined} getStyle\n */\n/**\n * @typedef {OlStyleLike|Object} StyleLike\n */\n\n/**\n * Style container mixin.\n */\nexport default {\n  created () {\n    this._style = undefined\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly styleContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get styleContainer () { return vm },\n      }\n    },\n    /**\n     * Default style factory\n     * @return {OlStyleLike|undefined}\n     * @protected\n     */\n    getDefaultStyle () {},\n    /**\n     * Returns OL object that can be styled (i.e. has setStyle/getStyle methods) or undefined\n     * @return {StyleTarget|undefined}\n     * @protected\n     * @abstract\n     */\n    getStyleTarget () {\n      throw new Error(`${this.vmName} not implemented method: getStyleTarget()`)\n    },\n    /**\n     * @return {StyleLike|undefined}\n     */\n    getStyle () {\n      return coalesce(this.getStyleTarget()?.getStyle(), this._style)\n    },\n    /**\n     * @param {StyleLike} style\n     */\n    addStyle (style) {\n      if (!style) return\n\n      const olStyle = style?.$style || style\n      let currentStyle = this._style\n\n      if (isFunction(olStyle)) {\n        if (currentStyle) {\n          if (process.env.NODE_ENV !== 'production') {\n            this.$logger.warn('Component already has style components among its descendants. ' +\n              'Avoid use of multiple vl-style-func or combining vl-style-func with vl-style-box on the same level.')\n          }\n        }\n\n        currentStyle = style\n      } else {\n        if (!isArray(currentStyle)) {\n          if (currentStyle) {\n            if (process.env.NODE_ENV !== 'production') {\n              this.$logger.warn('Component already has style components among its descendants. ' +\n                'Avoid use of multiple vl-style-func or combining vl-style-func with vl-style-box on the same level.')\n            }\n          }\n\n          currentStyle = []\n        }\n\n        if (!currentStyle.includes(olStyle)) {\n          currentStyle.push(olStyle)\n        }\n      }\n\n      this.setStyle(currentStyle)\n    },\n    /**\n     * @param {StyleLike|undefined} style\n     */\n    removeStyle (style) {\n      if (!style) return\n\n      style = style?.$style || style\n      let currentStyle = this._style\n\n      if (currentStyle === style) {\n        currentStyle = undefined\n      } else if (isArray(currentStyle)) {\n        currentStyle = currentStyle.filter(s => s !== style)\n\n        if (currentStyle.length === 0) {\n          currentStyle = undefined\n        }\n      }\n\n      this.setStyle(currentStyle)\n    },\n    /**\n     * @param {StyleLike|undefined} style\n     */\n    setStyle (style) {\n      style || (style = undefined)\n      if (style) {\n        if (hasProp(style, '$style') || hasProp(style, '$styleFunction')) {\n          style = style.$style || style.$styleFunction\n        } else if (isArray(style)) {\n          style = style.map(style => style?.$style || style)\n        }\n        if (isFunction(style)) {\n          style = this.createStyleFunc(style, this.getDefaultStyle())\n        } else {\n          isArray(style) || (style = [style])\n          style.length > 0 || (style = undefined)\n        }\n      }\n\n      const styleTarget = this.getStyleTarget()\n      if (styleTarget && !isEqual(style, styleTarget.getStyle())) {\n        styleTarget.setStyle(style)\n        this.scheduleRefresh()\n      }\n      if (!isEqual(style, this._style)) {\n        this._style = style\n        this.scheduleRefresh()\n      }\n    },\n    /**\n     * Style function factory\n     * @param {StyleLike|undefined} style\n     * @param {StyleLike|undefined} defaultStyle\n     * @returns {module:ol/style/Style~StyleFunction}\n     * @protected\n     */\n    createStyleFunc (style, defaultStyle) {\n      return function __styleFunc (feature, resolution) {\n        if (!feature.getGeometry()) return\n\n        let compiledStyle\n        if (style && isFunction(style)) {\n          // style - custom ol/style/Style~StyleFunction\n          compiledStyle = style(feature, resolution)\n        } else if (isArray(style)) {\n          // style - array of ol/style/Style objects\n          compiledStyle = style.slice()\n        }\n        // not empty or null style\n        if (\n          compiledStyle == null ||\n          (isArray(compiledStyle) && compiledStyle.length) ||\n          compiledStyle instanceof Style\n        ) {\n          return compiledStyle\n        }\n        // fallback to default style\n        if (defaultStyle) {\n          return isFunction(defaultStyle) ? defaultStyle(feature, resolution) : defaultStyle\n        }\n\n        return null\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $style: {\n      enumerable: true,\n      get: this.getStyle,\n    },\n  })\n}\n","import { Feature } from 'ol'\nimport ObjectEventType from 'ol/ObjectEventType'\nimport { race as raceObs } from 'rxjs'\nimport { distinctUntilChanged, filter as filterObs, mapTo } from 'rxjs/operators'\nimport {\n  dumpStyle,\n  EPSG_3857,\n  findPointOnSurface,\n  getFeatureId,\n  getFeatureProperties,\n  initializeFeature,\n  setFeatureId,\n  setFeatureProperties,\n} from '../ol-ext'\nimport { fromOlEvent as obsFromOlEvent, fromVueEvent as obsFromVueEvent } from '../rx-ext'\nimport {\n  assert,\n  clonePlainObject,\n  coalesce,\n  hasProp,\n  isArray,\n  isEmpty,\n  isEqual,\n  isFunction,\n  isObjectLike,\n  isString,\n  mergeDescriptors,\n  stubObject,\n  stubTrue,\n  waitFor,\n} from '../utils'\nimport geometryContainer from './geometry-container'\nimport olCmp, {\n  CanceledError,\n  isCreateError,\n  isMountError,\n  makeChangeOrRecreateWatchers,\n  OlObjectEvent,\n} from './ol-cmp'\nimport projTransforms from './proj-transforms'\nimport stubVNode from './stub-vnode'\nimport styleContainer from './style-container'\nimport waitForMap from './wait-for-map'\n\n/**\n * A vector object for geographic features with a geometry and other attribute properties,\n * similar to the features in vector file formats like **GeoJSON**.\n */\nexport default {\n  mixins: [\n    stubVNode,\n    projTransforms,\n    geometryContainer,\n    styleContainer,\n    olCmp,\n    waitForMap,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  props: {\n    properties: {\n      type: Object,\n      default: stubObject,\n    },\n  },\n  data () {\n    return {\n      viewProjection: EPSG_3857,\n      dataProjection: EPSG_3857,\n      currentProperties: clonePlainObject(this.properties),\n      currentGeometryName: 'geometry',\n    }\n  },\n  computed: {\n    geometryDataProj () {\n      if (!(this.rev && this.$geometry)) return\n\n      return this.writeGeometryInDataProj(this.$geometry)\n    },\n    geometryViewProj () {\n      if (!(this.rev && this.$geometry)) return\n\n      return this.writeGeometryInViewProj(this.$geometry)\n    },\n    pointDataProj () {\n      return this.pointToDataProj(this.pointViewProj)\n    },\n    pointViewProj () {\n      if (!(this.rev && this.$geometry)) return\n\n      return findPointOnSurface(this.$geometry)\n    },\n    style () {\n      if (!(this.rev && this.$style)) return\n\n      let style = this.$style\n      if (isFunction(style)) return style\n      if (!style) return\n\n      isArray(style) || (style = [style])\n\n      return style.map(style => dumpStyle(style, geom => this.writeGeometryInDataProj(geom)))\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$feature) return\n\n      if (!isEqual(this.currentProperties, getFeatureProperties(this.$feature))) {\n        this.currentProperties = getFeatureProperties(this.$feature)\n      }\n      if (this.currentGeometryName !== this.$feature.getGeometryName()) {\n        this.currentGeometryName = this.$feature.getGeometryName()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'properties',\n      'currentProperties',\n      'currentGeometryName',\n      'geometryDataProj',\n      'pointDataProj',\n      'style',\n    ], [\n      'properties',\n      'currentProperties',\n      'geometryDataProj',\n      'pointDataProj',\n      'style',\n    ]),\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      await Promise.all([\n        this::olCmp.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * Create feature without inner style applying, feature level style\n     * will be applied in the layer level style function.\n     * @return {module:ol/Feature~Feature}\n     * @protected\n     */\n    createOlObject () {\n      const feature = initializeFeature(this.createFeature(), this.currentId)\n      feature.setGeometryName(this.currentGeometryName)\n      feature.setGeometry(this.$geometry)\n      feature.setStyle(this.$style)\n\n      return feature\n    },\n    /**\n     * @returns {Feature}\n     */\n    createFeature () {\n      return new Feature(this.currentProperties)\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeMount () {\n      try {\n        await waitFor(\n          () => this.$geometryVm != null,\n          raceObs(\n            this.$olObjectEvents.pipe(\n              filterObs(({ name, args }) => {\n                return name === OlObjectEvent.ERROR &&\n                  args[0] instanceof CanceledError\n              }),\n            ),\n            obsFromVueEvent(this.$eventBus, ObjectEventType.ERROR).pipe(\n              filterObs(([err, vm]) => {\n                return (isCreateError(err) || isMountError(err)) &&\n                  hasProp(vm, '$geometry') &&\n                  vm.$vq?.closest(this)\n              }),\n            ),\n          ).pipe(\n            mapTo(stubTrue()),\n          ),\n        )\n\n        return this::olCmp.methods.beforeMount()\n      } catch (err) {\n        err.message = `${this.vmName} wait for $geometry failed: ${err.message}`\n        throw err\n      }\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$featuresContainer?.addFeature(this)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      this.$featuresContainer?.removeFeature(this)\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n      this::subscribeToEvents()\n    },\n    /**\n     * @return {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        this::geometryContainer.methods.getServices(),\n        this::styleContainer.methods.getServices(),\n        {\n          get featureVm () { return vm },\n        },\n      )\n    },\n    /**\n     * @return {string|number}\n     */\n    getIdInternal () {\n      return getFeatureId(this.$feature)\n    },\n    /**\n     * @param {string|number} id\n     * @return {void}\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setFeatureId(this.$feature, id)\n    },\n    /**\n     * @return {Promise<Feature>}\n     */\n    resolveFeature: olCmp.methods.resolveOlObject,\n    /**\n     * @return {Feature}\n     * @protected\n     */\n    getGeometryTarget () {\n      return this.$feature\n    },\n    /**\n     * @return {Feature}\n     * @protected\n     */\n    getStyleTarget () {\n      return this.$feature\n    },\n    /**\n     * @return {string}\n     */\n    getGeometryName () {\n      return coalesce(this.$feature?.getGeometryName(), this.currentGeometryName)\n    },\n    /**\n     * @param {string} geometryName\n     */\n    setGeometryName (geometryName) {\n      assert(isString(geometryName) && !isEmpty(geometryName), 'Invalid geometry name')\n\n      if (geometryName !== this.currentGeometryName) {\n        this.currentGeometryName = geometryName\n      }\n      if (this.$feature && geometryName !== this.$feature.getGeometryName()) {\n        this.$feature.setGeometryName(geometryName)\n      }\n    },\n    /**\n     * @return {Object}\n     */\n    getProperties () {\n      return coalesce(this.$feature && getFeatureProperties(this.$feature), this.currentProperties)\n    },\n    /**\n     * @param {Object} properties\n     */\n    setProperties (properties) {\n      properties = getFeatureProperties({ properties })\n\n      if (!isEqual(properties, this.currentProperties)) {\n        this.currentProperties = properties\n      }\n      if (this.$feature && !isEqual(properties, getFeatureProperties(this.$feature))) {\n        setFeatureProperties(this.$feature, properties)\n      }\n    },\n    /**\n     * Checks if feature lies at `pixel`.\n     * @param {number[]} pixel\n     * @return {Promise<boolean>}\n     */\n    async isAtPixel (pixel) {\n      const selfFeature = await this.resolveFeature()\n      let layerFilter\n      if (this.$layerVm) {\n        const selfLayer = await this.$layerVm.resolveLayer()\n        layerFilter = layer => layer === selfLayer\n      }\n\n      return this.$mapVm.forEachFeatureAtPixel(pixel, feature => feature === selfFeature, { layerFilter })\n    },\n    /**\n     * @param {Object|undefined} value\n     * @protected\n     */\n    propertiesChanged (value) {\n      this.setProperties(value)\n    },\n    /**\n     * @param {Object|undefined} value\n     * @protected\n     */\n    currentPropertiesChanged (value) {\n      if (isEqual(value, this.properties)) return\n\n      this.$emit('update:properties', value && clonePlainObject(value))\n    },\n    /**\n     * @param {string} value\n     * @param {string} prev\n     * @protected\n     */\n    currentGeometryNameChanged (value, prev) {\n      if (value === prev) return\n\n      this.$emit('update:geometryName', value)\n    },\n    /**\n     * @param {Object|undefined} value\n     * @param {Object|undefined} prev\n     * @protected\n     */\n    geometryDataProjChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:geometry', value && clonePlainObject(value))\n    },\n    /**\n     * @param {Object|undefined} value\n     * @param {Object|undefined} prev\n     * @protected\n     */\n    pointDataProjChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:point', value && clonePlainObject(value))\n    },\n    /**\n     * @param {Object|Function|Array|undefined} value\n     * @param {Object|Function|Array|undefined} prev\n     * @protected\n     */\n    styleChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:style', isObjectLike(value) ? clonePlainObject(value) : value)\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $feature: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    $layerVm: {\n      enumerable: true,\n      get: () => this.$services?.layerVm,\n    },\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n    $featuresContainer: {\n      enumerable: true,\n      get: () => this.$services?.featuresContainer,\n    },\n  })\n}\n\nasync function subscribeToEvents () {\n  const propChanges = obsFromOlEvent(\n    this.$feature,\n    ObjectEventType.PROPERTYCHANGE,\n    ({ key }) => {\n      switch (key) {\n        case this.$feature.getGeometryName():\n          return {\n            prop: 'geometry',\n            value: this.$feature.getGeometry(),\n            setter: geom => this.setGeometry(geom, true),\n          }\n        default:\n          return {\n            prop: 'properties',\n            value: getFeatureProperties(this.$feature),\n            setter: this.setProperties,\n          }\n      }\n    },\n  ).pipe(\n    distinctUntilChanged(isEqual),\n  )\n  this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n}\n","import {\n  CIRCLE_SERIALIZE_PROP,\n  getFeatureId,\n  getFeatureProperties,\n  initializeFeature,\n  setFeatureId,\n  setFeatureProperties,\n  STYLE_SERIALIZE_PROP,\n} from '../ol-ext'\nimport { get, isEqual, isFunction, isPlainObject } from '../utils'\n\nexport default {\n  methods: {\n    /**\n     * @param {FeatureLike} feature\n     * @param {boolean} [viewProj=false]\n     * @return {Feature}\n     * @protected\n     */\n    initializeFeature (feature, viewProj = false) {\n      feature = feature?.$feature || feature\n      if (isPlainObject(feature)) {\n        if (viewProj) {\n          feature = this.readFeatureInViewProj(feature)\n        } else {\n          feature = this.readFeatureInDataProj(feature)\n        }\n      }\n\n      return initializeFeature(feature)\n    },\n    /**\n     * @param {module:ol/Feature~Feature} feature\n     * @param {module:ol/Feature~Feature} newFeature\n     * @protected\n     */\n    updateFeature (feature, newFeature) {\n      if (this.$mapVm?.isInteracting()) return\n\n      const featureJson = this.writeFeatureInViewProj(feature)\n      const newFeatureJson = this.writeFeatureInViewProj(newFeature)\n\n      if (isEqual(featureJson, newFeatureJson)) return\n\n      if (getFeatureId(feature) !== getFeatureId(newFeature)) {\n        setFeatureId(feature, getFeatureId(newFeature))\n      }\n\n      const properties = getFeatureProperties(newFeature)\n      const currentProperties = getFeatureProperties(feature)\n      if (!isEqual(properties, currentProperties)) {\n        setFeatureProperties(feature, properties)\n      }\n\n      const geomJson = get(newFeatureJson, `properties.${CIRCLE_SERIALIZE_PROP}`) || newFeatureJson.geometry || null\n      const currentGeomJson = get(featureJson, `properties.${CIRCLE_SERIALIZE_PROP}`) || featureJson.geometry || null\n      if (!isEqual(geomJson, currentGeomJson)) {\n        feature.setGeometry(newFeature.getGeometry() || null)\n      }\n\n      const style = newFeature.getStyle()\n      const currentStyle = feature.getStyle()\n      if (isFunction(currentStyle) && isFunction(style)) {\n        if (currentStyle !== style) {\n          feature.setStyle(style)\n        }\n      } else if (isFunction(style)) {\n        feature.setStyle(style)\n      }\n\n      const styleJson = get(newFeatureJson, `properties.${STYLE_SERIALIZE_PROP}`) || null\n      const currentStyleJson = get(featureJson, `properties.${STYLE_SERIALIZE_PROP}`) || null\n      if (!isEqual(styleJson, currentStyleJson)) {\n        feature.setStyle(style)\n      }\n    },\n  },\n}\n","import { Collection } from 'ol'\nimport CollectionEventType from 'ol/CollectionEventType'\nimport EventType from 'ol/events/EventType'\nimport ObjectEventType from 'ol/ObjectEventType'\nimport { getUid } from 'ol/util'\nimport { merge as mergeObs } from 'rxjs'\nimport { distinctUntilChanged, map as mapObs, tap } from 'rxjs/operators'\nimport { COORD_PRECISION, getFeatureId, roundExtent, roundPointCoords, writeGeoJsonFeature } from '../ol-ext'\nimport { bufferDebounceTime, fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { find, forEach, identity, isEqual } from '../utils'\nimport featureHelper from './feature-helper'\nimport identMap from './ident-map'\nimport { FRAME_TIME, makeChangeOrRecreateWatchers } from './ol-cmp'\nimport projTransforms from './proj-transforms'\nimport rxSubs from './rx-subs'\n\n/**\n * @typedef {module:ol/Feature~Feature|Object} FeatureLike\n */\n\n/**\n * Features container\n */\nexport default {\n  mixins: [\n    identMap,\n    rxSubs,\n    projTransforms,\n    featureHelper,\n  ],\n  computed: {\n    /**\n     * @returns {string|undefined}\n     */\n    featuresCollectionIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'features_collection')\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'featuresCollectionIdent',\n    ]),\n  },\n  created () {\n    /**\n     * @type {module:ol/Collection~Collection<module:ol/Feature~Feature>}\n     * @private\n     */\n    this._featuresCollection = this.instanceFactoryCall(this.featuresCollectionIdent, () => new Collection())\n    this._featureSubs = {}\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly featuresContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get featuresContainer () { return vm },\n      }\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::subscribeToCollectionEvents()\n    },\n    /**\n     * @param {FeatureLike[]|module:ol/Collection~Collection<FeatureLike>} features\n     * @param {boolean} [viewProj=false]\n     */\n    addFeatures (features, viewProj = false) {\n      forEach(features, feature => this.addFeature(feature, viewProj))\n    },\n    /**\n     * @param {FeatureLike} feature\n     * @param {boolean} [viewProj=false]\n     */\n    addFeature (feature, viewProj = false) {\n      feature = this.initializeFeature(feature, viewProj)\n      // todo add hash {featureId => featureIdx, ....}\n      const foundFeature = this.getFeatureById(getFeatureId(feature))\n      if (foundFeature == null) {\n        this.$featuresCollection.push(feature)\n      } else {\n        this.updateFeature(foundFeature, feature)\n      }\n    },\n    /**\n     * @param {FeatureLike[]|module:ol/Collection~Collection<FeatureLike>} features\n     */\n    removeFeatures (features) {\n      forEach(features, ::this.removeFeature)\n    },\n    /**\n     * @param {FeatureLike} feature\n     */\n    removeFeature (feature) {\n      feature = this.getFeatureById(getFeatureId(feature?.$feature || feature))\n      if (!feature) return\n\n      this.$featuresCollection.remove(feature)\n    },\n    /**\n     * @return {void}\n     */\n    clearFeatures () {\n      this.$featuresCollection.clear()\n    },\n    /**\n     * @param {string|number} featureId\n     * @return {module:ol/Feature~Feature|undefined}\n     */\n    getFeatureById (featureId) {\n      // todo add hash {featureId => featureIdx, ....}\n      return find(this.getFeatures(), feature => getFeatureId(feature) === featureId)\n    },\n    /**\n     * @return {Array<module:ol/Feature~Feature>}\n     */\n    getFeatures () {\n      return this.$featuresCollection.getArray().slice()\n    },\n    /**\n     * @return {module:ol/Collection~Collection<module:ol/Feature~Feature>}\n     */\n    getFeaturesCollection () {\n      return this._featuresCollection\n    },\n    /**\n     * @param {function} callback\n     * @return {*}\n     */\n    forEachFeature (callback) {\n      let res\n      this.$featuresCollection.forEach((...args) => {\n        res = callback(...args)\n      })\n\n      return res\n    },\n    /**\n     * @param {number[]} extent\n     * @param {function} callback\n     * @param {boolean} [viewProj=false]\n     * @returns {*}\n     */\n    forEachFeatureInExtent (extent, callback, viewProj = false) {\n      extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n\n      return this.forEachFeature(feature => {\n        const geometry = feature.getGeometry()\n        if (geometry && geometry.intersectsExtent(extent)) {\n          const result = callback(feature)\n          if (result) {\n            return result\n          }\n        }\n      })\n    },\n    /**\n     * @param {number[]} extent\n     * @param {function} callback\n     * @param {boolean} [viewProj=false]\n     * @returns {*}\n     */\n    forEachFeatureIntersectingExtent (extent, callback, viewProj = false) {\n      return this.forEachFeatureInExtent(extent, callback, viewProj)\n    },\n    /**\n     * @param {number[]} coordinate\n     * @param {boolean} [viewProj=false]\n     * @returns {Array<module:ol/Feature~Feature>}\n     */\n    getFeaturesAtCoordinate (coordinate, viewProj = false) {\n      return this.getFeaturesInExtent([coordinate[0], coordinate[1], coordinate[0], coordinate[1]], viewProj)\n    },\n    /**\n     * @param {number[]} extent\n     * @param {boolean} [viewProj=false]\n     * @returns {Array<module:ol/Feature~Feature>}\n     */\n    getFeaturesInExtent (extent, viewProj = false) {\n      const features = []\n      this.forEachFeatureIntersectingExtent(extent, feature => {\n        features.push(feature)\n      }, viewProj)\n\n      return features\n    },\n    /**\n     * @param {number[]} coordinate\n     * @param {function} [filter]\n     * @param {boolean} [viewProj=false]\n     * @returns {module:ol/Feature~Feature}\n     */\n    getClosestFeatureToCoordinate (coordinate, filter = identity, viewProj = false) {\n      coordinate = viewProj ? roundPointCoords(coordinate) : this.pointToViewProj(coordinate)\n\n      let closestFeature\n      let minSquaredDistance = Infinity\n      this.forEachFeature(feature => {\n        if (!filter(feature)) return\n\n        const geometry = feature.getGeometry()\n        if (!geometry) return\n\n        const closestPoint = geometry.getClosestPoint(coordinate)\n        const prevSquaredDistance = minSquaredDistance\n        minSquaredDistance = Math.pow(closestPoint[0] - coordinate[0], 2) + Math.pow(closestPoint[1] - coordinate[1])\n        if (minSquaredDistance < prevSquaredDistance) {\n          closestFeature = feature\n        }\n      })\n\n      return closestFeature\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @returns {number[]}\n     */\n    getFeaturesExtent (viewProj = false) {\n      let extent\n      this.forEachFeature(feature => {\n        const geometry = feature.getGeometry()\n        if (!geometry) return\n\n        const geomExtent = geometry.getExtent()\n        if (!extent) {\n          extent = geomExtent\n        } else {\n          extent = [\n            geomExtent[0] < extent[0] ? geomExtent[0] : extent[0],\n            geomExtent[1] < extent[1] ? geomExtent[1] : extent[1],\n            geomExtent[2] > extent[2] ? geomExtent[2] : extent[2],\n            geomExtent[3] > extent[3] ? geomExtent[3] : extent[3],\n          ]\n        }\n      })\n\n      return viewProj ? extent : this.extentToDataProj(extent)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    featuresCollectionIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.$featuresCollection) {\n        this.setInstance(value, this.$featuresCollection)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $featuresCollection: {\n      enumerable: true,\n      get: this.getFeaturesCollection,\n    },\n  })\n}\n\nfunction subscribeToCollectionEvents () {\n  const adds = obsFromOlEvent(this.$featuresCollection, CollectionEventType.ADD).pipe(\n    mapObs(evt => ({\n      ...evt,\n      element: this.initializeFeature(evt.element),\n    })),\n    tap(({ element }) => {\n      const uid = getUid(element)\n      const propChanges = obsFromOlEvent(element, ObjectEventType.PROPERTYCHANGE)\n      const changes = obsFromOlEvent(element, EventType.CHANGE)\n      const events = mergeObs(propChanges, changes).pipe(\n        distinctUntilChanged(isEqual),\n      )\n      this._featureSubs[uid] = this.subscribeTo(events, ::this.debounceChanged)\n    }),\n  )\n  const removes = obsFromOlEvent(this.$featuresCollection, CollectionEventType.REMOVE).pipe(\n    tap(({ element }) => {\n      const uid = getUid(element)\n      if (this._featureSubs[uid]) {\n        this.unsubscribe(this._featureSubs[uid])\n        delete this._featureSubs[uid]\n      }\n    }),\n  )\n  const events = mergeObs(adds, removes).pipe(\n    mapObs(({ type, element }) => {\n      const viewProj = this.resolvedViewProjection\n      const dataProj = this.resolvedDataProjection\n      return {\n        type,\n        feature: element,\n        get json () {\n          if (!this._json) {\n            this._json = writeGeoJsonFeature(this.feature, viewProj, dataProj, COORD_PRECISION)\n          }\n          return this._json\n        },\n      }\n    }),\n    bufferDebounceTime(FRAME_TIME),\n  )\n  this.subscribeTo(events, async events => {\n    await this.debounceChanged()\n    forEach(events, evt => {\n      this.$emit(evt.type + 'feature', evt)\n      // todo remove in v0.13.x\n      this.$emit(evt.type + ':feature', evt.feature)\n    })\n  })\n}\n","import { Fill } from 'ol/style'\nimport { assert, coalesce } from '../utils'\n\n/**\n * @typedef {module:ol/style/Fill~Fill|Object|undefined} FillStyleLike\n */\n\n/**\n * @typedef {Object} FillStyleTarget\n * @property {function(): module:ol/style/Fill~Fill|undefined} getFill\n * @property {function(module:ol/style/Fill~Fill|undefined): void} setFill\n */\n\n/**\n * Fill style container.\n */\nexport default {\n  created () {\n    this._fill = undefined\n    this._fillVm = undefined\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly fillStyleContainer: Object}}\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get fillStyleContainer () { return vm },\n      }\n    },\n    /**\n     * @return {FillStyleTarget}\n     */\n    getFillStyleTarget () {\n      throw new Error(`${this.vmName} not implemented method: getFillStyleTarget()`)\n    },\n    /**\n     * @returns {module:ol/style/Fill~Fill|undefined}\n     */\n    getFill () {\n      return coalesce(this.getFillStyleTarget()?.getFill(), this._fill)\n    },\n    /**\n     * @return {Object}\n     */\n    getFillVm () {\n      return this._fillVm\n    },\n    /**\n     * @param {module:ol/style/Fill~Fill|undefined} fill\n     */\n    setFill (fill) {\n      fill = fill?.$style || fill\n      fill || (fill = undefined)\n      assert(!fill || fill instanceof Fill, 'Invalid fill style')\n\n      if (fill !== this._fill) {\n        this._fill = fill\n        this._fillVm = fill?.vm && fill.vm[0]\n        this.scheduleRefresh()\n      }\n\n      const fillTarget = this.getFillStyleTarget()\n      if (fillTarget && fill !== fillTarget.getFill()) {\n        fillTarget.setFill(fill)\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $fill: {\n      enumerable: true,\n      get: this.getFill,\n    },\n    $fillVm: {\n      enumerable: true,\n      get: this.getFillVm,\n    },\n  })\n}\n","import { EPSG_3857, getGeometryId, initializeGeometry, roundExtent, roundPointCoords, setGeometryId } from '../ol-ext'\nimport { coalesce, isEqual, mergeDescriptors } from '../utils'\nimport olCmp, { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport projTransforms from './proj-transforms'\nimport stubVNode from './stub-vnode'\nimport waitForMap from './wait-for-map'\n\n/**\n * Base geometry mixin.\n */\nexport default {\n  mixins: [\n    stubVNode,\n    projTransforms,\n    olCmp,\n    waitForMap,\n  ],\n  stubVNode: {\n    empty () {\n      return this.vmId\n    },\n  },\n  data () {\n    return {\n      viewProjection: EPSG_3857,\n      dataProjection: EPSG_3857,\n      extentViewProj: undefined,\n    }\n  },\n  computed: {\n    type () {\n      if (!(this.rev && this.$geometry)) return\n\n      return this.getType()\n    },\n    extentDataProj () {\n      return this.extentToDataProj(this.extentViewProj)\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$geometry) return\n\n      if (!isEqual(this.extentViewProj, this.$geometry.getExtent())) {\n        this.extentViewProj = this.$geometry.getExtent().slice()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'extentDataProj',\n    ], [\n      'extentDataProj',\n    ]),\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      await Promise.all([\n        this::olCmp.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * @return {Promise<module:ol/geom/Geometry~Geometry>}\n     * @protected\n     */\n    async createOlObject () {\n      return initializeGeometry(await this.createGeometry(), this.currentId)\n    },\n    /**\n     * @return {module:ol/geom/Geometry~Geometry|Promise<module:ol/geom/Geometry~Geometry>}\n     * @protected\n     * @abstract\n     */\n    createGeometry () {\n      throw new Error(`${this.vmName} not implemented method: createGeometry()`)\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$geometryContainer?.setGeometry(this)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      if (this.$geometryContainer?.getGeometryVm() === this) {\n        this.$geometryContainer.setGeometry(null)\n      }\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @return {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        {\n          get geometryVm () { return vm },\n        },\n      )\n    },\n    /**\n     * @returns {void}\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n      this::subscribeToGeometryEvents()\n    },\n    /**\n     * @returns {string|number}\n     */\n    getIdInternal () {\n      return getGeometryId(this.$geometry)\n    },\n    /**\n     * @param {string|number} id\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setGeometryId(this.$geometry, id)\n    },\n    /**\n     * @return {Promise<module:ol/geom/Geometry~Geometry>}\n     */\n    resolveGeometry: olCmp.methods.resolveOlObject,\n    /**\n     * @returns {string}\n     */\n    getType () {\n      return coalesce(this.$geometry?.getType(), this.type)\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @returns {number[]}\n     */\n    getExtent (viewProj = false) {\n      const extent = coalesce(this.$geometry?.getExtent(), this.extentViewProj)\n\n      return viewProj ? roundExtent(extent) : this.extentToDataProj(extent)\n    },\n    /**\n     * @param {number[]} point\n     * @param {boolean} [viewProj=false]\n     * @returns {Promise<number[]>}\n     */\n    async getClosestPoint (point, viewProj = false) {\n      point = viewProj ? roundPointCoords(point) : this.pointToViewProj(point)\n      const closestPoint = (await this.resolveGeometry()).getClosestPoint(point)\n\n      return viewProj ? roundPointCoords(closestPoint) : this.pointToDataProj(closestPoint)\n    },\n    /**\n     * @param {number[]} coordinate\n     * @param {boolean} [viewProj=false]\n     * @returns {Promise<boolean>}\n     */\n    async intersectsCoordinate (coordinate, viewProj = false) {\n      coordinate = viewProj ? roundPointCoords(coordinate) : this.pointToViewProj(coordinate)\n\n      return (await this.resolveGeometry()).intersectsCoordinate(coordinate)\n    },\n    /**\n     * @param {number[]} extent\n     * @param {boolean} [viewProj=false]\n     * @returns {Promise<boolean>}\n     */\n    async intersectsExtent (extent, viewProj = false) {\n      extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n\n      return (await this.resolveGeometry()).intersectsExtent(extent)\n    },\n    /**\n     * @param {number} angle Angle in radians\n     * @param {number[]} anchor\n     * @param {boolean} [viewProj=false]\n     * @returns {Promise<void>}\n     */\n    async rotate (angle, anchor, viewProj = false) {\n      anchor = viewProj ? roundPointCoords(anchor) : this.pointToViewProj(anchor);\n\n      (await this.resolveGeometry()).rotate(angle, anchor)\n    },\n    /**\n     * @param {number} sx\n     * @param {number} [sy]\n     * @param {number[]} [anchor]\n     * @param {boolean} [viewProj=false]\n     * @returns {Promise<void>}\n     */\n    async scale (sx, sy, anchor, viewProj = false) {\n      anchor = viewProj ? roundPointCoords(anchor) : this.pointToViewProj(anchor);\n      [sx] = viewProj ? roundPointCoords([sx, 0]) : this.pointToViewProj([sx, 0]);\n      [, sy] = viewProj ? roundPointCoords([0, sy]) : this.pointToViewProj([0, sy]);\n\n      (await this.resolveGeometry()).scale(sx, sy, anchor)\n    },\n    /**\n     * @param {number} tolerance\n     * @returns {Promise<module:ol/geom/Geometry~Geometry>}\n     */\n    async simplify (tolerance) {\n      return (await this.resolveGeometry()).simplify(tolerance)\n    },\n    /**\n     * @param dx\n     * @param dy\n     * @param {boolean} [viewProj=false]\n     * @returns {Promise<*>}\n     */\n    async translate (dx, dy, viewProj = false) {\n      [dx] = viewProj ? roundPointCoords([dx, 0]) : this.pointToViewProj([dx, 0]);\n      [, dy] = viewProj ? roundPointCoords([0, dy]) : this.pointToViewProj([0, dy])\n\n      return (await this.resolveGeometry()).translate(dx, dy)\n    },\n    /**\n     * @param {number[]} value\n     * @param {number[]} prev\n     * @protected\n     */\n    extentDataProjChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:extent', value?.slice())\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {module:ol/geom/Geometry~Geometry|undefined}\n     */\n    $geometry: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $viewVm: {\n      enumerable: true,\n      get: () => this.$services?.viewVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $geometryContainer: {\n      enumerable: true,\n      get: () => this.$services?.geometryContainer,\n    },\n  })\n}\n\nasync function subscribeToGeometryEvents () {\n}\n","/**\n * @module ol/render/EventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered before a layer is rendered.\n     * @event module:ol/render/Event~RenderEvent#prerender\n     * @api\n     */\n    PRERENDER: 'prerender',\n    /**\n     * Triggered after a layer is rendered.\n     * @event module:ol/render/Event~RenderEvent#postrender\n     * @api\n     */\n    POSTRENDER: 'postrender',\n    /**\n     * Triggered before layers are rendered.\n     * The event object will not have a `context` set.\n     * @event module:ol/render/Event~RenderEvent#precompose\n     * @api\n     */\n    PRECOMPOSE: 'precompose',\n    /**\n     * Triggered after all layers are rendered.\n     * The event object will not have a `context` set.\n     * @event module:ol/render/Event~RenderEvent#postcompose\n     * @api\n     */\n    POSTCOMPOSE: 'postcompose',\n    /**\n     * Triggered when rendering is complete, i.e. all sources and tiles have\n     * finished loading for the current viewport, and all tiles are faded in.\n     * The event object will not have a `context` set.\n     * @event module:ol/render/Event~RenderEvent#rendercomplete\n     * @api\n     */\n    RENDERCOMPLETE: 'rendercomplete',\n};\n//# sourceMappingURL=EventType.js.map","import { Source } from 'ol/source'\nimport { assert, coalesce } from '../utils'\n\n/**\n * @typedef {Source|Object} SourceLike\n */\n/**\n * @typedef {Object} SourceTarget\n * @property {function(): Source|undefined} getSource\n * @property {function(Source|undefined): void} setSource\n */\n\n/**\n * Source container mixin.\n */\nexport default {\n  created () {\n    /**\n     * @type {module:ol/source/Source~Source|undefined}\n     * @private\n     */\n    this._source = undefined\n    /**\n     * @type {Object|undefined}\n     * @private\n     */\n    this._sourceVm = undefined\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly sourceContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get sourceContainer () { return vm },\n      }\n    },\n    /**\n     * @return {SourceTarget|undefined}\n     * @protected\n     */\n    getSourceTarget () {\n      throw new Error(`${this.vmName} not implemented method: getSourceTarget()`)\n    },\n    /**\n     * @return {module:ol/source/Source~Source|undefined}\n     */\n    getSource () {\n      return coalesce(this.getSourceTarget()?.getSource(), this._source)\n    },\n    /**\n     * @return {Object}\n     */\n    getSourceVm () {\n      return this._sourceVm\n    },\n    /**\n     * @param {SourceLike|undefined} source\n     */\n    setSource (source) {\n      source = source?.$source || source\n      source || (source = undefined)\n      assert(!source || source instanceof Source, 'Invalid source')\n\n      const sourceTarget = this.getSourceTarget()\n      if (sourceTarget && source !== sourceTarget.getSource()) {\n        sourceTarget.setSource(source)\n        this.scheduleRefresh()\n      }\n      if (source !== this._source) {\n        this._source = source\n        this._sourceVm = source?.vm && source.vm[0]\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $source: {\n      enumerable: true,\n      get: this.getSource,\n    },\n    $sourceVm: {\n      enumerable: true,\n      get: this.getSourceVm,\n    },\n  })\n}\n","import RenderEventType from 'ol/render/EventType'\nimport { map as mapObs, tap } from 'rxjs/operators'\nimport { getSourceId } from '../ol-ext'\nimport { fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { addPrefix, mergeDescriptors } from '../utils'\nimport baseLayer from './base-layer'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport sourceContainer from './source-container'\n\n/**\n * Base simple layer mixin.\n */\nexport default {\n  mixins: [\n    sourceContainer,\n    baseLayer,\n  ],\n  props: {\n    // ol/layer/Layer\n    /**\n     * @type {function|undefined}\n     */\n    render: Function,\n    // custom\n    /**\n     * @type {boolean}\n     */\n    overlay: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  computed: {\n    source () {\n      if (!(this.rev && this.$source)) return\n\n      return {\n        id: getSourceId(this.$source),\n        type: this.$source.constructor.name,\n      }\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'source',\n      'render',\n      'overlay',\n    ], [\n      'source',\n    ]),\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      if (this.overlay && this.$mapVm) {\n        this.setMap(this.$mapVm)\n        return\n      }\n\n      return this::baseLayer.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      if (this.overlay) {\n        this.setMap(null)\n        return\n      }\n\n      return this::baseLayer.methods.unmount()\n    },\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return mergeDescriptors(\n        this::baseLayer.methods.getServices(),\n        this::sourceContainer.methods.getServices(),\n      )\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::baseLayer.methods.subscribeAll()\n      this::subscribeToLayerEvents()\n    },\n    /**\n     * @return {module:ol/layer/Base~BaseLayer}\n     * @protected\n     */\n    getSourceTarget () {\n      return this.$layer\n    },\n    /**\n     * @returns {module:ol/renderer/Layer~LayerRenderer}\n     */\n    getRenderer () {\n      return this.$layer?.getRenderer()\n    },\n    /**\n     * @param {module:ol/Map~Map|Object|undefined} map\n     */\n    setMap (map) {\n      map = map?.$map || map\n\n      this.$layer?.setMap(map)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prev\n     * @protected\n     */\n    sourceChanged (value, prev) {\n      if (value === prev) return\n\n      this.$emit('update:source', value)\n    },\n  },\n}\n\nasync function subscribeToLayerEvents () {\n  const setterKey = addPrefix('set')\n  const sourceChanges = obsFromOlChangeEvent(this.$layer, 'source', true).pipe(\n    tap(({ value: source }) => {\n      if (this._sourceSubs) {\n        this.unsubscribe(this._sourceSubs)\n      }\n      if (source) {\n        this._sourceSubs = this.subscribeTo(\n          obsFromOlChangeEvent(source, 'id', true),\n          ::this.scheduleRefresh,\n        )\n      }\n    }),\n    mapObs(evt => ({\n      ...evt,\n      setter: this[setterKey(evt.prop)],\n    })),\n  )\n  this.subscribeTo(sourceChanges, ({ setter, value }) => setter(value))\n\n  const renderEvents = obsFromOlEvent(this.$layer, [\n    RenderEventType.PRERENDER,\n    RenderEventType.POSTRENDER,\n  ])\n  this.subscribeTo(renderEvents, evt => this.$emit(evt.type, evt))\n}\n","import layer from './layer'\n\nexport default {\n  mixins: [\n    layer,\n  ],\n}\n","/**\n * @module ol/source/State\n */\n/**\n * @enum {string}\n * State of the source, one of 'undefined', 'loading', 'ready' or 'error'.\n */\nexport default {\n    UNDEFINED: 'undefined',\n    LOADING: 'loading',\n    READY: 'ready',\n    ERROR: 'error',\n};\n//# sourceMappingURL=State.js.map","import { get as getProj } from 'ol/proj'\nimport SourceState from 'ol/source/State'\nimport { EPSG_3857, getSourceId, initializeSource, setSourceId } from '../ol-ext'\nimport { assert, coalesce, isArray, isEqual, isFunction, isString, mergeDescriptors, or } from '../utils'\nimport olCmp, { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport projTransforms from './proj-transforms'\nimport stubVNode from './stub-vnode'\nimport waitForMap from './wait-for-map'\n\nconst validateAttributions = /*#__PURE__*/or(isString, isFunction, value => isArray(value) && value.every(isString))\n\n/**\n * Base source mixin.\n */\nexport default {\n  mixins: [\n    stubVNode,\n    projTransforms,\n    olCmp,\n    waitForMap,\n  ],\n  stubVNode: {\n    empty () {\n      return this.vmId\n    },\n  },\n  props: {\n    // ol/source/Source\n    /**\n     * @type {string|string[]|undefined}\n     */\n    attributions: {\n      type: [String, Array, Function],\n      validator: validateAttributions,\n    },\n    /**\n     * @type {boolean}\n     */\n    attributionsCollapsible: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {string|undefined}\n     */\n    projection: {\n      type: String,\n      validator: value => !!getProj(value),\n    },\n    /**\n     * @type {boolean}\n     */\n    wrapX: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {string|undefined}\n     */\n    state: {\n      type: String,\n      default: SourceState.READY,\n      validator: value => Object.values(SourceState).includes(value),\n    },\n  },\n  data () {\n    return {\n      viewProjection: EPSG_3857,\n      dataProjection: EPSG_3857,\n      currentAttributions: adaptAttributions(this.attributions),\n      currentState: this.state,\n    }\n  },\n  computed: {\n    inputAttributions () {\n      return adaptAttributions(this.attributions)\n    },\n    currentResolutions () {\n      return this.rev ? this.getResolutions() : []\n    },\n    resolvedDataProjection () {\n      return coalesce(\n        this.projection,\n        this.dataProjection, // may or may not be present\n        this.$options?.dataProjection, // may or may not be present\n        this.resolvedViewProjection,\n      )\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (this.currentAttributions !== this.$source.getAttributions()) {\n        this.currentAttributions = this.$source.getAttributions()\n      }\n      if (this.currentState !== this.$source.getState()) {\n        this.currentState = this.$source.getState()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'inputAttributions',\n      'currentAttributions',\n      'state',\n      'currentState',\n      'attributionsCollapsible',\n      'projection',\n      'wrapX',\n      'currentResolutions',\n    ], [\n      'inputAttributions',\n      'currentAttributions',\n      'currentResolutions',\n    ]),\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      await Promise.all([\n        this::olCmp.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * @return {Promise<module:ol/source/Source~Source>}\n     * @protected\n     */\n    async createOlObject () {\n      return initializeSource(await this.createSource(), this.currentId)\n    },\n    /**\n     * @return {module:ol/source/Source~Source|Promise<module:ol/source/Source~Source>}\n     * @protected\n     * @abstract\n     */\n    createSource () {\n      throw new Error(`${this.vmName} not implemented method: createSource()`)\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$sourceContainer?.setSource(this)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      if (this.$sourceContainer?.getSourceVm() === this) {\n        this.$sourceContainer.setSource(null)\n      }\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @returns {Promise<void>}\n     */\n    async refresh () {\n      const source = await this.resolveSource()\n\n      return new Promise(resolve => {\n        source.once('change', () => resolve())\n        source.refresh()\n      })\n    },\n    /**\n     * @return {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        {\n          get sourceVm () { return vm },\n        },\n      )\n    },\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n      this::subscribeToSourceEvents()\n    },\n    /**\n     * @returns {string|number}\n     * @protected\n     */\n    getIdInternal () {\n      return getSourceId(this.$source)\n    },\n    /**\n     * @param {string|number} id\n     * @protected\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setSourceId(this.$source, id)\n    },\n    /**\n     * @return {Promise<module:ol/source/Source~Source>}\n     */\n    resolveSource: olCmp.methods.resolveOlObject,\n    /**\n     * @returns {string|string[]|undefined}\n     */\n    getAttributions () {\n      return coalesce(this.$source?.getAttributions(), this.currentAttributions)\n    },\n    /**\n     * @param {string} attributions\n     */\n    setAttributions (attributions) {\n      assert(!attributions || validateAttributions(attributions), 'Invalid attributions')\n      attributions = adaptAttributions(attributions)\n\n      if (!isEqual(attributions, this.currentAttributions)) {\n        this.currentAttributions = attributions\n      }\n      if (this.$source && !isEqual(attributions, this.$source.getAttributions())) {\n        this.$source.setAttributions(attributions)\n      }\n    },\n    /**\n     * @returns {boolean}\n     */\n    getAttributionsCollapsible () {\n      return coalesce(this.$source?.getAttributionsCollapsible(), this.attributionsCollapsible)\n    },\n    /**\n     * @returns {module:ol/proj/Projection~Projection}\n     */\n    getProjection () {\n      return coalesce(this.$source?.getProjection(), getProj(this.resolvedDataProjection))\n    },\n    /**\n     * @returns {string}\n     */\n    getState () {\n      return coalesce(this.$source?.getState(), this.currentState)\n    },\n    /**\n     * @returns {boolean}\n     */\n    getWrapX () {\n      return coalesce(this.$source?.getWrapX(), this.wrapX)\n    },\n    /**\n     * @returns {number[]}\n     */\n    getResolutions () {\n      try {\n        // can be not implemented in source class\n        return coalesce(this.$source?.getResolutions(), [])\n      } catch (err) {\n        return []\n      }\n    },\n    /**\n     * @param {string|string[]|Function|undefined} value\n     * @protected\n     */\n    inputAttributionsChanged (value) {\n      this.setAttributions(value)\n    },\n    /**\n     * @param {string|string[]|Function|undefined} value\n     * @protected\n     */\n    currentAttributionsChanged (value) {\n      if (isEqual(value, this.inputAttributions)) return\n\n      this.$emit('update:attributions', value)\n    },\n    /**\n     * @param {string} value\n     * @protected\n     */\n    stateChanged (value) {\n      if (value === this.currentState) return\n\n      if (process.env.VUELAYERS_DEBUG) {\n        this.$logger.log('state changed, scheduling recreate... %O ===> %O',\n          this.currentState, value)\n      }\n\n      this.currentState = value\n\n      return this.scheduleRecreate()\n    },\n    /**\n     * @param {string} value\n     * @protected\n     */\n    currentStateChanged (value) {\n      if (value === this.state) return\n\n      this.$emit('update:state', value)\n    },\n    /**\n     * @param {number[]} value\n     * @param {number[]} prev\n     * @protected\n     */\n    currentResolutionsChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:resolutions', value?.slice())\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {module:ol/source/Source~Source|undefined}\n     */\n    $source: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $viewVm: {\n      enumerable: true,\n      get: () => this.$services?.viewVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $sourceContainer: {\n      enumerable: true,\n      get: () => this.$services?.sourceContainer,\n    },\n  })\n}\n\nfunction subscribeToSourceEvents () {\n}\n\nfunction adaptAttributions (attributions) {\n  if (!attributions) return\n  if (isFunction(attributions)) return attributions\n\n  return () => isArray(attributions) ? attributions : [attributions]\n}\n","import { EPSG_3857 } from '../ol-ext'\nimport { fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { noop } from '../utils'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport source from './source'\n\nconst ImageSourceEventType = {\n  IMAGELOADSTART: 'imageloadstart',\n  IMAGELOADEND: 'imageloadend',\n  IMAGELOADERROR: 'imageloaderror',\n}\n\n/**\n * Base image source mixin.\n */\nexport default {\n  mixins: [\n    source,\n  ],\n  props: {\n    // ol/source/Image\n    /**\n     * @type {string}\n     */\n    projection: {\n      ...source.props.projection,\n      default: EPSG_3857,\n    },\n    /**\n     * @type {number[]|undefined}\n     */\n    resolutions: Array,\n  },\n  computed: {\n    inputResolutions () {\n      return this.resolutions?.slice()\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'inputResolutions',\n    ], [\n      'inputResolutions',\n    ]),\n  },\n  methods: {\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::source.methods.subscribeAll()\n      this::subscribeToSourceEvents()\n    },\n    attributionsCollapsibleChanged: noop,\n    wrapXChanged: noop,\n  },\n}\n\nasync function subscribeToSourceEvents () {\n  const events = obsFromOlEvent(this.$source, [\n    ImageSourceEventType.IMAGELOADSTART,\n    ImageSourceEventType.IMAGELOADEND,\n    ImageSourceEventType.IMAGELOADERROR,\n  ])\n\n  this.subscribeTo(events, evt => this.$emit(evt.type, evt))\n}\n","import { getStyleId, initializeStyle, setStyleId } from '../ol-ext'\nimport { assert, mergeDescriptors } from '../utils'\nimport olCmp from './ol-cmp'\nimport stubVNode from './stub-vnode'\n\n/**\n * Basic style mixin.\n */\nexport default {\n  mixins: [\n    stubVNode,\n    olCmp,\n  ],\n  stubVNode: {\n    empty () {\n      return this.vmId\n    },\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    beforeInit () {\n      return this::olCmp.methods.beforeInit()\n    },\n    /**\n     * @return {OlStyle|Promise<OlStyle>}\n     * @protected\n     */\n    async createOlObject () {\n      return initializeStyle(await this.createStyle(), this.currentId)\n    },\n    /**\n     * @return {OlStyle|Promise<OlStyle>}\n     * @protected\n     * @abstract\n     */\n    createStyle () {\n      throw new Error(`${this.vmName} not implemented method: createStyle()`)\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async mount () {\n      await this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async unmount () {\n      await this::olCmp.methods.unmount()\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async remount () {\n      await this::olCmp.methods.remount()\n      await this.refresh()\n\n      if (this.$mapVm) {\n        await this.$mapVm.render()\n      }\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async refresh () {\n      await this::olCmp.methods.refresh()\n    },\n    /**\n     * @return {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        {\n          get styleVm () { return vm },\n        },\n      )\n    },\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n    },\n    /**\n     * @param {string|number} id\n     */\n    setId (id) {\n      assert(id != null && id !== '', 'Invalid id')\n\n      if (this.currentId !== id) {\n        this.currentId = id\n        this.scheduleRefresh()\n      }\n      this.$olObject && this.setIdInternal(id)\n    },\n    /**\n     * @returns {string|number}\n     */\n    getIdInternal () {\n      return getStyleId(this.$style)\n    },\n    /**\n     * @param {string|number} id\n     * @returns {void}\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setStyleId(this.$style, id)\n      this.scheduleRefresh()\n    },\n    /**\n     * @return {Promise<OlStyle>}\n     */\n    resolveStyle: olCmp.methods.resolveOlObject,\n    /**\n     * @protected\n     */\n    syncNonObservable () {\n      this::olCmp.methods.syncNonObservable()\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {OlStyle|undefined}\n     */\n    $style: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $styleContainer: {\n      enumerable: true,\n      get: () => this.$services?.styleContainer,\n    },\n  })\n}\n","import { coalesce } from '../utils'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport style from './style'\n\nexport default {\n  mixins: [\n    style,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  props: {\n    // ol/style/Image\n    /**\n     * @type {number}\n     */\n    opacity: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * @type {boolean}\n     */\n    rotateWithView: Boolean,\n    /**\n     * @type {number}\n     */\n    rotation: {\n      type: Number,\n      default: 0,\n    },\n    /**\n     * @type {number}\n     */\n    scale: {\n      type: Number,\n      default: 1,\n    },\n    displacement: {\n      type: Array,\n      default: () => [0, 0],\n    },\n  },\n  data () {\n    return {\n      currentOpacity: this.opacity,\n      currentRotateWithView: this.rotateWithView,\n      currentRotation: this.rotation,\n      currentScale: this.scale,\n    }\n  },\n  computed: {\n    inputDisplacement () {\n      return this.displacement?.slice()\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$style) return\n\n      this.setOpacity(this.getOpacity())\n      this.setRotateWithView(this.getRotateWithView())\n      this.setRotation(this.getRotation())\n      this.setScale(this.getScale())\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'opacity',\n      'currentOpacity',\n      'rotateWithView',\n      'currentRotateWithView',\n      'rotation',\n      'currentRotation',\n      'scale',\n      'currentScale',\n      'inputDisplacement',\n    ], [\n      'inputDisplacement',\n    ]),\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$imageStyleContainer?.setImage(this)\n\n      return this::style.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      if (this.$imageStyleContainer?.getImageVm() === this) {\n        await this.$imageStyleContainer.setImage(null)\n      }\n\n      return this::style.methods.unmount()\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async refresh () {\n      await Promise.all([\n        this::style.methods.refresh(),\n        this.$imageStyleContainer?.refresh(),\n      ])\n    },\n    /**\n     * @protected\n     */\n    syncNonObservable () {\n      this::style.methods.syncNonObservable()\n\n      this.setOpacity(this.getOpacity())\n      this.setRotateWithView(this.getRotateWithView())\n      this.setRotation(this.getRotation())\n      this.setScale(this.getScale())\n    },\n    /**\n     * @returns {number}\n     */\n    getOpacity () {\n      return coalesce(this.$style?.getOpacity(), this.currentOpacity)\n    },\n    /**\n     * @param {number} opacity\n     */\n    setOpacity (opacity) {\n      if (opacity !== this.currentOpacity) {\n        this.currentOpacity = opacity\n        this.scheduleRefresh()\n      }\n      if (this.$style && opacity !== this.$style.getOpacity()) {\n        this.$style.setOpacity(opacity)\n        this.scheduleRefresh()\n      }\n    },\n    /**\n     * @returns {boolean}\n     */\n    getRotateWithView () {\n      return coalesce(this.$style?.getRotateWithView(), this.currentRotateWithView)\n    },\n    /**\n     * @param {boolean} rotateWithView\n     */\n    setRotateWithView (rotateWithView) {\n      if (rotateWithView !== this.currentRotateWithView) {\n        this.currentRotateWithView = rotateWithView\n        this.scheduleRefresh()\n      }\n      if (this.$style && rotateWithView !== this.$style.getRotateWithView()) {\n        this.$style.setRotateWithView(rotateWithView)\n        this.scheduleRefresh()\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getRotation () {\n      return coalesce(this.$style?.getRotation(), this.currentRotation)\n    },\n    /**\n     * @param {number} rotation\n     */\n    setRotation (rotation) {\n      if (rotation !== this.currentRotation) {\n        this.currentRotation = rotation\n        this.scheduleRefresh()\n      }\n      if (this.$style && rotation !== this.$style.getRotation()) {\n        this.$style.setRotation(rotation)\n        this.scheduleRefresh()\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getScale () {\n      return coalesce(this.$style?.getScale(), this.currentScale)\n    },\n    /**\n     * @param {number} scale\n     */\n    setScale (scale) {\n      if (scale !== this.currentScale) {\n        this.currentScale = scale\n        this.scheduleRefresh()\n      }\n      if (this.$style && scale !== this.$style.getScale()) {\n        this.$style.setScale(scale)\n        this.scheduleRefresh()\n      }\n    },\n    /**\n     * @return {number[]}\n     */\n    getDisplacement () {\n      return coalesce(this.$style?.getDisplacement(), this.inputDisplacement)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    opacityChanged (value) {\n      this.setOpacity(value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    currentOpacityChanged (value) {\n      if (value === this.opacity) return\n\n      this.$emit('update:opacity', value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    rotateWithViewChanged (value) {\n      this.setRotateWithView(value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    currentRotateWithViewChanged (value) {\n      if (value === this.rotateWithView) return\n\n      this.$emit('update:rotateWithView', value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    rotationChanged (value) {\n      this.setRotation(value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    currentRotationChanged (value) {\n      if (value === this.rotation) return\n\n      this.$emit('update:rotation', value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    scaleChanged (value) {\n      this.setScale(value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    currentScaleChanged (value) {\n      if (value === this.scale) return\n\n      this.$emit('update:scale', value)\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {Object|undefined}\n     */\n    $imageStyleContainer: {\n      enumerable: true,\n      get: () => this.$services?.imageStyleContainer,\n    },\n  })\n}\n","import { Image } from 'ol/style'\nimport { assert, coalesce } from '../utils'\n\n/**\n * @typedef {module:ol/style/Image~ImageStyle|Object|undefined} ImageStyleLike\n */\n\n/**\n * @typedef {Object} ImageStyleTarget\n * @property {function(): module:ol/style/Image~ImageStyle|undefined} getImage\n * @property {function(module:ol/style/Image~ImageStyle|undefined): void} setImage\n */\n\n/**\n * Image style container.\n */\nexport default {\n  created () {\n    this._image = undefined\n    this._imageVm = undefined\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly imageStyleContainer: Object}}\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get imageStyleContainer () { return vm },\n      }\n    },\n    /**\n     * @return {ImageStyleTarget|undefined}\n     */\n    getImageStyleTarget () {\n      throw new Error(`${this.vmName} not implemented method: getImageStyleTarget()`)\n    },\n    /**\n     * @returns {module:ol/style/Image~ImageStyle|undefined}\n     */\n    getImage () {\n      return coalesce(this.getImageStyleTarget()?.getImage(), this._image)\n    },\n    /**\n     * @return {Object}\n     */\n    getImageVm () {\n      return this._imageVm\n    },\n    /**\n     * @param {module:ol/style/Image~ImageStyle|undefined} image\n     */\n    setImage (image) {\n      image = image?.$style || image\n      image || (image = undefined)\n      assert(!image || image instanceof Image, 'Invalid image style')\n\n      const imageTarget = this.getImageStyleTarget()\n      if (imageTarget && image !== imageTarget.getImage()) {\n        imageTarget.setImage(image)\n        this.scheduleRefresh()\n      }\n      if (image !== this._image) {\n        this._image = image\n        this._imageVm = image?.vm && image.vm[0]\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $image: {\n      enumerable: true,\n      get: this.getImage,\n    },\n    $imageVm: {\n      enumerable: true,\n      get: this.getImageVm,\n    },\n  })\n}\n","import {\n  EPSG_3857,\n  getInteractionId,\n  getInteractionPriority,\n  initializeInteraction,\n  setInteractionId,\n  setInteractionPriority,\n} from '../ol-ext'\nimport { fromOlChangeEvent as obsFromOlChangeEvent } from '../rx-ext'\nimport { addPrefix, assert, coalesce, isNumber, mergeDescriptors } from '../utils'\nimport olCmp, { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport projTransforms from './proj-transforms'\nimport stubVNode from './stub-vnode'\nimport waitForMap from './wait-for-map'\n\n/**\n * Base interaction mixin.\n */\nexport default {\n  mixins: [\n    stubVNode,\n    projTransforms,\n    olCmp,\n    waitForMap,\n  ],\n  stubVNode: {\n    empty () {\n      return this.vmId\n    },\n  },\n  props: {\n    /**\n     * @type {boolean}\n     */\n    active: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * Priority of interactions in the event handling stream.\n     * The higher the value, the sooner it will handle map event.\n     * @type {number}\n     */\n    priority: {\n      type: Number,\n      default: 0,\n    },\n  },\n  data () {\n    return {\n      viewProjection: EPSG_3857,\n      dataProjection: EPSG_3857,\n      currentActive: this.active,\n      currentPriority: this.priority,\n      interacting: false,\n    }\n  },\n  watch: {\n    rev () {\n      if (!this.$interaction) return\n\n      if (this.currentActive !== this.$interaction.getActive()) {\n        this.currentActive = this.$interaction.getActive()\n      }\n      if (this.currentPriority !== getInteractionPriority(this.$interaction)) {\n        this.currentPriority = getInteractionPriority(this.$interaction)\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'active',\n      'currentActive',\n      'priority',\n      'currentPriority',\n    ]),\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      await Promise.all([\n        this::olCmp.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * @return {Promise<module:ol/interaction/Interaction~Interaction>}\n     * @protected\n     */\n    async createOlObject () {\n      const interaction = initializeInteraction(\n        await this.createInteraction(),\n        this.currentId,\n        this.currentPriority,\n      )\n      interaction.setActive(this.currentActive)\n      interaction.set('interacting', this.interacting)\n\n      return interaction\n    },\n    /**\n     * @return {module:ol/interaction/Interaction~Interaction|Promise<module:ol/interaction/Interaction~Interaction>}\n     * @protected\n     * @abstract\n     */\n    createInteraction () {\n      throw new Error(`${this.vmName} not implemented method: createInteraction()`)\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$interactionsContainer?.addInteraction(this)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      this.$interactionsContainer?.removeInteraction(this)\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        {\n          get interactionVm () { return vm },\n        },\n      )\n    },\n    /**\n     * @returns {void}\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n      this::subscribeToInteractionEvents()\n    },\n    /**\n     * @return {Promise<module:ol/interaction/Interaction~Interaction>}\n     */\n    resolveInteraction: olCmp.methods.resolveOlObject,\n    /**\n     * @returns {string|number}\n     */\n    getIdInternal () {\n      return getInteractionId(this.$interaction)\n    },\n    /**\n     * @param {string|number} id\n     * @returns {void}\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setInteractionId(this.$interaction, id)\n    },\n    /**\n     * @returns {boolean}\n     */\n    getActive () {\n      return coalesce(this.$interaction?.getActive(), this.currentActive)\n    },\n    /**\n     * @param {boolean} active\n     */\n    setActive (active) {\n      active = !!active\n\n      if (active !== this.currentActive) {\n        this.currentActive = active\n      }\n      if (this.$interaction && active !== this.$interaction.getActive()) {\n        this.$interaction.setActive(active)\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getPriority () {\n      return coalesce(this.$interaction && getInteractionPriority(this.$interaction), this.currentPriority)\n    },\n    /**\n     * @param {number} priority\n     */\n    setPriority (priority) {\n      assert(isNumber(priority), 'Invalid priority')\n\n      if (priority !== this.currentPriority) {\n        this.currentPriority = priority\n      }\n      if (this.$interaction && priority !== getInteractionPriority(this.$interaction)) {\n        setInteractionPriority(this.$interaction, priority)\n      }\n      // eslint-disable-next-line no-unused-expressions\n      this.$interactionsContainer?.sortInteractions()\n    },\n    /**\n     * @return {module:ol/Map~Map|undefined}\n     */\n    getMap () {\n      return coalesce(this.$interaction?.getMap(), this.$map)\n    },\n    // /**\n    //  * @param {module:ol/Map~Map} map\n    //  */\n    // setMap (map) {\n    //   this.$interaction?.setMap(map)\n    // },\n    setInteracting (flag) {\n      flag = !!flag\n\n      if (flag !== this.interacting) {\n        this.interacting = flag\n      }\n      if (this.$interaction && flag !== this.$interaction.get('interacting')) {\n        this.$interaction.set('interacting', flag)\n      }\n    },\n    isInteracting () {\n      return coalesce(this.$interaction?.get('interacting'), this.interacting)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    activeChanged (value) {\n      this.setActive(value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    currentActiveChanged (value) {\n      if (value === this.active) return\n\n      this.$emit('update:active', value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    priorityChanged (value) {\n      this.setPriority(value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    currentPriorityChanged (value) {\n      if (value === this.priority) return\n\n      this.$emit('update:priority', value)\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {module:ol/interaction/Interaction~Interaction|undefined}\n     */\n    $interaction: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $viewVm: {\n      enumerable: true,\n      get: () => this.$services?.viewVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $interactionsContainer: {\n      enumerable: true,\n      get: () => this.$services?.interactionsContainer,\n    },\n  })\n}\n\nasync function subscribeToInteractionEvents () {\n  const setterKey = addPrefix('current')\n  const propChanges = obsFromOlChangeEvent(this.$interaction, [\n    'active',\n    'priority',\n  ], true, evt => ({\n    ...evt,\n    setter: this[setterKey(evt.prop)],\n  }))\n  this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n}\n","import { Collection } from 'ol'\nimport CollectionEventType from 'ol/CollectionEventType'\nimport { defaults as createDefaultInteractions, Interaction } from 'ol/interaction'\nimport { getUid } from 'ol/util'\nimport { merge as mergeObs } from 'rxjs'\nimport { map as mapObs, tap } from 'rxjs/operators'\nimport { getInteractionId, getInteractionPriority, initializeInteraction } from '../ol-ext'\nimport { bufferDebounceTime, fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { find, forEach, instanceOf, isArray, isPlainObject } from '../utils'\nimport identMap from './ident-map'\nimport { FRAME_TIME, makeChangeOrRecreateWatchers } from './ol-cmp'\nimport rxSubs from './rx-subs'\n\n/**\n * @typedef {module:ol/interaction/Interaction~Interaction|Object} InteractionLike\n */\n\n/**\n * Interactions container\n */\nexport default {\n  mixins: [\n    identMap,\n    rxSubs,\n  ],\n  computed: {\n    /**\n     * @returns {string|undefined}\n     */\n    interactionsCollectionIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'interactions_collection')\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'interactionsCollectionIdent',\n    ]),\n  },\n  created () {\n    /**\n     * @type {module:ol/Collection~Collection<module:ol/interaction/Interaction~Interaction>}\n     * @private\n     */\n    this._interactionsCollection = this.instanceFactoryCall(this.interactionsCollectionIdent, () => new Collection())\n    this._interactionSubs = {}\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly interactionsContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get interactionsContainer () { return vm },\n      }\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::subscribeToCollectionEvents()\n    },\n    /**\n     * @param {InteractionLike[]|module:ol/Collection~Collection<InteractionLike>} defaultInteractions\n     */\n    initDefaultInteractions (defaultInteractions) {\n      this.getInteractions().forEach(interaction => {\n        if (interaction.get('vl_default')) {\n          this.removeInteraction(interaction)\n        }\n      })\n\n      let interactions\n      if (isArray(defaultInteractions) || defaultInteractions instanceof Collection) {\n        interactions = defaultInteractions\n      } else if (defaultInteractions !== false) {\n        interactions = createDefaultInteractions(\n          isPlainObject(defaultInteractions)\n            ? this.defaultInteractions\n            : undefined,\n        )\n      }\n      if (interactions) {\n        interactions.forEach(interaction => interaction.set('vl_default', true))\n        this.addInteractions(interactions)\n      }\n    },\n    /**\n     * @param {InteractionLike} interaction\n     * @return {Interaction}\n     */\n    initializeInteraction (interaction) {\n      interaction = interaction?.$interaction || interaction\n      instanceOf(interaction, Interaction)\n\n      return initializeInteraction(interaction)\n    },\n    /**\n     * @param {InteractionLike[]|module:ol/Collection~Collection<InteractionLike>} interactions\n     */\n    addInteractions (interactions) {\n      forEach(interactions, ::this.addInteraction)\n    },\n    /**\n     * @param {InteractionLike} interaction\n     */\n    addInteraction (interaction) {\n      interaction = this.initializeInteraction(interaction)\n\n      if (this.getInteractionById(getInteractionId(interaction))) return\n\n      this.$interactionsCollection.push(interaction)\n      this.sortInteractions()\n    },\n    /**\n     * @param {InteractionLike[]|module:ol/Collection~Collection<InteractionLike>} interactions\n     */\n    removeInteractions (interactions) {\n      forEach(interactions, ::this.removeInteraction)\n    },\n    /**\n     * @param {InteractionLike} interaction\n     */\n    removeInteraction (interaction) {\n      interaction = this.getInteractionById(getInteractionId(interaction?.$interaction || interaction))\n      if (!interaction) return\n\n      this.$interactionsCollection.remove(interaction)\n      this.sortInteractions()\n    },\n    /**\n     * @return {void}\n     */\n    clearInteractions () {\n      this.$interactionsCollection.clear()\n    },\n    /**\n     * @return {module:ol/interaction/Interaction~Interaction[]}\n     */\n    getInteractions () {\n      return this.$interactionsCollection.getArray().slice()\n    },\n    /**\n     * @return {module:ol/Collection~Collection<module:ol/interaction/Interaction~Interaction>}\n     */\n    getInteractionsCollection () {\n      return this._interactionsCollection\n    },\n    /**\n     * @param {string|number} interactionId\n     * @return {module:ol/interaction/Interaction~Interaction|undefined}\n     */\n    getInteractionById (interactionId) {\n      return find(this.getInteractions(), interaction => getInteractionId(interaction) === interactionId)\n    },\n    /**\n     * @param {function} [sorter]\n     */\n    sortInteractions (sorter) {\n      sorter || (sorter = this.getDefaultInteractionsSorter())\n\n      this.$interactionsCollection.getArray().sort(sorter)\n    },\n    /**\n     * @return {function(): number}\n     * @protected\n     */\n    getDefaultInteractionsSorter () {\n      // sort interactions by priority in asc order\n      // the higher the priority, the earlier the interaction handles the event\n      return (a, b) => {\n        const ap = getInteractionPriority(a) || 0\n        const bp = getInteractionPriority(b) || 0\n        return ap === bp ? 0 : ap - bp\n      }\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    interactionsCollectionIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.$interactionsCollection) {\n        this.setInstance(value, this.$interactionsCollection)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $interactionsCollection: {\n      enumerable: true,\n      get: this.getInteractionsCollection,\n    },\n  })\n}\n\nfunction subscribeToCollectionEvents () {\n  const adds = obsFromOlEvent(this.$interactionsCollection, CollectionEventType.ADD).pipe(\n    mapObs(evt => ({\n      ...evt,\n      element: this.initializeInteraction(evt.element),\n    })),\n    tap(({ element }) => {\n      const uid = getUid(element)\n      const propChanges = obsFromOlChangeEvent(element, 'id', true)\n      this._interactionSubs[uid] = this.subscribeTo(propChanges, ::this.scheduleRefresh)\n    }),\n  )\n  const removes = obsFromOlEvent(this.$interactionsCollection, CollectionEventType.REMOVE).pipe(\n    tap(({ element }) => {\n      const uid = getUid(element)\n      if (this._interactionSubs[uid]) {\n        this.unsubscribe(this._interactionSubs[uid])\n        delete this._interactionSubs[uid]\n      }\n    }),\n  )\n  const events = mergeObs(adds, removes).pipe(\n    bufferDebounceTime(FRAME_TIME),\n  )\n  this.subscribeTo(events, async events => {\n    await this.debounceChanged()\n    forEach(events, ({ type, element }) => {\n      this.$emit(type + 'interaction', element)\n      // todo remove in v0.13.x\n      this.$emit(type + ':interaction', element)\n    })\n  })\n}\n","import { Collection } from 'ol'\nimport CollectionEventType from 'ol/CollectionEventType'\nimport BaseLayer from 'ol/layer/Base'\nimport { getUid } from 'ol/util'\nimport { merge as mergeObs } from 'rxjs'\nimport { map as mapObs, tap } from 'rxjs/operators'\nimport { getLayerId, initializeLayer } from '../ol-ext'\nimport { bufferDebounceTime, fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { find, forEach, instanceOf } from '../utils'\nimport identMap from './ident-map'\nimport { FRAME_TIME, makeChangeOrRecreateWatchers } from './ol-cmp'\nimport rxSubs from './rx-subs'\n\n/**\n * @typedef {module:ol/layer/Base~BaseLayer|Object} LayerLike\n */\n\n/**\n * Layers container mixin.\n */\nexport default {\n  mixins: [\n    identMap,\n    rxSubs,\n  ],\n  computed: {\n    /**\n     * @returns {string|undefined}\n     */\n    layersCollectionIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'layers_collection')\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'layersCollectionIdent',\n    ]),\n  },\n  created () {\n    /**\n     * @type {module:ol/Collection~Collection<module:ol/layer/Base~BaseLayer>}\n     * @private\n     */\n    this._layersCollection = this.instanceFactoryCall(this.layersCollectionIdent, () => new Collection())\n    this._layerSubs = {}\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly layersContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get layersContainer () { return vm },\n      }\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::subscribeToCollectionEvents()\n    },\n    /**\n     * @param {LayerLike} layer\n     * @return {BaseLayer}\n     */\n    initializeLayer (layer) {\n      layer = layer?.$layer || layer\n      instanceOf(layer, BaseLayer)\n\n      return initializeLayer(layer)\n    },\n    /**\n     * @param {LayerLike[]|module:ol/Collection~Collection<LayerLike>} layers\n     */\n    addLayers (layers) {\n      forEach(layers, ::this.addLayer)\n    },\n    /**\n     * @param {LayerLike} layer\n     */\n    addLayer (layer) {\n      layer = this.initializeLayer(layer)\n\n      if (this.getLayerById(getLayerId(layer))) return\n\n      this.$layersCollection.push(layer)\n    },\n    /**\n     * @param {LayerLike[]|module:ol/Collection~Collection<LayerLike>} layers\n     */\n    removeLayers (layers) {\n      forEach(layers, ::this.removeLayer)\n    },\n    /**\n     * @param {LayerLike} layer\n     */\n    removeLayer (layer) {\n      layer = this.getLayerById(getLayerId(layer?.$layer || layer))\n      if (!layer) return\n\n      this.$layersCollection.remove(layer)\n    },\n    /**\n     * @return {void}\n     */\n    clearLayers () {\n      this.$layersCollection.clear()\n    },\n    /**\n     * @return {Array<module:ol/layer/Base~BaseLayer>}\n     */\n    getLayers () {\n      return this.$layersCollection.getArray().slice()\n    },\n    /**\n     * @return {module:ol/Collection~Collection<module:ol/layer/Base~BaseLayer>}\n     */\n    getLayersCollection () {\n      return this._layersCollection\n    },\n    /**\n     * @param {string|number} layerId\n     * @return {module:ol/layer/Base~BaseLayer|undefined}\n     */\n    getLayerById (layerId) {\n      return find(this.getLayers(), layer => getLayerId(layer) === layerId)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    layersCollectionIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.$layersCollection) {\n        this.setInstance(value, this.$layersCollection)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $layersCollection: {\n      enumerable: true,\n      get: this.getLayersCollection,\n    },\n  })\n}\n\nfunction subscribeToCollectionEvents () {\n  const adds = obsFromOlEvent(this.$layersCollection, CollectionEventType.ADD).pipe(\n    mapObs(evt => ({\n      ...evt,\n      element: this.initializeLayer(evt.element),\n    })),\n    tap(({ element }) => {\n      const uid = getUid(element)\n      const propChanges = obsFromOlChangeEvent(element, 'id', true)\n      this._layerSubs[uid] = this.subscribeTo(propChanges, ::this.scheduleRefresh)\n    }),\n  )\n  const removes = obsFromOlEvent(this.$layersCollection, CollectionEventType.REMOVE).pipe(\n    tap(({ element }) => {\n      const uid = getUid(element)\n      if (this._layerSubs[uid]) {\n        this.unsubscribe(this._layerSubs[uid])\n        delete this._layerSubs[uid]\n      }\n    }),\n  )\n  const events = mergeObs(adds, removes).pipe(\n    bufferDebounceTime(FRAME_TIME),\n  )\n  this.subscribeTo(events, async events => {\n    await this.debounceChanged()\n    forEach(events, ({ type, element }) => {\n      this.$emit(type + 'layer', element)\n      // todo remove in v0.13.x\n      this.$emit(type + ':layer', element)\n    })\n  })\n}\n","import { Collection, Overlay } from 'ol'\nimport CollectionEventType from 'ol/CollectionEventType'\nimport { getUid } from 'ol/util'\nimport { merge as mergeObs } from 'rxjs'\nimport { map as mapObs, tap } from 'rxjs/operators'\nimport { getOverlayId, initializeOverlay } from '../ol-ext'\nimport { bufferDebounceTime, fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { find, forEach, instanceOf } from '../utils'\nimport identMap from './ident-map'\nimport { FRAME_TIME, makeChangeOrRecreateWatchers } from './ol-cmp'\nimport rxSubs from './rx-subs'\n\n/**\n * @typedef {module:ol/Overlay~Overlay|Object} OverlayLike\n */\n\n/**\n * Overlays container mixin.\n */\nexport default {\n  mixins: [\n    identMap,\n    rxSubs,\n  ],\n  computed: {\n    /**\n     * @returns {string|undefined}\n     */\n    overlaysCollectionIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'overlays_collection')\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'overlaysCollectionIdent',\n    ]),\n  },\n  created () {\n    /**\n     * @type {module:ol/Collection~Collection<module:ol/Overlay~Overlay>}\n     * @private\n     */\n    this._overlaysCollection = this.instanceFactoryCall(this.overlaysCollectionIdent, () => new Collection())\n    this._overlaySubs = {}\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {readonly overlaysContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get overlaysContainer () { return vm },\n      }\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::subscribeToCollectionEvents()\n    },\n    /**\n     * @param {OverlayLike} overlay\n     * @return {Overlay}\n     */\n    initializeOverlay (overlay) {\n      overlay = overlay?.$overlay || overlay\n      instanceOf(overlay, Overlay)\n\n      return initializeOverlay(overlay)\n    },\n    /**\n     * @param {OverlayLike[]|module:ol/Collection~Collection<OverlayLike>} overlays\n     */\n    addOverlays (overlays) {\n      forEach(overlays, ::this.addOverlay)\n    },\n    /**\n     * @param {OverlayLike} overlay\n     */\n    addOverlay (overlay) {\n      overlay = this.initializeOverlay(overlay)\n\n      if (this.getOverlayById(getOverlayId(overlay))) return\n\n      this.$overlaysCollection.push(overlay)\n    },\n    /**\n     * @param {OverlayLike[]|module:ol/Collection~Collection<OverlayLike>} overlays\n     */\n    removeOverlays (overlays) {\n      forEach(overlays, ::this.removeOverlay)\n    },\n    /**\n     * @param {OverlayLike} overlay\n     */\n    removeOverlay (overlay) {\n      overlay = this.getOverlayById(getOverlayId(overlay?.$overlay || overlay))\n      if (!overlay) return\n\n      this.$overlaysCollection.remove(overlay)\n    },\n    /**\n     * @return {void}\n     */\n    clearOverlays () {\n      this.$overlaysCollection.clear()\n    },\n    /**\n     * @return {Array<module:ol/Overlay~Overlay>}\n     */\n    getOverlays () {\n      return this.$overlaysCollection.getArray().slice()\n    },\n    /**\n     * @return {module:ol/Collection~Collection<module:ol/Overlay~Overlay>}\n     */\n    getOverlaysCollection () {\n      return this._overlaysCollection\n    },\n    /**\n     * @param {string|number} overlayId\n     * @return {module:ol/Overlay~Overlay|undefined}\n     */\n    getOverlayById (overlayId) {\n      return find(this.getOverlays(), overlay => getOverlayId(overlay) === overlayId)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    overlaysCollectionIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.$overlaysCollection) {\n        this.setInstance(value, this.$overlaysCollection)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $overlaysCollection: {\n      enumerable: true,\n      get: this.getOverlaysCollection,\n    },\n  })\n}\n\nfunction subscribeToCollectionEvents () {\n  const adds = obsFromOlEvent(this.$overlaysCollection, CollectionEventType.ADD).pipe(\n    mapObs(evt => ({\n      ...evt,\n      element: this.initializeOverlay(evt.element),\n    })),\n    tap(({ element }) => {\n      const uid = getUid(element)\n      const propChanges = obsFromOlChangeEvent(element, 'id', true)\n      this._overlaySubs[uid] = this.subscribeTo(propChanges, ::this.scheduleRefresh)\n    }),\n  )\n  const removes = obsFromOlEvent(this.$overlaysCollection, CollectionEventType.REMOVE).pipe(\n    tap(({ element }) => {\n      const uid = getUid(element)\n      if (this._overlaySubs[uid]) {\n        this.unsubscribe(this._overlaySubs[uid])\n        delete this._overlaySubs[uid]\n      }\n    }),\n  )\n  const events = mergeObs(adds, removes).pipe(\n    bufferDebounceTime(FRAME_TIME),\n  )\n  this.subscribeTo(events, async events => {\n    await this.debounceChanged()\n    forEach(events, ({ type, element }) => {\n      this.$emit(type + 'overlay', element)\n      // todo remove in v0.13.x\n      this.$emit(type + ':overlay', element)\n    })\n  })\n}\n","import { Stroke } from 'ol/style'\nimport { assert, coalesce } from '../utils'\n\n/**\n * @typedef {module:ol/style/Stroke~Stroke|Object|undefined} StrokeStyleLike\n */\n\n/**\n * @typedef {Object} StrokeStyleTarget\n * @property {function(): module:ol/style/Stroke~Stroke|undefined} getStroke\n * @property {function(module:ol/style/Stroke~Stroke|undefined): void} setStroke\n */\n\n/**\n * Stroke style container.\n */\nexport default {\n  created () {\n    this._stroke = undefined\n    this._strokeVm = undefined\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly strokeStyleContainer: Object}}\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get strokeStyleContainer () { return vm },\n      }\n    },\n    /**\n     * @return {StrokeStyleTarget}\n     */\n    getStrokeStyleTarget () {\n      throw new Error(`${this.vmName} not implemented method: getStrokeStyleTarget()`)\n    },\n    /**\n     * @returns {module:ol/style/Stroke~Stroke|undefined}\n     */\n    getStroke () {\n      return coalesce(this.getStrokeStyleTarget()?.getStroke(), this._stroke)\n    },\n    /**\n     * @return {Object}\n     */\n    getStrokeVm () {\n      return this._strokeVm\n    },\n    /**\n     * @param {module:ol/style/Stroke~Stroke|undefined} stroke\n     */\n    setStroke (stroke) {\n      stroke = stroke?.$style || stroke\n      stroke || (stroke = undefined)\n      assert(!stroke || stroke instanceof Stroke, 'Invalid stroke')\n\n      const strokeTarget = this.getStrokeStyleTarget()\n      if (strokeTarget && stroke !== strokeTarget.getStroke()) {\n        strokeTarget.setStroke(stroke)\n        this.scheduleRefresh()\n      }\n      if (stroke !== this._stroke) {\n        this._stroke = stroke\n        this._strokeVm = stroke?.vm && stroke.vm[0]\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $stroke: {\n      enumerable: true,\n      get: this.getStroke,\n    },\n    $strokeVm: {\n      enumerable: true,\n      get: this.getStrokeVm,\n    },\n  })\n}\n","import { dumpFillStyle, dumpStrokeStyle } from '../ol-ext'\nimport { clonePlainObject, coalesce, isEqual, mergeDescriptors } from '../utils'\nimport fillStyleContainer from './fill-style-container'\nimport imageStyle from './image-style'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport strokeStyleContainer from './stroke-style-container'\nimport style from './style'\n\nexport default {\n  mixins: [\n    fillStyleContainer,\n    strokeStyleContainer,\n    imageStyle,\n  ],\n  props: {\n    // ol/style/RegularShape\n    points: Number,\n    radius: Number,\n    radius1: Number,\n    radius2: Number,\n    angle: {\n      type: Number,\n      default: 0,\n    },\n  },\n  computed: {\n    stroke () {\n      if (!(this.rev && this.$stroke)) return\n\n      return dumpStrokeStyle(this.$stroke)\n    },\n    fill () {\n      if (!(this.rev && this.$fill)) return\n\n      return dumpFillStyle(this.$fill)\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'points',\n      'radius',\n      'radius1',\n      'radius2',\n      'angle',\n      'stroke',\n      'fill',\n    ], [\n      'stroke',\n      'fill',\n    ]),\n  },\n  methods: {\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return mergeDescriptors(\n        this::style.methods.getServices(),\n        this::fillStyleContainer.methods.getServices(),\n        this::strokeStyleContainer.methods.getServices(),\n      )\n    },\n    /**\n     * @protected\n     */\n    syncNonObservable () {\n      this::imageStyle.methods.syncNonObservable()\n    },\n    /**\n     * @return {FillStyleTarget}\n     * @protected\n     */\n    getFillStyleTarget () {\n      return {\n        getFill: () => this.$style?.getFill(),\n        setFill: () => {\n          if (process.env.VUELAYERS_DEBUG) {\n            this.$logger.log('fill changed, scheduling recreate...')\n          }\n\n          this.scheduleRecreate()\n        },\n      }\n    },\n    /**\n     * @return {StrokeStyleTarget}\n     * @protected\n     */\n    getStrokeStyleTarget () {\n      return {\n        getStroke: () => this.$style?.getStroke(),\n        setStroke: () => {\n          if (process.env.VUELAYERS_DEBUG) {\n            this.$logger.log('stroke changed, scheduling recreate...')\n          }\n\n          this.scheduleRecreate()\n        },\n      }\n    },\n    getAnchor () {\n      return this.$style?.getAnchor()\n    },\n    getAngle () {\n      return coalesce(this.$style?.getAngle(), this.angle)\n    },\n    getImage () {\n      return this.$style?.getImage()\n    },\n    getOrigin () {\n      return this.$style?.getOrigin()\n    },\n    getPoints () {\n      return coalesce(this.$style?.getPoints(), this.points)\n    },\n    getRadius () {\n      return coalesce(this.$style?.getRadius(), this.radius)\n    },\n    getRadius2 () {\n      return coalesce(this.$style?.getRadius2(), this.radius2)\n    },\n    getSize () {\n      return this.$style?.getSize()\n    },\n    /**\n     * @param {Object|undefined} value\n     * @param {Object|undefined} prev\n     * @protected\n     */\n    strokeChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:stroke', value && clonePlainObject(value))\n    },\n    /**\n     * @param {Object|undefined} value\n     * @param {Object|undefined} prev\n     * @protected\n     */\n    fillChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:fill', value && clonePlainObject(value))\n    },\n  },\n}\n","/**\n * @module ol/geom/GeometryLayout\n */\n/**\n * The coordinate layout for geometries, indicating whether a 3rd or 4th z ('Z')\n * or measure ('M') coordinate is available. Supported values are `'XY'`,\n * `'XYZ'`, `'XYM'`, `'XYZM'`.\n * @enum {string}\n */\nexport default {\n    XY: 'XY',\n    XYZ: 'XYZ',\n    XYM: 'XYM',\n    XYZM: 'XYZM',\n};\n//# sourceMappingURL=GeometryLayout.js.map","import { boundingExtent as baseBoundingExtent } from 'ol/extent'\nimport GeometryLayout from 'ol/geom/GeometryLayout'\nimport GeometryType from 'ol/geom/GeometryType'\nimport { findPointOnSurface, isEqualCoord, roundCoords, roundPointCoords, transforms } from '../ol-ext'\nimport { assert, clonePlainObject, coalesce, isArray, isEmpty, isEqual, negate } from '../utils'\nimport geometry from './geometry'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\n\n/**\n * Base simple geometry with coordinates mixin.\n */\nexport default {\n  mixins: [\n    geometry,\n  ],\n  props: {\n    // ol/geom/SimpleGeometry\n    /**\n     * @type {number[]} Coordinates in map data projection\n     */\n    coordinates: {\n      type: Array,\n      required: true,\n      validator: /*#__PURE__*/negate(isEmpty),\n    },\n    // todo add support of coord layout\n    // /**\n    //  * @type {string}\n    //  */\n    // layout: {\n    //   type: String,\n    //   default: GeometryLayout.XY,\n    //   validator: value => Object.values(GeometryLayout).includes(value.toUpperCase()),\n    // },\n  },\n  data () {\n    return {\n      currentCoordinatesViewProj: clonePlainObject(this.coordinates),\n    }\n  },\n  computed: {\n    coordinatesDataProj () {\n      return roundCoords(this.type, this.coordinates)\n    },\n    coordinatesViewProj () {\n      return this.coordinatesToViewProj(this.coordinates)\n    },\n    currentCoordinatesDataProj () {\n      return this.coordinatesToDataProj(this.currentCoordinatesViewProj)\n    },\n    pointDataProj () {\n      return this.rev ? this.findPointOnSurface() : findPointOnSurface({\n        type: this.type,\n        coordinates: this.coordinatesDataProj,\n      })\n    },\n    pointViewProj () {\n      return this.rev ? this.findPointOnSurface(true) : findPointOnSurface({\n        type: this.type,\n        coordinates: this.coordinatesViewProj,\n      })\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$geometry) return\n\n      if (!isEqualCoord({\n        coordinates: this.currentCoordinatesViewProj,\n        extent: boundingExtent(this.currentCoordinatesViewProj),\n      }, {\n        coordinates: this.$geometry.getCoordinates(),\n        extent: this.$geometry.getExtent(),\n      })) {\n        this.currentCoordinatesViewProj = this.$geometry.getCoordinates()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'coordinatesViewProj',\n      'currentCoordinatesDataProj',\n      'pointDataProj',\n    ], [\n      'coordinatesViewProj',\n      'currentCoordinatesDataProj',\n      'pointDataProj',\n    ]),\n  },\n  created () {\n    this.currentCoordinatesViewProj = clonePlainObject(this.coordinatesViewProj)\n    this.extentViewProj = boundingExtent(this.currentCoordinatesViewProj)\n  },\n  methods: {\n    /**\n     * @returns {function}\n     */\n    getCoordinatesTransformFunction () {\n      return transforms[this.getType()].transform\n    },\n    /**\n     * @param {number[]} coordinates\n     * @returns {Promise<number[]>}\n     */\n    coordinatesToDataProj (coordinates) {\n      const transform = this.getCoordinatesTransformFunction()\n\n      return transform(coordinates, this.resolvedViewProjection, this.resolvedDataProjection)\n    },\n    /**\n     * @param {number[]} coordinates\n     * @returns {Promise<number[]>}\n     */\n    coordinatesToViewProj (coordinates) {\n      const transform = this.getCoordinatesTransformFunction()\n\n      return transform(coordinates, this.resolvedDataProjection, this.resolvedViewProjection)\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @return {number[]}\n     */\n    getCoordinates (viewProj = false) {\n      const coordinates = coalesce(this.$geometry?.getCoordinates(), this.currentCoordinatesViewProj)\n\n      return viewProj ? roundCoords(this.getType(), coordinates) : this.coordinatesToDataProj(coordinates)\n    },\n    /**\n     * @param {number[]} coordinates\n     * @param {boolean} [viewProj=false]\n     */\n    setCoordinates (coordinates, viewProj = false) {\n      assert(isArray(coordinates), 'Invalid coordinates')\n      coordinates = viewProj ? roundCoords(this.getType(), coordinates) : this.coordinatesToViewProj(coordinates)\n      const extent = boundingExtent(coordinates)\n\n      if (!isEqualCoord({\n        coordinates,\n        extent,\n      }, {\n        coordinates: this.currentCoordinatesViewProj,\n        extent: this.extentViewProj,\n      })) {\n        this.currentCoordinatesViewProj = coordinates\n      }\n      if (this.$geometry && !isEqualCoord({\n        coordinates,\n        extent,\n      }, {\n        coordinates: this.$geometry.getCoordinates(),\n        extent: this.$geometry.getExtent(),\n      })) {\n        this.$geometry.setCoordinates(coordinates)\n      }\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @returns {number[]>}\n     */\n    getFirstCoordinate (viewProj = false) {\n      let coordinate\n      if (this.$geometry) {\n        coordinate = this.$geometry.getFirstCoordinate()\n      } else {\n        switch (this.getType()) {\n          case GeometryType.POINT:\n          case GeometryType.CIRCLE:\n            coordinate = this.currentCoordinatesViewProj\n            break\n          case GeometryType.LINE_STRING:\n          case GeometryType.MULTI_POINT:\n            coordinate = this.currentCoordinatesViewProj[0]\n            break\n          case GeometryType.POLYGON:\n          case GeometryType.MULTI_LINE_STRING:\n            coordinate = this.currentCoordinatesViewProj[0][0]\n            break\n          case GeometryType.MULTI_POLYGON:\n            coordinate = this.currentCoordinatesViewProj[0][0][0]\n            break\n        }\n      }\n\n      return viewProj ? roundPointCoords(coordinate) : this.pointToDataProj(coordinate)\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @returns {number[]}\n     */\n    getLastCoordinate (viewProj = false) {\n      let coordinate\n      if (this.$geometry) {\n        coordinate = this.$geometry.getLastCoordinate()\n      } else {\n        let arr\n        switch (this.getType()) {\n          case GeometryType.POINT:\n          case GeometryType.CIRCLE:\n            coordinate = this.currentCoordinatesViewProj\n            break\n          case GeometryType.LINE_STRING:\n          case GeometryType.MULTI_POINT:\n            coordinate = this.currentCoordinatesViewProj[this.currentCoordinatesViewProj.length - 1]\n            break\n          case GeometryType.POLYGON:\n          case GeometryType.MULTI_LINE_STRING:\n            arr = this.currentCoordinatesViewProj[this.currentCoordinatesViewProj.length - 1]\n            coordinate = arr[arr.length - 1]\n            break\n          case GeometryType.MULTI_POLYGON:\n            arr = this.currentCoordinatesViewProj[this.currentCoordinatesViewProj.length - 1]\n            arr = arr[arr.length - 1]\n            coordinate = arr[arr.length - 1]\n            break\n        }\n      }\n\n      return viewProj ? roundPointCoords(coordinate) : this.pointToDataProj(coordinate)\n    },\n    /**\n     * @returns {string}\n     */\n    getLayout () {\n      return coalesce(this.$geometry?.getLayout(), GeometryLayout.XY)\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @return {number[]|undefined}\n     */\n    findPointOnSurface (viewProj = false) {\n      return findPointOnSurface({\n        type: this.getType(),\n        coordinates: this.getCoordinates(viewProj),\n      })\n    },\n    /**\n     * @param {number[]} value\n     * @protected\n     */\n    coordinatesViewProjChanged (value) {\n      this.setCoordinates(value, true)\n    },\n    /**\n     * @param {number[]} value\n     * @protected\n     */\n    currentCoordinatesDataProjChanged (value) {\n      if (isEqual(value, this.coordinatesDataProj)) return\n\n      this.$emit('update:coordinates', clonePlainObject(value))\n    },\n    /**\n     * @param {number[]} value\n     * @param {number[]} prev\n     * @protected\n     */\n    pointDataProjChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:point', value?.slice())\n    },\n  },\n}\n\nfunction boundingExtent (coordinates) {\n  if (!coordinates) return\n  if (!isArray(coordinates[0])) {\n    coordinates = [coordinates]\n  }\n  return baseBoundingExtent(coordinates)\n}\n","import { Text } from 'ol/style'\nimport { assert, coalesce } from '../utils'\n\n/**\n * @typedef {module:ol/style/Text~Text|Object|undefined} TextStyleLike\n */\n\n/**\n * @typedef {Object} TextStyleTarget\n * @property {function(): module:ol/style/Text~Text|undefined} getText\n * @property {function(module:ol/style/Text~Text|undefined): void} setText\n */\n\n/**\n * Text style container.\n */\nexport default {\n  created () {\n    this._text = undefined\n    this._textVm = undefined\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly textStyleContainer: Object}}\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get textStyleContainer () { return vm },\n      }\n    },\n    /**\n     * @return {TextStyleTarget|undefined}\n     */\n    getTextStyleTarget () {\n      throw new Error(`${this.vmName} not implemented method: getTextStyleTarget()`)\n    },\n    /**\n     * @returns {module:ol/style/Text~Text|null}\n     */\n    getText () {\n      return coalesce(this.getTextStyleTarget()?.getText(), this._text)\n    },\n    /**\n     * @return {Object}\n     */\n    getTextVm () {\n      return this._textVm\n    },\n    /**\n     * @param {module:ol/style/Text~Text|undefined} text\n     */\n    setText (text) {\n      text = text?.$style || text\n      text || (text = undefined)\n      assert(!text || text instanceof Text, 'Invalid text style')\n\n      const textTarget = this.getTextStyleTarget()\n      if (textTarget && text !== textTarget.getText()) {\n        textTarget.setText(text)\n        this.scheduleRefresh()\n      }\n      if (text !== this._text) {\n        this._text = text\n        this._textVm = text?.vm && text.vm[0]\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $text: {\n      enumerable: true,\n      get: this.getText,\n    },\n    $textVm: {\n      enumerable: true,\n      get: this.getTextVm,\n    },\n  })\n}\n","/**\n * @module ol/source/TileEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when a tile starts loading.\n     * @event module:ol/source/Tile.TileSourceEvent#tileloadstart\n     * @api\n     */\n    TILELOADSTART: 'tileloadstart',\n    /**\n     * Triggered when a tile finishes loading, either when its data is loaded,\n     * or when loading was aborted because the tile is no longer needed.\n     * @event module:ol/source/Tile.TileSourceEvent#tileloadend\n     * @api\n     */\n    TILELOADEND: 'tileloadend',\n    /**\n     * Triggered if tile loading results in an error.\n     * @event module:ol/source/Tile.TileSourceEvent#tileloaderror\n     * @api\n     */\n    TILELOADERROR: 'tileloaderror',\n};\n//# sourceMappingURL=TileEventType.js.map","import { coalesce, isFunction, sealFactory } from '../utils'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport source from './source'\n\nexport default {\n  mixins: [\n    source,\n  ],\n  props: {\n    // ol/source/Tile\n    /**\n     * @type {number|undefined}\n     */\n    cacheSize: Number,\n    /**\n     * @type {boolean|undefined}\n     */\n    opaque: Boolean,\n    /**\n     * @type {number}\n     */\n    tilePixelRatio: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * @type {function|undefined}\n     */\n    tileGridFactory: Function,\n    /**\n     * @type {number}\n     */\n    transition: Number,\n    /**\n     * @type {string|undefined}\n     */\n    tileKey: String,\n    /**\n     * @type {number}\n     */\n    zDirection: {\n      type: Number,\n      default: 0,\n    },\n  },\n  data () {\n    return {\n      tileGrid: undefined,\n    }\n  },\n  computed: {\n    /**\n     * @type {string|undefined}\n     */\n    tileGridIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'tile_grid')\n    },\n    /**\n     * @returns {function|undefined}\n     */\n    derivedTileGridFactory () {\n      return this.tileGridFactory\n    },\n    /**\n     * @returns {function|undefined}\n     */\n    inputTileGridFactory () {\n      if (!isFunction(this.derivedTileGridFactory)) return\n\n      return sealFactory(::this.derivedTileGridFactory)\n    },\n    /**\n     * @returns {string}\n     */\n    resolvedDataProjection () {\n      return coalesce(\n        this.projection,\n        this.resolvedViewProjection,\n      )\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (this.tileGrid !== this.$source.getTileGrid()) {\n        this.tileGrid = this.$source.getTileGrid()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'tileGridIdent',\n      'inputTileGridFactory',\n      'tileGrid',\n      'tileKey',\n      'opaque',\n      'tilePixelRatio',\n      'cacheSize',\n      'transition',\n      'zDirection',\n    ]),\n  },\n  created () {\n    if (isFunction(this.inputTileGridFactory)) {\n      this.tileGrid = this.instanceFactoryCall(this.tileGridIdent, ::this.inputTileGridFactory)\n    }\n  },\n  methods: {\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::source.methods.subscribeAll()\n    },\n    /**\n     * @returns {module:ol/tilegrid/TileGrid~TileGrid|undefined}\n     */\n    getTileGrid () {\n      return coalesce(this.$source?.getTileGrid(), this.tileGrid)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    tileGridIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.tileGrid) {\n        this.setInstance(value, this.tileGrid)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n    /**\n     * @param {function|undefined} value\n     * @return {Promise<void>}\n     * @protected\n     */\n    inputTileGridFactoryChanged (value) {\n      while (this.hasInstance(this.tileGridIdent)) {\n        this.unsetInstance(this.tileGridIdent)\n      }\n\n      if (isFunction(value)) {\n        this.tileGrid = this.instanceFactoryCall(this.tileGridIdent, this::value)\n      } else {\n        this.tileGrid = null\n      }\n    },\n  },\n}\n","import { v4 as uuid } from 'uuid'\nimport TileEventType from 'ol/source/TileEventType'\nimport { expandUrl } from '../ol-ext'\nimport { fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport {\n  and,\n  assert,\n  coalesce,\n  isArray,\n  isEmpty,\n  isEqual,\n  isFunction,\n  isString,\n  negate,\n  pick,\n  replaceTokens,\n} from '../utils'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport tileSource from './tile-source'\n\nconst isNotEmptyString = /*#__PURE__*/and(isString, negate(isEmpty))\nconst isArrayOfNotEmptyStrings = /*#__PURE__*/and(isArray, value => value.every(isNotEmptyString))\n\nexport default {\n  mixins: [\n    tileSource,\n  ],\n  props: {\n    // ol/source/UrlTile\n    /**\n     * @type {function|undefined}\n     */\n    tileLoadFunction: Function,\n    /**\n     * @type {function|undefined}\n     * @deprecated\n     * @todo remove in v0.13.x\n     */\n    tileUrlFunc: Function,\n    /**\n     * @type {function|undefined}\n     */\n    tileUrlFunction: Function,\n    /**\n     * @type {string|undefined}\n     */\n    url: {\n      type: String,\n      validator: isNotEmptyString,\n    },\n    /**\n     * @type {string[]|undefined}\n     */\n    urls: {\n      type: Array,\n      validator: isArrayOfNotEmptyStrings,\n    },\n  },\n  data () {\n    return {\n      currentTileLoadFunction: undefined,\n      currentTileUrlFunction: undefined,\n      currentUrls: [],\n    }\n  },\n  computed: {\n    urlTokens () {\n      return []\n    },\n    inputUrl () {\n      if (!this.url) return\n\n      return replaceTokens(this.url, pick(this, this.urlTokens))\n    },\n    parsedUrls () {\n      const urls = []\n\n      if (this.urls && this.urls.length > 0) {\n        urls.push(...this.urls)\n      } else if (this.url) {\n        urls.push(this.url)\n      }\n\n      const tokens = pick(this, this.urlTokens)\n\n      return urls.map(url => replaceTokens(url, tokens))\n    },\n    inputUrls () {\n      return this.parsedUrls.reduce((urls, url) => urls.concat(...expandUrl(url)), [])\n    },\n    inputTileUrlFunction () {\n      return coalesce(this.tileUrlFunction, this.tileUrlFunc)\n    },\n    inputTileLoadFunction () {\n      return this.tileLoadFunction\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (this.currentTileLoadFunction !== this.$source.getTileLoadFunction()) {\n        this.currentTileLoadFunction = this.$source.getTileLoadFunction()\n      }\n      if (this.currentTileUrlFunction !== this.$source.getTileUrlFunction()) {\n        this.currentTileUrlFunction = this.$source.getTileUrlFunction()\n      }\n      if (!isEqual(this.currentUrls, this.$source.getUrls()) && !this.inputTileUrlFunction) {\n        this.currentUrls = this.$source.getUrls()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'inputUrls',\n      'currentUrls',\n      'inputTileUrlFunction',\n      'currentTileUrlFunction',\n      'inputTileLoadFunction',\n      'currentTileLoadFunction',\n    ], [\n      'inputUrls',\n      'currentUrls',\n    ]),\n  },\n  created () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.tileUrlFunc) {\n        this.$logger.warn(\"'tileUrlFunc' prop is deprecated. Use 'tileUrlFunction' prop instead.\")\n      }\n    }\n\n    this.currentUrls = this.inputUrls?.slice()\n    this.currentTileUrlFunction = this.inputTileUrlFunction\n    this.currentTileLoadFunction = this.inputTileLoadFunction\n  },\n  updated () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.tileUrlFunc) {\n        this.$logger.warn(\"'tileUrlFunc' prop is deprecated. Use 'tileUrlFunction' prop instead.\")\n      }\n    }\n  },\n  methods: {\n    /**\n     * @returns {void}\n     */\n    subscribeAll () {\n      this::tileSource.methods.subscribeAll()\n      this::subscribeToSourceEvents()\n    },\n    /**\n     * @returns {module:ol/Tile.LoadFunction}\n     */\n    getTileLoadFunction () {\n      return coalesce(this.$source?.getTileLoadFunction(), this.currentTileLoadFunction)\n    },\n    /**\n     * @param {module:ol/Tile.LoadFunction} tileLoadFunction\n     */\n    setTileLoadFunction (tileLoadFunction) {\n      assert(isFunction(tileLoadFunction), 'Invalid tile load function')\n\n      if (tileLoadFunction !== this.currentTileLoadFunction) {\n        this.currentTileLoadFunction = tileLoadFunction\n      }\n      if (this.$source && tileLoadFunction !== this.$source.getTileLoadFunction()) {\n        this.$source.setTileLoadFunction(tileLoadFunction)\n      }\n    },\n    /**\n     * @returns {module:ol/Tile.UrlFunction}\n     */\n    getTileUrlFunction () {\n      return coalesce(this.$source?.getTileUrlFunction(), this.currentTileUrlFunction)\n    },\n    /**\n     * @param {module:ol/Tile.UrlFunction} tileUrlFunction\n     * @param {number} [tileKey]\n     */\n    setTileUrlFunction (tileUrlFunction, tileKey) {\n      assert(isFunction(tileUrlFunction), 'Invalid tile url function')\n      tileKey || (tileKey = coalesce(this.inputUrls?.join('\\n'), uuid()))\n\n      if (tileUrlFunction !== this.currentTileUrlFunction) {\n        this.currentTileUrlFunction = tileUrlFunction\n      }\n      if (this.$source && tileUrlFunction !== this.$source.getTileUrlFunction()) {\n        this.$source.setTileUrlFunction(tileUrlFunction, tileKey)\n      }\n    },\n    /**\n     * @returns {string[]|undefined}\n     */\n    getUrls () {\n      return coalesce(this.$source?.getUrls(), this.currentUrls)\n    },\n    /**\n     * @param {string[]} urls\n     */\n    setUrls (urls) {\n      assert(isArrayOfNotEmptyStrings(urls), 'Invalid urls')\n      urls = urls.slice()\n\n      if (!isEqual(urls, this.currentUrls)) {\n        this.currentUrls = urls\n      }\n      if (this.$source) {\n        if (this.inputTileUrlFunction) {\n          this.$source.setTileUrlFunction(this.inputTileUrlFunction, urls.join('\\n'))\n        } else if (!isEqual(urls, this.$source.getUrls())) {\n          this.$source.setUrls(urls)\n        }\n      }\n    },\n    /**\n     * @param {string} url\n     */\n    setUrl (url) {\n      assert(isNotEmptyString(url), 'Invalid url')\n\n      this.setUrls(expandUrl(url))\n    },\n    /**\n     * @param {string[]} value\n     * @protected\n     */\n    inputUrlsChanged (value) {\n      this.setUrls(value)\n    },\n    /**\n     * @param {string[]} value\n     * @protected\n     */\n    currentUrlsChanged (value) {\n      if (isEqual(value, this.urls)) return\n\n      this.$emit('update:urls', value?.slice())\n    },\n    /**\n     * @param {function|undefined} value\n     * @protected\n     */\n    inputTileUrlFunctionChanged (value) {\n      this.setTileUrlFunction(value)\n    },\n    /**\n     * @param {function|undefined} value\n     * @protected\n     */\n    currentTileUrlFunctionChanged (value) {\n      if (value === this.inputTileUrlFunction) return\n\n      this.$emit('update:tileUrlFunction', value)\n    },\n    /**\n     * @param {function|undefined} value\n     * @protected\n     */\n    inputTileLoadFunctionChanged (value) {\n      this.setTileLoadFunction(value)\n    },\n    /**\n     * @param {function|undefined} value\n     * @protected\n     */\n    currentTileLoadFunctionChanged (value) {\n      if (value === this.inputTileLoadFunction) return\n\n      this.$emit('update:tileLoadFunction', value)\n    },\n  },\n}\n\nasync function subscribeToSourceEvents () {\n  const events = obsFromOlEvent(this.$source, [\n    TileEventType.TILELOADSTART,\n    TileEventType.TILELOADEND,\n    TileEventType.TILELOADERROR,\n  ])\n  this.subscribeTo(events, evt => this.$emit(evt.type, evt))\n}\n","import { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport urlTileSource from './url-tile-source'\n\n/**\n * Base tile image source mixin.\n */\nexport default {\n  mixins: [\n    urlTileSource,\n  ],\n  props: {\n    // ol/source/TileImage\n    /**\n     * @type {string|undefined}\n     */\n    crossOrigin: String,\n    /**\n     * @type {number|undefined}\n     */\n    reprojectionErrorThreshold: Number,\n    /**\n     * @type {string|undefined}\n     */\n    tileClass: String,\n    /**\n     * @type {boolean}\n     */\n    imageSmoothing: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'crossOrigin',\n      'reprojectionErrorThreshold',\n      'tileClass',\n      'imageSmoothing',\n    ]),\n  },\n  methods: {\n    async setRenderReprojectionEdges (render) {\n      (await this.resolveSource()).setRenderReprojectionEdges(render)\n    },\n  },\n}\n","import { fromOlChangeEvent as obsFromOlChangeEvent } from '../rx-ext'\nimport { addPrefix, assert, coalesce, isNumber } from '../utils'\nimport layer from './layer'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\n\n/**\n * Base tile layer mixin.\n */\nexport default {\n  mixins: [\n    layer,\n  ],\n  props: {\n    // ol/layer/BaseTile\n    /**\n     * @type {number}\n     */\n    preload: {\n      type: Number,\n      default: 0,\n    },\n    /**\n     * @type {boolean}\n     */\n    useInterimTilesOnError: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  data () {\n    return {\n      currentPreload: this.preload,\n      currentUseInterimTilesOnError: this.useInterimTilesOnError,\n    }\n  },\n  watch: {\n    rev () {\n      if (!this.$layer) return\n\n      if (this.currentPreload !== this.$layer.getPreload()) {\n        this.currentPreload = this.$layer.getPreload()\n      }\n      if (this.currentUseInterimTilesOnError !== this.$layer.getUseInterimTilesOnError()) {\n        this.currentUseInterimTilesOnError = this.$layer.getUseInterimTilesOnError()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'preload',\n      'currentPreload',\n      'useInterimTilesOnError',\n      'currentUseInterimTilesOnError',\n    ]),\n  },\n  methods: {\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::layer.methods.subscribeAll()\n      this::subscribeToLayerEvents()\n    },\n    /**\n     * @returns {number}\n     */\n    getPreload () {\n      return coalesce(this.$layer?.getPreload(), this.currentPreload)\n    },\n    /**\n     * @param {number} preload\n     */\n    setPreload (preload) {\n      preload = Number(preload)\n      assert(isNumber(preload), 'Invalid preload')\n\n      if (preload !== this.currentPreload) {\n        this.currentPreload = preload\n      }\n      if (this.$layer && preload !== this.$layer.getPreload()) {\n        this.$layer.setPreload(preload)\n      }\n    },\n    /**\n     * @returns {boolean}\n     */\n    getUseInterimTilesOnError () {\n      return coalesce(this.$layer?.getUseInterimTilesOnError(), this.currentUseInterimTilesOnError)\n    },\n    /**\n     * @param {boolean} useInterimTilesOnError\n     */\n    setUseInterimTilesOnError (useInterimTilesOnError) {\n      useInterimTilesOnError = !!useInterimTilesOnError\n\n      if (useInterimTilesOnError !== this.currentUseInterimTilesOnError) {\n        this.currentUseInterimTilesOnError = useInterimTilesOnError\n      }\n      if (this.$layer && useInterimTilesOnError !== this.$layer.getUseInterimTilesOnError()) {\n        this.$layer.setUseInterimTilesOnError(useInterimTilesOnError)\n      }\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    preloadChanged (value) {\n      this.setPreload(value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    currentPreloadChanged (value) {\n      if (value === this.preload) return\n\n      this.$emit('update:preload', value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    useInterimTilesOnErrorChanged (value) {\n      this.setUseInterimTilesOnError(value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    currentUseInterimTilesOnErrorChanged (value) {\n      if (value === this.useInterimTilesOnError) return\n\n      this.$emit('update:useInterimTilesOnError', value)\n    },\n  },\n}\n\nasync function subscribeToLayerEvents () {\n  const setterKey = addPrefix('current')\n  const propChanges = obsFromOlChangeEvent(this.$layer, [\n    'preload',\n    'useInterimTilesOnError',\n  ], true, evt => ({\n    ...evt,\n    setter: this[setterKey(evt.prop)],\n  }))\n  this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n}\n","import { dumpStyle } from '../ol-ext'\nimport { clonePlainObject, isArray, isEqual, isFunction, isPlainObject, mergeDescriptors } from '../utils'\nimport layer from './layer'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport styleContainer from './style-container'\n\nexport default {\n  mixins: [\n    styleContainer,\n    layer,\n  ],\n  props: {\n    // ol/layer/BaseVector\n    /**\n     * @type {function|undefined}\n     */\n    renderOrder: Function,\n    /**\n     * @type {number}\n     */\n    renderBuffer: {\n      type: Number,\n      default: 100,\n    },\n    /**\n     * @type {boolean}\n     */\n    declutter: Boolean,\n    /**\n     * When set to `true`, feature batches will be recreated during animations.\n     * @type {boolean}\n     */\n    updateWhileAnimating: Boolean,\n    /**\n     * When set to `true`, feature batches will be recreated during interactions.\n     * @type {boolean}\n     */\n    updateWhileInteracting: Boolean,\n  },\n  computed: {\n    style () {\n      if (!(this.rev && this.$style)) return\n\n      let style = this.$style\n      if (isFunction(style)) return style\n      if (!style) return\n\n      isArray(style) || (style = [style])\n\n      return style.map(style => dumpStyle(style, geom => this.writeGeometryInDataProj(geom)))\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'renderOrder',\n      'renderBuffer',\n      'declutter',\n      'updateWhileAnimating',\n      'updateWhileInteracting',\n      'style',\n    ], [\n      'style',\n    ]),\n  },\n  methods: {\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return mergeDescriptors(\n        this::layer.methods.getServices(),\n        this::styleContainer.methods.getServices(),\n      )\n    },\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::layer.methods.subscribeAll()\n      this::subscribeToLayerEvents()\n    },\n    /**\n     * @return {StyleTarget|undefined}\n     */\n    getStyleTarget () {\n      return this.$layer\n    },\n    /**\n     * @param {number[]} pixel\n     * @return {Promise<Array<module:ol/Feature~Feature>>}\n     */\n    async getFeatures (pixel) {\n      return (await this.resolveLayer()).getFeatures(pixel)\n    },\n    /**\n     * @param {Object|Function|Array|undefined} value\n     * @param {Object|Function|Array|undefined} prev\n     * @protected\n     */\n    styleChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      if (isPlainObject(value) || isArray(value)) {\n        value = clonePlainObject(value)\n      }\n      this.$emit('update:style', value)\n    },\n  },\n}\n\nasync function subscribeToLayerEvents () {\n}\n","import { Feature, getUid } from 'ol'\nimport { all as loadAll } from 'ol/loadingstrategy'\nimport { Vector as VectorSource } from 'ol/source'\nimport {\n  getFeatureId,\n  getGeoJsonFmt,\n  initializeFeature,\n  isGeoJSONFeature,\n  roundExtent,\n  roundPointCoords,\n  transform,\n} from '../ol-ext'\nimport {\n  and,\n  clonePlainObject,\n  coalesce,\n  constant,\n  difference,\n  every,\n  forEach,\n  identity,\n  instanceOf,\n  isArray,\n  isEmpty,\n  isEqual,\n  isFunction,\n  isString,\n  map,\n  mergeDescriptors,\n  negate,\n  noop,\n  sealFactory,\n  stubArray,\n} from '../utils'\nimport featureHelper from './feature-helper'\nimport featuresContainer from './features-container'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport source from './source'\n\nconst isNotEmptyString = /*#__PURE__*/and(isString, negate(isEmpty))\n\n/**\n * Basic vector source mixin.\n */\nexport default {\n  mixins: [\n    featureHelper,\n    featuresContainer,\n    source,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  props: {\n    // ol/source/Vector\n    /**\n     * @type {Object[]}\n     */\n    features: {\n      type: Array,\n      default: stubArray,\n      validator: value => every(value, isGeoJSONFeature),\n    },\n    /**\n     * Source format factory\n     * @type {function} formatFactory\n     */\n    formatFactory: {\n      type: Function,\n      default: getGeoJsonFmt,\n    },\n    /**\n     * Feature loader.\n     * Feature loader should load features from some remote service, decode them and pas to `features` prop to render.\n     * @type {module:ol/featureloader~FeatureLoader|undefined} loader\n     */\n    loader: Function,\n    /**\n     * @deprecated Use `loader` prop instead\n     * @todo remove in v0.13.x\n     */\n    loaderFactory: Function,\n    /**\n     * Loading strategy factory.\n     * Extent here in map view projection.\n     * @type {function} strategyFactory\n     */\n    loadingStrategy: {\n      type: Function,\n      // default: loadAll,\n    },\n    /**\n     * @deprecated Use `loadingStrategy` prop instead\n     * @todo remove in v0.13.x\n     */\n    strategyFactory: Function,\n    /**\n     * String or url factory\n     * @type {string|function} url\n     */\n    url: {\n      type: [String, Function],\n      validator: value => isFunction(value) || isNotEmptyString(value),\n    },\n    /**\n     * @type {boolean}\n     */\n    overlaps: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {boolean}\n     */\n    useSpatialIndex: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  data () {\n    return {\n      /**\n       * @returns {module:ol/format/Feature~FeatureFormat|undefined}\n       */\n      format: undefined,\n      currentUrl: undefined,\n      currentLoader: undefined,\n    }\n  },\n  computed: {\n    featuresDataProj () {\n      return map(this.features, feature => initializeFeature(clonePlainObject(feature)))\n    },\n    featuresViewProj () {\n      return map(this.features, feature => initializeFeature(this.writeFeatureInViewProj(this.readFeatureInDataProj(feature))))\n    },\n    currentFeaturesDataProj () {\n      if (!this.rev) return []\n\n      return map(this.getFeatures(), feature => this.writeFeatureInDataProj(feature))\n    },\n    currentFeaturesViewProj () {\n      if (!this.rev) return []\n\n      return map(this.getFeatures(), feature => this.writeFeatureInViewProj(feature))\n    },\n    extentDataProj () {\n      return this.rev ? this.getExtent() : undefined\n    },\n    extentViewProj () {\n      return this.rev ? this.getExtent(true) : undefined\n    },\n    inputUrl () {\n      return this.createUrlFunc(this.url)\n    },\n    inputLoader () {\n      let loader = this.loader\n      if (!loader && this.loaderFactory) {\n        loader = this.loaderFactory()\n      }\n\n      return this.createLoaderFunc(loader)\n    },\n    inputLoadingStrategy () {\n      let loadingStrategy = this.loadingStrategy\n      if (!loadingStrategy && this.strategyFactory) {\n        loadingStrategy = this.strategyFactory()\n      }\n\n      return loadingStrategy || loadAll\n    },\n    formatIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'format')\n    },\n    inputFormatFactory () {\n      return sealFactory(::this.formatFactory)\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (this.currentUrl !== this.$source.getUrl()) {\n        this.currentUrl = this.$source.getUrl()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'featuresViewProj',\n      'currentFeaturesDataProj',\n      'extentDataProj',\n      'inputUrl',\n      'currentUrl',\n      'inputLoader',\n      'currentLoader',\n      'inputLoadingStrategy',\n      'inputFormatFactory',\n      'formatIdent',\n      'format',\n      'overlaps',\n      'useSpatialIndex',\n    ], [\n      'featuresViewProj',\n      'currentFeaturesDataProj',\n      'extentDataProj',\n    ]),\n  },\n  created () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.loaderFactory) {\n        this.$logger.warn(\"'loaderFactory' prop is deprecated. Use 'loader' prop instead.\")\n      }\n      if (this.strategyFactory) {\n        this.$logger.warn(\"'strategyFactory' prop is deprecated. Use 'loadingStrategy' prop instead.\")\n      }\n    }\n\n    if (isFunction(this.inputFormatFactory)) {\n      this.format = this.instanceFactoryCall(this.formatIdent, ::this.inputFormatFactory)\n    }\n    this.currentUrl = this.inputUrl\n    this.currentLoader = this.inputLoader\n  },\n  updated () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.loaderFactory) {\n        this.$logger.warn(\"'loaderFactory' prop is deprecated. Use 'loader' prop instead.\")\n      }\n      if (this.strategyFactory) {\n        this.$logger.warn(\"'strategyFactory' prop is deprecated. Use 'loadingStrategy' prop instead.\")\n      }\n    }\n  },\n  methods: {\n    /**\n     * @return {module:ol/source/Vector~VectorSource}\n     * @protected\n     */\n    createSource () {\n      return new VectorSource({\n        // ol/source/Source\n        attributions: this.currentAttributions,\n        projection: this.resolvedDataProjection,\n        wrapX: this.wrapX,\n        // ol/source/Vector\n        format: this.format,\n        loader: this.currentLoader,\n        strategy: this.inputLoadingStrategy,\n        url: this.currentUrl,\n        overlaps: this.overlaps,\n        useSpatialIndex: this.useSpatialIndex,\n        features: this.$featuresCollection,\n      })\n    },\n    /**\n     * @return {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::source.methods.getServices(),\n        {\n          get featuresContainer () { return vm },\n        },\n      )\n    },\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::source.methods.subscribeAll()\n      this::featuresContainer.methods.subscribeAll()\n      this::subscribeToSourceEvents()\n    },\n    /**\n     * @param {FeatureLike[]|module:ol/Collection~Collection<FeatureLike>} features\n     * @param {boolean} [viewProj=false]\n     */\n    addFeatures (features, viewProj = false) {\n      if (!this.$source) {\n        return this::featuresContainer.methods.addFeatures(features, viewProj)\n      }\n\n      const newFeatures = []\n      forEach(features || [], feature => {\n        feature = this.initializeFeature(feature, viewProj)\n        instanceOf(feature, Feature)\n\n        const foundFeature = this.$source.getFeatureById(getFeatureId(feature))\n        if (foundFeature) {\n          this.updateFeature(foundFeature, feature)\n        } else {\n          newFeatures.push(feature)\n        }\n      })\n\n      if (!newFeatures.length) return\n\n      this.$source.addFeatures(newFeatures)\n    },\n    /**\n     * @param {FeatureLike} feature\n     * @param {boolean} [viewProj=false]\n     */\n    addFeature (feature, viewProj = false) {\n      if (!this.$source) {\n        return this::featuresContainer.methods.addFeature(feature, viewProj)\n      }\n\n      feature = this.initializeFeature(feature, viewProj)\n      const foundFeature = this.$source.getFeatureById(getFeatureId(feature))\n      if (foundFeature == null) {\n        this.$source.addFeature(feature)\n      } else {\n        this.updateFeature(foundFeature, feature)\n      }\n    },\n    /**\n     * @param {FeatureLike[]|module:ol/Collection~Collection<FeatureLike>} features\n     */\n    removeFeatures (features) {\n      if (!this.$source) {\n        return this::featuresContainer.methods.removeFeatures(features)\n      }\n\n      let changed = false\n      forEach(features, feature => {\n        feature = this.getFeatureById(getFeatureId(feature))\n        if (!feature) return\n        const featureKey = getUid(feature)\n        if (featureKey in this.$source.nullGeometryFeatures_) {\n          delete this.$source.nullGeometryFeatures_[featureKey]\n        } else {\n          if (this.$source.featuresRtree_) {\n            this.$source.featuresRtree_.remove(feature)\n          }\n        }\n        this.$source.removeFeatureInternal(feature)\n        changed = true\n      })\n\n      if (!changed) return\n\n      this.$source.changed()\n    },\n    /**\n     * @param {FeatureLike} feature\n     */\n    removeFeature (feature) {\n      if (!this.$source) {\n        return this::featuresContainer.methods.removeFeature(feature)\n      }\n\n      feature = this.$source.getFeatureById(getFeatureId(feature?.$feature || feature))\n      if (!feature) return\n\n      this.$source.removeFeature(feature)\n    },\n    /**\n     * @param {string} featureId\n     * @return {module:ol/Feature~Feature|undefined}\n     */\n    getFeatureById (featureId) {\n      if (this.$source) {\n        return this.$source.getFeatureById(featureId)\n      }\n\n      return this::featuresContainer.methods.getFeatureById(featureId)\n    },\n    /**\n     * @return {Array<module:ol/Feature~Feature>}\n     */\n    getFeatures () {\n      return coalesce(this.$source?.getFeatures(), this::featuresContainer.methods.getFeatures())\n    },\n    /**\n     * @return {module:ol/Collection~Collection|undefined}\n     */\n    getFeaturesCollection () {\n      return coalesce(this.$source?.getFeaturesCollection(), this._featuresCollection)\n    },\n    /**\n     * @return {boolean}\n     */\n    isEmpty () {\n      return coalesce(this.$source?.isEmpty(), this.$featuresCollection.getLength() === 0)\n    },\n    /**\n     * @param {boolean} [fast]\n     * @return {Promise<void>}\n     */\n    async clear (fast) {\n      if (!this.$source) return this.clearFeatures()\n\n      const source = await this.resolveSource()\n\n      return new Promise(resolve => {\n        source.once('change', () => resolve())\n        source.clear()\n      })\n    },\n    /**\n     * @param {function} callback\n     * @returns {*}\n     */\n    forEachFeature (callback) {\n      if (this.$source) {\n        return this.$source.forEachFeature(callback)\n      }\n\n      return this::featuresContainer.methods.forEachFeature(callback)\n    },\n    /**\n     * @param {number[]} extent\n     * @param {function} callback\n     * @param {boolean} [viewProj=false]\n     * @returns {*}\n     */\n    forEachFeatureInExtent (extent, callback, viewProj = false) {\n      extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n\n      if (this.$source) {\n        return this.$source.forEachFeatureInExtent(extent, callback)\n      }\n\n      return this::featuresContainer.methods.forEachFeatureInExtent(extent, callback, true)\n    },\n    /**\n     * @param {number[]} extent\n     * @param {function} callback\n     * @param {boolean} [viewProj=false]\n     * @returns {*}\n     */\n    forEachFeatureIntersectingExtent (extent, callback, viewProj = false) {\n      extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n\n      if (this.$source) {\n        return this.$source.forEachFeatureIntersectingExtent(extent, callback)\n      }\n\n      return this::featuresContainer.methods.forEachFeatureIntersectingExtent(extent, callback, true)\n    },\n    /**\n     * @param {number[]} coordinate\n     * @param {boolean} [viewProj=false]\n     * @returns {Array<module:ol/Feature~Feature>}\n     */\n    getFeaturesAtCoordinate (coordinate, viewProj = false) {\n      coordinate = viewProj ? roundPointCoords(coordinate) : this.pointToViewProj(coordinate)\n\n      if (this.$source) {\n        return this.$source.getFeaturesAtCoordinate(coordinate)\n      }\n\n      return this::featuresContainer.methods.getFeaturesAtCoordinate(coordinate, true)\n    },\n    /**\n     * @param {number[]} extent\n     * @param {boolean} [viewProj=false]\n     * @returns {Array<module:ol/Feature~Feature>}\n     */\n    getFeaturesInExtent (extent, viewProj = false) {\n      extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n\n      if (this.$source) {\n        return this.$source.getFeaturesInExtent(extent)\n      }\n\n      return this::featuresContainer.methods.getFeaturesInExtent(extent, true)\n    },\n    /**\n     * @param {number[]} coordinate\n     * @param {function} [filter]\n     * @param {boolean} [viewProj=false]\n     * @returns {module:ol/Feature~Feature}\n     */\n    getClosestFeatureToCoordinate (coordinate, filter = identity, viewProj = false) {\n      coordinate = viewProj ? roundPointCoords(coordinate) : this.pointToViewProj(coordinate)\n\n      if (this.$source) {\n        return this.$source.getClosestFeatureToCoordinate(coordinate, filter)\n      }\n\n      return this::featuresContainer.methods.getClosestFeatureToCoordinate(coordinate, filter, true)\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @returns {number[]}\n     */\n    getExtent (viewProj = false) {\n      let extent\n      if (this.$source) {\n        extent = this.$source.getExtent()\n      } else {\n        extent = this::featuresContainer.methods.getFeaturesExtent(true)\n      }\n\n      return viewProj ? extent : this.extentToDataProj(extent)\n    },\n    /**\n     * @returns {module:ol/format/Feature~FeatureFormat|undefined}\n     */\n    getFormat () {\n      return coalesce(this.$source?.getFormat(), this.format)\n    },\n    /**\n     * @returns {Promise<string|function|undefined>}\n     */\n    getUrl () {\n      return coalesce(this.$source?.getUrl(), this.currentUrl)\n    },\n    /**\n     * @param {string|function} url\n     */\n    setUrl (url) {\n      url = this.createUrlFunc(url)\n\n      if (url !== this.currentUrl) {\n        this.currentUrl = url\n      }\n      if (this.$source && url !== this.$source.getUrl()) {\n        this.$source.setUrl(url)\n      }\n    },\n    /**\n     * @param {function} loader\n     */\n    setLoader (loader) {\n      loader = this.createLoaderFunc(loader)\n\n      if (loader !== this.currentLoader) {\n        this.currentLoader = loader\n        this.$source?.setLoader(loader)\n      }\n    },\n    /**\n     * @param {number[]} extent\n     * @param {boolean} [viewProj=false]\n     */\n    removeLoadedExtent (extent, viewProj = false) {\n      extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n      this.$source?.removeLoadedExtent(extent)\n    },\n    /**\n     * @param {string|function|undefined} url\n     * @return {function|undefined}\n     * @protected\n     */\n    createUrlFunc (url) {\n      if (!url) return\n\n      if (!isFunction(url)) {\n        url = constant(url)\n      }\n\n      return this.wrapUrlFunc(url)\n    },\n    /**\n     * @param {function} urlFunc\n     * @returns {function}\n     * @protected\n     */\n    wrapUrlFunc (urlFunc) {\n      let fn = urlFunc\n\n      if (!fn.wrapped) {\n        fn = (extent, resolution, projection) => {\n          extent = transformExtent(extent, projection, this.resolvedDataProjection)\n          projection = this.resolvedDataProjection\n\n          return urlFunc(extent, resolution, projection)\n        }\n        fn.wrapped = true\n      }\n\n      return fn\n    },\n    /**\n     * @param {function|undefined} loader\n     * @return {function|undefined}\n     * @protected\n     */\n    createLoaderFunc (loader) {\n      if (!isFunction(loader)) return\n\n      return this.wrapLoaderFunc(loader)\n    },\n    /**\n     * @param {function} loaderFunc\n     * @returns {Function}\n     * @protected\n     */\n    wrapLoaderFunc (loaderFunc) {\n      let fn = loaderFunc\n\n      if (!fn.wrapped) {\n        fn = async (extent, resolution, projection) => {\n          let features = await loaderFunc(\n            transformExtent(extent, projection, this.resolvedDataProjection),\n            resolution,\n            this.resolvedDataProjection,\n          )\n          if (!(isArray(features) && features[0] instanceof Feature)) {\n            features = this.readSource(features)\n          }\n          if (isArray(features)) {\n            this.addFeatures(features)\n          }\n        }\n        fn.wrapped = true\n      }\n\n      return fn\n    },\n    /**\n     * @param {*} data\n     * @returns {Array<module:ol/Feature~Feature>}\n     */\n    readSource (data) {\n      return this.getFormat().readFeatures(data, {\n        featureProjection: this.resolvedViewProjection,\n        dataProjection: this.resolvedDataProjection,\n      })\n    },\n    /**\n     * @param {GeoJSONFeature[]} value\n     * @protected\n     */\n    featuresViewProjChanged (value) {\n      // add new features\n      this.addFeatures(value, true)\n      // remove non-matched features\n      this.removeFeatures(difference(\n        this.getFeatures(),\n        value,\n        (a, b) => getFeatureId(a) === getFeatureId(b),\n      ))\n    },\n    /**\n     * @param {GeoJSONFeature[]} value\n     * @protected\n     */\n    currentFeaturesDataProjChanged (value) {\n      if (isEqual(value, this.featuresDataProj)) return\n\n      this.$emit('update:features', clonePlainObject(value))\n    },\n    /**\n     * @param {number[]|undefined} value\n     * @param {number[]|undefined} prev\n     * @protected\n     */\n    extentDataProjChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:extent', value?.slice())\n    },\n    /**\n     * @param {string|function|undefined} value\n     * @protected\n     */\n    inputUrlChanged (value) {\n      this.setUrl(value)\n    },\n    /**\n     * @param {string|function|undefined} value\n     * @protected\n     */\n    currentUrlChanged (value) {\n      if (value === this.inputUrl) return\n\n      this.$emit('update:url', value)\n    },\n    /**\n     * @param {function|undefined} value\n     * @protected\n     */\n    inputLoaderChanged (value) {\n      this.setLoader(value)\n    },\n    /**\n     * @param {function|undefined} value\n     * @protected\n     */\n    currentLoaderChanged (value) {\n      if (value === this.inputLoader) return\n\n      this.$emit('update:loader', value)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    formatIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.format) {\n        this.setInstance(value, this.format)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n    /**\n     * @param {function} value\n     * @protected\n     */\n    inputFormatFactoryChanged (value) {\n      while (this.hasInstance(this.formatIdent)) {\n        this.unsetInstance(this.formatIdent)\n      }\n\n      if (isFunction(value)) {\n        this.format = this.instanceFactoryCall(this.formatIdent, this::value)\n      } else {\n        this.format = undefined\n      }\n    },\n    // skip not used watchers\n    attributionsCollapsibleChanged: noop,\n    stateChanged: noop,\n  },\n}\n\nfunction subscribeToSourceEvents () {\n}\n\nfunction transformExtent (extent, sourceProj, destProj) {\n  extent = extent.slice()\n  if (isFinite(extent[0]) && isFinite(extent[1])) {\n    [extent[0], extent[1]] = transform([extent[0], extent[1]], sourceProj, destProj)\n  }\n  if (isFinite(extent[2]) && isFinite(extent[3])) {\n    [extent[2], extent[3]] = transform([extent[2], extent[3]], sourceProj, destProj)\n  }\n  return extent\n}\n","/**\n * @module ol/source/WMSServerType\n */\n/**\n * Available server types: `'carmentaserver'`, `'geoserver'`, `'mapserver'`,\n *     `'qgis'`. These are servers that have vendor parameters beyond the WMS\n *     specification that OpenLayers can make use of.\n * @enum {string}\n */\nexport default {\n    /**\n     * HiDPI support for [Carmenta Server](https://www.carmenta.com/en/products/carmenta-server)\n     * @api\n     */\n    CARMENTA_SERVER: 'carmentaserver',\n    /**\n     * HiDPI support for [GeoServer](https://geoserver.org/)\n     * @api\n     */\n    GEOSERVER: 'geoserver',\n    /**\n     * HiDPI support for [MapServer](https://mapserver.org/)\n     * @api\n     */\n    MAPSERVER: 'mapserver',\n    /**\n     * HiDPI support for [QGIS](https://qgis.org/)\n     * @api\n     */\n    QGIS: 'qgis',\n};\n//# sourceMappingURL=WMSServerType.js.map","import WMSServerType from 'ol/source/WMSServerType'\nimport { cleanSourceParams } from '../ol-ext'\nimport {\n  clonePlainObject,\n  coalesce,\n  hasProp,\n  isArray,\n  isEqual, isObjectLike,\n  lowerFirst,\n  makeWatchers,\n  reduce,\n  upperFirst,\n} from '../utils'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\n\nconst cleanWmsSourceParams = params => cleanSourceParams(params, [\n  'LAYERS',\n  'VERSION',\n  'STYLES',\n  'FORMAT',\n  'TRANSPARENT',\n  'BGCOLOR',\n  'TIME',\n])\n\n/**\n * Basic WMS params and methods mixin.\n */\nexport default {\n  props: {\n    /**\n     * @type {boolean}\n     */\n    hidpi: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {string|undefined}\n     */\n    serverType: {\n      type: String,\n      validator: value => Object.values(WMSServerType).includes(value),\n    },\n    /**\n     * @type {string|string[]}\n     */\n    layers: {\n      type: String,\n      required: true,\n    },\n    /**\n     * WMS Request styles\n     * @type {string|string[]|undefined}\n     */\n    styles: String,\n    /**\n     * @type {string}\n     */\n    version: {\n      type: String,\n      default: '1.3.0',\n    },\n    /**\n     * @type {boolean}\n     */\n    transparent: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {string}\n     */\n    format: {\n      type: String,\n      default: 'image/png',\n    },\n    /**\n     * @type {string|undefined}\n     */\n    bgColor: String,\n    /**\n     * @type {string|undefined}\n     */\n    time: String,\n    /**\n     * Additional WMS request parameters\n     * @type {Object|undefined}\n     */\n    params: Object,\n  },\n  data () {\n    return {\n      currentParams: undefined,\n    }\n  },\n  computed: {\n    /**\n     * @returns {string}\n     */\n    inputLayers () {\n      return isArray(this.layers) ? this.layers.join(',') : this.layers\n    },\n    /**\n     * @returns {string|undefined}\n     */\n    inputStyles () {\n      return isArray(this.styles) ? this.styles.join(',') : this.styles\n    },\n    /**\n     * @returns {Object|null}\n     */\n    customParams () {\n      return this.params ? cleanWmsSourceParams(this.params) : undefined\n    },\n    /**\n     * @returns {Object}\n     */\n    inputParams () {\n      return {\n        ...this.customParams || {},\n        LAYERS: this.inputLayers,\n        STYLES: this.inputStyles,\n        VERSION: this.version,\n        FORMAT: this.format,\n        TRANSPARENT: this.transparent,\n        BGCOLOR: this.bgColor,\n        TIME: this.time,\n      }\n    },\n    .../*#__PURE__*/reduce([\n      'inputLayers',\n      'inputStyles',\n      'version',\n      'format',\n      'transparent',\n      'bgColor',\n      'time',\n    ], (props, inProp) => {\n      const prop = inProp.slice(0, 5) === 'input' ? lowerFirst(inProp.slice(5)) : inProp\n      const curProp = 'current' + upperFirst(prop)\n      props[curProp] = function () {\n        return coalesce((this.currentParams || {})[prop.toUpperCase()], (this.inputParams || {})[prop.toUpperCase()])\n      }\n\n      return props\n    }, {}),\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (!isEqual(this.currentParams, this.$source.getParams())) {\n        this.currentParams = this.$source.getParams()\n      }\n    },\n    .../*#__PURE__*/makeWatchers([\n      'currentLayers',\n      'currentStyles',\n      'currentVersion',\n      'currentFormat',\n      'currentTransparent',\n      'currentBgColor',\n      'currentTime',\n    ], curProp => function (value) {\n      const prop = lowerFirst(curProp.slice(7))\n      const inProp = hasProp(this, 'input' + upperFirst(prop)) ? 'input' + upperFirst(prop) : prop\n\n      if (isEqual(value, this[inProp])) return\n\n      this.$emit('update:' + prop, isObjectLike(value) ? clonePlainObject(value) : value)\n    }),\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'hidpi',\n      'serverType',\n      'inputParams',\n      'currentParams',\n    ], [\n      'inputParams',\n      'currentParams',\n    ]),\n  },\n  created () {\n    this.currentParams = this.inputParams && clonePlainObject(this.inputParams)\n  },\n  methods: {\n    /**\n     * @param {number[]} coordinate\n     * @param {number} [resolution]\n     * @param {string} [projection]\n     * @param {Object|undefined} [params] GetFeatureInfo params. `info_format` at least should be provided.\n     *                          If `query_layers` is not provided then the layers specified in the `layers` prop will be used.\n     *                          `version` should not be specified here (value from `version` prop will be used).\n     * @return {Promise<string|undefined>}\n     */\n    async getFeatureInfoUrl (coordinate, resolution, projection, params = {}) {\n      resolution || (resolution = this.$viewVm?.getResolution())\n      projection || (projection = this.resolvedDataProjection)\n\n      return (await this.resolveSource()).getFeatureInfoUrl(coordinate, resolution, projection, params)\n    },\n    /**\n     * @param {number} resolution\n     * @param {Object|undefined} [params]\n     * @return {Promise<string|undefined>}\n     */\n    async getLegendUrl (resolution, params = {}) {\n      return (await this.resolveSource()).getLegendUrl(resolution, params)\n    },\n    /**\n     * @returns {Object}\n     */\n    getParams () {\n      return coalesce(this.$source?.getParams(), this.currentParams)\n    },\n    /**\n     * @param {Object} params\n     */\n    updateParams (params) {\n      params = reduce({ ...this.currentParams, ...params }, (params, value, name) => ({\n        ...params,\n        [name.toUpperCase()]: value,\n      }), {})\n\n      if (!isEqual(params, this.currentParams)) {\n        this.currentParams = params\n      }\n      if (this.$source && !isEqual(params, this.$source.getParams())) {\n        this.$source.updateParams(params)\n      }\n    },\n    /**\n     * @param {string} param\n     * @param {*} value\n     */\n    updateParam (param, value) {\n      this.updateParams({ [param.toUpperCase()]: value })\n    },\n    /**\n     * @param {Object|undefined} value\n     * @protected\n     */\n    inputParamsChanged (value) {\n      this.updateParams(value)\n    },\n    /**\n     * @param {Object|undefined} value\n     * @protected\n     */\n    currentParamsChanged (value) {\n      value = value ? cleanWmsSourceParams(value) : undefined\n      if (isEqual(value, this.customParams)) return\n\n      this.$emit('update:params', value && clonePlainObject(value))\n    },\n  },\n}\n","/*!\nOpenLayers tile url function to load tile seeded with TileCache url scheme\n\n@package ol-tilecache\n@author Vladimir Vershinin <ghettovoice@gmail.com>\n@version 7.0.0\n@licence MIT\n@copyright (c) 2016-2020, Vladimir Vershinin <ghettovoice@gmail.com>\n*/\nimport _typeof from '@babel/runtime/helpers/typeof';\nimport { createXYZ } from 'ol/tilegrid';\n\n/**\n * This file is part of ol-tilecache package.\n * @module ol-tilecache\n * @license MIT\n * @author Vladimir Vershinin\n */\n\n/**\n * Left zero pad.\n *\n * @param {string | number} num\n * @param {number} places\n * @returns {string}\n */\nfunction zeroPad(num, places) {\n  var zero = places - num.toString().length + 1;\n  return (new Array(parseInt(zero > 0 && zero, 10)).join(\"0\") + num).toString().slice(-places);\n}\n/**\n * The % operator in JavaScript returns the remainder of a / b, but differs from\n * some other languages in that the result will have the same sign as the\n * dividend. For example, -1 % 8 == -1, whereas in some other languages\n * (such as Python) the result would be 7. This function emulates the more\n * correct modulo behavior, which is useful for certain applications such as\n * calculating an offset index in a circular list.\n *\n * @param {number} a The dividend.\n * @param {number} b The divisor.\n * @return {number} a % b where the result is between 0 and b (either 0 <= x < b\n *     or b < x <= 0, depending on the sign of b).\n * @link https://closure-library.googlecode.com/git-history/docs/local_closure_goog_math_math.js.source.html#line73\n */\n\nfunction modulo(a, b) {\n  var m = a % b;\n  return m * b < 0 ? m + b : m;\n}\n\n/**\n * This file is part of ol-tilecache package.\n * @module ol-tilecache\n * @license MIT\n * @author Vladimir Vershinin\n */\nvar zRegEx = /{z}/g;\nvar zPadRegEx = /{0z}/g;\nvar xRegEx = /{x\\d?}/g;\nvar yRegEx = /{y\\d?}/g;\nvar dashYRegEx = /{-y\\d?}/g;\n/**\n * Basic create factory.\n *\n * @param {string} url Url template\n * @param {TileGrid} [tileGrid] Tile grid.\n * @returns {function(tileCoord: TileCoord)}\n * @static\n * @public\n */\n\nfunction createTileUrlFunction(url) {\n  var tileGrid = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createXYZ();\n  return createTileUrlFunctionFromTemplates(expandUrl(url), tileGrid);\n}\n/**\n * Creates tile URL function from single template.\n *\n * @param {string} template Source url\n * @param {TileGrid} [tileGrid] Tile grid.\n * @returns {function(tileCoord: TileCoord)}\n * @private\n */\n\nfunction createTileUrlFunctionFromTemplate(template) {\n  var tileGrid = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createXYZ();\n  return (\n    /**\n     * @param {TileCoord} tileCoord Tile Coordinate.\n     * @return {string | undefined} Tile URL.\n     */\n    function (tileCoord) {\n      if (tileCoord != null) {\n        return template.replace(zRegEx, zoomReplacer(tileCoord[0])).replace(zPadRegEx, zoomReplacer(tileCoord[0], true)).replace(xRegEx, coordReplacer(tileCoord[1])).replace(yRegEx, coordReplacer(tileCoord[2])).replace(dashYRegEx, function (part) {\n          var z = tileCoord[0];\n          var range = tileGrid.getFullTileRange(z);\n          if (!range) throw new Error('The {-y} placeholder requires a tile grid with extent.');\n          var y = range.getHeight() - tileCoord[2] - 1;\n          return coordReplacer(y)(part);\n        });\n      }\n    }\n  );\n}\n/**\n * Creates tile URL function from multiple templates.\n *\n * @param {string[]} templates Url templates\n * @param {TileGrid} [tileGrid] Tile grid.\n * @returns {function(tileCoord: TileCoord)}\n * @private\n */\n\nfunction createTileUrlFunctionFromTemplates(templates) {\n  var tileGrid = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createXYZ();\n  return createTileUrlFunctionFromTileUrlFunctions(templates.map(function (tileUrlFunction) {\n    return createTileUrlFunctionFromTemplate(tileUrlFunction, tileGrid);\n  }));\n}\n/**\n * @param zoom\n * @param pad\n * @returns {function}\n * @private\n */\n\nfunction zoomReplacer(zoom, pad) {\n  return function () {\n    return pad ? zeroPad(zoom, 2) : zoom.toString();\n  };\n}\n/**\n * @param coord\n * @returns {function}\n * @private\n */\n\n\nfunction coordReplacer(coord) {\n  return function (part) {\n    var match = part.match(/\\d/);\n\n    if (match) {\n      return zeroPad(coord, 9).slice((match[0] - 1) * 3, match[0] * 3);\n    }\n\n    return coord.toString();\n  };\n}\n/**\n * @param {string} url\n * @returns {Array.<string>}\n * @private\n */\n\n\nfunction expandUrl(url) {\n  var urls = [];\n  var match = /{(\\d)-(\\d)}/.exec(url) || /{([a-z])-([a-z])}/.exec(url);\n\n  if (match) {\n    var startCharCode = match[1].charCodeAt(0);\n    var stopCharCode = match[2].charCodeAt(0);\n\n    for (var charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n      urls.push(url.replace(match[0], String.fromCharCode(charCode)));\n    }\n  } else {\n    urls.push(url);\n  }\n\n  return urls;\n}\n/**\n * @param {Array.<function(tileCoord: TileCoord)>} tileUrlFunctions\n * @returns {function(tileCoord: TileCoord)}\n * @private\n */\n\n\nfunction createTileUrlFunctionFromTileUrlFunctions(tileUrlFunctions) {\n  if (tileUrlFunctions.length === 1) {\n    return tileUrlFunctions[0];\n  }\n\n  return (\n    /**\n     * @param {TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {Projection} projection Projection.\n     * @return {string | undefined} Tile URL.\n     */\n    function (tileCoord, pixelRatio, projection) {\n      if (tileCoord != null) {\n        var h = (tileCoord[1] << tileCoord[0]) + tileCoord[2];\n        var index = modulo(h, tileUrlFunctions.length);\n        return tileUrlFunctions[index](tileCoord, pixelRatio, projection);\n      }\n    }\n  );\n}\n\nif (typeof window !== 'undefined' && _typeof(window.ol) === 'object') {\n  window.ol.tileCacheUrlFn = {\n    createTileUrlFunction: createTileUrlFunction,\n    createTileUrlFunctionFromTemplate: createTileUrlFunctionFromTemplate,\n    createTileUrlFunctionFromTemplates: createTileUrlFunctionFromTemplates\n  };\n}\n\nexport { createTileUrlFunction, createTileUrlFunctionFromTemplate, createTileUrlFunctionFromTemplates };\n//# sourceMappingURL=ol-tilecache.esm.js.map\n","import { createTileUrlFunctionFromTemplates } from 'ol-tilecache'\nimport { XYZ as XYZSource } from 'ol/source'\nimport { createXYZ } from 'ol/tilegrid'\nimport { EPSG_3857, extentFromProjection } from '../ol-ext'\nimport { and, coalesce, isArray, isFunction, isNumber, noop, or } from '../utils'\nimport source from './source'\nimport tileImageSource from './tile-image-source'\n\nconst validateMinZoom = value => value >= 0\nconst validateTileSize = /*#__PURE__*/or(isNumber, and(isArray, value => value.length === 2 && value.every(isNumber)))\n/**\n * Base XYZ source mixin.\n */\nexport default {\n  mixins: [\n    tileImageSource,\n  ],\n  props: {\n    /* eslint-disable vue/require-prop-types */\n    // ol/source/Source\n    projection: {\n      ...source.props.projection,\n      default: EPSG_3857,\n    },\n    /* eslint-enable vue/require-prop-types */\n    // ol/source/XYZ\n    maxZoom: {\n      type: Number,\n      default: 42,\n    },\n    minZoom: {\n      type: Number,\n      default: 0,\n      validator: validateMinZoom,\n    },\n    maxResolution: Number,\n    tileSize: {\n      type: [Number, Array],\n      default: () => [256, 256],\n      validator: validateTileSize,\n    },\n  },\n  computed: {\n    inputTileSize () {\n      return isArray(this.tileSize) ? this.tileSize.slice() : [this.tileSize, this.tileSize]\n    },\n    derivedTileGridFactory () {\n      if (isFunction(this.tileGridFactory)) {\n        return this.tileGridFactory\n      }\n\n      const extent = extentFromProjection(this.resolvedDataProjection)\n      const maxZoom = this.maxZoom\n      const minZoom = this.minZoom\n      const maxResolution = this.maxResolution\n      const tileSize = this.inputTileSize\n\n      return () => createXYZ({ extent, maxZoom, minZoom, maxResolution, tileSize })\n    },\n    inputTileUrlFunction () {\n      const urlFunc = coalesce(this.tileUrlFunction, this.tileUrlFunc)\n      if (isFunction(urlFunc)) return urlFunc\n      if (this.currentUrls.length === 0) return\n\n      return createTileUrlFunctionFromTemplates(this.currentUrls, this.tileGrid)\n    },\n  },\n  methods: {\n    /**\n     * @return {module:ol/source/XYZ~XYZSource}\n     * @protected\n     */\n    createSource () {\n      return new XYZSource({\n        // ol/source/Source\n        attributions: this.currentAttributions,\n        attributionsCollapsible: this.attributionsCollapsible,\n        projection: this.resolvedDataProjection,\n        wrapX: this.wrapX,\n        // ol/source/Tile\n        cacheSize: this.cacheSize,\n        opaque: this.opaque,\n        tilePixelRatio: this.tilePixelRatio,\n        transition: this.transition,\n        zDirection: this.zDirection,\n        tileGrid: this.tileGrid,\n        // ol/source/UrlTile\n        tileLoadFunction: this.currentTileLoadFunction,\n        tileUrlFunction: this.currentTileUrlFunction,\n        // ol/source/TileImage\n        crossOrigin: this.crossOrigin,\n        reprojectionErrorThreshold: this.reprojectionErrorThreshold,\n        tileClass: this.tileClass,\n        imageSmoothing: this.imageSmoothing,\n      })\n    },\n    tileKeyChanged: noop, // input tileKey is not allowed in XYZ constructor\n    stateChanged: noop, // input state is not allowed in XYZ constructor\n  },\n}\n","function normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\r\n    if (typeof shadowMode !== 'boolean') {\r\n        createInjectorSSR = createInjector;\r\n        createInjector = shadowMode;\r\n        shadowMode = false;\r\n    }\r\n    // Vue.extend constructor export interop.\r\n    const options = typeof script === 'function' ? script.options : script;\r\n    // render functions\r\n    if (template && template.render) {\r\n        options.render = template.render;\r\n        options.staticRenderFns = template.staticRenderFns;\r\n        options._compiled = true;\r\n        // functional template\r\n        if (isFunctionalTemplate) {\r\n            options.functional = true;\r\n        }\r\n    }\r\n    // scopedId\r\n    if (scopeId) {\r\n        options._scopeId = scopeId;\r\n    }\r\n    let hook;\r\n    if (moduleIdentifier) {\r\n        // server build\r\n        hook = function (context) {\r\n            // 2.3 injection\r\n            context =\r\n                context || // cached call\r\n                    (this.$vnode && this.$vnode.ssrContext) || // stateful\r\n                    (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional\r\n            // 2.2 with runInNewContext: true\r\n            if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\r\n                context = __VUE_SSR_CONTEXT__;\r\n            }\r\n            // inject component styles\r\n            if (style) {\r\n                style.call(this, createInjectorSSR(context));\r\n            }\r\n            // register component module identifier for async chunk inference\r\n            if (context && context._registeredComponents) {\r\n                context._registeredComponents.add(moduleIdentifier);\r\n            }\r\n        };\r\n        // used by ssr in case component is cached and beforeCreate\r\n        // never gets called\r\n        options._ssrRegister = hook;\r\n    }\r\n    else if (style) {\r\n        hook = shadowMode\r\n            ? function (context) {\r\n                style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));\r\n            }\r\n            : function (context) {\r\n                style.call(this, createInjector(context));\r\n            };\r\n    }\r\n    if (hook) {\r\n        if (options.functional) {\r\n            // register for functional component in vue file\r\n            const originalRender = options.render;\r\n            options.render = function renderWithStyleInjection(h, context) {\r\n                hook.call(context);\r\n                return originalRender(h, context);\r\n            };\r\n        }\r\n        else {\r\n            // inject component registration as beforeCreate hook\r\n            const existing = options.beforeCreate;\r\n            options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\r\n        }\r\n    }\r\n    return script;\r\n}\n\nexport default normalizeComponent;\n//# sourceMappingURL=normalize-component.mjs.map\n","<script>\n  import { BingMaps as BingMapsSource } from 'ol/source'\n  import { makeChangeOrRecreateWatchers, tileImageSource } from '../../mixins'\n  import { coalesce, noop } from '../../utils'\n\n  export default {\n    name: 'VlSourceBingmaps',\n    mixins: [\n      tileImageSource,\n    ],\n    props: {\n      // ol/source/BingMaps\n      /**\n       * Enables hidpi tiles.\n       * @type {boolean}\n       */\n      hidpi: {\n        type: Boolean,\n        default: false,\n      },\n      /**\n       * Culture code.\n       * @type {string}\n       */\n      culture: {\n        type: String,\n        default: 'en-us',\n      },\n      /**\n       * Bing Maps API key.\n       * @type {string}\n       */\n      apiKey: {\n        type: String,\n        required: true,\n      },\n      /**\n       * Type of imagery.\n       * @type {string}\n       */\n      imagerySet: {\n        type: String,\n        required: true,\n      },\n      /**\n       * @type {number}\n       */\n      maxZoom: {\n        type: Number,\n        default: 21,\n      },\n    },\n    computed: {\n      tileGridIdent: noop,\n      inputTileGridFactory: noop,\n      inputUrl: noop,\n      inputUrls: noop,\n      inputTileUrlFunction: noop,\n      inputAttributions: noop,\n    },\n    watch: {\n      .../*#__PURE__*/makeChangeOrRecreateWatchers([\n        'hidpi',\n        'culture',\n        'apiKey',\n        'imagerySet',\n        'maxZoom',\n      ]),\n    },\n    methods: {\n      /**\n       * @return {module:ol/source/BingMaps}\n       * @protected\n       */\n      createSource () {\n        return new BingMapsSource({\n          // ol/source/Source\n          wrapX: this.wrapX,\n          // ol/source/Tile\n          cacheSize: this.cacheSize,\n          opaque: this.opaque,\n          transition: this.transition,\n          // ol/source/UrlTile\n          tileLoadFunction: this.currentTileLoadFunction,\n          // ol/source/TileImage\n          reprojectionErrorThreshold: this.reprojectionErrorThreshold,\n          imageSmoothing: this.imageSmoothing,\n          // ol/source/BingMaps\n          hidpi: this.hidpi,\n          culture: this.culture,\n          key: this.apiKey,\n          imagerySet: this.imagerySet,\n          maxZoom: this.maxZoom,\n        })\n      },\n      getApiKey () {\n        return coalesce(this.$source?.getApiKey(), this.apiKey)\n      },\n      getImagerySet () {\n        return coalesce(this.$source?.getImagerySet(), this.imagerySet)\n      },\n      stateChanged: noop,\n      attributionsCollapsibleChanged: noop,\n      projectionChanged: noop,\n      tileGridIdentChanged: noop,\n      inputTileGridFactoryChanged: noop,\n      tileGridChanged: noop,\n      tileKeyChanged: noop,\n      tilePixelRatioChanged: noop,\n      zDirectionChanged: noop,\n      inputTileUrlFunctionChanged: noop,\n      inputUrlsChanged: noop,\n      crossOriginChanged: noop,\n      tileClassChanged: noop,\n    },\n  }\n</script>\n","\nimport { BingMaps as BingMapsSource } from 'ol/source'\nimport { makeChangeOrRecreateWatchers, tileImageSource } from '../../mixins'\nimport { coalesce, noop } from '../../utils'\n\nexport default {\n  name: 'VlSourceBingmaps',\n  mixins: [\n    tileImageSource,\n  ],\n  props: {\n    // ol/source/BingMaps\n    /**\n     * Enables hidpi tiles.\n     * @type {boolean}\n     */\n    hidpi: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * Culture code.\n     * @type {string}\n     */\n    culture: {\n      type: String,\n      default: 'en-us',\n    },\n    /**\n     * Bing Maps API key.\n     * @type {string}\n     */\n    apiKey: {\n      type: String,\n      required: true,\n    },\n    /**\n     * Type of imagery.\n     * @type {string}\n     */\n    imagerySet: {\n      type: String,\n      required: true,\n    },\n    /**\n     * @type {number}\n     */\n    maxZoom: {\n      type: Number,\n      default: 21,\n    },\n  },\n  computed: {\n    tileGridIdent: noop,\n    inputTileGridFactory: noop,\n    inputUrl: noop,\n    inputUrls: noop,\n    inputTileUrlFunction: noop,\n    inputAttributions: noop,\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'hidpi',\n      'culture',\n      'apiKey',\n      'imagerySet',\n      'maxZoom',\n    ]),\n  },\n  methods: {\n    /**\n     * @return {module:ol/source/BingMaps}\n     * @protected\n     */\n    createSource () {\n      return new BingMapsSource({\n        // ol/source/Source\n        wrapX: this.wrapX,\n        // ol/source/Tile\n        cacheSize: this.cacheSize,\n        opaque: this.opaque,\n        transition: this.transition,\n        // ol/source/UrlTile\n        tileLoadFunction: this.currentTileLoadFunction,\n        // ol/source/TileImage\n        reprojectionErrorThreshold: this.reprojectionErrorThreshold,\n        imageSmoothing: this.imageSmoothing,\n        // ol/source/BingMaps\n        hidpi: this.hidpi,\n        culture: this.culture,\n        key: this.apiKey,\n        imagerySet: this.imagerySet,\n        maxZoom: this.maxZoom,\n      })\n    },\n    getApiKey () {\n      return coalesce(this.$source?.getApiKey(), this.apiKey)\n    },\n    getImagerySet () {\n      return coalesce(this.$source?.getImagerySet(), this.imagerySet)\n    },\n    stateChanged: noop,\n    attributionsCollapsibleChanged: noop,\n    projectionChanged: noop,\n    tileGridIdentChanged: noop,\n    inputTileGridFactoryChanged: noop,\n    tileGridChanged: noop,\n    tileKeyChanged: noop,\n    tilePixelRatioChanged: noop,\n    zDirectionChanged: noop,\n    inputTileUrlFunctionChanged: noop,\n    inputUrlsChanged: noop,\n    crossOriginChanged: noop,\n    tileClassChanged: noop,\n  },\n}\n","import { pick } from '../../utils'\nimport Source from './source.vue'\n\n/**\n * @param {Vue} Vue\n * @param {VueLayersOptions} [options]\n */\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Source, options)\n\n  Vue.component(Source.name, Source)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Source,\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Cluster as ClusterSource, Source } from 'ol/source'\nimport { makeChangeOrRecreateWatchers, vectorSource } from '../../mixins'\nimport { createPointGeom, findPointOnSurface, getSourceId } from '../../ol-ext'\nimport { assert, clonePlainObject, coalesce, isNumber, mergeDescriptors, noop } from '../../utils'\nimport InnerSource from './inner-source.vue'\n\nexport default {\n  name: 'VlSourceCluster',\n  components: {\n    InnerSource,\n  },\n  mixins: [\n    vectorSource,\n  ],\n  props: {\n    distance: {\n      type: Number,\n      default: 20,\n    },\n    geometryFunction: {\n      type: Function,\n      // default: defaultGeomFunc,\n    },\n    /**\n     * @deprecated\n     * @todo remove later\n     */\n    geomFunc: Function,\n    /**\n     * @deprecated Use geomFunc prop instead.\n     * @todo remove in v0.13.x\n     */\n    geomFuncFactory: Function,\n  },\n  data () {\n    return {\n      currentDistance: this.distance,\n    }\n  },\n  computed: {\n    inputGeometryFunction () {\n      let geomFunc = this.geometryFunction || this.geomFunc\n      if (!geomFunc && this.geomFuncFactory) {\n        geomFunc = this.geomFuncFactory()\n      }\n\n      return geomFunc || defaultGeomFunc\n    },\n    innerSource () {\n      if (!(this.rev && this.$innerSource)) return\n\n      return {\n        id: getSourceId(this.$innerSource),\n        type: this.$innerSource.constructor.name,\n      }\n    },\n    inputUrl: noop,\n    inputLoader: noop,\n    inputLoadingStrategy: noop,\n    formatIdent: noop,\n    inputFormatFactory: noop,\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (this.currentDistance !== this.$source.getDistance()) {\n        this.currentDistance = this.$source.getDistance()\n      }\n    },\n    distance (value) {\n      this.setDistance(value)\n    },\n    currentDistance (value) {\n      if (value === this.distance) return\n\n      this.$emit('update:distance', value)\n    },\n    innerSource: {\n      deep: true,\n      handler (value, prev) {\n        if (value === prev) return\n\n        this.$emit('update:innerSource', value && clonePlainObject(value))\n      },\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'inputGeometryFunction',\n    ]),\n  },\n  created () {\n    if ('production' !== 'production') {\n      if (this.geomFuncFactory) {\n        this.$logger.warn(\"'geomFuncFactory' prop is deprecated. Use 'geometryFunction' prop instead.\")\n      }\n      if (this.geomFunc) {\n        this.$logger.warn(\"'geomFunc' prop is deprecated. Use 'geometryFunction' prop instead.\")\n      }\n    }\n\n    this._innerSource = undefined\n    this._innerSourceVm = undefined\n\n    this::defineServices()\n  },\n  updated () {\n    if ('production' !== 'production') {\n      if (this.geomFuncFactory) {\n        this.$logger.warn(\"'geomFuncFactory' prop is deprecated. Use 'geometryFunction' prop instead.\")\n      }\n      if (this.geomFunc) {\n        this.$logger.warn(\"'geomFunc' prop is deprecated. Use 'geometryFunction' prop instead.\")\n      }\n    }\n  },\n  methods: {\n    createSource () {\n      return new ClusterSource({\n        // ol/source/Source\n        attributions: this.currentAttributions,\n        wrapX: this.wrapX,\n        // ol/source/Cluster\n        source: this.$innerSource,\n        distance: this.currentDistance,\n        geometryFunction: this.inputGeometryFunction,\n      })\n    },\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::vectorSource.methods.getServices(),\n        {\n          get innerSourceContainer () { return vm },\n        },\n      )\n    },\n    getDistance () {\n      return coalesce(this.$source?.getDistance(), this.currentDistance)\n    },\n    setDistance (distance) {\n      assert(isNumber(distance), 'Invalid distance')\n\n      if (distance !== this.currentDistance) {\n        this.currentDistance = distance\n      }\n      if (this.$source && distance !== this.$source.getDistance()) {\n        this.$source.setDistance(distance)\n      }\n    },\n    getInnerSource () {\n      return this._innerSource\n    },\n    getInnerSourceVm () {\n      return this._innerSourceVm\n    },\n    setInnerSource (innerSource) {\n      innerSource = innerSource?.$source || innerSource\n      assert(!innerSource || innerSource instanceof Source)\n      innerSource || (innerSource = undefined)\n\n      if (innerSource !== this._innerSource) {\n        this._innerSource = innerSource\n        this._innerSourceVm = innerSource?.vm && innerSource.vm[0]\n        this.scheduleRefresh()\n      }\n      if (this.$source && innerSource !== this.$source.getSource()) {\n        this.$source.setSource(innerSource)\n        this.scheduleRefresh()\n      }\n    },\n    projectionChanged: noop,\n    inputUrlChanged: noop,\n    inputLoaderChanged: noop,\n    inputLoadingStrategyChanged: noop,\n    inputFormatFactoryChanged: noop,\n    formatIdentChanged: noop,\n    formatChanged: noop,\n    overlapsChanged: noop,\n    useSpatialIndexChanged: noop,\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $innerSource: {\n      enumerable: true,\n      get: this.getInnerSource,\n    },\n    $innerSourceVm: {\n      enumerable: true,\n      get: this.getInnerSourceVm,\n    },\n  })\n}\n\nfunction defaultGeomFunc (feature) {\n  const geometry = feature.getGeometry()\n  if (!geometry) return\n\n  const coordinate = findPointOnSurface(geometry)\n  if (coordinate) {\n    return createPointGeom(coordinate)\n  }\n}\n","<template>\n  <i\n    :id=\"vmId\"\n    :class=\"vmClass\"\n    style=\"display: none !important;\">\n    <InnerSource :id=\"'vl-' + currentId + '-inner-source'\">\n      <slot />\n    </InnerSource>\n  </i>\n</template>\n\n<script>\n  import { Cluster as ClusterSource, Source } from 'ol/source'\n  import { makeChangeOrRecreateWatchers, vectorSource } from '../../mixins'\n  import { createPointGeom, findPointOnSurface, getSourceId } from '../../ol-ext'\n  import { assert, clonePlainObject, coalesce, isNumber, mergeDescriptors, noop } from '../../utils'\n  import InnerSource from './inner-source.vue'\n\n  export default {\n    name: 'VlSourceCluster',\n    components: {\n      InnerSource,\n    },\n    mixins: [\n      vectorSource,\n    ],\n    props: {\n      distance: {\n        type: Number,\n        default: 20,\n      },\n      geometryFunction: {\n        type: Function,\n        // default: defaultGeomFunc,\n      },\n      /**\n       * @deprecated\n       * @todo remove later\n       */\n      geomFunc: Function,\n      /**\n       * @deprecated Use geomFunc prop instead.\n       * @todo remove in v0.13.x\n       */\n      geomFuncFactory: Function,\n    },\n    data () {\n      return {\n        currentDistance: this.distance,\n      }\n    },\n    computed: {\n      inputGeometryFunction () {\n        let geomFunc = this.geometryFunction || this.geomFunc\n        if (!geomFunc && this.geomFuncFactory) {\n          geomFunc = this.geomFuncFactory()\n        }\n\n        return geomFunc || defaultGeomFunc\n      },\n      innerSource () {\n        if (!(this.rev && this.$innerSource)) return\n\n        return {\n          id: getSourceId(this.$innerSource),\n          type: this.$innerSource.constructor.name,\n        }\n      },\n      inputUrl: noop,\n      inputLoader: noop,\n      inputLoadingStrategy: noop,\n      formatIdent: noop,\n      inputFormatFactory: noop,\n    },\n    watch: {\n      rev () {\n        if (!this.$source) return\n\n        if (this.currentDistance !== this.$source.getDistance()) {\n          this.currentDistance = this.$source.getDistance()\n        }\n      },\n      distance (value) {\n        this.setDistance(value)\n      },\n      currentDistance (value) {\n        if (value === this.distance) return\n\n        this.$emit('update:distance', value)\n      },\n      innerSource: {\n        deep: true,\n        handler (value, prev) {\n          if (value === prev) return\n\n          this.$emit('update:innerSource', value && clonePlainObject(value))\n        },\n      },\n      .../*#__PURE__*/makeChangeOrRecreateWatchers([\n        'inputGeometryFunction',\n      ]),\n    },\n    created () {\n      if (process.env.NODE_ENV !== 'production') {\n        if (this.geomFuncFactory) {\n          this.$logger.warn(\"'geomFuncFactory' prop is deprecated. Use 'geometryFunction' prop instead.\")\n        }\n        if (this.geomFunc) {\n          this.$logger.warn(\"'geomFunc' prop is deprecated. Use 'geometryFunction' prop instead.\")\n        }\n      }\n\n      this._innerSource = undefined\n      this._innerSourceVm = undefined\n\n      this::defineServices()\n    },\n    updated () {\n      if (process.env.NODE_ENV !== 'production') {\n        if (this.geomFuncFactory) {\n          this.$logger.warn(\"'geomFuncFactory' prop is deprecated. Use 'geometryFunction' prop instead.\")\n        }\n        if (this.geomFunc) {\n          this.$logger.warn(\"'geomFunc' prop is deprecated. Use 'geometryFunction' prop instead.\")\n        }\n      }\n    },\n    methods: {\n      createSource () {\n        return new ClusterSource({\n          // ol/source/Source\n          attributions: this.currentAttributions,\n          wrapX: this.wrapX,\n          // ol/source/Cluster\n          source: this.$innerSource,\n          distance: this.currentDistance,\n          geometryFunction: this.inputGeometryFunction,\n        })\n      },\n      getServices () {\n        const vm = this\n\n        return mergeDescriptors(\n          this::vectorSource.methods.getServices(),\n          {\n            get innerSourceContainer () { return vm },\n          },\n        )\n      },\n      getDistance () {\n        return coalesce(this.$source?.getDistance(), this.currentDistance)\n      },\n      setDistance (distance) {\n        assert(isNumber(distance), 'Invalid distance')\n\n        if (distance !== this.currentDistance) {\n          this.currentDistance = distance\n        }\n        if (this.$source && distance !== this.$source.getDistance()) {\n          this.$source.setDistance(distance)\n        }\n      },\n      getInnerSource () {\n        return this._innerSource\n      },\n      getInnerSourceVm () {\n        return this._innerSourceVm\n      },\n      setInnerSource (innerSource) {\n        innerSource = innerSource?.$source || innerSource\n        assert(!innerSource || innerSource instanceof Source)\n        innerSource || (innerSource = undefined)\n\n        if (innerSource !== this._innerSource) {\n          this._innerSource = innerSource\n          this._innerSourceVm = innerSource?.vm && innerSource.vm[0]\n          this.scheduleRefresh()\n        }\n        if (this.$source && innerSource !== this.$source.getSource()) {\n          this.$source.setSource(innerSource)\n          this.scheduleRefresh()\n        }\n      },\n      projectionChanged: noop,\n      inputUrlChanged: noop,\n      inputLoaderChanged: noop,\n      inputLoadingStrategyChanged: noop,\n      inputFormatFactoryChanged: noop,\n      formatIdentChanged: noop,\n      formatChanged: noop,\n      overlapsChanged: noop,\n      useSpatialIndexChanged: noop,\n    },\n  }\n\n  function defineServices () {\n    Object.defineProperties(this, {\n      $innerSource: {\n        enumerable: true,\n        get: this.getInnerSource,\n      },\n      $innerSourceVm: {\n        enumerable: true,\n        get: this.getInnerSourceVm,\n      },\n    })\n  }\n\n  function defaultGeomFunc (feature) {\n    const geometry = feature.getGeometry()\n    if (!geometry) return\n\n    const coordinate = findPointOnSurface(geometry)\n    if (coordinate) {\n      return createPointGeom(coordinate)\n    }\n  }\n</script>\n","\nimport { olCmp, sourceContainer, stubVNode } from '../../mixins'\nimport { getSourceId } from '../../ol-ext'\nimport { clonePlainObject, isEqual, mergeDescriptors, stubObject } from '../../utils'\n\nexport default {\n  name: 'VlSourceInnerAdapter',\n  mixins: [\n    stubVNode,\n    sourceContainer,\n    olCmp,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  computed: {\n    source () {\n      if (!(this.rev && this.$source)) return\n\n      return {\n        id: getSourceId(this.$source),\n        type: this.$source.constructor.name,\n      }\n    },\n  },\n  watch: {\n    source: {\n      deep: true,\n      handler (value, prev) {\n        if (isEqual(value, prev)) return\n\n        this.$emit('update:source', value && clonePlainObject(value))\n      },\n    },\n  },\n  created () {\n    Object.defineProperties(this, {\n      $innerSourceContainer: {\n        enumerable: true,\n        get: () => this.$services?.innerSourceContainer,\n      },\n    })\n  },\n  methods: {\n    createOlObject () {\n      const obj = stubObject()\n      obj.id = this.currentId\n\n      return obj\n    },\n    getServices () {\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        this::sourceContainer.methods.getServices(),\n      )\n    },\n    getSourceTarget () {\n      return {\n        getSource: () => this.$innerSourceContainer?.getInnerSource(),\n        setSource: source => this.$innerSourceContainer?.setInnerSource(source),\n      }\n    },\n  },\n}\n","import { pick } from '../../utils'\nimport Source from './source.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Source, options)\n\n  Vue.component(Source.name, Source)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Source,\n}\n","\nimport { Collection } from 'ol'\nimport { noModifierKeys, shiftKeyOnly } from 'ol/events/condition'\nimport GeometryType from 'ol/geom/GeometryType'\nimport { Draw as DrawInteraction } from 'ol/interaction'\nimport { Vector as VectorSource } from 'ol/source'\nimport { merge as mergeObs, of as obsOf } from 'rxjs'\nimport { delay, first, map as mapObs, mapTo, mergeMap, tap } from 'rxjs/operators'\nimport { FRAME_TIME, interaction, makeChangeOrRecreateWatchers, styleContainer } from '../../mixins'\nimport { COORD_PRECISION, initializeFeature, roundLineCoords, writeGeoJsonFeature } from '../../ol-ext'\nimport { fromOlEvent as obsFromOlEvent, fromVueEvent as obsFromVueEvent } from '../../rx-ext'\nimport { assert, camelCase, instanceOf, isFunction, mergeDescriptors, upperFirst } from '../../utils'\n\nconst transformType = /*#__PURE__*/type => upperFirst(camelCase(type))\n\nexport default {\n  name: 'VlInteractionDraw',\n  mixins: [\n    interaction,\n    styleContainer,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  props: {\n    /**\n     * Target source or collection identifier from IdentityMap.\n     * @type {String}\n     */\n    source: {\n      type: String,\n      required: true,\n    },\n    /**\n     * The maximum distance in pixels between \"down\" and \"up\" for a \"up\" event to be considered a \"click\" event and\n     * actually add a point/vertex to the geometry being drawn. Default is 6 pixels. That value was chosen for the\n     * draw interaction to behave correctly on mouse as well as on touch devices.\n     * @type {number}\n     */\n    clickTolerance: {\n      type: Number,\n      default: 6,\n    },\n    /**\n     * Pixel distance for snapping to the drawing finish.\n     * @type {number}\n     */\n    snapTolerance: {\n      type: Number,\n      default: 12,\n    },\n    /**\n     * Drawing type ('Point', 'LineString', 'Polygon', 'MultiPoint', 'MultiLineString', 'MultiPolygon' or 'Circle').\n     * @type {string}\n     */\n    type: {\n      type: String,\n      required: true,\n      validator: value => Object.values(GeometryType).includes(transformType(value)),\n    },\n    /**\n     * Stop click, singleclick, and doubleclick events from firing during drawing.\n     * @type {boolean}\n     */\n    stopClick: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * The number of points that can be drawn before a polygon ring or line string is finished.\n     * @type {number|undefined}\n     */\n    maxPoints: Number,\n    /**\n     * The number of points that must be drawn before a polygon ring or line string can be finished.\n     * Default is `3` for polygon rings and `2` for line strings.\n     * @type {number|undefined}\n     */\n    minPoints: Number,\n    /**\n     * A function that takes an ol.MapBrowserEvent and returns a boolean to indicate whether the drawing can be finished.\n     * @type {function|undefined}\n     */\n    finishCondition: Function,\n    /**\n     * Function that is called when a geometry's coordinates are updated.\n     * @type {function|undefined}\n     */\n    geometryFunction: Function,\n    /**\n     * Name of the geometry attribute for newly created features.\n     * @type {string}\n     */\n    geometryName: {\n      type: String,\n      default: 'geometry',\n    },\n    /**\n     * A function that takes an `ol.MapBrowserEvent` and returns a boolean to indicate whether that event should be handled.\n     * By default `ol.events.condition.noModifierKeys`, i.e. a click, adds a vertex or deactivates freehand drawing.\n     * @type {function|undefined}\n     */\n    condition: {\n      type: Function,\n      default: noModifierKeys,\n    },\n    /**\n     * Operate in freehand mode for lines, polygons, and circles. This makes the interaction always operate in\n     * freehand mode and takes precedence over any `freehandCondition` option.\n     * @type {boolean}\n     */\n    freehand: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * Condition that activates freehand drawing for lines and polygons. This function takes an `ol.MapBrowserEvent` and\n     * returns a boolean to indicate whether that event should be handled. The default is `ol.events.condition.shiftKeyOnly`,\n     * meaning that the Shift key activates freehand drawing.\n     * @type {function|undefined}\n     */\n    freehandCondition: {\n      type: Function,\n      default: shiftKeyOnly,\n    },\n    /**\n     * Wrap the world horizontally on the sketch overlay.\n     * @type {boolean}\n     */\n    wrapX: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * Delay in milliseconds after pointerdown before the current vertex can be dragged to its exact position.\n     * @type {number}\n     */\n    dragVertexDelay: {\n      type: Number,\n      default: 500,\n    },\n  },\n  computed: {\n    inputType () {\n      return transformType(this.type)\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'source',\n      'clickTolerance',\n      'snapTolerance',\n      'inputType',\n      'stopClick',\n      'maxPoints',\n      'minPoints',\n      'finishCondition',\n      'geometryFunction',\n      'geometryName',\n      'condition',\n      'freehand',\n      'freehandCondition',\n      'wrapX',\n      'dragVertexDelay',\n    ]),\n  },\n  methods: {\n    /**\n     * @return {Promise<Draw>}\n     * @protected\n     */\n    async createInteraction () {\n      let source = this._source = await this.getInstance(this.source)\n      assert(!!source, `Source \"${this.source}\" not found in identity map.`)\n      let features\n      if (!(source instanceof VectorSource)) {\n        if (isFunction(source.getFeaturesCollection)) {\n          features = source.getFeaturesCollection()\n        } else if (isFunction(source.getFeatures)) {\n          features = source.getFeatures()\n        }\n        instanceOf(features, Collection, `Source \"${this.source}\" doesn't provide features collection.`)\n        source = null\n      }\n\n      return new DrawInteraction({\n        source,\n        features,\n        clickTolerance: this.clickTolerance,\n        snapTolerance: this.snapTolerance,\n        type: this.inputType,\n        stopClick: this.stopClick,\n        maxPoints: this.maxPoints,\n        minPoints: this.minPoints,\n        finishCondition: this.finishCondition,\n        geometryFunction: this.geometryFunction,\n        geometryName: this.geometryName,\n        condition: this.condition,\n        freehand: this.freehand,\n        freehandCondition: this.freehandCondition,\n        wrapX: this.wrapX,\n        dragVertexDelay: this.dragVertexDelay,\n        style: this.$style,\n      })\n    },\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return mergeDescriptors(\n        this::interaction.methods.getServices(),\n        this::styleContainer.methods.getServices(),\n      )\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::interaction.methods.subscribeAll()\n      this::subscribeToInteractionChanges()\n    },\n    /**\n     * @return {StyleTarget}\n     * @protected\n     */\n    getStyleTarget () {\n      return {\n        getStyle: () => this._style,\n        setStyle: () => {\n          if (false) {\n            this.$logger.log('style changed, scheduling recreate...')\n          }\n\n          this.scheduleRecreate()\n        },\n      }\n    },\n    async getOverlay () {\n      return (await this.resolveInteraction()).getOverlay()\n    },\n    async abortDrawing () {\n      (await this.resolveInteraction()).abortDrawing()\n    },\n    async finishDrawing () {\n      (await this.resolveInteraction()).finishDrawing()\n    },\n    async appendCoordinates (coordinates, viewProj = false) {\n      coordinates = viewProj ? roundLineCoords(coordinates) : this.lineToViewProj(coordinates);\n\n      (await this.resolveInteraction()).appendCoordinates(coordinates)\n    },\n    async removeLastPoint () {\n      (await this.resolveInteraction()).removeLastPoint()\n    },\n    async getPointerCount () {\n      return (await this.resolveInteraction()).getPointerCount()\n    },\n  },\n}\n\n/**\n * @return {void}\n * @private\n */\nfunction subscribeToInteractionChanges () {\n  const start = obsFromOlEvent(this.$interaction, 'drawstart').pipe(\n    mapObs(evt => ({\n      ...evt,\n      feature: initializeFeature(evt.feature),\n    })),\n    tap(() => this.setInteracting(true)),\n  )\n  const sourceUpdObs = () => {\n    if (!this._source?.vm?.length) {\n      return obsOf(true).pipe(delay(3 * FRAME_TIME))\n    }\n    // update:features on the source (which is feature-container)\n    // will be always after drawend with delay ~= computed property update time + FRAME_TIME\n    // so we can safely just wait first event\n    return obsFromVueEvent(this._source.vm[0], 'update:features').pipe(\n      first(),\n    )\n  }\n  const end = obsFromOlEvent(this.$interaction, 'drawend').pipe(\n    mergeMap(evt => sourceUpdObs().pipe(\n      mapTo(evt),\n    )),\n    tap(() => this.setInteracting(false)),\n  )\n  const events = mergeObs(start, end).pipe(\n    mapObs(({ type, feature }) => {\n      const viewProj = this.resolvedViewProjection\n      const dataProj = this.resolvedDataProjection\n      return {\n        type,\n        feature,\n        get json () {\n          if (!this._json) {\n            this._json = writeGeoJsonFeature(this.feature, viewProj, dataProj, COORD_PRECISION)\n          }\n          return this._json\n        },\n      }\n    }),\n  )\n  this.subscribeTo(events, evt => this.$emit(evt.type, evt))\n}\n","<script>\n  import { Collection } from 'ol'\n  import { noModifierKeys, shiftKeyOnly } from 'ol/events/condition'\n  import GeometryType from 'ol/geom/GeometryType'\n  import { Draw as DrawInteraction } from 'ol/interaction'\n  import { Vector as VectorSource } from 'ol/source'\n  import { merge as mergeObs, of as obsOf } from 'rxjs'\n  import { delay, first, map as mapObs, mapTo, mergeMap, tap } from 'rxjs/operators'\n  import { FRAME_TIME, interaction, makeChangeOrRecreateWatchers, styleContainer } from '../../mixins'\n  import { COORD_PRECISION, initializeFeature, roundLineCoords, writeGeoJsonFeature } from '../../ol-ext'\n  import { fromOlEvent as obsFromOlEvent, fromVueEvent as obsFromVueEvent } from '../../rx-ext'\n  import { assert, camelCase, instanceOf, isFunction, mergeDescriptors, upperFirst } from '../../utils'\n\n  const transformType = /*#__PURE__*/type => upperFirst(camelCase(type))\n\n  export default {\n    name: 'VlInteractionDraw',\n    mixins: [\n      interaction,\n      styleContainer,\n    ],\n    stubVNode: {\n      empty: false,\n      attrs () {\n        return {\n          id: this.vmId,\n          class: this.vmClass,\n        }\n      },\n    },\n    props: {\n      /**\n       * Target source or collection identifier from IdentityMap.\n       * @type {String}\n       */\n      source: {\n        type: String,\n        required: true,\n      },\n      /**\n       * The maximum distance in pixels between \"down\" and \"up\" for a \"up\" event to be considered a \"click\" event and\n       * actually add a point/vertex to the geometry being drawn. Default is 6 pixels. That value was chosen for the\n       * draw interaction to behave correctly on mouse as well as on touch devices.\n       * @type {number}\n       */\n      clickTolerance: {\n        type: Number,\n        default: 6,\n      },\n      /**\n       * Pixel distance for snapping to the drawing finish.\n       * @type {number}\n       */\n      snapTolerance: {\n        type: Number,\n        default: 12,\n      },\n      /**\n       * Drawing type ('Point', 'LineString', 'Polygon', 'MultiPoint', 'MultiLineString', 'MultiPolygon' or 'Circle').\n       * @type {string}\n       */\n      type: {\n        type: String,\n        required: true,\n        validator: value => Object.values(GeometryType).includes(transformType(value)),\n      },\n      /**\n       * Stop click, singleclick, and doubleclick events from firing during drawing.\n       * @type {boolean}\n       */\n      stopClick: {\n        type: Boolean,\n        default: false,\n      },\n      /**\n       * The number of points that can be drawn before a polygon ring or line string is finished.\n       * @type {number|undefined}\n       */\n      maxPoints: Number,\n      /**\n       * The number of points that must be drawn before a polygon ring or line string can be finished.\n       * Default is `3` for polygon rings and `2` for line strings.\n       * @type {number|undefined}\n       */\n      minPoints: Number,\n      /**\n       * A function that takes an ol.MapBrowserEvent and returns a boolean to indicate whether the drawing can be finished.\n       * @type {function|undefined}\n       */\n      finishCondition: Function,\n      /**\n       * Function that is called when a geometry's coordinates are updated.\n       * @type {function|undefined}\n       */\n      geometryFunction: Function,\n      /**\n       * Name of the geometry attribute for newly created features.\n       * @type {string}\n       */\n      geometryName: {\n        type: String,\n        default: 'geometry',\n      },\n      /**\n       * A function that takes an `ol.MapBrowserEvent` and returns a boolean to indicate whether that event should be handled.\n       * By default `ol.events.condition.noModifierKeys`, i.e. a click, adds a vertex or deactivates freehand drawing.\n       * @type {function|undefined}\n       */\n      condition: {\n        type: Function,\n        default: noModifierKeys,\n      },\n      /**\n       * Operate in freehand mode for lines, polygons, and circles. This makes the interaction always operate in\n       * freehand mode and takes precedence over any `freehandCondition` option.\n       * @type {boolean}\n       */\n      freehand: {\n        type: Boolean,\n        default: false,\n      },\n      /**\n       * Condition that activates freehand drawing for lines and polygons. This function takes an `ol.MapBrowserEvent` and\n       * returns a boolean to indicate whether that event should be handled. The default is `ol.events.condition.shiftKeyOnly`,\n       * meaning that the Shift key activates freehand drawing.\n       * @type {function|undefined}\n       */\n      freehandCondition: {\n        type: Function,\n        default: shiftKeyOnly,\n      },\n      /**\n       * Wrap the world horizontally on the sketch overlay.\n       * @type {boolean}\n       */\n      wrapX: {\n        type: Boolean,\n        default: false,\n      },\n      /**\n       * Delay in milliseconds after pointerdown before the current vertex can be dragged to its exact position.\n       * @type {number}\n       */\n      dragVertexDelay: {\n        type: Number,\n        default: 500,\n      },\n    },\n    computed: {\n      inputType () {\n        return transformType(this.type)\n      },\n    },\n    watch: {\n      .../*#__PURE__*/makeChangeOrRecreateWatchers([\n        'source',\n        'clickTolerance',\n        'snapTolerance',\n        'inputType',\n        'stopClick',\n        'maxPoints',\n        'minPoints',\n        'finishCondition',\n        'geometryFunction',\n        'geometryName',\n        'condition',\n        'freehand',\n        'freehandCondition',\n        'wrapX',\n        'dragVertexDelay',\n      ]),\n    },\n    methods: {\n      /**\n       * @return {Promise<Draw>}\n       * @protected\n       */\n      async createInteraction () {\n        let source = this._source = await this.getInstance(this.source)\n        assert(!!source, `Source \"${this.source}\" not found in identity map.`)\n        let features\n        if (!(source instanceof VectorSource)) {\n          if (isFunction(source.getFeaturesCollection)) {\n            features = source.getFeaturesCollection()\n          } else if (isFunction(source.getFeatures)) {\n            features = source.getFeatures()\n          }\n          instanceOf(features, Collection, `Source \"${this.source}\" doesn't provide features collection.`)\n          source = null\n        }\n\n        return new DrawInteraction({\n          source,\n          features,\n          clickTolerance: this.clickTolerance,\n          snapTolerance: this.snapTolerance,\n          type: this.inputType,\n          stopClick: this.stopClick,\n          maxPoints: this.maxPoints,\n          minPoints: this.minPoints,\n          finishCondition: this.finishCondition,\n          geometryFunction: this.geometryFunction,\n          geometryName: this.geometryName,\n          condition: this.condition,\n          freehand: this.freehand,\n          freehandCondition: this.freehandCondition,\n          wrapX: this.wrapX,\n          dragVertexDelay: this.dragVertexDelay,\n          style: this.$style,\n        })\n      },\n      /**\n       * @returns {Object}\n       * @protected\n       */\n      getServices () {\n        return mergeDescriptors(\n          this::interaction.methods.getServices(),\n          this::styleContainer.methods.getServices(),\n        )\n      },\n      /**\n       * @return {void}\n       * @protected\n       */\n      subscribeAll () {\n        this::interaction.methods.subscribeAll()\n        this::subscribeToInteractionChanges()\n      },\n      /**\n       * @return {StyleTarget}\n       * @protected\n       */\n      getStyleTarget () {\n        return {\n          getStyle: () => this._style,\n          setStyle: () => {\n            if (process.env.VUELAYERS_DEBUG) {\n              this.$logger.log('style changed, scheduling recreate...')\n            }\n\n            this.scheduleRecreate()\n          },\n        }\n      },\n      async getOverlay () {\n        return (await this.resolveInteraction()).getOverlay()\n      },\n      async abortDrawing () {\n        (await this.resolveInteraction()).abortDrawing()\n      },\n      async finishDrawing () {\n        (await this.resolveInteraction()).finishDrawing()\n      },\n      async appendCoordinates (coordinates, viewProj = false) {\n        coordinates = viewProj ? roundLineCoords(coordinates) : this.lineToViewProj(coordinates);\n\n        (await this.resolveInteraction()).appendCoordinates(coordinates)\n      },\n      async removeLastPoint () {\n        (await this.resolveInteraction()).removeLastPoint()\n      },\n      async getPointerCount () {\n        return (await this.resolveInteraction()).getPointerCount()\n      },\n    },\n  }\n\n  /**\n   * @return {void}\n   * @private\n   */\n  function subscribeToInteractionChanges () {\n    const start = obsFromOlEvent(this.$interaction, 'drawstart').pipe(\n      mapObs(evt => ({\n        ...evt,\n        feature: initializeFeature(evt.feature),\n      })),\n      tap(() => this.setInteracting(true)),\n    )\n    const sourceUpdObs = () => {\n      if (!this._source?.vm?.length) {\n        return obsOf(true).pipe(delay(3 * FRAME_TIME))\n      }\n      // update:features on the source (which is feature-container)\n      // will be always after drawend with delay ~= computed property update time + FRAME_TIME\n      // so we can safely just wait first event\n      return obsFromVueEvent(this._source.vm[0], 'update:features').pipe(\n        first(),\n      )\n    }\n    const end = obsFromOlEvent(this.$interaction, 'drawend').pipe(\n      mergeMap(evt => sourceUpdObs().pipe(\n        mapTo(evt),\n      )),\n      tap(() => this.setInteracting(false)),\n    )\n    const events = mergeObs(start, end).pipe(\n      mapObs(({ type, feature }) => {\n        const viewProj = this.resolvedViewProjection\n        const dataProj = this.resolvedDataProjection\n        return {\n          type,\n          feature,\n          get json () {\n            if (!this._json) {\n              this._json = writeGeoJsonFeature(this.feature, viewProj, dataProj, COORD_PRECISION)\n            }\n            return this._json\n          },\n        }\n      }),\n    )\n    this.subscribeTo(events, evt => this.$emit(evt.type, evt))\n  }\n</script>\n","import { pick } from '../../utils'\nimport Interaction from './interaction.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Interaction, options)\n\n  Vue.component(Interaction.name, Interaction)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Interaction,\n}\n","\nimport { Circle } from 'ol/geom'\nimport GeometryType from 'ol/geom/GeometryType'\nimport { get as getProj } from 'ol/proj'\nimport { simpleGeometry } from '../../mixins'\nimport { isPointCoords, roundPointCoords, transformDistance } from '../../ol-ext'\nimport { assert, coalesce, constant, isEqual, isNumber, round } from '../../utils'\n\nexport default {\n  name: 'VlGeomCircle',\n  mixins: [\n    simpleGeometry,\n  ],\n  props: {\n    /* eslint-disable vue/require-prop-types */\n    coordinates: {\n      ...simpleGeometry.props.coordinates,\n      validator: isPointCoords,\n    },\n    /* eslint-enable vue/require-prop-types */\n    /**\n     * Circle radius always in meters.\n     * @type {number}\n     */\n    radius: {\n      type: Number,\n      default: 0,\n    },\n    /**\n     * Projection in which radius provided.\n     * Default: map data projection\n     * @type {string}\n     */\n    radiusProjection: {\n      type: String,\n      validator: value => !!getProj(value),\n    },\n  },\n  data () {\n    return {\n      currentRadiusViewProj: this.radius,\n    }\n  },\n  computed: {\n    type: /*#__PURE__*/constant(GeometryType.CIRCLE),\n    resolvedRadiusProjection () {\n      return this.radiusProjection || this.resolvedDataProjection\n    },\n    radiusDataProj () {\n      return round(this.radius)\n    },\n    radiusViewProj () {\n      return this.radiusToViewProj(this.radius, this.coordinatesDataProj)\n    },\n    currentRadiusDataProj () {\n      return this.radiusToDataProj(this.currentRadiusViewProj)\n    },\n  },\n  watch: {\n    radiusViewProj (value) {\n      this.setRadius(value, true)\n    },\n    currentRadiusDataProj (value) {\n      if (value === this.radiusDataProj) return\n\n      this.$emit('update:radius', value)\n    },\n  },\n  created () {\n    this.currentRadiusViewProj = this.radiusViewProj\n  },\n  methods: {\n    /**\n     * @return {Circle}\n     * @protected\n     */\n    createGeometry () {\n      return new Circle(this.currentCoordinatesViewProj, this.currentRadiusViewProj)\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @return {number[]}\n     */\n    getCoordinates (viewProj = false) {\n      return this.getCenter(viewProj)\n    },\n    /**\n     * @param {number[]} coordinate\n     * @param {boolean} [viewProj=false]\n     */\n    setCoordinates (coordinate, viewProj = false) {\n      this.setCenter(coordinate, viewProj)\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @return {number[]}\n     */\n    getCenter (viewProj = false) {\n      const center = coalesce(this.$geometry?.getCenter(), this.currentCoordinatesViewProj)\n\n      return viewProj ? roundPointCoords(center) : this.pointToDataProj(center)\n    },\n    /**\n     * @param {number[]} center\n     * @param {boolean} [viewProj=false]\n     */\n    setCenter (center, viewProj = false) {\n      assert(isPointCoords(center), 'Invalid center')\n      center = viewProj ? roundPointCoords(center) : this.pointToViewProj(center)\n\n      if (!isEqual(center, this.currentCoordinatesViewProj)) {\n        this.currentCoordinatesViewProj = center\n      }\n      if (this.$geometry && !isEqual(center, this.$geometry.getCenter())) {\n        this.$geometry.setCenter(center)\n      }\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @return {number}\n     */\n    getRadius (viewProj = false) {\n      const radius = coalesce(this.$geometry?.getRadius(), this.currentRadiusViewProj)\n\n      return viewProj ? round(radius) : this.radiusToDataProj(radius)\n    },\n    /**\n     * @param {number} radius\n     * @param {boolean} [viewProj=false]\n     */\n    setRadius (radius, viewProj = false) {\n      assert(isNumber(radius), 'Invalid radius')\n      radius = viewProj ? round(radius) : this.radiusToDataProj(radius)\n\n      if (radius !== this.currentRadiusViewProj) {\n        this.currentRadiusViewProj = radius\n      }\n      if (this.$geometry && radius !== this.$geometry.getRadius()) {\n        this.$geometry.setRadius(radius)\n      }\n    },\n    /**\n     * @param {number[]} center\n     * @param {number} radius\n     * @param {boolean} [viewProj=false]\n     * @return {Promise<void>}\n     */\n    setCenterAndRadius (center, radius, viewProj = false) {\n      center = viewProj ? roundPointCoords(center) : this.pointToViewProj(center)\n      radius = viewProj ? round(radius) : this.radiusToViewProj(radius)\n\n      if (this.$geometry) {\n        this.$geometry.setCenterAndRadius(center, radius)\n      } else {\n        this.setCenter(center, true)\n        this.setRadius(radius, true)\n      }\n    },\n    /**\n     * @param {number} radius\n     * @return {undefined|number}\n     * @protected\n     */\n    radiusToViewProj (radius) {\n      return transformDistance(radius, this.resolvedRadiusProjection, this.resolvedViewProjection)\n    },\n    /**\n     * @param {number} radius\n     * @return {undefined|number}\n     * @protected\n     */\n    radiusToDataProj (radius) {\n      return transformDistance(radius, this.resolvedViewProjection, this.resolvedRadiusProjection)\n    },\n  },\n}\n","\nimport { Point } from 'ol/geom'\nimport GeometryType from 'ol/geom/GeometryType'\nimport { simpleGeometry } from '../../mixins'\nimport { isPointCoords } from '../../ol-ext'\nimport { assert, constant } from '../../utils'\n\nexport default {\n  name: 'VlGeomPoint',\n  mixins: [\n    simpleGeometry,\n  ],\n  props: {\n    /* eslint-disable vue/require-prop-types */\n    coordinates: {\n      ...simpleGeometry.props.coordinates,\n      validator: isPointCoords,\n    },\n    /* eslint-enable vue/require-prop-types */\n  },\n  computed: {\n    type: /*#__PURE__*/constant(GeometryType.POINT),\n  },\n  methods: {\n    /**\n     * @return {Point}\n     * @protected\n     */\n    createGeometry () {\n      return new Point(this.currentCoordinatesViewProj)\n    },\n    /**\n     * @param {number[]} coordinates\n     * @param {boolean} [viewProj=false]\n     */\n    setCoordinates (coordinates, viewProj = false) {\n      assert(isPointCoords(coordinates), 'Invalid coordinates')\n\n      this::simpleGeometry.methods.setCoordinates(coordinates, viewProj)\n    },\n  },\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { feature } from '../../mixins'\nimport PointGeom from './point-geom.vue'\n\n/**\n * A vector object for geographic features with a geometry and other attribute properties,\n * similar to the features in vector file formats like **GeoJSON**.\n */\nexport default {\n  name: 'VlFeature',\n  components: {\n    PointGeom,\n  },\n  mixins: [\n    feature,\n  ],\n}\n","\nimport { LineString } from 'ol/geom'\nimport GeometryType from 'ol/geom/GeometryType'\nimport { simpleGeometry } from '../../mixins'\nimport { isLineCoords } from '../../ol-ext'\nimport { assert, constant } from '../../utils'\n\nexport default {\n  name: 'VlGeomLineString',\n  mixins: [\n    simpleGeometry,\n  ],\n  props: {\n    /* eslint-disable vue/require-prop-types */\n    coordinates: {\n      ...simpleGeometry.props.coordinates,\n      validator: isLineCoords,\n    },\n    /* eslint-enable vue/require-prop-types */\n  },\n  computed: {\n    type: /*#__PURE__*/constant(GeometryType.LINE_STRING),\n  },\n  methods: {\n    /**\n     * @returns {LineString}\n     * @protected\n     */\n    createGeometry () {\n      return new LineString(this.currentCoordinatesViewProj)\n    },\n    /**\n     * @param {number[]} coordinates\n     * @param {boolean} [viewProj=false]\n     */\n    setCoordinates (coordinates, viewProj = false) {\n      assert(isLineCoords(coordinates), 'Invalid coordinates')\n\n      this::simpleGeometry.methods.setCoordinates(coordinates, viewProj)\n    },\n  },\n}\n","\nimport { MultiLineString } from 'ol/geom'\nimport GeometryType from 'ol/geom/GeometryType'\nimport { simpleGeometry } from '../../mixins'\nimport { isMultiLineCoords } from '../../ol-ext'\nimport { assert, constant } from '../../utils'\n\nexport default {\n  name: 'VlGeomMultiLineString',\n  mixins: [\n    simpleGeometry,\n  ],\n  props: {\n    /* eslint-disable vue/require-prop-types */\n    coordinates: {\n      ...simpleGeometry.props.coordinates,\n      validator: isMultiLineCoords,\n    },\n    /* eslint-enable vue/require-prop-types */\n  },\n  computed: {\n    type: /*#__PURE__*/constant(GeometryType.MULTI_LINE_STRING),\n  },\n  methods: {\n    /**\n     * @returns {MultiLineString}\n     * @protected\n     */\n    createGeometry () {\n      return new MultiLineString(this.currentCoordinatesViewProj)\n    },\n    /**\n     * @param {number[]} coordinates\n     * @param {boolean} [viewProj=false]\n     */\n    setCoordinates (coordinates, viewProj = false) {\n      assert(isMultiLineCoords(coordinates), 'Invalid coordinates')\n\n      this::simpleGeometry.methods.setCoordinates(coordinates, viewProj)\n    },\n  },\n}\n","\nimport { MultiPoint } from 'ol/geom'\nimport GeometryType from 'ol/geom/GeometryType'\nimport { simpleGeometry } from '../../mixins'\nimport { isMultiPointCoords } from '../../ol-ext'\nimport { assert, constant } from '../../utils'\n\nexport default {\n  name: 'VlGeomMultiPoint',\n  mixins: [\n    simpleGeometry,\n  ],\n  props: {\n    /* eslint-disable vue/require-prop-types */\n    coordinates: {\n      ...simpleGeometry.props.coordinates,\n      validator: isMultiPointCoords,\n    },\n    /* eslint-enable vue/require-prop-types */\n  },\n  computed: {\n    type: /*#__PURE__*/constant(GeometryType.MULTI_POINT),\n  },\n  methods: {\n    /**\n     * @returns {MultiPoint}\n     * @protected\n     */\n    createGeometry () {\n      return new MultiPoint(this.currentCoordinatesViewProj)\n    },\n    /**\n     * @param {number[]} coordinates\n     * @param {boolean} [viewProj=false]\n     */\n    setCoordinates (coordinates, viewProj = false) {\n      assert(isMultiPointCoords(coordinates), 'Invalid coordinates')\n\n      this::simpleGeometry.methods.setCoordinates(coordinates, viewProj)\n    },\n  },\n}\n","\nimport { MultiPolygon } from 'ol/geom'\nimport GeometryType from 'ol/geom/GeometryType'\nimport { simpleGeometry } from '../../mixins'\nimport { isMultiPolygonCoords } from '../../ol-ext'\nimport { assert, constant } from '../../utils'\n\nexport default {\n  name: 'VlGeomMultiPolygon',\n  mixins: [\n    simpleGeometry,\n  ],\n  props: {\n    /* eslint-disable vue/require-prop-types */\n    coordinates: {\n      ...simpleGeometry.props.coordinates,\n      validator: isMultiPolygonCoords,\n    },\n    /* eslint-enable vue/require-prop-types */\n  },\n  computed: {\n    type: /*#__PURE__*/constant(GeometryType.MULTI_POLYGON),\n  },\n  methods: {\n    /**\n     * @returns {MultiPolygon}\n     * @protected\n     */\n    createGeometry () {\n      return new MultiPolygon(this.currentCoordinatesViewProj)\n    },\n    /**\n     * @param {number[]} coordinates\n     * @param {boolean} [viewProj=false]\n     */\n    setCoordinates (coordinates, viewProj = false) {\n      assert(isMultiPolygonCoords(coordinates), 'Invalid coordinates')\n\n      this::simpleGeometry.methods.setCoordinates(coordinates, viewProj)\n    },\n  },\n}\n","\nimport { Polygon } from 'ol/geom'\nimport GeometryType from 'ol/geom/GeometryType'\nimport { simpleGeometry } from '../../mixins'\nimport { isPolygonCoords } from '../../ol-ext'\nimport { assert, constant } from '../../utils'\n\nexport default {\n  name: 'VlGeomPolygon',\n  mixins: [\n    simpleGeometry,\n  ],\n  props: {\n    /* eslint-disable vue/require-prop-types */\n    coordinates: {\n      ...simpleGeometry.props.coordinates,\n      validator: isPolygonCoords,\n    },\n    /* eslint-enable vue/require-prop-types */\n  },\n  computed: {\n    type: /*#__PURE__*/constant(GeometryType.POLYGON),\n  },\n  methods: {\n    /**\n     * @returns {Polygon}\n     * @protected\n     */\n    createGeometry () {\n      return new Polygon(this.currentCoordinatesViewProj)\n    },\n    /**\n     * @param {number[]} coordinates\n     * @param {boolean} [viewProj=false]\n     */\n    setCoordinates (coordinates, viewProj = false) {\n      assert(isPolygonCoords(coordinates), 'Invalid coordinates')\n\n      this::simpleGeometry.methods.setCoordinates(coordinates, viewProj)\n    },\n  },\n}\n","import { pick } from '../../utils'\nimport CircleGeom from './circle-geom.vue'\nimport Feature from './feature.vue'\nimport LineStringGeom from './line-string-geom.vue'\nimport MultiLineStringGeom from './multi-line-string-geom.vue'\nimport MultiPointGeom from './multi-point-geom.vue'\nimport MultiPolygonGeom from './multi-polygon-geom.vue'\nimport PointGeom from './point-geom.vue'\nimport PolygonGeom from './polygon-geom.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Feature, options)\n  Object.assign(CircleGeom, options)\n  Object.assign(PointGeom, options)\n  Object.assign(LineStringGeom, options)\n  Object.assign(PolygonGeom, options)\n  Object.assign(MultiPointGeom, options)\n  Object.assign(MultiLineStringGeom, options)\n  Object.assign(MultiPolygonGeom, options)\n\n  Vue.component(Feature.name, Feature)\n  Vue.component(CircleGeom.name, CircleGeom)\n  Vue.component(PointGeom.name, PointGeom)\n  Vue.component(LineStringGeom.name, LineStringGeom)\n  Vue.component(PolygonGeom.name, PolygonGeom)\n  Vue.component(MultiPointGeom.name, MultiPointGeom)\n  Vue.component(MultiLineStringGeom.name, MultiLineStringGeom)\n  Vue.component(MultiPolygonGeom.name, MultiPolygonGeom)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Feature,\n  CircleGeom,\n  PointGeom,\n  LineStringGeom,\n  PolygonGeom,\n  MultiPointGeom,\n  MultiLineStringGeom,\n  MultiPolygonGeom,\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Geolocation } from 'ol'\nimport { get as getProj } from 'ol/proj'\nimport { merge as mergeObs } from 'rxjs'\nimport { map as mapObs } from 'rxjs/operators'\nimport { olCmp, projTransforms, waitForMap } from '../../mixins'\nimport { EPSG_3857 } from '../../ol-ext'\nimport { fromOlChangeEvent as obsFromOlChangeEvent } from '../../rx-ext'\nimport { addPrefix, and, assert, clonePlainObject, coalesce, isEqual, isString } from '../../utils'\n\nconst validateProjection = /*#__PURE__*/and(isString, value => getProj(value) != null)\n\nexport default {\n  name: 'VlGeoloc',\n  mixins: [\n    projTransforms,\n    olCmp,\n    waitForMap,\n  ],\n  stubVNode: {\n    empty () {\n      return this.vmId\n    },\n  },\n  props: {\n    tracking: {\n      type: Boolean,\n      default: true,\n    },\n    trackingOptions: Object,\n    projection: {\n      type: String,\n      validator: validateProjection,\n    },\n  },\n  data () {\n    return {\n      viewProjection: EPSG_3857,\n      dataProjection: EPSG_3857,\n      currentTracking: this.tracking,\n      currentTrackingOptions: this.trackingOptions && clonePlainObject(this.trackingOptions),\n      currentProjection: this.projection,\n    }\n  },\n  computed: {\n    resolvedDataProjection () {\n      return coalesce(\n        this.currentProjection,\n        this.$options?.dataProjection,\n        this.dataProjection,\n        this.resolvedViewProjection,\n      )\n    },\n    accuracy () {\n      return this.rev ? this.getAccuracy() : undefined\n    },\n    accuracyGeometryDataProj () {\n      return this.rev ? this.writeGeometryInDataProj(this.getAccuracyGeometry()) : undefined\n    },\n    accuracyGeometryViewProj () {\n      return this.rev ? this.writeGeometryInViewProj(this.getAccuracyGeometry()) : undefined\n    },\n    altitude () {\n      return this.rev ? this.getAltitude() : undefined\n    },\n    altitudeAccuracy () {\n      return this.rev ? this.getAltitudeAccuracy() : undefined\n    },\n    heading () {\n      return this.rev ? this.getHeading() : undefined\n    },\n    speed () {\n      return this.rev ? this.getSpeed() : undefined\n    },\n    positionDataProj () {\n      return this.rev ? this.getPosition() : undefined\n    },\n    positionViewProj () {\n      return this.rev ? this.pointToViewProj(this.getPosition()) : undefined\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$geolocation) return\n\n      if (this.currentTracking !== this.$geolocation.getTracking()) {\n        this.currentTracking = this.$geolocation.getTracking()\n      }\n      if (!isEqual(this.currentTrackingOptions, this.$geolocation.getTrackingOptions())) {\n        this.currentTrackingOptions = this.$geolocation.getTrackingOptions()\n      }\n      if (this.currentProjection !== this.$geolocation.getProjection().getCode()) {\n        this.currentProjection = this.$geolocation.getProjection().getCode()\n      }\n    },\n    tracking (value) {\n      this.setTracking(value)\n    },\n    currentTracking (value) {\n      if (value === this.tracking) return\n\n      this.$emit('update:tracking', value)\n    },\n    tracingOptions: {\n      deep: true,\n      handler (value) {\n        this.setTrackingOptions(value)\n      },\n    },\n    currentTrackingOptions: {\n      deep: true,\n      handler (value) {\n        if (isEqual(value, this.trackingOptions)) return\n\n        this.$emit('update:tracingOptions', value && clonePlainObject(value))\n      },\n    },\n    projection (value) {\n      this.setProjection(value)\n    },\n    currentProjection (value) {\n      if (value === this.projection) return\n\n      this.$emit('update:projection', value)\n    },\n    accuracy (value, prev) {\n      if (value === prev) return\n\n      this.$emit('update:accuracy', value)\n    },\n    accuracyGeometryDataProj (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:accuracyGeometry', value)\n    },\n    currentAltitude (value, prev) {\n      if (value === prev) return\n\n      this.$emit('update:altitude', value)\n    },\n    altitudeAccuracy (value, prev) {\n      if (value === prev) return\n\n      this.$emit('update:altitudeAccuracy', value)\n    },\n    heading (value, prev) {\n      if (value === prev) return\n\n      this.$emit('update:heading', value)\n    },\n    speed (value, prev) {\n      if (value === prev) return\n\n      this.$emit('update:speed', value)\n    },\n    positionDataProj (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:position', value)\n    },\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      await Promise.all([\n        this::olCmp.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * @return {module:ol/Geolocation~Geolocation}\n     * @private\n     */\n    createOlObject () {\n      const geoloc = new Geolocation({\n        tracking: this.currentTracking,\n        trackingOptions: this.currentTrackingOptions,\n        projection: this.resolvedDataProjection,\n      })\n      geoloc.set('id', this.currentId)\n\n      return geoloc\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    mount () {\n      this.setTracking(this.tracking)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    unmount () {\n      this.setTracking(false)\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n      this::subscribeToGeolocation()\n    },\n    resolveGeolocation: olCmp.methods.resolveOlObject,\n    /**\n     * @return {number|string}\n     */\n    getIdInternal () {\n      return this.$geolocation.get('id')\n    },\n    /**\n     * @param {string|number} id\n     * @return {void}\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      this.$geolocation.set('id', id)\n    },\n    /**\n     * @return {number|undefined}\n     */\n    getAccuracy () {\n      return this.$geolocation?.getAccuracy()\n    },\n    /**\n     * @return {module:/ol/geom/Geometry~Geometry|undefined}\n     */\n    getAccuracyGeometry () {\n      return this.$geolocation?.getAccuracyGeometry()\n    },\n    /**\n     * @return {number|undefined}\n     */\n    getAltitude () {\n      return this.$geolocation?.getAltitude()\n    },\n    /**\n     * @return {number|undefined}\n     */\n    getAltitudeAccuracy () {\n      return this.$geolocation?.getAltitudeAccuracy()\n    },\n    /**\n     * @return {number|undefined}\n     */\n    getHeading () {\n      return this.$geolocation?.getHeading()\n    },\n    /**\n     * @return {number[]|undefined}\n     */\n    getPosition () {\n      return this.$geolocation?.getPosition()\n    },\n    /**\n     * @return {module:ol/proj~ProjectionLike|undefined}\n     */\n    getProjection () {\n      return coalesce(this.$geolocation?.getProjection(), this.currentProjection)\n    },\n    /**\n     * @param {module:ol/proj~ProjectionLike} projection\n     */\n    setProjection (projection) {\n      assert(validateProjection(projection), 'Invalid projection')\n      projection = getProj(projection)\n\n      if (projection.getCode() !== this.currentProjection) {\n        this.currentProjection = projection.getCode()\n      }\n      if (this.$geolocation && projection !== this.$geolocation.getProjection()) {\n        this.$geolocation.setProjection(projection)\n      }\n    },\n    /**\n     * @return {number|undefined}\n     */\n    getSpeed () {\n      return this.$geolocation?.getSpeed()\n    },\n    /**\n     * @return {boolean}\n     */\n    getTracking () {\n      return coalesce(this.$geolocation?.getTracking(), this.currentTracking)\n    },\n    /**\n     * @param {boolean} tracking\n     */\n    setTracking (tracking) {\n      if (tracking !== this.currentTracking) {\n        this.currentTracking = tracking\n      }\n      if (this.$geolocation && tracking !== this.$geolocation.getTracking()) {\n        this.$geolocation.setTracking(tracking)\n      }\n    },\n    /**\n     * @return {Object|undefined}\n     */\n    getTrackingOptions () {\n      return coalesce(this.$geolocation?.getTrackingOptions(), this.currentTrackingOptions)\n    },\n    /**\n     * @param {Promise<Object|undefined>} options\n     */\n    setTrackingOptions (options) {\n      if (!isEqual(options, this.currentTrackingOptions)) {\n        this.currentTrackingOptions = options\n      }\n      if (this.$geolocation && !isEqual(options, this.$geolocation.getTrackingOptions())) {\n        this.$geolocation.setTrackingOptions(options)\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $geolocation: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n    $viewVm: {\n      enumerable: true,\n      get: () => this.$services?.viewVm,\n    },\n  })\n}\n\n/**\n * @return {void}\n * @private\n */\nfunction subscribeToGeolocation () {\n  const setterKey = addPrefix('set')\n  const setPropsChanges = mergeObs(\n    obsFromOlChangeEvent(this.$geolocation, 'projection', true, evt => ({\n      ...evt,\n      value: getProj(evt.value).getCode(),\n    })),\n    obsFromOlChangeEvent(this.$geolocation, [\n      'tracking',\n      'trackingOptions',\n    ], true),\n  ).pipe(\n    mapObs(evt => ({\n      ...evt,\n      setter: val => {\n        this[setterKey(evt.prop)](val)\n        this.scheduleRefresh()\n      },\n    })),\n  )\n  this.subscribeTo(setPropsChanges, ({ setter, value }) => setter(value))\n\n  const otherChanged = obsFromOlChangeEvent(this.$geolocation, [\n    'accuracy',\n    'accuracyGeometry',\n    'altitude',\n    'altitudeAccuracy',\n    'heading',\n    'speed',\n    'position',\n  ], true)\n  this.subscribeTo(otherChanged, ::this.scheduleRefresh)\n}\n","<template>\n  <i\n    :id=\"vmId\"\n    :class=\"vmClass\"\n    style=\"display: none !important;\">\n    <slot\n      :accuracy=\"accuracy\"\n      :accuracy-geometry=\"accuracyGeometryDataProj\"\n      :altitude=\"altitude\"\n      :altitude-accuracy=\"altitudeAccuracy\"\n      :heading=\"heading\"\n      :position=\"positionDataProj\"\n      :speed=\"speed\" />\n  </i>\n</template>\n\n<script>\n  import { Geolocation } from 'ol'\n  import { get as getProj } from 'ol/proj'\n  import { merge as mergeObs } from 'rxjs'\n  import { map as mapObs } from 'rxjs/operators'\n  import { olCmp, projTransforms, waitForMap } from '../../mixins'\n  import { EPSG_3857 } from '../../ol-ext'\n  import { fromOlChangeEvent as obsFromOlChangeEvent } from '../../rx-ext'\n  import { addPrefix, and, assert, clonePlainObject, coalesce, isEqual, isString } from '../../utils'\n\n  const validateProjection = /*#__PURE__*/and(isString, value => getProj(value) != null)\n\n  export default {\n    name: 'VlGeoloc',\n    mixins: [\n      projTransforms,\n      olCmp,\n      waitForMap,\n    ],\n    stubVNode: {\n      empty () {\n        return this.vmId\n      },\n    },\n    props: {\n      tracking: {\n        type: Boolean,\n        default: true,\n      },\n      trackingOptions: Object,\n      projection: {\n        type: String,\n        validator: validateProjection,\n      },\n    },\n    data () {\n      return {\n        viewProjection: EPSG_3857,\n        dataProjection: EPSG_3857,\n        currentTracking: this.tracking,\n        currentTrackingOptions: this.trackingOptions && clonePlainObject(this.trackingOptions),\n        currentProjection: this.projection,\n      }\n    },\n    computed: {\n      resolvedDataProjection () {\n        return coalesce(\n          this.currentProjection,\n          this.$options?.dataProjection,\n          this.dataProjection,\n          this.resolvedViewProjection,\n        )\n      },\n      accuracy () {\n        return this.rev ? this.getAccuracy() : undefined\n      },\n      accuracyGeometryDataProj () {\n        return this.rev ? this.writeGeometryInDataProj(this.getAccuracyGeometry()) : undefined\n      },\n      accuracyGeometryViewProj () {\n        return this.rev ? this.writeGeometryInViewProj(this.getAccuracyGeometry()) : undefined\n      },\n      altitude () {\n        return this.rev ? this.getAltitude() : undefined\n      },\n      altitudeAccuracy () {\n        return this.rev ? this.getAltitudeAccuracy() : undefined\n      },\n      heading () {\n        return this.rev ? this.getHeading() : undefined\n      },\n      speed () {\n        return this.rev ? this.getSpeed() : undefined\n      },\n      positionDataProj () {\n        return this.rev ? this.getPosition() : undefined\n      },\n      positionViewProj () {\n        return this.rev ? this.pointToViewProj(this.getPosition()) : undefined\n      },\n    },\n    watch: {\n      rev () {\n        if (!this.$geolocation) return\n\n        if (this.currentTracking !== this.$geolocation.getTracking()) {\n          this.currentTracking = this.$geolocation.getTracking()\n        }\n        if (!isEqual(this.currentTrackingOptions, this.$geolocation.getTrackingOptions())) {\n          this.currentTrackingOptions = this.$geolocation.getTrackingOptions()\n        }\n        if (this.currentProjection !== this.$geolocation.getProjection().getCode()) {\n          this.currentProjection = this.$geolocation.getProjection().getCode()\n        }\n      },\n      tracking (value) {\n        this.setTracking(value)\n      },\n      currentTracking (value) {\n        if (value === this.tracking) return\n\n        this.$emit('update:tracking', value)\n      },\n      tracingOptions: {\n        deep: true,\n        handler (value) {\n          this.setTrackingOptions(value)\n        },\n      },\n      currentTrackingOptions: {\n        deep: true,\n        handler (value) {\n          if (isEqual(value, this.trackingOptions)) return\n\n          this.$emit('update:tracingOptions', value && clonePlainObject(value))\n        },\n      },\n      projection (value) {\n        this.setProjection(value)\n      },\n      currentProjection (value) {\n        if (value === this.projection) return\n\n        this.$emit('update:projection', value)\n      },\n      accuracy (value, prev) {\n        if (value === prev) return\n\n        this.$emit('update:accuracy', value)\n      },\n      accuracyGeometryDataProj (value, prev) {\n        if (isEqual(value, prev)) return\n\n        this.$emit('update:accuracyGeometry', value)\n      },\n      currentAltitude (value, prev) {\n        if (value === prev) return\n\n        this.$emit('update:altitude', value)\n      },\n      altitudeAccuracy (value, prev) {\n        if (value === prev) return\n\n        this.$emit('update:altitudeAccuracy', value)\n      },\n      heading (value, prev) {\n        if (value === prev) return\n\n        this.$emit('update:heading', value)\n      },\n      speed (value, prev) {\n        if (value === prev) return\n\n        this.$emit('update:speed', value)\n      },\n      positionDataProj (value, prev) {\n        if (isEqual(value, prev)) return\n\n        this.$emit('update:position', value)\n      },\n    },\n    created () {\n      this::defineServices()\n    },\n    methods: {\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async beforeInit () {\n        await Promise.all([\n          this::olCmp.methods.beforeInit(),\n          this::waitForMap.methods.beforeInit(),\n        ])\n      },\n      /**\n       * @return {module:ol/Geolocation~Geolocation}\n       * @private\n       */\n      createOlObject () {\n        const geoloc = new Geolocation({\n          tracking: this.currentTracking,\n          trackingOptions: this.currentTrackingOptions,\n          projection: this.resolvedDataProjection,\n        })\n        geoloc.set('id', this.currentId)\n\n        return geoloc\n      },\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      mount () {\n        this.setTracking(this.tracking)\n\n        return this::olCmp.methods.mount()\n      },\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      unmount () {\n        this.setTracking(false)\n\n        return this::olCmp.methods.unmount()\n      },\n      /**\n       * @protected\n       */\n      subscribeAll () {\n        this::olCmp.methods.subscribeAll()\n        this::subscribeToGeolocation()\n      },\n      resolveGeolocation: olCmp.methods.resolveOlObject,\n      /**\n       * @return {number|string}\n       */\n      getIdInternal () {\n        return this.$geolocation.get('id')\n      },\n      /**\n       * @param {string|number} id\n       * @return {void}\n       */\n      setIdInternal (id) {\n        if (id === this.getIdInternal()) return\n\n        this.$geolocation.set('id', id)\n      },\n      /**\n       * @return {number|undefined}\n       */\n      getAccuracy () {\n        return this.$geolocation?.getAccuracy()\n      },\n      /**\n       * @return {module:/ol/geom/Geometry~Geometry|undefined}\n       */\n      getAccuracyGeometry () {\n        return this.$geolocation?.getAccuracyGeometry()\n      },\n      /**\n       * @return {number|undefined}\n       */\n      getAltitude () {\n        return this.$geolocation?.getAltitude()\n      },\n      /**\n       * @return {number|undefined}\n       */\n      getAltitudeAccuracy () {\n        return this.$geolocation?.getAltitudeAccuracy()\n      },\n      /**\n       * @return {number|undefined}\n       */\n      getHeading () {\n        return this.$geolocation?.getHeading()\n      },\n      /**\n       * @return {number[]|undefined}\n       */\n      getPosition () {\n        return this.$geolocation?.getPosition()\n      },\n      /**\n       * @return {module:ol/proj~ProjectionLike|undefined}\n       */\n      getProjection () {\n        return coalesce(this.$geolocation?.getProjection(), this.currentProjection)\n      },\n      /**\n       * @param {module:ol/proj~ProjectionLike} projection\n       */\n      setProjection (projection) {\n        assert(validateProjection(projection), 'Invalid projection')\n        projection = getProj(projection)\n\n        if (projection.getCode() !== this.currentProjection) {\n          this.currentProjection = projection.getCode()\n        }\n        if (this.$geolocation && projection !== this.$geolocation.getProjection()) {\n          this.$geolocation.setProjection(projection)\n        }\n      },\n      /**\n       * @return {number|undefined}\n       */\n      getSpeed () {\n        return this.$geolocation?.getSpeed()\n      },\n      /**\n       * @return {boolean}\n       */\n      getTracking () {\n        return coalesce(this.$geolocation?.getTracking(), this.currentTracking)\n      },\n      /**\n       * @param {boolean} tracking\n       */\n      setTracking (tracking) {\n        if (tracking !== this.currentTracking) {\n          this.currentTracking = tracking\n        }\n        if (this.$geolocation && tracking !== this.$geolocation.getTracking()) {\n          this.$geolocation.setTracking(tracking)\n        }\n      },\n      /**\n       * @return {Object|undefined}\n       */\n      getTrackingOptions () {\n        return coalesce(this.$geolocation?.getTrackingOptions(), this.currentTrackingOptions)\n      },\n      /**\n       * @param {Promise<Object|undefined>} options\n       */\n      setTrackingOptions (options) {\n        if (!isEqual(options, this.currentTrackingOptions)) {\n          this.currentTrackingOptions = options\n        }\n        if (this.$geolocation && !isEqual(options, this.$geolocation.getTrackingOptions())) {\n          this.$geolocation.setTrackingOptions(options)\n        }\n      },\n    },\n  }\n\n  function defineServices () {\n    Object.defineProperties(this, {\n      $geolocation: {\n        enumerable: true,\n        get: () => this.$olObject,\n      },\n      $mapVm: {\n        enumerable: true,\n        get: () => this.$services?.mapVm,\n      },\n      $viewVm: {\n        enumerable: true,\n        get: () => this.$services?.viewVm,\n      },\n    })\n  }\n\n  /**\n   * @return {void}\n   * @private\n   */\n  function subscribeToGeolocation () {\n    const setterKey = addPrefix('set')\n    const setPropsChanges = mergeObs(\n      obsFromOlChangeEvent(this.$geolocation, 'projection', true, evt => ({\n        ...evt,\n        value: getProj(evt.value).getCode(),\n      })),\n      obsFromOlChangeEvent(this.$geolocation, [\n        'tracking',\n        'trackingOptions',\n      ], true),\n    ).pipe(\n      mapObs(evt => ({\n        ...evt,\n        setter: val => {\n          this[setterKey(evt.prop)](val)\n          this.scheduleRefresh()\n        },\n      })),\n    )\n    this.subscribeTo(setPropsChanges, ({ setter, value }) => setter(value))\n\n    const otherChanged = obsFromOlChangeEvent(this.$geolocation, [\n      'accuracy',\n      'accuracyGeometry',\n      'altitude',\n      'altitudeAccuracy',\n      'heading',\n      'speed',\n      'position',\n    ], true)\n    this.subscribeTo(otherChanged, ::this.scheduleRefresh)\n  }\n</script>\n","import { pick } from '../../utils'\nimport Geoloc from './geoloc.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Geoloc, options)\n\n  Vue.component(Geoloc.name, Geoloc)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Geoloc,\n}\n","\nimport { Fill as FillStyle } from 'ol/style'\nimport { style } from '../../mixins'\nimport { normalizeColor } from '../../ol-ext'\nimport { coalesce, isEqual } from '../../utils'\n\nexport default {\n  name: 'VlStyleFill',\n  mixins: [\n    style,\n  ],\n  props: {\n    color: {\n      type: [String, Array],\n      default: () => [255, 255, 255, 0.4],\n    },\n  },\n  data () {\n    return {\n      currentColor: normalizeColor(this.color),\n    }\n  },\n  computed: {\n    inputColor () {\n      return normalizeColor(this.color)\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$style) return\n\n      this.setColor(this.getColor())\n    },\n    inputColor: {\n      deep: true,\n      handler (value) {\n        this.setColor(value)\n      },\n    },\n    currentColor: {\n      deep: true,\n      handler (value) {\n        if (isEqual(value, this.inputColor)) return\n\n        this.$emit('update:color', value?.slice())\n      },\n    },\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {FillStyle}\n     * @protected\n     */\n    createStyle () {\n      return new FillStyle({\n        color: this.currentColor,\n      })\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$fillStyleContainer?.setFill(this)\n\n      return this::style.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      if (this.$fillStyleContainer?.getFillVm() === this) {\n        this.$fillStyleContainer.setFill(null)\n      }\n\n      return this::style.methods.unmount()\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async refresh () {\n      await Promise.all([\n        this::style.methods.refresh(),\n        this.$fillStyleContainer?.refresh(),\n      ])\n    },\n    /**\n     * @protected\n     */\n    syncNonObservable () {\n      this::style.methods.syncNonObservable()\n\n      this.setColor(this.getColor())\n    },\n    getColor () {\n      return normalizeColor(coalesce(this.$style?.getColor(), this.currentColor))\n    },\n    setColor (color) {\n      color = normalizeColor(color)\n\n      if (!isEqual(color, this.currentColor)) {\n        this.currentColor = color\n        this.scheduleRefresh()\n      }\n      if (this.$style && !isEqual(color, this.$style.getColor())) {\n        this.$style.setColor(color)\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $fillStyleContainer: {\n      enumerable: true,\n      get: () => this.$services?.fillStyleContainer,\n    },\n  })\n}\n","<script>\n  import { Fill as FillStyle } from 'ol/style'\n  import { style } from '../../mixins'\n  import { normalizeColor } from '../../ol-ext'\n  import { coalesce, isEqual } from '../../utils'\n\n  export default {\n    name: 'VlStyleFill',\n    mixins: [\n      style,\n    ],\n    props: {\n      color: {\n        type: [String, Array],\n        default: () => [255, 255, 255, 0.4],\n      },\n    },\n    data () {\n      return {\n        currentColor: normalizeColor(this.color),\n      }\n    },\n    computed: {\n      inputColor () {\n        return normalizeColor(this.color)\n      },\n    },\n    watch: {\n      rev () {\n        if (!this.$style) return\n\n        this.setColor(this.getColor())\n      },\n      inputColor: {\n        deep: true,\n        handler (value) {\n          this.setColor(value)\n        },\n      },\n      currentColor: {\n        deep: true,\n        handler (value) {\n          if (isEqual(value, this.inputColor)) return\n\n          this.$emit('update:color', value?.slice())\n        },\n      },\n    },\n    created () {\n      this::defineServices()\n    },\n    methods: {\n      /**\n       * @return {FillStyle}\n       * @protected\n       */\n      createStyle () {\n        return new FillStyle({\n          color: this.currentColor,\n        })\n      },\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async mount () {\n        this.$fillStyleContainer?.setFill(this)\n\n        return this::style.methods.mount()\n      },\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async unmount () {\n        if (this.$fillStyleContainer?.getFillVm() === this) {\n          this.$fillStyleContainer.setFill(null)\n        }\n\n        return this::style.methods.unmount()\n      },\n      /**\n       * @return {Promise<void>}\n       */\n      async refresh () {\n        await Promise.all([\n          this::style.methods.refresh(),\n          this.$fillStyleContainer?.refresh(),\n        ])\n      },\n      /**\n       * @protected\n       */\n      syncNonObservable () {\n        this::style.methods.syncNonObservable()\n\n        this.setColor(this.getColor())\n      },\n      getColor () {\n        return normalizeColor(coalesce(this.$style?.getColor(), this.currentColor))\n      },\n      setColor (color) {\n        color = normalizeColor(color)\n\n        if (!isEqual(color, this.currentColor)) {\n          this.currentColor = color\n          this.scheduleRefresh()\n        }\n        if (this.$style && !isEqual(color, this.$style.getColor())) {\n          this.$style.setColor(color)\n          this.scheduleRefresh()\n        }\n      },\n    },\n  }\n\n  function defineServices () {\n    Object.defineProperties(this, {\n      $fillStyleContainer: {\n        enumerable: true,\n        get: () => this.$services?.fillStyleContainer,\n      },\n    })\n  }\n</script>\n","\nimport { Stroke as StrokeStyle } from 'ol/style'\nimport { style } from '../../mixins'\nimport { normalizeColor } from '../../ol-ext'\nimport { clonePlainObject, coalesce, isEqual, isObjectLike, lowerFirst, makeWatchers, upperFirst } from '../../utils'\n\nexport default {\n  name: 'VlStyleStroke',\n  mixins: [\n    style,\n  ],\n  props: {\n    color: {\n      type: [Array, String],\n      default: '#3399cc',\n    },\n    lineCap: {\n      type: String,\n      default: 'round', // round, butt, square\n    },\n    lineJoin: {\n      type: String,\n      default: 'round', // round, bevel, miter\n    },\n    lineDash: Array,\n    lineDashOffset: {\n      type: Number,\n      default: 0,\n    },\n    miterLimit: {\n      type: Number,\n      default: 10,\n    },\n    width: {\n      type: Number,\n      default: 1.25,\n    },\n  },\n  data () {\n    return {\n      currentColor: normalizeColor(this.color),\n      currentLineCap: this.lineCap,\n      currentLineJoin: this.lineJoin,\n      currentLineDash: this.lineDash?.slice(),\n      currentLineDashOffset: this.lineDashOffset,\n      currentMiterLimit: this.miterLimit,\n      currentWidth: this.width,\n    }\n  },\n  computed: {\n    inputColor () {\n      return normalizeColor(this.color)\n    },\n    inputLineDash () {\n      return this.lineDash?.slice()\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$style) return\n\n      this.setColor(this.getColor())\n      this.setLineCap(this.getLineCap())\n      this.setLineJoin(this.getLineJoin())\n      this.setLineDash(this.getLineDash())\n      this.setLineDashOffset(this.getLineDashOffset())\n      this.setMiterLimit(this.getMiterLimit())\n      this.setWidth(this.getWidth())\n    },\n    .../*#__PURE__*/makeWatchers([\n      'inputColor',\n      'lineCap',\n      'lineJoin',\n      'inputLineDash',\n      'lineDashOffset',\n      'miterLimit',\n      'width',\n    ], inProp => {\n      const prop = inProp.slice(0, 5) === 'input' ? lowerFirst(inProp.slice(5)) : inProp\n      const setter = 'set' + upperFirst(prop)\n\n      return {\n        deep: [\n          'inputColor',\n          'inputLineDash',\n        ].includes(inProp),\n        handler (value) {\n          this[setter](value)\n        },\n      }\n    }),\n    .../*#__PURE__*/makeWatchers([\n      'currentColor',\n      'currentLineCap',\n      'currentLineJoin',\n      'currentLineDash',\n      'currentLineDashOffset',\n      'currentMiterLimit',\n      'currentWidth',\n    ], curProp => {\n      const prop = curProp.slice(0, 7) === 'current' ? lowerFirst(curProp.slice(7)) : curProp\n      const inProp = 'input' + upperFirst(prop)\n\n      return {\n        deep: [\n          'currentColor',\n          'currentLineDash',\n        ].includes(curProp),\n        handler (value) {\n          if (isEqual(value, coalesce(this[inProp], this[prop]))) return\n\n          this.$emit(`update:${prop}`, isObjectLike(value) ? clonePlainObject(value) : value)\n        },\n      }\n    }),\n    inputColor: {\n      deep: true,\n      handler (value) {\n        this.setColor(value)\n      },\n    },\n    currentColor: {\n      deep: true,\n      handler (value) {\n        if (isEqual(value, this.inputColor)) return\n\n        this.$emit('update:color', value?.slice())\n      },\n    },\n    lineCap (value) {\n      this.setLineCap(value)\n    },\n    currentLineCap (value) {\n      if (value === this.lineCap) return\n\n      this.$emit('update:lineCap', value)\n    },\n    lineJoin (value) {\n      this.setLineJoin(value)\n    },\n    currentLineJoin (value) {\n      if (value === this.lineJoin) return\n\n      this.$emit('update:lineJoin', value)\n    },\n    inputLineDash: {\n      deep: true,\n      handler (value) {\n        this.setLineDash(value)\n      },\n    },\n    currentLineDash: {\n      deep: true,\n      handler (value) {\n        if (isEqual(value, this.currentLineDash)) return\n\n        this.$emit('update:lineDash', value?.slice())\n      },\n    },\n    lineDashOffset (value) {\n      this.setLineDashOffset(value)\n    },\n    currentLineDashOffset (value) {\n      if (value === this.lineDashOffset) return\n\n      this.$emit('update:lineDashOffset', value)\n    },\n    miterLimit (value) {\n      this.setMiterLimit(value)\n    },\n    currentMiterLimit (value) {\n      if (value === this.miterLimit) return\n\n      this.$emit('update:miterLimit', value)\n    },\n    width (value) {\n      this.setWidth(value)\n    },\n    currentWidth (value) {\n      if (value === this.width) return\n\n      this.$emit('update:width', value)\n    },\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {StrokeStyle}\n     * @protected\n     */\n    createStyle () {\n      return new StrokeStyle({\n        color: this.currentColor,\n        lineCap: this.currentLineCap,\n        lineJoin: this.currentLineJoin,\n        lineDash: this.currentLineDash,\n        lineDashOffset: this.currentLineDashOffset,\n        miterLimit: this.currentMiterLimit,\n        width: this.currentWidth,\n      })\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$strokeStyleContainer?.setStroke(this)\n\n      return this::style.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      if (this.$strokeStyleContainer?.getStrokeVm() === this) {\n        this.$strokeStyleContainer.setStroke(null)\n      }\n\n      return this::style.methods.unmount()\n    },\n    /**\n     * @return {Promise}\n     */\n    async refresh () {\n      await Promise.all([\n        this::style.methods.refresh(),\n        this.$strokeStyleContainer?.refresh(),\n      ])\n    },\n    /**\n     * @protected\n     */\n    syncNonObservable () {\n      this::style.methods.syncNonObservable()\n\n      this.setColor(this.getColor())\n      this.setLineCap(this.getLineCap())\n      this.setLineJoin(this.getLineJoin())\n      this.setLineDash(this.getLineDash())\n      this.setLineDashOffset(this.getLineDashOffset())\n      this.setMiterLimit(this.getMiterLimit())\n      this.setWidth(this.getWidth())\n    },\n    getColor () {\n      return coalesce(this.$style?.getColor(), this.currentColor)\n    },\n    setColor (color) {\n      color = normalizeColor(color)\n\n      if (!isEqual(color, this.currentColor)) {\n        this.currentColor = color\n        this.scheduleRefresh()\n      }\n      if (this.$style && !isEqual(color, this.$style.getColor())) {\n        this.$style.setColor(color)\n        this.scheduleRefresh()\n      }\n    },\n    getLineCap () {\n      return coalesce(this.$style?.getLineCap(), this.currentLineCap)\n    },\n    setLineCap (lineCap) {\n      if (lineCap !== this.currentLineCap) {\n        this.currentLineCap = lineCap\n        this.scheduleRefresh()\n      }\n      if (this.$style && lineCap !== this.$style.getLineCap()) {\n        this.$style.setLineCap(lineCap)\n        this.scheduleRefresh()\n      }\n    },\n    getLineJoin () {\n      return coalesce(this.$style?.getLineJoin(), this.currentLineJoin)\n    },\n    setLineJoin (lineJoin) {\n      if (lineJoin !== this.currentLineJoin) {\n        this.currentLineJoin = lineJoin\n      }\n      if (this.$style && lineJoin !== this.$style.getLineJoin()) {\n        this.$style.setLineJoin(lineJoin)\n        this.scheduleRefresh()\n      }\n    },\n    getLineDash () {\n      return coalesce(this.$style?.getLineDash(), this.currentLineDash)\n    },\n    setLineDash (lineDash) {\n      lineDash = lineDash?.slice()\n\n      if (!isEqual(lineDash, this.currentLineDash)) {\n        this.currentLineDash = lineDash\n        this.scheduleRefresh()\n      }\n      if (this.$style && !isEqual(lineDash, this.$style.getLineDash())) {\n        this.$style.setLineDash(lineDash)\n        this.scheduleRefresh()\n      }\n    },\n    getLineDashOffset () {\n      return coalesce(this.$style?.getLineDashOffset(), this.currentLineDashOffset)\n    },\n    setLineDashOffset (lineDashOffset) {\n      if (lineDashOffset !== this.currentLineDashOffset) {\n        this.currentLineDashOffset = lineDashOffset\n        this.scheduleRefresh()\n      }\n      if (this.$style && lineDashOffset !== this.$style.getLineDashOffset()) {\n        this.$style.setLineDashOffset(lineDashOffset)\n        this.scheduleRefresh()\n      }\n    },\n    getMiterLimit () {\n      return coalesce(this.$style?.getMiterLimit(), this.currentMiterLimit)\n    },\n    setMiterLimit (miterLimit) {\n      if (miterLimit !== this.currentMiterLimit) {\n        this.currentMiterLimit = miterLimit\n        this.scheduleRefresh()\n      }\n      if (this.$style && miterLimit !== this.$style.getMiterLimit()) {\n        this.$style.setMiterLimit(miterLimit)\n        this.scheduleRefresh()\n      }\n    },\n    getWidth () {\n      return coalesce(this.$style?.getWidth(), this.currentWidth)\n    },\n    setWidth (width) {\n      if (width !== this.currentWidth) {\n        this.currentWidth = width\n        this.scheduleRefresh()\n      }\n      if (this.$style && width !== this.$style.getWidth()) {\n        this.$style.setWidth(width)\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $strokeStyleContainer: {\n      enumerable: true,\n      get: () => this.$services?.strokeStyleContainer,\n    },\n  })\n}\n","<script>\n  import { Stroke as StrokeStyle } from 'ol/style'\n  import { style } from '../../mixins'\n  import { normalizeColor } from '../../ol-ext'\n  import { clonePlainObject, coalesce, isEqual, isObjectLike, lowerFirst, makeWatchers, upperFirst } from '../../utils'\n\n  export default {\n    name: 'VlStyleStroke',\n    mixins: [\n      style,\n    ],\n    props: {\n      color: {\n        type: [Array, String],\n        default: '#3399cc',\n      },\n      lineCap: {\n        type: String,\n        default: 'round', // round, butt, square\n      },\n      lineJoin: {\n        type: String,\n        default: 'round', // round, bevel, miter\n      },\n      lineDash: Array,\n      lineDashOffset: {\n        type: Number,\n        default: 0,\n      },\n      miterLimit: {\n        type: Number,\n        default: 10,\n      },\n      width: {\n        type: Number,\n        default: 1.25,\n      },\n    },\n    data () {\n      return {\n        currentColor: normalizeColor(this.color),\n        currentLineCap: this.lineCap,\n        currentLineJoin: this.lineJoin,\n        currentLineDash: this.lineDash?.slice(),\n        currentLineDashOffset: this.lineDashOffset,\n        currentMiterLimit: this.miterLimit,\n        currentWidth: this.width,\n      }\n    },\n    computed: {\n      inputColor () {\n        return normalizeColor(this.color)\n      },\n      inputLineDash () {\n        return this.lineDash?.slice()\n      },\n    },\n    watch: {\n      rev () {\n        if (!this.$style) return\n\n        this.setColor(this.getColor())\n        this.setLineCap(this.getLineCap())\n        this.setLineJoin(this.getLineJoin())\n        this.setLineDash(this.getLineDash())\n        this.setLineDashOffset(this.getLineDashOffset())\n        this.setMiterLimit(this.getMiterLimit())\n        this.setWidth(this.getWidth())\n      },\n      .../*#__PURE__*/makeWatchers([\n        'inputColor',\n        'lineCap',\n        'lineJoin',\n        'inputLineDash',\n        'lineDashOffset',\n        'miterLimit',\n        'width',\n      ], inProp => {\n        const prop = inProp.slice(0, 5) === 'input' ? lowerFirst(inProp.slice(5)) : inProp\n        const setter = 'set' + upperFirst(prop)\n\n        return {\n          deep: [\n            'inputColor',\n            'inputLineDash',\n          ].includes(inProp),\n          handler (value) {\n            this[setter](value)\n          },\n        }\n      }),\n      .../*#__PURE__*/makeWatchers([\n        'currentColor',\n        'currentLineCap',\n        'currentLineJoin',\n        'currentLineDash',\n        'currentLineDashOffset',\n        'currentMiterLimit',\n        'currentWidth',\n      ], curProp => {\n        const prop = curProp.slice(0, 7) === 'current' ? lowerFirst(curProp.slice(7)) : curProp\n        const inProp = 'input' + upperFirst(prop)\n\n        return {\n          deep: [\n            'currentColor',\n            'currentLineDash',\n          ].includes(curProp),\n          handler (value) {\n            if (isEqual(value, coalesce(this[inProp], this[prop]))) return\n\n            this.$emit(`update:${prop}`, isObjectLike(value) ? clonePlainObject(value) : value)\n          },\n        }\n      }),\n      inputColor: {\n        deep: true,\n        handler (value) {\n          this.setColor(value)\n        },\n      },\n      currentColor: {\n        deep: true,\n        handler (value) {\n          if (isEqual(value, this.inputColor)) return\n\n          this.$emit('update:color', value?.slice())\n        },\n      },\n      lineCap (value) {\n        this.setLineCap(value)\n      },\n      currentLineCap (value) {\n        if (value === this.lineCap) return\n\n        this.$emit('update:lineCap', value)\n      },\n      lineJoin (value) {\n        this.setLineJoin(value)\n      },\n      currentLineJoin (value) {\n        if (value === this.lineJoin) return\n\n        this.$emit('update:lineJoin', value)\n      },\n      inputLineDash: {\n        deep: true,\n        handler (value) {\n          this.setLineDash(value)\n        },\n      },\n      currentLineDash: {\n        deep: true,\n        handler (value) {\n          if (isEqual(value, this.currentLineDash)) return\n\n          this.$emit('update:lineDash', value?.slice())\n        },\n      },\n      lineDashOffset (value) {\n        this.setLineDashOffset(value)\n      },\n      currentLineDashOffset (value) {\n        if (value === this.lineDashOffset) return\n\n        this.$emit('update:lineDashOffset', value)\n      },\n      miterLimit (value) {\n        this.setMiterLimit(value)\n      },\n      currentMiterLimit (value) {\n        if (value === this.miterLimit) return\n\n        this.$emit('update:miterLimit', value)\n      },\n      width (value) {\n        this.setWidth(value)\n      },\n      currentWidth (value) {\n        if (value === this.width) return\n\n        this.$emit('update:width', value)\n      },\n    },\n    created () {\n      this::defineServices()\n    },\n    methods: {\n      /**\n       * @return {StrokeStyle}\n       * @protected\n       */\n      createStyle () {\n        return new StrokeStyle({\n          color: this.currentColor,\n          lineCap: this.currentLineCap,\n          lineJoin: this.currentLineJoin,\n          lineDash: this.currentLineDash,\n          lineDashOffset: this.currentLineDashOffset,\n          miterLimit: this.currentMiterLimit,\n          width: this.currentWidth,\n        })\n      },\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async mount () {\n        this.$strokeStyleContainer?.setStroke(this)\n\n        return this::style.methods.mount()\n      },\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async unmount () {\n        if (this.$strokeStyleContainer?.getStrokeVm() === this) {\n          this.$strokeStyleContainer.setStroke(null)\n        }\n\n        return this::style.methods.unmount()\n      },\n      /**\n       * @return {Promise}\n       */\n      async refresh () {\n        await Promise.all([\n          this::style.methods.refresh(),\n          this.$strokeStyleContainer?.refresh(),\n        ])\n      },\n      /**\n       * @protected\n       */\n      syncNonObservable () {\n        this::style.methods.syncNonObservable()\n\n        this.setColor(this.getColor())\n        this.setLineCap(this.getLineCap())\n        this.setLineJoin(this.getLineJoin())\n        this.setLineDash(this.getLineDash())\n        this.setLineDashOffset(this.getLineDashOffset())\n        this.setMiterLimit(this.getMiterLimit())\n        this.setWidth(this.getWidth())\n      },\n      getColor () {\n        return coalesce(this.$style?.getColor(), this.currentColor)\n      },\n      setColor (color) {\n        color = normalizeColor(color)\n\n        if (!isEqual(color, this.currentColor)) {\n          this.currentColor = color\n          this.scheduleRefresh()\n        }\n        if (this.$style && !isEqual(color, this.$style.getColor())) {\n          this.$style.setColor(color)\n          this.scheduleRefresh()\n        }\n      },\n      getLineCap () {\n        return coalesce(this.$style?.getLineCap(), this.currentLineCap)\n      },\n      setLineCap (lineCap) {\n        if (lineCap !== this.currentLineCap) {\n          this.currentLineCap = lineCap\n          this.scheduleRefresh()\n        }\n        if (this.$style && lineCap !== this.$style.getLineCap()) {\n          this.$style.setLineCap(lineCap)\n          this.scheduleRefresh()\n        }\n      },\n      getLineJoin () {\n        return coalesce(this.$style?.getLineJoin(), this.currentLineJoin)\n      },\n      setLineJoin (lineJoin) {\n        if (lineJoin !== this.currentLineJoin) {\n          this.currentLineJoin = lineJoin\n        }\n        if (this.$style && lineJoin !== this.$style.getLineJoin()) {\n          this.$style.setLineJoin(lineJoin)\n          this.scheduleRefresh()\n        }\n      },\n      getLineDash () {\n        return coalesce(this.$style?.getLineDash(), this.currentLineDash)\n      },\n      setLineDash (lineDash) {\n        lineDash = lineDash?.slice()\n\n        if (!isEqual(lineDash, this.currentLineDash)) {\n          this.currentLineDash = lineDash\n          this.scheduleRefresh()\n        }\n        if (this.$style && !isEqual(lineDash, this.$style.getLineDash())) {\n          this.$style.setLineDash(lineDash)\n          this.scheduleRefresh()\n        }\n      },\n      getLineDashOffset () {\n        return coalesce(this.$style?.getLineDashOffset(), this.currentLineDashOffset)\n      },\n      setLineDashOffset (lineDashOffset) {\n        if (lineDashOffset !== this.currentLineDashOffset) {\n          this.currentLineDashOffset = lineDashOffset\n          this.scheduleRefresh()\n        }\n        if (this.$style && lineDashOffset !== this.$style.getLineDashOffset()) {\n          this.$style.setLineDashOffset(lineDashOffset)\n          this.scheduleRefresh()\n        }\n      },\n      getMiterLimit () {\n        return coalesce(this.$style?.getMiterLimit(), this.currentMiterLimit)\n      },\n      setMiterLimit (miterLimit) {\n        if (miterLimit !== this.currentMiterLimit) {\n          this.currentMiterLimit = miterLimit\n          this.scheduleRefresh()\n        }\n        if (this.$style && miterLimit !== this.$style.getMiterLimit()) {\n          this.$style.setMiterLimit(miterLimit)\n          this.scheduleRefresh()\n        }\n      },\n      getWidth () {\n        return coalesce(this.$style?.getWidth(), this.currentWidth)\n      },\n      setWidth (width) {\n        if (width !== this.currentWidth) {\n          this.currentWidth = width\n          this.scheduleRefresh()\n        }\n        if (this.$style && width !== this.$style.getWidth()) {\n          this.$style.setWidth(width)\n          this.scheduleRefresh()\n        }\n      },\n    },\n  }\n\n  function defineServices () {\n    Object.defineProperties(this, {\n      $strokeStyleContainer: {\n        enumerable: true,\n        get: () => this.$services?.strokeStyleContainer,\n      },\n    })\n  }\n</script>\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Circle as CircleStyle } from 'ol/style'\nimport { regShapeStyle } from '../../mixins'\nimport { coalesce, noop } from '../../utils'\nimport FillStyle from './fill.vue'\nimport StrokeStyle from './stroke.vue'\n\nexport default {\n  name: 'VlStyleCircle',\n  components: {\n    FillStyle,\n    StrokeStyle,\n  },\n  mixins: [\n    regShapeStyle,\n  ],\n  props: {\n    /* eslint-disable vue/require-prop-types */\n    radius: {\n      ...regShapeStyle.props.radius,\n      default: 5,\n    },\n    /* eslint-enable vue/require-prop-types */\n  },\n  data () {\n    return {\n      currentRadius: this.radius,\n    }\n  },\n  watch: {\n    rev () {\n      if (!this.$style) return\n\n      this.setRadius(this.getRadius())\n    },\n    currentRadius (value) {\n      if (value === this.radius) return\n\n      this.$emit('update:radius', value)\n    },\n  },\n  methods: {\n    /**\n     * @return {CircleStyle}\n     * @protected\n     */\n    createStyle () {\n      return new CircleStyle({\n        // ol/style/Image\n        displacement: this.inputDisplacement,\n        // ol/style/RegularShape\n        radius: this.currentRadius,\n        fill: this.$fill,\n        stroke: this.$stroke,\n      })\n    },\n    /**\n     * @protected\n     */\n    syncNonObservable () {\n      this::regShapeStyle.methods.syncNonObservable()\n\n      this.setRadius(this.getRadius())\n    },\n    getRadius () {\n      return coalesce(this.$style?.getRadius(), this.currentRadius)\n    },\n    setRadius (radius) {\n      if (radius !== this.currentRadius) {\n        this.currentRadius = radius\n        this.scheduleRefresh()\n      }\n      if (this.$style && radius !== this.$style.getRadius()) {\n        this.$style.setRadius(radius)\n        this.scheduleRefresh()\n      }\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    radiusChanged (value) {\n      this.setRadius(value)\n    },\n    pointsChanged: noop,\n    radius1Changed: noop,\n    radius2Changed: noop,\n    angleChanged: noop,\n  },\n}\n","/**\n * @module ol/style/IconAnchorUnits\n */\n/**\n * Icon anchor units. One of 'fraction', 'pixels'.\n * @enum {string}\n */\nexport default {\n    /**\n     * Anchor is a fraction\n     * @api\n     */\n    FRACTION: 'fraction',\n    /**\n     * Anchor is in pixels\n     * @api\n     */\n    PIXELS: 'pixels',\n};\n//# sourceMappingURL=IconAnchorUnits.js.map","/**\n * @module ol/style/IconOrigin\n */\n/**\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\n * @enum {string}\n */\nexport default {\n    /**\n     * Origin is at bottom left\n     * @api\n     */\n    BOTTOM_LEFT: 'bottom-left',\n    /**\n     * Origin is at bottom right\n     * @api\n     */\n    BOTTOM_RIGHT: 'bottom-right',\n    /**\n     * Origin is at top left\n     * @api\n     */\n    TOP_LEFT: 'top-left',\n    /**\n     * Origin is at top right\n     * @api\n     */\n    TOP_RIGHT: 'top-right',\n};\n//# sourceMappingURL=IconOrigin.js.map","\nimport { Icon as IconStyle } from 'ol/style'\nimport IconAnchorUnits from 'ol/style/IconAnchorUnits'\nimport IconOrigin from 'ol/style/IconOrigin'\nimport { imageStyle, makeChangeOrRecreateWatchers } from '../../mixins'\nimport { normalizeColor } from '../../ol-ext'\nimport { assert, coalesce, isEmpty, isEqual, round } from '../../utils'\n\nexport default {\n  name: 'VlStyleIcon',\n  mixins: [\n    imageStyle,\n  ],\n  props: {\n    src: String,\n    size: {\n      type: Array,\n      validator: val => val.length === 2,\n    },\n    img: Image,\n    imgSize: {\n      type: Array,\n      validator: val => val.length === 2,\n    },\n    anchor: {\n      type: Array,\n      default: () => [0.5, 0.5],\n      validator: val => val.length === 2,\n    },\n    anchorOrigin: {\n      type: String,\n      default: IconOrigin.TOP_LEFT, // bottom-left, bottom-right, top-left or top-right\n    },\n    anchorXUnits: {\n      type: String,\n      default: IconAnchorUnits.FRACTION, // pixels, fraction\n    },\n    anchorYUnits: {\n      type: String,\n      default: IconAnchorUnits.FRACTION, // pixels, fraction\n    },\n    color: [Array, String],\n    crossOrigin: String,\n    offset: {\n      type: Array,\n      default: () => [0, 0],\n      validator: val => val.length === 2,\n    },\n    offsetOrigin: {\n      type: String,\n      default: IconOrigin.TOP_LEFT, // bottom-left, bottom-right, top-left or top-right\n    },\n  },\n  data () {\n    return {\n      currentAnchor: this.anchor?.slice(),\n    }\n  },\n  computed: {\n    inputSize () {\n      return this.size?.slice()\n    },\n    inputImgSize () {\n      return this.imgSize?.slice()\n    },\n    inputAnchor () {\n      return this.anchor?.slice()\n    },\n    inputColor () {\n      return this.color ? normalizeColor(this.color) : undefined\n    },\n    inputOffset () {\n      return this.offset?.slice()\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$style) return\n\n      this.setAnchor(this.getAnchor())\n    },\n    inputAnchor: {\n      deep: true,\n      handler (value) {\n        this.setAnchor(value)\n      },\n    },\n    currentAnchor: {\n      deep: true,\n      handler (value) {\n        if (isEqual(value, this.inputAnchor)) return\n\n        this.$emit('update:anchor', value?.slice())\n      },\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'src',\n      'inputSize',\n      'img',\n      'inputImgSize',\n      'anchorOrigin',\n      'anchorXUnits',\n      'anchorYUnits',\n      'anchorYUnits',\n      'inputColor',\n      'crossOrigin',\n      'inputOffset',\n      'offsetOrigin',\n    ], [\n      'inputSize',\n      'inputImgSize',\n      'inputColor',\n      'inputOffset',\n    ]),\n  },\n  methods: {\n    /**\n     * @return {Icon}\n     * @protected\n     */\n    createStyle () {\n      assert(\n        (this.src && !this.img) || (!this.src && this.img),\n        \"vl-style-icon one of 'image' or 'src' prop must be provided.'\",\n      )\n      assert(\n        !this.img || (this.img && !isEmpty(this.imgSize)),\n        \"vl-style-icon 'imgSize' must be set when image is provided.\",\n      )\n\n      return new IconStyle({\n        // ol/style/Image\n        opacity: this.currentOpacity,\n        scale: this.currentScale,\n        rotateWithView: this.currentRotateWithView,\n        rotation: this.currentRotation,\n        displacement: this.inputDisplacement,\n        // ol/style/Icon\n        anchor: this.currentAnchor,\n        anchorOrigin: this.anchorOrigin,\n        anchorXUnits: this.anchorXUnits,\n        anchorYUnits: this.anchorYUnits,\n        color: this.inputColor,\n        crossOrigin: this.crossOrigin,\n        offset: this.inputOffset,\n        offsetOrigin: this.offsetOrigin,\n        size: this.inputSize,\n        src: this.src,\n        img: this.img,\n        imgSize: this.inputImgSize,\n      })\n    },\n    /**\n     * @protected\n     */\n    syncNonObservable () {\n      this::imageStyle.methods.syncNonObservable()\n\n      this.setAnchor(this.getAnchor())\n    },\n    getAnchor () {\n      const anchor = this.$style?.getAnchor()?.slice()\n      if (!anchor) return this.currentAnchor\n\n      const size = this.getSize()\n      if (!size) return\n\n      if (this.anchorXUnits === IconAnchorUnits.FRACTION) {\n        anchor[0] /= size[0]\n      }\n      if (this.anchorYUnits === IconAnchorUnits.FRACTION) {\n        anchor[1] /= size[1]\n      }\n      if ([IconOrigin.TOP_RIGHT, IconOrigin.BOTTOM_RIGHT].includes(this.anchorOrigin)) {\n        anchor[0] = 1 - anchor[0]\n      }\n      if ([IconOrigin.BOTTOM_LEFT, IconOrigin.BOTTOM_RIGHT].includes(this.anchorOrigin)) {\n        anchor[1] = 1 - anchor[1]\n      }\n      anchor[0] = round(anchor[0], 3)\n      anchor[1] = round(anchor[1], 3)\n\n      return anchor\n    },\n    setAnchor (anchor) {\n      anchor = anchor?.slice()\n\n      if (!isEqual(anchor, this.currentAnchor)) {\n        this.currentAnchor = anchor\n        this.scheduleRefresh()\n      }\n      if (this.$style && !isEqual(anchor, this.$style.getAnchor())) {\n        this.$style.setAnchor(anchor)\n        this.scheduleRefresh()\n      }\n    },\n    getColor () {\n      return coalesce(this.$style?.getColor(), this.inputColor)\n    },\n    getImage (pixelRatio) {\n      return this.$style?.getImage(pixelRatio)\n    },\n    getPixelRatio (pixelRatio) {\n      return this.$style?.getPixelRatio(pixelRatio)\n    },\n    getOrigin () {\n      return this.$style?.getOrigin()\n    },\n    getSize () {\n      return coalesce(this.$style?.getSize(), this.inputSize)\n    },\n    getSrc () {\n      return coalesce(this.$style?.getSrc(), this.src)\n    },\n    async load () {\n      (await this.resolveStyle()).load()\n    },\n  },\n}\n","\nimport { RegularShape as RegularShapeStyle } from 'ol/style'\nimport { regShapeStyle } from '../../mixins'\n\nexport default {\n  name: 'VlStyleRegShape',\n  mixins: [\n    regShapeStyle,\n  ],\n  methods: {\n    /**\n     * @return {RegularShapeStyle}\n     * @protected\n     */\n    createStyle () {\n      return new RegularShapeStyle({\n        // ol/style/Image\n        rotation: this.currentRotation,\n        rotateWithView: this.currentRotateWithView,\n        displacement: this.inputDisplacement,\n        // ol/style/RegularShape\n        points: this.points,\n        radius: this.radius,\n        radius1: this.radius1,\n        radius2: this.radius2,\n        angle: this.angle,\n        fill: this.$fill,\n        stroke: this.$stroke,\n      })\n    },\n  },\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Style } from 'ol/style'\nimport {\n  fillStyleContainer,\n  geometryContainer,\n  imageStyleContainer,\n  projTransforms,\n  strokeStyleContainer,\n  style,\n  textStyleContainer,\n  waitForMap,\n} from '../../mixins'\nimport { dumpFillStyle, dumpImageStyle, dumpStrokeStyle, dumpTextStyle, EPSG_3857 } from '../../ol-ext'\nimport {\n  clonePlainObject,\n  coalesce,\n  isEqual,\n  isObjectLike,\n  lowerFirst,\n  makeWatchers,\n  mergeDescriptors,\n  upperFirst,\n} from '../../utils'\nimport CircleStyle from './circle.vue'\nimport FillStyle from './fill.vue'\nimport StrokeStyle from './stroke.vue'\n\n/**\n * Style box component.\n * Wrapper for Style class. Can be inserted into component with setStyle/getStyle methods (vl-layer-vector, vl-feature & etc.)\n * and acts as a box for inner style components (vl-style-fill, vl-style-stroke, icon ...)\n */\nexport default {\n  name: 'VlStyle',\n  components: {\n    CircleStyle,\n    FillStyle,\n    StrokeStyle,\n  },\n  mixins: [\n    projTransforms,\n    fillStyleContainer,\n    strokeStyleContainer,\n    textStyleContainer,\n    imageStyleContainer,\n    geometryContainer,\n    style,\n    waitForMap,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  props: {\n    /**\n     * @type {number}\n     */\n    zIndex: {\n      type: Number,\n      default: 0,\n    },\n    /**\n     * @type {function}\n     */\n    renderer: Function,\n    /**\n     * @deprecated Use v-if directive.\n     * @todo remove in v0.13.x\n     */\n    condition: [Boolean, Function],\n  },\n  data () {\n    return {\n      viewProjection: EPSG_3857,\n      dataProjection: EPSG_3857,\n      currentZIndex: this.zIndex,\n      currentRenderer: this.renderer,\n    }\n  },\n  computed: {\n    stroke () {\n      if (!(this.rev && this.$stroke)) return\n\n      return dumpStrokeStyle(this.$stroke)\n    },\n    fill () {\n      if (!(this.rev && this.$fill)) return\n\n      return dumpFillStyle(this.$fill)\n    },\n    text () {\n      if (!(this.rev && this.$text)) return\n\n      return dumpTextStyle(this.$text)\n    },\n    image () {\n      if (!(this.rev && this.$image)) return\n\n      return dumpImageStyle(this.$image)\n    },\n    geometryDataProj () {\n      if (!(this.rev && this.$geometry)) return\n\n      return this.writeGeometryInDataProj(this.$geometry)\n    },\n    geometryViewProj () {\n      if (!(this.rev && this.$geometry)) return\n\n      return this.writeGeometryInViewProj(this.$geometry)\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$style) return\n\n      this.setZIndex(this.getZIndex())\n      this.setRenderer(this.getRenderer())\n    },\n    .../*#__PURE__*/makeWatchers([\n      'zIndex',\n      'renderer',\n    ], inProp => {\n      const prop = inProp.slice(0, 5) === 'input' ? lowerFirst(inProp.slice(5)) : inProp\n      const setter = 'set' + upperFirst(prop)\n\n      return function (value) {\n        this[setter](value)\n      }\n    }),\n    .../*#__PURE__*/makeWatchers([\n      'currentZIndex',\n      'currentRenderer',\n    ], curProp => {\n      const prop = curProp.slice(0, 7) === 'current' ? lowerFirst(curProp.slice(7)) : curProp\n      const inProp = 'input' + upperFirst(prop)\n\n      return function (value) {\n        if (isEqual(value, coalesce(this[inProp], this[prop]))) return\n\n        this.$emit(`update:${prop}`, isObjectLike(value) ? clonePlainObject(value) : value)\n      }\n    }),\n    .../*#__PURE__*/makeWatchers([\n      'fill',\n      'stroke',\n      'text',\n      'image',\n      'geometryDataProj',\n    ], prop => {\n      prop = prop.replace(/(DataProj|ViewProj)$/i, '')\n\n      return {\n        deep: true,\n        handler (value, prev) {\n          if (isEqual(value, prev)) return\n\n          this.$emit(`update:${prop}`, isObjectLike(value) ? clonePlainObject(value) : value)\n        },\n      }\n    }),\n  },\n  created () {\n    if ('production' !== 'production') {\n      if (this.condition) {\n        this.$logger.warn(\"'condition' is deprecated. Use v-if directive instead.\")\n      }\n    }\n\n    this::defineServices()\n  },\n  updated () {\n    if ('production' !== 'production') {\n      if (this.condition) {\n        this.$logger.warn(\"'condition' is deprecated. Use v-if directive instead.\")\n      }\n    }\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      await Promise.all([\n        this::style.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * @return {module:ol/style/Style~Style}\n     * @protected\n     */\n    createStyle () {\n      return new Style({\n        zIndex: this.currentZIndex,\n        renderer: this.currentRenderer,\n        fill: this.$fill,\n        stroke: this.$stroke,\n        image: this.$image,\n        text: this.$text,\n        geometry: this.$geometry,\n      })\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$styleContainer?.addStyle(this)\n\n      return this::style.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      this.$styleContainer?.removeStyle(this)\n\n      return this::style.methods.unmount()\n    },\n    /**\n     * @return {Promise}\n     */\n    async refresh () {\n      await Promise.all([\n        this::style.methods.refresh(),\n        this.$styleContainer?.refresh(),\n      ])\n    },\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return mergeDescriptors(\n        this::style.methods.getServices(),\n        this::fillStyleContainer.methods.getServices(),\n        this::strokeStyleContainer.methods.getServices(),\n        this::textStyleContainer.methods.getServices(),\n        this::imageStyleContainer.methods.getServices(),\n        this::geometryContainer.methods.getServices(),\n      )\n    },\n    /**\n     * @protected\n     */\n    syncNonObservable () {\n      this::style.methods.syncNonObservable()\n\n      this.setZIndex(this.getZIndex())\n      this.setRenderer(this.getRenderer())\n    },\n    getFillStyleTarget () {\n      return this.$style\n    },\n    getStrokeStyleTarget () {\n      return this.$style\n    },\n    getTextStyleTarget () {\n      return this.$style\n    },\n    getImageStyleTarget () {\n      return this.$style\n    },\n    getGeometryTarget () {\n      return this.$style\n    },\n    getZIndex () {\n      return coalesce(this.$style?.getZIndex(), this.currentZIndex)\n    },\n    setZIndex (zIndex) {\n      if (zIndex !== this.currentZIndex) {\n        this.currentZIndex = zIndex\n        this.scheduleRefresh()\n      }\n      if (this.$style && zIndex !== this.$style.getZIndex()) {\n        this.$style.setZIndex(zIndex)\n        this.scheduleRefresh()\n      }\n    },\n    getRenderer () {\n      return coalesce(this.$style?.getRenderer(), this.currentRenderer)\n    },\n    setRenderer (renderer) {\n      if (renderer !== this.currentRenderer) {\n        this.currentRenderer = renderer\n        this.scheduleRefresh()\n      }\n      if (this.$style && renderer !== this.$style.getRenderer()) {\n        this.$style.setRenderer(renderer)\n        this.scheduleRefresh()\n      }\n    },\n    // todo add support for geometry function\n    getGeometryFunction () {\n      return this.$style?.getGeometryFunction()\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {Object|undefined}\n     */\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $viewVm: {\n      enumerable: true,\n      get: () => this.$services?.viewVm,\n    },\n  })\n}\n","<template>\n  <i\n    :id=\"vmId\"\n    :class=\"vmClass\"\n    style=\"display: none !important;\">\n    <slot>\n      <CircleStyle :id=\"'vl-' + currentId + '-default-circle-style'\" />\n      <FillStyle :id=\"'vl-' + currentId + '-default-fill-style'\" />\n      <StrokeStyle :id=\"'vl-' + currentId + '-default-stroke-style'\" />\n    </slot>\n  </i>\n</template>\n\n<script>\n  import { Style } from 'ol/style'\n  import {\n    fillStyleContainer,\n    geometryContainer,\n    imageStyleContainer,\n    projTransforms,\n    strokeStyleContainer,\n    style,\n    textStyleContainer,\n    waitForMap,\n  } from '../../mixins'\n  import { dumpFillStyle, dumpImageStyle, dumpStrokeStyle, dumpTextStyle, EPSG_3857 } from '../../ol-ext'\n  import {\n    clonePlainObject,\n    coalesce,\n    isEqual,\n    isObjectLike,\n    lowerFirst,\n    makeWatchers,\n    mergeDescriptors,\n    upperFirst,\n  } from '../../utils'\n  import CircleStyle from './circle.vue'\n  import FillStyle from './fill.vue'\n  import StrokeStyle from './stroke.vue'\n\n  /**\n   * Style box component.\n   * Wrapper for Style class. Can be inserted into component with setStyle/getStyle methods (vl-layer-vector, vl-feature & etc.)\n   * and acts as a box for inner style components (vl-style-fill, vl-style-stroke, icon ...)\n   */\n  export default {\n    name: 'VlStyle',\n    components: {\n      CircleStyle,\n      FillStyle,\n      StrokeStyle,\n    },\n    mixins: [\n      projTransforms,\n      fillStyleContainer,\n      strokeStyleContainer,\n      textStyleContainer,\n      imageStyleContainer,\n      geometryContainer,\n      style,\n      waitForMap,\n    ],\n    stubVNode: {\n      empty: false,\n      attrs () {\n        return {\n          id: this.vmId,\n          class: this.vmClass,\n        }\n      },\n    },\n    props: {\n      /**\n       * @type {number}\n       */\n      zIndex: {\n        type: Number,\n        default: 0,\n      },\n      /**\n       * @type {function}\n       */\n      renderer: Function,\n      /**\n       * @deprecated Use v-if directive.\n       * @todo remove in v0.13.x\n       */\n      condition: [Boolean, Function],\n    },\n    data () {\n      return {\n        viewProjection: EPSG_3857,\n        dataProjection: EPSG_3857,\n        currentZIndex: this.zIndex,\n        currentRenderer: this.renderer,\n      }\n    },\n    computed: {\n      stroke () {\n        if (!(this.rev && this.$stroke)) return\n\n        return dumpStrokeStyle(this.$stroke)\n      },\n      fill () {\n        if (!(this.rev && this.$fill)) return\n\n        return dumpFillStyle(this.$fill)\n      },\n      text () {\n        if (!(this.rev && this.$text)) return\n\n        return dumpTextStyle(this.$text)\n      },\n      image () {\n        if (!(this.rev && this.$image)) return\n\n        return dumpImageStyle(this.$image)\n      },\n      geometryDataProj () {\n        if (!(this.rev && this.$geometry)) return\n\n        return this.writeGeometryInDataProj(this.$geometry)\n      },\n      geometryViewProj () {\n        if (!(this.rev && this.$geometry)) return\n\n        return this.writeGeometryInViewProj(this.$geometry)\n      },\n    },\n    watch: {\n      rev () {\n        if (!this.$style) return\n\n        this.setZIndex(this.getZIndex())\n        this.setRenderer(this.getRenderer())\n      },\n      .../*#__PURE__*/makeWatchers([\n        'zIndex',\n        'renderer',\n      ], inProp => {\n        const prop = inProp.slice(0, 5) === 'input' ? lowerFirst(inProp.slice(5)) : inProp\n        const setter = 'set' + upperFirst(prop)\n\n        return function (value) {\n          this[setter](value)\n        }\n      }),\n      .../*#__PURE__*/makeWatchers([\n        'currentZIndex',\n        'currentRenderer',\n      ], curProp => {\n        const prop = curProp.slice(0, 7) === 'current' ? lowerFirst(curProp.slice(7)) : curProp\n        const inProp = 'input' + upperFirst(prop)\n\n        return function (value) {\n          if (isEqual(value, coalesce(this[inProp], this[prop]))) return\n\n          this.$emit(`update:${prop}`, isObjectLike(value) ? clonePlainObject(value) : value)\n        }\n      }),\n      .../*#__PURE__*/makeWatchers([\n        'fill',\n        'stroke',\n        'text',\n        'image',\n        'geometryDataProj',\n      ], prop => {\n        prop = prop.replace(/(DataProj|ViewProj)$/i, '')\n\n        return {\n          deep: true,\n          handler (value, prev) {\n            if (isEqual(value, prev)) return\n\n            this.$emit(`update:${prop}`, isObjectLike(value) ? clonePlainObject(value) : value)\n          },\n        }\n      }),\n    },\n    created () {\n      if (process.env.NODE_ENV !== 'production') {\n        if (this.condition) {\n          this.$logger.warn(\"'condition' is deprecated. Use v-if directive instead.\")\n        }\n      }\n\n      this::defineServices()\n    },\n    updated () {\n      if (process.env.NODE_ENV !== 'production') {\n        if (this.condition) {\n          this.$logger.warn(\"'condition' is deprecated. Use v-if directive instead.\")\n        }\n      }\n    },\n    methods: {\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async beforeInit () {\n        await Promise.all([\n          this::style.methods.beforeInit(),\n          this::waitForMap.methods.beforeInit(),\n        ])\n      },\n      /**\n       * @return {module:ol/style/Style~Style}\n       * @protected\n       */\n      createStyle () {\n        return new Style({\n          zIndex: this.currentZIndex,\n          renderer: this.currentRenderer,\n          fill: this.$fill,\n          stroke: this.$stroke,\n          image: this.$image,\n          text: this.$text,\n          geometry: this.$geometry,\n        })\n      },\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async mount () {\n        this.$styleContainer?.addStyle(this)\n\n        return this::style.methods.mount()\n      },\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async unmount () {\n        this.$styleContainer?.removeStyle(this)\n\n        return this::style.methods.unmount()\n      },\n      /**\n       * @return {Promise}\n       */\n      async refresh () {\n        await Promise.all([\n          this::style.methods.refresh(),\n          this.$styleContainer?.refresh(),\n        ])\n      },\n      /**\n       * @returns {Object}\n       * @protected\n       */\n      getServices () {\n        return mergeDescriptors(\n          this::style.methods.getServices(),\n          this::fillStyleContainer.methods.getServices(),\n          this::strokeStyleContainer.methods.getServices(),\n          this::textStyleContainer.methods.getServices(),\n          this::imageStyleContainer.methods.getServices(),\n          this::geometryContainer.methods.getServices(),\n        )\n      },\n      /**\n       * @protected\n       */\n      syncNonObservable () {\n        this::style.methods.syncNonObservable()\n\n        this.setZIndex(this.getZIndex())\n        this.setRenderer(this.getRenderer())\n      },\n      getFillStyleTarget () {\n        return this.$style\n      },\n      getStrokeStyleTarget () {\n        return this.$style\n      },\n      getTextStyleTarget () {\n        return this.$style\n      },\n      getImageStyleTarget () {\n        return this.$style\n      },\n      getGeometryTarget () {\n        return this.$style\n      },\n      getZIndex () {\n        return coalesce(this.$style?.getZIndex(), this.currentZIndex)\n      },\n      setZIndex (zIndex) {\n        if (zIndex !== this.currentZIndex) {\n          this.currentZIndex = zIndex\n          this.scheduleRefresh()\n        }\n        if (this.$style && zIndex !== this.$style.getZIndex()) {\n          this.$style.setZIndex(zIndex)\n          this.scheduleRefresh()\n        }\n      },\n      getRenderer () {\n        return coalesce(this.$style?.getRenderer(), this.currentRenderer)\n      },\n      setRenderer (renderer) {\n        if (renderer !== this.currentRenderer) {\n          this.currentRenderer = renderer\n          this.scheduleRefresh()\n        }\n        if (this.$style && renderer !== this.$style.getRenderer()) {\n          this.$style.setRenderer(renderer)\n          this.scheduleRefresh()\n        }\n      },\n      // todo add support for geometry function\n      getGeometryFunction () {\n        return this.$style?.getGeometryFunction()\n      },\n    },\n  }\n\n  function defineServices () {\n    Object.defineProperties(this, {\n      /**\n       * @type {Object|undefined}\n       */\n      $mapVm: {\n        enumerable: true,\n        get: () => this.$services?.mapVm,\n      },\n      /**\n       * @type {Object|undefined}\n       */\n      $viewVm: {\n        enumerable: true,\n        get: () => this.$services?.viewVm,\n      },\n    })\n  }\n</script>\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Text as TextStyle } from 'ol/style'\nimport { fillStyleContainer, strokeStyleContainer, style } from '../../mixins'\nimport { dumpFillStyle, dumpStrokeStyle } from '../../ol-ext'\nimport {\n  clonePlainObject,\n  coalesce,\n  isEqual,\n  isObjectLike,\n  lowerFirst,\n  makeWatchers,\n  mergeDescriptors,\n  upperFirst,\n} from '../../utils'\nimport BackgroundStyle from './background.vue'\nimport FillStyle from './fill.vue'\nimport StrokeStyle from './stroke.vue'\n\nexport default {\n  name: 'VlStyleText',\n  components: {\n    BackgroundStyle,\n    FillStyle,\n    StrokeStyle,\n  },\n  mixins: [\n    fillStyleContainer,\n    strokeStyleContainer,\n    style,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  props: {\n    font: {\n      type: String,\n      default: '10px sans-serif', // css font format https://developer.mozilla.org/en-US/docs/Web/CSS/font?v=control\n    },\n    maxAngle: Number,\n    placement: String,\n    offsetX: {\n      type: Number,\n      default: 0,\n    },\n    offsetY: {\n      type: Number,\n      default: 0,\n    },\n    overflow: Boolean,\n    rotateWithView: {\n      type: Boolean,\n      default: false,\n    },\n    rotation: {\n      type: Number,\n      default: 0,\n    },\n    scale: {\n      type: Number,\n      default: 1,\n    },\n    text: String,\n    textAlign: String, // left, right, center, end, start\n    textBaseline: String, // bottom, top, middle, alphabetic, hanging, ideographic\n    padding: {\n      type: Array,\n      default: () => [0, 0, 0, 0],\n      validate: val => val.length && val.length === 4,\n    },\n  },\n  data () {\n    return {\n      currentFont: this.font,\n      currentMaxAngle: this.maxAngle,\n      currentPlacement: this.placement,\n      currentOffsetX: this.offsetX,\n      currentOffsetY: this.offsetY,\n      currentOverflow: this.overflow,\n      currentRotateWithView: this.rotateWithView,\n      currentRotation: this.rotation,\n      currentScale: this.scale,\n      currentText: this.text,\n      currentTextAlign: this.textAlign,\n      currentTextBaseline: this.textBaseline,\n      currentPadding: this.padding?.slice(),\n    }\n  },\n  computed: {\n    inputPadding () {\n      return this.padding?.slice()\n    },\n    stroke () {\n      if (!(this.rev && this.$stroke)) return\n\n      return dumpStrokeStyle(this.$stroke)\n    },\n    fill () {\n      if (!(this.rev && this.$fill)) return\n\n      return dumpFillStyle(this.$fill)\n    },\n    backgroundFill () {\n      if (!(this.rev && this.$bgFill)) return\n\n      return dumpFillStyle(this.$bgFill)\n    },\n    backgroundStroke () {\n      if (!(this.rev && this.$bgStroke)) return\n\n      return dumpStrokeStyle(this.$bgStroke)\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$style) return\n\n      this.setFont(this.getFont())\n      this.setMaxAngle(this.getMaxAngle())\n      this.setPlacement(this.getPlacement())\n      this.setOffsetX(this.getOffsetX())\n      this.setOffsetY(this.getOffsetY())\n      this.setOverflow(this.getOverflow())\n      this.setRotateWithView(this.getRotateWithView())\n      this.setRotation(this.getRotation())\n      this.setScale(this.getScale())\n      this.setText(this.getText())\n      this.setTextAlign(this.getTextAlign())\n      this.setTextBaseline(this.getTextBaseline())\n      this.setPadding(this.getPadding())\n    },\n    .../*#__PURE__*/makeWatchers([\n      'font',\n      'maxAngle',\n      'placement',\n      'offsetX',\n      'offsetY',\n      'overflow',\n      'rotateWithView',\n      'rotation',\n      'scale',\n      'text',\n      'textAlign',\n      'textBaseline',\n      'inputPadding',\n    ], inProp => {\n      const prop = inProp.slice(0, 5) === 'input' ? lowerFirst(inProp.slice(5)) : inProp\n      const setter = 'set' + upperFirst(prop)\n\n      return {\n        deep: [\n          'inputPadding',\n        ].includes(inProp),\n        handler (value) {\n          this[setter](value)\n        },\n      }\n    }),\n    .../*#__PURE__*/makeWatchers([\n      'currentFont',\n      'currentMaxAngle',\n      'currentPlacement',\n      'currentOffsetX',\n      'currentOffsetY',\n      'currentOverflow',\n      'currentRotateWithView',\n      'currentRotation',\n      'currentScale',\n      'currentText',\n      'currentTextAlign',\n      'currentTextBaseline',\n      'currentPadding',\n    ], curProp => {\n      const prop = curProp.slice(0, 7) === 'current' ? lowerFirst(curProp.slice(7)) : curProp\n      const inProp = 'input' + upperFirst(prop)\n\n      return {\n        deep: [\n          'currentPadding',\n        ].includes(curProp),\n        handler (value) {\n          if (isEqual(value, coalesce(this[inProp], this[prop]))) return\n\n          this.$emit(`update:${prop}`, isObjectLike(value) ? clonePlainObject(value) : value)\n        },\n      }\n    }),\n    .../*#__PURE__*/makeWatchers([\n      'fill',\n      'stroke',\n      'backgroundFill',\n      'backgroundStroke',\n    ], prop => ({\n      deep: true,\n      handler (value, prev) {\n        if (isEqual(value, prev)) return\n\n        this.$emit(`update:${prop}`, isObjectLike(value) ? clonePlainObject(value) : value)\n      },\n    })),\n  },\n  created () {\n    this._bgFill = undefined\n    this._bgFillVm = undefined\n    this._bgStroke = undefined\n    this._bgStrokeVm = undefined\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {Text}\n     * @protected\n     */\n    createStyle () {\n      return new TextStyle({\n        font: this.currentFont,\n        maxAngle: this.currentMaxAngle,\n        placement: this.currentPlacement,\n        offsetX: this.currentOffsetX,\n        offsetY: this.currentOffsetY,\n        overflow: this.currentOverflow,\n        rotateWithView: this.currentRotateWithView,\n        rotation: this.currentRotation,\n        scale: this.currentScale,\n        text: this.currentText,\n        textAlign: this.currentTextAlign,\n        textBaseline: this.currentTextBaseline,\n        padding: this.currentPadding,\n        fill: this.$fill,\n        stroke: this.$stroke,\n        backgroundFill: this.$bgFill,\n        backgroundStroke: this.$bgStroke,\n      })\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$textStyleContainer?.setText(this)\n\n      return this::style.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      if (this.$textStyleContainer?.getTextVm() === this) {\n        await this.$textStyleContainer.setText(null)\n      }\n\n      return this::style.methods.unmount()\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async refresh () {\n      await Promise.all([\n        this::style.methods.refresh(),\n        this.$textStyleContainer?.refresh(),\n      ])\n    },\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::style.methods.getServices(),\n        this::fillStyleContainer.methods.getServices(),\n        this::strokeStyleContainer.methods.getServices(),\n        {\n          get bgStyleContainer () { return vm },\n        },\n      )\n    },\n    /**\n     * @protected\n     */\n    syncNonObservable () {\n      this::style.methods.syncNonObservable()\n\n      this.setFont(this.getFont())\n      this.setMaxAngle(this.getMaxAngle())\n      this.setPlacement(this.getPlacement())\n      this.setOffsetX(this.getOffsetX())\n      this.setOffsetY(this.getOffsetY())\n      this.setOverflow(this.getOverflow())\n      this.setRotateWithView(this.getRotateWithView())\n      this.setRotation(this.getRotation())\n      this.setScale(this.getScale())\n      this.setText(this.getText())\n      this.setTextAlign(this.getTextAlign())\n      this.setTextBaseline(this.getTextBaseline())\n      this.setPadding(this.getPadding())\n    },\n    getFont () {\n      return coalesce(this.$style?.getFont(), this.currentFont)\n    },\n    setFont (font) {\n      if (font !== this.currentFont) {\n        this.currentFont = font\n        this.scheduleRefresh()\n      }\n      if (this.$style && font !== this.$style.getFont()) {\n        this.$style.setFont(font)\n        this.scheduleRefresh()\n      }\n    },\n    getMaxAngle () {\n      return coalesce(this.$style?.getMaxAngle(), this.currentMaxAngle)\n    },\n    setMaxAngle (maxAngle) {\n      if (maxAngle !== this.currentMaxAngle) {\n        this.currentMaxAngle = maxAngle\n        this.scheduleRefresh()\n      }\n      if (this.$style && maxAngle !== this.$style.getMaxAngle()) {\n        this.$style.setMaxAngle(maxAngle)\n        this.scheduleRefresh()\n      }\n    },\n    getOffsetX () {\n      return coalesce(this.$style?.getOffsetX(), this.currentOffsetX)\n    },\n    setOffsetX (offsetX) {\n      if (offsetX !== this.currentOffsetX) {\n        this.currentOffsetX = offsetX\n        this.scheduleRefresh()\n      }\n      if (this.$style && offsetX !== this.$style.getOffsetX()) {\n        this.$style.setOffsetX(offsetX)\n        this.scheduleRefresh()\n      }\n    },\n    getOffsetY () {\n      return coalesce(this.$style?.getOffsetY(), this.currentOffsetY)\n    },\n    setOffsetY (offsetY) {\n      if (offsetY !== this.currentOffsetY) {\n        this.currentOffsetY = offsetY\n        this.scheduleRefresh()\n      }\n      if (this.$style && offsetY !== this.$style.getOffsetY()) {\n        this.$style.setOffsetY(offsetY)\n        this.scheduleRefresh()\n      }\n    },\n    getOverflow () {\n      return coalesce(this.$style?.getOverflow(), this.currentOverflow)\n    },\n    setOverflow (overflow) {\n      if (overflow !== this.currentOverflow) {\n        this.currentOverflow = overflow\n        this.scheduleRefresh()\n      }\n      if (this.$style && overflow !== this.$style.getOverflow()) {\n        this.$style.setOverflow(overflow)\n        this.scheduleRefresh()\n      }\n    },\n    getPadding () {\n      return coalesce(this.$style?.getPadding(), this.currentPadding)\n    },\n    setPadding (padding) {\n      padding = padding?.slice()\n\n      if (!isEqual(padding, this.currentPadding)) {\n        this.currentPadding = padding\n        this.scheduleRefresh()\n      }\n      if (this.$style && !isEqual(padding, this.$style.getPadding())) {\n        this.$style.setPadding(padding)\n        this.scheduleRefresh()\n      }\n    },\n    getPlacement () {\n      return coalesce(this.$source?.getPlacement(), this.currentPlacement)\n    },\n    setPlacement (placement) {\n      if (placement !== this.currentPlacement) {\n        this.currentPlacement = placement\n        this.scheduleRefresh()\n      }\n      if (this.$style && placement !== this.$style.getPlacement()) {\n        this.$style.setPlacement(placement)\n        this.scheduleRefresh()\n      }\n    },\n    getRotateWithView () {\n      return coalesce(this.$style?.getRotateWithView(), this.currentRotateWithView)\n    },\n    setRotateWithView (rotateWithView) {\n      if (rotateWithView !== this.currentRotateWithView) {\n        this.currentRotateWithView = rotateWithView\n        this.scheduleRefresh()\n      }\n      if (this.$style && rotateWithView !== this.$style.getRotateWithView()) {\n        this.$style.setRotateWithView(rotateWithView)\n        this.scheduleRefresh()\n      }\n    },\n    getRotation () {\n      return coalesce(this.$style?.getRotation(), this.currentRotation)\n    },\n    setRotation (rotation) {\n      if (rotation !== this.currentRotation) {\n        this.currentRotation = rotation\n        this.scheduleRefresh()\n      }\n      if (this.$style && rotation !== this.$style.getRotation()) {\n        this.$style.setRotation(rotation)\n        this.scheduleRefresh()\n      }\n    },\n    getScale () {\n      return coalesce(this.$style?.getScale(), this.currentScale)\n    },\n    setScale (scale) {\n      if (scale !== this.currentScale) {\n        this.currentScale = scale\n        this.scheduleRefresh()\n      }\n      if (this.$style && scale !== this.$style.getScale()) {\n        this.$style.setScale(scale)\n        this.scheduleRefresh()\n      }\n    },\n    getText () {\n      return coalesce(this.$style?.getText(), this.currentText)\n    },\n    setText (text) {\n      if (text !== this.currentText) {\n        this.currentText = text\n        this.scheduleRefresh()\n      }\n      if (this.$style && text !== this.$style.getText()) {\n        this.$style.setText(text)\n        this.scheduleRefresh()\n      }\n    },\n    getTextAlign () {\n      return coalesce(this.$style?.getTextAlign(), this.currentTextAlign)\n    },\n    setTextAlign (textAlign) {\n      if (textAlign !== this.currentTextAlign) {\n        this.currentTextAlign = textAlign\n        this.scheduleRefresh()\n      }\n      if (this.$style && textAlign !== this.$style.getTextAlign()) {\n        this.$style.setTextAlign(textAlign)\n        this.scheduleRefresh()\n      }\n    },\n    getTextBaseline () {\n      return coalesce(this.$style?.getTextBaseline(), this.currentTextBaseline)\n    },\n    setTextBaseline (textBaseline) {\n      if (textBaseline !== this.currentTextBaseline) {\n        this.currentTextBaseline = textBaseline\n        this.scheduleRefresh()\n      }\n      if (this.$style && textBaseline !== this.$style.getTextBaseline()) {\n        this.$style.setTextBaseline(textBaseline)\n        this.scheduleRefresh()\n      }\n    },\n    getFillStyleTarget () {\n      return this.$style\n    },\n    getStrokeStyleTarget () {\n      return this.$style\n    },\n    getBackgroundFill () {\n      return this._bgFill\n    },\n    setBackgroundFill (fill) {\n      fill = fill?.$fill || fill\n      fill || (fill = undefined)\n\n      if (fill !== this._bgFill) {\n        this._bgFill = fill\n        this._bgFillVm = fill?.vm && fill.vm[0]\n        this.scheduleRefresh()\n      }\n      if (this.$style && fill !== this.$style.getBackgroundFill()) {\n        this.$style.setBackgroundFill(fill)\n        this.scheduleRefresh()\n      }\n    },\n    getBackgroundStroke () {\n      return this._bgStroke\n    },\n    setBackgroundStroke (stroke) {\n      stroke = stroke?.$stroke || stroke\n      stroke || (stroke = undefined)\n\n      if (stroke !== this._bgStroke) {\n        this._bgStroke = stroke\n        this._bgStrokeVm = stroke?.vm && stroke.vm[0]\n        this.scheduleRefresh()\n      }\n      if (this.$style && stroke !== this.$style.getBackgroundStroke()) {\n        this.$style.setBackgroundStroke(stroke)\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $textStyleContainer: {\n      enumerable: true,\n      get: () => this.$services?.textStyleContainer,\n    },\n    $bgFill: {\n      enumerable: true,\n      get: this.getBackgroundFill,\n    },\n    $bgFillVm: {\n      enumerable: true,\n      get: () => this._bgFillVm,\n    },\n    $bgStroke: {\n      enumerable: true,\n      get: this.getBackgroundStroke,\n    },\n    $bgStrokeVm: {\n      enumerable: true,\n      get: () => this._bgStrokeVm,\n    },\n  })\n}\n","<template>\n  <i\n    :id=\"vmId\"\n    :class=\"vmClass\"\n    style=\"display: none !important;\">\n    <slot>\n      <FillStyle\n        :id=\"'vl-' + currentId + '-default-fill-style'\"\n        color=\"#333\" />\n      <StrokeStyle\n        :id=\"'vl-' + currentId + '-default-stroke-style'\"\n        color=\"#eee\" />\n    </slot>\n    <BackgroundStyle :id=\"'vl-' + currentId + '-background-style'\">\n      <slot name=\"background\" />\n    </BackgroundStyle>\n  </i>\n</template>\n\n<script>\n  import { Text as TextStyle } from 'ol/style'\n  import { fillStyleContainer, strokeStyleContainer, style } from '../../mixins'\n  import { dumpFillStyle, dumpStrokeStyle } from '../../ol-ext'\n  import {\n    clonePlainObject,\n    coalesce,\n    isEqual,\n    isObjectLike,\n    lowerFirst,\n    makeWatchers,\n    mergeDescriptors,\n    upperFirst,\n  } from '../../utils'\n  import BackgroundStyle from './background.vue'\n  import FillStyle from './fill.vue'\n  import StrokeStyle from './stroke.vue'\n\n  export default {\n    name: 'VlStyleText',\n    components: {\n      BackgroundStyle,\n      FillStyle,\n      StrokeStyle,\n    },\n    mixins: [\n      fillStyleContainer,\n      strokeStyleContainer,\n      style,\n    ],\n    stubVNode: {\n      empty: false,\n      attrs () {\n        return {\n          id: this.vmId,\n          class: this.vmClass,\n        }\n      },\n    },\n    props: {\n      font: {\n        type: String,\n        default: '10px sans-serif', // css font format https://developer.mozilla.org/en-US/docs/Web/CSS/font?v=control\n      },\n      maxAngle: Number,\n      placement: String,\n      offsetX: {\n        type: Number,\n        default: 0,\n      },\n      offsetY: {\n        type: Number,\n        default: 0,\n      },\n      overflow: Boolean,\n      rotateWithView: {\n        type: Boolean,\n        default: false,\n      },\n      rotation: {\n        type: Number,\n        default: 0,\n      },\n      scale: {\n        type: Number,\n        default: 1,\n      },\n      text: String,\n      textAlign: String, // left, right, center, end, start\n      textBaseline: String, // bottom, top, middle, alphabetic, hanging, ideographic\n      padding: {\n        type: Array,\n        default: () => [0, 0, 0, 0],\n        validate: val => val.length && val.length === 4,\n      },\n    },\n    data () {\n      return {\n        currentFont: this.font,\n        currentMaxAngle: this.maxAngle,\n        currentPlacement: this.placement,\n        currentOffsetX: this.offsetX,\n        currentOffsetY: this.offsetY,\n        currentOverflow: this.overflow,\n        currentRotateWithView: this.rotateWithView,\n        currentRotation: this.rotation,\n        currentScale: this.scale,\n        currentText: this.text,\n        currentTextAlign: this.textAlign,\n        currentTextBaseline: this.textBaseline,\n        currentPadding: this.padding?.slice(),\n      }\n    },\n    computed: {\n      inputPadding () {\n        return this.padding?.slice()\n      },\n      stroke () {\n        if (!(this.rev && this.$stroke)) return\n\n        return dumpStrokeStyle(this.$stroke)\n      },\n      fill () {\n        if (!(this.rev && this.$fill)) return\n\n        return dumpFillStyle(this.$fill)\n      },\n      backgroundFill () {\n        if (!(this.rev && this.$bgFill)) return\n\n        return dumpFillStyle(this.$bgFill)\n      },\n      backgroundStroke () {\n        if (!(this.rev && this.$bgStroke)) return\n\n        return dumpStrokeStyle(this.$bgStroke)\n      },\n    },\n    watch: {\n      rev () {\n        if (!this.$style) return\n\n        this.setFont(this.getFont())\n        this.setMaxAngle(this.getMaxAngle())\n        this.setPlacement(this.getPlacement())\n        this.setOffsetX(this.getOffsetX())\n        this.setOffsetY(this.getOffsetY())\n        this.setOverflow(this.getOverflow())\n        this.setRotateWithView(this.getRotateWithView())\n        this.setRotation(this.getRotation())\n        this.setScale(this.getScale())\n        this.setText(this.getText())\n        this.setTextAlign(this.getTextAlign())\n        this.setTextBaseline(this.getTextBaseline())\n        this.setPadding(this.getPadding())\n      },\n      .../*#__PURE__*/makeWatchers([\n        'font',\n        'maxAngle',\n        'placement',\n        'offsetX',\n        'offsetY',\n        'overflow',\n        'rotateWithView',\n        'rotation',\n        'scale',\n        'text',\n        'textAlign',\n        'textBaseline',\n        'inputPadding',\n      ], inProp => {\n        const prop = inProp.slice(0, 5) === 'input' ? lowerFirst(inProp.slice(5)) : inProp\n        const setter = 'set' + upperFirst(prop)\n\n        return {\n          deep: [\n            'inputPadding',\n          ].includes(inProp),\n          handler (value) {\n            this[setter](value)\n          },\n        }\n      }),\n      .../*#__PURE__*/makeWatchers([\n        'currentFont',\n        'currentMaxAngle',\n        'currentPlacement',\n        'currentOffsetX',\n        'currentOffsetY',\n        'currentOverflow',\n        'currentRotateWithView',\n        'currentRotation',\n        'currentScale',\n        'currentText',\n        'currentTextAlign',\n        'currentTextBaseline',\n        'currentPadding',\n      ], curProp => {\n        const prop = curProp.slice(0, 7) === 'current' ? lowerFirst(curProp.slice(7)) : curProp\n        const inProp = 'input' + upperFirst(prop)\n\n        return {\n          deep: [\n            'currentPadding',\n          ].includes(curProp),\n          handler (value) {\n            if (isEqual(value, coalesce(this[inProp], this[prop]))) return\n\n            this.$emit(`update:${prop}`, isObjectLike(value) ? clonePlainObject(value) : value)\n          },\n        }\n      }),\n      .../*#__PURE__*/makeWatchers([\n        'fill',\n        'stroke',\n        'backgroundFill',\n        'backgroundStroke',\n      ], prop => ({\n        deep: true,\n        handler (value, prev) {\n          if (isEqual(value, prev)) return\n\n          this.$emit(`update:${prop}`, isObjectLike(value) ? clonePlainObject(value) : value)\n        },\n      })),\n    },\n    created () {\n      this._bgFill = undefined\n      this._bgFillVm = undefined\n      this._bgStroke = undefined\n      this._bgStrokeVm = undefined\n\n      this::defineServices()\n    },\n    methods: {\n      /**\n       * @returns {Text}\n       * @protected\n       */\n      createStyle () {\n        return new TextStyle({\n          font: this.currentFont,\n          maxAngle: this.currentMaxAngle,\n          placement: this.currentPlacement,\n          offsetX: this.currentOffsetX,\n          offsetY: this.currentOffsetY,\n          overflow: this.currentOverflow,\n          rotateWithView: this.currentRotateWithView,\n          rotation: this.currentRotation,\n          scale: this.currentScale,\n          text: this.currentText,\n          textAlign: this.currentTextAlign,\n          textBaseline: this.currentTextBaseline,\n          padding: this.currentPadding,\n          fill: this.$fill,\n          stroke: this.$stroke,\n          backgroundFill: this.$bgFill,\n          backgroundStroke: this.$bgStroke,\n        })\n      },\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async mount () {\n        this.$textStyleContainer?.setText(this)\n\n        return this::style.methods.mount()\n      },\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async unmount () {\n        if (this.$textStyleContainer?.getTextVm() === this) {\n          await this.$textStyleContainer.setText(null)\n        }\n\n        return this::style.methods.unmount()\n      },\n      /**\n       * @return {Promise<void>}\n       */\n      async refresh () {\n        await Promise.all([\n          this::style.methods.refresh(),\n          this.$textStyleContainer?.refresh(),\n        ])\n      },\n      /**\n       * @returns {Object}\n       * @protected\n       */\n      getServices () {\n        const vm = this\n\n        return mergeDescriptors(\n          this::style.methods.getServices(),\n          this::fillStyleContainer.methods.getServices(),\n          this::strokeStyleContainer.methods.getServices(),\n          {\n            get bgStyleContainer () { return vm },\n          },\n        )\n      },\n      /**\n       * @protected\n       */\n      syncNonObservable () {\n        this::style.methods.syncNonObservable()\n\n        this.setFont(this.getFont())\n        this.setMaxAngle(this.getMaxAngle())\n        this.setPlacement(this.getPlacement())\n        this.setOffsetX(this.getOffsetX())\n        this.setOffsetY(this.getOffsetY())\n        this.setOverflow(this.getOverflow())\n        this.setRotateWithView(this.getRotateWithView())\n        this.setRotation(this.getRotation())\n        this.setScale(this.getScale())\n        this.setText(this.getText())\n        this.setTextAlign(this.getTextAlign())\n        this.setTextBaseline(this.getTextBaseline())\n        this.setPadding(this.getPadding())\n      },\n      getFont () {\n        return coalesce(this.$style?.getFont(), this.currentFont)\n      },\n      setFont (font) {\n        if (font !== this.currentFont) {\n          this.currentFont = font\n          this.scheduleRefresh()\n        }\n        if (this.$style && font !== this.$style.getFont()) {\n          this.$style.setFont(font)\n          this.scheduleRefresh()\n        }\n      },\n      getMaxAngle () {\n        return coalesce(this.$style?.getMaxAngle(), this.currentMaxAngle)\n      },\n      setMaxAngle (maxAngle) {\n        if (maxAngle !== this.currentMaxAngle) {\n          this.currentMaxAngle = maxAngle\n          this.scheduleRefresh()\n        }\n        if (this.$style && maxAngle !== this.$style.getMaxAngle()) {\n          this.$style.setMaxAngle(maxAngle)\n          this.scheduleRefresh()\n        }\n      },\n      getOffsetX () {\n        return coalesce(this.$style?.getOffsetX(), this.currentOffsetX)\n      },\n      setOffsetX (offsetX) {\n        if (offsetX !== this.currentOffsetX) {\n          this.currentOffsetX = offsetX\n          this.scheduleRefresh()\n        }\n        if (this.$style && offsetX !== this.$style.getOffsetX()) {\n          this.$style.setOffsetX(offsetX)\n          this.scheduleRefresh()\n        }\n      },\n      getOffsetY () {\n        return coalesce(this.$style?.getOffsetY(), this.currentOffsetY)\n      },\n      setOffsetY (offsetY) {\n        if (offsetY !== this.currentOffsetY) {\n          this.currentOffsetY = offsetY\n          this.scheduleRefresh()\n        }\n        if (this.$style && offsetY !== this.$style.getOffsetY()) {\n          this.$style.setOffsetY(offsetY)\n          this.scheduleRefresh()\n        }\n      },\n      getOverflow () {\n        return coalesce(this.$style?.getOverflow(), this.currentOverflow)\n      },\n      setOverflow (overflow) {\n        if (overflow !== this.currentOverflow) {\n          this.currentOverflow = overflow\n          this.scheduleRefresh()\n        }\n        if (this.$style && overflow !== this.$style.getOverflow()) {\n          this.$style.setOverflow(overflow)\n          this.scheduleRefresh()\n        }\n      },\n      getPadding () {\n        return coalesce(this.$style?.getPadding(), this.currentPadding)\n      },\n      setPadding (padding) {\n        padding = padding?.slice()\n\n        if (!isEqual(padding, this.currentPadding)) {\n          this.currentPadding = padding\n          this.scheduleRefresh()\n        }\n        if (this.$style && !isEqual(padding, this.$style.getPadding())) {\n          this.$style.setPadding(padding)\n          this.scheduleRefresh()\n        }\n      },\n      getPlacement () {\n        return coalesce(this.$source?.getPlacement(), this.currentPlacement)\n      },\n      setPlacement (placement) {\n        if (placement !== this.currentPlacement) {\n          this.currentPlacement = placement\n          this.scheduleRefresh()\n        }\n        if (this.$style && placement !== this.$style.getPlacement()) {\n          this.$style.setPlacement(placement)\n          this.scheduleRefresh()\n        }\n      },\n      getRotateWithView () {\n        return coalesce(this.$style?.getRotateWithView(), this.currentRotateWithView)\n      },\n      setRotateWithView (rotateWithView) {\n        if (rotateWithView !== this.currentRotateWithView) {\n          this.currentRotateWithView = rotateWithView\n          this.scheduleRefresh()\n        }\n        if (this.$style && rotateWithView !== this.$style.getRotateWithView()) {\n          this.$style.setRotateWithView(rotateWithView)\n          this.scheduleRefresh()\n        }\n      },\n      getRotation () {\n        return coalesce(this.$style?.getRotation(), this.currentRotation)\n      },\n      setRotation (rotation) {\n        if (rotation !== this.currentRotation) {\n          this.currentRotation = rotation\n          this.scheduleRefresh()\n        }\n        if (this.$style && rotation !== this.$style.getRotation()) {\n          this.$style.setRotation(rotation)\n          this.scheduleRefresh()\n        }\n      },\n      getScale () {\n        return coalesce(this.$style?.getScale(), this.currentScale)\n      },\n      setScale (scale) {\n        if (scale !== this.currentScale) {\n          this.currentScale = scale\n          this.scheduleRefresh()\n        }\n        if (this.$style && scale !== this.$style.getScale()) {\n          this.$style.setScale(scale)\n          this.scheduleRefresh()\n        }\n      },\n      getText () {\n        return coalesce(this.$style?.getText(), this.currentText)\n      },\n      setText (text) {\n        if (text !== this.currentText) {\n          this.currentText = text\n          this.scheduleRefresh()\n        }\n        if (this.$style && text !== this.$style.getText()) {\n          this.$style.setText(text)\n          this.scheduleRefresh()\n        }\n      },\n      getTextAlign () {\n        return coalesce(this.$style?.getTextAlign(), this.currentTextAlign)\n      },\n      setTextAlign (textAlign) {\n        if (textAlign !== this.currentTextAlign) {\n          this.currentTextAlign = textAlign\n          this.scheduleRefresh()\n        }\n        if (this.$style && textAlign !== this.$style.getTextAlign()) {\n          this.$style.setTextAlign(textAlign)\n          this.scheduleRefresh()\n        }\n      },\n      getTextBaseline () {\n        return coalesce(this.$style?.getTextBaseline(), this.currentTextBaseline)\n      },\n      setTextBaseline (textBaseline) {\n        if (textBaseline !== this.currentTextBaseline) {\n          this.currentTextBaseline = textBaseline\n          this.scheduleRefresh()\n        }\n        if (this.$style && textBaseline !== this.$style.getTextBaseline()) {\n          this.$style.setTextBaseline(textBaseline)\n          this.scheduleRefresh()\n        }\n      },\n      getFillStyleTarget () {\n        return this.$style\n      },\n      getStrokeStyleTarget () {\n        return this.$style\n      },\n      getBackgroundFill () {\n        return this._bgFill\n      },\n      setBackgroundFill (fill) {\n        fill = fill?.$fill || fill\n        fill || (fill = undefined)\n\n        if (fill !== this._bgFill) {\n          this._bgFill = fill\n          this._bgFillVm = fill?.vm && fill.vm[0]\n          this.scheduleRefresh()\n        }\n        if (this.$style && fill !== this.$style.getBackgroundFill()) {\n          this.$style.setBackgroundFill(fill)\n          this.scheduleRefresh()\n        }\n      },\n      getBackgroundStroke () {\n        return this._bgStroke\n      },\n      setBackgroundStroke (stroke) {\n        stroke = stroke?.$stroke || stroke\n        stroke || (stroke = undefined)\n\n        if (stroke !== this._bgStroke) {\n          this._bgStroke = stroke\n          this._bgStrokeVm = stroke?.vm && stroke.vm[0]\n          this.scheduleRefresh()\n        }\n        if (this.$style && stroke !== this.$style.getBackgroundStroke()) {\n          this.$style.setBackgroundStroke(stroke)\n          this.scheduleRefresh()\n        }\n      },\n    },\n  }\n\n  function defineServices () {\n    Object.defineProperties(this, {\n      $textStyleContainer: {\n        enumerable: true,\n        get: () => this.$services?.textStyleContainer,\n      },\n      $bgFill: {\n        enumerable: true,\n        get: this.getBackgroundFill,\n      },\n      $bgFillVm: {\n        enumerable: true,\n        get: () => this._bgFillVm,\n      },\n      $bgStroke: {\n        enumerable: true,\n        get: this.getBackgroundStroke,\n      },\n      $bgStrokeVm: {\n        enumerable: true,\n        get: () => this._bgStrokeVm,\n      },\n    })\n  }\n</script>\n","\nimport { fillStyleContainer, olCmp, strokeStyleContainer, stubVNode } from '../../mixins'\nimport { dumpFillStyle, dumpStrokeStyle } from '../../ol-ext'\nimport { clonePlainObject, isEqual, isObjectLike, makeWatchers, mergeDescriptors, stubObject } from '../../utils'\n\nexport default {\n  name: 'VlStyleBackgroundAdapter',\n  mixins: [\n    stubVNode,\n    fillStyleContainer,\n    strokeStyleContainer,\n    olCmp,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  computed: {\n    stroke () {\n      if (!(this.rev && this.$strokeStyle)) return\n\n      return dumpStrokeStyle(this.$strokeStyle)\n    },\n    fill () {\n      if (!(this.rev && this.$fill)) return\n\n      return dumpFillStyle(this.$fill)\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeWatchers([\n      'fill',\n      'stroke',\n    ], prop => function (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit(`update:${prop}`, isObjectLike(value) ? clonePlainObject(value) : value)\n    }),\n  },\n  created () {\n    Object.defineProperties(this, {\n      $bgStyleContainer: {\n        enumerable: true,\n        get: () => this.$services?.bgStyleContainer,\n      },\n    })\n  },\n  methods: {\n    createOlObject () {\n      const obj = stubObject()\n      obj.id = this.currentId\n\n      return obj\n    },\n    getServices () {\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        this::fillStyleContainer.methods.getServices(),\n        this::strokeStyleContainer.methods.getServices(),\n      )\n    },\n    getFillStyleTarget () {\n      return {\n        getFill: () => this.$bgStyleContainer?.getBackgroundFill(),\n        setFill: style => this.$bgStyleContainer?.setBackgroundFill(style),\n      }\n    },\n    getStrokeStyleTarget () {\n      return {\n        getStroke: () => this.$bgStyleContainer?.getBackgroundStroke(),\n        setStroke: style => this.$bgStyleContainer?.setBackgroundStroke(style),\n      }\n    },\n  },\n}\n","import { pick } from '../../utils'\nimport CircleStyle from './circle.vue'\nimport FillStyle from './fill.vue'\nimport IconStyle from './icon.vue'\nimport RegShapeStyle from './reg-shape.vue'\nimport StrokeStyle from './stroke.vue'\nimport Style from './style.vue'\nimport TextStyle from './text.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(CircleStyle, options)\n  Object.assign(FillStyle, options)\n  Object.assign(IconStyle, options)\n  Object.assign(RegShapeStyle, options)\n  Object.assign(StrokeStyle, options)\n  Object.assign(Style, options)\n  Object.assign(TextStyle, options)\n\n  Vue.component(CircleStyle.name, CircleStyle)\n  Vue.component(FillStyle.name, FillStyle)\n  Vue.component(IconStyle.name, IconStyle)\n  Vue.component(RegShapeStyle.name, RegShapeStyle)\n  Vue.component(StrokeStyle.name, StrokeStyle)\n  Vue.component(Style.name, Style)\n  Vue.component(TextStyle.name, TextStyle)\n\n  // todo remove in v0.13.x\n  Vue.component('VlStyleBox', {\n    name: 'VlStyleBox',\n    extends: Style,\n    created () {\n      if (process.env.NODE_ENV !== 'production') {\n        this.$logger.warn('VlStyleBox component is deprecated. Use VlStyle component instead.')\n      }\n    },\n  })\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  CircleStyle,\n  FillStyle,\n  IconStyle,\n  RegShapeStyle,\n  StrokeStyle,\n  Style,\n  TextStyle,\n}\n","\nimport { olCmp, stubVNode, textStyleContainer } from '../../mixins'\nimport { dumpTextStyle } from '../../ol-ext'\nimport { clonePlainObject, isEqual, mergeDescriptors, stubObject } from '../../utils'\n\nexport default {\n  name: 'VlLayerGraticuleLatStyleAdapter',\n  mixins: [\n    stubVNode,\n    textStyleContainer,\n    olCmp,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  computed: {\n    text () {\n      if (!(this.rev && this.$text)) return\n\n      return dumpTextStyle(this.$text)\n    },\n  },\n  watch: {\n    text: {\n      deep: true,\n      handler (value, prev) {\n        if (!isEqual(value, prev)) return\n\n        this.$emit('update:text', value && clonePlainObject(value))\n      },\n    },\n  },\n  created () {\n    Object.defineProperties(this, {\n      $latStyleContainer: {\n        enumerable: true,\n        get: () => this.$services?.latStyleContainer,\n      },\n    })\n  },\n  methods: {\n    createOlObject () {\n      const obj = stubObject()\n      obj.id = this.currentId\n\n      return obj\n    },\n    getServices () {\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        this::textStyleContainer.methods.getServices(),\n      )\n    },\n    getTextStyleTarget () {\n      return {\n        getText: () => this.$latStyleContainer?.getLatLabelStyle(),\n        setText: style => this.$latStyleContainer?.setLatLabelStyle(style),\n      }\n    },\n  },\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport GraticuleLayer from 'ol/layer/Graticule'\nimport { Stroke, Text } from 'ol/style'\nimport { makeChangeOrRecreateWatchers, vectorLayer } from '../../mixins'\nimport { dumpStrokeStyle, dumpTextStyle } from '../../ol-ext'\nimport { assert, clonePlainObject, coalesce, isEqual, map, mergeDescriptors } from '../../utils'\nimport { FillStyle, StrokeStyle, TextStyle } from '../style'\nimport LatStyle from './lat-style.vue'\nimport LonStyle from './lon-style.vue'\nimport GStrokeStyle from './stroke-style.vue'\n\nexport default {\n  name: 'VlLayerGraticule',\n  components: {\n    LonStyle,\n    LatStyle,\n    GStrokeStyle,\n    TextStyle,\n    FillStyle,\n    StrokeStyle,\n  },\n  mixins: [\n    vectorLayer,\n  ],\n  props: {\n    // ol/layer/Graticule\n    maxLines: {\n      type: Number,\n      default: 100,\n    },\n    targetSize: {\n      type: Number,\n      default: 100,\n    },\n    showLabels: {\n      type: Boolean,\n      default: false,\n    },\n    lonLabelFormatter: Function,\n    latLabelFormatter: Function,\n    lonLabelPosition: {\n      type: Number,\n      default: 0,\n    },\n    latLabelPosition: {\n      type: Number,\n      default: 1,\n    },\n    intervals: {\n      type: Array,\n      default: () => [90, 45, 30, 20, 10, 5, 2, 1, 0.5, 0.2, 0.1, 0.05, 0.01, 0.005, 0.002, 0.001],\n    },\n    wrapX: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  computed: {\n    inputIntervals () {\n      return this.intervals?.slice()\n    },\n    meridians () {\n      if (!this.rev) return []\n\n      return map(this.getMeridians(), geom => this.writeGeometryInDataProj(geom))\n    },\n    parallels () {\n      if (!this.rev) return []\n\n      return map(this.getParallels(), geom => this.writeGeometryInDataProj(geom))\n    },\n    lonLabelStyle () {\n      if (!(this.rev && this.$lonLabelStyle)) return\n\n      return dumpTextStyle(this.$lonLabelStyle)\n    },\n    latLabelStyle () {\n      if (!(this.rev && this.$latLabelStyle)) return\n\n      return dumpTextStyle(this.$latLabelStyle)\n    },\n    strokeStyle () {\n      if (!(this.rev && this.$strokeStyle)) return\n\n      return dumpStrokeStyle(this.$strokeStyle)\n    },\n  },\n  watch: {\n    meridians: {\n      deep: true,\n      handler (value, prev) {\n        if (isEqual(value, prev)) return\n\n        this.$emit('update:meridians', clonePlainObject(value))\n      },\n    },\n    parallels: {\n      deep: true,\n      handler (value, prev) {\n        if (isEqual(value, prev)) return\n\n        this.$emit('update:parallels', clonePlainObject(value))\n      },\n    },\n    lonLabelStyle: {\n      deep: true,\n      handler (value, prev) {\n        if (isEqual(value, prev)) return\n\n        this.$emit('update:lonLabelStyle', value && clonePlainObject(value))\n      },\n    },\n    latLabelStyle: {\n      deep: true,\n      handler (value, prev) {\n        if (isEqual(value, prev)) return\n\n        this.$emit('update:latLabelStyle', value && clonePlainObject(value))\n      },\n    },\n    strokeStyle: {\n      deep: true,\n      handler (value, prev) {\n        if (isEqual(value, prev)) return\n\n        this.$emit('update:strokeStyle', value && clonePlainObject(value))\n      },\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'maxLines',\n      'targetSize',\n      'showLabels',\n      'lonLabelFormatter',\n      'latLabelFormatter',\n      'lonLabelPosition',\n      'latLabelPosition',\n      'inputIntervals',\n      'wrapX',\n    ], [\n      'inputIntervals',\n    ]),\n  },\n  created () {\n    this._lonLabelStyle = undefined\n    this._lonLabelStyleVm = undefined\n    this._latLabelStyle = undefined\n    this._latLabelStyleVm = undefined\n    this._strokeStyle = undefined\n    this._strokeStyleVm = undefined\n\n    Object.defineProperties(this, {\n      $lonLabelStyle: {\n        enumerable: true,\n        get: this.getLonLabelStyle,\n      },\n      $lonLabelStyleVm: {\n        enumerable: true,\n        get: this.getLonLabelStyleVm,\n      },\n      $latLabelStyle: {\n        enumerable: true,\n        get: this.getLatLabelStyle,\n      },\n      $latLabelStyleVm: {\n        enumerable: true,\n        get: this.getLatLabelStyleVm,\n      },\n      $strokeStyle: {\n        enumerable: true,\n        get: this.getStrokeStyle,\n      },\n      $strokeStyleVm: {\n        enumerable: true,\n        get: this.getStrokeStyleVm,\n      },\n    })\n  },\n  methods: {\n    createLayer () {\n      return new GraticuleLayer({\n        // ol/layer/Base\n        className: this.className,\n        opacity: this.currentOpacity,\n        visible: this.currentVisible,\n        extent: this.currentExtentViewProj,\n        zIndex: this.currentZIndex,\n        minResolution: this.currentMinResolution,\n        maxResolution: this.currentMaxResolution,\n        minZoom: this.currentMinZoom,\n        maxZoom: this.currentMaxZoom,\n        // ol/layer/Layer\n        render: this.render,\n        // ol/layer/Vector\n        renderOrder: this.renderOrder,\n        renderBuffer: this.renderBuffer,\n        declutter: this.declutter,\n        updateWhileAnimating: this.updateWhileAnimating,\n        updateWhileInteracting: this.updateWhileInteracting,\n        style: this.$style,\n        // ol/layer/Graticule\n        maxLines: this.maxLines,\n        strokeStyle: this.$strokeStyle,\n        targetSize: this.targetSize,\n        showLabels: this.showLabels,\n        lonLabelFormatter: this.lonLabelFormatter,\n        latLabelFormatter: this.latLabelFormatter,\n        lonLabelPosition: this.lonLabelPosition,\n        latLabelPosition: this.latLabelPosition,\n        lonLabelStyle: this.$lonLabelStyle,\n        latLabelStyle: this.$latLabelStyle,\n        intervals: this.inputIntervals,\n        wrapX: this.wrapX,\n      })\n    },\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::vectorLayer.methods.getServices(),\n        {\n          get lonStyleContainer () { return vm },\n          get latStyleContainer () { return vm },\n          get strokeStyleContainer () { return vm },\n        },\n      )\n    },\n    getMeridians () {\n      return coalesce(this.$layer?.getMeridians(), [])\n    },\n    getParallels () {\n      return coalesce(this.$layer?.getParallels(), [])\n    },\n    getLonLabelStyle () {\n      return this._lonLabelStyle\n    },\n    getLonLabelStyleVm () {\n      return this._lonLabelStyleVm\n    },\n    setLonLabelStyle (style) {\n      style = style?.$style || style\n      style || (style = undefined)\n      assert(!style || style instanceof Text, 'Invalid lon label style')\n\n      if (style === this._lonLabelStyle) return\n\n      this._lonLabelStyle = style\n      this._lonLabelStyleVm = style?.vm && style?.vm[0]\n\n      if (false) {\n        this.$logger.log('lonLabelStyle changed, scheduling recreate...')\n      }\n\n      this.scheduleRecreate()\n    },\n    getLatLabelStyle () {\n      return this._latLabelStyle\n    },\n    getLatLabelStyleVm () {\n      return this._latLabelStyleVm\n    },\n    setLatLabelStyle (style) {\n      style = style?.$style || style\n      style || (style = undefined)\n      assert(!style || style instanceof Text, 'Invalid lat label style')\n\n      if (style === this._latLabelStyle) return\n\n      this._latLabelStyle = style\n      this._latLabelStyleVm = style?.vm && style?.vm[0]\n\n      if (false) {\n        this.$logger.log('latLabelStyle changed, scheduling recreate...')\n      }\n\n      this.scheduleRecreate()\n    },\n    getStrokeStyle () {\n      return this._strokeStyle\n    },\n    getStrokeStyleVm () {\n      return this._strokeStyleVm\n    },\n    setStrokeStyle (style) {\n      style = style?.$style\n      style || (style = undefined)\n      assert(!style || style instanceof Stroke, 'Invalid stroke style')\n\n      if (style === this._strokeStyle) return\n\n      this._strokeStyle = style\n      this._strokeStyleVm = style?.vm && style?.vm[0]\n\n      if (false) {\n        this.$logger.log('strokeStyle changed, scheduling recreate...')\n      }\n\n      this.scheduleRecreate()\n    },\n  },\n}\n","\nimport { olCmp, stubVNode, textStyleContainer } from '../../mixins'\nimport { dumpTextStyle } from '../../ol-ext'\nimport { stubObject, mergeDescriptors, isEqual, clonePlainObject } from '../../utils'\n\nexport default {\n  name: 'VlLayerGraticuleLonStyleAdapter',\n  mixins: [\n    stubVNode,\n    textStyleContainer,\n    olCmp,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  computed: {\n    text () {\n      if (!(this.rev && this.$text)) return\n\n      return dumpTextStyle(this.$text)\n    },\n  },\n  watch: {\n    text: {\n      deep: true,\n      handler (value, prev) {\n        if (!isEqual(value, prev)) return\n\n        this.$emit('update:text', value && clonePlainObject(value))\n      },\n    },\n  },\n  created () {\n    Object.defineProperties(this, {\n      $lonStyleContainer: {\n        enumerable: true,\n        get: () => this.$services?.lonStyleContainer,\n      },\n    })\n  },\n  methods: {\n    createOlObject () {\n      const obj = stubObject()\n      obj.id = this.currentId\n\n      return obj\n    },\n    getServices () {\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        this::textStyleContainer.methods.getServices(),\n      )\n    },\n    getTextStyleTarget () {\n      return {\n        getText: () => this.$lonStyleContainer?.getLonLabelStyle(),\n        setText: style => this.$lonStyleContainer?.setLonLabelStyle(style),\n      }\n    },\n  },\n}\n","\nimport { olCmp, stubVNode, strokeStyleContainer } from '../../mixins'\nimport { dumpStrokeStyle } from '../../ol-ext'\nimport { stubObject, mergeDescriptors, isEqual, clonePlainObject } from '../../utils'\n\nexport default {\n  name: 'VlLayerGraticuleStrokeStyleAdapter',\n  mixins: [\n    stubVNode,\n    strokeStyleContainer,\n    olCmp,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  computed: {\n    stroke () {\n      if (!(this.rev && this.$stroke)) return\n\n      return dumpStrokeStyle(this.$stroke)\n    },\n  },\n  watch: {\n    stroke: {\n      deep: true,\n      handler (value, prev) {\n        if (isEqual(value, prev)) return\n\n        this.$emit('update:stroke', value && clonePlainObject(value))\n      },\n    },\n  },\n  created () {\n    Object.defineProperties(this, {\n      $strokeStyleContainer: {\n        enumerable: true,\n        get: () => this.$services?.strokeStyleContainer,\n      },\n    })\n  },\n  methods: {\n    createOlObject () {\n      const obj = stubObject()\n      obj.id = this.currentId\n\n      return obj\n    },\n    getServices () {\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        this::strokeStyleContainer.methods.getServices(),\n      )\n    },\n    getStrokeStyleTarget () {\n      return {\n        setStroke: style => this.$strokeStyleContainer.setStrokeStyle(style),\n        getStroke: () => this.$strokeStyleContainer.getStrokeStyle(),\n      }\n    },\n  },\n}\n","import { pick } from '../../utils'\nimport Layer from './layer.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Layer, options)\n\n  Vue.component(Layer.name, Layer)\n\n  // todo remove in v0.13.x\n  Vue.component('VlGraticule', {\n    name: 'VlGraticule',\n    extends: Layer,\n    created () {\n      if (process.env.NODE_ENV !== 'production') {\n        this.$logger.warn('VlGraticule component is deprecated. Use VlLayerGraticule component instead.')\n      }\n    },\n  })\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Layer,\n}\n","\nimport { Group as GroupLayer } from 'ol/layer'\nimport { baseLayer, layersContainer } from '../../mixins'\nimport { getLayerId } from '../../ol-ext'\nimport { isEqual, map, mergeDescriptors } from '../../utils'\n\nexport default {\n  name: 'VlLayerGroup',\n  mixins: [\n    layersContainer,\n    baseLayer,\n  ],\n  computed: {\n    layers () {\n      if (!this.rev) return []\n\n      return map(this.getLayers(), layer => ({\n        id: getLayerId(layer),\n        type: layer.constructor.name,\n      }))\n    },\n  },\n  watch: {\n    layers: {\n      deep: true,\n      handler (value, prev) {\n        if (isEqual(value, prev)) return\n\n        this.$emit('update:layers', value.slice())\n      },\n    },\n  },\n  methods: {\n    createLayer () {\n      return new GroupLayer({\n        // ol/layer/Base\n        className: this.className,\n        opacity: this.currentOpacity,\n        visible: this.currentVisible,\n        extent: this.currentExtentViewProj,\n        zIndex: this.currentZIndex,\n        minResolution: this.currentMinResolution,\n        maxResolution: this.currentMaxResolution,\n        minZoom: this.currentMinZoom,\n        maxZoom: this.currentMaxZoom,\n        // ol/layer/Group\n        layers: this.$layersCollection,\n      })\n    },\n    getServices () {\n      return mergeDescriptors(\n        this::baseLayer.methods.getServices(),\n        this::layersContainer.methods.getServices(),\n      )\n    },\n    subscribeAll () {\n      this::layersContainer.methods.subscribeAll()\n      this::baseLayer.methods.subscribeAll()\n    },\n  },\n}\n","import { pick } from '../../utils'\nimport Layer from './layer.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Layer, options)\n\n  Vue.component(Layer.name, Layer)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Layer,\n}\n","\nimport { Heatmap as HeatmapLayer } from 'ol/layer'\nimport { makeChangeOrRecreateWatchers, vectorLayer } from '../../mixins'\nimport { fromOlChangeEvent as obsFromOlChangeEvent } from '../../rx-ext'\nimport { addPrefix, assert, coalesce, isArray, isEqual, isNumber } from '../../utils'\n\nexport default {\n  name: 'VlLayerHeatmap',\n  mixins: [\n    vectorLayer,\n  ],\n  props: {\n    /**\n     * @type {string[]}\n     */\n    gradient: {\n      type: Array,\n      default: () => ['#0000ff', '#00ffff', '#00ff00', '#ffff00', '#ff0000'],\n    },\n    /**\n     * @type {number}\n     */\n    radius: {\n      type: Number,\n      default: 8,\n    },\n    /**\n     * @type {number}\n     */\n    blur: {\n      type: Number,\n      default: 15,\n    },\n    /**\n     * @type {string}\n     */\n    weight: {\n      type: [String, Function],\n      default: 'weight',\n    },\n  },\n  data () {\n    return {\n      currentGradient: this.gradient.slice(),\n      currentRadius: this.radius,\n      currentBlur: this.blur,\n    }\n  },\n  computed: {\n    inputGradient () {\n      return this.gradient.slice()\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$layer) return\n\n      if (!isEqual(this.currentGradient, this.$layer.getGradient())) {\n        this.currentGradient = this.$layer.getGradient()\n      }\n      if (this.currentRadius !== this.$layer.getRadius()) {\n        this.currentRadius = this.$layer.getRadius()\n      }\n      if (this.currentBlur !== this.$layer.getBlur()) {\n        this.currentBlur = this.$layer.getBlur()\n      }\n    },\n    inputGradient (value) {\n      this.setGradient(value)\n    },\n    currentGradient: {\n      deep: true,\n      handler (value) {\n        if (isEqual(value, this.inputGradient)) return\n\n        this.$emit('update:gradient', value.slice())\n      },\n    },\n    radius (value) {\n      this.setRadius(value)\n    },\n    currentRadius (value) {\n      if (value === this.radius) return\n\n      this.$emit('update:radius', value)\n    },\n    blur (value) {\n      this.setBlur(value)\n    },\n    currentBlur (value) {\n      if (value === this.blur) return\n\n      this.$emit('update:blur', value)\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'weight',\n    ]),\n  },\n  methods: {\n    /**\n     * @returns {HeatmapLayer}\n     */\n    createLayer () {\n      return new HeatmapLayer({\n        // ol/layer/Base\n        className: this.className,\n        opacity: this.currentOpacity,\n        visible: this.currentVisible,\n        extent: this.currentExtentViewProj,\n        zIndex: this.currentZIndex,\n        minResolution: this.currentMinResolution,\n        maxResolution: this.currentMaxResolution,\n        minZoom: this.currentMinZoom,\n        maxZoom: this.currentMaxZoom,\n        // ol/layer/Layer\n        render: this.render,\n        source: this.$source,\n        // ol/layer/BaseVector\n        renderOrder: this.renderOrder,\n        renderBuffer: this.renderBuffer,\n        declutter: this.declutter,\n        updateWhileAnimating: this.updateWhileAnimating,\n        updateWhileInteracting: this.updateWhileInteracting,\n        style: this.$style,\n        // ol/layer/Heatmap\n        blur: this.currentBlur,\n        gradient: this.currentGradient,\n        radius: this.currentRadius,\n        weight: this.weight,\n      })\n    },\n    subscribeAll () {\n      this::vectorLayer.methods.subscribeAll()\n      this::subscribeToLayerEvents()\n    },\n    getBlur () {\n      return coalesce(this.$layer?.getBlur(), this.currentBlur)\n    },\n    setBlur (blur) {\n      blur = Number(blur)\n      assert(isNumber(blur), 'Invalid blur')\n\n      if (blur !== this.currentBlur) {\n        this.currentBlur = blur\n      }\n      if (this.$layer && blur !== this.$layer.getBlur()) {\n        this.$layer.setBlur(blur)\n      }\n    },\n    getGradient () {\n      return coalesce(this.$layer?.getGradient(), this.currentGradient)\n    },\n    setGradient (gradient) {\n      assert(isArray(gradient), 'Invalid gradient')\n      gradient = gradient.slice()\n\n      if (!isEqual(gradient, this.currentGradient)) {\n        this.currentGradient = gradient\n      }\n      if (this.$layer && !isEqual(gradient, this.$layer.getGradient())) {\n        this.$layer.setGradient(gradient)\n      }\n    },\n    getRadius () {\n      return coalesce(this.$layer?.getRadius(), this.currentRadius)\n    },\n    setRadius (radius) {\n      radius = Number(radius)\n      assert(isNumber(radius), 'Invalid radius')\n\n      if (radius !== this.currentRadius) {\n        this.currentRadius = radius\n      }\n      if (this.$layer && radius !== this.$layer.getRadius()) {\n        this.$layer.setRadius(radius)\n      }\n    },\n  },\n}\n\nfunction subscribeToLayerEvents () {\n  const setterKey = addPrefix('set')\n  const propChanges = obsFromOlChangeEvent(this.$layer, [\n    'blur',\n    'gradient',\n    'radius',\n  ], true, evt => ({\n    ...evt,\n    setter: this[setterKey(evt.prop)],\n  }))\n  this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n}\n","<script>\n  import { Heatmap as HeatmapLayer } from 'ol/layer'\n  import { makeChangeOrRecreateWatchers, vectorLayer } from '../../mixins'\n  import { fromOlChangeEvent as obsFromOlChangeEvent } from '../../rx-ext'\n  import { addPrefix, assert, coalesce, isArray, isEqual, isNumber } from '../../utils'\n\n  export default {\n    name: 'VlLayerHeatmap',\n    mixins: [\n      vectorLayer,\n    ],\n    props: {\n      /**\n       * @type {string[]}\n       */\n      gradient: {\n        type: Array,\n        default: () => ['#0000ff', '#00ffff', '#00ff00', '#ffff00', '#ff0000'],\n      },\n      /**\n       * @type {number}\n       */\n      radius: {\n        type: Number,\n        default: 8,\n      },\n      /**\n       * @type {number}\n       */\n      blur: {\n        type: Number,\n        default: 15,\n      },\n      /**\n       * @type {string}\n       */\n      weight: {\n        type: [String, Function],\n        default: 'weight',\n      },\n    },\n    data () {\n      return {\n        currentGradient: this.gradient.slice(),\n        currentRadius: this.radius,\n        currentBlur: this.blur,\n      }\n    },\n    computed: {\n      inputGradient () {\n        return this.gradient.slice()\n      },\n    },\n    watch: {\n      rev () {\n        if (!this.$layer) return\n\n        if (!isEqual(this.currentGradient, this.$layer.getGradient())) {\n          this.currentGradient = this.$layer.getGradient()\n        }\n        if (this.currentRadius !== this.$layer.getRadius()) {\n          this.currentRadius = this.$layer.getRadius()\n        }\n        if (this.currentBlur !== this.$layer.getBlur()) {\n          this.currentBlur = this.$layer.getBlur()\n        }\n      },\n      inputGradient (value) {\n        this.setGradient(value)\n      },\n      currentGradient: {\n        deep: true,\n        handler (value) {\n          if (isEqual(value, this.inputGradient)) return\n\n          this.$emit('update:gradient', value.slice())\n        },\n      },\n      radius (value) {\n        this.setRadius(value)\n      },\n      currentRadius (value) {\n        if (value === this.radius) return\n\n        this.$emit('update:radius', value)\n      },\n      blur (value) {\n        this.setBlur(value)\n      },\n      currentBlur (value) {\n        if (value === this.blur) return\n\n        this.$emit('update:blur', value)\n      },\n      .../*#__PURE__*/makeChangeOrRecreateWatchers([\n        'weight',\n      ]),\n    },\n    methods: {\n      /**\n       * @returns {HeatmapLayer}\n       */\n      createLayer () {\n        return new HeatmapLayer({\n          // ol/layer/Base\n          className: this.className,\n          opacity: this.currentOpacity,\n          visible: this.currentVisible,\n          extent: this.currentExtentViewProj,\n          zIndex: this.currentZIndex,\n          minResolution: this.currentMinResolution,\n          maxResolution: this.currentMaxResolution,\n          minZoom: this.currentMinZoom,\n          maxZoom: this.currentMaxZoom,\n          // ol/layer/Layer\n          render: this.render,\n          source: this.$source,\n          // ol/layer/BaseVector\n          renderOrder: this.renderOrder,\n          renderBuffer: this.renderBuffer,\n          declutter: this.declutter,\n          updateWhileAnimating: this.updateWhileAnimating,\n          updateWhileInteracting: this.updateWhileInteracting,\n          style: this.$style,\n          // ol/layer/Heatmap\n          blur: this.currentBlur,\n          gradient: this.currentGradient,\n          radius: this.currentRadius,\n          weight: this.weight,\n        })\n      },\n      subscribeAll () {\n        this::vectorLayer.methods.subscribeAll()\n        this::subscribeToLayerEvents()\n      },\n      getBlur () {\n        return coalesce(this.$layer?.getBlur(), this.currentBlur)\n      },\n      setBlur (blur) {\n        blur = Number(blur)\n        assert(isNumber(blur), 'Invalid blur')\n\n        if (blur !== this.currentBlur) {\n          this.currentBlur = blur\n        }\n        if (this.$layer && blur !== this.$layer.getBlur()) {\n          this.$layer.setBlur(blur)\n        }\n      },\n      getGradient () {\n        return coalesce(this.$layer?.getGradient(), this.currentGradient)\n      },\n      setGradient (gradient) {\n        assert(isArray(gradient), 'Invalid gradient')\n        gradient = gradient.slice()\n\n        if (!isEqual(gradient, this.currentGradient)) {\n          this.currentGradient = gradient\n        }\n        if (this.$layer && !isEqual(gradient, this.$layer.getGradient())) {\n          this.$layer.setGradient(gradient)\n        }\n      },\n      getRadius () {\n        return coalesce(this.$layer?.getRadius(), this.currentRadius)\n      },\n      setRadius (radius) {\n        radius = Number(radius)\n        assert(isNumber(radius), 'Invalid radius')\n\n        if (radius !== this.currentRadius) {\n          this.currentRadius = radius\n        }\n        if (this.$layer && radius !== this.$layer.getRadius()) {\n          this.$layer.setRadius(radius)\n        }\n      },\n    },\n  }\n\n  function subscribeToLayerEvents () {\n    const setterKey = addPrefix('set')\n    const propChanges = obsFromOlChangeEvent(this.$layer, [\n      'blur',\n      'gradient',\n      'radius',\n    ], true, evt => ({\n      ...evt,\n      setter: this[setterKey(evt.prop)],\n    }))\n    this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n  }\n</script>\n","import { pick } from '../../utils'\nimport Layer from './layer.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Layer, options)\n\n  Vue.component(Layer.name, Layer)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Layer,\n}\n","\nimport { ImageArcGISRest as ImageArcGISRestSource } from 'ol/source'\nimport { arcgisSource, imageSource, makeChangeOrRecreateWatchers } from '../../mixins'\nimport { and, assert, coalesce, isEmpty, isFunction, isString, negate, noop } from '../../utils'\n\nconst validateUrl = /*#__PURE__*/and(isString, negate(isEmpty))\n\nexport default {\n  name: 'VlSourceImageArcgisRest',\n  mixins: [\n    arcgisSource,\n    imageSource,\n  ],\n  props: {\n    // ol/source/ImageArcGISRest\n    crossOrigin: String,\n    imageLoadFunction: Function,\n    /**\n     * @deprecated\n     * @todo remove later\n     */\n    imageLoadFunc: Function,\n    imageSmoothing: {\n      type: Boolean,\n      default: true,\n    },\n    ratio: {\n      type: Number,\n      default: 1.5,\n    },\n    url: {\n      type: String,\n      required: true,\n      validator: validateUrl,\n    },\n  },\n  data () {\n    return {\n      currentImageLoadFunction: this.imageLoadFunction,\n      currentUrl: this.url,\n    }\n  },\n  computed: {\n    inputImageLoadFunction () {\n      return this.imageLoadFunction || this.imageLoadFunc\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (this.currentImageLoadFunction !== this.$source.getImageLoadFunction()) {\n        this.currentImageLoadFunction = this.$source.getImageLoadFunction()\n      }\n      if (this.currentUrl !== this.$source.getUrl()) {\n        this.currentUrl = this.$source.getUrl()\n      }\n    },\n    url (value) {\n      this.setUrl(value)\n    },\n    currentUrl (value) {\n      if (value === this.url) return\n\n      this.$emit('update:url', value)\n    },\n    inputImageLoadFunction (value) {\n      this.setImageLoadFunction(value)\n    },\n    currentImageLoadFunction (value) {\n      if (value === this.imageLoadFunction) return\n\n      this.$emit('update:imageLoadFunction', value)\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'crossOrigin',\n      'imageSmoothing',\n      'ratio',\n    ]),\n  },\n  created () {\n    if ('production' !== 'production') {\n      if (this.imageLoadFunc) {\n        this.$logger.warn(\"'imageLoadFunc' prop is deprecated. Use 'imageLoadFunction' prop instead.\")\n      }\n    }\n\n    this.currentImageLoadFunction = this.inputImageLoadFunction\n  },\n  updated () {\n    if ('production' !== 'production') {\n      if (this.imageLoadFunc) {\n        this.$logger.warn(\"'imageLoadFunc' prop is deprecated. Use 'imageLoadFunction' prop instead.\")\n      }\n    }\n  },\n  methods: {\n    createSource () {\n      return new ImageArcGISRestSource({\n        // ol/source/Source\n        attributions: this.currentAttributions,\n        projection: this.resolvedDataProjection,\n        // ol/source/Image\n        resolutions: this.inputResolutions,\n        // ol/source/ImageArcGISRest\n        crossOrigin: this.crossOrigin,\n        hidpi: this.hidpi,\n        imageLoadFunction: this.currentImageLoadFunction,\n        imageSmoothing: this.imageSmoothing,\n        params: this.currentParams,\n        ratio: this.ratio,\n        url: this.currentUrl,\n      })\n    },\n    getUrl () {\n      return coalesce(this.$source?.getUrl(), this.currentUrl)\n    },\n    setUrl (url) {\n      assert(validateUrl(url), 'Invalid url')\n\n      if (url !== this.currentUrl) {\n        this.currentUrl = url\n      }\n      if (this.$source && url !== this.$source.getUrl()) {\n        this.$source.setUrl(url)\n      }\n    },\n    getImageLoadFunction () {\n      return coalesce(this.$source?.getImageLoadFunction(), this.currentImageLoadFunction)\n    },\n    setImageLoadFunction (func) {\n      assert(isFunction(func), 'Invalid image load function')\n\n      if (func !== this.currentImageLoadFunction) {\n        this.currentImageLoadFunction = func\n      }\n      if (this.$source && func !== this.$source.getImageLoadFunction()) {\n        this.$source.setImageLoadFunction(func)\n      }\n    },\n    stateChanged: noop,\n  },\n}\n","import { pick } from '../../utils'\nimport Source from './source.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Source, options)\n\n  Vue.component(Source.name, Source)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Source,\n}\n","\nimport { Image as ImageLayer } from 'ol/layer'\nimport { imageLayer } from '../../mixins'\n\n/**\n * Layer for server-rendered images that are available for arbitrary extents and resolutions.\n */\nexport default {\n  name: 'VlLayerImage',\n  mixins: [\n    imageLayer,\n  ],\n  methods: {\n    /**\n     * @return {Image}\n     * @protected\n     */\n    createLayer () {\n      return new ImageLayer({\n        // ol/layer/Base\n        className: this.className,\n        opacity: this.currentOpacity,\n        visible: this.currentVisible,\n        extent: this.currentExtentViewProj,\n        zIndex: this.currentZIndex,\n        minResolution: this.currentMinResolution,\n        maxResolution: this.currentMaxResolution,\n        minZoom: this.currentMinZoom,\n        maxZoom: this.currentMaxZoom,\n        // ol/layer/Layer\n        render: this.render,\n        source: this.$source,\n      })\n    },\n  },\n}\n","import { pick } from '../../utils'\nimport Layer from './layer.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Layer, options)\n\n  Vue.component(Layer.name, Layer)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Layer,\n}\n","\nimport { ImageStatic as ImageStaticSource } from 'ol/source'\nimport { imageSource, makeChangeOrRecreateWatchers } from '../../mixins'\nimport { coalesce, isEmpty, negate, noop } from '../../utils'\n\n/**\n * A layer source for displaying a single, static image.\n */\nexport default {\n  name: 'VlSourceImageStatic',\n  mixins: [\n    imageSource,\n  ],\n  props: {\n    // ol/source/ImageStatic\n    crossOrigin: String,\n    /**\n     * Image extent in the source projection.\n     * @type {number[]}\n     */\n    imageExtent: {\n      type: Array,\n      // required: true,\n      validator: value => value.length === 4,\n    },\n    /**\n     * @deprecated\n     * @todo remove later\n     */\n    imgExtent: {\n      type: Array,\n      validator: value => value.length === 4,\n    },\n    /**\n     * @deprecated Use `imgExtent` instead.\n     * @todo remove in v0.13.x\n     */\n    extent: {\n      type: Array,\n      validator: value => value.length === 4,\n    },\n    /**\n     * Optional function to load an image given a URL.\n     * @type {function|undefined}\n     */\n    imageLoadFunction: Function,\n    /**\n     * @deprecated\n     * @todo remove later\n     */\n    imgLoadFunc: Function,\n    /**\n     * @deprecated Use `imgLoadFunc` instead.\n     * @todo remove in v0.13.x\n     */\n    loadFunc: Function,\n    /**\n     * Image size in pixels.\n     * @type {number[]}\n     */\n    imageSize: {\n      type: Array,\n      validator: value => value.length === 2,\n    },\n    /**\n     * @deprecated\n     * @todo remove later\n     */\n    imgSize: {\n      type: Array,\n      validator: value => value.length === 2,\n    },\n    /**\n     * @deprecated Use `imgSize` instead.\n     * @todo remove in v0.13.x\n     */\n    size: {\n      type: Array,\n      validator: value => value.length === 2,\n    },\n    /**\n     * @type {boolean}\n     */\n    imageSmoothing: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * Image URL.\n     * @type {string}\n     */\n    url: {\n      type: String,\n      required: true,\n      validator: /*#__PURE__*/negate(isEmpty),\n    },\n  },\n  computed: {\n    inputImageExtent () {\n      return coalesce(this.imageExtent, this.imgExtent, this.extent)?.slice()\n    },\n    inputImageLoadFunction () {\n      return coalesce(this.imageLoadFunction, this.imgLoadFunc, this.loadFunc)\n    },\n    inputImageSize () {\n      return coalesce(this.imageSize, this.imgSize, this.size)?.slice()\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'crossOrigin',\n      'inputImageExtent',\n      'inputImageLoadFunction',\n      'inputImageSize',\n      'imageSmoothing',\n      'url',\n    ], [\n      'inputImageExtent',\n      'inputImageSize',\n    ]),\n  },\n  created () {\n    if ('production' !== 'production') {\n      if (this.extent) {\n        this.$logger.warn(\"'extent' is deprecated. Use `imageExtent` prop instead.\")\n      }\n      if (this.imgExtent) {\n        this.$logger.warn(\"'imgExtent' is deprecated. Use `imageExtent` prop instead.\")\n      }\n      if (this.loadFunc) {\n        this.$logger.warn(\"'loadFunc' is deprecated. Use `imageLoadFunction` prop instead.\")\n      }\n      if (this.imgLoadFunc) {\n        this.$logger.warn(\"'imgLoadFunc' is deprecated. Use `imageLoadFunction` prop instead.\")\n      }\n      if (this.size) {\n        this.$logger.warn(\"'size' is deprecated. Use `imageSize` prop instead.\")\n      }\n      if (this.imgSize) {\n        this.$logger.warn(\"'imgSize' is deprecated. Use `imageSize` prop instead.\")\n      }\n    }\n  },\n  updated () {\n    if ('production' !== 'production') {\n      if (this.extent) {\n        this.$logger.warn(\"'extent' is deprecated. Use `imageExtent` prop instead.\")\n      }\n      if (this.imgExtent) {\n        this.$logger.warn(\"'imgExtent' is deprecated. Use `imageExtent` prop instead.\")\n      }\n      if (this.loadFunc) {\n        this.$logger.warn(\"'loadFunc' is deprecated. Use `imageLoadFunction` prop instead.\")\n      }\n      if (this.imgLoadFunc) {\n        this.$logger.warn(\"'imgLoadFunc' is deprecated. Use `imageLoadFunction` prop instead.\")\n      }\n      if (this.size) {\n        this.$logger.warn(\"'size' is deprecated. Use `imageSize` prop instead.\")\n      }\n      if (this.imgSize) {\n        this.$logger.warn(\"'imgSize' is deprecated. Use `imageSize` prop instead.\")\n      }\n    }\n  },\n  methods: {\n    /**\n     * @return {ImageStatic}\n     * @protected\n     */\n    createSource () {\n      return new ImageStaticSource({\n        // ol/source/Source\n        attributions: this.currentAttributions,\n        projection: this.resolvedDataProjection,\n        // ol/source/ImageStatic\n        crossOrigin: this.crossOrigin,\n        imageExtent: this.inputImageExtent,\n        imageLoadFunction: this.inputImageLoadFunction,\n        imageSize: this.inputImageSize,\n        imageSmoothing: this.imageSmoothing,\n        url: this.url,\n      })\n    },\n    getUrl () {\n      return coalesce(this.$source?.getUrl(), this.url)\n    },\n    getImageExtent () {\n      return coalesce(this.$source?.getImageExtent(), this.inputImageExtent)\n    },\n    stateChanged: noop,\n  },\n}\n","import { pick } from '../../utils'\nimport Source from './source.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Source, options)\n\n  Vue.component(Source.name, Source)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Source,\n}\n","\nimport { ImageWMS as ImageWMSSource } from 'ol/source'\nimport { imageSource, makeChangeOrRecreateWatchers, wmsSource } from '../../mixins'\nimport { and, assert, coalesce, isEmpty, isFunction, isString, negate, noop } from '../../utils'\n\nconst validateUrl = /*#__PURE__*/and(isString, negate(isEmpty))\n\nexport default {\n  name: 'VlSourceImageWms',\n  mixins: [\n    wmsSource,\n    imageSource,\n  ],\n  props: {\n    // ol/source/ImageArcGISRest\n    crossOrigin: String,\n    imageLoadFunction: Function,\n    /**\n     * @deprecated\n     * @todo remove later\n     */\n    imageLoadFunc: Function,\n    imageSmoothing: {\n      type: Boolean,\n      default: true,\n    },\n    ratio: {\n      type: Number,\n      default: 1.5,\n    },\n    url: {\n      type: String,\n      required: true,\n      validator: validateUrl,\n    },\n  },\n  data () {\n    return {\n      currentImageLoadFunction: this.imageLoadFunction,\n      currentUrl: this.url,\n    }\n  },\n  computed: {\n    inputImageLoadFunction () {\n      return this.imageLoadFunction || this.imageLoadFunc\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (this.currentUrl !== this.$source.getUrl()) {\n        this.currentUrl = this.$source.getUrl()\n      }\n      if (this.currentImageLoadFunction !== this.$source.getImageLoadFunction()) {\n        this.currentImageLoadFunction = this.$source.getImageLoadFunction()\n      }\n    },\n    url (value) {\n      this.setUrl(value)\n    },\n    currentUrl (value) {\n      if (value === this.url) return\n\n      this.$emit('update:url', value)\n    },\n    inputImageLoadFunction (value) {\n      this.setImageLoadFunction(value)\n    },\n    currentImageLoadFunc (value) {\n      if (value === this.imageLoadFunction) return\n\n      this.$emit('update:imageLoadFunction', value)\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'crossOrigin',\n      'imageSmoothing',\n      'ratio',\n    ]),\n  },\n  created () {\n    if ('production' !== 'production') {\n      if (this.imageLoadFunc) {\n        this.$logger.warn(\"'imageLoadFunc' prop is deprecated. Use 'imageLoadFunction' prop instead.\")\n      }\n    }\n\n    this.currentImageLoadFunction = this.inputImageLoadFunction\n  },\n  updated () {\n    if ('production' !== 'production') {\n      if (this.imageLoadFunc) {\n        this.$logger.warn(\"'imageLoadFunc' prop is deprecated. Use 'imageLoadFunction' prop instead.\")\n      }\n    }\n  },\n  methods: {\n    createSource () {\n      return new ImageWMSSource({\n        // ol/source/Source\n        attributions: this.currentAttributions,\n        projection: this.resolvedDataProjection,\n        // ol/source/Image\n        resolutions: this.inputResolutions,\n        // ol/source/ImageWMS\n        crossOrigin: this.crossOrigin,\n        hidpi: this.hidpi,\n        serverType: this.serverType,\n        imageLoadFunction: this.currentImageLoadFunction,\n        imageSmoothing: this.imageSmoothing,\n        params: this.currentParams,\n        ratio: this.ratio,\n        url: this.currentUrl,\n      })\n    },\n    getUrl () {\n      return coalesce(this.$source?.getUrl(), this.currentUrl)\n    },\n    setUrl (url) {\n      assert(validateUrl(url), 'Invalid url')\n\n      if (url !== this.currentUrl) {\n        this.currentUrl = url\n      }\n      if (this.$source && url !== this.$source.getUrl()) {\n        this.$source.setUrls(url)\n      }\n    },\n    getImageLoadFunction () {\n      return coalesce(this.$source?.getImageLoadFunction(), this.currentImageLoadFunction)\n    },\n    setImageLoadFunction (func) {\n      assert(isFunction(func), 'Invalid image load function')\n\n      if (func !== this.currentImageLoadFunction) {\n        this.currentImageLoadFunction = func\n      }\n      if (this.$source && func !== this.$source.getImageLoadFunction()) {\n        this.$source.setImageLoadFunction(func)\n      }\n    },\n    stateChanged: noop,\n  },\n}\n","import { pick } from '../../utils'\nimport Source from './source.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Source, options)\n\n  Vue.component(Source.name, Source)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Source,\n}\n","/**\n * @module ol/MapBrowserEventType\n */\nimport EventType from './events/EventType.js';\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n    /**\n     * A true single click with no dragging and no double click. Note that this\n     * event is delayed by 250 ms to ensure that it is not a double click.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#singleclick\n     * @api\n     */\n    SINGLECLICK: 'singleclick',\n    /**\n     * A click with no dragging. A double click will fire two of this.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#click\n     * @api\n     */\n    CLICK: EventType.CLICK,\n    /**\n     * A true double click, with no dragging.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#dblclick\n     * @api\n     */\n    DBLCLICK: EventType.DBLCLICK,\n    /**\n     * Triggered when a pointer is dragged.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointerdrag\n     * @api\n     */\n    POINTERDRAG: 'pointerdrag',\n    /**\n     * Triggered when a pointer is moved. Note that on touch devices this is\n     * triggered when the map is panned, so is not the same as mousemove.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointermove\n     * @api\n     */\n    POINTERMOVE: 'pointermove',\n    POINTERDOWN: 'pointerdown',\n    POINTERUP: 'pointerup',\n    POINTEROVER: 'pointerover',\n    POINTEROUT: 'pointerout',\n    POINTERENTER: 'pointerenter',\n    POINTERLEAVE: 'pointerleave',\n    POINTERCANCEL: 'pointercancel',\n};\n//# sourceMappingURL=MapBrowserEventType.js.map","/**\n * @module ol/MapEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered after a map frame is rendered.\n     * @event module:ol/MapEvent~MapEvent#postrender\n     * @api\n     */\n    POSTRENDER: 'postrender',\n    /**\n     * Triggered when the map starts moving.\n     * @event module:ol/MapEvent~MapEvent#movestart\n     * @api\n     */\n    MOVESTART: 'movestart',\n    /**\n     * Triggered after the map is moved.\n     * @event module:ol/MapEvent~MapEvent#moveend\n     * @api\n     */\n    MOVEEND: 'moveend',\n};\n//# sourceMappingURL=MapEventType.js.map","\nimport { Vector as VectorLayer } from 'ol/layer'\nimport { vectorLayer } from '../../mixins'\n\n/**\n * Layer for data that is rendered client-side.\n */\nexport default {\n  name: 'VlLayerVector',\n  mixins: [\n    vectorLayer,\n  ],\n  props: {\n    /**\n     * @deprecated Use `vl-layer-vector-image` to render vector layer as image\n     * @todo remove in v0.13.x\n     */\n    renderMode: String,\n  },\n  created () {\n    if ('production' !== 'production') {\n      if (this.renderMode) {\n        this.$logger.warn(\"'renderMode' is deprecated. Use vl-layer-vector-image to render vector layer as image\")\n      }\n    }\n  },\n  updated () {\n    if ('production' !== 'production') {\n      if (this.renderMode) {\n        this.$logger.warn(\"'renderMode' is deprecated. Use vl-layer-vector-image to render vector layer as image\")\n      }\n    }\n  },\n  methods: {\n    /**\n     * @return {module:ol/layer/Vector~VectorLayer}\n     * @protected\n     */\n    createLayer () {\n      return new VectorLayer({\n        // ol/layer/Base\n        className: this.className,\n        opacity: this.currentOpacity,\n        visible: this.currentVisible,\n        extent: this.currentExtentViewProj,\n        zIndex: this.currentZIndex,\n        minResolution: this.currentMinResolution,\n        maxResolution: this.currentMaxResolution,\n        minZoom: this.currentMinZoom,\n        maxZoom: this.currentMaxZoom,\n        // ol/layer/Layer\n        render: this.render,\n        source: this.$source,\n        // ol/layer/BaseVector\n        renderOrder: this.renderOrder,\n        renderBuffer: this.renderBuffer,\n        declutter: this.declutter,\n        updateWhileAnimating: this.updateWhileAnimating,\n        updateWhileInteracting: this.updateWhileInteracting,\n        style: this.$style,\n      })\n    },\n  },\n}\n","import { pick } from '../../utils'\nimport Layer from './layer.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Layer, options)\n\n  Vue.component(Layer.name, Layer)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Layer,\n}\n","\nimport { vectorSource } from '../../mixins'\n\nexport default {\n  name: 'VlSourceVector',\n  mixins: [\n    vectorSource,\n  ],\n}\n","import { pick } from '../../utils'\nimport Source from './source.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Source, options)\n\n  Vue.component(Source.name, Source)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Source,\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { View } from 'ol'\nimport { get as getProj } from 'ol/proj'\nimport { merge as mergeObs } from 'rxjs'\nimport { distinctUntilKeyChanged, map as mapObs } from 'rxjs/operators'\nimport { makeChangeOrRecreateWatchers, olCmp, projTransforms, waitForMap } from '../../mixins'\nimport {\n  EPSG_3857,\n  getViewId,\n  initializeView,\n  isGeoJSONGeometry,\n  roundExtent,\n  roundPointCoords,\n  setViewId,\n} from '../../ol-ext'\nimport { fromOlChangeEvent as obsFromOlChangeEvent } from '../../rx-ext'\nimport { addPrefix, assert, coalesce, isArray, isEqual, isFunction, isNumber, noop } from '../../utils'\n\n/**\n * Represents a simple **2D view** of the map. This is the component to act upon to change the **center**,\n * **resolution**, and **rotation** of the map.\n */\nexport default {\n  name: 'VlView',\n  mixins: [\n    projTransforms,\n    olCmp,\n    waitForMap,\n  ],\n  stubVNode: {\n    empty () {\n      return this.vmId\n    },\n  },\n  props: {\n    /**\n     * @type {number[]}\n     */\n    center: {\n      type: Array,\n      default: () => [0, 0],\n      validator: value => value.length === 2 && value.every(isNumber),\n    },\n    /**\n     * @type {boolean}\n     */\n    constrainOnlyCenter: Boolean,\n    /**\n     * @type {number[]|undefined}\n     */\n    extent: {\n      type: Array,\n      validator: value => value.length === 4 && value.every(isNumber),\n    },\n    /**\n     * @type {boolean}\n     */\n    smoothExtentConstraint: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {number}\n     */\n    rotation: {\n      type: Number,\n      default: 0,\n    },\n    /**\n     * @type {boolean}\n     */\n    enableRotation: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {boolean|number}\n     */\n    constrainRotation: {\n      type: [Boolean, Number],\n      default: true,\n    },\n    /**\n     * @type {number|undefined}\n     */\n    resolution: Number,\n    /**\n     * @type {number[]|undefined}\n     */\n    resolutions: {\n      type: Array,\n      validator: value => value.every(isNumber),\n    },\n    /**\n     * @type {number|undefined}\n     */\n    maxResolution: Number,\n    /**\n     * @type {number|undefined}\n     */\n    minResolution: Number,\n    /**\n     * @type {boolean}\n     */\n    constrainResolution: Boolean,\n    /**\n     * @type {boolean}\n     */\n    smoothResolutionConstraint: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {number}\n     */\n    zoom: {\n      type: Number,\n      default: 0,\n    },\n    /**\n     * @type {number}\n     */\n    zoomFactor: {\n      type: Number,\n      default: 2,\n    },\n    /**\n     * @type {number}\n     */\n    maxZoom: {\n      type: Number,\n      default: 28,\n    },\n    /**\n     * @type {number}\n     */\n    minZoom: {\n      type: Number,\n      default: 0,\n    },\n    /**\n     * @type {boolean}\n     */\n    multiWorld: Boolean,\n    /**\n     * @type {string}\n     */\n    projection: {\n      type: String,\n      default: EPSG_3857,\n      validator: value => getProj(value) != null,\n    },\n    showFullExtent: Boolean,\n  },\n  data () {\n    return {\n      dataProjection: this.projection,\n      currentProjection: this.projection,\n      currentCenterViewProj: roundPointCoords(this.center),\n      currentZoom: this.zoom,\n      currentRotation: this.rotation,\n      currentResolution: this.resolution,\n      currentMinZoom: this.minZoom,\n      currentMaxZoom: this.maxZoom,\n      currentResolutions: this.resolutions?.slice(),\n      currentMaxResolution: this.maxResolution,\n      currentMinResolution: this.minResolution,\n    }\n  },\n  computed: {\n    centerDataProj () {\n      return roundPointCoords(this.center)\n    },\n    centerViewProj () {\n      return this.pointToViewProj(this.center)\n    },\n    currentCenterDataProj () {\n      return this.pointToDataProj(this.currentCenterViewProj)\n    },\n    extentDataProj () {\n      return roundExtent(this.extent)\n    },\n    extentViewProj () {\n      return this.extentToViewProj(this.extent)\n    },\n    inputResolutions () {\n      return this.resolutions?.slice()\n    },\n    visibleExtentDataProj () {\n      if (!this.rev) return\n\n      return this.getExtent()?.slice()\n    },\n    visibleExtentViewProj () {\n      if (!this.rev) return\n\n      return this.getExtent(true)?.slice()\n    },\n    animating () {\n      return !!(this.rev && this.getAnimating())\n    },\n    interacting () {\n      return !!(this.rev && this.getInteracting())\n    },\n    resolvedViewProjection () {\n      return this.currentProjection\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$view) return\n\n      if (this.currentProjection !== this.$view.getProjection().getCode()) {\n        this.currentProjection = this.$view.getProjection().getCode()\n      }\n      if (!isEqual(this.currentCenterViewProj, this.$view.getCenter())) {\n        this.currentCenterViewProj = this.$view.getCenter()\n      }\n      if (this.currentZoom !== this.$view.getZoom()) {\n        this.currentZoom = this.$view.getZoom()\n      }\n      if (this.currentRotation !== this.$view.getRotation()) {\n        this.currentRotation = this.$view.getRotation()\n      }\n      if (this.currentResolution !== this.$view.getResolution()) {\n        this.currentResolution = this.$view.getResolution()\n      }\n      if (this.currentMinZoom !== this.$view.getMinZoom()) {\n        this.currentMinZoom = this.$view.getMinZoom()\n      }\n      if (this.currentMaxZoom !== this.$view.getMaxZoom()) {\n        this.currentMaxZoom = this.$view.getMaxZoom()\n      }\n      if (!isEqual(this.currentResolutions, this.$view.getResolutions())) {\n        this.currentResolutions = this.$view.getResolutions()\n      }\n      if (this.currentMaxResolution !== this.$view.getMaxResolution()) {\n        this.currentMaxResolution = this.$view.getMaxResolution()\n      }\n      if (this.currentMinResolution !== this.$view.getMinResolution()) {\n        this.currentMinResolution = this.$view.getMinResolution()\n      }\n    },\n    centerViewProj: {\n      deep: true,\n      handler (value, prev) {\n        if (this.getAnimating()) return\n\n        this.setCenter(value, true)\n      },\n    },\n    currentCenterDataProj: {\n      deep: true,\n      handler (value, prev) {\n        if (isEqual(value, this.centerDataProj)) return\n\n        this.$emit('update:center', value.slice())\n      },\n    },\n    rotation (value) {\n      if (this.getAnimating()) return\n\n      this.setRotation(value)\n    },\n    currentRotation (value) {\n      if (value === this.rotation) return\n\n      this.$emit('update:rotation', value)\n    },\n    resolution (value) {\n      if (this.getAnimating()) return\n\n      this.setResolution(value)\n    },\n    currentResolution (value) {\n      if (value === this.resolution) return\n\n      this.$emit('update:resolution', value)\n    },\n    constrainResolution (value) {\n      this.setConstrainResolution(value)\n    },\n    zoom (value) {\n      if (this.getAnimating()) return\n\n      this.setZoom(value)\n    },\n    currentZoom (value) {\n      if (value === this.zoom) return\n\n      this.$emit('update:zoom', value)\n    },\n    minZoom (value) {\n      this.setMinZoom(value)\n    },\n    currentMinZoom (value) {\n      if (value === this.minZoom) return\n\n      this.$emit('update:minZoom', value)\n    },\n    maxZoom (value) {\n      this.setMaxZoom(value)\n    },\n    currentMaxZoom (value) {\n      if (value === this.maxZoom) return\n\n      this.$emit('update:maxZoom', value)\n    },\n    inputResolutions: {\n      deep: true,\n      handler (value) {\n        if (value === this.currentResolutions) return\n\n        if (false) {\n          this.$logger.log(\n            'resolutions changed, scheduling recreate... %O ===> %O',\n            this.currentResolutions,\n            value,\n          )\n        }\n\n        this.currentResolutions = value?.slice()\n\n        return this.scheduleRecreate()\n      },\n    },\n    currentResolutions: {\n      deep: true,\n      handler (value) {\n        if (isEqual(value, this.inputResolutions)) return\n\n        this.$emit('update:resolutions', value?.slice())\n      },\n    },\n    maxResolution (value) {\n      if (value === this.currentMaxResolution) return\n\n      if (false) {\n        this.$logger.log(\n          'maxResolution changed, scheduling recreate... %O ===> %O',\n          this.currentMaxResolution,\n          value,\n        )\n      }\n\n      this.currentMaxResolution = value\n\n      return this.scheduleRecreate()\n    },\n    currentMaxResolution (value) {\n      if (value === this.maxResolution) return\n\n      this.$emit('update:maxResolution', value)\n    },\n    minResolution (value) {\n      if (value === this.currentMinResolution) return\n\n      if (false) {\n        this.$logger.log(\n          'minResolution changed, scheduling recreate... %O ===> %O',\n          this.currentMinResolution,\n          value,\n        )\n      }\n\n      this.currentMinResolution = value\n\n      return this.scheduleRecreate()\n    },\n    currentMinResolution (value) {\n      if (value === this.minResolution) return\n\n      this.$emit('update:minResolution', value)\n    },\n    projection (value) {\n      if (value === this.currentProjection) return\n\n      if (false) {\n        this.$logger.log(\n          'projection changed, scheduling recreate... %O ===> %O',\n          this.currentProjection,\n          value,\n        )\n      }\n\n      this.currentProjection = this.dataProjection = value\n      // reset current resolution fields to inputs\n      // so zoom fields will take precedence\n      this.currentResolution = this.resolution\n      this.currentResolutions = this.inputResolutions?.slice()\n      this.currentMaxResolution = this.maxResolution\n      this.currentMinResolution = this.minResolution\n\n      return this.scheduleRecreate()\n    },\n    currentProjection (value) {\n      if (value === this.projection) return\n\n      this.$emit('update:projection', value)\n    },\n    animating (value, prev) {\n      if (value === prev) return\n\n      this.$emit('update:animating', value)\n    },\n    interacting (value, prev) {\n      if (value === prev) return\n\n      this.$emit('update:interacting', value)\n    },\n    visibleExtentDataProj: {\n      deep: true,\n      handler (value, prev) {\n        if (isEqual(value, prev)) return\n\n        this.$emit('update:visibleExtent', value?.slice())\n      },\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'constrainOnlyCenter',\n      'smoothExtentConstraint',\n      'enableRotation',\n      'constrainRotation',\n      'constrainResolution',\n      'smoothResolutionConstraint',\n      'zoomFactor',\n      'multiWorld',\n      'extentViewProj',\n    ], [\n      'extentViewProj',\n    ]),\n  },\n  created () {\n    this::defineServices()\n\n    this.currentCenterViewProj = this.centerViewProj.slice()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      await Promise.all([\n        this::olCmp.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * @return {module:ol/View~View}\n     * @protected\n     */\n    createOlObject () {\n      const view = new View({\n        center: this.currentCenterViewProj,\n        constrainOnlyCenter: this.constrainOnlyCenter,\n        extent: this.extentViewProj,\n        smoothExtentConstraint: this.smoothExtentConstraint,\n        rotation: this.currentRotation,\n        enableRotation: this.enableRotation,\n        constrainRotation: this.constrainRotation,\n        resolution: this.currentResolution,\n        resolutions: this.currentResolutions,\n        maxResolution: this.currentMaxResolution,\n        minResolution: this.currentMinResolution,\n        constrainResolution: this.constrainResolution,\n        smoothResolutionConstraint: this.smoothResolutionConstraint,\n        zoom: this.currentZoom,\n        zoomFactor: this.zoomFactor,\n        maxZoom: this.currentMaxZoom,\n        minZoom: this.currentMinZoom,\n        multiWorld: this.multiWorld,\n        projection: this.currentProjection,\n        showFullExtent: this.showFullExtent,\n      })\n      initializeView(view, this.currentId)\n\n      return view\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$viewContainer?.setView(this)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    async unmount () {\n      if (this.$viewContainer?.getViewVm() === this) {\n        this.$viewContainer.setView(null)\n      }\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n      this::subscribeToEvents()\n    },\n    /**\n     * @return {*}\n     * @protected\n     */\n    getIdInternal () {\n      return getViewId(this.$view)\n    },\n    /**\n     * @param {*} id\n     * @protected\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setViewId(this.$view, id)\n    },\n    /**\n     * @return {Promise<module:ol/View~View>}\n     */\n    resolveView: olCmp.methods.resolveOlObject,\n    /**\n     * @see {@link https://openlayers.org/en/latest/apidoc/module-ol_View-View.html#animate}\n     * @param {...(module:ol/View~AnimationOptions|function(boolean))} args\n     * @return {Promise<boolean>} Resolves when animation completes\n     */\n    async animate (...args) {\n      let cb = noop\n      if (isFunction(args[args.length - 1])) {\n        cb = args[args.length - 1]\n        args = args.slice(0, args.length - 1)\n      }\n      args.forEach(opts => {\n        if (!isArray(opts.center)) return\n        if (!opts.viewProj) {\n          opts.center = this.pointToViewProj(opts.center)\n        }\n      })\n\n      const view = await this.resolveView()\n\n      return new Promise(resolve => {\n        view.animate(...args, complete => {\n          cb(complete)\n          resolve(complete)\n        })\n      })\n    },\n    /**\n     * @see {@link https://openlayers.org/en/latest/apidoc/module-ol_View-View.html#fit}\n     * @param {Object|module:ol/geom/SimpleGeometry~SimpleGeometry|module:ol/extent~Extent} geometryOrExtent\n     * @param {module:ol/View~FitOptions} [options]\n     * @return {Promise<boolean>} Resolves when view changes\n     */\n    async fit (geometryOrExtent, options = {}) {\n      // transform from GeoJSON, vl-feature to ol.Feature\n      if (isGeoJSONGeometry(geometryOrExtent)) {\n        if (options.viewProj) {\n          geometryOrExtent = this.readGeometryInViewProj(geometryOrExtent)\n        } else {\n          geometryOrExtent = this.readGeometryInDataProj(geometryOrExtent)\n        }\n      } else if (isFunction(geometryOrExtent.resolveOlObject)) {\n        geometryOrExtent = await geometryOrExtent.resolveOlObject()\n      }\n\n      const cb = options.callback || noop\n      const view = await this.resolveView()\n\n      return new Promise(resolve => {\n        view.fit(geometryOrExtent, {\n          ...options,\n          callback: complete => {\n            cb(complete)\n            resolve(complete)\n          },\n        })\n      })\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async cancelAnimations () {\n      (await this.resolveView()).cancelAnimations()\n    },\n    /**\n     * @return {boolean}\n     */\n    getAnimating () {\n      return coalesce(this.$view?.getAnimating(), false)\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async beginInteraction () {\n      (await this.resolveView()).beginInteraction()\n    },\n    /**\n     * @param {number} [duration]\n     * @param {number} [resolutionDirection]\n     * @param {number[]} [anchor]\n     * @param {boolean} [viewProj=false]\n     * @return {Promise<void>}\n     */\n    async endInteraction (duration, resolutionDirection, anchor, viewProj = false) {\n      if (!viewProj) {\n        anchor = this.pointToViewProj(anchor)\n      }\n\n      (await this.resolveView()).endInteraction(duration, resolutionDirection, anchor)\n    },\n    /**\n     * @return {boolean}\n     */\n    getInteracting () {\n      return coalesce(this.$view?.getInteracting(), false)\n    },\n    /**\n     * @param {number[]|undefined} [size]\n     * @param {boolean} [viewProj=false]\n     * @return {Promise<number[]>}\n     */\n    async calculateExtent (size, viewProj = false) {\n      const extent = (await this.resolveView()).calculateExtent(size)\n      if (viewProj) {\n        return roundExtent(extent)\n      }\n\n      return this.extentToDataProj(extent)\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @return {number[]|undefined}\n     */\n    getExtent (viewProj = false) {\n      if (!this.$view) return\n\n      const extent = this.$view.calculateExtent()\n      if (viewProj) return roundExtent(extent)\n\n      return this.extentToDataProj(extent)\n    },\n    /**\n     * @param {number[]} coordinate\n     * @param {number[]} size\n     * @param {number[]} position\n     * @param {boolean} [viewProj=false]\n     * @return {Promise<void>}\n     */\n    async centerOn (coordinate, size, position, viewProj = false) {\n      if (!viewProj) {\n        coordinate = this.pointToViewProj(coordinate)\n      }\n\n      (await this.resolveView()).centerOn(coordinate, size, position)\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @return {number[]}\n     */\n    getCenter (viewProj = false) {\n      if (!this.$view) {\n        return viewProj ? this.currentCenterViewProj : this.currentCenterDataProj\n      }\n\n      const center = this.$view.getCenter()\n      if (viewProj) return center\n\n      return this.pointToDataProj(center)\n    },\n    /**\n     * @param {number[]} center\n     * @param {boolean} [viewProj=false]\n     */\n    setCenter (center, viewProj = false) {\n      assert(isArray(center) && center.length === 2, 'Invalid center')\n\n      if (viewProj) {\n        center = roundPointCoords(center)\n      } else {\n        center = this.pointToViewProj(center)\n      }\n\n      if (!isEqual(center, this.currentCenterViewProj)) {\n        this.currentCenterViewProj = center\n      }\n      if (this.$view && !isEqual(center, this.$view.getCenter())) {\n        this.$view.setCenter(center)\n      }\n    },\n    /**\n     * @return {number}\n     */\n    getResolution () {\n      return coalesce(this.$view?.getResolution(), this.currentResolution)\n    },\n    /**\n     * @param {number} resolution\n     */\n    setResolution (resolution) {\n      resolution = Number(resolution)\n      assert(isNumber(resolution), 'Invalid resolution')\n\n      if (resolution !== this.currentResolution) {\n        this.currentResolution = resolution\n      }\n      if (this.$view && resolution !== this.$view.getResolution()) {\n        this.$view.setResolution(resolution)\n      }\n    },\n    /**\n     * @param {number[]} extent\n     * @param {number[]} size\n     * @param {boolean} [viewProj=false]\n     * @return {Promise<number>}\n     */\n    async getResolutionForExtent (extent, size, viewProj = false) {\n      if (!viewProj) {\n        extent = this.extentToViewProj(extent)\n      }\n\n      return (await this.resolveView()).getResolutionForExtent(extent, size)\n    },\n    /**\n     * @param {number} zoom\n     * @return {Promise<number>}\n     */\n    async getResolutionForZoom (zoom) {\n      return (await this.resolveView()).getResolutionForZoom(zoom)\n    },\n    /**\n     * @return {number[]|undefined}\n     */\n    getResolutions () {\n      return coalesce(this.$view?.getResolutions(), this.currentResolutions)\n    },\n    /**\n     * @return {number|undefined}\n     */\n    getMaxResolution () {\n      return coalesce(this.$view?.getMaxResolution(), this.currentMaxResolution)\n    },\n    /**\n     * @return {number|undefined}\n     */\n    getMinResolution () {\n      return coalesce(this.$view?.getMinResolution(), this.currentMinResolution)\n    },\n    /**\n     * @return {number|undefined}\n     */\n    getZoom () {\n      return coalesce(this.$view?.getZoom(), this.currentZoom)\n    },\n    /**\n     * @param {number} zoom\n     */\n    setZoom (zoom) {\n      zoom = Number(zoom)\n      assert(isNumber(zoom), 'Invalid zoom')\n\n      if (zoom !== this.currentZoom) {\n        this.currentZoom = zoom\n      }\n      if (this.$view && zoom !== this.$view.getZoom()) {\n        this.$view.setZoom(zoom)\n      }\n    },\n    /**\n     * @param {number} resolution\n     * @return {Promise<number|undefined>}\n     */\n    async getZoomForResolution (resolution) {\n      return (await this.resolveView()).getZoomForResolution(resolution)\n    },\n    /**\n     * @return {number|undefined}\n     */\n    getMaxZoom () {\n      return coalesce(this.$view?.getMaxZoom(), this.currentMaxZoom)\n    },\n    /**\n     * @param {number} zoom\n     */\n    setMaxZoom (zoom) {\n      zoom = Number(zoom)\n      assert(isNumber(zoom), 'Invalid maxZoom')\n\n      if (zoom !== this.currentMaxZoom) {\n        this.currentMaxZoom = zoom\n      }\n      if (this.$view && zoom !== this.$view.getMaxZoom()) {\n        this.$view.setMaxZoom(zoom)\n      }\n    },\n    /**\n     * @return {number|undefined}\n     */\n    getMinZoom () {\n      return coalesce(this.$view?.getMinZoom(), this.currentMinZoom)\n    },\n    /**\n     * @param {number} zoom\n     */\n    setMinZoom (zoom) {\n      zoom = Number(zoom)\n      assert(isNumber(zoom), 'Invalid minZoom')\n\n      if (zoom !== this.currentMinZoom) {\n        this.currentMinZoom = zoom\n      }\n      if (this.$view && zoom !== this.$view.getMinZoom()) {\n        this.$view.setMinZoom(zoom)\n      }\n    },\n    /**\n     * @return {module:ol/proj/ProjectionLike}\n     */\n    getProjection () {\n      return coalesce(this.$view?.getProjection(), getProj(this.currentProjection))\n    },\n    /**\n     * @return {number|undefined}\n     */\n    getRotation () {\n      return coalesce(this.$view?.getRotation(), this.currentRotation)\n    },\n    /**\n     * @param {number} rotation\n     */\n    setRotation (rotation) {\n      rotation = Number(rotation)\n      assert(isNumber(rotation), 'Invalid rotation')\n\n      if (rotation !== this.currentRotation) {\n        this.currentRotation = rotation\n      }\n      if (this.$view && rotation !== this.$view.getRotation()) {\n        this.$view.setRotation(rotation)\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {module:ol/View~View|undefined}\n     */\n    $view: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $viewContainer: {\n      enumerable: true,\n      get: () => this.$services?.viewContainer,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n  })\n}\n\n/**\n * Subscribe to OpenLayers significant events\n * @return {void}\n * @private\n */\nasync function subscribeToEvents () {\n  const setterKey = addPrefix('set')\n  const resolutionChanges = obsFromOlChangeEvent(this.$view, 'resolution', true)\n  const zoomChanges = resolutionChanges.pipe(\n    mapObs(() => ({\n      prop: 'zoom',\n      value: this.getZoom(),\n    })),\n    distinctUntilKeyChanged('value'),\n  )\n  const propChanges = mergeObs(\n    obsFromOlChangeEvent(this.$view, [\n      'id',\n      'rotation',\n      'center',\n    ], true),\n    resolutionChanges,\n    zoomChanges,\n  ).pipe(\n    mapObs(evt => ({\n      ...evt,\n      setter: val => {\n        const args = [val]\n        if (evt.prop === 'center') {\n          args.push(true)\n        }\n        this[setterKey(evt.prop)](...args)\n      },\n    })),\n  )\n  this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n}\n","<template>\n  <i\n    :id=\"vmId\"\n    :class=\"vmClass\"\n    style=\"display: none !important;\">\n    <slot\n      :center=\"currentCenterDataProj\"\n      :zoom=\"currentZoom\"\n      :resolution=\"currentResolution\"\n      :rotation=\"currentRotation\"\n      :extent=\"visibleExtentDataProj\" />\n  </i>\n</template>\n\n<script>\n  import { View } from 'ol'\n  import { get as getProj } from 'ol/proj'\n  import { merge as mergeObs } from 'rxjs'\n  import { distinctUntilKeyChanged, map as mapObs } from 'rxjs/operators'\n  import { makeChangeOrRecreateWatchers, olCmp, projTransforms, waitForMap } from '../../mixins'\n  import {\n    EPSG_3857,\n    getViewId,\n    initializeView,\n    isGeoJSONGeometry,\n    roundExtent,\n    roundPointCoords,\n    setViewId,\n  } from '../../ol-ext'\n  import { fromOlChangeEvent as obsFromOlChangeEvent } from '../../rx-ext'\n  import { addPrefix, assert, coalesce, isArray, isEqual, isFunction, isNumber, noop } from '../../utils'\n\n  /**\n   * Represents a simple **2D view** of the map. This is the component to act upon to change the **center**,\n   * **resolution**, and **rotation** of the map.\n   */\n  export default {\n    name: 'VlView',\n    mixins: [\n      projTransforms,\n      olCmp,\n      waitForMap,\n    ],\n    stubVNode: {\n      empty () {\n        return this.vmId\n      },\n    },\n    props: {\n      /**\n       * @type {number[]}\n       */\n      center: {\n        type: Array,\n        default: () => [0, 0],\n        validator: value => value.length === 2 && value.every(isNumber),\n      },\n      /**\n       * @type {boolean}\n       */\n      constrainOnlyCenter: Boolean,\n      /**\n       * @type {number[]|undefined}\n       */\n      extent: {\n        type: Array,\n        validator: value => value.length === 4 && value.every(isNumber),\n      },\n      /**\n       * @type {boolean}\n       */\n      smoothExtentConstraint: {\n        type: Boolean,\n        default: true,\n      },\n      /**\n       * @type {number}\n       */\n      rotation: {\n        type: Number,\n        default: 0,\n      },\n      /**\n       * @type {boolean}\n       */\n      enableRotation: {\n        type: Boolean,\n        default: true,\n      },\n      /**\n       * @type {boolean|number}\n       */\n      constrainRotation: {\n        type: [Boolean, Number],\n        default: true,\n      },\n      /**\n       * @type {number|undefined}\n       */\n      resolution: Number,\n      /**\n       * @type {number[]|undefined}\n       */\n      resolutions: {\n        type: Array,\n        validator: value => value.every(isNumber),\n      },\n      /**\n       * @type {number|undefined}\n       */\n      maxResolution: Number,\n      /**\n       * @type {number|undefined}\n       */\n      minResolution: Number,\n      /**\n       * @type {boolean}\n       */\n      constrainResolution: Boolean,\n      /**\n       * @type {boolean}\n       */\n      smoothResolutionConstraint: {\n        type: Boolean,\n        default: true,\n      },\n      /**\n       * @type {number}\n       */\n      zoom: {\n        type: Number,\n        default: 0,\n      },\n      /**\n       * @type {number}\n       */\n      zoomFactor: {\n        type: Number,\n        default: 2,\n      },\n      /**\n       * @type {number}\n       */\n      maxZoom: {\n        type: Number,\n        default: 28,\n      },\n      /**\n       * @type {number}\n       */\n      minZoom: {\n        type: Number,\n        default: 0,\n      },\n      /**\n       * @type {boolean}\n       */\n      multiWorld: Boolean,\n      /**\n       * @type {string}\n       */\n      projection: {\n        type: String,\n        default: EPSG_3857,\n        validator: value => getProj(value) != null,\n      },\n      showFullExtent: Boolean,\n    },\n    data () {\n      return {\n        dataProjection: this.projection,\n        currentProjection: this.projection,\n        currentCenterViewProj: roundPointCoords(this.center),\n        currentZoom: this.zoom,\n        currentRotation: this.rotation,\n        currentResolution: this.resolution,\n        currentMinZoom: this.minZoom,\n        currentMaxZoom: this.maxZoom,\n        currentResolutions: this.resolutions?.slice(),\n        currentMaxResolution: this.maxResolution,\n        currentMinResolution: this.minResolution,\n      }\n    },\n    computed: {\n      centerDataProj () {\n        return roundPointCoords(this.center)\n      },\n      centerViewProj () {\n        return this.pointToViewProj(this.center)\n      },\n      currentCenterDataProj () {\n        return this.pointToDataProj(this.currentCenterViewProj)\n      },\n      extentDataProj () {\n        return roundExtent(this.extent)\n      },\n      extentViewProj () {\n        return this.extentToViewProj(this.extent)\n      },\n      inputResolutions () {\n        return this.resolutions?.slice()\n      },\n      visibleExtentDataProj () {\n        if (!this.rev) return\n\n        return this.getExtent()?.slice()\n      },\n      visibleExtentViewProj () {\n        if (!this.rev) return\n\n        return this.getExtent(true)?.slice()\n      },\n      animating () {\n        return !!(this.rev && this.getAnimating())\n      },\n      interacting () {\n        return !!(this.rev && this.getInteracting())\n      },\n      resolvedViewProjection () {\n        return this.currentProjection\n      },\n    },\n    watch: {\n      rev () {\n        if (!this.$view) return\n\n        if (this.currentProjection !== this.$view.getProjection().getCode()) {\n          this.currentProjection = this.$view.getProjection().getCode()\n        }\n        if (!isEqual(this.currentCenterViewProj, this.$view.getCenter())) {\n          this.currentCenterViewProj = this.$view.getCenter()\n        }\n        if (this.currentZoom !== this.$view.getZoom()) {\n          this.currentZoom = this.$view.getZoom()\n        }\n        if (this.currentRotation !== this.$view.getRotation()) {\n          this.currentRotation = this.$view.getRotation()\n        }\n        if (this.currentResolution !== this.$view.getResolution()) {\n          this.currentResolution = this.$view.getResolution()\n        }\n        if (this.currentMinZoom !== this.$view.getMinZoom()) {\n          this.currentMinZoom = this.$view.getMinZoom()\n        }\n        if (this.currentMaxZoom !== this.$view.getMaxZoom()) {\n          this.currentMaxZoom = this.$view.getMaxZoom()\n        }\n        if (!isEqual(this.currentResolutions, this.$view.getResolutions())) {\n          this.currentResolutions = this.$view.getResolutions()\n        }\n        if (this.currentMaxResolution !== this.$view.getMaxResolution()) {\n          this.currentMaxResolution = this.$view.getMaxResolution()\n        }\n        if (this.currentMinResolution !== this.$view.getMinResolution()) {\n          this.currentMinResolution = this.$view.getMinResolution()\n        }\n      },\n      centerViewProj: {\n        deep: true,\n        handler (value, prev) {\n          if (this.getAnimating()) return\n\n          this.setCenter(value, true)\n        },\n      },\n      currentCenterDataProj: {\n        deep: true,\n        handler (value, prev) {\n          if (isEqual(value, this.centerDataProj)) return\n\n          this.$emit('update:center', value.slice())\n        },\n      },\n      rotation (value) {\n        if (this.getAnimating()) return\n\n        this.setRotation(value)\n      },\n      currentRotation (value) {\n        if (value === this.rotation) return\n\n        this.$emit('update:rotation', value)\n      },\n      resolution (value) {\n        if (this.getAnimating()) return\n\n        this.setResolution(value)\n      },\n      currentResolution (value) {\n        if (value === this.resolution) return\n\n        this.$emit('update:resolution', value)\n      },\n      constrainResolution (value) {\n        this.setConstrainResolution(value)\n      },\n      zoom (value) {\n        if (this.getAnimating()) return\n\n        this.setZoom(value)\n      },\n      currentZoom (value) {\n        if (value === this.zoom) return\n\n        this.$emit('update:zoom', value)\n      },\n      minZoom (value) {\n        this.setMinZoom(value)\n      },\n      currentMinZoom (value) {\n        if (value === this.minZoom) return\n\n        this.$emit('update:minZoom', value)\n      },\n      maxZoom (value) {\n        this.setMaxZoom(value)\n      },\n      currentMaxZoom (value) {\n        if (value === this.maxZoom) return\n\n        this.$emit('update:maxZoom', value)\n      },\n      inputResolutions: {\n        deep: true,\n        handler (value) {\n          if (value === this.currentResolutions) return\n\n          if (process.env.VUELAYERS_DEBUG) {\n            this.$logger.log(\n              'resolutions changed, scheduling recreate... %O ===> %O',\n              this.currentResolutions,\n              value,\n            )\n          }\n\n          this.currentResolutions = value?.slice()\n\n          return this.scheduleRecreate()\n        },\n      },\n      currentResolutions: {\n        deep: true,\n        handler (value) {\n          if (isEqual(value, this.inputResolutions)) return\n\n          this.$emit('update:resolutions', value?.slice())\n        },\n      },\n      maxResolution (value) {\n        if (value === this.currentMaxResolution) return\n\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log(\n            'maxResolution changed, scheduling recreate... %O ===> %O',\n            this.currentMaxResolution,\n            value,\n          )\n        }\n\n        this.currentMaxResolution = value\n\n        return this.scheduleRecreate()\n      },\n      currentMaxResolution (value) {\n        if (value === this.maxResolution) return\n\n        this.$emit('update:maxResolution', value)\n      },\n      minResolution (value) {\n        if (value === this.currentMinResolution) return\n\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log(\n            'minResolution changed, scheduling recreate... %O ===> %O',\n            this.currentMinResolution,\n            value,\n          )\n        }\n\n        this.currentMinResolution = value\n\n        return this.scheduleRecreate()\n      },\n      currentMinResolution (value) {\n        if (value === this.minResolution) return\n\n        this.$emit('update:minResolution', value)\n      },\n      projection (value) {\n        if (value === this.currentProjection) return\n\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log(\n            'projection changed, scheduling recreate... %O ===> %O',\n            this.currentProjection,\n            value,\n          )\n        }\n\n        this.currentProjection = this.dataProjection = value\n        // reset current resolution fields to inputs\n        // so zoom fields will take precedence\n        this.currentResolution = this.resolution\n        this.currentResolutions = this.inputResolutions?.slice()\n        this.currentMaxResolution = this.maxResolution\n        this.currentMinResolution = this.minResolution\n\n        return this.scheduleRecreate()\n      },\n      currentProjection (value) {\n        if (value === this.projection) return\n\n        this.$emit('update:projection', value)\n      },\n      animating (value, prev) {\n        if (value === prev) return\n\n        this.$emit('update:animating', value)\n      },\n      interacting (value, prev) {\n        if (value === prev) return\n\n        this.$emit('update:interacting', value)\n      },\n      visibleExtentDataProj: {\n        deep: true,\n        handler (value, prev) {\n          if (isEqual(value, prev)) return\n\n          this.$emit('update:visibleExtent', value?.slice())\n        },\n      },\n      .../*#__PURE__*/makeChangeOrRecreateWatchers([\n        'constrainOnlyCenter',\n        'smoothExtentConstraint',\n        'enableRotation',\n        'constrainRotation',\n        'constrainResolution',\n        'smoothResolutionConstraint',\n        'zoomFactor',\n        'multiWorld',\n        'extentViewProj',\n      ], [\n        'extentViewProj',\n      ]),\n    },\n    created () {\n      this::defineServices()\n\n      this.currentCenterViewProj = this.centerViewProj.slice()\n    },\n    methods: {\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async beforeInit () {\n        await Promise.all([\n          this::olCmp.methods.beforeInit(),\n          this::waitForMap.methods.beforeInit(),\n        ])\n      },\n      /**\n       * @return {module:ol/View~View}\n       * @protected\n       */\n      createOlObject () {\n        const view = new View({\n          center: this.currentCenterViewProj,\n          constrainOnlyCenter: this.constrainOnlyCenter,\n          extent: this.extentViewProj,\n          smoothExtentConstraint: this.smoothExtentConstraint,\n          rotation: this.currentRotation,\n          enableRotation: this.enableRotation,\n          constrainRotation: this.constrainRotation,\n          resolution: this.currentResolution,\n          resolutions: this.currentResolutions,\n          maxResolution: this.currentMaxResolution,\n          minResolution: this.currentMinResolution,\n          constrainResolution: this.constrainResolution,\n          smoothResolutionConstraint: this.smoothResolutionConstraint,\n          zoom: this.currentZoom,\n          zoomFactor: this.zoomFactor,\n          maxZoom: this.currentMaxZoom,\n          minZoom: this.currentMinZoom,\n          multiWorld: this.multiWorld,\n          projection: this.currentProjection,\n          showFullExtent: this.showFullExtent,\n        })\n        initializeView(view, this.currentId)\n\n        return view\n      },\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async mount () {\n        this.$viewContainer?.setView(this)\n\n        return this::olCmp.methods.mount()\n      },\n      /**\n       * @return {void}\n       * @protected\n       */\n      async unmount () {\n        if (this.$viewContainer?.getViewVm() === this) {\n          this.$viewContainer.setView(null)\n        }\n\n        return this::olCmp.methods.unmount()\n      },\n      /**\n       * @return {void}\n       * @protected\n       */\n      subscribeAll () {\n        this::olCmp.methods.subscribeAll()\n        this::subscribeToEvents()\n      },\n      /**\n       * @return {*}\n       * @protected\n       */\n      getIdInternal () {\n        return getViewId(this.$view)\n      },\n      /**\n       * @param {*} id\n       * @protected\n       */\n      setIdInternal (id) {\n        if (id === this.getIdInternal()) return\n\n        setViewId(this.$view, id)\n      },\n      /**\n       * @return {Promise<module:ol/View~View>}\n       */\n      resolveView: olCmp.methods.resolveOlObject,\n      /**\n       * @see {@link https://openlayers.org/en/latest/apidoc/module-ol_View-View.html#animate}\n       * @param {...(module:ol/View~AnimationOptions|function(boolean))} args\n       * @return {Promise<boolean>} Resolves when animation completes\n       */\n      async animate (...args) {\n        let cb = noop\n        if (isFunction(args[args.length - 1])) {\n          cb = args[args.length - 1]\n          args = args.slice(0, args.length - 1)\n        }\n        args.forEach(opts => {\n          if (!isArray(opts.center)) return\n          if (!opts.viewProj) {\n            opts.center = this.pointToViewProj(opts.center)\n          }\n        })\n\n        const view = await this.resolveView()\n\n        return new Promise(resolve => {\n          view.animate(...args, complete => {\n            cb(complete)\n            resolve(complete)\n          })\n        })\n      },\n      /**\n       * @see {@link https://openlayers.org/en/latest/apidoc/module-ol_View-View.html#fit}\n       * @param {Object|module:ol/geom/SimpleGeometry~SimpleGeometry|module:ol/extent~Extent} geometryOrExtent\n       * @param {module:ol/View~FitOptions} [options]\n       * @return {Promise<boolean>} Resolves when view changes\n       */\n      async fit (geometryOrExtent, options = {}) {\n        // transform from GeoJSON, vl-feature to ol.Feature\n        if (isGeoJSONGeometry(geometryOrExtent)) {\n          if (options.viewProj) {\n            geometryOrExtent = this.readGeometryInViewProj(geometryOrExtent)\n          } else {\n            geometryOrExtent = this.readGeometryInDataProj(geometryOrExtent)\n          }\n        } else if (isFunction(geometryOrExtent.resolveOlObject)) {\n          geometryOrExtent = await geometryOrExtent.resolveOlObject()\n        }\n\n        const cb = options.callback || noop\n        const view = await this.resolveView()\n\n        return new Promise(resolve => {\n          view.fit(geometryOrExtent, {\n            ...options,\n            callback: complete => {\n              cb(complete)\n              resolve(complete)\n            },\n          })\n        })\n      },\n      /**\n       * @return {Promise<void>}\n       */\n      async cancelAnimations () {\n        (await this.resolveView()).cancelAnimations()\n      },\n      /**\n       * @return {boolean}\n       */\n      getAnimating () {\n        return coalesce(this.$view?.getAnimating(), false)\n      },\n      /**\n       * @return {Promise<void>}\n       */\n      async beginInteraction () {\n        (await this.resolveView()).beginInteraction()\n      },\n      /**\n       * @param {number} [duration]\n       * @param {number} [resolutionDirection]\n       * @param {number[]} [anchor]\n       * @param {boolean} [viewProj=false]\n       * @return {Promise<void>}\n       */\n      async endInteraction (duration, resolutionDirection, anchor, viewProj = false) {\n        if (!viewProj) {\n          anchor = this.pointToViewProj(anchor)\n        }\n\n        (await this.resolveView()).endInteraction(duration, resolutionDirection, anchor)\n      },\n      /**\n       * @return {boolean}\n       */\n      getInteracting () {\n        return coalesce(this.$view?.getInteracting(), false)\n      },\n      /**\n       * @param {number[]|undefined} [size]\n       * @param {boolean} [viewProj=false]\n       * @return {Promise<number[]>}\n       */\n      async calculateExtent (size, viewProj = false) {\n        const extent = (await this.resolveView()).calculateExtent(size)\n        if (viewProj) {\n          return roundExtent(extent)\n        }\n\n        return this.extentToDataProj(extent)\n      },\n      /**\n       * @param {boolean} [viewProj=false]\n       * @return {number[]|undefined}\n       */\n      getExtent (viewProj = false) {\n        if (!this.$view) return\n\n        const extent = this.$view.calculateExtent()\n        if (viewProj) return roundExtent(extent)\n\n        return this.extentToDataProj(extent)\n      },\n      /**\n       * @param {number[]} coordinate\n       * @param {number[]} size\n       * @param {number[]} position\n       * @param {boolean} [viewProj=false]\n       * @return {Promise<void>}\n       */\n      async centerOn (coordinate, size, position, viewProj = false) {\n        if (!viewProj) {\n          coordinate = this.pointToViewProj(coordinate)\n        }\n\n        (await this.resolveView()).centerOn(coordinate, size, position)\n      },\n      /**\n       * @param {boolean} [viewProj=false]\n       * @return {number[]}\n       */\n      getCenter (viewProj = false) {\n        if (!this.$view) {\n          return viewProj ? this.currentCenterViewProj : this.currentCenterDataProj\n        }\n\n        const center = this.$view.getCenter()\n        if (viewProj) return center\n\n        return this.pointToDataProj(center)\n      },\n      /**\n       * @param {number[]} center\n       * @param {boolean} [viewProj=false]\n       */\n      setCenter (center, viewProj = false) {\n        assert(isArray(center) && center.length === 2, 'Invalid center')\n\n        if (viewProj) {\n          center = roundPointCoords(center)\n        } else {\n          center = this.pointToViewProj(center)\n        }\n\n        if (!isEqual(center, this.currentCenterViewProj)) {\n          this.currentCenterViewProj = center\n        }\n        if (this.$view && !isEqual(center, this.$view.getCenter())) {\n          this.$view.setCenter(center)\n        }\n      },\n      /**\n       * @return {number}\n       */\n      getResolution () {\n        return coalesce(this.$view?.getResolution(), this.currentResolution)\n      },\n      /**\n       * @param {number} resolution\n       */\n      setResolution (resolution) {\n        resolution = Number(resolution)\n        assert(isNumber(resolution), 'Invalid resolution')\n\n        if (resolution !== this.currentResolution) {\n          this.currentResolution = resolution\n        }\n        if (this.$view && resolution !== this.$view.getResolution()) {\n          this.$view.setResolution(resolution)\n        }\n      },\n      /**\n       * @param {number[]} extent\n       * @param {number[]} size\n       * @param {boolean} [viewProj=false]\n       * @return {Promise<number>}\n       */\n      async getResolutionForExtent (extent, size, viewProj = false) {\n        if (!viewProj) {\n          extent = this.extentToViewProj(extent)\n        }\n\n        return (await this.resolveView()).getResolutionForExtent(extent, size)\n      },\n      /**\n       * @param {number} zoom\n       * @return {Promise<number>}\n       */\n      async getResolutionForZoom (zoom) {\n        return (await this.resolveView()).getResolutionForZoom(zoom)\n      },\n      /**\n       * @return {number[]|undefined}\n       */\n      getResolutions () {\n        return coalesce(this.$view?.getResolutions(), this.currentResolutions)\n      },\n      /**\n       * @return {number|undefined}\n       */\n      getMaxResolution () {\n        return coalesce(this.$view?.getMaxResolution(), this.currentMaxResolution)\n      },\n      /**\n       * @return {number|undefined}\n       */\n      getMinResolution () {\n        return coalesce(this.$view?.getMinResolution(), this.currentMinResolution)\n      },\n      /**\n       * @return {number|undefined}\n       */\n      getZoom () {\n        return coalesce(this.$view?.getZoom(), this.currentZoom)\n      },\n      /**\n       * @param {number} zoom\n       */\n      setZoom (zoom) {\n        zoom = Number(zoom)\n        assert(isNumber(zoom), 'Invalid zoom')\n\n        if (zoom !== this.currentZoom) {\n          this.currentZoom = zoom\n        }\n        if (this.$view && zoom !== this.$view.getZoom()) {\n          this.$view.setZoom(zoom)\n        }\n      },\n      /**\n       * @param {number} resolution\n       * @return {Promise<number|undefined>}\n       */\n      async getZoomForResolution (resolution) {\n        return (await this.resolveView()).getZoomForResolution(resolution)\n      },\n      /**\n       * @return {number|undefined}\n       */\n      getMaxZoom () {\n        return coalesce(this.$view?.getMaxZoom(), this.currentMaxZoom)\n      },\n      /**\n       * @param {number} zoom\n       */\n      setMaxZoom (zoom) {\n        zoom = Number(zoom)\n        assert(isNumber(zoom), 'Invalid maxZoom')\n\n        if (zoom !== this.currentMaxZoom) {\n          this.currentMaxZoom = zoom\n        }\n        if (this.$view && zoom !== this.$view.getMaxZoom()) {\n          this.$view.setMaxZoom(zoom)\n        }\n      },\n      /**\n       * @return {number|undefined}\n       */\n      getMinZoom () {\n        return coalesce(this.$view?.getMinZoom(), this.currentMinZoom)\n      },\n      /**\n       * @param {number} zoom\n       */\n      setMinZoom (zoom) {\n        zoom = Number(zoom)\n        assert(isNumber(zoom), 'Invalid minZoom')\n\n        if (zoom !== this.currentMinZoom) {\n          this.currentMinZoom = zoom\n        }\n        if (this.$view && zoom !== this.$view.getMinZoom()) {\n          this.$view.setMinZoom(zoom)\n        }\n      },\n      /**\n       * @return {module:ol/proj/ProjectionLike}\n       */\n      getProjection () {\n        return coalesce(this.$view?.getProjection(), getProj(this.currentProjection))\n      },\n      /**\n       * @return {number|undefined}\n       */\n      getRotation () {\n        return coalesce(this.$view?.getRotation(), this.currentRotation)\n      },\n      /**\n       * @param {number} rotation\n       */\n      setRotation (rotation) {\n        rotation = Number(rotation)\n        assert(isNumber(rotation), 'Invalid rotation')\n\n        if (rotation !== this.currentRotation) {\n          this.currentRotation = rotation\n        }\n        if (this.$view && rotation !== this.$view.getRotation()) {\n          this.$view.setRotation(rotation)\n        }\n      },\n    },\n  }\n\n  function defineServices () {\n    Object.defineProperties(this, {\n      /**\n       * @type {module:ol/View~View|undefined}\n       */\n      $view: {\n        enumerable: true,\n        get: () => this.$olObject,\n      },\n      /**\n       * @type {Object|undefined}\n       */\n      $viewContainer: {\n        enumerable: true,\n        get: () => this.$services?.viewContainer,\n      },\n      /**\n       * @type {Object|undefined}\n       */\n      $mapVm: {\n        enumerable: true,\n        get: () => this.$services?.mapVm,\n      },\n    })\n  }\n\n  /**\n   * Subscribe to OpenLayers significant events\n   * @return {void}\n   * @private\n   */\n  async function subscribeToEvents () {\n    const setterKey = addPrefix('set')\n    const resolutionChanges = obsFromOlChangeEvent(this.$view, 'resolution', true)\n    const zoomChanges = resolutionChanges.pipe(\n      mapObs(() => ({\n        prop: 'zoom',\n        value: this.getZoom(),\n      })),\n      distinctUntilKeyChanged('value'),\n    )\n    const propChanges = mergeObs(\n      obsFromOlChangeEvent(this.$view, [\n        'id',\n        'rotation',\n        'center',\n      ], true),\n      resolutionChanges,\n      zoomChanges,\n    ).pipe(\n      mapObs(evt => ({\n        ...evt,\n        setter: val => {\n          const args = [val]\n          if (evt.prop === 'center') {\n            args.push(true)\n          }\n          this[setterKey(evt.prop)](...args)\n        },\n      })),\n    )\n    this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n  }\n</script>\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Map, View } from 'ol'\nimport MapBrowserEventType from 'ol/MapBrowserEventType'\nimport MapEventType from 'ol/MapEventType'\nimport { get as getProj } from 'ol/proj'\nimport RenderEventType from 'ol/render/EventType'\nimport { merge as mergeObs } from 'rxjs'\nimport { distinctUntilChanged, map as mapObs, tap } from 'rxjs/operators'\nimport {\n  controlsContainer,\n  featuresContainer,\n  FRAME_TIME,\n  interactionsContainer,\n  layersContainer,\n  makeChangeOrRecreateWatchers,\n  olCmp,\n  overlaysContainer,\n  projTransforms,\n} from '../../mixins'\nimport {\n  EPSG_3857,\n  getControlId,\n  getInteractionId,\n  getLayerId,\n  getMapDataProjection,\n  getMapId,\n  getOverlayId,\n  getViewId,\n  roundPointCoords,\n  setMapDataProjection,\n  setMapId,\n} from '../../ol-ext'\nimport {\n  bufferDebounceTime,\n  fromOlChangeEvent as obsFromOlChangeEvent,\n  fromOlEvent as obsFromOlEvent,\n  fromVueEvent as obsFromVueEvent,\n  fromVueWatcher as obsFromVueWatcher,\n} from '../../rx-ext'\nimport {\n  addPrefix,\n  assert,\n  clonePlainObject,\n  coalesce,\n  isArray,\n  isEqual,\n  map,\n  mergeDescriptors,\n  omit,\n} from '../../utils'\nimport { Layer as VectorLayerCmp } from '../vector-layer'\nimport { Source as VectorSourceCmp } from '../vector-source'\nimport ViewCmp from './view.vue'\n\n/**\n * Container for **layers**, **interactions**, **controls** and **overlays**. It responsible for viewport\n * rendering and low level interaction events.\n *\n * todo make render function that injects VlView if it is not provided by the user,\n *      then it can be provided to lower components\n */\nexport default {\n  name: 'VlMap',\n  components: {\n    ViewCmp,\n    VectorLayerCmp,\n    VectorSourceCmp,\n  },\n  mixins: [\n    projTransforms,\n    layersContainer,\n    controlsContainer,\n    interactionsContainer,\n    overlaysContainer,\n    featuresContainer,\n    olCmp,\n  ],\n  props: {\n    /**\n     * Options for default controls added to the map by default. Set to `false` to disable all map controls. Object\n     * value is used to configure controls.\n     * @type {Object|boolean}\n     * @todo remove when vl-control-* components will be ready\n     */\n    defaultControls: {\n      type: [Object, Boolean],\n      default: true,\n    },\n    /**\n     * Options for default interactions added to the map by default. Object\n     * value is used to configure default interactions.\n     * @type {Object|boolean}\n     */\n    defaultInteractions: {\n      type: [Object, Boolean],\n      default: true,\n    },\n    /**\n     * The element to listen to keyboard events on. For example, if this option is set to `document` the keyboard\n     * interactions will always trigger. If this option is not specified, the element the library listens to keyboard\n     * events on is the component root element.\n     * @type {string|Element|Document|undefined}\n     */\n    keyboardEventTarget: [String, Element, Document],\n    /**\n     * The minimum distance in pixels the cursor must move to be detected as a map move event instead of a click.\n     * Increasing this value can make it easier to click on the map.\n     * @type {number}\n     */\n    moveTolerance: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * The ratio between physical pixels and device-independent pixels (dips) on the device.\n     * @type {number}\n     */\n    pixelRatio: {\n      type: Number,\n      default: () => window.devicePixelRatio || 1,\n    },\n    /**\n     * Maximum number tiles to load simultaneously.\n     * @type {number}\n     */\n    maxTilesLoading: {\n      type: Number,\n      default: 16,\n    },\n    /**\n     * Root element `tabindex` attribute value. Value should be provided to allow keyboard events on map.\n     * @type {number|string}\n     */\n    tabindex: [String, Number],\n    /**\n     * Projection for input/output coordinates in plain data.\n     * @type {string|undefined}\n     */\n    dataProjection: {\n      type: String,\n      validator: value => getProj(value) != null,\n    },\n    /**\n     * @type {boolean}\n     */\n    wrapX: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {boolean}\n     */\n    updateWhileAnimating: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * @type {boolean}\n     */\n    updateWhileInteracting: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data () {\n    return {\n      viewProjection: EPSG_3857,\n      withCustomView: false,\n      size: undefined,\n      currentDataProjection: this.dataProjection,\n    }\n  },\n  computed: {\n    resolvedDataProjection () {\n      return coalesce(\n        this.currentDataProjection,\n        this.dataProjection,\n        this.$options?.dataProjection,\n        this.viewProjection,\n      )\n    },\n    view () {\n      if (!(this.rev && this.$view)) return\n\n      return {\n        id: getViewId(this.$view),\n        type: this.$view.constructor.name,\n      }\n    },\n    /**\n     * @returns {string[]}\n     */\n    layers () {\n      if (!this.rev) return []\n\n      return map(this.getLayers(), layer => ({\n        id: getLayerId(layer),\n        type: layer.constructor.name,\n      }))\n    },\n    /**\n     * @returns {string[]}\n     */\n    controls () {\n      if (!this.rev) return []\n\n      return map(this.getControls(), control => ({\n        id: getControlId(control),\n        type: control.constructor.name,\n      }))\n    },\n    /**\n     * @returns {string[]}\n     */\n    interactions () {\n      if (!this.rev) return []\n\n      return map(this.getInteractions(), interaction => ({\n        id: getInteractionId(interaction),\n        type: interaction.constructor.name,\n      }))\n    },\n    /**\n     * @returns {string[]}\n     */\n    overlays () {\n      if (!this.rev) return []\n\n      return map(this.getOverlays(), overlay => ({\n        id: getOverlayId(overlay),\n        type: overlay.constructor.name,\n      }))\n    },\n    /**\n     * @type {Object[]}\n     */\n    featuresDataProj () {\n      if (!this.rev) return []\n\n      return map(this.getFeatures(), feature => this.writeFeatureInDataProj(feature))\n    },\n    /**\n     * @type {Object[]}\n     */\n    featuresViewProj () {\n      if (!this.rev) return []\n\n      return map(this.getFeatures(), feature => this.writeFeatureInViewProj(feature))\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$map) return\n\n      if (!isEqual(this.size, this.$map.getSize())) {\n        this.size = this.$map.getSize()\n      }\n    },\n    size: {\n      deep: true,\n      handler (value, prev) {\n        if (isEqual(value, prev)) return\n\n        this.$emit('update:size', value?.slice())\n      },\n    },\n    defaultControls: {\n      deep: true,\n      handler (value) {\n        this.initDefaultControls(value)\n      },\n    },\n    defaultInteractions: {\n      deep: true,\n      handler (value) {\n        this.initDefaultInteractions(value)\n      },\n    },\n    dataProjection (value) {\n      this.setDataProjection(value)\n    },\n    view: {\n      deep: true,\n      handler (value, prev) {\n        if (value === prev) return\n\n        this.$emit('update:view', value)\n      },\n    },\n    layers: {\n      deep: true,\n      handler (value, prev) {\n        if (isEqual(value, prev)) return\n\n        this.$emit('update:layers', value.slice())\n      },\n    },\n    controls: {\n      deep: true,\n      handler (value, prev) {\n        if (isEqual(value, prev)) return\n\n        this.$emit('update:controls', value.slice())\n      },\n    },\n    interactions: {\n      deep: true,\n      handler (value, prev) {\n        if (isEqual(value, prev)) return\n\n        this.$emit('update:interactions', value.slice())\n      },\n    },\n    overlays: {\n      deep: true,\n      handler (value, prev) {\n        if (isEqual(value, prev)) return\n\n        this.$emit('update:overlays', value.slice())\n      },\n    },\n    featuresDataProj: {\n      deep: true,\n      handler (value, prev) {\n        if (isEqual(value, prev)) return\n\n        this.$emit('update:features', clonePlainObject(value))\n      },\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'keyboardEventTarget',\n      'moveTolerance',\n      'pixelRatio',\n      'maxTilesLoading',\n    ]),\n  },\n  created () {\n    /**\n     * @type {module:ol/View~View}\n     * @private\n     */\n    this._view = new View({\n      center: [0, 0],\n      zoom: 2,\n    })\n    /**\n     * @type {Object|undefined}\n     */\n    this._viewVm = undefined\n\n    this::defineServices()\n    // todo wrap controls into components and provide vl-control-default\n    this.initDefaultControls(this.defaultControls)\n    // todo initialize without interactions and provide vl-interaction-default component\n    this.initDefaultInteractions(this.defaultInteractions)\n  },\n  methods: {\n    /**\n     * @return {module:ol/Map~Map}\n     * @protected\n     */\n    async createOlObject () {\n      const map = new Map({\n        pixelRatio: this.pixelRatio,\n        moveTolerance: this.moveTolerance,\n        keyboardEventTarget: this.keyboardEventTarget,\n        maxTilesLoading: this.maxTilesLoading,\n        controls: this.$controlsCollection,\n        interactions: this.$interactionsCollection,\n        layers: this.$layersCollection,\n        overlays: this.$overlaysCollection,\n        view: this.$view,\n      })\n      setMapId(map, this.currentId)\n      setMapDataProjection(map, this.resolvedDataProjection)\n      this.size && map.setSize(this.size)\n\n      return map\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.setTarget(this.$el)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      this.setTarget(null)\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n      this::layersContainer.methods.subscribeAll()\n      this::controlsContainer.methods.subscribeAll()\n      this::interactionsContainer.methods.subscribeAll()\n      this::overlaysContainer.methods.subscribeAll()\n      this::featuresContainer.methods.subscribeAll()\n      this::subscribeToEvents()\n\n      // view projection can be changed in runtime only through vl-view vm\n      this.subscribeTo(\n        obsFromVueWatcher(this, () => this.$viewVm?.resolvedViewProjection),\n        ({ value }) => { this.viewProjection = value || EPSG_3857 },\n      )\n    },\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        this::layersContainer.methods.getServices(),\n        this::controlsContainer.methods.getServices(),\n        this::interactionsContainer.methods.getServices(),\n        this::overlaysContainer.methods.getServices(),\n        this::featuresContainer.methods.getServices(),\n        {\n          get mapVm () { return vm },\n          get viewVm () { return vm.$viewVm },\n          get viewContainer () { return vm },\n        },\n      )\n    },\n    /**\n     * @return {string|number}\n     * @protected\n     */\n    getIdInternal () {\n      return getMapId(this.$map)\n    },\n    /**\n     * @param {string|number} id\n     * @protected\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setMapId(this.$map, id)\n    },\n    /**\n     * @return {Promise<module:ol/Map~Map>}\n     */\n    resolveMap: olCmp.methods.resolveOlObject,\n    /**\n     * @param {number[]} pixel\n     * @param {function} callback\n     * @param {Object} [opts]\n     * @return {Promise}\n     */\n    async forEachFeatureAtPixel (pixel, callback, opts = {}) {\n      return (await this.resolveMap()).forEachFeatureAtPixel(pixel, callback, opts)\n    },\n    /**\n     * @param {number[]} pixel\n     * @param {function} callback\n     * @param {Object} [opts]\n     * @return {Promise}\n     */\n    async forEachLayerAtPixel (pixel, callback, opts = {}) {\n      return (await this.resolveMap()).forEachLayerAtPixel(pixel, callback, opts)\n    },\n    /**\n     * @param {number[]} pixel\n     * @param {boolean} [viewProj=false]\n     * @return {Promise<number[]>} Coordinates in the map view projection.\n     */\n    async getCoordinateFromPixel (pixel, viewProj = false) {\n      const coordinate = (await this.resolveMap()).getCoordinateFromPixel(pixel)\n      if (viewProj) {\n        return roundPointCoords(coordinate)\n      }\n\n      return this.pointToDataProj(coordinate)\n    },\n    /**\n     * @param {Event} event\n     * @param {boolean} [viewProj=false]\n     * @return {Promise<number[]>}\n     */\n    async getEventCoordinate (event, viewProj = false) {\n      const coordinate = (await this.resolveMap()).getEventCoordinate(event)\n      if (viewProj) {\n        return roundPointCoords(coordinate)\n      }\n\n      return this.pointToDataProj(coordinate)\n    },\n    /**\n     * @param {Event} event\n     * @return {Promise<number[]>}\n     */\n    async getEventPixel (event) {\n      return (await this.resolveMap()).getEventPixel(event)\n    },\n    /**\n     * @param {number[]} pixel\n     * @param {Object} [opts]\n     * @return {Promise}\n     */\n    async getFeaturesAtPixel (pixel, opts = {}) {\n      return (await this.resolveMap()).getFeaturesAtPixel(pixel, opts)\n    },\n    /**\n     * @param {number[]} pixel\n     * @param {Object} [options]\n     * @return {Promise<boolean>}\n     */\n    async hasFeatureAtPixel (pixel, options = {}) {\n      return (await this.resolveMap()).hasFeatureAtPixel(pixel, options)\n    },\n    /**\n     * @param {number[]} coordinate Coordinates in map view projection\n     * @param {boolean} [viewProj=false]\n     * @return {Promise<number[]>}\n     */\n    async getPixelFromCoordinate (coordinate, viewProj = false) {\n      if (!viewProj) {\n        coordinate = this.pointToViewProj(coordinate)\n      }\n\n      return (await this.resolveMap()).getPixelFromCoordinate(coordinate)\n    },\n    /**\n     * @return {number[]|undefined}\n     */\n    getSize () {\n      return coalesce(this.$map?.getSize(), this.size)\n    },\n    /**\n     * @param {number[]} size\n     */\n    setSize (size) {\n      assert(isArray(size) && size.length === 2, 'Invalid size')\n      size = size.slice()\n\n      if (!isEqual(size, this.size)) {\n        this.size = size\n      }\n      if (this.$map && !isEqual(size, this.$map.getSize())) {\n        this.$map.setSize(size)\n      }\n    },\n    /**\n     * Updates map size.\n     * @return {Promise<void>}\n     */\n    async updateSize () {\n      (await this.resolveMap()).updateSize()\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async render () {\n      const map = await this.resolveMap()\n\n      return new Promise(resolve => {\n        map.once('postrender', () => resolve())\n        map.render()\n      })\n    },\n    /**\n     * @return {HTMLElement|undefined}\n     */\n    getTarget () {\n      return coalesce(this.$map?.getTarget(), this.$el)\n    },\n    /**\n     * @param {HTMLElement} target\n     */\n    setTarget (target) {\n      if (this.$map && target !== this.$map.getTarget()) {\n        this.$map.setTarget(target)\n        this.$emit('update:target', target)\n      }\n    },\n    /**\n     * @return {HTMLElement|undefined}\n     */\n    getViewport () {\n      return this.$map?.getViewport()\n    },\n    /**\n     * @return {module:ol/View~View|undefined}\n     */\n    getView () {\n      return coalesce(this.$map?.getView(), this._view)\n    },\n    /**\n     * @return {Object}\n     */\n    getViewVm () {\n      return this._viewVm\n    },\n    /**\n     * @param {module:ol/View~View|Vue|undefined} view\n     */\n    setView (view) {\n      view = view?.$view || view\n      assert(!view || view instanceof View, 'Invalid view')\n\n      if (view !== this._view) {\n        this._view = view\n        this._viewVm = view?.vm && view?.vm[0]\n      }\n      if (this.$map && view !== this.$map.getView()) {\n        this.$map.setView(view)\n      }\n\n      this.scheduleRefresh()\n    },\n    /**\n     * @return {module:ol/proj~ProjectionLike|undefined}\n     */\n    getDataProjection () {\n      return coalesce(this.$map && getMapDataProjection(this.$map), this.resolvedDataProjection)\n    },\n    /**\n     * @param {module:ol/proj~ProjectionLike} projection\n     */\n    setDataProjection (projection) {\n      projection = getProj(projection)\n      assert(projection != null, 'Invalid projection')\n\n      if (projection.getCode() !== this.currentDataProjection) {\n        this.currentDataProjection = projection.getCode()\n      }\n      if (this.$map && projection.getCode() !== getMapDataProjection(this.$map)) {\n        setMapDataProjection(this.$map, projection.getCode())\n      }\n    },\n    /**\n     * Triggers focus on map container.\n     */\n    focus () {\n      this.$el.focus()\n    },\n    /**\n     * Updates map size and re-renders map.\n     * @return {Promise}\n     */\n    async refresh () {\n      await this.updateSize()\n      await this.render()\n\n      return this::olCmp.methods.refresh()\n    },\n    isInteracting () {\n      if (!this.$map) return false\n\n      return this.getInteractions().some(interaction => !!interaction.get('interacting'))\n    },\n    /**\n     * @param {Object} sourceVm\n     * @protected\n     */\n    featuresOverlaySourceCreated (sourceVm) {\n      sourceVm.addFeatures(this.getFeatures())\n\n      const adds = obsFromVueEvent(this, 'addfeature').pipe(\n        mapObs(({ feature }) => feature),\n        bufferDebounceTime(FRAME_TIME),\n      )\n      this.subscribeTo(adds, features => sourceVm.addFeatures(features))\n\n      const removes = obsFromVueEvent(this, 'removefeature').pipe(\n        mapObs(({ feature }) => feature),\n        bufferDebounceTime(FRAME_TIME),\n      )\n      this.subscribeTo(removes, features => sourceVm.removeFeatures(features))\n    },\n    /**\n     * @protected {string} value\n     * @protected\n     */\n    resolvedDataProjectionChanged (value) {\n      if (value === this.dataProjection) return\n\n      this.$emit('update:dataProjection', value)\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * OpenLayers map instance.\n     * @type {module:ol/Map~Map|undefined}\n     */\n    $map: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    /**\n     * @type {module:ol/View~View|undefined}\n     */\n    $view: {\n      enumerable: true,\n      get: this.getView,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $viewVm: {\n      enumerable: true,\n      get: this.getViewVm,\n    },\n    $featuresOverlayVm: {\n      enumerable: true,\n      get: () => this.$refs?.featuresOverlay,\n    },\n    $featuresOverlaySourceVm: {\n      enumerable: true,\n      get: () => this.$refs?.featuresOverlaySource,\n    },\n  })\n}\n\n/**\n * Subscribe to OL map events.\n *\n * @return {void}\n * @private\n */\nasync function subscribeToEvents () {\n  const setterKey = addPrefix('set')\n  const viewChanges = obsFromOlChangeEvent(this.$map, 'view', true).pipe(\n    tap(({ value: view }) => {\n      if (this._viewSubs) {\n        this.unsubscribe(this._viewSubs)\n      }\n      if (view) {\n        this._viewSubs = this.subscribeTo(\n          obsFromOlChangeEvent(view, 'id', true),\n          ::this.scheduleRefresh,\n        )\n      }\n      this.viewProjection = view?.getProjection().getCode() || EPSG_3857\n      this.withCustomView = view && (!view.vm || view.vm.some(vm => vm !== this.$refs.view))\n    }),\n  )\n  const propChanges = mergeObs(\n    viewChanges,\n    obsFromOlChangeEvent(this.$map, [\n      'dataProjection',\n      'size',\n      'target',\n      // 'layerGroup', FIXME not ready\n    ], true),\n  ).pipe(\n    mapObs(evt => ({\n      ...evt,\n      setter: this[setterKey(evt.prop)],\n    })),\n  )\n  this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n\n  // pointer\n  const pointerEvents = mergeObs(\n    obsFromOlEvent(this.$map, [\n      MapBrowserEventType.CLICK,\n      MapBrowserEventType.DBLCLICK,\n      MapBrowserEventType.SINGLECLICK,\n    ]),\n    obsFromOlEvent(this.$map, [\n      MapBrowserEventType.POINTERDRAG,\n      MapBrowserEventType.POINTERMOVE,\n    ], null, [\n      distinctUntilChanged((a, b) => isEqual({\n        t: a.type,\n        c: a.coordinate,\n      }, {\n        t: b.type,\n        c: b.coordinate,\n      })),\n    ]),\n  ).pipe(\n    mapObs(evt => omit({\n      ...evt,\n      pixel: evt.pixel,\n      coordinate: this.pointToDataProj(evt.coordinate),\n    }, [\n      'pixel_',\n      'coordinate_',\n    ])),\n  )\n  // other\n  const otherEvents = obsFromOlEvent(this.$map, [\n    MapEventType.MOVESTART,\n    MapEventType.MOVEEND,\n    MapEventType.POSTRENDER,\n    RenderEventType.PRECOMPOSE,\n    RenderEventType.POSTCOMPOSE,\n    RenderEventType.RENDERCOMPLETE,\n  ])\n  this.subscribeTo(mergeObs(pointerEvents, otherEvents), evt => this.$emit(evt.type, evt))\n}\n","<template>\n  <div\n    :id=\"vmId\"\n    :class=\"vmClass\"\n    :tabindex=\"tabindex\">\n    <slot />\n    <ViewCmp\n      v-if=\"!withCustomView\"\n      :id=\"'vl-' + currentId + '-default-view'\"\n      ref=\"view\" />\n    <VectorLayerCmp\n      :id=\"'vl-' + currentId + '-default-layer'\"\n      ref=\"featuresOverlay\"\n      :overlay=\"true\"\n      :update-while-animating=\"updateWhileAnimating\"\n      :update-while-interacting=\"updateWhileInteracting\">\n      <VectorSourceCmp\n        :id=\"'vl-' + currentId + '-default-source'\"\n        ref=\"featuresOverlaySource\"\n        :wrap-x=\"wrapX\"\n        :projection=\"currentDataProjection\"\n        @created=\"featuresOverlaySourceCreated\">\n        <slot name=\"overlay\" />\n      </VectorSourceCmp>\n    </VectorLayerCmp>\n  </div>\n</template>\n\n<script>\n  import { Map, View } from 'ol'\n  import MapBrowserEventType from 'ol/MapBrowserEventType'\n  import MapEventType from 'ol/MapEventType'\n  import { get as getProj } from 'ol/proj'\n  import RenderEventType from 'ol/render/EventType'\n  import { merge as mergeObs } from 'rxjs'\n  import { distinctUntilChanged, map as mapObs, tap } from 'rxjs/operators'\n  import {\n    controlsContainer,\n    featuresContainer,\n    FRAME_TIME,\n    interactionsContainer,\n    layersContainer,\n    makeChangeOrRecreateWatchers,\n    olCmp,\n    overlaysContainer,\n    projTransforms,\n  } from '../../mixins'\n  import {\n    EPSG_3857,\n    getControlId,\n    getInteractionId,\n    getLayerId,\n    getMapDataProjection,\n    getMapId,\n    getOverlayId,\n    getViewId,\n    roundPointCoords,\n    setMapDataProjection,\n    setMapId,\n  } from '../../ol-ext'\n  import {\n    bufferDebounceTime,\n    fromOlChangeEvent as obsFromOlChangeEvent,\n    fromOlEvent as obsFromOlEvent,\n    fromVueEvent as obsFromVueEvent,\n    fromVueWatcher as obsFromVueWatcher,\n  } from '../../rx-ext'\n  import {\n    addPrefix,\n    assert,\n    clonePlainObject,\n    coalesce,\n    isArray,\n    isEqual,\n    map,\n    mergeDescriptors,\n    omit,\n  } from '../../utils'\n  import { Layer as VectorLayerCmp } from '../vector-layer'\n  import { Source as VectorSourceCmp } from '../vector-source'\n  import ViewCmp from './view.vue'\n\n  /**\n   * Container for **layers**, **interactions**, **controls** and **overlays**. It responsible for viewport\n   * rendering and low level interaction events.\n   *\n   * todo make render function that injects VlView if it is not provided by the user,\n   *      then it can be provided to lower components\n   */\n  export default {\n    name: 'VlMap',\n    components: {\n      ViewCmp,\n      VectorLayerCmp,\n      VectorSourceCmp,\n    },\n    mixins: [\n      projTransforms,\n      layersContainer,\n      controlsContainer,\n      interactionsContainer,\n      overlaysContainer,\n      featuresContainer,\n      olCmp,\n    ],\n    props: {\n      /**\n       * Options for default controls added to the map by default. Set to `false` to disable all map controls. Object\n       * value is used to configure controls.\n       * @type {Object|boolean}\n       * @todo remove when vl-control-* components will be ready\n       */\n      defaultControls: {\n        type: [Object, Boolean],\n        default: true,\n      },\n      /**\n       * Options for default interactions added to the map by default. Object\n       * value is used to configure default interactions.\n       * @type {Object|boolean}\n       */\n      defaultInteractions: {\n        type: [Object, Boolean],\n        default: true,\n      },\n      /**\n       * The element to listen to keyboard events on. For example, if this option is set to `document` the keyboard\n       * interactions will always trigger. If this option is not specified, the element the library listens to keyboard\n       * events on is the component root element.\n       * @type {string|Element|Document|undefined}\n       */\n      keyboardEventTarget: [String, Element, Document],\n      /**\n       * The minimum distance in pixels the cursor must move to be detected as a map move event instead of a click.\n       * Increasing this value can make it easier to click on the map.\n       * @type {number}\n       */\n      moveTolerance: {\n        type: Number,\n        default: 1,\n      },\n      /**\n       * The ratio between physical pixels and device-independent pixels (dips) on the device.\n       * @type {number}\n       */\n      pixelRatio: {\n        type: Number,\n        default: () => window.devicePixelRatio || 1,\n      },\n      /**\n       * Maximum number tiles to load simultaneously.\n       * @type {number}\n       */\n      maxTilesLoading: {\n        type: Number,\n        default: 16,\n      },\n      /**\n       * Root element `tabindex` attribute value. Value should be provided to allow keyboard events on map.\n       * @type {number|string}\n       */\n      tabindex: [String, Number],\n      /**\n       * Projection for input/output coordinates in plain data.\n       * @type {string|undefined}\n       */\n      dataProjection: {\n        type: String,\n        validator: value => getProj(value) != null,\n      },\n      /**\n       * @type {boolean}\n       */\n      wrapX: {\n        type: Boolean,\n        default: true,\n      },\n      /**\n       * @type {boolean}\n       */\n      updateWhileAnimating: {\n        type: Boolean,\n        default: false,\n      },\n      /**\n       * @type {boolean}\n       */\n      updateWhileInteracting: {\n        type: Boolean,\n        default: false,\n      },\n    },\n    data () {\n      return {\n        viewProjection: EPSG_3857,\n        withCustomView: false,\n        size: undefined,\n        currentDataProjection: this.dataProjection,\n      }\n    },\n    computed: {\n      resolvedDataProjection () {\n        return coalesce(\n          this.currentDataProjection,\n          this.dataProjection,\n          this.$options?.dataProjection,\n          this.viewProjection,\n        )\n      },\n      view () {\n        if (!(this.rev && this.$view)) return\n\n        return {\n          id: getViewId(this.$view),\n          type: this.$view.constructor.name,\n        }\n      },\n      /**\n       * @returns {string[]}\n       */\n      layers () {\n        if (!this.rev) return []\n\n        return map(this.getLayers(), layer => ({\n          id: getLayerId(layer),\n          type: layer.constructor.name,\n        }))\n      },\n      /**\n       * @returns {string[]}\n       */\n      controls () {\n        if (!this.rev) return []\n\n        return map(this.getControls(), control => ({\n          id: getControlId(control),\n          type: control.constructor.name,\n        }))\n      },\n      /**\n       * @returns {string[]}\n       */\n      interactions () {\n        if (!this.rev) return []\n\n        return map(this.getInteractions(), interaction => ({\n          id: getInteractionId(interaction),\n          type: interaction.constructor.name,\n        }))\n      },\n      /**\n       * @returns {string[]}\n       */\n      overlays () {\n        if (!this.rev) return []\n\n        return map(this.getOverlays(), overlay => ({\n          id: getOverlayId(overlay),\n          type: overlay.constructor.name,\n        }))\n      },\n      /**\n       * @type {Object[]}\n       */\n      featuresDataProj () {\n        if (!this.rev) return []\n\n        return map(this.getFeatures(), feature => this.writeFeatureInDataProj(feature))\n      },\n      /**\n       * @type {Object[]}\n       */\n      featuresViewProj () {\n        if (!this.rev) return []\n\n        return map(this.getFeatures(), feature => this.writeFeatureInViewProj(feature))\n      },\n    },\n    watch: {\n      rev () {\n        if (!this.$map) return\n\n        if (!isEqual(this.size, this.$map.getSize())) {\n          this.size = this.$map.getSize()\n        }\n      },\n      size: {\n        deep: true,\n        handler (value, prev) {\n          if (isEqual(value, prev)) return\n\n          this.$emit('update:size', value?.slice())\n        },\n      },\n      defaultControls: {\n        deep: true,\n        handler (value) {\n          this.initDefaultControls(value)\n        },\n      },\n      defaultInteractions: {\n        deep: true,\n        handler (value) {\n          this.initDefaultInteractions(value)\n        },\n      },\n      dataProjection (value) {\n        this.setDataProjection(value)\n      },\n      view: {\n        deep: true,\n        handler (value, prev) {\n          if (value === prev) return\n\n          this.$emit('update:view', value)\n        },\n      },\n      layers: {\n        deep: true,\n        handler (value, prev) {\n          if (isEqual(value, prev)) return\n\n          this.$emit('update:layers', value.slice())\n        },\n      },\n      controls: {\n        deep: true,\n        handler (value, prev) {\n          if (isEqual(value, prev)) return\n\n          this.$emit('update:controls', value.slice())\n        },\n      },\n      interactions: {\n        deep: true,\n        handler (value, prev) {\n          if (isEqual(value, prev)) return\n\n          this.$emit('update:interactions', value.slice())\n        },\n      },\n      overlays: {\n        deep: true,\n        handler (value, prev) {\n          if (isEqual(value, prev)) return\n\n          this.$emit('update:overlays', value.slice())\n        },\n      },\n      featuresDataProj: {\n        deep: true,\n        handler (value, prev) {\n          if (isEqual(value, prev)) return\n\n          this.$emit('update:features', clonePlainObject(value))\n        },\n      },\n      .../*#__PURE__*/makeChangeOrRecreateWatchers([\n        'keyboardEventTarget',\n        'moveTolerance',\n        'pixelRatio',\n        'maxTilesLoading',\n      ]),\n    },\n    created () {\n      /**\n       * @type {module:ol/View~View}\n       * @private\n       */\n      this._view = new View({\n        center: [0, 0],\n        zoom: 2,\n      })\n      /**\n       * @type {Object|undefined}\n       */\n      this._viewVm = undefined\n\n      this::defineServices()\n      // todo wrap controls into components and provide vl-control-default\n      this.initDefaultControls(this.defaultControls)\n      // todo initialize without interactions and provide vl-interaction-default component\n      this.initDefaultInteractions(this.defaultInteractions)\n    },\n    methods: {\n      /**\n       * @return {module:ol/Map~Map}\n       * @protected\n       */\n      async createOlObject () {\n        const map = new Map({\n          pixelRatio: this.pixelRatio,\n          moveTolerance: this.moveTolerance,\n          keyboardEventTarget: this.keyboardEventTarget,\n          maxTilesLoading: this.maxTilesLoading,\n          controls: this.$controlsCollection,\n          interactions: this.$interactionsCollection,\n          layers: this.$layersCollection,\n          overlays: this.$overlaysCollection,\n          view: this.$view,\n        })\n        setMapId(map, this.currentId)\n        setMapDataProjection(map, this.resolvedDataProjection)\n        this.size && map.setSize(this.size)\n\n        return map\n      },\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async mount () {\n        this.setTarget(this.$el)\n\n        return this::olCmp.methods.mount()\n      },\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async unmount () {\n        this.setTarget(null)\n\n        return this::olCmp.methods.unmount()\n      },\n      /**\n       * @protected\n       */\n      subscribeAll () {\n        this::olCmp.methods.subscribeAll()\n        this::layersContainer.methods.subscribeAll()\n        this::controlsContainer.methods.subscribeAll()\n        this::interactionsContainer.methods.subscribeAll()\n        this::overlaysContainer.methods.subscribeAll()\n        this::featuresContainer.methods.subscribeAll()\n        this::subscribeToEvents()\n\n        // view projection can be changed in runtime only through vl-view vm\n        this.subscribeTo(\n          obsFromVueWatcher(this, () => this.$viewVm?.resolvedViewProjection),\n          ({ value }) => { this.viewProjection = value || EPSG_3857 },\n        )\n      },\n      /**\n       * @returns {Object}\n       * @protected\n       */\n      getServices () {\n        const vm = this\n\n        return mergeDescriptors(\n          this::olCmp.methods.getServices(),\n          this::layersContainer.methods.getServices(),\n          this::controlsContainer.methods.getServices(),\n          this::interactionsContainer.methods.getServices(),\n          this::overlaysContainer.methods.getServices(),\n          this::featuresContainer.methods.getServices(),\n          {\n            get mapVm () { return vm },\n            get viewVm () { return vm.$viewVm },\n            get viewContainer () { return vm },\n          },\n        )\n      },\n      /**\n       * @return {string|number}\n       * @protected\n       */\n      getIdInternal () {\n        return getMapId(this.$map)\n      },\n      /**\n       * @param {string|number} id\n       * @protected\n       */\n      setIdInternal (id) {\n        if (id === this.getIdInternal()) return\n\n        setMapId(this.$map, id)\n      },\n      /**\n       * @return {Promise<module:ol/Map~Map>}\n       */\n      resolveMap: olCmp.methods.resolveOlObject,\n      /**\n       * @param {number[]} pixel\n       * @param {function} callback\n       * @param {Object} [opts]\n       * @return {Promise}\n       */\n      async forEachFeatureAtPixel (pixel, callback, opts = {}) {\n        return (await this.resolveMap()).forEachFeatureAtPixel(pixel, callback, opts)\n      },\n      /**\n       * @param {number[]} pixel\n       * @param {function} callback\n       * @param {Object} [opts]\n       * @return {Promise}\n       */\n      async forEachLayerAtPixel (pixel, callback, opts = {}) {\n        return (await this.resolveMap()).forEachLayerAtPixel(pixel, callback, opts)\n      },\n      /**\n       * @param {number[]} pixel\n       * @param {boolean} [viewProj=false]\n       * @return {Promise<number[]>} Coordinates in the map view projection.\n       */\n      async getCoordinateFromPixel (pixel, viewProj = false) {\n        const coordinate = (await this.resolveMap()).getCoordinateFromPixel(pixel)\n        if (viewProj) {\n          return roundPointCoords(coordinate)\n        }\n\n        return this.pointToDataProj(coordinate)\n      },\n      /**\n       * @param {Event} event\n       * @param {boolean} [viewProj=false]\n       * @return {Promise<number[]>}\n       */\n      async getEventCoordinate (event, viewProj = false) {\n        const coordinate = (await this.resolveMap()).getEventCoordinate(event)\n        if (viewProj) {\n          return roundPointCoords(coordinate)\n        }\n\n        return this.pointToDataProj(coordinate)\n      },\n      /**\n       * @param {Event} event\n       * @return {Promise<number[]>}\n       */\n      async getEventPixel (event) {\n        return (await this.resolveMap()).getEventPixel(event)\n      },\n      /**\n       * @param {number[]} pixel\n       * @param {Object} [opts]\n       * @return {Promise}\n       */\n      async getFeaturesAtPixel (pixel, opts = {}) {\n        return (await this.resolveMap()).getFeaturesAtPixel(pixel, opts)\n      },\n      /**\n       * @param {number[]} pixel\n       * @param {Object} [options]\n       * @return {Promise<boolean>}\n       */\n      async hasFeatureAtPixel (pixel, options = {}) {\n        return (await this.resolveMap()).hasFeatureAtPixel(pixel, options)\n      },\n      /**\n       * @param {number[]} coordinate Coordinates in map view projection\n       * @param {boolean} [viewProj=false]\n       * @return {Promise<number[]>}\n       */\n      async getPixelFromCoordinate (coordinate, viewProj = false) {\n        if (!viewProj) {\n          coordinate = this.pointToViewProj(coordinate)\n        }\n\n        return (await this.resolveMap()).getPixelFromCoordinate(coordinate)\n      },\n      /**\n       * @return {number[]|undefined}\n       */\n      getSize () {\n        return coalesce(this.$map?.getSize(), this.size)\n      },\n      /**\n       * @param {number[]} size\n       */\n      setSize (size) {\n        assert(isArray(size) && size.length === 2, 'Invalid size')\n        size = size.slice()\n\n        if (!isEqual(size, this.size)) {\n          this.size = size\n        }\n        if (this.$map && !isEqual(size, this.$map.getSize())) {\n          this.$map.setSize(size)\n        }\n      },\n      /**\n       * Updates map size.\n       * @return {Promise<void>}\n       */\n      async updateSize () {\n        (await this.resolveMap()).updateSize()\n      },\n      /**\n       * @return {Promise<void>}\n       */\n      async render () {\n        const map = await this.resolveMap()\n\n        return new Promise(resolve => {\n          map.once('postrender', () => resolve())\n          map.render()\n        })\n      },\n      /**\n       * @return {HTMLElement|undefined}\n       */\n      getTarget () {\n        return coalesce(this.$map?.getTarget(), this.$el)\n      },\n      /**\n       * @param {HTMLElement} target\n       */\n      setTarget (target) {\n        if (this.$map && target !== this.$map.getTarget()) {\n          this.$map.setTarget(target)\n          this.$emit('update:target', target)\n        }\n      },\n      /**\n       * @return {HTMLElement|undefined}\n       */\n      getViewport () {\n        return this.$map?.getViewport()\n      },\n      /**\n       * @return {module:ol/View~View|undefined}\n       */\n      getView () {\n        return coalesce(this.$map?.getView(), this._view)\n      },\n      /**\n       * @return {Object}\n       */\n      getViewVm () {\n        return this._viewVm\n      },\n      /**\n       * @param {module:ol/View~View|Vue|undefined} view\n       */\n      setView (view) {\n        view = view?.$view || view\n        assert(!view || view instanceof View, 'Invalid view')\n\n        if (view !== this._view) {\n          this._view = view\n          this._viewVm = view?.vm && view?.vm[0]\n        }\n        if (this.$map && view !== this.$map.getView()) {\n          this.$map.setView(view)\n        }\n\n        this.scheduleRefresh()\n      },\n      /**\n       * @return {module:ol/proj~ProjectionLike|undefined}\n       */\n      getDataProjection () {\n        return coalesce(this.$map && getMapDataProjection(this.$map), this.resolvedDataProjection)\n      },\n      /**\n       * @param {module:ol/proj~ProjectionLike} projection\n       */\n      setDataProjection (projection) {\n        projection = getProj(projection)\n        assert(projection != null, 'Invalid projection')\n\n        if (projection.getCode() !== this.currentDataProjection) {\n          this.currentDataProjection = projection.getCode()\n        }\n        if (this.$map && projection.getCode() !== getMapDataProjection(this.$map)) {\n          setMapDataProjection(this.$map, projection.getCode())\n        }\n      },\n      /**\n       * Triggers focus on map container.\n       */\n      focus () {\n        this.$el.focus()\n      },\n      /**\n       * Updates map size and re-renders map.\n       * @return {Promise}\n       */\n      async refresh () {\n        await this.updateSize()\n        await this.render()\n\n        return this::olCmp.methods.refresh()\n      },\n      isInteracting () {\n        if (!this.$map) return false\n\n        return this.getInteractions().some(interaction => !!interaction.get('interacting'))\n      },\n      /**\n       * @param {Object} sourceVm\n       * @protected\n       */\n      featuresOverlaySourceCreated (sourceVm) {\n        sourceVm.addFeatures(this.getFeatures())\n\n        const adds = obsFromVueEvent(this, 'addfeature').pipe(\n          mapObs(({ feature }) => feature),\n          bufferDebounceTime(FRAME_TIME),\n        )\n        this.subscribeTo(adds, features => sourceVm.addFeatures(features))\n\n        const removes = obsFromVueEvent(this, 'removefeature').pipe(\n          mapObs(({ feature }) => feature),\n          bufferDebounceTime(FRAME_TIME),\n        )\n        this.subscribeTo(removes, features => sourceVm.removeFeatures(features))\n      },\n      /**\n       * @protected {string} value\n       * @protected\n       */\n      resolvedDataProjectionChanged (value) {\n        if (value === this.dataProjection) return\n\n        this.$emit('update:dataProjection', value)\n      },\n    },\n  }\n\n  function defineServices () {\n    Object.defineProperties(this, {\n      /**\n       * OpenLayers map instance.\n       * @type {module:ol/Map~Map|undefined}\n       */\n      $map: {\n        enumerable: true,\n        get: () => this.$olObject,\n      },\n      /**\n       * @type {module:ol/View~View|undefined}\n       */\n      $view: {\n        enumerable: true,\n        get: this.getView,\n      },\n      /**\n       * @type {Object|undefined}\n       */\n      $viewVm: {\n        enumerable: true,\n        get: this.getViewVm,\n      },\n      $featuresOverlayVm: {\n        enumerable: true,\n        get: () => this.$refs?.featuresOverlay,\n      },\n      $featuresOverlaySourceVm: {\n        enumerable: true,\n        get: () => this.$refs?.featuresOverlaySource,\n      },\n    })\n  }\n\n  /**\n   * Subscribe to OL map events.\n   *\n   * @return {void}\n   * @private\n   */\n  async function subscribeToEvents () {\n    const setterKey = addPrefix('set')\n    const viewChanges = obsFromOlChangeEvent(this.$map, 'view', true).pipe(\n      tap(({ value: view }) => {\n        if (this._viewSubs) {\n          this.unsubscribe(this._viewSubs)\n        }\n        if (view) {\n          this._viewSubs = this.subscribeTo(\n            obsFromOlChangeEvent(view, 'id', true),\n            ::this.scheduleRefresh,\n          )\n        }\n        this.viewProjection = view?.getProjection().getCode() || EPSG_3857\n        this.withCustomView = view && (!view.vm || view.vm.some(vm => vm !== this.$refs.view))\n      }),\n    )\n    const propChanges = mergeObs(\n      viewChanges,\n      obsFromOlChangeEvent(this.$map, [\n        'dataProjection',\n        'size',\n        'target',\n        // 'layerGroup', FIXME not ready\n      ], true),\n    ).pipe(\n      mapObs(evt => ({\n        ...evt,\n        setter: this[setterKey(evt.prop)],\n      })),\n    )\n    this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n\n    // pointer\n    const pointerEvents = mergeObs(\n      obsFromOlEvent(this.$map, [\n        MapBrowserEventType.CLICK,\n        MapBrowserEventType.DBLCLICK,\n        MapBrowserEventType.SINGLECLICK,\n      ]),\n      obsFromOlEvent(this.$map, [\n        MapBrowserEventType.POINTERDRAG,\n        MapBrowserEventType.POINTERMOVE,\n      ], null, [\n        distinctUntilChanged((a, b) => isEqual({\n          t: a.type,\n          c: a.coordinate,\n        }, {\n          t: b.type,\n          c: b.coordinate,\n        })),\n      ]),\n    ).pipe(\n      mapObs(evt => omit({\n        ...evt,\n        pixel: evt.pixel,\n        coordinate: this.pointToDataProj(evt.coordinate),\n      }, [\n        'pixel_',\n        'coordinate_',\n      ])),\n    )\n    // other\n    const otherEvents = obsFromOlEvent(this.$map, [\n      MapEventType.MOVESTART,\n      MapEventType.MOVEEND,\n      MapEventType.POSTRENDER,\n      RenderEventType.PRECOMPOSE,\n      RenderEventType.POSTCOMPOSE,\n      RenderEventType.RENDERCOMPLETE,\n    ])\n    this.subscribeTo(mergeObs(pointerEvents, otherEvents), evt => this.$emit(evt.type, evt))\n  }\n</script>\n","import { pick } from '../../utils'\nimport Map from './map.vue'\nimport View from './view.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Map, options)\n  Object.assign(View, options)\n\n  Vue.component(Map.name, Map)\n  Vue.component(View.name, View)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Map,\n  View,\n}\n","<script>\n  import { source, urlTileSource, xyzSource } from '../../mixins'\n  import { coalesce } from '../../utils'\n\n  const MAPBOX_URL_TEMPLATE = 'https://{a-c}.tiles.mapbox.com/v4/{mapId}/{z}/{x}/{y}{tileNameSuffix}.{tileFormat}?access_token={accessToken}'\n  const MAPBOX_ATTRIBUTIONS = '&copy; <a href=\"https://www.mapbox.com/\" target=\"_blank\">MapBox</a>.'\n\n  export default {\n    name: 'VlSourceMapbox',\n    mixins: [\n      xyzSource,\n    ],\n    props: {\n      /* eslint-disable vue/require-prop-types */\n      // ol/source/Source\n      attributions: {\n        ...source.props.attributions,\n        default: MAPBOX_ATTRIBUTIONS,\n      },\n      // ol/source/UrlTile\n      url: {\n        ...urlTileSource.props.url,\n        default: MAPBOX_URL_TEMPLATE,\n      },\n      /* eslint-enable vue/require-prop-types */\n      // custom\n      accessToken: {\n        type: String,\n        required: true,\n      },\n      mapId: {\n        type: String,\n        required: true,\n      },\n      tileFormat: {\n        type: String,\n        default: 'png',\n      },\n    },\n    computed: {\n      /**\n       * @type {string}\n       */\n      tileNameSuffix () {\n        return tileNameSuffix(this.tilePixelRatio)\n      },\n      /**\n       * @type {string[]}\n       */\n      urlTokens () {\n        return ['mapId', 'accessToken', 'tileNameSuffix', 'tileFormat']\n      },\n    },\n  }\n\n  /**\n   * @param {number} [ratio]\n   * @returns {number}\n   * @private\n   */\n  function tileRatio (ratio) {\n    ratio = coalesce(ratio, 1)\n\n    return ratio > 1 ? 2 : 1\n  }\n\n  /**\n   * @param {number} [ratio]\n   * @returns {string}\n   * @private\n   */\n  function tileNameSuffix (ratio) {\n    ratio = tileRatio(ratio)\n\n    return ratio > 1 ? ['@', ratio, 'x'].join('') : ''\n  }\n</script>\n","\nimport { source, urlTileSource, xyzSource } from '../../mixins'\nimport { coalesce } from '../../utils'\n\nconst MAPBOX_URL_TEMPLATE = 'https://{a-c}.tiles.mapbox.com/v4/{mapId}/{z}/{x}/{y}{tileNameSuffix}.{tileFormat}?access_token={accessToken}'\nconst MAPBOX_ATTRIBUTIONS = '&copy; <a href=\"https://www.mapbox.com/\" target=\"_blank\">MapBox</a>.'\n\nexport default {\n  name: 'VlSourceMapbox',\n  mixins: [\n    xyzSource,\n  ],\n  props: {\n    /* eslint-disable vue/require-prop-types */\n    // ol/source/Source\n    attributions: {\n      ...source.props.attributions,\n      default: MAPBOX_ATTRIBUTIONS,\n    },\n    // ol/source/UrlTile\n    url: {\n      ...urlTileSource.props.url,\n      default: MAPBOX_URL_TEMPLATE,\n    },\n    /* eslint-enable vue/require-prop-types */\n    // custom\n    accessToken: {\n      type: String,\n      required: true,\n    },\n    mapId: {\n      type: String,\n      required: true,\n    },\n    tileFormat: {\n      type: String,\n      default: 'png',\n    },\n  },\n  computed: {\n    /**\n     * @type {string}\n     */\n    tileNameSuffix () {\n      return tileNameSuffix(this.tilePixelRatio)\n    },\n    /**\n     * @type {string[]}\n     */\n    urlTokens () {\n      return ['mapId', 'accessToken', 'tileNameSuffix', 'tileFormat']\n    },\n  },\n}\n\n/**\n * @param {number} [ratio]\n * @returns {number}\n * @private\n */\nfunction tileRatio (ratio) {\n  ratio = coalesce(ratio, 1)\n\n  return ratio > 1 ? 2 : 1\n}\n\n/**\n * @param {number} [ratio]\n * @returns {string}\n * @private\n */\nfunction tileNameSuffix (ratio) {\n  ratio = tileRatio(ratio)\n\n  return ratio > 1 ? ['@', ratio, 'x'].join('') : ''\n}\n","import { pick } from '../../utils'\nimport Source from './source.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Source, options)\n\n  Vue.component(Source.name, Source)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Source,\n}\n","/**\n * @module ol/layer/VectorTileRenderType\n */\n/**\n * @enum {string}\n * Render mode for vector tiles:\n *  * `'image'`: Vector tiles are rendered as images. Great performance, but\n *    point symbols and texts are always rotated with the view and pixels are\n *    scaled during zoom animations.\n *  * `'hybrid'`: Polygon and line elements are rendered as images, so pixels\n *    are scaled during zoom animations. Point symbols and texts are accurately\n *    rendered as vectors and can stay upright on rotated views.\n *  * `'vector'`: Everything is rendered as vectors. Use this mode for improved\n *    performance on vector tile layers with only a few rendered features (e.g.\n *    for highlighting a subset of features of another layer with the same\n *    source).\n * @api\n */\nexport default {\n    IMAGE: 'image',\n    HYBRID: 'hybrid',\n    VECTOR: 'vector',\n};\n//# sourceMappingURL=VectorTileRenderType.js.map","\nimport { VectorTile as VectorTileLayer } from 'ol/layer'\nimport RenderType from 'ol/layer/VectorTileRenderType'\nimport { makeChangeOrRecreateWatchers, tileLayer, vectorLayer } from '../../mixins'\n\nexport default {\n  name: 'VlLayerVectorTile',\n  mixins: [\n    tileLayer,\n    vectorLayer,\n  ],\n  props: {\n    renderMode: {\n      type: String,\n      default: RenderType.HYBRID,\n      validator: val => Object.values(RenderType).includes(val),\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'renderMode',\n    ]),\n  },\n  methods: {\n    /**\n     * @return {VectorTileLayer}\n     * @protected\n     */\n    createLayer () {\n      return new VectorTileLayer({\n        // ol/layer/Base\n        className: this.className,\n        opacity: this.currentOpacity,\n        visible: this.currentVisible,\n        extent: this.currentExtentViewProj,\n        zIndex: this.currentZIndex,\n        minResolution: this.currentMinResolution,\n        maxResolution: this.currentMaxResolution,\n        minZoom: this.currentMinZoom,\n        maxZoom: this.currentMaxZoom,\n        // ol/layer/Layer\n        render: this.render,\n        source: this.$source,\n        // ol/layer/BaseVector\n        renderOrder: this.renderOrder,\n        renderBuffer: this.renderBuffer,\n        declutter: this.declutter,\n        updateWhileAnimating: this.updateWhileAnimating,\n        updateWhileInteracting: this.updateWhileInteracting,\n        style: this.$style,\n        // ol/layer/VectorTile\n        // tile layer props\n        preload: this.currentPreload,\n        useInterimTilesOnError: this.currentUseInterimTilesOnError,\n        // vector tile props\n        renderMode: this.renderMode,\n      })\n    },\n  },\n}\n","import { pick } from '../../utils'\nimport Layer from './layer.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Layer, options)\n\n  Vue.component(Layer.name, Layer)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Layer,\n}\n","\nimport { MapboxVector as MapboxVectorLayer } from 'ol/layer'\nimport { makeChangeOrRecreateWatchers, vectorLayer } from '../../mixins'\nimport { isArray, isString } from '../../utils'\nimport { Layer } from '../vector-tile-layer'\n\nexport default {\n  name: 'VlLayerMapboxVector',\n  extends: Layer,\n  props: {\n    styleUrl: {\n      type: String,\n      required: true,\n    },\n    accessToken: {\n      type: String,\n      required: true,\n    },\n    sourceId: String,\n    layerIds: {\n      type: Array,\n      validate: val => isArray(val) && val.every(isString),\n    },\n    // eslint-disable-next-line vue/require-prop-types\n    declutter: {\n      ...vectorLayer.props.declutter,\n      default: true,\n    },\n  },\n  watch: {\n    /*#__PURE__*/...makeChangeOrRecreateWatchers([\n      'styleUrl',\n      'accessToken',\n      'sourceId',\n      'layerIds',\n    ], [\n      'layerIds',\n    ]),\n  },\n  methods: {\n    /**\n     * @returns {HeatmapLayer}\n     */\n    createLayer () {\n      return new MapboxVectorLayer({\n        // ol/layer/Base\n        className: this.className,\n        opacity: this.currentOpacity,\n        visible: this.currentVisible,\n        extent: this.currentExtentViewProj,\n        zIndex: this.currentZIndex,\n        minResolution: this.currentMinResolution,\n        maxResolution: this.currentMaxResolution,\n        minZoom: this.currentMinZoom,\n        maxZoom: this.currentMaxZoom,\n        // ol/layer/BaseVector\n        renderOrder: this.renderOrder,\n        renderBuffer: this.renderBuffer,\n        declutter: this.declutter,\n        updateWhileAnimating: this.updateWhileAnimating,\n        updateWhileInteracting: this.updateWhileInteracting,\n        // ol/layer/Tile\n        preload: this.currentPreload,\n        useInterimTilesOnError: this.currentUseInterimTilesOnError,\n        // ol/layer/MapboxVector\n        styleUrl: this.styleUrl,\n        accessToken: this.accessToken,\n        source: this.sourceId,\n        layers: this.layerIds,\n      })\n    },\n  },\n}\n","import { pick } from '../../utils'\nimport Layer from './layer.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Layer, options)\n\n  Vue.component(Layer.name, Layer)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Layer,\n}\n","\nimport { Collection } from 'ol'\nimport { altKeyOnly, always, primaryAction } from 'ol/events/condition'\nimport { Modify as ModifyInteraction } from 'ol/interaction'\nimport { Vector as VectorSource } from 'ol/source'\nimport { merge as mergeObs } from 'rxjs'\nimport { map as mapObs, tap } from 'rxjs/operators'\nimport { interaction, makeChangeOrRecreateWatchers, styleContainer } from '../../mixins'\nimport { COORD_PRECISION, writeGeoJsonFeature } from '../../ol-ext'\nimport { fromOlEvent as obsFromOlEvent } from '../../rx-ext'\nimport { assert, instanceOf, isFunction, map, mergeDescriptors } from '../../utils'\n\nexport default {\n  name: 'VlInteractionModify',\n  mixins: [\n    interaction,\n    styleContainer,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  props: {\n    /**\n     * Source or collection identifier from IdentityMap.\n     * @type {String}\n     */\n    source: {\n      type: String,\n      required: true,\n    },\n    /**\n     * A function that takes an `ol.MapBrowserEvent` and returns a boolean to indicate whether that event will be\n     * considered to add or move a vertex to the sketch. Default is `ol.events.condition.primaryAction`.\n     * @type {function|undefined}\n     */\n    condition: {\n      type: Function,\n      default: primaryAction,\n    },\n    /**\n     * A function that takes an `ol.MapBrowserEvent` and returns a boolean to indicate whether that event should be handled.\n     * By default, `ol.events.condition.singleClick` with `ol.events.condition.altKeyOnly` results in a vertex deletion.\n     * @type {function|undefined}\n     */\n    deleteCondition: {\n      type: Function,\n      default: altKeyOnly,\n    },\n    /**\n     * A function that takes an `ol.MapBrowserEvent` and returns a boolean to indicate whether a new vertex can be added\n     * to the sketch features. Default is `ol.events.condition.always`.\n     * @type {function|undefined}\n     */\n    insertVertexCondition: {\n      type: Function,\n      default: always,\n    },\n    /**\n     * Pixel tolerance for considering the pointer close enough to a segment or vertex for editing.\n     * @type {number}\n     */\n    pixelTolerance: {\n      type: Number,\n      default: 10,\n    },\n    /**\n     * Wrap the world horizontally on the sketch overlay.\n     * @type {boolean}\n     */\n    wrapX: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'source',\n      'condition',\n      'deleteCondition',\n      'insertVertexCondition',\n      'pixelTolerance',\n      'wrapX',\n    ]),\n  },\n  methods: {\n    /**\n     * @return {Promise<Modify>}\n     * @protected\n     */\n    async createInteraction () {\n      let source = this._source = await this.getInstance(this.source)\n      assert(!!source, `Source \"${this.source}\" not found in identity map.`)\n\n      let features\n      if (source instanceof VectorSource) {\n        features = source.getFeaturesCollection()\n        if (features) {\n          instanceOf(features, Collection, `Source \"${this.source}\" doesn't provide features collection.`)\n          source = null\n        }\n      } else {\n        if (isFunction(source.getFeaturesCollection)) {\n          features = source.getFeaturesCollection()\n        } else if (isFunction(source.getFeatures)) {\n          features = source.getFeatures()\n        }\n        instanceOf(features, Collection, `Source \"${this.source}\" doesn't provide features collection.`)\n        source = null\n      }\n\n      return new ModifyInteraction({\n        source,\n        features,\n        condition: this.condition,\n        deleteCondition: this.deleteCondition,\n        insertVertexCondition: this.insertVertexCondition,\n        pixelTolerance: this.pixelTolerance,\n        wrapX: this.wrapX,\n        style: this.$style,\n      })\n    },\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return mergeDescriptors(\n        this::interaction.methods.getServices(),\n        this::styleContainer.methods.getServices(),\n      )\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::interaction.methods.subscribeAll()\n      this::subscribeToInteractionChanges()\n    },\n    /**\n     * @return {StyleTarget}\n     * @protected\n     */\n    getStyleTarget () {\n      return {\n        getStyle: () => this._style,\n        setStyle: () => {\n          if (false) {\n            this.$logger.log('style changed, scheduling recreate...')\n          }\n\n          this.scheduleRecreate()\n        },\n      }\n    },\n    async getOverlay () {\n      return (await this.resolveInteraction()).getOverlay()\n    },\n    async getPointerCount () {\n      return (await this.resolveInteraction()).getPointerCount()\n    },\n    async removePoint () {\n      return (await this.resolveInteraction()).removePoint()\n    },\n  },\n}\n\n/**\n * @private\n */\nfunction subscribeToInteractionChanges () {\n  let modifying\n  const start = obsFromOlEvent(this.$interaction, 'modifystart').pipe(\n    tap(evt => {\n      this.setInteracting(true)\n      modifying = []\n      evt.features.forEach(feature => {\n        modifying[feature.getId()] = feature.getRevision()\n      })\n    }),\n  )\n  const end = obsFromOlEvent(this.$interaction, 'modifyend').pipe(\n    mapObs(evt => ({\n      ...evt,\n      modified: evt.features.getArray().reduce((modified, feature, idx) => {\n        if (modifying[feature.getId()] !== feature.getRevision()) {\n          modified[idx] = feature.getId()\n        }\n        return modified\n      }, {}),\n    })),\n    tap(() => this.setInteracting(false)),\n  )\n  const events = mergeObs(start, end).pipe(\n    mapObs(({ type, features, modified }) => {\n      const viewProj = this.resolvedViewProjection\n      const dataProj = this.resolvedDataProjection\n      return {\n        type,\n        features: features instanceof Collection ? features.getArray() : features,\n        modified: modified || {},\n        get json () {\n          if (!this._json) {\n            this._json = map(this.features, feature => writeGeoJsonFeature(feature, viewProj, dataProj, COORD_PRECISION))\n          }\n          return this._json\n        },\n      }\n    }),\n  )\n  this.subscribeTo(events, evt => this.$emit(evt.type, evt))\n}\n","<script>\n  import { Collection } from 'ol'\n  import { altKeyOnly, always, primaryAction } from 'ol/events/condition'\n  import { Modify as ModifyInteraction } from 'ol/interaction'\n  import { Vector as VectorSource } from 'ol/source'\n  import { merge as mergeObs } from 'rxjs'\n  import { map as mapObs, tap } from 'rxjs/operators'\n  import { interaction, makeChangeOrRecreateWatchers, styleContainer } from '../../mixins'\n  import { COORD_PRECISION, writeGeoJsonFeature } from '../../ol-ext'\n  import { fromOlEvent as obsFromOlEvent } from '../../rx-ext'\n  import { assert, instanceOf, isFunction, map, mergeDescriptors } from '../../utils'\n\n  export default {\n    name: 'VlInteractionModify',\n    mixins: [\n      interaction,\n      styleContainer,\n    ],\n    stubVNode: {\n      empty: false,\n      attrs () {\n        return {\n          id: this.vmId,\n          class: this.vmClass,\n        }\n      },\n    },\n    props: {\n      /**\n       * Source or collection identifier from IdentityMap.\n       * @type {String}\n       */\n      source: {\n        type: String,\n        required: true,\n      },\n      /**\n       * A function that takes an `ol.MapBrowserEvent` and returns a boolean to indicate whether that event will be\n       * considered to add or move a vertex to the sketch. Default is `ol.events.condition.primaryAction`.\n       * @type {function|undefined}\n       */\n      condition: {\n        type: Function,\n        default: primaryAction,\n      },\n      /**\n       * A function that takes an `ol.MapBrowserEvent` and returns a boolean to indicate whether that event should be handled.\n       * By default, `ol.events.condition.singleClick` with `ol.events.condition.altKeyOnly` results in a vertex deletion.\n       * @type {function|undefined}\n       */\n      deleteCondition: {\n        type: Function,\n        default: altKeyOnly,\n      },\n      /**\n       * A function that takes an `ol.MapBrowserEvent` and returns a boolean to indicate whether a new vertex can be added\n       * to the sketch features. Default is `ol.events.condition.always`.\n       * @type {function|undefined}\n       */\n      insertVertexCondition: {\n        type: Function,\n        default: always,\n      },\n      /**\n       * Pixel tolerance for considering the pointer close enough to a segment or vertex for editing.\n       * @type {number}\n       */\n      pixelTolerance: {\n        type: Number,\n        default: 10,\n      },\n      /**\n       * Wrap the world horizontally on the sketch overlay.\n       * @type {boolean}\n       */\n      wrapX: {\n        type: Boolean,\n        default: false,\n      },\n    },\n    watch: {\n      .../*#__PURE__*/makeChangeOrRecreateWatchers([\n        'source',\n        'condition',\n        'deleteCondition',\n        'insertVertexCondition',\n        'pixelTolerance',\n        'wrapX',\n      ]),\n    },\n    methods: {\n      /**\n       * @return {Promise<Modify>}\n       * @protected\n       */\n      async createInteraction () {\n        let source = this._source = await this.getInstance(this.source)\n        assert(!!source, `Source \"${this.source}\" not found in identity map.`)\n\n        let features\n        if (source instanceof VectorSource) {\n          features = source.getFeaturesCollection()\n          if (features) {\n            instanceOf(features, Collection, `Source \"${this.source}\" doesn't provide features collection.`)\n            source = null\n          }\n        } else {\n          if (isFunction(source.getFeaturesCollection)) {\n            features = source.getFeaturesCollection()\n          } else if (isFunction(source.getFeatures)) {\n            features = source.getFeatures()\n          }\n          instanceOf(features, Collection, `Source \"${this.source}\" doesn't provide features collection.`)\n          source = null\n        }\n\n        return new ModifyInteraction({\n          source,\n          features,\n          condition: this.condition,\n          deleteCondition: this.deleteCondition,\n          insertVertexCondition: this.insertVertexCondition,\n          pixelTolerance: this.pixelTolerance,\n          wrapX: this.wrapX,\n          style: this.$style,\n        })\n      },\n      /**\n       * @returns {Object}\n       * @protected\n       */\n      getServices () {\n        return mergeDescriptors(\n          this::interaction.methods.getServices(),\n          this::styleContainer.methods.getServices(),\n        )\n      },\n      /**\n       * @return {void}\n       * @protected\n       */\n      subscribeAll () {\n        this::interaction.methods.subscribeAll()\n        this::subscribeToInteractionChanges()\n      },\n      /**\n       * @return {StyleTarget}\n       * @protected\n       */\n      getStyleTarget () {\n        return {\n          getStyle: () => this._style,\n          setStyle: () => {\n            if (process.env.VUELAYERS_DEBUG) {\n              this.$logger.log('style changed, scheduling recreate...')\n            }\n\n            this.scheduleRecreate()\n          },\n        }\n      },\n      async getOverlay () {\n        return (await this.resolveInteraction()).getOverlay()\n      },\n      async getPointerCount () {\n        return (await this.resolveInteraction()).getPointerCount()\n      },\n      async removePoint () {\n        return (await this.resolveInteraction()).removePoint()\n      },\n    },\n  }\n\n  /**\n   * @private\n   */\n  function subscribeToInteractionChanges () {\n    let modifying\n    const start = obsFromOlEvent(this.$interaction, 'modifystart').pipe(\n      tap(evt => {\n        this.setInteracting(true)\n        modifying = []\n        evt.features.forEach(feature => {\n          modifying[feature.getId()] = feature.getRevision()\n        })\n      }),\n    )\n    const end = obsFromOlEvent(this.$interaction, 'modifyend').pipe(\n      mapObs(evt => ({\n        ...evt,\n        modified: evt.features.getArray().reduce((modified, feature, idx) => {\n          if (modifying[feature.getId()] !== feature.getRevision()) {\n            modified[idx] = feature.getId()\n          }\n          return modified\n        }, {}),\n      })),\n      tap(() => this.setInteracting(false)),\n    )\n    const events = mergeObs(start, end).pipe(\n      mapObs(({ type, features, modified }) => {\n        const viewProj = this.resolvedViewProjection\n        const dataProj = this.resolvedDataProjection\n        return {\n          type,\n          features: features instanceof Collection ? features.getArray() : features,\n          modified: modified || {},\n          get json () {\n            if (!this._json) {\n              this._json = map(this.features, feature => writeGeoJsonFeature(feature, viewProj, dataProj, COORD_PRECISION))\n            }\n            return this._json\n          },\n        }\n      }),\n    )\n    this.subscribeTo(events, evt => this.$emit(evt.type, evt))\n  }\n</script>\n","import { pick } from '../../utils'\nimport Interaction from './interaction.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Interaction, options)\n\n  Vue.component(Interaction.name, Interaction)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Interaction,\n}\n","\nimport { OSM as OSMSource } from 'ol/source'\nimport { makeChangeOrRecreateWatchers, source, urlTileSource, xyzSource } from '../../mixins'\nimport { noop } from '../../utils'\n\nconst OSM_ATTRIBUTIONS = '&copy; <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">OpenStreetMap</a> contributors.'\nconst OSM_URL_TEMPLATE = 'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png'\nconst OSM_MAX_ZOOM = 19\n\nexport default {\n  name: 'VlSourceOsm',\n  mixins: [\n    xyzSource,\n  ],\n  props: {\n    /* eslint-disable vue/require-prop-types */\n    // ol/source/Source\n    attributions: {\n      ...source.props.attributions,\n      default: OSM_ATTRIBUTIONS,\n    },\n    // ol/source/UrlTile\n    url: {\n      ...urlTileSource.props.url,\n      default: OSM_URL_TEMPLATE,\n    },\n    // ol/source/XYZ\n    maxZoom: {\n      ...xyzSource.props.maxZoom,\n      default: OSM_MAX_ZOOM,\n    },\n    /* eslint-enable vue/require-prop-types */\n  },\n  computed: {\n    tileGridIdent: noop,\n    inputTileGridFactory: noop,\n    inputTileUrlFunction: noop,\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'inputUrl',\n      'maxZoom',\n    ]),\n  },\n  methods: {\n    createSource () {\n      // always EPSG:3857, size: 256x256, format png\n      return new OSMSource({\n        // ol/source/Source\n        attributions: this.currentAttributions,\n        wrapX: this.wrapX,\n        // ol/source/Tile\n        cacheSize: this.cacheSize,\n        opaque: this.opaque,\n        // ol/source/UrlTile\n        tileLoadFunction: this.currentTileLoadFunction,\n        url: this.currentUrls[0],\n        // ol/source/TileImage\n        crossOrigin: this.crossOrigin,\n        reprojectionErrorThreshold: this.reprojectionErrorThreshold,\n        imageSmoothing: this.imageSmoothing,\n        // ol/source/XYZ\n        maxZoom: this.maxZoom,\n      })\n    },\n    inputUrlChanged (value) {\n      this.setUrl(value)\n    },\n    // skip all other handlers\n    tileClassChanged: noop,\n    inputTileUrlFunctionChanged: noop,\n    inputTileGridFactoryChanged: noop,\n    tileGridChanged: noop,\n    tilePixelRatioChanged: noop,\n    transitionChanged: noop,\n    zDirectionChanged: noop,\n    attributionsCollapsibleChanged: noop,\n    projectionChanged: noop,\n  },\n}\n","import { pick } from '../../utils'\nimport Source from './source.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Source, options)\n\n  Vue.component(Source.name, Source)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Source,\n}\n","/**\n * @module ol/OverlayPositioning\n */\n/**\n * Overlay position: `'bottom-left'`, `'bottom-center'`,  `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, `'top-right'`\n * @enum {string}\n */\nexport default {\n    BOTTOM_LEFT: 'bottom-left',\n    BOTTOM_CENTER: 'bottom-center',\n    BOTTOM_RIGHT: 'bottom-right',\n    CENTER_LEFT: 'center-left',\n    CENTER_CENTER: 'center-center',\n    CENTER_RIGHT: 'center-right',\n    TOP_LEFT: 'top-left',\n    TOP_CENTER: 'top-center',\n    TOP_RIGHT: 'top-right',\n};\n//# sourceMappingURL=OverlayPositioning.js.map","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Overlay } from 'ol'\nimport OverlayPositioning from 'ol/OverlayPositioning'\nimport { makeChangeOrRecreateWatchers, olCmp, projTransforms, waitForMap } from '../../mixins'\nimport { EPSG_3857, getOverlayId, initializeOverlay, roundPointCoords, setOverlayId } from '../../ol-ext'\nimport { fromOlChangeEvent as obsFromOlChangeEvent } from '../../rx-ext'\nimport {\n  addPrefix,\n  assert,\n  clonePlainObject,\n  coalesce,\n  identity,\n  isArray,\n  isEqual,\n  isPlainObject,\n} from '../../utils'\n\nexport default {\n  name: 'VlOverlay',\n  mixins: [\n    projTransforms,\n    olCmp,\n    waitForMap,\n  ],\n  props: {\n    offset: {\n      type: Array,\n      default: () => [0, 0],\n      validator: value => value.length === 2,\n    },\n    position: {\n      type: Array,\n      validator: value => value.length === 2,\n      // required: true,\n    },\n    positioning: {\n      type: String,\n      default: OverlayPositioning.TOP_LEFT,\n      validator: value => Object.values(OverlayPositioning).includes(value),\n    },\n    stopEvent: {\n      type: Boolean,\n      default: true,\n    },\n    insertFirst: {\n      type: Boolean,\n      default: true,\n    },\n    autoPan: [Boolean, Object],\n    autoPanMargin: Number,\n    autoPanAnimation: Object,\n    autoPanOptions: Object,\n    className: String,\n  },\n  data () {\n    return {\n      visible: false,\n      viewProjection: EPSG_3857,\n      dataProjection: EPSG_3857,\n      currentOffset: this.offset.slice(),\n      currentPositionViewProj: roundPointCoords(this.position),\n      currentPositioning: this.positioning,\n    }\n  },\n  computed: {\n    positionDataProj () {\n      return roundPointCoords(this.position)\n    },\n    positionViewProj () {\n      return this.pointToViewProj(this.position)\n    },\n    currentPositionDataProj () {\n      return this.pointToDataProj(this.currentPositionViewProj)\n    },\n    inputOffset () {\n      return this.offset.slice()\n    },\n    inputAutoPan () {\n      return isPlainObject(this.autoPan)\n        ? clonePlainObject(this.autoPan)\n        : this.autoPan\n    },\n    inputAutoPanAnimation () {\n      return isPlainObject(this.autoPanAnimation)\n        ? clonePlainObject(this.autoPanAnimation)\n        : this.autoPanAnimation\n    },\n    inputAutoPanOptions () {\n      return isPlainObject(this.autoPanOptions)\n        ? clonePlainObject(this.autoPanOptions)\n        : this.autoPanOptions\n    },\n    classes () {\n      return [\n        this.vmClass,\n        this.visible ? 'visible' : undefined,\n      ].filter(identity)\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$overlay) return\n\n      if (!isEqual(this.currentOffset, this.$overlay.getOffset())) {\n        this.currentOffset = this.$overlay.getOffset()\n      }\n      if (!isEqual(this.currentPositionViewProj, this.$overlay.getPosition())) {\n        this.currentPositionViewProj = this.$overlay.getPosition()\n      }\n      if (this.currentPositioning !== this.$overlay.getPositioning()) {\n        this.currentPositioning = this.$overlay.getPositioning()\n      }\n    },\n    inputOffset: {\n      deep: true,\n      handler (value) {\n        this.setOffset(value)\n      },\n    },\n    currentOffset: {\n      deep: true,\n      handler (value) {\n        if (isEqual(value, this.inputOffset)) return\n\n        this.$emit('update:offset', value.slice())\n      },\n    },\n    positionViewProj: {\n      deep: true,\n      handler (value) {\n        this.setPosition(value, true)\n      },\n    },\n    currentPositionDataProj: {\n      deep: true,\n      handler (value) {\n        if (isEqual(value, this.positionDataProj)) return\n\n        this.$emit('update:position', value?.slice())\n      },\n    },\n    positioning (value) {\n      this.setPositioning(value)\n    },\n    currentPositioning (value) {\n      if (value === this.positioning) return\n\n      this.$emit('update:positioning', value)\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'stopEvent',\n      'insertFirst',\n      'autoPanMargin',\n      'className',\n      'inputAutoPan',\n      'inputAutoPanAnimation',\n      'inputAutoPanOptions',\n    ], [\n      'inputAutoPan',\n      'inputAutoPanAnimation',\n      'inputAutoPanOptions',\n    ]),\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      this::defineServices()\n\n      await Promise.all([\n        this::olCmp.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * @return {module:ol/Overlay~Overlay}\n     * @protected\n     */\n    createOlObject () {\n      const overlay = new Overlay({\n        id: this.currentId,\n        element: this.$el,\n        offset: this.currentOffset,\n        position: this.currentPositionViewProj,\n        positioning: this.currentPositioning,\n        stopEvent: this.stopEvent,\n        insertFirst: this.insertFirst,\n        autoPan: this.inputAutoPan,\n        autoPanMargin: this.autoPanMargin,\n        autoPanAnimation: this.inputAutoPanAnimation,\n        autoPanOptions: this.inputAutoPanOptions,\n        className: this.className,\n      })\n      initializeOverlay(overlay, this.currentId)\n\n      return overlay\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.visible = true\n      this.$overlaysContainer?.addOverlay(this.$overlay)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      this.$overlaysContainer?.removeOverlay(this.$overlay)\n      this.visible = false\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n      this::subscribeToOverlayChanges()\n    },\n    /**\n     * @return {*}\n     * @protected\n     */\n    getIdInternal () {\n      return getOverlayId(this.$overlay)\n    },\n    /**\n     * @param {*} id\n     * @protected\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setOverlayId(this.$overlay, id)\n    },\n    /**\n     * @return {Promise<module:ol/Overlay~Overlay>}\n     */\n    resolveOverlay: olCmp.methods.resolveOlObject,\n    getOffset () {\n      return coalesce(this.$overlay?.getOffset(), this.currentOffset)\n    },\n    setOffset (offset) {\n      assert(isArray(offset) && offset.length === 2, 'Invalid offset')\n      offset = offset.slice()\n\n      if (!isEqual(offset, this.currentOffset)) {\n        this.currentOffset = offset\n      }\n      if (this.$overlay && !isEqual(offset, this.$overlay.getOffset())) {\n        this.$overlay.setOffset(offset)\n      }\n    },\n    getPosition (viewProj = false) {\n      if (!this.$overlay) {\n        return viewProj ? this.currentPositionViewProj : this.currentPositionDataProj\n      }\n\n      const position = this.$overlay.getPosition()\n      if (viewProj) return roundPointCoords(position)\n\n      return this.pointToDataProj(position)\n    },\n    setPosition (position, viewProj = false) {\n      assert(position == null || (isArray(position) && position.length === 2), 'Invalid position')\n      position = position?.slice()\n\n      if (!viewProj) {\n        position = this.pointToViewProj(position)\n      }\n\n      if (!isEqual(position, this.currentPositionViewProj)) {\n        this.currentPositionViewProj = position\n      }\n      if (this.$overlay && !isEqual(position, this.$overlay.getPosition())) {\n        this.$overlay.setPosition(position)\n      }\n    },\n    getPositioning () {\n      return this.$overlay?.getPositioning() || this.currentPositioning\n    },\n    setPositioning (positioning) {\n      if (positioning !== this.currentPositioning) {\n        this.currentPositioning = positioning\n      }\n      if (this.$overlay && positioning !== this.$overlay.getPositioning()) {\n        this.$overlay.setPositioning(positioning)\n      }\n    },\n    async panIntoView (options = {}) {\n      (await this.resolveOverlay()).panIntoView(options)\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $overlay: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n    $viewVm: {\n      enumerable: true,\n      get: () => this.$services?.viewVm,\n    },\n    $overlaysContainer: {\n      enumerable: true,\n      get: () => this.$services?.overlaysContainer,\n    },\n  })\n}\n\n/**\n * @return {void}\n * @private\n */\nfunction subscribeToOverlayChanges () {\n  const setterKey = addPrefix('set')\n  const propChanges = obsFromOlChangeEvent(this.$overlay, [\n    'offset',\n    'position',\n    'positioning',\n  ], true, evt => ({\n    ...evt,\n    setter: val => {\n      const args = [val]\n      if (evt.prop === 'position') {\n        args.push(true)\n      }\n      this[setterKey(evt.prop)](...args)\n    },\n  }))\n  this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n}\n","<template>\n  <div\n    :id=\"vmId\"\n    :class=\"classes\">\n    <slot\n      :id=\"currentId\"\n      :position=\"currentPositionDataProj\"\n      :offset=\"currentOffset\"\n      :positioning=\"currentPositioning\" />\n  </div>\n</template>\n\n<script>\n  import { Overlay } from 'ol'\n  import OverlayPositioning from 'ol/OverlayPositioning'\n  import { makeChangeOrRecreateWatchers, olCmp, projTransforms, waitForMap } from '../../mixins'\n  import { EPSG_3857, getOverlayId, initializeOverlay, roundPointCoords, setOverlayId } from '../../ol-ext'\n  import { fromOlChangeEvent as obsFromOlChangeEvent } from '../../rx-ext'\n  import {\n    addPrefix,\n    assert,\n    clonePlainObject,\n    coalesce,\n    identity,\n    isArray,\n    isEqual,\n    isPlainObject,\n  } from '../../utils'\n\n  export default {\n    name: 'VlOverlay',\n    mixins: [\n      projTransforms,\n      olCmp,\n      waitForMap,\n    ],\n    props: {\n      offset: {\n        type: Array,\n        default: () => [0, 0],\n        validator: value => value.length === 2,\n      },\n      position: {\n        type: Array,\n        validator: value => value.length === 2,\n        // required: true,\n      },\n      positioning: {\n        type: String,\n        default: OverlayPositioning.TOP_LEFT,\n        validator: value => Object.values(OverlayPositioning).includes(value),\n      },\n      stopEvent: {\n        type: Boolean,\n        default: true,\n      },\n      insertFirst: {\n        type: Boolean,\n        default: true,\n      },\n      autoPan: [Boolean, Object],\n      autoPanMargin: Number,\n      autoPanAnimation: Object,\n      autoPanOptions: Object,\n      className: String,\n    },\n    data () {\n      return {\n        visible: false,\n        viewProjection: EPSG_3857,\n        dataProjection: EPSG_3857,\n        currentOffset: this.offset.slice(),\n        currentPositionViewProj: roundPointCoords(this.position),\n        currentPositioning: this.positioning,\n      }\n    },\n    computed: {\n      positionDataProj () {\n        return roundPointCoords(this.position)\n      },\n      positionViewProj () {\n        return this.pointToViewProj(this.position)\n      },\n      currentPositionDataProj () {\n        return this.pointToDataProj(this.currentPositionViewProj)\n      },\n      inputOffset () {\n        return this.offset.slice()\n      },\n      inputAutoPan () {\n        return isPlainObject(this.autoPan)\n          ? clonePlainObject(this.autoPan)\n          : this.autoPan\n      },\n      inputAutoPanAnimation () {\n        return isPlainObject(this.autoPanAnimation)\n          ? clonePlainObject(this.autoPanAnimation)\n          : this.autoPanAnimation\n      },\n      inputAutoPanOptions () {\n        return isPlainObject(this.autoPanOptions)\n          ? clonePlainObject(this.autoPanOptions)\n          : this.autoPanOptions\n      },\n      classes () {\n        return [\n          this.vmClass,\n          this.visible ? 'visible' : undefined,\n        ].filter(identity)\n      },\n    },\n    watch: {\n      rev () {\n        if (!this.$overlay) return\n\n        if (!isEqual(this.currentOffset, this.$overlay.getOffset())) {\n          this.currentOffset = this.$overlay.getOffset()\n        }\n        if (!isEqual(this.currentPositionViewProj, this.$overlay.getPosition())) {\n          this.currentPositionViewProj = this.$overlay.getPosition()\n        }\n        if (this.currentPositioning !== this.$overlay.getPositioning()) {\n          this.currentPositioning = this.$overlay.getPositioning()\n        }\n      },\n      inputOffset: {\n        deep: true,\n        handler (value) {\n          this.setOffset(value)\n        },\n      },\n      currentOffset: {\n        deep: true,\n        handler (value) {\n          if (isEqual(value, this.inputOffset)) return\n\n          this.$emit('update:offset', value.slice())\n        },\n      },\n      positionViewProj: {\n        deep: true,\n        handler (value) {\n          this.setPosition(value, true)\n        },\n      },\n      currentPositionDataProj: {\n        deep: true,\n        handler (value) {\n          if (isEqual(value, this.positionDataProj)) return\n\n          this.$emit('update:position', value?.slice())\n        },\n      },\n      positioning (value) {\n        this.setPositioning(value)\n      },\n      currentPositioning (value) {\n        if (value === this.positioning) return\n\n        this.$emit('update:positioning', value)\n      },\n      .../*#__PURE__*/makeChangeOrRecreateWatchers([\n        'stopEvent',\n        'insertFirst',\n        'autoPanMargin',\n        'className',\n        'inputAutoPan',\n        'inputAutoPanAnimation',\n        'inputAutoPanOptions',\n      ], [\n        'inputAutoPan',\n        'inputAutoPanAnimation',\n        'inputAutoPanOptions',\n      ]),\n    },\n    methods: {\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async beforeInit () {\n        this::defineServices()\n\n        await Promise.all([\n          this::olCmp.methods.beforeInit(),\n          this::waitForMap.methods.beforeInit(),\n        ])\n      },\n      /**\n       * @return {module:ol/Overlay~Overlay}\n       * @protected\n       */\n      createOlObject () {\n        const overlay = new Overlay({\n          id: this.currentId,\n          element: this.$el,\n          offset: this.currentOffset,\n          position: this.currentPositionViewProj,\n          positioning: this.currentPositioning,\n          stopEvent: this.stopEvent,\n          insertFirst: this.insertFirst,\n          autoPan: this.inputAutoPan,\n          autoPanMargin: this.autoPanMargin,\n          autoPanAnimation: this.inputAutoPanAnimation,\n          autoPanOptions: this.inputAutoPanOptions,\n          className: this.className,\n        })\n        initializeOverlay(overlay, this.currentId)\n\n        return overlay\n      },\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async mount () {\n        this.visible = true\n        this.$overlaysContainer?.addOverlay(this.$overlay)\n\n        return this::olCmp.methods.mount()\n      },\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async unmount () {\n        this.$overlaysContainer?.removeOverlay(this.$overlay)\n        this.visible = false\n\n        return this::olCmp.methods.unmount()\n      },\n      /**\n       * @return {void}\n       * @protected\n       */\n      subscribeAll () {\n        this::olCmp.methods.subscribeAll()\n        this::subscribeToOverlayChanges()\n      },\n      /**\n       * @return {*}\n       * @protected\n       */\n      getIdInternal () {\n        return getOverlayId(this.$overlay)\n      },\n      /**\n       * @param {*} id\n       * @protected\n       */\n      setIdInternal (id) {\n        if (id === this.getIdInternal()) return\n\n        setOverlayId(this.$overlay, id)\n      },\n      /**\n       * @return {Promise<module:ol/Overlay~Overlay>}\n       */\n      resolveOverlay: olCmp.methods.resolveOlObject,\n      getOffset () {\n        return coalesce(this.$overlay?.getOffset(), this.currentOffset)\n      },\n      setOffset (offset) {\n        assert(isArray(offset) && offset.length === 2, 'Invalid offset')\n        offset = offset.slice()\n\n        if (!isEqual(offset, this.currentOffset)) {\n          this.currentOffset = offset\n        }\n        if (this.$overlay && !isEqual(offset, this.$overlay.getOffset())) {\n          this.$overlay.setOffset(offset)\n        }\n      },\n      getPosition (viewProj = false) {\n        if (!this.$overlay) {\n          return viewProj ? this.currentPositionViewProj : this.currentPositionDataProj\n        }\n\n        const position = this.$overlay.getPosition()\n        if (viewProj) return roundPointCoords(position)\n\n        return this.pointToDataProj(position)\n      },\n      setPosition (position, viewProj = false) {\n        assert(position == null || (isArray(position) && position.length === 2), 'Invalid position')\n        position = position?.slice()\n\n        if (!viewProj) {\n          position = this.pointToViewProj(position)\n        }\n\n        if (!isEqual(position, this.currentPositionViewProj)) {\n          this.currentPositionViewProj = position\n        }\n        if (this.$overlay && !isEqual(position, this.$overlay.getPosition())) {\n          this.$overlay.setPosition(position)\n        }\n      },\n      getPositioning () {\n        return this.$overlay?.getPositioning() || this.currentPositioning\n      },\n      setPositioning (positioning) {\n        if (positioning !== this.currentPositioning) {\n          this.currentPositioning = positioning\n        }\n        if (this.$overlay && positioning !== this.$overlay.getPositioning()) {\n          this.$overlay.setPositioning(positioning)\n        }\n      },\n      async panIntoView (options = {}) {\n        (await this.resolveOverlay()).panIntoView(options)\n      },\n    },\n  }\n\n  function defineServices () {\n    Object.defineProperties(this, {\n      $overlay: {\n        enumerable: true,\n        get: () => this.$olObject,\n      },\n      $mapVm: {\n        enumerable: true,\n        get: () => this.$services?.mapVm,\n      },\n      $viewVm: {\n        enumerable: true,\n        get: () => this.$services?.viewVm,\n      },\n      $overlaysContainer: {\n        enumerable: true,\n        get: () => this.$services?.overlaysContainer,\n      },\n    })\n  }\n\n  /**\n   * @return {void}\n   * @private\n   */\n  function subscribeToOverlayChanges () {\n    const setterKey = addPrefix('set')\n    const propChanges = obsFromOlChangeEvent(this.$overlay, [\n      'offset',\n      'position',\n      'positioning',\n    ], true, evt => ({\n      ...evt,\n      setter: val => {\n        const args = [val]\n        if (evt.prop === 'position') {\n          args.push(true)\n        }\n        this[setterKey(evt.prop)](...args)\n      },\n    }))\n    this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n  }\n</script>\n","import { pick } from '../../utils'\nimport Overlay from './overlay.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Overlay, options)\n\n  Vue.component(Overlay.name, Overlay)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Overlay,\n}\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var getPrototypeOf = require(\"./getPrototypeOf.js\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var superPropBase = require(\"./superPropBase.js\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var _typeof = require(\"@babel/runtime/helpers/typeof\")[\"default\"];\n\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","/*!\nRotate vector features interaction for OpenLayers\n\n@package ol-rotate-feature\n@author Vladimir Vershinin <ghettovoice@gmail.com>\n@version 3.0.1\n@licence MIT\n@copyright (c) 2016-2020, Vladimir Vershinin <ghettovoice@gmail.com>\n*/\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _typeof from '@babel/runtime/helpers/typeof';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _get from '@babel/runtime/helpers/get';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport { Pointer } from 'ol/interaction';\nimport { Collection, Feature } from 'ol';\nimport { Vector } from 'ol/layer';\nimport { Vector as Vector$1 } from 'ol/source';\nimport { Polygon, Point, GeometryCollection } from 'ol/geom';\nimport { Style, RegularShape, Fill, Stroke, Text } from 'ol/style';\nimport { getCenter } from 'ol/extent';\nimport { always, mouseOnly } from 'ol/events/condition';\n\n/**\n * This file is part of ol-rotate-feature package.\n * @module ol-rotate-feature\n * @license MIT\n * @author Vladimir Vershinin\n */\n\n/**\n * @param {boolean} condition\n * @param {string} message\n * @throws Error\n */\nfunction assert(condition) {\n  var message = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  message = ['Assertion failed', message].join(': ');\n\n  if (!condition) {\n    throw new Error(message);\n  }\n}\n/**\n * @param {*} arg\n * @returns {*}\n */\n\nfunction identity(arg) {\n  return arg;\n}\nfunction includes(arr, value) {\n  return arr.indexOf(value) !== -1;\n}\nfunction isArray(val) {\n  return Object.prototype.toString.call(val) === '[object Array]';\n}\n\n/**\n * This file is part of ol-rotate-feature package.\n * @module ol-rotate-feature\n * @license MIT\n * @author Vladimir Vershinin\n */\n\n/**\n * @enum {string}\n */\nvar RotateFeatureEventType = {\n  /**\n   * Triggered upon feature rotate start.\n   * @event RotateFeatureEvent#rotatestart\n   */\n  START: 'rotatestart',\n\n  /**\n   * Triggered upon feature rotation.\n   * @event RotateFeatureEvent#rotating\n   */\n  ROTATING: 'rotating',\n\n  /**\n   * Triggered upon feature rotation end.\n   * @event RotateFeatureEvent#rotateend\n   */\n  END: 'rotateend'\n};\n/**\n * Events emitted by RotateFeatureInteraction instances are instances of this type.\n *\n * @class\n * @author Vladimir Vershinin\n */\n\nvar RotateFeatureEvent = /*#__PURE__*/function () {\n  /**\n   * @param {string} type Type.\n   * @param {ol.Collection<ol.Feature>} features Rotated features.\n   * @param {number} angle Angle in radians.\n   * @param {ol.Coordinate} anchor Anchor position.\n   */\n  function RotateFeatureEvent(type, features, angle, anchor) {\n    _classCallCheck(this, RotateFeatureEvent);\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.propagationStopped_ = false;\n    /**\n     * The event type.\n     * @type {string}\n     * @private\n     */\n\n    this.type_ = type;\n    /**\n     * The features being rotated.\n     * @type {ol.Collection<ol.Feature>}\n     * @private\n     */\n\n    this.features_ = features;\n    /**\n     * Current angle in radians.\n     * @type {number}\n     * @private\n     */\n\n    this.angle_ = angle;\n    /**\n     * Current rotation anchor.\n     * @type {ol.Coordinate}\n     * @private\n     */\n\n    this.anchor_ = anchor;\n  }\n  /**\n   * @type {boolean}\n   */\n\n\n  _createClass(RotateFeatureEvent, [{\n    key: \"preventDefault\",\n\n    /**\n     * Prevent event propagation.\n     */\n    value: function preventDefault() {\n      this.propagationStopped_ = true;\n    }\n    /**\n     * Stop event propagation.\n     */\n\n  }, {\n    key: \"stopPropagation\",\n    value: function stopPropagation() {\n      this.propagationStopped_ = true;\n    }\n  }, {\n    key: \"propagationStopped\",\n    get: function get() {\n      return this.propagationStopped_;\n    }\n    /**\n     * @type {string}\n     */\n\n  }, {\n    key: \"type\",\n    get: function get() {\n      return this.type_;\n    }\n    /**\n     * @type {ol.Collection<ol.Feature>}\n     */\n\n  }, {\n    key: \"features\",\n    get: function get() {\n      return this.features_;\n    }\n    /**\n     * @type {number}\n     */\n\n  }, {\n    key: \"angle\",\n    get: function get() {\n      return this.angle_;\n    }\n    /**\n     * @type {ol.Coordinate}\n     */\n\n  }, {\n    key: \"anchor\",\n    get: function get() {\n      return this.anchor_;\n    }\n  }]);\n\n  return RotateFeatureEvent;\n}();\n\nvar ua = typeof navigator !== 'undefined' ? navigator.userAgent.toLowerCase() : '';\nvar MAC = ua.indexOf('macintosh') !== -1;\nvar WEBKIT = ua.indexOf('webkit') !== -1 && ua.indexOf('edge') == -1;\nvar mouseActionButton = function mouseActionButton(mapBrowserEvent) {\n  var originalEvent =\n  /** @type {MouseEvent} */\n  mapBrowserEvent.originalEvent;\n  return originalEvent.button == 0 && !(WEBKIT && MAC && originalEvent.ctrlKey);\n};\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\nvar ANCHOR_KEY = 'rotate-anchor';\nvar ARROW_KEY = 'rotate-arrow';\nvar ANGLE_PROP = 'angle';\nvar ANCHOR_PROP = 'anchor';\n/**\n * @todo todo   condition -    \n */\n\nvar RotateFeatureInteraction = /*#__PURE__*/function (_PointerInteraction) {\n  _inherits(RotateFeatureInteraction, _PointerInteraction);\n\n  var _super = _createSuper(RotateFeatureInteraction);\n\n  /**\n   * @param {InteractionOptions} options\n   */\n  function RotateFeatureInteraction() {\n    var _context;\n\n    var _this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, RotateFeatureInteraction);\n\n    _this = _super.call(this, {\n      // handleEvent: handleEvent,\n      handleDownEvent: handleDownEvent,\n      handleUpEvent: handleUpEvent,\n      handleDragEvent: handleDragEvent,\n      handleMoveEvent: handleMoveEvent\n    });\n    /**\n     * @type {string}\n     * @private\n     */\n\n    _this.previousCursor_ = undefined;\n    /**\n     * @type {Feature}\n     * @private\n     */\n\n    _this.anchorFeature_ = undefined;\n    /**\n     * @type {Feature}\n     * @private\n     */\n\n    _this.arrowFeature_ = undefined;\n    /**\n     * @type {Coordinate}\n     * @private\n     */\n\n    _this.lastCoordinate_ = undefined;\n    /**\n     * @type {boolean}\n     * @private\n     */\n\n    _this.anchorMoving_ = false;\n    /**\n     * @type {Vector}\n     * @private\n     */\n\n    _this.overlay_ = new Vector({\n      style: options.style || getDefaultStyle(),\n      source: new Vector$1({\n        features: new Collection()\n      })\n    });\n    /**\n     * @private\n     * @type {module:ol/events/condition~Condition}\n     */\n\n    _this.condition_ = options.condition ? options.condition : always;\n    /**\n     * @type {Collection<Feature>}\n     * @private\n     */\n\n    _this.features_ = undefined;\n\n    if (options.features) {\n      if (isArray(options.features)) {\n        _this.features_ = new Collection(options.features);\n      } else if (options.features instanceof Collection) {\n        _this.features_ = options.features;\n      } else {\n        throw new Error('Features option should be an array or collection of features, ' + 'got ' + _typeof(options.features));\n      }\n    } else {\n      _this.features_ = new Collection();\n    }\n    /**\n     * @type {boolean}\n     * @public\n     */\n\n\n    _this.allowAnchorMovement = options.allowAnchorMovement === undefined ? true : options.allowAnchorMovement;\n\n    _this.setAnchor(options.anchor || getFeaturesCentroid(_this.features_));\n\n    _this.setAngle(options.angle || 0);\n\n    _this.features_.on('add', (_context = _this).onFeatureAdd_.bind(_context));\n\n    _this.features_.on('remove', (_context = _this).onFeatureRemove_.bind(_context));\n\n    _this.on('change:' + ANGLE_PROP, (_context = _this).onAngleChange_.bind(_context));\n\n    _this.on('change:' + ANCHOR_PROP, (_context = _this).onAnchorChange_.bind(_context));\n\n    _this.createOrUpdateAnchorFeature_();\n\n    _this.createOrUpdateArrowFeature_();\n\n    return _this;\n  }\n  /**\n   * @type {Collection<Feature>}\n   */\n\n\n  _createClass(RotateFeatureInteraction, [{\n    key: \"setMap\",\n\n    /**\n     * @param {ol.Map} map\n     */\n    value: function setMap(map) {\n      this.overlay_.setMap(map);\n\n      _get(_getPrototypeOf(RotateFeatureInteraction.prototype), \"setMap\", this).call(this, map);\n    }\n    /**\n     * @param {boolean} active\n     */\n\n  }, {\n    key: \"setActive\",\n    value: function setActive(active) {\n      if (this.overlay_) {\n        this.overlay_.setMap(active ? this.map : undefined);\n      }\n\n      _get(_getPrototypeOf(RotateFeatureInteraction.prototype), \"setActive\", this).call(this, active);\n    }\n    /**\n     * Set current angle of interaction features.\n     *\n     * @param {number} angle\n     */\n\n  }, {\n    key: \"setAngle\",\n    value: function setAngle(angle) {\n      assert(!isNaN(parseFloat(angle)), 'Numeric value passed');\n      this.set(ANGLE_PROP, parseFloat(angle));\n    }\n    /**\n     * Returns current angle of interaction features.\n     *\n     * @return {number}\n     */\n\n  }, {\n    key: \"getAngle\",\n    value: function getAngle() {\n      return this.get(ANGLE_PROP);\n    }\n    /**\n     * Set current anchor position.\n     *\n     * @param {Coordinate | undefined} anchor\n     */\n\n  }, {\n    key: \"setAnchor\",\n    value: function setAnchor(anchor) {\n      assert(anchor == null || isArray(anchor) && anchor.length === 2, 'Array of two elements passed');\n      this.set(ANCHOR_PROP, anchor != null ? anchor.map(parseFloat) : getFeaturesCentroid(this.features_));\n    }\n    /**\n     * Returns current anchor position.\n     *\n     * @return {Coordinate | undefined}\n     */\n\n  }, {\n    key: \"getAnchor\",\n    value: function getAnchor() {\n      return this.get(ANCHOR_PROP);\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"createOrUpdateAnchorFeature_\",\n    value: function createOrUpdateAnchorFeature_() {\n      var angle = this.getAngle();\n      var anchor = this.getAnchor();\n      if (!anchor) return;\n\n      if (this.anchorFeature_) {\n        this.anchorFeature_.getGeometry().setCoordinates(anchor);\n        this.anchorFeature_.set(ANGLE_PROP, angle);\n      } else {\n        var _Feature;\n\n        this.anchorFeature_ = new Feature((_Feature = {\n          geometry: new Point(anchor)\n        }, _defineProperty(_Feature, ANGLE_PROP, angle), _defineProperty(_Feature, ANCHOR_KEY, true), _Feature));\n        this.overlay_.getSource().addFeature(this.anchorFeature_);\n      }\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"createOrUpdateArrowFeature_\",\n    value: function createOrUpdateArrowFeature_() {\n      var angle = this.getAngle();\n      var anchor = this.getAnchor();\n      if (!anchor) return;\n\n      if (this.arrowFeature_) {\n        this.arrowFeature_.getGeometry().setCoordinates(anchor);\n        this.arrowFeature_.set(ANGLE_PROP, angle);\n      } else {\n        var _Feature2;\n\n        this.arrowFeature_ = new Feature((_Feature2 = {\n          geometry: new Point(anchor)\n        }, _defineProperty(_Feature2, ANGLE_PROP, angle), _defineProperty(_Feature2, ARROW_KEY, true), _Feature2));\n        this.overlay_.getSource().addFeature(this.arrowFeature_);\n      }\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"resetAngleAndAnchor_\",\n    value: function resetAngleAndAnchor_() {\n      this.resetAngle_();\n      this.resetAnchor_();\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"resetAngle_\",\n    value: function resetAngle_() {\n      this.set(ANGLE_PROP, 0, true);\n      this.arrowFeature_ && this.arrowFeature_.set(ANGLE_PROP, this.getAngle());\n      this.anchorFeature_ && this.anchorFeature_.set(ANGLE_PROP, this.getAngle());\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"resetAnchor_\",\n    value: function resetAnchor_() {\n      this.set(ANCHOR_PROP, getFeaturesCentroid(this.features_), true);\n\n      if (this.getAnchor()) {\n        this.arrowFeature_ && this.arrowFeature_.getGeometry().setCoordinates(this.getAnchor());\n        this.anchorFeature_ && this.anchorFeature_.getGeometry().setCoordinates(this.getAnchor());\n      }\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"onFeatureAdd_\",\n    value: function onFeatureAdd_() {\n      this.resetAngleAndAnchor_();\n      this.createOrUpdateAnchorFeature_();\n      this.createOrUpdateArrowFeature_();\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"onFeatureRemove_\",\n    value: function onFeatureRemove_() {\n      this.resetAngleAndAnchor_();\n\n      if (this.features_.getLength()) {\n        this.createOrUpdateAnchorFeature_();\n        this.createOrUpdateArrowFeature_();\n      } else {\n        this.overlay_.getSource().clear();\n        this.anchorFeature_ = this.arrowFeature_ = undefined;\n      }\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"onAngleChange_\",\n    value: function onAngleChange_(_ref) {\n      var _this2 = this;\n\n      var oldValue = _ref.oldValue;\n      this.features_.forEach(function (feature) {\n        return feature.getGeometry().rotate(_this2.getAngle() - oldValue, _this2.getAnchor());\n      });\n      this.arrowFeature_ && this.arrowFeature_.set(ANGLE_PROP, this.getAngle());\n      this.anchorFeature_ && this.anchorFeature_.set(ANGLE_PROP, this.getAngle());\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"onAnchorChange_\",\n    value: function onAnchorChange_() {\n      var anchor = this.getAnchor();\n\n      if (anchor) {\n        this.anchorFeature_ && this.anchorFeature_.getGeometry().setCoordinates(anchor);\n        this.arrowFeature_ && this.arrowFeature_.getGeometry().setCoordinates(anchor);\n      }\n    }\n    /**\n     * @param {Collection<Feature>} features\n     * @private\n     */\n\n  }, {\n    key: \"dispatchRotateStartEvent_\",\n    value: function dispatchRotateStartEvent_(features) {\n      this.dispatchEvent(new RotateFeatureEvent(RotateFeatureEventType.START, features, this.getAngle(), this.getAnchor()));\n    }\n    /**\n     * @param {Collection<Feature>} features\n     * @private\n     */\n\n  }, {\n    key: \"dispatchRotatingEvent_\",\n    value: function dispatchRotatingEvent_(features) {\n      this.dispatchEvent(new RotateFeatureEvent(RotateFeatureEventType.ROTATING, features, this.getAngle(), this.getAnchor()));\n    }\n    /**\n     * @param {Collection<Feature>} features\n     * @private\n     */\n\n  }, {\n    key: \"dispatchRotateEndEvent_\",\n    value: function dispatchRotateEndEvent_(features) {\n      this.dispatchEvent(new RotateFeatureEvent(RotateFeatureEventType.END, features, this.getAngle(), this.getAnchor()));\n    }\n  }, {\n    key: \"features\",\n    get: function get() {\n      return this.features_;\n    }\n    /**\n     * @type {number}\n     */\n\n  }, {\n    key: \"angle\",\n    get: function get() {\n      return this.getAngle();\n    }\n    /**\n     * @param {number} angle\n     */\n    ,\n    set: function set(angle) {\n      this.setAngle(angle);\n    }\n    /**\n     * @type {Coordinate|number[]|undefined}\n     */\n\n  }, {\n    key: \"anchor\",\n    get: function get() {\n      return this.getAnchor();\n    }\n    /**\n     * @param {Coordinate|undefined} anchor\n     */\n    ,\n    set: function set(anchor) {\n      this.setAnchor(anchor);\n    }\n    /**\n     * @param {PluggableMap} map\n     */\n\n  }, {\n    key: \"map\",\n    set: function set(map) {\n      this.setMap(map);\n    }\n    /**\n     * @type {PluggableMap}\n     */\n    ,\n    get: function get() {\n      return this.getMap();\n    }\n    /**\n     * @param {boolean} active\n     */\n\n  }, {\n    key: \"active\",\n    set: function set(active) {\n      this.setActive(active);\n    }\n    /**\n     * @type {boolean}\n     */\n    ,\n    get: function get() {\n      return this.getActive();\n    }\n  }]);\n\n  return RotateFeatureInteraction;\n}(Pointer);\n\nfunction handleDownEvent(evt) {\n  if (!mouseOnly(evt)) {\n    return false;\n  }\n\n  if (mouseActionButton(evt) && this.condition_(evt)) {\n    // disable selection of inner features\n    var foundFeature = evt.map.forEachFeatureAtPixel(evt.pixel, identity);\n\n    if (includes(['click', 'singleclick', 'dblclick'], evt.type) && includes([this.anchorFeature_, this.arrowFeature_], foundFeature)) {\n      return false;\n    } // handle click & drag on features for rotation\n\n\n    if (foundFeature && !this.lastCoordinate_ && (includes(this.features_.getArray(), foundFeature) || foundFeature === this.arrowFeature_)) {\n      this.lastCoordinate_ = evt.coordinate;\n      handleMoveEvent.call(this, evt);\n      this.dispatchRotateStartEvent_(this.features_);\n      return true;\n    } // handle click & drag on rotation anchor feature\n    else if (foundFeature && foundFeature === this.anchorFeature_ && this.allowAnchorMovement) {\n        this.anchorMoving_ = true;\n        handleMoveEvent.call(this, evt);\n        return true;\n      }\n  }\n\n  return false;\n}\n/**\n * @param {MapBrowserEvent} evt Event.\n * @return {boolean}\n * @this {RotateFeatureInteraction}\n * @private\n */\n\n\nfunction handleUpEvent(evt) {\n  // stop drag sequence of features\n  if (this.lastCoordinate_) {\n    this.lastCoordinate_ = undefined;\n    handleMoveEvent.call(this, evt);\n    this.dispatchRotateEndEvent_(this.features_);\n    return true;\n  } // stop drag sequence of the anchors\n  else if (this.anchorMoving_) {\n      this.anchorMoving_ = false;\n      handleMoveEvent.call(this, evt);\n      return true;\n    }\n\n  return false;\n}\n/**\n * @param {MapBrowserEvent} evt Event.\n * @return {boolean}\n * @this {RotateFeatureInteraction}\n * @private\n */\n\n\nfunction handleDragEvent(_ref2) {\n  var coordinate = _ref2.coordinate;\n  var anchorCoordinate = this.anchorFeature_.getGeometry().getCoordinates(); // handle drag of features by angle\n\n  if (this.lastCoordinate_) {\n    // calculate vectors of last and current pointer positions\n    var lastVector = [this.lastCoordinate_[0] - anchorCoordinate[0], this.lastCoordinate_[1] - anchorCoordinate[1]];\n    var newVector = [coordinate[0] - anchorCoordinate[0], coordinate[1] - anchorCoordinate[1]]; // calculate angle between last and current vectors (positive angle counter-clockwise)\n\n    var angle = Math.atan2(lastVector[0] * newVector[1] - newVector[0] * lastVector[1], lastVector[0] * newVector[0] + lastVector[1] * newVector[1]);\n    this.setAngle(this.getAngle() + angle);\n    this.dispatchRotatingEvent_(this.features_);\n    this.lastCoordinate_ = coordinate;\n  } // handle drag of the anchor\n  else if (this.anchorMoving_) {\n      this.setAnchor(coordinate);\n    }\n}\n/**\n * @param {MapBrowserEvent} evt Event.\n * @return {boolean}\n * @this {RotateFeatureInteraction}\n * @private\n */\n\n\nfunction handleMoveEvent(_ref3) {\n  var map = _ref3.map,\n      pixel = _ref3.pixel;\n  var elem = map.getTargetElement();\n  var foundFeature = map.forEachFeatureAtPixel(pixel, identity);\n\n  var setCursor = function setCursor(cursor) {\n    var vendor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    if (vendor) {\n      elem.style.cursor = '-webkit-' + cursor;\n      elem.style.cursor = '-moz-' + cursor;\n    }\n\n    elem.style.cursor = cursor;\n  };\n\n  if (this.lastCoordinate_) {\n    this.previousCursor_ = elem.style.cursor;\n    setCursor('grabbing', true);\n  } else if (foundFeature && (includes(this.features_.getArray(), foundFeature) || foundFeature === this.arrowFeature_)) {\n    this.previousCursor_ = elem.style.cursor;\n    setCursor('grab', true);\n  } else if (foundFeature && foundFeature === this.anchorFeature_ && this.allowAnchorMovement || this.anchorMoving_) {\n    this.previousCursor_ = elem.style.cursor;\n    setCursor('crosshair');\n  } else {\n    setCursor(this.previousCursor_ || '');\n    this.previousCursor_ = undefined;\n  }\n}\n/**\n * @returns {StyleFunction}\n * @private\n */\n\n\nfunction getDefaultStyle() {\n  var _styles;\n\n  var white = [255, 255, 255, 0.8];\n  var blue = [0, 153, 255, 0.8];\n  var transparent = [255, 255, 255, 0.01];\n  var width = 2;\n  var styles = (_styles = {}, _defineProperty(_styles, ANCHOR_KEY, [new Style({\n    image: new RegularShape({\n      fill: new Fill({\n        color: [0, 153, 255, 0.8]\n      }),\n      stroke: new Stroke({\n        color: blue,\n        width: 1\n      }),\n      radius: 4,\n      points: 6\n    }),\n    zIndex: Infinity\n  })]), _defineProperty(_styles, ARROW_KEY, [new Style({\n    fill: new Fill({\n      color: transparent\n    }),\n    stroke: new Stroke({\n      color: white,\n      width: width + 2\n    }),\n    text: new Text({\n      font: '12px sans-serif',\n      offsetX: 20,\n      offsetY: -20,\n      fill: new Fill({\n        color: 'blue'\n      }),\n      stroke: new Stroke({\n        color: white,\n        width: width + 1\n      })\n    }),\n    zIndex: Infinity\n  }), new Style({\n    fill: new Fill({\n      color: transparent\n    }),\n    stroke: new Stroke({\n      color: blue,\n      width: width\n    }),\n    zIndex: Infinity\n  })]), _styles);\n  return function (feature, resolution) {\n    var style;\n    var angle = feature.get(ANGLE_PROP) || 0;\n\n    switch (true) {\n      case feature.get(ANCHOR_KEY):\n        style = styles[ANCHOR_KEY];\n        style[0].getImage().setRotation(-angle);\n        return style;\n\n      case feature.get(ARROW_KEY):\n        style = styles[ARROW_KEY];\n        var coordinates = feature.getGeometry().getCoordinates(); // generate arrow polygon\n\n        var geom = new Polygon([[[coordinates[0], coordinates[1] - 6 * resolution], [coordinates[0] + 8 * resolution, coordinates[1] - 12 * resolution], [coordinates[0], coordinates[1] + 30 * resolution], [coordinates[0] - 8 * resolution, coordinates[1] - 12 * resolution], [coordinates[0], coordinates[1] - 6 * resolution]]]); // and rotate it according to current angle\n\n        geom.rotate(angle, coordinates);\n        style[0].setGeometry(geom);\n        style[1].setGeometry(geom);\n        style[0].getText().setText(Math.round(-angle * 180 / Math.PI) + '');\n        return style;\n    }\n  };\n}\n/**\n * @param {Collection<Feature>|Array<Feature>} features\n * @returns {Extent | number[] | undefined}\n * @private\n */\n\n\nfunction getFeaturesExtent(features) {\n  features = features instanceof Collection ? features.getArray() : features;\n  if (!features.length) return;\n  return new GeometryCollection(features.map(function (feature) {\n    return feature.getGeometry();\n  })).getExtent();\n}\n/**\n * @param {Collection<ol.Feature> | Array<Feature>} features\n * @return {Coordinate | number[] | undefined}\n */\n\n\nfunction getFeaturesCentroid(features) {\n  features = features instanceof Collection ? features.getArray() : features;\n  if (!features.length) return;\n  return getCenter(getFeaturesExtent(features));\n}\n\n/**\n * This file is part of ol-rotate-feature package.\n * @module ol-rotate-feature\n * @license MIT\n * @author Vladimir Vershinin\n */\n\nif (typeof window !== 'undefined' && window.ol && window.ol.interaction) {\n  window.ol.interaction.RotateFeature = RotateFeatureInteraction;\n}\n\nexport default RotateFeatureInteraction;\n//# sourceMappingURL=ol-rotate-feature.esm.js.map\n","/**\n * @module ol/source/VectorEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when a feature is added to the source.\n     * @event module:ol/source/Vector.VectorSourceEvent#addfeature\n     * @api\n     */\n    ADDFEATURE: 'addfeature',\n    /**\n     * Triggered when a feature is updated.\n     * @event module:ol/source/Vector.VectorSourceEvent#changefeature\n     * @api\n     */\n    CHANGEFEATURE: 'changefeature',\n    /**\n     * Triggered when the clear method is called on the source.\n     * @event module:ol/source/Vector.VectorSourceEvent#clear\n     * @api\n     */\n    CLEAR: 'clear',\n    /**\n     * Triggered when a feature is removed from the source.\n     * See {@link module:ol/source/Vector#clear source.clear()} for exceptions.\n     * @event module:ol/source/Vector.VectorSourceEvent#removefeature\n     * @api\n     */\n    REMOVEFEATURE: 'removefeature',\n    /**\n     * Triggered when features starts loading.\n     * @event module:ol/source/Vector.VectorSourceEvent#featuresloadstart\n     * @api\n     */\n    FEATURESLOADSTART: 'featuresloadstart',\n    /**\n     * Triggered when features finishes loading.\n     * @event module:ol/source/Vector.VectorSourceEvent#featuresloadend\n     * @api\n     */\n    FEATURESLOADEND: 'featuresloadend',\n    /**\n     * Triggered if feature loading results in an error.\n     * @event module:ol/source/Vector.VectorSourceEvent#featuresloaderror\n     * @api\n     */\n    FEATURESLOADERROR: 'featuresloaderror',\n};\n//# sourceMappingURL=VectorEventType.js.map","\nimport { Collection } from 'ol'\nimport RotateInteraction from 'ol-rotate-feature'\nimport { always } from 'ol/events/condition'\nimport { Vector as VectorSource } from 'ol/source'\nimport VectorEventType from 'ol/source/VectorEventType'\nimport { merge as mergeObs } from 'rxjs'\nimport { map as mapObs, tap } from 'rxjs/operators'\nimport { interaction, makeChangeOrRecreateWatchers, styleContainer } from '../../mixins'\nimport { COORD_PRECISION, isPointCoords, roundPointCoords, writeGeoJsonFeature } from '../../ol-ext'\nimport { fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent } from '../../rx-ext'\nimport {\n  addPrefix,\n  assert,\n  coalesce,\n  instanceOf,\n  isEqual,\n  isFunction,\n  isNumber,\n  map,\n  mergeDescriptors,\n} from '../../utils'\n\nexport default {\n  name: 'VlInteractionRotate',\n  mixins: [\n    interaction,\n    styleContainer,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  props: {\n    /**\n     * Source or collection identifier from IdentityMap.\n     * @type {String}\n     */\n    source: {\n      type: String,\n      required: true,\n    },\n    angle: {\n      type: Number,\n      default: 0,\n    },\n    anchor: {\n      type: Array,\n      validator: val => val.length >= 2,\n    },\n    condition: {\n      type: Function,\n      default: always,\n    },\n    allowAnchorMovement: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  data () {\n    return {\n      currentAnchorViewProj: roundPointCoords(this.anchor),\n      currentAngle: this.angle,\n    }\n  },\n  computed: {\n    anchorDataProj () {\n      return roundPointCoords(this.anchor)\n    },\n    anchorViewProj () {\n      return this.pointToViewProj(this.anchor)\n    },\n    currentAnchorDataProj () {\n      return this.pointToDataProj(this.currentAnchorViewProj)\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$interaction) return\n\n      if (!isEqual(this.currentAnchorViewProj, this.$interaction.getAnchor())) {\n        this.currentAnchorViewProj = this.$interaction.getAnchor()\n      }\n      if (this.currentAngle !== this.$interaction.getAngle()) {\n        this.currentAngle = this.$interaction.getAngle()\n      }\n    },\n    anchorViewProj: {\n      deep: true,\n      handler (value) {\n        if (!value) return\n\n        this.setAnchor(value, true)\n      },\n    },\n    currentAnchorDataProj: {\n      deep: true,\n      handler (value) {\n        if (isEqual(value, this.anchorDataProj)) return\n\n        this.$emit('update:anchor', value?.slice())\n      },\n    },\n    angle (value) {\n      this.setAngle(value)\n    },\n    currentAngle (value) {\n      if (value === this.angle) return\n\n      this.$emit('update:angle', value)\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'source',\n      'condition',\n      'allowAnchorMovement',\n    ]),\n  },\n  created () {\n    this.currentAnchorViewProj = this.anchorViewProj?.slice()\n  },\n  methods: {\n    /**\n     * @return {Promise<Modify>}\n     * @protected\n     */\n    async createInteraction () {\n      const source = this._source = await this.getInstance(this.source)\n      assert(!!source, `Source \"${this.source}\" not found in identity map.`)\n\n      let features\n      if (source instanceof VectorSource) {\n        features = source.getFeaturesCollection()\n        if (!features) {\n          features = new Collection(source.getFeatures())\n          this.subscribeTo(\n            obsFromOlEvent(source, VectorEventType.ADDFEATURE),\n            ({ feature }) => feature && features.push(feature),\n          )\n          this.subscribeTo(\n            obsFromOlEvent(source, VectorEventType.REMOVEFEATURE),\n            ({ feature }) => feature && features.remove(feature),\n          )\n        }\n        instanceOf(features, Collection, `Source \"${this.source}\" doesn't provide features collection.`)\n      } else {\n        if (isFunction(source.getFeaturesCollection)) {\n          features = source.getFeaturesCollection()\n        } else if (isFunction(source.getFeatures)) {\n          features = source.getFeatures()\n        }\n        instanceOf(features, Collection, `Source \"${this.source}\" doesn't provide features collection.`)\n      }\n\n      return new RotateInteraction({\n        features,\n        angle: this.currentAngle,\n        anchor: this.currentAnchorViewProj,\n        allowAnchorMovement: this.allowAnchorMovement,\n        condition: this.condition,\n        style: this.$style,\n      })\n    },\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return mergeDescriptors(\n        this::interaction.methods.getServices(),\n        this::styleContainer.methods.getServices(),\n      )\n    },\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::interaction.methods.subscribeAll()\n      this::subscribeToInteractionChanges()\n    },\n    /**\n     * @return {StyleTarget}\n     * @protected\n     */\n    getStyleTarget () {\n      return {\n        getStyle: () => this._style,\n        setStyle: () => {\n          if (false) {\n            this.$logger.log('style changed, scheduling recreate...')\n          }\n\n          this.scheduleRecreate()\n        },\n      }\n    },\n    getAngle () {\n      return coalesce(this.$interaction?.getAngle(), this.currentAngle)\n    },\n    setAngle (angle) {\n      assert(isNumber(angle), 'Invalid angle')\n\n      if (angle !== this.currentAngle) {\n        this.currentAngle = angle\n      }\n      if (this.$interaction && angle !== this.$interaction.getAngle()) {\n        this.$interaction.setAngle(angle)\n      }\n    },\n    getAnchor (viewProj = false) {\n      const anchor = coalesce(this.$interaction?.getAnchor(), this.currentAnchorViewProj)\n\n      return viewProj ? roundPointCoords(anchor) : this.pointToDataProj(anchor)\n    },\n    setAnchor (anchor, viewProj = false) {\n      assert(isPointCoords(anchor), 'Invalid anchor')\n      anchor = viewProj ? roundPointCoords(anchor) : this.pointToViewProj(anchor)\n\n      if (!isEqual(anchor, this.currentAnchorViewProj)) {\n        this.currentAnchorViewProj = anchor\n      }\n      if (this.$interaction && !isEqual(anchor, this.$interaction.getAnchor())) {\n        this.$interaction.setAnchor(anchor)\n      }\n    },\n  },\n}\n\n/**\n * @private\n */\nfunction subscribeToInteractionChanges () {\n  const setterKey = addPrefix('set')\n  const propChanges = obsFromOlChangeEvent(this.$interaction, [\n    'angle',\n    'anchor',\n  ], true, evt => ({\n    ...evt,\n    setter: val => {\n      const args = [val]\n      if (evt.prop === 'anchor') {\n        args.push(true)\n      }\n      this[setterKey(evt.prop)](...args)\n    },\n  }))\n  this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n\n  const start = obsFromOlEvent(this.$interaction, 'rotatestart').pipe(\n    tap(() => this.setInteracting(true)),\n  )\n  const end = obsFromOlEvent(this.$interaction, 'rotateend').pipe(\n    tap(() => this.setInteracting(false)),\n  )\n  const progress = obsFromOlEvent(this.$interaction, 'rotating')\n  const events = mergeObs(start, end, progress).pipe(\n    mapObs(({ type, features, angle, anchor }) => {\n      const viewProj = this.resolvedViewProjection\n      const dataProj = this.resolvedDataProjection\n      return {\n        type,\n        features: features instanceof Collection ? features.getArray() : features,\n        angle,\n        anchor: this.pointToDataProj(anchor),\n        get json () {\n          if (!this._json) {\n            this._json = map(this.features, feature => writeGeoJsonFeature(feature, viewProj, dataProj, COORD_PRECISION))\n          }\n          return this._json\n        },\n      }\n    }),\n  )\n  this.subscribeTo(events, evt => this.$emit(evt.type, evt))\n}\n","<script>\n  import { Collection } from 'ol'\n  import RotateInteraction from 'ol-rotate-feature'\n  import { always } from 'ol/events/condition'\n  import { Vector as VectorSource } from 'ol/source'\n  import VectorEventType from 'ol/source/VectorEventType'\n  import { merge as mergeObs } from 'rxjs'\n  import { map as mapObs, tap } from 'rxjs/operators'\n  import { interaction, makeChangeOrRecreateWatchers, styleContainer } from '../../mixins'\n  import { COORD_PRECISION, isPointCoords, roundPointCoords, writeGeoJsonFeature } from '../../ol-ext'\n  import { fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent } from '../../rx-ext'\n  import {\n    addPrefix,\n    assert,\n    coalesce,\n    instanceOf,\n    isEqual,\n    isFunction,\n    isNumber,\n    map,\n    mergeDescriptors,\n  } from '../../utils'\n\n  export default {\n    name: 'VlInteractionRotate',\n    mixins: [\n      interaction,\n      styleContainer,\n    ],\n    stubVNode: {\n      empty: false,\n      attrs () {\n        return {\n          id: this.vmId,\n          class: this.vmClass,\n        }\n      },\n    },\n    props: {\n      /**\n       * Source or collection identifier from IdentityMap.\n       * @type {String}\n       */\n      source: {\n        type: String,\n        required: true,\n      },\n      angle: {\n        type: Number,\n        default: 0,\n      },\n      anchor: {\n        type: Array,\n        validator: val => val.length >= 2,\n      },\n      condition: {\n        type: Function,\n        default: always,\n      },\n      allowAnchorMovement: {\n        type: Boolean,\n        default: true,\n      },\n    },\n    data () {\n      return {\n        currentAnchorViewProj: roundPointCoords(this.anchor),\n        currentAngle: this.angle,\n      }\n    },\n    computed: {\n      anchorDataProj () {\n        return roundPointCoords(this.anchor)\n      },\n      anchorViewProj () {\n        return this.pointToViewProj(this.anchor)\n      },\n      currentAnchorDataProj () {\n        return this.pointToDataProj(this.currentAnchorViewProj)\n      },\n    },\n    watch: {\n      rev () {\n        if (!this.$interaction) return\n\n        if (!isEqual(this.currentAnchorViewProj, this.$interaction.getAnchor())) {\n          this.currentAnchorViewProj = this.$interaction.getAnchor()\n        }\n        if (this.currentAngle !== this.$interaction.getAngle()) {\n          this.currentAngle = this.$interaction.getAngle()\n        }\n      },\n      anchorViewProj: {\n        deep: true,\n        handler (value) {\n          if (!value) return\n\n          this.setAnchor(value, true)\n        },\n      },\n      currentAnchorDataProj: {\n        deep: true,\n        handler (value) {\n          if (isEqual(value, this.anchorDataProj)) return\n\n          this.$emit('update:anchor', value?.slice())\n        },\n      },\n      angle (value) {\n        this.setAngle(value)\n      },\n      currentAngle (value) {\n        if (value === this.angle) return\n\n        this.$emit('update:angle', value)\n      },\n      .../*#__PURE__*/makeChangeOrRecreateWatchers([\n        'source',\n        'condition',\n        'allowAnchorMovement',\n      ]),\n    },\n    created () {\n      this.currentAnchorViewProj = this.anchorViewProj?.slice()\n    },\n    methods: {\n      /**\n       * @return {Promise<Modify>}\n       * @protected\n       */\n      async createInteraction () {\n        const source = this._source = await this.getInstance(this.source)\n        assert(!!source, `Source \"${this.source}\" not found in identity map.`)\n\n        let features\n        if (source instanceof VectorSource) {\n          features = source.getFeaturesCollection()\n          if (!features) {\n            features = new Collection(source.getFeatures())\n            this.subscribeTo(\n              obsFromOlEvent(source, VectorEventType.ADDFEATURE),\n              ({ feature }) => feature && features.push(feature),\n            )\n            this.subscribeTo(\n              obsFromOlEvent(source, VectorEventType.REMOVEFEATURE),\n              ({ feature }) => feature && features.remove(feature),\n            )\n          }\n          instanceOf(features, Collection, `Source \"${this.source}\" doesn't provide features collection.`)\n        } else {\n          if (isFunction(source.getFeaturesCollection)) {\n            features = source.getFeaturesCollection()\n          } else if (isFunction(source.getFeatures)) {\n            features = source.getFeatures()\n          }\n          instanceOf(features, Collection, `Source \"${this.source}\" doesn't provide features collection.`)\n        }\n\n        return new RotateInteraction({\n          features,\n          angle: this.currentAngle,\n          anchor: this.currentAnchorViewProj,\n          allowAnchorMovement: this.allowAnchorMovement,\n          condition: this.condition,\n          style: this.$style,\n        })\n      },\n      /**\n       * @returns {Object}\n       * @protected\n       */\n      getServices () {\n        return mergeDescriptors(\n          this::interaction.methods.getServices(),\n          this::styleContainer.methods.getServices(),\n        )\n      },\n      /**\n       * @protected\n       */\n      subscribeAll () {\n        this::interaction.methods.subscribeAll()\n        this::subscribeToInteractionChanges()\n      },\n      /**\n       * @return {StyleTarget}\n       * @protected\n       */\n      getStyleTarget () {\n        return {\n          getStyle: () => this._style,\n          setStyle: () => {\n            if (process.env.VUELAYERS_DEBUG) {\n              this.$logger.log('style changed, scheduling recreate...')\n            }\n\n            this.scheduleRecreate()\n          },\n        }\n      },\n      getAngle () {\n        return coalesce(this.$interaction?.getAngle(), this.currentAngle)\n      },\n      setAngle (angle) {\n        assert(isNumber(angle), 'Invalid angle')\n\n        if (angle !== this.currentAngle) {\n          this.currentAngle = angle\n        }\n        if (this.$interaction && angle !== this.$interaction.getAngle()) {\n          this.$interaction.setAngle(angle)\n        }\n      },\n      getAnchor (viewProj = false) {\n        const anchor = coalesce(this.$interaction?.getAnchor(), this.currentAnchorViewProj)\n\n        return viewProj ? roundPointCoords(anchor) : this.pointToDataProj(anchor)\n      },\n      setAnchor (anchor, viewProj = false) {\n        assert(isPointCoords(anchor), 'Invalid anchor')\n        anchor = viewProj ? roundPointCoords(anchor) : this.pointToViewProj(anchor)\n\n        if (!isEqual(anchor, this.currentAnchorViewProj)) {\n          this.currentAnchorViewProj = anchor\n        }\n        if (this.$interaction && !isEqual(anchor, this.$interaction.getAnchor())) {\n          this.$interaction.setAnchor(anchor)\n        }\n      },\n    },\n  }\n\n  /**\n   * @private\n   */\n  function subscribeToInteractionChanges () {\n    const setterKey = addPrefix('set')\n    const propChanges = obsFromOlChangeEvent(this.$interaction, [\n      'angle',\n      'anchor',\n    ], true, evt => ({\n      ...evt,\n      setter: val => {\n        const args = [val]\n        if (evt.prop === 'anchor') {\n          args.push(true)\n        }\n        this[setterKey(evt.prop)](...args)\n      },\n    }))\n    this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n\n    const start = obsFromOlEvent(this.$interaction, 'rotatestart').pipe(\n      tap(() => this.setInteracting(true)),\n    )\n    const end = obsFromOlEvent(this.$interaction, 'rotateend').pipe(\n      tap(() => this.setInteracting(false)),\n    )\n    const progress = obsFromOlEvent(this.$interaction, 'rotating')\n    const events = mergeObs(start, end, progress).pipe(\n      mapObs(({ type, features, angle, anchor }) => {\n        const viewProj = this.resolvedViewProjection\n        const dataProj = this.resolvedDataProjection\n        return {\n          type,\n          features: features instanceof Collection ? features.getArray() : features,\n          angle,\n          anchor: this.pointToDataProj(anchor),\n          get json () {\n            if (!this._json) {\n              this._json = map(this.features, feature => writeGeoJsonFeature(feature, viewProj, dataProj, COORD_PRECISION))\n            }\n            return this._json\n          },\n        }\n      }),\n    )\n    this.subscribeTo(events, evt => this.$emit(evt.type, evt))\n  }\n</script>\n","import { pick } from '../../utils'\nimport Interaction from './interaction.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Interaction, options)\n\n  Vue.component(Interaction.name, Interaction)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Interaction,\n}\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Feature } from 'ol'\nimport { never, shiftKeyOnly, singleClick } from 'ol/events/condition'\nimport { Select as SelectInteraction } from 'ol/interaction'\nimport { merge as mergeObs } from 'rxjs'\nimport { featuresContainer, interaction, makeChangeOrRecreateWatchers, styleContainer } from '../../mixins'\nimport { dumpStyle, getFeatureId, getLayerId, initializeFeature, isGeoJSONFeature } from '../../ol-ext'\nimport { fromVueEvent as obsFromVueEvent } from '../../rx-ext'\nimport {\n  assert,\n  clonePlainObject,\n  coalesce,\n  constant,\n  forEach, isArray,\n  isEqual,\n  isFunction,\n  isNumber,\n  isObjectLike, isPlainObject,\n  isString,\n  map,\n  mergeDescriptors,\n  or,\n  stubArray,\n} from '../../utils'\n\nexport default {\n  name: 'VlInteractionSelect',\n  mixins: [\n    featuresContainer,\n    styleContainer,\n    interaction,\n  ],\n  props: {\n    /**\n     * A function that takes an `ol.Feature` and an `ol.layer.Layer` and returns `true` if the feature may be selected or `false` otherwise.\n     * @type {function|undefined}\n     */\n    filter: {\n      type: Function,\n      default: /*#__PURE__*/constant(true),\n    },\n    /**\n     * A list of layers from which features should be selected. Alternatively, a filter function can be provided.\n     * @type {string[]|function|undefined}\n     */\n    layers: {\n      type: [Array, Function],\n      default: undefined,\n    },\n    /**\n     * Hit-detection tolerance. Pixels inside the radius around the given position will be checked for features.\n     * This only works for the canvas renderer and not for WebGL.\n     * @type {number}\n     */\n    hitTolerance: {\n      type: Number,\n      default: 0,\n    },\n    /**\n     * A boolean that determines if the default behaviour should select only single features or all (overlapping)\n     * features at the clicked map position.\n     * @type {boolean}\n     */\n    multi: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * Selected features as array of GeoJSON features with coordinates in the map view projection.\n     * @type {string[]|number[]|Object[]}\n     */\n    features: {\n      type: Array,\n      default: stubArray,\n      validator: value => value.every(or(isString, isNumber, isGeoJSONFeature)),\n    },\n    /**\n     * A function that takes an `ol.MapBrowserEvent` and returns a boolean to indicate whether that event should\n     * be handled. By default, this is `ol.events.condition.never`. Use this if you want to use different events\n     * for `add` and `remove` instead of `toggle`.\n     * @type {function|undefined}\n     */\n    addCondition: {\n      type: Function,\n      default: never,\n    },\n    /**\n     * A function that takes an `ol.MapBrowserEvent` and returns a boolean to indicate whether that event should be handled.\n     * This is the event for the selected features as a whole. By default, this is `ol.events.condition.singleClick`.\n     * Clicking on a feature selects that feature and removes any that were in the selection. Clicking outside any feature\n     * removes all from the selection.\n     * @type {function|undefined}\n     */\n    condition: {\n      type: Function,\n      default: singleClick,\n    },\n    /**\n     * A function that takes an `ol.MapBrowserEvent` and returns a boolean to indicate whether that event should be handled.\n     * By default, this is `ol.events.condition.never`. Use this if you want to use different events for `add` and `remove`\n     * instead of `toggle`.\n     * @type {function|undefined}\n     */\n    removeCondition: {\n      type: Function,\n      default: never,\n    },\n    /**\n     * A function that takes an `ol.MapBrowserEvent` and returns a boolean to indicate whether that event should be handled.\n     * This is in addition to the `condition` event. By default, `ol.events.condition.shiftKeyOnly`, i.e. pressing `shift`\n     * as well as the `condition` event, adds that feature to the current selection if it is not currently selected,\n     * and removes it if it is.\n     * @type {function|undefined}\n     */\n    toggleCondition: {\n      type: Function,\n      default: shiftKeyOnly,\n    },\n  },\n  data () {\n    return {\n      currentHitTolerance: this.hitTolerance,\n    }\n  },\n  computed: {\n    featuresDataProj () {\n      return map(this.features, feature => {\n        if (isGeoJSONFeature(feature)) {\n          feature = initializeFeature(clonePlainObject(feature))\n        }\n        return feature\n      })\n    },\n    featuresViewProj () {\n      return map(this.features, feature => {\n        if (isGeoJSONFeature(feature)) {\n          feature = this.writeFeatureInViewProj(this.readFeatureInDataProj(feature))\n        }\n        return feature\n      })\n    },\n    currentFeaturesDataProj () {\n      if (!this.rev) return []\n\n      return map(this.getFeatures(), feature => this.writeFeatureInDataProj(feature))\n    },\n    currentFeaturesViewProj () {\n      if (!this.rev) return []\n\n      return map(this.getFeatures(), feature => this.writeFeatureInViewProj(feature))\n    },\n    currentFeatureIds () {\n      return map(this.currentFeaturesDataProj, feature => getFeatureId(feature))\n    },\n    layerFilter () {\n      return Array.isArray(this.layers)\n        ? layer => this.layers.includes(getLayerId(layer))\n        : this.layers\n    },\n    style () {\n      if (!(this.rev && this.$style)) return\n\n      let style = this.$style\n      if (isFunction(style)) return style\n      if (!style) return\n\n      isArray(style) || (style = [style])\n\n      return style.map(style => dumpStyle(style, geom => this.writeGeometryInDataProj(geom)))\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$interaction) return\n\n      if (this.currentHitTolerance !== this.$interaction.getHitTolerance()) {\n        this.currentHitTolerance = this.$interaction.getHitTolerance()\n      }\n    },\n    featuresViewProj: {\n      deep: true,\n      handler (features) {\n        const ids = map(features, feature => isObjectLike(feature) ? getFeatureId(feature) : feature)\n        if (isEqual(ids, this.currentFeatureIds)) return\n\n        this.unselectAll()\n        forEach(features, ::this.select)\n      },\n    },\n    currentFeaturesDataProj: {\n      deep: true,\n      handler (value) {\n        if (isEqual(value, this.featuresDataProj)) return\n\n        this.$emit('update:features', value && clonePlainObject(value))\n      },\n    },\n    hitTolerance (value) {\n      this.setHitTolerance(value)\n    },\n    currentHitTolerance (value) {\n      if (value === this.hitTolerance) return\n\n      this.$emit('update:hitTolerance', value)\n    },\n    style: {\n      deep: true,\n      handler (value, prev) {\n        if (isEqual(value, prev)) return\n\n        if (isPlainObject(value) || isArray(value)) {\n          value = clonePlainObject(value)\n        }\n        this.$emit('update:style', value)\n      },\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'filter',\n      'multi',\n      'wrapX',\n      'addCondition',\n      'condition',\n      'removeCondition',\n      'toggleCondition',\n    ]),\n  },\n  methods: {\n    /**\n     * @return {Select}\n     * @protected\n     */\n    createInteraction () {\n      return new SelectInteraction({\n        multi: this.multi,\n        filter: this.filter,\n        layers: this.layerFilter,\n        hitTolerance: this.currentHitTolerance,\n        addCondition: this.addCondition,\n        condition: this.condition,\n        removeCondition: this.removeCondition,\n        toggleCondition: this.toggleCondition,\n        style: this.$style,\n        features: this.$featuresCollection,\n      })\n    },\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return mergeDescriptors(\n        this::interaction.methods.getServices(),\n        this::featuresContainer.methods.getServices(),\n        this::styleContainer.methods.getServices(),\n      )\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::interaction.methods.subscribeAll()\n      this::featuresContainer.methods.subscribeAll()\n      this::subscribeToInteractionChanges()\n    },\n    /**\n     * @return {StyleTarget}\n     * @protected\n     */\n    getStyleTarget () {\n      return {\n        getStyle: () => this._style,\n        setStyle: () => {\n          if (false) {\n            this.$logger.log('style changed, scheduling recreate...')\n          }\n\n          this.scheduleRecreate()\n        },\n      }\n    },\n    /**\n     * @param {FeatureLike} feature\n     */\n    select (feature) {\n      feature = this.resolveFeature(feature)\n      if (!feature) return\n\n      this.addFeature(feature)\n    },\n    /**\n     * @param {FeatureLike} feature\n     */\n    unselect (feature) {\n      feature = this.resolveFeature(feature)\n      if (!feature) return\n\n      this.removeFeature(feature)\n    },\n    /**\n     * @return {void}\n     */\n    unselectAll () {\n      this.clearFeatures()\n    },\n    /**\n     * @param {Object|Vue|Feature|string|number} feature\n     * @return {Feature|undefined}\n     * @protected\n     */\n    resolveFeature (feature) {\n      if (!feature) return\n      feature = feature?.$feature || feature\n      if (feature instanceof Feature) return feature\n\n      const featureId = isString(feature) || isNumber(feature) ? feature : getFeatureId(feature)\n      if (!featureId) {\n        throw new Error(`${this.vmName} undefined feature id`)\n      }\n\n      feature = null\n      forEach(this.$mapVm.getLayers(), layer => {\n        if (this.layerFilter && !this.layerFilter(layer)) {\n          return\n        }\n\n        const source = layer.getSource()\n        if (isFunction(source?.getFeatureById)) {\n          feature = source.getFeatureById(featureId)\n        }\n\n        return !feature\n      })\n\n      return feature\n    },\n    updateFeature (feature) { /* disable update here, because wil always work with origin feature */ },\n    getHitTolerance () {\n      return coalesce(this.$interaction?.getHitTolerance(), this.currentHitTolerance)\n    },\n    setHitTolerance (tolerance) {\n      assert(isNumber(tolerance), 'Invalid tolerance')\n\n      if (tolerance !== this.currentHitTolerance) {\n        this.currentHitTolerance = tolerance\n      }\n      if (this.$interaction && tolerance !== this.$interaction.getHitTolerance()) {\n        this.$interaction.setHitTolerance(tolerance)\n      }\n    },\n    async getLayer (feature) {\n      feature = this.resolveFeature(feature)\n\n      return (await this.resolveInteraction()).getLayer(feature)\n    },\n  },\n}\n\n/**\n * @return {void}\n * @private\n */\nfunction subscribeToInteractionChanges () {\n  const select = obsFromVueEvent(this, 'addfeature', evt => ({\n    type: 'select',\n    feature: evt.feature,\n    get json () { return evt.json },\n  }))\n  const unselect = obsFromVueEvent(this, 'removefeature', evt => ({\n    type: 'unselect',\n    feature: evt.feature,\n    get json () { return evt.json },\n  }))\n  const events = mergeObs(select, unselect)\n  this.subscribeTo(events, evt => this.$emit(evt.type, evt))\n}\n","<template>\n  <i\n    :id=\"vmId\"\n    :class=\"vmClass\"\n    style=\"display: none !important;\">\n    <slot :features=\"currentFeaturesDataProj\" />\n  </i>\n</template>\n\n<script>\n  import { Feature } from 'ol'\n  import { never, shiftKeyOnly, singleClick } from 'ol/events/condition'\n  import { Select as SelectInteraction } from 'ol/interaction'\n  import { merge as mergeObs } from 'rxjs'\n  import { featuresContainer, interaction, makeChangeOrRecreateWatchers, styleContainer } from '../../mixins'\n  import { dumpStyle, getFeatureId, getLayerId, initializeFeature, isGeoJSONFeature } from '../../ol-ext'\n  import { fromVueEvent as obsFromVueEvent } from '../../rx-ext'\n  import {\n    assert,\n    clonePlainObject,\n    coalesce,\n    constant,\n    forEach, isArray,\n    isEqual,\n    isFunction,\n    isNumber,\n    isObjectLike, isPlainObject,\n    isString,\n    map,\n    mergeDescriptors,\n    or,\n    stubArray,\n  } from '../../utils'\n\n  export default {\n    name: 'VlInteractionSelect',\n    mixins: [\n      featuresContainer,\n      styleContainer,\n      interaction,\n    ],\n    props: {\n      /**\n       * A function that takes an `ol.Feature` and an `ol.layer.Layer` and returns `true` if the feature may be selected or `false` otherwise.\n       * @type {function|undefined}\n       */\n      filter: {\n        type: Function,\n        default: /*#__PURE__*/constant(true),\n      },\n      /**\n       * A list of layers from which features should be selected. Alternatively, a filter function can be provided.\n       * @type {string[]|function|undefined}\n       */\n      layers: {\n        type: [Array, Function],\n        default: undefined,\n      },\n      /**\n       * Hit-detection tolerance. Pixels inside the radius around the given position will be checked for features.\n       * This only works for the canvas renderer and not for WebGL.\n       * @type {number}\n       */\n      hitTolerance: {\n        type: Number,\n        default: 0,\n      },\n      /**\n       * A boolean that determines if the default behaviour should select only single features or all (overlapping)\n       * features at the clicked map position.\n       * @type {boolean}\n       */\n      multi: {\n        type: Boolean,\n        default: false,\n      },\n      /**\n       * Selected features as array of GeoJSON features with coordinates in the map view projection.\n       * @type {string[]|number[]|Object[]}\n       */\n      features: {\n        type: Array,\n        default: stubArray,\n        validator: value => value.every(or(isString, isNumber, isGeoJSONFeature)),\n      },\n      /**\n       * A function that takes an `ol.MapBrowserEvent` and returns a boolean to indicate whether that event should\n       * be handled. By default, this is `ol.events.condition.never`. Use this if you want to use different events\n       * for `add` and `remove` instead of `toggle`.\n       * @type {function|undefined}\n       */\n      addCondition: {\n        type: Function,\n        default: never,\n      },\n      /**\n       * A function that takes an `ol.MapBrowserEvent` and returns a boolean to indicate whether that event should be handled.\n       * This is the event for the selected features as a whole. By default, this is `ol.events.condition.singleClick`.\n       * Clicking on a feature selects that feature and removes any that were in the selection. Clicking outside any feature\n       * removes all from the selection.\n       * @type {function|undefined}\n       */\n      condition: {\n        type: Function,\n        default: singleClick,\n      },\n      /**\n       * A function that takes an `ol.MapBrowserEvent` and returns a boolean to indicate whether that event should be handled.\n       * By default, this is `ol.events.condition.never`. Use this if you want to use different events for `add` and `remove`\n       * instead of `toggle`.\n       * @type {function|undefined}\n       */\n      removeCondition: {\n        type: Function,\n        default: never,\n      },\n      /**\n       * A function that takes an `ol.MapBrowserEvent` and returns a boolean to indicate whether that event should be handled.\n       * This is in addition to the `condition` event. By default, `ol.events.condition.shiftKeyOnly`, i.e. pressing `shift`\n       * as well as the `condition` event, adds that feature to the current selection if it is not currently selected,\n       * and removes it if it is.\n       * @type {function|undefined}\n       */\n      toggleCondition: {\n        type: Function,\n        default: shiftKeyOnly,\n      },\n    },\n    data () {\n      return {\n        currentHitTolerance: this.hitTolerance,\n      }\n    },\n    computed: {\n      featuresDataProj () {\n        return map(this.features, feature => {\n          if (isGeoJSONFeature(feature)) {\n            feature = initializeFeature(clonePlainObject(feature))\n          }\n          return feature\n        })\n      },\n      featuresViewProj () {\n        return map(this.features, feature => {\n          if (isGeoJSONFeature(feature)) {\n            feature = this.writeFeatureInViewProj(this.readFeatureInDataProj(feature))\n          }\n          return feature\n        })\n      },\n      currentFeaturesDataProj () {\n        if (!this.rev) return []\n\n        return map(this.getFeatures(), feature => this.writeFeatureInDataProj(feature))\n      },\n      currentFeaturesViewProj () {\n        if (!this.rev) return []\n\n        return map(this.getFeatures(), feature => this.writeFeatureInViewProj(feature))\n      },\n      currentFeatureIds () {\n        return map(this.currentFeaturesDataProj, feature => getFeatureId(feature))\n      },\n      layerFilter () {\n        return Array.isArray(this.layers)\n          ? layer => this.layers.includes(getLayerId(layer))\n          : this.layers\n      },\n      style () {\n        if (!(this.rev && this.$style)) return\n\n        let style = this.$style\n        if (isFunction(style)) return style\n        if (!style) return\n\n        isArray(style) || (style = [style])\n\n        return style.map(style => dumpStyle(style, geom => this.writeGeometryInDataProj(geom)))\n      },\n    },\n    watch: {\n      rev () {\n        if (!this.$interaction) return\n\n        if (this.currentHitTolerance !== this.$interaction.getHitTolerance()) {\n          this.currentHitTolerance = this.$interaction.getHitTolerance()\n        }\n      },\n      featuresViewProj: {\n        deep: true,\n        handler (features) {\n          const ids = map(features, feature => isObjectLike(feature) ? getFeatureId(feature) : feature)\n          if (isEqual(ids, this.currentFeatureIds)) return\n\n          this.unselectAll()\n          forEach(features, ::this.select)\n        },\n      },\n      currentFeaturesDataProj: {\n        deep: true,\n        handler (value) {\n          if (isEqual(value, this.featuresDataProj)) return\n\n          this.$emit('update:features', value && clonePlainObject(value))\n        },\n      },\n      hitTolerance (value) {\n        this.setHitTolerance(value)\n      },\n      currentHitTolerance (value) {\n        if (value === this.hitTolerance) return\n\n        this.$emit('update:hitTolerance', value)\n      },\n      style: {\n        deep: true,\n        handler (value, prev) {\n          if (isEqual(value, prev)) return\n\n          if (isPlainObject(value) || isArray(value)) {\n            value = clonePlainObject(value)\n          }\n          this.$emit('update:style', value)\n        },\n      },\n      .../*#__PURE__*/makeChangeOrRecreateWatchers([\n        'filter',\n        'multi',\n        'wrapX',\n        'addCondition',\n        'condition',\n        'removeCondition',\n        'toggleCondition',\n      ]),\n    },\n    methods: {\n      /**\n       * @return {Select}\n       * @protected\n       */\n      createInteraction () {\n        return new SelectInteraction({\n          multi: this.multi,\n          filter: this.filter,\n          layers: this.layerFilter,\n          hitTolerance: this.currentHitTolerance,\n          addCondition: this.addCondition,\n          condition: this.condition,\n          removeCondition: this.removeCondition,\n          toggleCondition: this.toggleCondition,\n          style: this.$style,\n          features: this.$featuresCollection,\n        })\n      },\n      /**\n       * @returns {Object}\n       * @protected\n       */\n      getServices () {\n        return mergeDescriptors(\n          this::interaction.methods.getServices(),\n          this::featuresContainer.methods.getServices(),\n          this::styleContainer.methods.getServices(),\n        )\n      },\n      /**\n       * @return {void}\n       * @protected\n       */\n      subscribeAll () {\n        this::interaction.methods.subscribeAll()\n        this::featuresContainer.methods.subscribeAll()\n        this::subscribeToInteractionChanges()\n      },\n      /**\n       * @return {StyleTarget}\n       * @protected\n       */\n      getStyleTarget () {\n        return {\n          getStyle: () => this._style,\n          setStyle: () => {\n            if (process.env.VUELAYERS_DEBUG) {\n              this.$logger.log('style changed, scheduling recreate...')\n            }\n\n            this.scheduleRecreate()\n          },\n        }\n      },\n      /**\n       * @param {FeatureLike} feature\n       */\n      select (feature) {\n        feature = this.resolveFeature(feature)\n        if (!feature) return\n\n        this.addFeature(feature)\n      },\n      /**\n       * @param {FeatureLike} feature\n       */\n      unselect (feature) {\n        feature = this.resolveFeature(feature)\n        if (!feature) return\n\n        this.removeFeature(feature)\n      },\n      /**\n       * @return {void}\n       */\n      unselectAll () {\n        this.clearFeatures()\n      },\n      /**\n       * @param {Object|Vue|Feature|string|number} feature\n       * @return {Feature|undefined}\n       * @protected\n       */\n      resolveFeature (feature) {\n        if (!feature) return\n        feature = feature?.$feature || feature\n        if (feature instanceof Feature) return feature\n\n        const featureId = isString(feature) || isNumber(feature) ? feature : getFeatureId(feature)\n        if (!featureId) {\n          throw new Error(`${this.vmName} undefined feature id`)\n        }\n\n        feature = null\n        forEach(this.$mapVm.getLayers(), layer => {\n          if (this.layerFilter && !this.layerFilter(layer)) {\n            return\n          }\n\n          const source = layer.getSource()\n          if (isFunction(source?.getFeatureById)) {\n            feature = source.getFeatureById(featureId)\n          }\n\n          return !feature\n        })\n\n        return feature\n      },\n      updateFeature (feature) { /* disable update here, because wil always work with origin feature */ },\n      getHitTolerance () {\n        return coalesce(this.$interaction?.getHitTolerance(), this.currentHitTolerance)\n      },\n      setHitTolerance (tolerance) {\n        assert(isNumber(tolerance), 'Invalid tolerance')\n\n        if (tolerance !== this.currentHitTolerance) {\n          this.currentHitTolerance = tolerance\n        }\n        if (this.$interaction && tolerance !== this.$interaction.getHitTolerance()) {\n          this.$interaction.setHitTolerance(tolerance)\n        }\n      },\n      async getLayer (feature) {\n        feature = this.resolveFeature(feature)\n\n        return (await this.resolveInteraction()).getLayer(feature)\n      },\n    },\n  }\n\n  /**\n   * @return {void}\n   * @private\n   */\n  function subscribeToInteractionChanges () {\n    const select = obsFromVueEvent(this, 'addfeature', evt => ({\n      type: 'select',\n      feature: evt.feature,\n      get json () { return evt.json },\n    }))\n    const unselect = obsFromVueEvent(this, 'removefeature', evt => ({\n      type: 'unselect',\n      feature: evt.feature,\n      get json () { return evt.json },\n    }))\n    const events = mergeObs(select, unselect)\n    this.subscribeTo(events, evt => this.$emit(evt.type, evt))\n  }\n</script>\n","import { pick } from '../../utils'\nimport Interaction from './interaction.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Interaction, options)\n\n  Vue.component(Interaction.name, Interaction)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Interaction,\n}\n","\nimport { Collection } from 'ol'\nimport { Snap as SnapInteraction } from 'ol/interaction'\nimport { Vector as VectorSource } from 'ol/source'\nimport { interaction, makeChangeOrRecreateWatchers } from '../../mixins'\nimport { assert, instanceOf, isFunction } from '../../utils'\n\nexport default {\n  name: 'VlInteractionSnap',\n  mixins: [\n    interaction,\n  ],\n  props: {\n    /**\n     * Target source identifier from IdentityMap.\n     * @type {string}\n     */\n    source: {\n      type: String,\n      required: true,\n    },\n    /**\n     * Snap to edges\n     * @type {boolean}\n     */\n    edge: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * Snap to vertices.\n     * @type {boolean}\n     */\n    vertex: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * Pixel tolerance for considering the pointer close enough to a segment or vertex for snapping.\n     * @type {number}\n     */\n    pixelTolerance: {\n      type: Number,\n      default: 10,\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'source',\n      'edge',\n      'vertex',\n      'pixelTolerance',\n    ]),\n  },\n  methods: {\n    /**\n     * @return {Promise<Snap>}\n     * @protected\n     */\n    async createInteraction () {\n      let source = await this.getInstance(this.source)\n      assert(!!source, `Source \"${this.source}\" not found in identity map.`)\n      let features\n      if (!(source instanceof VectorSource)) {\n        if (isFunction(source.getFeaturesCollection)) {\n          features = source.getFeaturesCollection()\n        } else if (isFunction(source.getFeatures)) {\n          features = source.getFeatures()\n        }\n        instanceOf(features, Collection, `Source \"${this.source}\" doesn't provide features collection.`)\n        source = null\n      }\n\n      return new SnapInteraction({\n        source,\n        features,\n        edge: this.edge,\n        vertex: this.vertex,\n        pixelTolerance: this.pixelTolerance,\n      })\n    },\n  },\n}\n","import { pick } from '../../utils'\nimport Interaction from './interaction.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Interaction, options)\n\n  Vue.component(Interaction.name, Interaction)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Interaction,\n}\n","\nimport { source, urlTileSource, xyzSource } from '../../mixins'\n\nconst SPUTNIK_URL_TEMPLATE = 'http://tiles.maps.sputnik.ru/{z}/{x}/{y}.png?apikey={apikey}'\nconst SPUTNIK_ATTRIBUTIONS = '&copy; <a href=\"http://rt.ru/\" target=\"_blank\"></a>. '\n\nexport default {\n  name: 'VlSourceSputnik',\n  mixins: [\n    xyzSource,\n  ],\n  props: {\n    /* eslint-disable vue/require-prop-types */\n    // ol/source/Source\n    attributions: {\n      ...source.props.attributions,\n      default: SPUTNIK_ATTRIBUTIONS,\n    },\n    // ol/source/UrlTile\n    url: {\n      ...urlTileSource.props.url,\n      default: SPUTNIK_URL_TEMPLATE,\n    },\n    /* eslint-enable vue/require-prop-types */\n    // custom\n    apiKey: {\n      type: String,\n    },\n  },\n  computed: {\n    /**\n     * @type {string[]}\n     */\n    urlTokens () {\n      return ['apiKey']\n    },\n  },\n}\n","import { pick } from '../../utils'\nimport Source from './source.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Source, options)\n\n  Vue.component(Source.name, Source)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Source,\n}\n","\nimport { Stamen as StamenSource } from 'ol/source'\nimport { xyzSource } from '../../mixins'\nimport { noop } from '../../utils'\n\nexport default {\n  name: 'VlSourceStamen',\n  mixins: [\n    xyzSource,\n  ],\n  props: {\n    // ol/source/Stamen\n    /**\n     * Stamen layer name\n     *\n     * @type {string}\n     */\n    layer: {\n      type: String,\n      required: true,\n    },\n  },\n  computed: {\n    tileGridIdent: noop,\n    inputTileGridFactory: noop,\n    inputTileUrlFunction: noop,\n  },\n  methods: {\n    createSource () {\n      return new StamenSource({\n        // ol/source/Source\n        wrapX: this.wrapX,\n        // ol/source/Tile\n        cacheSize: this.cacheSize,\n        opaque: this.opaque,\n        transition: this.transition,\n        // ol/source/UrlTile\n        tileLoadFunction: this.currentTileLoadFunction,\n        url: this.currentUrls[0],\n        // ol/source/TileImage\n        reprojectionErrorThreshold: this.reprojectionErrorThreshold,\n        imageSmoothing: this.imageSmoothing,\n        // ol/source/XYZ\n        minZoom: this.minZoom,\n        maxZoom: this.maxZoom,\n        // ol/source/Stamen\n        layer: this.layer,\n      })\n    },\n    inputUrlChanged (value) {\n      this.setUrl(value)\n    },\n    attributionsCollapsibleChanged: noop,\n    projectionChanged: noop,\n    inputTileGridFactoryChanged: noop,\n    tileGridChanged: noop,\n    zDirectionChanged: noop,\n    inputTileUrlFunctionChanged: noop,\n    crossOriginChanged: noop,\n    tileClassChanged: noop,\n  },\n}\n","import { pick } from '../../utils'\nimport Source from './source.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Source, options)\n\n  Vue.component(Source.name, Source)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Source,\n}\n","\nimport { Style } from 'ol/style'\nimport {\n  makeChangeOrRecreateWatchers,\n  olCmp,\n  projTransforms,\n  stubVNode,\n  styleContainer,\n  waitForMap,\n} from '../../mixins'\nimport { EPSG_3857 } from '../../ol-ext'\nimport { mergeDescriptors } from '../../utils'\n\n/**\n * Style function component for advanced styling.\n * Plays the role of both a style that mounts itself to style target component (vl-layer-vector, vl-feature & etc.)\n * and style target for inner style containers (vl-style-box) as fallback style.\n */\nexport default {\n  name: 'VlStyleFunc',\n  mixins: [\n    stubVNode,\n    projTransforms,\n    styleContainer,\n    olCmp,\n    waitForMap,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  props: {\n    /**\n     * @type {function(): function(feature: Feature): Style}\n     */\n    function: {\n      type: Function,\n      // required: true,\n    },\n    /**\n     * @deprecated\n     * @todo remove later\n     */\n    func: Function,\n    /**\n     * @deprecated Use `func` prop instead.\n     * @todo remove in v0.13.x\n     */\n    factory: Function,\n  },\n  data () {\n    return {\n      viewProjection: EPSG_3857,\n      dataProjection: EPSG_3857,\n    }\n  },\n  computed: {\n    inputFunction () {\n      let func = this.function || this.func\n      if (!func && this.factory) {\n        func = this.factory()\n      }\n\n      return func\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'inputFunction',\n    ]),\n  },\n  created () {\n    if ('production' !== 'production') {\n      if (this.factory) {\n        this.$logger.warn(\"'factory' prop is deprecated. Use 'function' prop instead.\")\n      }\n      if (this.func) {\n        this.$logger.warn(\"'func' prop is deprecated. Use 'function' prop instead.\")\n      }\n    }\n\n    this::defineServices()\n  },\n  updated () {\n    if ('production' !== 'production') {\n      if (this.factory) {\n        this.$logger.warn(\"'factory' prop is deprecated. Use 'function' prop instead.\")\n      }\n      if (this.func) {\n        this.$logger.warn(\"'func' prop is deprecated. Use 'function' prop instead.\")\n      }\n    }\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      await Promise.all([\n        this::olCmp.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * @return {function(feature: Feature): Style}\n     * @protected\n     */\n    createOlObject () {\n      // user provided style function\n      const providedStyleFunc = this.inputFunction\n      // fallback style function made from inner style containers\n      const fallbackStyleFunc = this.createStyleFunc(this.$style, this.getDefaultStyle())\n\n      const func = function __styleFunc (feature, resolution) {\n        const style = providedStyleFunc(feature, resolution)\n        // not empty or null style\n        if (\n          style == null ||\n          (Array.isArray(style) && style.length) ||\n          style instanceof Style\n        ) {\n          return style\n        }\n        return fallbackStyleFunc(feature, resolution)\n      }\n      func.id = this.currentId\n\n      return func\n    },\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        this::styleContainer.methods.getServices(),\n      )\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$styleContainer?.setStyle(this)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      if (this.$styleContainer?.getStyle() === this.$styleFunction) {\n        this.$styleContainer.setStyle(null)\n      }\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @protected\n     */\n    getStyleTarget () {\n      return {\n        getStyle: () => this._style,\n        setStyle: async () => {\n          if (false) {\n            this.$logger.log('style changed, scheduling recreate...')\n          }\n\n          await this.scheduleRecreate()\n        },\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $styleFunction: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $viewVm: {\n      enumerable: true,\n      get: () => this.$services?.viewVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $styleContainer: {\n      enumerable: true,\n      get: () => this.$services?.styleContainer,\n    },\n  })\n}\n","<script>\n  import { Style } from 'ol/style'\n  import {\n    makeChangeOrRecreateWatchers,\n    olCmp,\n    projTransforms,\n    stubVNode,\n    styleContainer,\n    waitForMap,\n  } from '../../mixins'\n  import { EPSG_3857 } from '../../ol-ext'\n  import { mergeDescriptors } from '../../utils'\n\n  /**\n   * Style function component for advanced styling.\n   * Plays the role of both a style that mounts itself to style target component (vl-layer-vector, vl-feature & etc.)\n   * and style target for inner style containers (vl-style-box) as fallback style.\n   */\n  export default {\n    name: 'VlStyleFunc',\n    mixins: [\n      stubVNode,\n      projTransforms,\n      styleContainer,\n      olCmp,\n      waitForMap,\n    ],\n    stubVNode: {\n      empty: false,\n      attrs () {\n        return {\n          id: this.vmId,\n          class: this.vmClass,\n        }\n      },\n    },\n    props: {\n      /**\n       * @type {function(): function(feature: Feature): Style}\n       */\n      function: {\n        type: Function,\n        // required: true,\n      },\n      /**\n       * @deprecated\n       * @todo remove later\n       */\n      func: Function,\n      /**\n       * @deprecated Use `func` prop instead.\n       * @todo remove in v0.13.x\n       */\n      factory: Function,\n    },\n    data () {\n      return {\n        viewProjection: EPSG_3857,\n        dataProjection: EPSG_3857,\n      }\n    },\n    computed: {\n      inputFunction () {\n        let func = this.function || this.func\n        if (!func && this.factory) {\n          func = this.factory()\n        }\n\n        return func\n      },\n    },\n    watch: {\n      .../*#__PURE__*/makeChangeOrRecreateWatchers([\n        'inputFunction',\n      ]),\n    },\n    created () {\n      if (process.env.NODE_ENV !== 'production') {\n        if (this.factory) {\n          this.$logger.warn(\"'factory' prop is deprecated. Use 'function' prop instead.\")\n        }\n        if (this.func) {\n          this.$logger.warn(\"'func' prop is deprecated. Use 'function' prop instead.\")\n        }\n      }\n\n      this::defineServices()\n    },\n    updated () {\n      if (process.env.NODE_ENV !== 'production') {\n        if (this.factory) {\n          this.$logger.warn(\"'factory' prop is deprecated. Use 'function' prop instead.\")\n        }\n        if (this.func) {\n          this.$logger.warn(\"'func' prop is deprecated. Use 'function' prop instead.\")\n        }\n      }\n    },\n    methods: {\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async beforeInit () {\n        await Promise.all([\n          this::olCmp.methods.beforeInit(),\n          this::waitForMap.methods.beforeInit(),\n        ])\n      },\n      /**\n       * @return {function(feature: Feature): Style}\n       * @protected\n       */\n      createOlObject () {\n        // user provided style function\n        const providedStyleFunc = this.inputFunction\n        // fallback style function made from inner style containers\n        const fallbackStyleFunc = this.createStyleFunc(this.$style, this.getDefaultStyle())\n\n        const func = function __styleFunc (feature, resolution) {\n          const style = providedStyleFunc(feature, resolution)\n          // not empty or null style\n          if (\n            style == null ||\n            (Array.isArray(style) && style.length) ||\n            style instanceof Style\n          ) {\n            return style\n          }\n          return fallbackStyleFunc(feature, resolution)\n        }\n        func.id = this.currentId\n\n        return func\n      },\n      /**\n       * @returns {Object}\n       * @protected\n       */\n      getServices () {\n        return mergeDescriptors(\n          this::olCmp.methods.getServices(),\n          this::styleContainer.methods.getServices(),\n        )\n      },\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async mount () {\n        this.$styleContainer?.setStyle(this)\n\n        return this::olCmp.methods.mount()\n      },\n      /**\n       * @return {Promise<void>}\n       * @protected\n       */\n      async unmount () {\n        if (this.$styleContainer?.getStyle() === this.$styleFunction) {\n          this.$styleContainer.setStyle(null)\n        }\n\n        return this::olCmp.methods.unmount()\n      },\n      /**\n       * @protected\n       */\n      getStyleTarget () {\n        return {\n          getStyle: () => this._style,\n          setStyle: async () => {\n            if (process.env.VUELAYERS_DEBUG) {\n              this.$logger.log('style changed, scheduling recreate...')\n            }\n\n            await this.scheduleRecreate()\n          },\n        }\n      },\n    },\n  }\n\n  function defineServices () {\n    Object.defineProperties(this, {\n      $styleFunction: {\n        enumerable: true,\n        get: () => this.$olObject,\n      },\n      /**\n       * @type {Object|undefined}\n       */\n      $mapVm: {\n        enumerable: true,\n        get: () => this.$services?.mapVm,\n      },\n      /**\n       * @type {Object|undefined}\n       */\n      $viewVm: {\n        enumerable: true,\n        get: () => this.$services?.viewVm,\n      },\n      /**\n       * @type {Object|undefined}\n       */\n      $styleContainer: {\n        enumerable: true,\n        get: () => this.$services?.styleContainer,\n      },\n    })\n  }\n</script>\n","import { pick } from '../../utils'\nimport Style from './style.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Style, options)\n\n  Vue.component(Style.name, Style)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Style,\n}\n","\nimport { TileArcGISRest as TileArcGISRestSource } from 'ol/source'\nimport { tileImageSource, arcgisSource } from '../../mixins'\nimport { noop } from '../../utils'\n\nexport default {\n  name: 'VlSourceTileArcgisRest',\n  mixins: [\n    arcgisSource,\n    tileImageSource,\n  ],\n  computed: {\n    inputTileUrlFunction: noop,\n  },\n  methods: {\n    createSource () {\n      return new TileArcGISRestSource({\n        // ol/source/Source\n        attributions: this.currentAttributions,\n        projection: this.resolvedDataProjection,\n        wrapX: this.wrapX,\n        // ol/source/Tile\n        cacheSize: this.cacheSize,\n        tileGrid: this.tileGrid,\n        transition: this.transition,\n        // ol/source/UrlTile\n        tileLoadFunction: this.currentTileLoadFunction,\n        urls: this.currentUrls,\n        // ol/source/TileImage\n        crossOrigin: this.crossOrigin,\n        reprojectionErrorThreshold: this.reprojectionErrorThreshold,\n        imageSmoothing: this.imageSmoothing,\n        // ol/source/TileArcGISRest\n        hidpi: this.hidpi,\n        params: this.currentParams,\n      })\n    },\n    stateChanged: noop,\n    attributionsCollapsibleChanged: noop,\n    tileKeyChanged: noop,\n    opaqueChanged: noop,\n    tilePixelRatioChanged: noop,\n    zDirectionChanged: noop,\n    inputTileUrlFunctionChanged: noop,\n    tileClassChanged: noop,\n  },\n}\n","import { pick } from '../../utils'\nimport Source from './source.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Source, options)\n\n  Vue.component(Source.name, Source)\n\n  Vue.component('VlSourceArcgisRest', {\n    name: 'VlSourceArcgisRest',\n    extends: Source,\n    created () {\n      if (process.env.NODE_ENV !== 'production') {\n        this.$logger.warn('VlSourceArcgisRest component is deprecated. Use VlSourceTileArcgisRest component instead.')\n      }\n    },\n  })\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Source,\n}\n","\nimport { Tile as TileLayer } from 'ol/layer'\nimport { tileLayer } from '../../mixins'\n\n/**\n * Layer that provide pre-rendered, tiled images in grid that are organized by zoom levels for\n * specific resolutions. `vl-tile-layer` component implements a **source container** interface, so it should be\n * used together with tile-like `vl-source-*` components.\n */\nexport default {\n  name: 'VlLayerTile',\n  mixins: [\n    tileLayer,\n  ],\n  methods: {\n    /**\n     * @return {Tile}\n     * @protected\n     */\n    createLayer () {\n      return new TileLayer({\n        // ol/layer/Base\n        className: this.className,\n        opacity: this.currentOpacity,\n        visible: this.currentVisible,\n        extent: this.currentExtentViewProj,\n        zIndex: this.currentZIndex,\n        minResolution: this.currentMinResolution,\n        maxResolution: this.currentMaxResolution,\n        minZoom: this.currentMinZoom,\n        maxZoom: this.currentMaxZoom,\n        // ol/layer/Layer\n        render: this.render,\n        source: this.$source,\n        // ol/layer/BaseTile\n        preload: this.currentPreload,\n        useInterimTilesOnError: this.currentUseInterimTilesOnError,\n      })\n    },\n  },\n}\n","import { pick } from '../../utils'\nimport Layer from './layer.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Layer, options)\n\n  Vue.component(Layer.name, Layer)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Layer,\n}\n","\nimport { TileWMS as TileWMSSource } from 'ol/source'\nimport { makeChangeOrRecreateWatchers, tileImageSource, wmsSource } from '../../mixins'\nimport { noop } from '../../utils'\n\nexport default {\n  name: 'VlSourceTileWms',\n  mixins: [\n    wmsSource,\n    tileImageSource,\n  ],\n  props: {\n    gutter: {\n      type: Number,\n      default: 0,\n    },\n  },\n  computed: {\n    inputTileUrlFunction: noop,\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'gutter',\n    ]),\n  },\n  methods: {\n    createSource () {\n      return new TileWMSSource({\n        // ol/source/Source\n        attributions: this.currentAttributions,\n        projection: this.resolvedDataProjection,\n        wrapX: this.wrapX,\n        // ol/source/Tile\n        cacheSize: this.cacheSize,\n        tileGrid: this.tileGrid,\n        transition: this.transition,\n        // ol/source/UrlTile\n        tileLoadFunction: this.currentTileLoadFunction,\n        urls: this.currentUrls,\n        // ol/source/TileImage\n        crossOrigin: this.crossOrigin,\n        reprojectionErrorThreshold: this.reprojectionErrorThreshold,\n        tileClass: this.tileClass,\n        imageSmoothing: this.imageSmoothing,\n        // ol/source/TileWMS\n        gutter: this.gutter,\n        hidpi: this.hidpi,\n        serverType: this.serverType,\n        params: this.currentParams,\n      })\n    },\n    stateChanged: noop,\n    attributionsCollapsibleChanged: noop,\n    tileKeyChanged: noop,\n    opaqueChanged: noop,\n    tilePixelRatioChanged: noop,\n    zDirectionChanged: noop,\n    inputTileUrlFunctionChanged: noop,\n  },\n}\n","import { pick } from '../../utils'\nimport Source from './source.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Source, options)\n\n  Vue.component(Source.name, Source)\n\n  // todo remove in v0.13.x\n  Vue.component('VlSourceWms', {\n    name: 'VlSourceWms',\n    extends: Source,\n    created () {\n      if (process.env.NODE_ENV !== 'production') {\n        this.$logger.warn('VlSourceWms component is deprecated. Use VlSourceTileWms component instead.')\n      }\n    },\n  })\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Source,\n}\n","\nimport { Collection } from 'ol'\nimport { Translate as TranslateInteraction } from 'ol/interaction'\nimport { Vector as VectorSource } from 'ol/source'\nimport VectorEventType from 'ol/source/VectorEventType'\nimport { merge as mergeObs } from 'rxjs'\nimport { map as mapObs, tap } from 'rxjs/operators'\nimport { interaction, makeChangeOrRecreateWatchers } from '../../mixins'\nimport { COORD_PRECISION, getLayerId, writeGeoJsonFeature } from '../../ol-ext'\nimport { fromOlEvent as obsFromOlEvent } from '../../rx-ext'\nimport { assert, coalesce, instanceOf, isFunction, isNumber, isString, map } from '../../utils'\n\nexport default {\n  name: 'VlInteractionTranslate',\n  mixins: [\n    interaction,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  props: {\n    source: {\n      type: String,\n      required: true,\n    },\n    layers: [String, Array],\n    filter: Function,\n    hitTolerance: {\n      type: Number,\n      default: 0,\n    },\n  },\n  data () {\n    return {\n      currentHitTolerance: this.hitTolerance,\n    }\n  },\n  computed: {\n    inputFilter () {\n      if (isFunction(this.filter)) return this.filter\n\n      let layers = this.layers\n      if (!layers) return\n\n      if (isString(layers)) layers = [layers]\n\n      return (feature, layer) => layers.includes(getLayerId(layer))\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$interaction) return\n\n      if (this.currentHitTolerance !== this.$interaction.getHitTolerance()) {\n        this.currentHitTolerance = this.$interaction.getHitTolerance()\n      }\n    },\n    hitTolerance (value) {\n      this.setHitTolerance(value)\n    },\n    currentHitTolerance (value) {\n      if (value === this.hitTolerance) return\n\n      this.$emit('update:hitTolerance', value)\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'source',\n      'inputFilter',\n    ]),\n  },\n  methods: {\n    /**\n     * @return {Promise<Modify>}\n     * @protected\n     */\n    async createInteraction () {\n      const source = this._source = await this.getInstance(this.source)\n      assert(!!source, `Source \"${this.source}\" not found in identity map.`)\n\n      let features\n      if (source instanceof VectorSource) {\n        features = source.getFeaturesCollection()\n        if (!features) {\n          features = new Collection(source.getFeatures())\n          this.subscribeTo(\n            obsFromOlEvent(source, VectorEventType.ADDFEATURE),\n            ({ feature }) => feature && features.push(feature),\n          )\n          this.subscribeTo(\n            obsFromOlEvent(source, VectorEventType.REMOVEFEATURE),\n            ({ feature }) => feature && features.remove(feature),\n          )\n        }\n        instanceOf(features, Collection, `Source \"${this.source}\" doesn't provide features collection.`)\n      } else {\n        if (isFunction(source.getFeaturesCollection)) {\n          features = source.getFeaturesCollection()\n        } else if (isFunction(source.getFeatures)) {\n          features = source.getFeatures()\n        }\n        instanceOf(features, Collection, `Source \"${this.source}\" doesn't provide features collection.`)\n      }\n\n      return new TranslateInteraction({\n        features,\n        filter: this.inputFilter,\n        hitTolerance: this.currentHitTolerance,\n      })\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::interaction.methods.subscribeAll()\n      this::subscribeToInteractionChanges()\n    },\n    getHitTolerance () {\n      return coalesce(this.$interaction?.getHitTolerance(), this.currentHitTolerance)\n    },\n    setHitTolerance (tolerance) {\n      assert(isNumber(tolerance), 'Invalid hit tolerance')\n\n      if (tolerance !== this.currentHitTolerance) {\n        this.currentHitTolerance = tolerance\n      }\n      if (this.$interaction && tolerance !== this.$interaction.getHitTolerance()) {\n        this.$interaction.setHitTolerance(tolerance)\n      }\n    },\n  },\n}\n\n/**\n * @private\n */\nfunction subscribeToInteractionChanges () {\n  const start = obsFromOlEvent(this.$interaction, 'translatestart').pipe(\n    tap(() => this.setInteracting(true)),\n  )\n  const end = obsFromOlEvent(this.$interaction, 'translateend').pipe(\n    tap(() => this.setInteracting(false)),\n  )\n  const progress = obsFromOlEvent(this.$interaction, 'translating')\n  const events = mergeObs(start, end, progress).pipe(\n    mapObs(({ type, features, coordinate, startCoordinate }) => {\n      const viewProj = this.resolvedViewProjection\n      const dataProj = this.resolvedDataProjection\n      return {\n        type,\n        features: features instanceof Collection ? features.getArray() : features,\n        coordinate: this.pointToDataProj(coordinate),\n        startCoordinate: this.pointToDataProj(startCoordinate),\n        get json () {\n          if (!this._json) {\n            this._json = map(this.features, feature => writeGeoJsonFeature(feature, viewProj, dataProj, COORD_PRECISION))\n          }\n          return this._json\n        },\n      }\n    }),\n  )\n  this.subscribeTo(events, evt => this.$emit(evt.type, evt))\n}\n","<script>\n  import { Collection } from 'ol'\n  import { Translate as TranslateInteraction } from 'ol/interaction'\n  import { Vector as VectorSource } from 'ol/source'\n  import VectorEventType from 'ol/source/VectorEventType'\n  import { merge as mergeObs } from 'rxjs'\n  import { map as mapObs, tap } from 'rxjs/operators'\n  import { interaction, makeChangeOrRecreateWatchers } from '../../mixins'\n  import { COORD_PRECISION, getLayerId, writeGeoJsonFeature } from '../../ol-ext'\n  import { fromOlEvent as obsFromOlEvent } from '../../rx-ext'\n  import { assert, coalesce, instanceOf, isFunction, isNumber, isString, map } from '../../utils'\n\n  export default {\n    name: 'VlInteractionTranslate',\n    mixins: [\n      interaction,\n    ],\n    stubVNode: {\n      empty: false,\n      attrs () {\n        return {\n          id: this.vmId,\n          class: this.vmClass,\n        }\n      },\n    },\n    props: {\n      source: {\n        type: String,\n        required: true,\n      },\n      layers: [String, Array],\n      filter: Function,\n      hitTolerance: {\n        type: Number,\n        default: 0,\n      },\n    },\n    data () {\n      return {\n        currentHitTolerance: this.hitTolerance,\n      }\n    },\n    computed: {\n      inputFilter () {\n        if (isFunction(this.filter)) return this.filter\n\n        let layers = this.layers\n        if (!layers) return\n\n        if (isString(layers)) layers = [layers]\n\n        return (feature, layer) => layers.includes(getLayerId(layer))\n      },\n    },\n    watch: {\n      rev () {\n        if (!this.$interaction) return\n\n        if (this.currentHitTolerance !== this.$interaction.getHitTolerance()) {\n          this.currentHitTolerance = this.$interaction.getHitTolerance()\n        }\n      },\n      hitTolerance (value) {\n        this.setHitTolerance(value)\n      },\n      currentHitTolerance (value) {\n        if (value === this.hitTolerance) return\n\n        this.$emit('update:hitTolerance', value)\n      },\n      .../*#__PURE__*/makeChangeOrRecreateWatchers([\n        'source',\n        'inputFilter',\n      ]),\n    },\n    methods: {\n      /**\n       * @return {Promise<Modify>}\n       * @protected\n       */\n      async createInteraction () {\n        const source = this._source = await this.getInstance(this.source)\n        assert(!!source, `Source \"${this.source}\" not found in identity map.`)\n\n        let features\n        if (source instanceof VectorSource) {\n          features = source.getFeaturesCollection()\n          if (!features) {\n            features = new Collection(source.getFeatures())\n            this.subscribeTo(\n              obsFromOlEvent(source, VectorEventType.ADDFEATURE),\n              ({ feature }) => feature && features.push(feature),\n            )\n            this.subscribeTo(\n              obsFromOlEvent(source, VectorEventType.REMOVEFEATURE),\n              ({ feature }) => feature && features.remove(feature),\n            )\n          }\n          instanceOf(features, Collection, `Source \"${this.source}\" doesn't provide features collection.`)\n        } else {\n          if (isFunction(source.getFeaturesCollection)) {\n            features = source.getFeaturesCollection()\n          } else if (isFunction(source.getFeatures)) {\n            features = source.getFeatures()\n          }\n          instanceOf(features, Collection, `Source \"${this.source}\" doesn't provide features collection.`)\n        }\n\n        return new TranslateInteraction({\n          features,\n          filter: this.inputFilter,\n          hitTolerance: this.currentHitTolerance,\n        })\n      },\n      /**\n       * @return {void}\n       * @protected\n       */\n      subscribeAll () {\n        this::interaction.methods.subscribeAll()\n        this::subscribeToInteractionChanges()\n      },\n      getHitTolerance () {\n        return coalesce(this.$interaction?.getHitTolerance(), this.currentHitTolerance)\n      },\n      setHitTolerance (tolerance) {\n        assert(isNumber(tolerance), 'Invalid hit tolerance')\n\n        if (tolerance !== this.currentHitTolerance) {\n          this.currentHitTolerance = tolerance\n        }\n        if (this.$interaction && tolerance !== this.$interaction.getHitTolerance()) {\n          this.$interaction.setHitTolerance(tolerance)\n        }\n      },\n    },\n  }\n\n  /**\n   * @private\n   */\n  function subscribeToInteractionChanges () {\n    const start = obsFromOlEvent(this.$interaction, 'translatestart').pipe(\n      tap(() => this.setInteracting(true)),\n    )\n    const end = obsFromOlEvent(this.$interaction, 'translateend').pipe(\n      tap(() => this.setInteracting(false)),\n    )\n    const progress = obsFromOlEvent(this.$interaction, 'translating')\n    const events = mergeObs(start, end, progress).pipe(\n      mapObs(({ type, features, coordinate, startCoordinate }) => {\n        const viewProj = this.resolvedViewProjection\n        const dataProj = this.resolvedDataProjection\n        return {\n          type,\n          features: features instanceof Collection ? features.getArray() : features,\n          coordinate: this.pointToDataProj(coordinate),\n          startCoordinate: this.pointToDataProj(startCoordinate),\n          get json () {\n            if (!this._json) {\n              this._json = map(this.features, feature => writeGeoJsonFeature(feature, viewProj, dataProj, COORD_PRECISION))\n            }\n            return this._json\n          },\n        }\n      }),\n    )\n    this.subscribeTo(events, evt => this.$emit(evt.type, evt))\n  }\n</script>\n","import { pick } from '../../utils'\nimport Interaction from './interaction.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Interaction, options)\n\n  Vue.component(Interaction.name, Interaction)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Interaction,\n}\n","\nimport { VectorImage as VectorImageLayer } from 'ol/layer'\nimport { makeChangeOrRecreateWatchers, vectorLayer } from '../../mixins'\n\n/**\n * Layer for data that is rendered client-side.\n */\nexport default {\n  name: 'VlLayerVectorImage',\n  mixins: [\n    vectorLayer,\n  ],\n  props: {\n    // ol/layer/VectorImage\n    /**\n     * @type {number}\n     */\n    imageRatio: {\n      type: Number,\n      default: 1,\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'imageRatio',\n    ]),\n  },\n  methods: {\n    /**\n     * @return {VectorImageLayer}\n     * @protected\n     */\n    createLayer () {\n      return new VectorImageLayer({\n        // ol/layer/Base\n        className: this.className,\n        opacity: this.currentOpacity,\n        visible: this.currentVisible,\n        extent: this.currentExtentViewProj,\n        zIndex: this.currentZIndex,\n        minResolution: this.currentMinResolution,\n        maxResolution: this.currentMaxResolution,\n        minZoom: this.currentMinZoom,\n        maxZoom: this.currentMaxZoom,\n        // ol/layer/Layer\n        render: this.render,\n        source: this.$source,\n        // ol/layer/BaseVector\n        renderOrder: this.renderOrder,\n        renderBuffer: this.renderBuffer,\n        declutter: this.declutter,\n        updateWhileAnimating: this.updateWhileAnimating,\n        updateWhileInteracting: this.updateWhileInteracting,\n        style: this.$style,\n        // ol/layer/VectorImage\n        imageRatio: this.imageRatio,\n      })\n    },\n  },\n}\n","import { pick } from '../../utils'\nimport Layer from './layer.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Layer, options)\n\n  Vue.component(Layer.name, Layer)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Layer,\n}\n","\nimport { Feature } from 'ol'\nimport { createTileUrlFunctionFromTemplates } from 'ol-tilecache'\nimport { VectorTile as VectorTileSource } from 'ol/source'\nimport TileEventType from 'ol/source/TileEventType'\nimport { createXYZ } from 'ol/tilegrid'\nimport { featureHelper, makeChangeOrRecreateWatchers, tileSource, urlTileSource } from '../../mixins'\nimport { createMvtFmt, extentFromProjection, roundExtent } from '../../ol-ext'\nimport { fromOlEvent as obsFromOlEvent } from '../../rx-ext'\nimport { and, coalesce, forEach, isArray, isFunction, isNumber, noop, or, sealFactory } from '../../utils'\n\nconst validateTileSize = /*#__PURE__*/or(isNumber, and(isArray, value => value.length === 2 && value.every(isNumber)))\n\nexport default {\n  name: 'VlSourceVectorTile',\n  mixins: [\n    urlTileSource,\n    featureHelper,\n  ],\n  props: {\n    /* eslint-disable vue/require-prop-types */\n    // ol/source/Tile\n    cacheSize: {\n      ...tileSource.props.cacheSize,\n      default: 128,\n    },\n    zDirection: {\n      ...tileSource.props.zDirection,\n      default: 1,\n    },\n    /* eslint-enable vue/require-prop-types */\n    // ol/source/VectorTile\n    extent: {\n      type: Array,\n      validator: value => value.length === 4 && value.every(isNumber),\n    },\n    formatFactory: {\n      type: Function,\n      default: createMvtFmt,\n    },\n    overlaps: {\n      type: Boolean,\n      default: true,\n    },\n    tileClass: Function,\n    maxZoom: {\n      type: Number,\n      default: 22,\n    },\n    minZoom: {\n      type: Number,\n      default: 0,\n      validator: value => value >= 0,\n    },\n    maxResolution: Number,\n    tileSize: {\n      type: [Number, Array],\n      default: () => [512, 512],\n      validator: validateTileSize,\n    },\n  },\n  data () {\n    return {\n      format: undefined,\n    }\n  },\n  computed: {\n    inputTileSize () {\n      return isArray(this.tileSize) ? this.tileSize : [this.tileSize, this.tileSize]\n    },\n    derivedTileGridFactory () {\n      if (isFunction(this.tileGridFactory)) {\n        return this.tileGridFactory\n      }\n\n      const extent = this.extentDataProj || extentFromProjection(this.resolvedDataProjection)\n      const maxZoom = this.maxZoom\n      const minZoom = this.minZoom\n      const maxResolution = this.maxResolution\n      const tileSize = this.inputTileSize\n\n      return () => createXYZ({ extent, maxZoom, minZoom, maxResolution, tileSize })\n    },\n    extentDataProj () {\n      return roundExtent(this.extent)\n    },\n    extentViewProj () {\n      return this.extentToViewProj(this.extent)\n    },\n    formatIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'format')\n    },\n    inputFormatFactory () {\n      return sealFactory(::this.formatFactory)\n    },\n    inputTileUrlFunction () {\n      const urlFunc = coalesce(this.tileUrlFunction, this.tileUrlFunc)\n      if (isFunction(urlFunc)) return urlFunc\n      if (this.currentUrls.length === 0) return\n\n      return createTileUrlFunctionFromTemplates(this.currentUrls, this.tileGrid)\n    },\n  },\n  watch: {\n    formatIdent (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.format) {\n        this.setInstance(value, this.format)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n    inputFormatFactory (value) {\n      while (this.hasInstance(this.formatIdent)) {\n        this.unsetInstance(this.formatIdent)\n      }\n\n      if (isFunction(value)) {\n        this.format = this.instanceFactoryCall(this.formatIdent, this::value)\n      } else {\n        this.format = undefined\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'extentViewProj',\n      'overlaps',\n      'tileClass',\n    ], [\n      'extentViewProj',\n    ]),\n  },\n  created () {\n    if (isFunction(this.inputFormatFactory)) {\n      this.format = this.instanceFactoryCall(this.formatIdent, ::this.inputFormatFactory)\n    }\n  },\n  methods: {\n    /**\n     * @return {VectorTileSource}\n     */\n    createSource () {\n      return new VectorTileSource({\n        // ol/source/Source\n        attributions: this.currentAttributions,\n        attributionsCollapsible: this.attributionsCollapsible,\n        projection: this.resolvedDataProjection,\n        state: this.currentState,\n        wrapX: this.wrapX,\n        // ol/source/Tile\n        cacheSize: this.cacheSize,\n        tileGrid: this.tileGrid,\n        transition: this.transition,\n        zDirection: this.zDirection,\n        // ol/source/UrlTile\n        tileLoadFunction: this.currentTileLoadFunction,\n        tileUrlFunction: this.currentTileUrlFunction,\n        // ol/source/VectorTile\n        format: this.format,\n        extent: this.extentViewProj,\n        overlaps: this.overlaps,\n        tileClass: this.tileClass,\n      })\n    },\n    /**\n     * @returns {void}\n     */\n    subscribeAll () {\n      this::urlTileSource.methods.subscribeAll()\n      this::subscribeToSourceEvents()\n    },\n    async getFeaturesInExtent (extent, viewProj = false) {\n      extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n\n      return (await this.resolveSource()).getFeaturesInExtent(extent)\n    },\n    async clear () {\n      (await this.resolveSource()).clear()\n    },\n    tileKeyChanged: noop,\n    opaqueChanged: noop,\n    tilePixelRatioChanged: noop,\n  },\n}\n\nfunction subscribeToSourceEvents () {\n  this.subscribeTo(obsFromOlEvent(this.$source, TileEventType.TILELOADEND), evt => {\n    if (!evt.tile) return\n\n    forEach(evt.tile.getFeatures(), feature => {\n      if (!(feature instanceof Feature)) return\n      this.initializeFeature(feature)\n    })\n  })\n}\n","<script>\n  import { Feature } from 'ol'\n  import { createTileUrlFunctionFromTemplates } from 'ol-tilecache'\n  import { VectorTile as VectorTileSource } from 'ol/source'\n  import TileEventType from 'ol/source/TileEventType'\n  import { createXYZ } from 'ol/tilegrid'\n  import { featureHelper, makeChangeOrRecreateWatchers, tileSource, urlTileSource } from '../../mixins'\n  import { createMvtFmt, extentFromProjection, roundExtent } from '../../ol-ext'\n  import { fromOlEvent as obsFromOlEvent } from '../../rx-ext'\n  import { and, coalesce, forEach, isArray, isFunction, isNumber, noop, or, sealFactory } from '../../utils'\n\n  const validateTileSize = /*#__PURE__*/or(isNumber, and(isArray, value => value.length === 2 && value.every(isNumber)))\n\n  export default {\n    name: 'VlSourceVectorTile',\n    mixins: [\n      urlTileSource,\n      featureHelper,\n    ],\n    props: {\n      /* eslint-disable vue/require-prop-types */\n      // ol/source/Tile\n      cacheSize: {\n        ...tileSource.props.cacheSize,\n        default: 128,\n      },\n      zDirection: {\n        ...tileSource.props.zDirection,\n        default: 1,\n      },\n      /* eslint-enable vue/require-prop-types */\n      // ol/source/VectorTile\n      extent: {\n        type: Array,\n        validator: value => value.length === 4 && value.every(isNumber),\n      },\n      formatFactory: {\n        type: Function,\n        default: createMvtFmt,\n      },\n      overlaps: {\n        type: Boolean,\n        default: true,\n      },\n      tileClass: Function,\n      maxZoom: {\n        type: Number,\n        default: 22,\n      },\n      minZoom: {\n        type: Number,\n        default: 0,\n        validator: value => value >= 0,\n      },\n      maxResolution: Number,\n      tileSize: {\n        type: [Number, Array],\n        default: () => [512, 512],\n        validator: validateTileSize,\n      },\n    },\n    data () {\n      return {\n        format: undefined,\n      }\n    },\n    computed: {\n      inputTileSize () {\n        return isArray(this.tileSize) ? this.tileSize : [this.tileSize, this.tileSize]\n      },\n      derivedTileGridFactory () {\n        if (isFunction(this.tileGridFactory)) {\n          return this.tileGridFactory\n        }\n\n        const extent = this.extentDataProj || extentFromProjection(this.resolvedDataProjection)\n        const maxZoom = this.maxZoom\n        const minZoom = this.minZoom\n        const maxResolution = this.maxResolution\n        const tileSize = this.inputTileSize\n\n        return () => createXYZ({ extent, maxZoom, minZoom, maxResolution, tileSize })\n      },\n      extentDataProj () {\n        return roundExtent(this.extent)\n      },\n      extentViewProj () {\n        return this.extentToViewProj(this.extent)\n      },\n      formatIdent () {\n        if (!this.olObjIdent) return\n\n        return this.makeIdent(this.olObjIdent, 'format')\n      },\n      inputFormatFactory () {\n        return sealFactory(::this.formatFactory)\n      },\n      inputTileUrlFunction () {\n        const urlFunc = coalesce(this.tileUrlFunction, this.tileUrlFunc)\n        if (isFunction(urlFunc)) return urlFunc\n        if (this.currentUrls.length === 0) return\n\n        return createTileUrlFunctionFromTemplates(this.currentUrls, this.tileGrid)\n      },\n    },\n    watch: {\n      formatIdent (value, prevValue) {\n        if (value && prevValue) {\n          this.moveInstance(value, prevValue)\n        } else if (value && !prevValue && this.format) {\n          this.setInstance(value, this.format)\n        } else if (!value && prevValue) {\n          this.unsetInstance(prevValue)\n        }\n      },\n      inputFormatFactory (value) {\n        while (this.hasInstance(this.formatIdent)) {\n          this.unsetInstance(this.formatIdent)\n        }\n\n        if (isFunction(value)) {\n          this.format = this.instanceFactoryCall(this.formatIdent, this::value)\n        } else {\n          this.format = undefined\n        }\n      },\n      .../*#__PURE__*/makeChangeOrRecreateWatchers([\n        'extentViewProj',\n        'overlaps',\n        'tileClass',\n      ], [\n        'extentViewProj',\n      ]),\n    },\n    created () {\n      if (isFunction(this.inputFormatFactory)) {\n        this.format = this.instanceFactoryCall(this.formatIdent, ::this.inputFormatFactory)\n      }\n    },\n    methods: {\n      /**\n       * @return {VectorTileSource}\n       */\n      createSource () {\n        return new VectorTileSource({\n          // ol/source/Source\n          attributions: this.currentAttributions,\n          attributionsCollapsible: this.attributionsCollapsible,\n          projection: this.resolvedDataProjection,\n          state: this.currentState,\n          wrapX: this.wrapX,\n          // ol/source/Tile\n          cacheSize: this.cacheSize,\n          tileGrid: this.tileGrid,\n          transition: this.transition,\n          zDirection: this.zDirection,\n          // ol/source/UrlTile\n          tileLoadFunction: this.currentTileLoadFunction,\n          tileUrlFunction: this.currentTileUrlFunction,\n          // ol/source/VectorTile\n          format: this.format,\n          extent: this.extentViewProj,\n          overlaps: this.overlaps,\n          tileClass: this.tileClass,\n        })\n      },\n      /**\n       * @returns {void}\n       */\n      subscribeAll () {\n        this::urlTileSource.methods.subscribeAll()\n        this::subscribeToSourceEvents()\n      },\n      async getFeaturesInExtent (extent, viewProj = false) {\n        extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n\n        return (await this.resolveSource()).getFeaturesInExtent(extent)\n      },\n      async clear () {\n        (await this.resolveSource()).clear()\n      },\n      tileKeyChanged: noop,\n      opaqueChanged: noop,\n      tilePixelRatioChanged: noop,\n    },\n  }\n\n  function subscribeToSourceEvents () {\n    this.subscribeTo(obsFromOlEvent(this.$source, TileEventType.TILELOADEND), evt => {\n      if (!evt.tile) return\n\n      forEach(evt.tile.getFeatures(), feature => {\n        if (!(feature instanceof Feature)) return\n        this.initializeFeature(feature)\n      })\n    })\n  }\n</script>\n","import { pick } from '../../utils'\nimport Source from './source.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Source, options)\n\n  Vue.component(Source.name, Source)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Source,\n}\n","\nimport { getHeight as getExtentHeight, getWidth as getExtentWidth } from 'ol/extent'\nimport ExtentCorner from 'ol/extent/Corner'\nimport { toSize } from 'ol/size'\nimport { WMTS as WMTSSource } from 'ol/source'\nimport { DEFAULT_MAX_ZOOM, DEFAULT_TILE_SIZE } from 'ol/tilegrid/common'\nimport WMTSTileGrid from 'ol/tilegrid/WMTS'\nimport { makeChangeOrRecreateWatchers, tileImageSource } from '../../mixins'\nimport { extentFromProjection, getCorner as getExtentCorner, roundExtent, roundPointCoords } from '../../ol-ext'\nimport { coalesce, isArray, isFunction, isNumber, noop, range } from '../../utils'\n\nexport default {\n  name: 'VlSourceWmts',\n  mixins: [\n    tileImageSource,\n  ],\n  props: {\n    // ol/source/WMTS\n    layerName: {\n      type: String,\n      required: true,\n    },\n    styleName: {\n      type: String,\n      required: true,\n    },\n    matrixSet: {\n      type: String,\n      required: true,\n    },\n    dimensions: Object,\n    format: {\n      type: String,\n      default: 'image/jpeg',\n    },\n    requestEncoding: {\n      type: String,\n      default: 'KVP',\n    },\n    version: {\n      type: String,\n      default: '1.0.0',\n    },\n    // custom\n    extent: {\n      type: Array,\n      validator: value => value.length === 4 && value.every(isNumber),\n    },\n    resolutions: {\n      type: Array,\n      validator: value => value.every(isNumber),\n    },\n    origin: {\n      type: Array,\n      validator: value => value.length === 2 && value.every(isNumber),\n    },\n    matrixIds: {\n      type: Array,\n      validator: value => value.every(isNumber),\n    },\n    maxZoom: {\n      type: Number,\n      default: DEFAULT_MAX_ZOOM,\n    },\n    minZoom: {\n      type: Number,\n      default: 0,\n    },\n    tileSize: {\n      type: [Number, Array],\n      default: () => [DEFAULT_TILE_SIZE, DEFAULT_TILE_SIZE],\n    },\n  },\n  computed: {\n    extentDataProj () {\n      return roundExtent(this.extent)\n    },\n    extentViewProj () {\n      return this.extentToViewProj(this.extent)\n    },\n    originDataProj () {\n      return roundPointCoords(this.origin)\n    },\n    originViewProj () {\n      return this.pointToViewProj(this.origin)\n    },\n    inputTileSize () {\n      return isArray(this.tileSize) ? this.tileSize : [this.tileSize, this.tileSize]\n    },\n    derivedTileGridFactory () {\n      if (isFunction(this.tileGridFactory)) {\n        return this.tileGridFactory\n      }\n\n      const extent = this.extentDataProj || extentFromProjection(this.resolvedDataProjection)\n      const resolutions = this.resolutions || resolutionsFromExtent(extent, this.maxZoom, this.inputTileSize)\n      const origin = this.originDataProj || getExtentCorner(extent, ExtentCorner.TOP_LEFT)\n      const matrixIds = this.matrixIds || range(this.minZoom, resolutions.length)\n      const tileSize = this.inputTileSize\n      const minZoom = this.minZoom\n\n      return () => (new WMTSTileGrid({ extent, origin, resolutions, minZoom, matrixIds, tileSize }))\n    },\n    inputTileUrlFunction: noop,\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'dimensions',\n      'format',\n      'layerName',\n      'styleName',\n      'matrixSet',\n      'requestEncoding',\n      'version',\n    ], [\n      'dimensions',\n    ]),\n  },\n  methods: {\n    /**\n     * @returns {WMTS}\n     * @protected\n     */\n    createSource () {\n      return new WMTSSource({\n        // ol/source/Source\n        attributions: this.currentAttributions,\n        projection: this.resolvedDataProjection,\n        wrapX: this.wrapX,\n        // ol/source/Tile\n        cacheSize: this.cacheSize,\n        tileGrid: this.tileGrid,\n        tilePixelRatio: this.tilePixelRatio,\n        transition: this.transition,\n        // ol/source/UrlTile\n        urls: this.currentUrls,\n        tileLoadFunction: this.currentTileLoadFunction,\n        // ol/source/TileImage\n        crossOrigin: this.crossOrigin,\n        reprojectionErrorThreshold: this.reprojectionErrorThreshold,\n        tileClass: this.tileClass,\n        imageSmoothing: this.imageSmoothing,\n        // ol/source/WMTS\n        dimensions: this.dimensions,\n        format: this.format,\n        layer: this.layerName,\n        style: this.styleName,\n        matrixSet: this.matrixSet,\n        requestEncoding: this.requestEncoding,\n        version: this.version,\n      })\n    },\n    getDimensions () {\n      return coalesce(this.$source?.getDimensions(), this.dimensions)\n    },\n    getFormat () {\n      return coalesce(this.$source?.getFormat(), this.format)\n    },\n    getLayer () {\n      return coalesce(this.$source?.getLayer(), this.layerName)\n    },\n    getMatrixSet () {\n      return coalesce(this.$source?.getMatrixSet(), this.matrixSet)\n    },\n    getRequestEncoding () {\n      return coalesce(this.$source?.getRequestEncoding(), this.requestEncoding)\n    },\n    getStyle () {\n      return coalesce(this.$source?.getStyle(), this.styleName)\n    },\n    getVersion () {\n      return coalesce(this.$source?.getVersion(), this.version)\n    },\n    attributionsCollapsibleChanged: noop,\n    stateChanged: noop,\n    tileKeyChanged: noop,\n    opaqueChanged: noop,\n    zDirectionChanged: noop,\n    inputTileUrlFunctionChanged: noop,\n  },\n}\n\nfunction resolutionsFromExtent (extent, maxZoom, tileSize, maxResolution) {\n  maxZoom = maxZoom !== undefined ? maxZoom : DEFAULT_MAX_ZOOM\n\n  const height = getExtentHeight(extent)\n  const width = getExtentWidth(extent)\n\n  tileSize = toSize(tileSize !== undefined ? tileSize : DEFAULT_TILE_SIZE)\n  maxResolution = maxResolution > 0\n    ? maxResolution\n    : Math.max(width / tileSize[0], height / tileSize[1])\n\n  const length = maxZoom + 1\n  const resolutions = new Array(length)\n  for (let z = 0; z < length; ++z) {\n    resolutions[z] = maxResolution / Math.pow(2, z)\n  }\n\n  return resolutions\n}\n","/**\n * @module ol/tilegrid/common\n */\n/**\n * Default maximum zoom for default tile grids.\n * @type {number}\n */\nexport var DEFAULT_MAX_ZOOM = 42;\n/**\n * Default tile size.\n * @type {number}\n */\nexport var DEFAULT_TILE_SIZE = 256;\n//# sourceMappingURL=common.js.map","<script>\n  import { getHeight as getExtentHeight, getWidth as getExtentWidth } from 'ol/extent'\n  import ExtentCorner from 'ol/extent/Corner'\n  import { toSize } from 'ol/size'\n  import { WMTS as WMTSSource } from 'ol/source'\n  import { DEFAULT_MAX_ZOOM, DEFAULT_TILE_SIZE } from 'ol/tilegrid/common'\n  import WMTSTileGrid from 'ol/tilegrid/WMTS'\n  import { makeChangeOrRecreateWatchers, tileImageSource } from '../../mixins'\n  import { extentFromProjection, getCorner as getExtentCorner, roundExtent, roundPointCoords } from '../../ol-ext'\n  import { coalesce, isArray, isFunction, isNumber, noop, range } from '../../utils'\n\n  export default {\n    name: 'VlSourceWmts',\n    mixins: [\n      tileImageSource,\n    ],\n    props: {\n      // ol/source/WMTS\n      layerName: {\n        type: String,\n        required: true,\n      },\n      styleName: {\n        type: String,\n        required: true,\n      },\n      matrixSet: {\n        type: String,\n        required: true,\n      },\n      dimensions: Object,\n      format: {\n        type: String,\n        default: 'image/jpeg',\n      },\n      requestEncoding: {\n        type: String,\n        default: 'KVP',\n      },\n      version: {\n        type: String,\n        default: '1.0.0',\n      },\n      // custom\n      extent: {\n        type: Array,\n        validator: value => value.length === 4 && value.every(isNumber),\n      },\n      resolutions: {\n        type: Array,\n        validator: value => value.every(isNumber),\n      },\n      origin: {\n        type: Array,\n        validator: value => value.length === 2 && value.every(isNumber),\n      },\n      matrixIds: {\n        type: Array,\n        validator: value => value.every(isNumber),\n      },\n      maxZoom: {\n        type: Number,\n        default: DEFAULT_MAX_ZOOM,\n      },\n      minZoom: {\n        type: Number,\n        default: 0,\n      },\n      tileSize: {\n        type: [Number, Array],\n        default: () => [DEFAULT_TILE_SIZE, DEFAULT_TILE_SIZE],\n      },\n    },\n    computed: {\n      extentDataProj () {\n        return roundExtent(this.extent)\n      },\n      extentViewProj () {\n        return this.extentToViewProj(this.extent)\n      },\n      originDataProj () {\n        return roundPointCoords(this.origin)\n      },\n      originViewProj () {\n        return this.pointToViewProj(this.origin)\n      },\n      inputTileSize () {\n        return isArray(this.tileSize) ? this.tileSize : [this.tileSize, this.tileSize]\n      },\n      derivedTileGridFactory () {\n        if (isFunction(this.tileGridFactory)) {\n          return this.tileGridFactory\n        }\n\n        const extent = this.extentDataProj || extentFromProjection(this.resolvedDataProjection)\n        const resolutions = this.resolutions || resolutionsFromExtent(extent, this.maxZoom, this.inputTileSize)\n        const origin = this.originDataProj || getExtentCorner(extent, ExtentCorner.TOP_LEFT)\n        const matrixIds = this.matrixIds || range(this.minZoom, resolutions.length)\n        const tileSize = this.inputTileSize\n        const minZoom = this.minZoom\n\n        return () => (new WMTSTileGrid({ extent, origin, resolutions, minZoom, matrixIds, tileSize }))\n      },\n      inputTileUrlFunction: noop,\n    },\n    watch: {\n      .../*#__PURE__*/makeChangeOrRecreateWatchers([\n        'dimensions',\n        'format',\n        'layerName',\n        'styleName',\n        'matrixSet',\n        'requestEncoding',\n        'version',\n      ], [\n        'dimensions',\n      ]),\n    },\n    methods: {\n      /**\n       * @returns {WMTS}\n       * @protected\n       */\n      createSource () {\n        return new WMTSSource({\n          // ol/source/Source\n          attributions: this.currentAttributions,\n          projection: this.resolvedDataProjection,\n          wrapX: this.wrapX,\n          // ol/source/Tile\n          cacheSize: this.cacheSize,\n          tileGrid: this.tileGrid,\n          tilePixelRatio: this.tilePixelRatio,\n          transition: this.transition,\n          // ol/source/UrlTile\n          urls: this.currentUrls,\n          tileLoadFunction: this.currentTileLoadFunction,\n          // ol/source/TileImage\n          crossOrigin: this.crossOrigin,\n          reprojectionErrorThreshold: this.reprojectionErrorThreshold,\n          tileClass: this.tileClass,\n          imageSmoothing: this.imageSmoothing,\n          // ol/source/WMTS\n          dimensions: this.dimensions,\n          format: this.format,\n          layer: this.layerName,\n          style: this.styleName,\n          matrixSet: this.matrixSet,\n          requestEncoding: this.requestEncoding,\n          version: this.version,\n        })\n      },\n      getDimensions () {\n        return coalesce(this.$source?.getDimensions(), this.dimensions)\n      },\n      getFormat () {\n        return coalesce(this.$source?.getFormat(), this.format)\n      },\n      getLayer () {\n        return coalesce(this.$source?.getLayer(), this.layerName)\n      },\n      getMatrixSet () {\n        return coalesce(this.$source?.getMatrixSet(), this.matrixSet)\n      },\n      getRequestEncoding () {\n        return coalesce(this.$source?.getRequestEncoding(), this.requestEncoding)\n      },\n      getStyle () {\n        return coalesce(this.$source?.getStyle(), this.styleName)\n      },\n      getVersion () {\n        return coalesce(this.$source?.getVersion(), this.version)\n      },\n      attributionsCollapsibleChanged: noop,\n      stateChanged: noop,\n      tileKeyChanged: noop,\n      opaqueChanged: noop,\n      zDirectionChanged: noop,\n      inputTileUrlFunctionChanged: noop,\n    },\n  }\n\n  function resolutionsFromExtent (extent, maxZoom, tileSize, maxResolution) {\n    maxZoom = maxZoom !== undefined ? maxZoom : DEFAULT_MAX_ZOOM\n\n    const height = getExtentHeight(extent)\n    const width = getExtentWidth(extent)\n\n    tileSize = toSize(tileSize !== undefined ? tileSize : DEFAULT_TILE_SIZE)\n    maxResolution = maxResolution > 0\n      ? maxResolution\n      : Math.max(width / tileSize[0], height / tileSize[1])\n\n    const length = maxZoom + 1\n    const resolutions = new Array(length)\n    for (let z = 0; z < length; ++z) {\n      resolutions[z] = maxResolution / Math.pow(2, z)\n    }\n\n    return resolutions\n  }\n</script>\n","import { pick } from '../../utils'\nimport Source from './source.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Source, options)\n\n  Vue.component(Source.name, Source)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Source,\n}\n","\nimport { xyzSource } from '../../mixins'\n\nexport default {\n  name: 'VlSourceXyz',\n  mixins: [\n    xyzSource,\n  ],\n}\n","import { pick } from '../../utils'\nimport Source from './source.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Source, options)\n\n  Vue.component(Source.name, Source)\n}\n\nexport default plugin\n\nexport {\n  plugin as install,\n  Source,\n}\n","import {\n  BingmapsSource,\n  ClusterSource,\n  DrawInteraction,\n  Feature,\n  Geoloc,\n  GraticuleLayer,\n  GroupLayer,\n  HeatmapLayer,\n  ImageArcgisRestSource,\n  ImageLayer,\n  ImageStaticSource,\n  ImageWmsSource,\n  Map,\n  MapboxSource,\n  MapboxVectorLayer,\n  ModifyInteraction,\n  OsmSource,\n  Overlay,\n  RotateInteraction,\n  SelectInteraction,\n  SnapInteraction,\n  SputnikSource,\n  StamenSource,\n  Style,\n  StyleFunc,\n  TileArcgisRestSource,\n  TileLayer,\n  TileWmsSource,\n  TranslateInteraction,\n  VectorImageLayer,\n  VectorLayer,\n  VectorSource,\n  VectorTileLayer,\n  VectorTileSource,\n  WmtsSource,\n  XyzSource,\n} from './components'\nimport './styles/main.scss'\n\n/**\n * @const {string} VueLayers version.\n */\nexport const VERSION = 'C_PKG_VERSION'\n\n/**\n * @typedef {Object} VueLayersOptions\n * @property {string} [dataProjection] Projection for all properties, events and other plain values.\n */\n/**\n * Registers all VueLayers components.\n * @param {Vue|VueConstructor} Vue\n * @param {VueLayersOptions} [options]\n */\nexport default function plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  // install components\n  Vue.use(BingmapsSource, options)\n  Vue.use(ClusterSource, options)\n  Vue.use(DrawInteraction, options)\n  Vue.use(Feature, options)\n  Vue.use(Geoloc, options)\n  Vue.use(GraticuleLayer, options)\n  Vue.use(GroupLayer, options)\n  Vue.use(HeatmapLayer, options)\n  Vue.use(ImageArcgisRestSource, options)\n  Vue.use(ImageLayer, options)\n  Vue.use(ImageStaticSource, options)\n  Vue.use(ImageWmsSource, options)\n  Vue.use(Map, options)\n  Vue.use(MapboxSource, options)\n  Vue.use(MapboxVectorLayer, options)\n  Vue.use(ModifyInteraction, options)\n  Vue.use(OsmSource, options)\n  Vue.use(Overlay, options)\n  Vue.use(RotateInteraction, options)\n  Vue.use(SelectInteraction, options)\n  Vue.use(SnapInteraction, options)\n  Vue.use(SputnikSource, options)\n  Vue.use(StamenSource, options)\n  Vue.use(Style, options)\n  Vue.use(StyleFunc, options)\n  Vue.use(TileArcgisRestSource, options)\n  Vue.use(TileLayer, options)\n  Vue.use(TileWmsSource, options)\n  Vue.use(TranslateInteraction, options)\n  Vue.use(VectorImageLayer, options)\n  Vue.use(VectorLayer, options)\n  Vue.use(VectorSource, options)\n  Vue.use(VectorTileLayer, options)\n  Vue.use(VectorTileSource, options)\n  Vue.use(WmtsSource, options)\n  Vue.use(XyzSource, options)\n}\n\nexport {\n  plugin as install,\n  // components\n  BingmapsSource,\n  ClusterSource,\n  DrawInteraction,\n  Feature,\n  Geoloc,\n  GraticuleLayer,\n  GroupLayer,\n  HeatmapLayer,\n  ImageArcgisRestSource,\n  ImageLayer,\n  ImageStaticSource,\n  ImageWmsSource,\n  Map,\n  MapboxSource,\n  MapboxVectorLayer,\n  ModifyInteraction,\n  OsmSource,\n  Overlay,\n  RotateInteraction,\n  SelectInteraction,\n  SnapInteraction,\n  SputnikSource,\n  StamenSource,\n  Style,\n  StyleFunc,\n  TileArcgisRestSource,\n  TileLayer,\n  TileWmsSource,\n  TranslateInteraction,\n  VectorImageLayer,\n  VectorLayer,\n  VectorSource,\n  VectorTileLayer,\n  VectorTileSource,\n  WmtsSource,\n  XyzSource,\n}\n","import * as VueLayers from './index'\nimport * as mixins from './mixins'\nimport * as olExt from './ol-ext'\nimport * as rxExt from './rx-ext'\nimport * as utils from './utils'\n\nexport default {\n  ...VueLayers,\n  mixins,\n  olExt,\n  rxExt,\n  utils,\n}\n\nif (typeof window.Vue !== 'undefined') {\n  window.Vue.use(VueLayers)\n}\n"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_classCallCheck","instance","Constructor","TypeError","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_inherits","subClass","superClass","prototype","create","constructor","_typeof","Symbol","iterator","module","exports","_possibleConstructorReturn","call","assertThisInitialized","_getPrototypeOf","getPrototypeOf","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","e","_construct","Parent","args","Class","isNativeReflectConstruct","a","push","apply","Function","bind","arguments","_wrapNativeSuper","_cache","Map","undefined","fn","toString","indexOf","has","get","set","Wrapper","this","runtime","Op","hasOwn","hasOwnProperty","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","err","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","GenStateSuspendedStart","method","arg","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","name","mark","awrap","async","Promise","iter","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","rangeIterator","globIsFinite","global","window","isFinite","noop","objectProto","funcProto","objectToString","objectHasOwnProp","funcToString","objectTag","numberTag","stringTag","booleanTag","objectCtorString","constant","stubArray","stubObject","stubTrue","identity","negate","func","or","funcs","reduce","and","isBoolean","isNumber","isString","isArray","Array","isArrayLike","isObjectLike","isCollection","Collection","isFunction","isNumeric","parseFloat","isPlainObject","proto","Ctor","round","number","precision","Number","toFixed","coalesce","find","val","replaceTokens","string","replaces","regExp","RegExp","map","field","join","replace","match","substr","isEqual","other","valueProps","otherProps","checked","traverse","l","valueProp","includes","otherProp","getLength","getArray","isEmpty","filter","seal","freeze","sealFactory","factory","sealed","collection","iteratee","initial","newCollection","res","every","pick","concat","picked","omit","upperFirst","String","toUpperCase","lowerFirst","toLowerCase","start","end","step","range","from","path","defaultValue","travel","regexp","split","hasProp","prop","array","comparator","elems","elem","shift","difference","array1","array2","camelCase","str","matches","kebabCase","x","serialize","JSON","stringify","unserialize","parse","clonePlainObject","addPrefix","prefix","AssertionError","message","_this","captureStackTrace","stack","assert","instanceOf","msg","_defineProperties","target","props","descriptor","_createClass","protoProps","staticProps","IdentityMap","pool","_pools","id","_preparePool","refs","rec","fromId","toId","_arrayLikeToArray","arr","len","arr2","_unsupportedIterableToArray","minLen","arrayLikeToArray","n","test","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","log","makeLog","warn","makeWarn","makeError","newLogger","trim","console","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","dest","src","redefine","getOwnPropertyNames","getOwnPropertyDescriptor","mergeDescriptors","baseMergeDescriptors","makeWatchers","watcherFactory","hash","extractChildren","slots","slotNames","all","extendStatics","d","b","__extends","__","_enable_super_gross_mode_that_will_cause_bad_things","config","useDeprecatedSynchronousErrorHandling","hostReportError","setTimeout","empty","closed","isObject","UnsubscriptionError","UnsubscriptionErrorImpl","errors","Subscription","unsubscribe","_parentOrParents","_subscriptions","_ctorUnsubscribe","_unsubscribe","_a","remove","index","flattenUnsubscriptionErrors","sub","add","teardown","subscription","EMPTY","tmp","subscriptions","subscriptionIndex","splice","errs","rxSubscriber","Math","random","Subscriber","_super","destinationOrNext","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","destination","emptyObserver","SafeSubscriber","tslib_1.__extends","rxSubscriberSymbol","subscriber","_error","_complete","_unsubscribeAndRecycle","_parentSubscriber","observerOrNext","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","parent","observable","pipeFromArray","fns","input","Observable","subscribe","_isScalar","_subscribe","lift","operator","source","sink","nextOrObserver","toSubscriber","_trySubscribe","observer","closed_1","canReportError","promiseCtor","getPromiseCtor","Symbol_observable","pipe","operations","_i","toPromise","ObjectUnsubscribedError","ObjectUnsubscribedErrorImpl","SubjectSubscription","subject","observers","subscriberIndex","SubjectSubscriber","Subject","hasError","thrownError","AnonymousSubject","copy","asObservable","refCount","RefCountOperator","connectable","_refCount","refCounter","RefCountSubscriber","connection","connect","sharedConnection","_connection","ConnectableObservable","subjectFactory","_isComplete","getSubject","_subject","ConnectableSubscriber","higherOrderRefCount","connectableObservableDescriptor","connectableProto","AsyncAction","scheduler","work","pending","schedule","delay","recycleAsyncId","requestAsyncId","setInterval","flush","clearInterval","execute","_execute","errored","errorValue","actions","Action","QueueAction","Scheduler","SchedulerAction","now","Date","AsyncScheduler","active","scheduled","action","queue","QueueScheduler","emptyScheduled","isScheduler","subscribeToArray","scheduleArray","fromArray","of","throwError","dispatch","Notification","kind","hasValue","observe","do","accept","toObservable","createNext","undefinedValueNotification","createError","createComplete","completeNotification","ObserveOnSubscriber","notification","scheduleMessage","ObserveOnMessage","ReplaySubject","bufferSize","windowTime","POSITIVE_INFINITY","_events","_infiniteTimeWindow","_bufferSize","_windowTime","nextInfiniteTimeWindow","nextTimeWindow","ReplayEvent","_getNow","_trimBufferThenGetEvents","eventsCount","spliceCount","time","max","ArgumentOutOfRangeError","ArgumentOutOfRangeErrorImpl","EmptyError","EmptyErrorImpl","TimeoutError","TimeoutErrorImpl","project","thisArg","MapOperator","MapSubscriber","count","OuterSubscriber","notifyNext","outerValue","innerValue","outerIndex","innerIndex","innerSub","notifyError","notifyComplete","InnerSubscriber","getSymbolIterator","isPromise","subscribeTo","obs","promise","Symbol_iterator","item","return","subscribeToResult","outerSubscriber","innerSubscriber","isInteropObservable","scheduleObservable","schedulePromise","isIterable","scheduleIterable","SimpleInnerSubscriber","SimpleOuterSubscriber","innerSubscribe","mergeMap","resultSelector","concurrent","ii","MergeMapOperator","MergeMapSubscriber","hasCompleted","buffer","_tryNext","_innerSub","ish","innerSubscription","mergeAll","fromEventPattern","addHandler","removeHandler","retValue","handler","interval","period","counter","merge","observables","last","NEVER","predicate","FilterOperator","FilterSubscriber","race","RaceOperator","RaceSubscriber","hasFirst","_outerValue","CatchOperator","selector","CatchSubscriber","err2","debounceTime","dueTime","DebounceTimeOperator","DebounceTimeSubscriber","debouncedSubscription","lastValue","clearDebounce","dispatchNext","debouncedNext","defaultIfEmpty","DefaultIfEmptyOperator","DefaultIfEmptySubscriber","isDate","DelayOperator","DelaySubscriber","delay_1","_schedule","scheduleNotification","DelayMessage","DelayWhenOperator","delayDurationSelector","DelayWhenSubscriber","completed","delayNotifierSubscriptions","_innerValue","_outerIndex","_innerIndex","removeSubscription","tryComplete","delayNotifier","tryDelay","subscriptionIdx","notifierSubscription","SubscriptionDelayObservable","subscriptionDelay","SubscriptionDelaySubscriber","sourceSubscribed","unused","subscribeToSource","distinctUntilChanged","compare","keySelector","DistinctUntilChangedOperator","DistinctUntilChangedSubscriber","hasKey","y","distinctUntilKeyChanged","throwIfEmpty","errorFactory","defaultErrorFactory","ThrowIfEmptyOperator","ThrowIfEmptySubscriber","take","TakeOperator","total","TakeSubscriber","first","hasDefaultValue","v","mapTo","MapToOperator","MapToSubscriber","MulticastOperator","publishReplay","selectorOrScheduler","subjectOrSubjectFactory","multicast","retry","RetryOperator","RetrySubscriber","skipUntil","notifier","SkipUntilOperator","SkipUntilSubscriber","skipWhile","SkipWhileOperator","SkipWhileSubscriber","skipping","tryCallPredicate","switchMap","SwitchMapOperator","SwitchMapSubscriber","tap","DoOperator","TapSubscriber","_tapNext","_tapError","_tapComplete","TimeoutWithOperator","waitFor","absoluteTimeout","withObservable","TimeoutWithSubscriber","scheduleTimeout","dispatchTimeout","timeout","due","abs","timeoutWith","WaitCancelError","WaitTimeoutError","_this2","condition","breakOn","defCond","success","intervalObs","skipWhileObs","skipUntilObs","firstObs","failed","NEVER_OBS","switchMapObs","throwErrorObs","raceObs","timeoutObs","getRandomValues","_execPromise","newObject","freezed","rnds8","Uint8Array","rng","crypto","msCrypto","validate","uuid","REGEX","byteToHex","v4","options","buf","offset","rnds","getControlId","control","Control","setControlId","controlId","initializeControl","defaultControlId","POINT","LINE_STRING","LINEAR_RING","POLYGON","MULTI_POINT","MULTI_LINE_STRING","MULTI_POLYGON","GEOMETRY_COLLECTION","CIRCLE","COORD_PRECISION","roundExtent","extent","roundPointCoords","coordinates","roundLineCoords","point","roundPolygonCoords","line","roundMultiPolygonCoords","polygon","roundCoords","geomType","GeometryType","isEqualCoord","calcDistance","point1","point2","dx","dy","squared","sqrt","isPointCoords","isLineCoords","isPolygonCoords","isMultiPointCoords","isMultiLineCoords","isMultiPolygonCoords","multiPolygon","createOrUpdate","minX","minY","maxX","maxY","getCorner","corner","coordinate","Corner","getBottomLeft","getBottomRight","getTopLeft","getTopRight","_get","property","receiver","base","superPropBase","desc","earthRadius","factors","meters","metres","millimeters","millimetres","centimeters","centimetres","kilometers","kilometres","miles","nauticalmiles","inches","yards","feet","radians","degrees","feature","geometry","properties","bbox","validateBBox","validateId","feat","featureCollection","features","fc","degreesToRadians","PI","num","coordEach","geojson","callback","excludeWrapCoord","j","k","stopG","coords","geometryMaybeCollection","isGeometryCollection","wrapShrink","coordIndex","isFeatureCollection","isFeature","featureIndex","geometries","geomIndex","multiFeatureIndex","geometryIndex","featureEach","explode","points","coord","center","ext","BBox","Infinity","clone","cloneFeature","cloned","cloneFeatureCollection","cloneGeometry","cloneProperties","geom","deepSlice","getCoord","distance","to","units","coordinates1","coordinates2","dLat","dLon","lat1","lat2","pow","sin","cos","factor","radiansToLength","atan2","booleanPointInPolygon","ignoreBoundary","pt","polys","getCoords","inBBox","insidePoly","inRing","inHole","ring","isInside","xi","yi","xj","yj","pointOnFeature","normalize","cent","centroid","onSurface","onLine","onMultiPoint","pointOnSegment","vertices","targetPoint","nearest","minDist","distanceToPoint","nearestPoint","x1","y1","x2","y2","createPointGeom","lonOrCoordinates","lat","Point","createCircularPolygon","radius","circularPolygon","toSimpleGeom","Circle","getCenter","getType","getGeometries","findPointOnSurface","simpleGeom","pointFeature","getCoordinates","getGeometryId","Geometry","setGeometryId","geometryId","initializeGeometry","defaultGeometryId","isCircleGeom","getGeomType","EPSG_4326","EPSG_3857","pointToLonLat","projection","toLonLat","pointFromLonLat","fromLonLat","transformPoint","sourceProjection","destProjection","transform","baseTransform","some","lineToLonLat","lineFromLonLat","transformLine","polygonToLonLat","polygonFromLonLat","transformPolygon","multiPointToLonLat","multiPointFromLonLat","transformMultiPoint","multiLineToLonLat","multiLineFromLonLat","transformMultiLine","multiPolygonToLonLat","multiPolygonFromLonLat","transformMultiPolygon","transforms","transformExtent","baseTransformExtent","transformDistance","rgb2hsl","rgb2hsv","rgb2hwb","rgb2cmyk","rgb2keyword","rgb2xyz","rgb2lab","rgb2lch","lab2lch","hsl2rgb","hsl2hsv","hsl","h","s","hsl2hwb","hsl2cmyk","hsl2keyword","hsv2rgb","hsv2hsl","hsv","sl","hsv2hwb","hsv2cmyk","hsv2keyword","hwb2rgb","hwb2hsl","hwb2hsv","hwb2cmyk","hwb2keyword","cmyk2rgb","cmyk2hsl","cmyk2hsv","cmyk2hwb","cmyk2keyword","keyword2rgb","keyword2hsl","keyword2hsv","keyword2hwb","keyword2cmyk","keyword2lab","keyword2xyz","xyz2rgb","xyz2lab","xyz2lch","lab2xyz","lab2rgb","lch2lab","lch2xyz","lch2rgb","rgb","r","g","min","delta","reverseKeywords","xyz","z","t1","t2","t3","hi","floor","f","q","t","hwb","wh","bl","ratio","cmyk","c","m","lab","lch","hr","keyword","cssKeywords","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","convert","Converter","conversions","pair","exec","convs","routeSpace","space","getValues","setValues","vals","fspace","isStyle","style","Style","ImageStyle","Fill","Stroke","Text","getStyleId","setStyleId","styleId","initializeStyle","defaultStyleId","createStyle","vlStyle","geomReader","olStyle","text","createTextStyle","fill","createFillStyle","stroke","createStrokeStyle","image","createImageStyle","createGeomStyle","zIndex","renderer","normalizeColor","color","cstr","conv","parts","alpha","size","parseInt","hex","rgba","hsla","hsva","cmyka","parseColor","prefixKey","fillStyle","strokeStyle","imageStyle","RegularShape","radius1","radius2","angle","Icon","anchor","anchorOrigin","anchorXUnits","anchorYUnits","offsetOrigin","img","imgSize","crossOrigin","opacity","scale","rotation","rotateWithView","displacement","textStyle","textAlign","textBaseline","font","offsetX","offsetY","padding","maxAngle","overflow","placement","backgroundFill","backgroundStroke","dumpStyle","geomWriter","dumpFillStyle","getFill","dumpStrokeStyle","getStroke","dumpImageStyle","getImage","dumpTextStyle","getText","dumpGeomStyle","getGeometry","getZIndex","getColor","getWidth","getMiterLimit","getLineCap","getLineJoin","getLineDash","getLineDashOffset","common","getOpacity","getScale","getRotation","getRotateWithView","getDisplacement","anchor_","anchorOrigin_","anchorXUnits_","anchorYUnits_","offset_","offsetOrigin_","getSize","getSrc","crossOrigin_","getRadius","getPoints","getRadius2","getAngle","getTextAlign","getTextBaseline","getFont","getOffsetX","getOffsetY","getPadding","getMaxAngle","getOverflow","getPlacement","getBackgroundFill","getBackgroundStroke","createGeoJsonFmt","GeoJSON","createMvtFmt","MVT","CIRCLE_SERIALIZE_PROP","STYLE_SERIALIZE_PROP","defaultDecimals","decimals","defaultStyleReader","styleReader","defaultStyleWriter","styleWriter","adaptOptions","LineString","featureProjection","getId","writeGeometryObject","dataProjection","getProperties","getGeometryName","Feature","writeFeatureObject","getStyle","geoJSONFeature","circle","readGeometryFromObject","geometryName_","setGeometryName","extractGeometryName_","geometry_name","setGeometry","setId","setStyle","_this3","isGeoJSONFeature","readFeatureFromObject","setProperties","_options$circle2","BaseGeoJSON","getGeoJsonFmt","writeGeoJsonFeature","readGeoJsonFeature","geoJsonFeature","readFeature","writeGeoJsonGeometry","geometryProjection","readGeoJsonGeometry","geoJsonGeometry","readProjection","readGeometry","geoJsonObj","defaultProjection","isGeoJSONGeometry","getFeatureId","setFeatureId","featureId","initializeFeature","defaultFeatureId","getFeatureGeomName","getFeatureProperties","setFeatureProperties","getInteractionId","interaction","Interaction","setInteractionId","interactionId","getInteractionPriority","setInteractionPriority","priority","initializeInteraction","defaultInteractionId","defaultPriority","getLayerId","layer","BaseLayer","setLayerId","layerId","initializeLayer","defaultLayerId","getMapId","PluggableMap","setMapId","mapId","getMapDataProjection","setMapDataProjection","getOverlayId","overlay","Overlay","setOverlayId","overlayId","initializeOverlay","defaultOverlay","getSourceId","Source","setSourceId","sourceId","initializeSource","defaultSourceId","cleanSourceParams","params","filterKeys","Units","METERS_PER_UNIT","extentFromProjection","getProjection","getExtent","half","getMetersPerUnit","getViewId","view","View","setViewId","viewId","initializeView","defaultViewId","expandUrl","url","urls","charCode","startCharCode","charCodeAt","stopCharCode","fromCharCode","stop1","polygonReducer","lineString","rings","Polygon","MultiPoint","lines","MultiLineString","polygons","MultiPolygon","geoms","GeometryCollection","fillColor","strokeColor","strokeWidth","imageRadius","styles","width","wait","lastCallAt","deferred","timer","pendingArgs","currentWait","getWait","currentTime","getTime","isCold","_len","_key","leading","accumulate","clearTimeout","defer","argsIndex","results","thisDeferred","PROPERTYCHANGE","isVueQuery","_isVueQuery","vm","$options","rawChildren","collected","$children","child","rawSiblings","withSelf","isRoot","$parent","$root","siblingsWithSort","direction","siblings","siblingsAllWithSort","siblingsUntilWithSort","until","$","_isVue","children","closest","_find","component","$c","is","nextAll","nextUntil","parents","_parents","parentsUntil","_parentsUntil","_prev","prevAll","prevUntil","fromOlEvent","eventName","pipeEach","mergeObs","event","on","un","mapObs","fromOlChangeEvent","distinct","fromVueEvent","$on","$off","fromVueWatcher","exprOrFn","$watch","previous","bufferDebounceTime","bufferedValues","EVENT_BUS_PROP","beforeCreate","Vue","bus","defineProperties","initEventBus","$eventBus","IDENTITY_MAP_PROP","INSTANCES_POOL","data","idents","imap","initIdentityMap","$identityMap","destroyed","unsetInstances","methods","makeIdent","instanceFactoryCall","ident","hasInstance","getInstance","inst","setInstance","unsetInstance","unset","moveInstance","fromIdent","toIdent","move","_rxSubs","unsubscribeAll","subscribeAll","subs","errorWrap","idx","SERVICES_PROP","inject","$services","provide","getServices","_provided","VM_PROP","FRAME_TIME","OlObjectState","UNDEF","CREATING","CREATED","MOUNTING","MOUNTED","UNMOUNTING","UNMOUNTED","DESTROYING","DESTROYED","OlObjectEvent","ERROR","OlObjectAction","CREATE","MOUNT","UNMOUNT","DESTROY","mixins","identMap","rxSubs","services","eventBus","default","validator","rev","currentId","computed","vmClass","vmId","vmName","olObjIdent","watch","$olObject","getIdInternal","makeChangeOrRecreateWatchers","created","_logger","_olObjectState","_olObject","_olObjectEvents","newOlObjectEventsObs","defineDebounceMethods","defineServices","execInit","mounted","execMount","beforeDestroy","execUnmount","execDeinit","_this4","beforeInit","init","_this5","createOlObject","changed","deinit","_this6","beforeMount","mount","unmount","refresh","_this7","resolveOlObject","olObj","once","scheduleRefresh","_this8","debounceRefresh","remount","_this9","$olObjectState","scheduleRemount","_this10","debounceRemount","recreate","_this11","scheduleRecreate","_this12","debounceRecreate","subscribeToOlObjectEvents","_this13","$createPromise","OLObjectNotInitializedError","$nextTickPromise","_this14","$nextTick","OlObject","setIdInternal","_this15","idChanged","currentIdChanged","$emit","olObjIdentChanged","prevValue","syncNonObservable","debounce","debounceChanged","$vq","VueQuery","_this16","$logger","$olObjectEvents","newLifecyclePromise","$mountPromise","$unmountPromise","$destroyPromise","_this17","filterObs","endEvent","startStates","newFinishObs","_this18","LifecycleError","CanceledError","evt","obsOf","resetEventsObs","prevState","lcErr","_context17","fireCancel","_context18","_context19","setterKey","propChanges","obsFromOlChangeEvent","setter","_this19","obsFromOlEvent","EventType","ObjectEventType","baseMessage","_this20","_this21","isCreateError","isMountError","_this22","deepProps","deep","cleanArcGisSourceParams","hidpi","format","layers","layerDefs","dynamicLayers","dpi","transparent","layerTimeOptions","gdbVersion","mapScale","datumTransformations","mapRangeValues","layerRangeValues","layerParameterValues","historicMoment","currentParams","inputLayers","inputTime","inputLayerDefs","inputDynamicLayers","inputLayerTimeOptions","inputDatumTransformations","inputMapRangeValues","inputLayerRangeValues","inputLayerParameterValues","inputHistoricMoment","customParams","inputParams","LAYERS","FORMAT","LAYERDEFS","DYNAMICLAYERS","DPI","TRANSPARENT","TIME","LAYERTIMEOPTIONS","GDBVERSION","MAPSCALE","ROTATION","DATUMTRANSFORMATIONS","MAPRANGEVALUES","LAYERRANGEVALUES","LAYERPARAMETERVALUES","HISTORICMOMENT","inProp","$source","getParams","curProp","_this$$source","updateParams","updateParam","param","inputParamsChanged","currentParamsChanged","resolvedViewProjection","viewProjection","resolvedDataProjection","_this$$options","resolvedViewProjectionChanged","resolvedDataProjectionChanged","pointToViewProj","pointToDataProj","lineToViewProj","lineToDataProj","polygonToViewProj","polygonToDataProj","multiPointToViewProj","multiPoint","multiPointToDataProj","multiLineToViewProj","multiLine","multiLineToDataProj","multiPolygonToViewProj","multiPolygonToDataProj","extentToViewProj","extentToDataProj","writeGeometryInDataProj","writeGeometryInViewProj","readGeometryInDataProj","readGeometryInViewProj","writeFeatureInDataProj","writeFeatureInViewProj","readFeatureInDataProj","readFeatureInViewProj","render","stubVNode","vnode","$slots","attrs","display","tag","_slicedToArray","arrayWithHoles","_arr","_n","_d","_e","_s","iterableToArrayLimit","nonIterableRest","$mapVm","obsFromVueEvent","obsFromVueWatcher","olCmp","projTransforms","waitForMap","class","className","visible","extentProjection","getProj","minResolution","maxResolution","minZoom","maxZoom","currentExtentViewProj","currentMaxResolution","currentMinResolution","currentMaxZoom","currentMinZoom","currentOpacity","currentVisible","currentZIndex","resolvedExtentProjection","extentDataProj","extentViewProj","currentExtentDataProj","$layer","getMaxResolution","getMinResolution","getMaxZoom","getMinZoom","getVisible","_this$extentViewProj","createLayer","$layersContainer","addLayer","removeLayer","subscribeToLayerEvents","resolveLayer","viewProj","setExtent","_this$$layer","setMaxResolution","resolution","_this$$layer2","setMinResolution","_this$$layer3","setMaxZoom","zoom","_this$$layer4","setMinZoom","_this$$layer5","setOpacity","_this$$layer6","setVisible","_this$$layer7","setZIndex","isAtPixel","pixel","forEachLayerAtPixel","mapLayer","opacityChanged","currentOpacityChanged","visibleChanged","currentVisibleChanged","extentViewProjChanged","currentExtentDataProjChanged","zIndexChanged","currentZIndexChanged","minResolutionChanged","currentMinResolutionChanged","maxResolutionChanged","currentMaxResolutionChanged","minZoomChanged","currentMinZoomChanged","maxZoomChanged","currentMaxZoomChanged","_this6$$services","mapVm","$viewVm","_this6$$services2","viewVm","_this6$$services3","layersContainer","controlsCollectionIdent","_controlsCollection","_controlSubs","subscribeToCollectionEvents","initDefaultControls","defaultControls","controls","getControls","removeControl","createDefaultControls","addControls","$control","addControl","getControlById","$controlsCollection","removeControls","clearControls","clear","getControlsCollection","controlsCollectionIdentChanged","events","CollectionEventType","element","uid","getUid","_geometry","_geometryVm","defineService","getGeometryTarget","_this$getGeometryTarg","getGeometryVm","$geometry","geomTarget","$geometryVm","_style","getDefaultStyle","getStyleTarget","_this$getStyleTarget","addStyle","$style","currentStyle","removeStyle","$styleFunction","createStyleFunc","styleTarget","defaultStyle","compiledStyle","geometryContainer","styleContainer","currentProperties","currentGeometryName","geometryDataProj","geometryViewProj","pointDataProj","pointViewProj","$feature","createFeature","_vm$$vq","_context2","$featuresContainer","addFeature","removeFeature","subscribeToEvents","resolveFeature","_this$$feature","geometryName","selfFeature","$layerVm","selfLayer","layerFilter","forEachFeatureAtPixel","propertiesChanged","currentPropertiesChanged","currentGeometryNameChanged","geometryDataProjChanged","pointDataProjChanged","styleChanged","_this7$$services","layerVm","_this7$$services2","_this7$$services3","featuresContainer","updateFeature","newFeature","_this$$mapVm","isInteracting","featureJson","newFeatureJson","featureHelper","featuresCollectionIdent","_featuresCollection","_featureSubs","addFeatures","foundFeature","getFeatureById","$featuresCollection","removeFeatures","clearFeatures","getFeatures","getFeaturesCollection","forEachFeature","forEachFeatureInExtent","intersectsExtent","forEachFeatureIntersectingExtent","getFeaturesAtCoordinate","getFeaturesInExtent","getClosestFeatureToCoordinate","closestFeature","minSquaredDistance","closestPoint","getClosestPoint","prevSquaredDistance","getFeaturesExtent","geomExtent","featuresCollectionIdentChanged","adds","dataProj","_json","_fill","_fillVm","getFillStyleTarget","_this$getFillStyleTar","getFillVm","setFill","fillTarget","$fill","$fillVm","createGeometry","$geometryContainer","subscribeToGeometryEvents","resolveGeometry","_this$$geometry","_this$$geometry2","intersectsCoordinate","rotate","sx","sy","simplify","tolerance","translate","extentDataProjChanged","_this12$$services","_this12$$services2","_this12$$services3","_source","_sourceVm","getSourceTarget","getSource","_this$getSourceTarget","getSourceVm","setSource","sourceTarget","$sourceVm","sourceContainer","baseLayer","setMap","getRenderer","$map","sourceChanged","sourceChanges","_sourceSubs","renderEvents","RenderEventType","UNDEFINED","LOADING","READY","validateAttributions","attributions","attributionsCollapsible","wrapX","SourceState","currentAttributions","adaptAttributions","currentState","inputAttributions","currentResolutions","getResolutions","getAttributions","getState","createSource","$sourceContainer","resolveSource","subscribeToSourceEvents","setAttributions","getAttributionsCollapsible","_this$$source2","_this$$source3","_this$$source4","getWrapX","_this$$source5","_this$$source6","inputAttributionsChanged","currentAttributionsChanged","stateChanged","currentStateChanged","currentResolutionsChanged","ImageSourceEventType","resolutions","inputResolutions","_this$resolutions","attributionsCollapsibleChanged","wrapXChanged","resolveStyle","$styleContainer","currentRotateWithView","currentRotation","currentScale","inputDisplacement","_this$displacement","setRotateWithView","setRotation","setScale","$imageStyleContainer","setImage","getImageVm","_this3$$imageStyleCon","_this$$style","_this$$style2","_this$$style3","_this$$style4","_this$$style5","rotateWithViewChanged","currentRotateWithViewChanged","rotationChanged","currentRotationChanged","scaleChanged","currentScaleChanged","_this4$$services","imageStyleContainer","_image","_imageVm","getImageStyleTarget","_this$getImageStyleTa","Image","imageTarget","$image","$imageVm","currentActive","currentPriority","interacting","$interaction","getActive","createInteraction","setActive","$interactionsContainer","addInteraction","removeInteraction","subscribeToInteractionEvents","resolveInteraction","_this$$interaction","getPriority","setPriority","sortInteractions","getMap","_this$$interaction2","setInteracting","flag","_this$$interaction3","activeChanged","currentActiveChanged","priorityChanged","currentPriorityChanged","_this5$$services","_this5$$services2","_this5$$services3","interactionsContainer","interactionsCollectionIdent","_interactionsCollection","_interactionSubs","initDefaultInteractions","defaultInteractions","interactions","getInteractions","createDefaultInteractions","addInteractions","getInteractionById","$interactionsCollection","removeInteractions","clearInteractions","getInteractionsCollection","sorter","getDefaultInteractionsSorter","sort","ap","bp","interactionsCollectionIdentChanged","layersCollectionIdent","_layersCollection","_layerSubs","addLayers","getLayerById","$layersCollection","removeLayers","clearLayers","getLayers","getLayersCollection","layersCollectionIdentChanged","overlaysCollectionIdent","_overlaysCollection","_overlaySubs","$overlay","addOverlays","overlays","addOverlay","getOverlayById","$overlaysCollection","removeOverlays","removeOverlay","clearOverlays","getOverlays","getOverlaysCollection","overlaysCollectionIdentChanged","_stroke","_strokeVm","getStrokeStyleTarget","_this$getStrokeStyleT","getStrokeVm","setStroke","strokeTarget","$stroke","$strokeVm","fillStyleContainer","strokeStyleContainer","_this2$$style","getAnchor","getOrigin","_this$$style6","_this$$style7","_this$$style8","_this$$style9","strokeChanged","fillChanged","required","currentCoordinatesViewProj","coordinatesDataProj","coordinatesViewProj","coordinatesToViewProj","currentCoordinatesDataProj","coordinatesToDataProj","boundingExtent","getCoordinatesTransformFunction","setCoordinates","getFirstCoordinate","getLastCoordinate","getLayout","GeometryLayout","coordinatesViewProjChanged","currentCoordinatesDataProjChanged","baseBoundingExtent","_text","_textVm","getTextStyleTarget","_this$getTextStyleTar","getTextVm","setText","textTarget","$text","$textVm","cacheSize","opaque","tilePixelRatio","tileGridFactory","transition","tileKey","zDirection","tileGrid","tileGridIdent","derivedTileGridFactory","inputTileGridFactory","getTileGrid","tileGridIdentChanged","inputTileGridFactoryChanged","isNotEmptyString","isArrayOfNotEmptyStrings","tileSource","tileLoadFunction","tileUrlFunc","tileUrlFunction","currentTileLoadFunction","currentTileUrlFunction","currentUrls","urlTokens","inputUrl","parsedUrls","tokens","inputUrls","inputTileUrlFunction","inputTileLoadFunction","getTileLoadFunction","getTileUrlFunction","getUrls","_this$inputUrls","updated","setTileLoadFunction","setTileUrlFunction","_this$inputUrls2","setUrls","setUrl","inputUrlsChanged","currentUrlsChanged","inputTileUrlFunctionChanged","currentTileUrlFunctionChanged","inputTileLoadFunctionChanged","currentTileLoadFunctionChanged","TileEventType","urlTileSource","reprojectionErrorThreshold","tileClass","imageSmoothing","setRenderReprojectionEdges","preload","useInterimTilesOnError","currentPreload","currentUseInterimTilesOnError","getPreload","getUseInterimTilesOnError","setPreload","setUseInterimTilesOnError","preloadChanged","currentPreloadChanged","useInterimTilesOnErrorChanged","currentUseInterimTilesOnErrorChanged","renderOrder","renderBuffer","declutter","updateWhileAnimating","updateWhileInteracting","formatFactory","loader","loaderFactory","loadingStrategy","strategyFactory","overlaps","useSpatialIndex","currentUrl","currentLoader","featuresDataProj","featuresViewProj","currentFeaturesDataProj","currentFeaturesViewProj","createUrlFunc","inputLoader","createLoaderFunc","inputLoadingStrategy","loadAll","formatIdent","inputFormatFactory","getUrl","VectorSource","strategy","newFeatures","featureKey","nullGeometryFeatures_","featuresRtree_","removeFeatureInternal","fast","getFormat","setLoader","removeLoadedExtent","wrapUrlFunc","urlFunc","wrapped","wrapLoaderFunc","loaderFunc","readSource","readFeatures","featuresViewProjChanged","currentFeaturesDataProjChanged","inputUrlChanged","currentUrlChanged","inputLoaderChanged","currentLoaderChanged","formatIdentChanged","inputFormatFactoryChanged","sourceProj","destProj","CARMENTA_SERVER","GEOSERVER","MAPSERVER","QGIS","cleanWmsSourceParams","serverType","WMSServerType","version","bgColor","inputStyles","STYLES","VERSION","BGCOLOR","getFeatureInfoUrl","_this$$viewVm","getResolution","getLegendUrl","zeroPad","places","zero","zRegEx","zPadRegEx","xRegEx","yRegEx","dashYRegEx","createTileUrlFunctionFromTemplate","template","createXYZ","tileCoord","zoomReplacer","coordReplacer","part","getFullTileRange","getHeight","createTileUrlFunctionFromTemplates","templates","createTileUrlFunctionFromTileUrlFunctions","pad","tileUrlFunctions","pixelRatio","modulo","ol","tileCacheUrlFn","createTileUrlFunction","validateTileSize","tileImageSource","tileSize","inputTileSize","XYZSource","tileKeyChanged","normalizeComponent","script","scopeId","isFunctionalTemplate","moduleIdentifier","shadowMode","createInjector","createInjectorSSR","createInjectorShadow","hook","staticRenderFns","_compiled","functional","_scopeId","$vnode","ssrContext","__VUE_SSR_CONTEXT__","_registeredComponents","_ssrRegister","shadowRoot","originalRender","existing","culture","apiKey","imagerySet","BingMapsSource","getApiKey","getImagerySet","projectionChanged","tileGridChanged","tilePixelRatioChanged","zDirectionChanged","crossOriginChanged","tileClassChanged","plugin","installed","assign","$innerSource","getInnerSource","$innerSourceVm","getInnerSourceVm","defaultGeomFunc","components","InnerSource","$innerSourceContainer","_this$$services","innerSourceContainer","_this2$$innerSourceCo","_this2$$innerSourceCo2","setInnerSource","vectorSource","geometryFunction","geomFunc","geomFuncFactory","currentDistance","inputGeometryFunction","innerSource","getDistance","setDistance","_innerSource","_innerSourceVm","ClusterSource","inputLoadingStrategyChanged","formatChanged","overlapsChanged","useSpatialIndexChanged","transformType","subscribeToInteractionChanges","sourceUpdObs","_this9$_source","_this9$_source$vm","delayFor","clickTolerance","snapTolerance","stopClick","maxPoints","minPoints","finishCondition","noModifierKeys","freehand","freehandCondition","shiftKeyOnly","dragVertexDelay","inputType","DrawInteraction","getOverlay","abortDrawing","finishDrawing","appendCoordinates","removeLastPoint","getPointerCount","simpleGeometry","radiusProjection","currentRadiusViewProj","resolvedRadiusProjection","radiusDataProj","radiusViewProj","radiusToViewProj","currentRadiusDataProj","radiusToDataProj","setRadius","setCenter","setCenterAndRadius","PointGeom","CircleGeom","LineStringGeom","PolygonGeom","MultiPointGeom","MultiLineStringGeom","MultiPolygonGeom","validateProjection","$geolocation","_this2$$services","_this2$$services2","subscribeToGeolocation","setPropsChanges","getCode","otherChanged","tracking","trackingOptions","currentTracking","currentTrackingOptions","currentProjection","accuracy","getAccuracy","accuracyGeometryDataProj","getAccuracyGeometry","accuracyGeometryViewProj","altitude","getAltitude","altitudeAccuracy","getAltitudeAccuracy","heading","getHeading","speed","getSpeed","positionDataProj","getPosition","positionViewProj","getTracking","getTrackingOptions","setTracking","tracingOptions","setTrackingOptions","setProjection","currentAltitude","geoloc","Geolocation","resolveGeolocation","_this$$geolocation","_this$$geolocation2","_this$$geolocation3","_this$$geolocation4","_this$$geolocation5","_this$$geolocation6","_this$$geolocation7","_this$$geolocation8","_this$$geolocation9","_this$$geolocation10","Geoloc","$fillStyleContainer","currentColor","inputColor","setColor","FillStyle","_this3$$fillStyleCont","$strokeStyleContainer","lineCap","lineJoin","lineDash","lineDashOffset","miterLimit","currentLineCap","currentLineJoin","currentLineDash","_this$lineDash","currentLineDashOffset","currentMiterLimit","currentWidth","inputLineDash","_this$lineDash2","setLineCap","setLineJoin","setLineDash","setLineDashOffset","setMiterLimit","setWidth","StrokeStyle","_this3$$strokeStyleCo","_lineDash","regShapeStyle","currentRadius","CircleStyle","radiusChanged","pointsChanged","radius1Changed","radius2Changed","angleChanged","BOTTOM_LEFT","BOTTOM_RIGHT","TOP_LEFT","TOP_RIGHT","IconOrigin","IconAnchorUnits","currentAnchor","_this$anchor","inputSize","_this$size","inputImgSize","_this$imgSize","inputAnchor","_this$anchor2","inputOffset","_this$offset","setAnchor","IconStyle","_this$$style$getAncho","_anchor","getPixelRatio","load","RegularShapeStyle","textStyleContainer","currentRenderer","setRenderer","_this4$$styleContaine","getGeometryFunction","$textStyleContainer","$bgFill","$bgFillVm","_bgFillVm","$bgStroke","$bgStrokeVm","_bgStrokeVm","BackgroundStyle","$strokeStyle","$bgStyleContainer","bgStyleContainer","_this2$$bgStyleContai","_this2$$bgStyleContai2","setBackgroundFill","_this3$$bgStyleContai","_this3$$bgStyleContai2","setBackgroundStroke","currentFont","currentMaxAngle","currentPlacement","currentOffsetX","currentOffsetY","currentOverflow","currentText","currentTextAlign","currentTextBaseline","currentPadding","_this$padding","inputPadding","_this$padding2","setFont","setMaxAngle","setPlacement","setOffsetX","setOffsetY","setOverflow","setTextAlign","setTextBaseline","setPadding","_bgFill","_bgStroke","TextStyle","_this3$$textStyleCont","_padding","_this$$style10","_this$$style11","_this$$style12","RegShapeStyle","extends","$latStyleContainer","latStyleContainer","_this2$$latStyleConta","getLatLabelStyle","_this2$$latStyleConta2","setLatLabelStyle","LonStyle","$lonStyleContainer","lonStyleContainer","_this2$$lonStyleConta","getLonLabelStyle","_this2$$lonStyleConta2","setLonLabelStyle","LatStyle","GStrokeStyle","setStrokeStyle","getStrokeStyle","vectorLayer","maxLines","targetSize","showLabels","lonLabelFormatter","latLabelFormatter","lonLabelPosition","latLabelPosition","intervals","inputIntervals","_this$intervals","meridians","getMeridians","parallels","getParallels","lonLabelStyle","$lonLabelStyle","latLabelStyle","$latLabelStyle","_lonLabelStyle","_lonLabelStyleVm","_latLabelStyle","_latLabelStyleVm","_strokeStyle","_strokeStyleVm","$lonLabelStyleVm","getLonLabelStyleVm","$latLabelStyleVm","getLatLabelStyleVm","$strokeStyleVm","getStrokeStyleVm","GraticuleLayer","_style3","_style6","_style7","_style9","Layer","GroupLayer","gradient","blur","weight","currentGradient","currentBlur","inputGradient","getGradient","getBlur","setGradient","setBlur","HeatmapLayer","validateUrl","arcgisSource","imageSource","imageLoadFunction","imageLoadFunc","currentImageLoadFunction","inputImageLoadFunction","getImageLoadFunction","setImageLoadFunction","ImageArcGISRestSource","imageLayer","ImageLayer","imageExtent","imgExtent","imgLoadFunc","loadFunc","imageSize","inputImageExtent","_coalesce","inputImageSize","_coalesce2","ImageStaticSource","getImageExtent","wmsSource","currentImageLoadFunc","ImageWMSSource","SINGLECLICK","CLICK","DBLCLICK","POINTERDRAG","POINTERMOVE","POINTERDOWN","POINTERUP","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","renderMode","VectorLayer","$view","$viewContainer","_this14$$services","viewContainer","_this14$$services2","resolutionChanges","zoomChanges","getZoom","constrainOnlyCenter","smoothExtentConstraint","enableRotation","constrainRotation","constrainResolution","smoothResolutionConstraint","zoomFactor","multiWorld","showFullExtent","currentCenterViewProj","currentZoom","currentResolution","centerDataProj","centerViewProj","currentCenterDataProj","_this$resolutions2","visibleExtentDataProj","_this$getExtent","visibleExtentViewProj","_this$getExtent2","animating","getAnimating","getInteracting","setResolution","setConstrainResolution","setZoom","_this$inputResolution","setView","getViewVm","resolveView","animate","cb","opts","fit","geometryOrExtent","cancelAnimations","_this$$view","beginInteraction","endInteraction","duration","resolutionDirection","_this$$view2","calculateExtent","centerOn","position","_this$$view3","getResolutionForExtent","getResolutionForZoom","_this$$view4","_this$$view5","_this$$view6","_this$$view7","getZoomForResolution","_this$$view8","_this$$view9","_this$$view10","_this$$view11","getView","$featuresOverlayVm","$refs","_this18$$refs","featuresOverlay","$featuresOverlaySourceVm","_this18$$refs2","featuresOverlaySource","viewChanges","_viewSubs","withCustomView","pointerEvents","MapBrowserEventType","otherEvents","MapEventType","ViewCmp","VectorLayerCmp","VectorSourceCmp","controlsContainer","overlaysContainer","keyboardEventTarget","Element","Document","moveTolerance","devicePixelRatio","maxTilesLoading","tabindex","currentDataProjection","setDataProjection","_view","_viewVm","setSize","setTarget","$el","_this6$$viewVm","resolveMap","getCoordinateFromPixel","getEventCoordinate","getEventPixel","getFeaturesAtPixel","hasFeatureAtPixel","getPixelFromCoordinate","_this$$map","updateSize","getTarget","_this$$map2","getViewport","_this$$map3","_this$$map4","_view3","getDataProjection","focus","featuresOverlaySourceCreated","sourceVm","removes","xyzSource","accessToken","tileFormat","tileNameSuffix","tileRatio","IMAGE","HYBRID","VECTOR","tileLayer","RenderType","VectorTileLayer","styleUrl","layerIds","MapboxVectorLayer","modifying","getRevision","modified","primaryAction","deleteCondition","altKeyOnly","insertVertexCondition","always","pixelTolerance","ModifyInteraction","removePoint","OSMSource","transitionChanged","BOTTOM_CENTER","CENTER_LEFT","CENTER_CENTER","CENTER_RIGHT","TOP_CENTER","$overlaysContainer","subscribeToOverlayChanges","positioning","OverlayPositioning","stopEvent","insertFirst","autoPan","autoPanMargin","autoPanAnimation","autoPanOptions","currentOffset","currentPositionViewProj","currentPositioning","currentPositionDataProj","inputAutoPan","inputAutoPanAnimation","inputAutoPanOptions","classes","getOffset","getPositioning","setOffset","setPosition","setPositioning","resolveOverlay","_this$$overlay","_position","panIntoView","require$$0","RotateFeatureEventType","RotateFeatureEvent","propagationStopped_","type_","features_","angle_","ua","navigator","userAgent","MAC","WEBKIT","_createSuper","Derived","hasNativeReflectConstruct","Super","NewTarget","ANCHOR_KEY","ARROW_KEY","ANGLE_PROP","ANCHOR_PROP","RotateFeatureInteraction","_PointerInteraction","handleDownEvent","handleUpEvent","handleDragEvent","handleMoveEvent","previousCursor_","anchorFeature_","arrowFeature_","lastCoordinate_","anchorMoving_","overlay_","Vector","Vector$1","condition_","allowAnchorMovement","getFeaturesCentroid","setAngle","onFeatureAdd_","onFeatureRemove_","onAngleChange_","onAnchorChange_","createOrUpdateAnchorFeature_","createOrUpdateArrowFeature_","_Feature","_Feature2","resetAngle_","resetAnchor_","resetAngleAndAnchor_","_ref","oldValue","dispatchEvent","Pointer","mouseOnly","originalEvent","button","ctrlKey","dispatchRotateStartEvent_","dispatchRotateEndEvent_","_ref2","anchorCoordinate","lastVector","newVector","dispatchRotatingEvent_","_ref3","getTargetElement","setCursor","cursor","vendor","_styles","RotateFeature","currentAnchorViewProj","currentAngle","anchorDataProj","anchorViewProj","currentAnchorDataProj","_this$anchorViewProj","VectorEventType","RotateInteraction","json","hitTolerance","multi","addCondition","never","singleClick","removeCondition","toggleCondition","currentHitTolerance","currentFeatureIds","getHitTolerance","unselectAll","select","setHitTolerance","SelectInteraction","unselect","getLayer","edge","vertex","SnapInteraction","StamenSource","function","inputFunction","providedStyleFunc","fallbackStyleFunc","TileArcGISRestSource","opaqueChanged","TileLayer","gutter","TileWMSSource","startCoordinate","inputFilter","TranslateInteraction","imageRatio","VectorImageLayer","tile","VectorTileSource","resolutionsFromExtent","height","getExtentHeight","getExtentWidth","toSize","layerName","styleName","matrixSet","dimensions","requestEncoding","origin","matrixIds","originDataProj","originViewProj","getExtentCorner","ExtentCorner","WMTSTileGrid","WMTSSource","getDimensions","getMatrixSet","getRequestEncoding","getVersion","_this$$source7","use","BingmapsSource","ImageArcgisRestSource","ImageWmsSource","MapboxSource","OsmSource","SputnikSource","StyleFunc","TileArcgisRestSource","TileWmsSource","WmtsSource","XyzSource","VueLayers","olExt","rxExt","utils"],"mappings":"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"}