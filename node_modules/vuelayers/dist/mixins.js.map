{"version":3,"file":"mixins.js","sources":["../src/mixins/event-bus.js","../src/mixins/ident-map.js","../src/mixins/rx-subs.js","../src/mixins/services.js","../src/mixins/ol-cmp.js","../src/mixins/arcgis-source.js","../src/mixins/proj-transforms.js","../src/mixins/stub-vnode.js","../src/mixins/wait-for-map.js","../src/mixins/base-layer.js","../src/mixins/controls-container.js","../src/mixins/geometry-container.js","../src/mixins/style-container.js","../src/mixins/feature.js","../src/mixins/feature-helper.js","../src/mixins/features-container.js","../src/mixins/fill-style-container.js","../src/mixins/geometry.js","../src/mixins/source-container.js","../src/mixins/layer.js","../src/mixins/image-layer.js","../src/mixins/source.js","../src/mixins/image-source.js","../src/mixins/style.js","../src/mixins/image-style.js","../src/mixins/image-style-container.js","../src/mixins/interaction.js","../src/mixins/interactions-container.js","../src/mixins/layers-container.js","../src/mixins/overlays-container.js","../src/mixins/stroke-style-container.js","../src/mixins/reg-shape-style.js","../src/mixins/simple-geometry.js","../src/mixins/text-style-container.js","../src/mixins/tile-source.js","../src/mixins/url-tile-source.js","../src/mixins/tile-image-source.js","../src/mixins/tile-layer.js","../src/mixins/vector-layer.js","../src/mixins/vector-source.js","../src/mixins/wms-source.js","../src/mixins/xyz-source.js"],"sourcesContent":["import Vue from 'vue'\nimport { hasProp } from '../utils'\n\nexport const EVENT_BUS_PROP = '$vlEventBus'\n\nexport default {\n  beforeCreate () {\n    initEventBus()\n    // define local getter\n    Object.defineProperties(this, {\n      /**\n       * @type {Vue}\n       */\n      $eventBus: {\n        enumerable: true,\n        get: () => this[EVENT_BUS_PROP],\n      },\n    })\n  },\n}\n\nfunction initEventBus () {\n  if (\n    hasProp(Vue, EVENT_BUS_PROP) ||\n    hasProp(Vue.prototype, EVENT_BUS_PROP)\n  ) return\n\n  const bus = new Vue()\n\n  if (!hasProp(Vue, EVENT_BUS_PROP)) {\n    Object.defineProperties(Vue, {\n      [EVENT_BUS_PROP]: {\n        enumerable: true,\n        get: () => bus,\n      },\n    })\n  }\n\n  if (!hasProp(Vue.prototype, EVENT_BUS_PROP)) {\n    Object.defineProperties(Vue.prototype, {\n      [EVENT_BUS_PROP]: {\n        enumerable: true,\n        get: () => bus,\n      },\n    })\n  }\n}\n","import Vue from 'vue'\nimport { hasProp, identity, IdentityMap, keys, stubObject } from '../utils'\n\n// global prop\nexport const IDENTITY_MAP_PROP = '$vlIdentityMap'\nexport const INSTANCES_POOL = 'instances'\n\nexport default {\n  data () {\n    return {\n      idents: stubObject(),\n    }\n  },\n  beforeCreate () {\n    initIdentityMap()\n    // define local getter\n    Object.defineProperties(this, {\n      $identityMap: {\n        enumerable: true,\n        get: () => this[IDENTITY_MAP_PROP],\n      },\n    })\n  },\n  destroyed () {\n    this.unsetInstances()\n  },\n  methods: {\n    /**\n     * @param parts\n     * @return {string}\n     */\n    makeIdent (...parts) {\n      return parts.filter(identity).join('.')\n    },\n    /**\n     * Caches or reuse factory result in the identity map\n     * and returns result.\n     *\n     * @param {string|undefined} ident\n     * @param {function} factory\n     * @returns {*}\n     */\n    instanceFactoryCall (ident, factory) {\n      if (ident && this.hasInstance(ident)) {\n        return this.getInstance(ident)\n      }\n\n      const inst = factory()\n\n      if (ident) {\n        this.setInstance(ident, inst)\n      }\n\n      return inst\n    },\n    /**\n     * @param {string|undefined} ident\n     * @returns {*}\n     */\n    getInstance (ident) {\n      if (!ident || !this.hasInstance(ident)) return\n\n      this.idents[ident] = true\n\n      return this.$identityMap.get(ident, INSTANCES_POOL)\n    },\n    /**\n     * @param ident\n     * @param inst\n     */\n    setInstance (ident, inst) {\n      if (!ident) return\n\n      this.idents[ident] = true\n      this.$identityMap.set(ident, inst, INSTANCES_POOL)\n    },\n    /**\n     * @param {string|undefined} ident\n     * @returns {*}\n     */\n    hasInstance (ident) {\n      if (!ident) return\n\n      return this.$identityMap.has(ident, INSTANCES_POOL)\n    },\n    /**\n     * @param {string|undefined} ident\n     * @return {void}\n     */\n    unsetInstance (ident) {\n      if (!ident) return\n\n      delete this.idents[ident]\n      this.$identityMap.unset(ident, INSTANCES_POOL)\n    },\n    /**\n     * Unsets all self indets\n     * @return {void}\n     */\n    unsetInstances () {\n      keys(this.idents).forEach(::this.unsetInstance)\n    },\n    /**\n     * @param {string|undefined} fromIdent\n     * @param {string|undefined} toIdent\n     * @returns {boolean}\n     */\n    moveInstance (fromIdent, toIdent) {\n      return this.$identityMap.move(fromIdent, toIdent, INSTANCES_POOL)\n    },\n  },\n}\n\nfunction initIdentityMap () {\n  if (\n    hasProp(Vue, IDENTITY_MAP_PROP) ||\n    hasProp(Vue.prototype, IDENTITY_MAP_PROP)\n  ) return\n\n  const imap = new IdentityMap()\n\n  if (!hasProp(Vue, IDENTITY_MAP_PROP)) {\n    Object.defineProperties(Vue, {\n      [IDENTITY_MAP_PROP]: {\n        enumerable: true,\n        get: () => imap,\n      },\n    })\n  }\n\n  if (!hasProp(Vue.prototype, IDENTITY_MAP_PROP)) {\n    Object.defineProperties(Vue.prototype, {\n      [IDENTITY_MAP_PROP]: {\n        enumerable: true,\n        get: () => imap,\n      },\n    })\n  }\n}\n","import { retry } from 'rxjs/operators'\nimport { newLogger, noop } from '../utils'\n\n/**\n * RxJS subscriptions manager.\n */\nexport default {\n  beforeCreate () {\n    /**\n     * @type {Subscription[]}\n     * @private\n     */\n    this._rxSubs = []\n  },\n  destroyed () {\n    this.unsubscribeAll()\n  },\n  methods: {\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () { },\n    /**\n     * @return {void}\n     * @protected\n     */\n    unsubscribeAll () {\n      this._rxSubs.forEach(subs => subs.unsubscribe())\n      this._rxSubs = []\n    },\n    /**\n     * @param {Observable<T>} observable\n     * @param {function} [next] Next handler or Observer object.\n     * @param {function} [error] Error handler.\n     * @param {function} [complete] Complete handler.\n     * @return {Subscription}\n     * @protected\n     */\n    subscribeTo (observable, next = noop, error = noop, complete = noop) {\n      const errorWrap = err => {\n        if (process.env.NODE_ENV !== 'production') {\n          if (this.$logger) {\n            this.$logger.error(err.stack)\n          } else {\n            newLogger(this.vmName).error(err.stack)\n          }\n        }\n        error(err)\n      }\n\n      const subs = observable.pipe(\n        retry(3),\n      ).subscribe(next, errorWrap, complete)\n      this._rxSubs.push(subs)\n\n      return subs\n    },\n    unsubscribe (subs) {\n      const idx = this._rxSubs.indexOf(subs)\n      if (idx === -1) return\n\n      subs.unsubscribe()\n      this._rxSubs.splice(idx, 1)\n    },\n  },\n}\n","import { mergeDescriptors } from '../utils'\n\n// todo uncomment when IE 11 will die\n// const SERVICES_PROP = Symbol('services')\nexport const SERVICES_PROP = 'services'\n\n/**\n * Service container mixin\n */\nexport default {\n  inject: {\n    $services: SERVICES_PROP,\n    // todo works only in Vue 2.5.x\n    // $services: {from: SERVICES_PROP, default: Object.create(null)},\n  },\n  provide () {\n    return {\n      [SERVICES_PROP]: this.getServices(),\n    }\n  },\n  methods: {\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return mergeDescriptors({}, this.$services || {})\n    },\n  },\n  beforeCreate () {\n    let source = this.$parent\n    while (source) {\n      if (source._provided != null && source._provided[SERVICES_PROP] != null) {\n        break\n      }\n      source = source.$parent\n    }\n    if (source == null || source._provided[SERVICES_PROP] == null) {\n      delete this.$options.inject.$services\n    }\n  },\n}\n","import debounce from 'debounce-promise'\nimport { Object as OlObject, Observable } from 'ol'\nimport EventType from 'ol/events/EventType'\nimport ObjectEventType from 'ol/ObjectEventType'\nimport { interval, merge as mergeObs, of as obsOf, race as raceObs, throwError as throwErrorObs } from 'rxjs'\nimport {\n  delayWhen,\n  filter as filterObs,\n  first as firstObs,\n  map as mapObs,\n  mergeMap,\n  publishReplay,\n  refCount,\n} from 'rxjs/operators'\nimport { v4 as uuid } from 'uuid'\nimport VueQuery from 'vuequery'\nimport { fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent, fromVueEvent } from '../rx-ext'\nimport {\n  addPrefix,\n  assert,\n  coalesce,\n  identity,\n  isArray,\n  isEqual,\n  isFunction,\n  kebabCase,\n  makeWatchers,\n  newLogger,\n} from '../utils'\nimport eventBus from './event-bus'\nimport identMap from './ident-map'\nimport rxSubs from './rx-subs'\nimport services from './services'\n\nexport const VM_PROP = 'vm'\nexport const FRAME_TIME = 1000 / 60\n\nexport const OlObjectState = {\n  UNDEF: 'undef',\n  CREATING: 'creating',\n  CREATED: 'created',\n  MOUNTING: 'mounting',\n  MOUNTED: 'mounted',\n  UNMOUNTING: 'unmounting',\n  UNMOUNTED: 'unmounted',\n  DESTROYING: 'destroying',\n  DESTROYED: 'destroyed',\n}\n\nexport const OlObjectEvent = {\n  CREATED: OlObjectState.CREATED,\n  MOUNTED: OlObjectState.MOUNTED,\n  UNMOUNTED: OlObjectState.UNMOUNTED,\n  DESTROYED: OlObjectState.DESTROYED,\n  ERROR: 'error',\n}\n\nexport const OlObjectAction = {\n  CREATE: 'create',\n  MOUNT: 'mount',\n  UNMOUNT: 'unmount',\n  DESTROY: 'destroy',\n}\n\n/**\n * Basic ol component mixin.\n * todo try to subscribe to generic change event here and update rev according to internal ol counter\n */\nexport default {\n  mixins: [\n    identMap,\n    rxSubs,\n    services,\n    eventBus,\n  ],\n  props: {\n    /**\n     * @type {string|number}\n     */\n    id: {\n      type: [String, Number],\n      default: uuid,\n      validator: value => value != null && value !== '',\n    },\n    /**\n     * Unique key for saving to identity map\n     * @type {string|number|undefined}\n     */\n    ident: [String, Number],\n  },\n  data () {\n    return {\n      rev: 0,\n      currentId: this.id,\n    }\n  },\n  computed: {\n    /**\n     * @type {string}\n     */\n    vmClass () {\n      return kebabCase(this.$options.name)\n    },\n    /**\n     * @type {string}\n     */\n    vmId () {\n      return [this.vmClass, this.currentId].filter(identity).join('.')\n    },\n    /**\n     * @type {string}\n     */\n    vmName () {\n      return [this.$options.name, this.currentId].filter(identity).join('.')\n    },\n    /**\n     * @type {string|undefined}\n     */\n    olObjIdent () {\n      if (!this.ident) return\n\n      return this.makeIdent(this.ident)\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$olObject) return\n\n      if (this.currentId !== this.getIdInternal()) {\n        this.currentId = this.getIdInternal()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'id',\n      'currentId',\n      'olObjIdent',\n    ]),\n  },\n  async created () {\n    /**\n     * @type {{warn: (function(...[*]): void), log: (function(...[*]): void), error: (function(...[*]): void)}}\n     * @private\n     */\n    this._logger = newLogger(this.vmName)\n    /**\n     * @type {number}\n     * @private\n     */\n    this._olObjectState = OlObjectState.UNDEF\n    /**\n     * @type {module:ol/Object~BaseObject}\n     * @private\n     */\n    this._olObject = undefined\n    /**\n     * @type {Observable}\n     * @private\n     */\n    this._olObjectEvents = this::newOlObjectEventsObs()\n\n    this::defineDebounceMethods()\n    this::defineServices()\n\n    await this::execInit(false)\n  },\n  async mounted () {\n    await this::execMount()\n  },\n  async beforeDestroy () {\n    await this::execUnmount(true)\n  },\n  async destroyed () {\n    await this::execDeinit()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>} Resolves when initialization completes\n     * @protected\n     */\n    beforeInit () {},\n    /**\n     * @return {Promise<void>} Resolves when initialization completes\n     * @protected\n     */\n    async init () {\n      this._olObject = await this.instanceFactoryCall(this.olObjIdent, ::this.createOlObject)\n      this._olObject[VM_PROP] || (this._olObject[VM_PROP] = [])\n\n      // for loaded from IdentityMap\n      if (!this._olObject[VM_PROP].includes(this)) {\n        this._olObject[VM_PROP].push(this)\n      }\n\n      await this.changed()\n      this.subscribeAll()\n    },\n    /**\n     * @return {module:ol/Object~BaseObject|Promise<module:ol/Object~BaseObject>}\n     * @protected\n     * @abstract\n     */\n    createOlObject () {\n      throw new Error(`${this.vmName} not implemented method: createOlObject()`)\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async deinit () {\n      this.unsubscribeAll()\n      this.unsetInstances()\n\n      if (this._olObject) {\n        this._olObject[VM_PROP] = this._olObject[VM_PROP].filter(vm => vm !== this)\n        this._olObject = undefined\n      }\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    beforeMount () {},\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    mount () {},\n    /**\n     * @return {void|Promise<void>}\n     * @protected\n     */\n    unmount () {},\n    /**\n     * Refresh internal ol objects\n     * @return {Promise<void>}\n     */\n    async refresh () {\n      let olObj\n      try {\n        olObj = await this.resolveOlObject()\n        if (olObj instanceof Observable) {\n          return new Promise(resolve => {\n            olObj.once('change', () => resolve())\n            olObj.changed()\n          })\n        }\n      } catch (err) {\n        // todo check why this catch not catching OLObjectNotInitializedError from resolveOlObject\n      }\n\n      return this.changed()\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async scheduleRefresh () {\n      try {\n        await this.debounceRefresh()\n      } catch (err) {}\n    },\n    /**\n     * Internal usage only in components that doesn't support refreshing.\n     * @return {Promise<void>}\n     * @protected\n     */\n    async remount () {\n      if (this.$olObjectState === OlObjectState.MOUNTED) {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('remounting...')\n        }\n\n        await this::execUnmount()\n        await this::execMount()\n      } else {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('remount discarded')\n        }\n      }\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async scheduleRemount () {\n      if ([\n        OlObjectState.MOUNTING,\n        OlObjectState.MOUNTED,\n      ].includes(this.$olObjectState)) {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('remount scheduled')\n        }\n\n        await this.debounceRemount()\n      } else {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('remount discarded')\n        }\n      }\n    },\n    /**\n     * Only for internal purpose to support watching for properties\n     * for which OpenLayers doesn't provide setters.\n     * @return {Promise}\n     * @protected\n     */\n    async recreate () {\n      if ([\n        OlObjectState.CREATED,\n        OlObjectState.MOUNTING,\n        OlObjectState.MOUNTED,\n        OlObjectState.UNMOUNTING,\n        OlObjectState.UNMOUNTED,\n      ].includes(this.$olObjectState)) {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('recreating...')\n        }\n\n        const mounted = [\n          OlObjectState.MOUNTING,\n          OlObjectState.MOUNTED,\n        ].includes(this.$olObjectState)\n        if (mounted) {\n          await this::execUnmount()\n        }\n\n        await this::execDeinit()\n        await this::execInit()\n\n        if (mounted) {\n          await this::execMount()\n        }\n      } else {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('recreate discarded')\n        }\n      }\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async scheduleRecreate () {\n      if ([\n        OlObjectState.CREATING,\n        OlObjectState.CREATED,\n        OlObjectState.MOUNTING,\n        OlObjectState.MOUNTED,\n        OlObjectState.UNMOUNTING,\n        OlObjectState.UNMOUNTED,\n      ].includes(this.$olObjectState)) {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('recreate scheduled')\n        }\n\n        await this.debounceRecreate()\n      } else {\n        if (process.env.VUELAYERS_DEBUG) {\n          this.$logger.log('recreate discarded')\n        }\n      }\n    },\n    /**\n     * Redefine for easy call in child components\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return this::services.methods.getServices()\n    },\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::subscribeToOlObjectEvents()\n    },\n    /**\n     * @returns {Promise<Object>}\n     * @throws {Error} If underlying OpenLayers object not initialized (incorrect initialization, already destroy).\n     */\n    async resolveOlObject () {\n      await this.$createPromise\n\n      return this.$olObject || throw new OLObjectNotInitializedError(`${this.vmName} OpenLayers object is undefined`)\n    },\n    /**\n     * @return {Promise}\n     */\n    async $nextTickPromise () {\n      return new Promise(::this.$nextTick)\n    },\n    /**\n     * @return {string|number}\n     */\n    getId () {\n      return coalesce(this.$olObject && this.getIdInternal(), this.currentId)\n    },\n    /**\n     * @return {*}\n     * @protected\n     */\n    getIdInternal () {\n      if (this.$olObject instanceof OlObject) {\n        return this.$olObject.get('id')\n      }\n\n      return this.$olObject.id\n    },\n    /**\n     * @param {string|number} id\n     */\n    setId (id) {\n      assert(id != null && id !== '', 'Invalid id')\n\n      if (this.currentId !== id) {\n        this.currentId = id\n      }\n      this.$olObject && this.setIdInternal(id)\n    },\n    /**\n     * @param {*} id\n     * @protected\n     */\n    setIdInternal (id) {\n      if (this.$olObject instanceof OlObject) {\n        if (this.$olObject.get('id') !== id) {\n          this.$olObject.set('id', id)\n        }\n\n        return\n      }\n\n      if (this.$olObject.id !== id) {\n        this.$olObject.id = id\n      }\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async changed () {\n      this.rev++\n      await this.$nextTickPromise()\n    },\n    /**\n     * @param {string|number} value\n     * @protected\n     */\n    idChanged (value) {\n      this.setId(value)\n    },\n    /**\n     * @param {string|number} value\n     * @protected\n     */\n    currentIdChanged (value) {\n      if (value === this.id) return\n\n      this.$emit('update:id', value)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    olObjIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.$olObject) {\n        this.setInstance(value, this.$olObject)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n    /**\n     * @protected\n     */\n    syncNonObservable () {\n      this.setId(this.getId())\n    },\n  },\n}\n\nfunction defineDebounceMethods () {\n  this.debounceRefresh = debounce(::this.refresh, FRAME_TIME)\n  this.debounceRemount = debounce(::this.remount, FRAME_TIME)\n  this.debounceRecreate = debounce(::this.recreate, FRAME_TIME)\n  this.debounceChanged = debounce(::this.changed, FRAME_TIME)\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $vq: {\n      enumerable: true,\n      get: () => VueQuery(this),\n    },\n    /**\n     * @type {{warn: (function(...[*]): void), log: (function(...[*]): void), error: (function(...[*]): void)}}\n     */\n    $logger: {\n      enumerable: true,\n      get: () => this._logger,\n    },\n    /**\n     * @type {string}\n     */\n    $olObjectState: {\n      enumerable: true,\n      get: () => this._olObjectState,\n    },\n    /**\n     * @type {module:ol/Object~BaseObject|undefined}\n     */\n    $olObject: {\n      enumerable: true,\n      get: () => this._olObject,\n    },\n    $olObjectEvents: {\n      enumerable: true,\n      get: () => this._olObjectEvents,\n    },\n    /**\n     * @type {Promise<void>}\n     */\n    $createPromise: {\n      enumerable: true,\n      get: () => this::newLifecyclePromise(\n        OlObjectAction.CREATE,\n        OlObjectEvent.CREATED,\n        {\n          [OlObjectState.CREATING]: [OlObjectAction.CREATE, OlObjectEvent.CREATED],\n        },\n      ),\n    },\n    /**\n     * @type {Promise<void>}\n     */\n    $mountPromise: {\n      enumerable: true,\n      get: () => this.$createPromise.then(() => this::newLifecyclePromise(\n        OlObjectAction.MOUNT,\n        OlObjectEvent.MOUNTED,\n        {\n          [OlObjectState.CREATING]: [OlObjectAction.CREATE, OlObjectEvent.CREATED],\n          [OlObjectState.MOUNTING]: [OlObjectAction.MOUNT, OlObjectEvent.MOUNTED],\n        },\n      )),\n    },\n    /**\n     * @type {Promise<void>}\n     */\n    $unmountPromise: {\n      enumerable: true,\n      get: () => this.$mountPromise.then(() => this::newLifecyclePromise(\n        OlObjectAction.UNMOUNT,\n        OlObjectEvent.UNMOUNTED,\n        {\n          [OlObjectState.CREATING]: [OlObjectAction.CREATE, OlObjectEvent.CREATED],\n          [OlObjectState.MOUNTING]: [OlObjectAction.MOUNT, OlObjectEvent.MOUNTED],\n          [OlObjectState.UNMOUNTING]: [OlObjectAction.UNMOUNT, OlObjectEvent.UNMOUNTED],\n        },\n      )),\n    },\n    /**\n     * @type {Promise<void>}\n     */\n    $destroyPromise: {\n      enumerable: true,\n      get: () => this.$unmountPromise.then(() => this::newLifecyclePromise(\n        OlObjectAction.DESTROY,\n        OlObjectEvent.DESTROYED,\n        {\n          [OlObjectState.CREATING]: [OlObjectAction.CREATE, OlObjectEvent.CREATED],\n          [OlObjectState.MOUNTING]: [OlObjectAction.MOUNT, OlObjectEvent.MOUNTED],\n          [OlObjectState.UNMOUNTING]: [OlObjectAction.UNMOUNT, OlObjectEvent.UNMOUNTED],\n          [OlObjectState.DESTROYING]: [OlObjectAction.DESTROY, OlObjectEvent.DESTROYED],\n        },\n      )),\n    },\n  })\n}\n\nfunction newOlObjectEventsObs () {\n  return mergeObs(\n    ...Object.values(OlObjectEvent)\n      .map(name => fromVueEvent(this.$eventBus, name, args => ({ name, args: isArray(args) ? args : [args] }))\n        .pipe(\n          filterObs(({ args }) => args[0] === this || args[1] === this),\n        )),\n  ).pipe(\n    publishReplay(),\n    refCount(),\n  )\n}\n\nfunction newLifecyclePromise (action, endEvent, startStates) {\n  const newFinishObs = (action, endEvent) => raceObs(\n    this.$olObjectEvents.pipe(filterObs(({ name }) => name === endEvent)),\n    this.$olObjectEvents.pipe(filterObs(({ name, args }) => {\n      return name === OlObjectEvent.ERROR &&\n        args[0] instanceof LifecycleError &&\n        args[0].action === action\n    })),\n  )\n\n  return mergeObs(\n    newFinishObs(action, endEvent),\n    this.$olObjectEvents.pipe(\n      filterObs(({ name, args }) => {\n        return name === OlObjectEvent.ERROR &&\n          args[0] instanceof CanceledError\n      }),\n    ),\n  ).pipe(\n    firstObs(),\n    mergeMap(evt => {\n      let obs = obsOf(evt)\n      // If at the time of CancelError the ol object stay in some intermediate state\n      // we need to delay observable emit until current hook complete\n      if (\n        evt.name === OlObjectEvent.ERROR &&\n        evt.args[0] instanceof CanceledError &&\n        startStates[this.$olObjectState] != null\n      ) {\n        obs = obs.pipe(delayWhen(() => newFinishObs(...startStates[this.$olObjectState])))\n      }\n      return obs\n    }),\n    mergeMap(evt => {\n      if (evt.name === OlObjectEvent.ERROR) {\n        return throwErrorObs(evt.args[0])\n      }\n      return obsOf(evt)\n    }),\n    mapObs(({ args }) => args.length === 1 ? args[0] : args),\n  ).toPromise()\n}\n\n/**\n * @param {boolean} [resetEventsObs=true]\n * @returns {Promise<void>}\n * @private\n */\nasync function execInit (resetEventsObs = true) {\n  const prevState = this._olObjectState\n\n  if (resetEventsObs) {\n    this._olObjectEvents = this::newOlObjectEventsObs()\n  }\n  this._olObjectEvents.subscribe()\n\n  try {\n    const canceled = await Promise.race([\n      Promise.resolve(this.beforeInit()).then(() => false),\n      this.$olObjectEvents.pipe(\n        filterObs(({ name, args }) => {\n          return name === OlObjectEvent.ERROR &&\n            args[0] instanceof CanceledError\n        }),\n        firstObs(),\n      ).toPromise()\n        .then(() => true),\n    ])\n    if (canceled) {\n      if (process.env.VUELAYERS_DEBUG) {\n        this.$logger.log(`ol object ${OlObjectAction.CREATE} canceled`)\n      }\n      return\n    }\n\n    this._olObjectState = OlObjectState.CREATING\n\n    await this.init()\n\n    this._olObjectState = OlObjectState.CREATED\n\n    if (process.env.VUELAYERS_DEBUG) {\n      this.$logger.log(`ol object ${OlObjectEvent.CREATED}`)\n    }\n\n    this.$emit(OlObjectEvent.CREATED, this)\n    this.$eventBus.$emit(OlObjectEvent.CREATED, this)\n  } catch (err) {\n    const lcErr = new LifecycleError(err, this.vmName, OlObjectAction.CREATE)\n    this._olObjectState = prevState\n\n    this.$emit(OlObjectEvent.ERROR, lcErr, this)\n    this.$eventBus.$emit(OlObjectEvent.ERROR, lcErr, this)\n\n    throw lcErr\n  }\n}\n\n/**\n * @return {Promise<void>}\n * @private\n */\nasync function execMount () {\n  const prevState = this._olObjectState\n\n  try {\n    await this.$createPromise\n\n    const canceled = await Promise.race([\n      Promise.resolve(this.beforeMount()).then(() => false),\n      this.$olObjectEvents.pipe(\n        filterObs(({ name, args }) => {\n          return name === OlObjectEvent.ERROR &&\n            args[0] instanceof CanceledError\n        }),\n        firstObs(),\n      ).toPromise()\n        .then(() => true),\n    ])\n    if (canceled) {\n      if (process.env.VUELAYERS_DEBUG) {\n        this.$logger.log(`ol object ${OlObjectAction.MOUNT} canceled`)\n      }\n      return\n    }\n\n    this._olObjectState = OlObjectState.MOUNTING\n\n    await this.mount()\n\n    this._olObjectState = OlObjectState.MOUNTED\n\n    if (process.env.VUELAYERS_DEBUG) {\n      this.$logger.log(`ol object ${OlObjectEvent.MOUNTED}`)\n    }\n\n    this.$emit(OlObjectEvent.MOUNTED, this)\n    this.$eventBus.$emit(OlObjectEvent.MOUNTED, this)\n  } catch (err) {\n    if (err instanceof CanceledError) {\n      if (process.env.VUELAYERS_DEBUG) {\n        this.$logger.log(`ol object ${OlObjectAction.MOUNT} canceled`)\n      }\n\n      return\n    }\n\n    const lcErr = new LifecycleError(err, this.vmName, OlObjectAction.MOUNT)\n    this._olObjectState = prevState\n\n    this.$emit(OlObjectEvent.ERROR, lcErr, this)\n    this.$eventBus.$emit(OlObjectEvent.ERROR, lcErr, this)\n\n    throw lcErr\n  }\n}\n\n/**\n * @param {boolean} [fireCancel=false]\n * @return {void|Promise<void>}\n * @private\n */\nasync function execUnmount (fireCancel = false) {\n  const prevState = this._olObjectState\n\n  if (fireCancel) {\n    if ([\n      OlObjectState.UNDEF,\n      OlObjectState.CREATING,\n      OlObjectState.CREATED,\n      OlObjectState.MOUNTING,\n    ].includes(this.$olObjectState)) {\n      const err = new CanceledError(`${this.vmName} ol object lifecycle canceled`)\n      this.$emit(OlObjectEvent.ERROR, err, this)\n      this.$eventBus.$emit(OlObjectEvent.ERROR, err, this)\n    }\n  }\n\n  try {\n    try {\n      await this.$mountPromise\n    } catch (err) {\n      if (err instanceof CanceledError) {\n        if (this.$olObjectState !== OlObjectState.MOUNTED) {\n          if (process.env.VUELAYERS_DEBUG) {\n            this.$logger.log(`ol object ${OlObjectAction.UNMOUNT} canceled`)\n          }\n\n          return\n        }\n      } else {\n        throw err\n      }\n    }\n\n    this._olObjectState = OlObjectState.UNMOUNTING\n\n    await this.unmount()\n\n    this._olObjectState = OlObjectState.UNMOUNTED\n\n    if (process.env.VUELAYERS_DEBUG) {\n      this.$logger.log(`ol object ${OlObjectEvent.UNMOUNTED}`)\n    }\n\n    this.$emit(OlObjectEvent.UNMOUNTED, this)\n    this.$eventBus.$emit(OlObjectEvent.UNMOUNTED, this)\n  } catch (err) {\n    const lcErr = new LifecycleError(err, this.vmName, OlObjectAction.UNMOUNT)\n    this._olObjectState = prevState\n\n    this.$emit(OlObjectEvent.ERROR, this, lcErr)\n    this.$eventBus.$emit(OlObjectEvent.ERROR, this, lcErr)\n\n    throw lcErr\n  }\n}\n\n/**\n * @returns {Promise<void>}\n * @private\n */\nasync function execDeinit () {\n  const prevState = this._olObjectState\n\n  try {\n    try {\n      await this.$unmountPromise\n    } catch (err) {\n      if (err instanceof CanceledError) {\n        if (this.$olObjectState !== OlObjectState.CREATED) {\n          if (process.env.VUELAYERS_DEBUG) {\n            this.$logger.log(`ol object ${OlObjectAction.DESTROY} canceled`)\n          }\n\n          return\n        }\n      } else {\n        throw err\n      }\n    }\n\n    this._olObjectState = OlObjectState.DESTROYING\n\n    await this.deinit()\n\n    this._olObjectState = OlObjectState.DESTROYED\n\n    if (process.env.VUELAYERS_DEBUG) {\n      this.$logger.log(`ol object ${OlObjectEvent.DESTROYED}`)\n    }\n\n    this.$emit(OlObjectEvent.DESTROYED, this)\n    this.$eventBus.$emit(OlObjectEvent.DESTROYED, this)\n  } catch (err) {\n    const lcErr = new LifecycleError(err, this.vmName, OlObjectAction.DESTROY)\n    this._olObjectState = prevState\n\n    this.$emit(OlObjectEvent.ERROR, this, lcErr)\n    this.$eventBus.$emit(OlObjectEvent.ERROR, this, lcErr)\n\n    throw lcErr\n  }\n}\n\nfunction subscribeToOlObjectEvents () {\n  if (this.$olObject instanceof Observable) {\n    const setterKey = addPrefix('set')\n    const propChanges = obsFromOlChangeEvent(this.$olObject, [\n      'id',\n    ], true, evt => ({\n      ...evt,\n      setter: this[setterKey(evt.prop)],\n    }))\n    this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n\n    this.subscribeTo(\n      mergeObs(\n        obsFromOlEvent(this.$olObject, EventType.CHANGE),\n        obsFromOlEvent(this.$olObject, ObjectEventType.PROPERTYCHANGE),\n      ),\n      ::this.debounceChanged,\n    )\n\n    this.subscribeTo(obsFromOlEvent(this.$olObject, EventType.ERROR), evt => this.$emit(OlObjectEvent.ERROR, evt))\n  } else {\n    this.subscribeTo(interval(FRAME_TIME), ::this.syncNonObservable)\n  }\n}\n\nexport class LifecycleError extends Error {\n  name = 'LifecycleError'\n\n  constructor (err, vmName, action) {\n    if (err instanceof LifecycleError) {\n      err = err.err\n    }\n    const baseMessage = `${vmName} ${action} ol object failed`\n    const message = `${baseMessage}: ${err.message}`\n    super(message)\n    this.vmName = vmName\n    this.action = action\n    this.err = err\n    if (err.stack) {\n      this.stack = `${baseMessage}: ${err.stack}`\n    } else {\n      if (isFunction(Error.captureStackTrace)) {\n        Error.captureStackTrace(this, this.constructor)\n      } else {\n        this.stack = (new Error(message)).stack\n      }\n    }\n  }\n}\n\nexport class CanceledError extends Error {\n  name = 'CanceledError'\n\n  constructor (message) {\n    super(message)\n    if (isFunction(Error.captureStackTrace)) {\n      Error.captureStackTrace(this, this.constructor)\n    } else {\n      this.stack = (new Error(message)).stack\n    }\n  }\n}\n\nexport function isCreateError (err) {\n  return err instanceof LifecycleError &&\n    err.action === OlObjectAction.CREATE\n}\n\nexport function isMountError (err) {\n  return err instanceof LifecycleError &&\n    err.action === OlObjectAction.MOUNT\n}\n\nexport function isUnmountError (err) {\n  return err instanceof LifecycleError &&\n    err.action === OlObjectAction.UNMOUNT\n}\n\nexport function isDestroyError (err) {\n  return err instanceof LifecycleError &&\n    err.action === OlObjectAction.DESTROY\n}\n\nexport class OLObjectNotInitializedError extends Error {\n  name = 'OLObjectNotInitializedError'\n\n  constructor (message) {\n    super(message)\n    if (isFunction(Error.captureStackTrace)) {\n      Error.captureStackTrace(this, this.constructor)\n    } else {\n      this.stack = (new Error(message)).stack\n    }\n  }\n}\n\nexport function makeChangeOrRecreateWatchers (props, deepProps = []) {\n  return makeWatchers(props, prop => ({\n    deep: deepProps.includes(prop),\n    handler (...args) {\n      const handler = this[`${prop}Changed`]\n      if (isFunction(handler)) {\n        return handler(...args)\n      }\n\n      if (isEqual(args[0], args[1])) return\n\n      if (process.env.VUELAYERS_DEBUG) {\n        this.$logger.log(`${prop} changed, scheduling recreate... %O ===> %O`, args[1], args[0])\n      }\n\n      return this.scheduleRecreate()\n    },\n  }))\n}\n","import { cleanSourceParams } from '../ol-ext'\nimport {\n  clonePlainObject,\n  coalesce,\n  hasProp,\n  isArray,\n  isEqual,\n  lowerFirst,\n  makeWatchers,\n  reduce,\n  upperFirst,\n  isObjectLike,\n} from '../utils'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\n\nconst serialize = value => {\n  if (value == null) return\n\n  return typeof value === 'object' ? JSON.stringify(value) : value\n}\nconst cleanArcGisSourceParams = params => cleanSourceParams(params, [\n  'FORMAT',\n  'F',\n  'LAYERS',\n  'LAYERDEFS',\n  'DYNAMICLAYERS',\n  'DPI',\n  'TRANSPARENT',\n  'TIME',\n  'LAYERTIMEOPTIONS',\n  'GDBVERSION',\n  'MAPSCALE',\n  'ROTATION',\n  'DATUMTRANSFORMATIONS',\n  'MAPRANGEVALUES',\n  'LAYERRANGEVALUES',\n  'LAYERPARAMETERVALUES',\n  'HISTORICMOMENT',\n])\n\n/**\n * Shared ArcGIS source params and methods.\n */\nexport default {\n  props: {\n    // ArcGIS params from https://developers.arcgis.com/rest/services-reference/export-map.htm\n    /**\n     * @type {boolean}\n     */\n    hidpi: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {string}\n     */\n    format: {\n      type: String,\n      default: 'PNG32',\n    },\n    /**\n     * @type {string|string[]|undefined}\n     */\n    layers: [String, Array],\n    /**\n     * @type {Object|string|undefined}\n     */\n    layerDefs: [Object, String],\n    /**\n     * @type {Object[]|string|undefined}\n     */\n    dynamicLayers: [Array, String],\n    /**\n     * @type {number|undefined}\n     */\n    dpi: Number,\n    /**\n     * @type {boolean}\n     */\n    transparent: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {string|string[]|undefined}\n     */\n    time: [String, Array],\n    /**\n     * @type {Object|string|undefined}\n     */\n    layerTimeOptions: [Object, String],\n    /**\n     * @type {string|undefined}\n     */\n    gdbVersion: String,\n    /**\n     * @type {string|undefined}\n     */\n    mapScale: String,\n    /**\n     * @type {number|undefined}\n     */\n    rotation: Number,\n    /**\n     * @type {Array|string|undefined}\n     */\n    datumTransformations: [Array, String],\n    /**\n     * @type {Array|string|undefined}\n     */\n    mapRangeValues: [Array, String],\n    /**\n     * @type {Array|string|undefined}\n     */\n    layerRangeValues: [Array, String],\n    /**\n     * @type {Array|string|undefined}\n     */\n    layerParameterValues: [Array, String],\n    /**\n     * @type {number|undefined}\n     */\n    historicMoment: Number,\n    /**\n     * Additional ArcGIS request parameters\n     * @params {Object|undefined}\n     */\n    params: Object,\n  },\n  data () {\n    return {\n      currentParams: undefined,\n    }\n  },\n  computed: {\n    /**\n     * @returns {string|undefined}\n     */\n    inputLayers () {\n      return isArray(this.layers) ? this.layers.join(',') : this.layers\n    },\n    /**\n     * @type {string|undefined}\n     */\n    inputTime () {\n      return isArray(this.time) ? this.time.join(',') : this.time\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputLayerDefs () {\n      return serialize(this.layerDefs)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputDynamicLayers () {\n      return serialize(this.dynamicLayers)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputLayerTimeOptions () {\n      return serialize(this.layerTimeOptions)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputDatumTransformations () {\n      return serialize(this.datumTransformations)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputMapRangeValues () {\n      return serialize(this.mapRangeValues)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputLayerRangeValues () {\n      return serialize(this.layerRangeValues)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputLayerParameterValues () {\n      return serialize(this.layerParameterValues)\n    },\n    /**\n     * @return {undefined|string}\n     */\n    inputHistoricMoment () {\n      return serialize(this.historicMoment)\n    },\n    /**\n     * @returns {Object|null}\n     */\n    customParams () {\n      return this.params ? cleanArcGisSourceParams(this.params) : undefined\n    },\n    /**\n     * @returns {Object}\n     */\n    inputParams () {\n      return {\n        ...this.customParams || {},\n        LAYERS: this.inputLayers,\n        FORMAT: this.format,\n        LAYERDEFS: this.inputLayerDefs,\n        DYNAMICLAYERS: this.inputDynamicLayers,\n        DPI: this.dpi,\n        TRANSPARENT: this.transparent,\n        TIME: this.inputTime,\n        LAYERTIMEOPTIONS: this.inputLayerTimeOptions,\n        GDBVERSION: this.gdbVersion,\n        MAPSCALE: this.mapScale,\n        ROTATION: this.rotation,\n        DATUMTRANSFORMATIONS: this.inputDatumTransformations,\n        MAPRANGEVALUES: this.inputMapRangeValues,\n        LAYERRANGEVALUES: this.inputLayerRangeValues,\n        LAYERPARAMETERVALUES: this.inputLayerParameterValues,\n        HISTORICMOMENT: this.inputHistoricMoment,\n      }\n    },\n    .../*#__PURE__*/reduce([\n      'format',\n      'inputLayers',\n      'inputLayerDefs',\n      'inputDynamicLayers',\n      'dpi',\n      'transparent',\n      'inputTime',\n      'inputLayerTimeOptions',\n      'gdbVersion',\n      'mapScale',\n      'rotation',\n      'inputDatumTransformations',\n      'inputMapRangeValues',\n      'inputLayerRangeValues',\n      'inputLayerParameterValues',\n      'inputHistoricMoment',\n    ], (props, inProp) => {\n      const prop = inProp.slice(0, 5) === 'input' ? lowerFirst(inProp.slice(5)) : inProp\n      const curProp = 'current' + upperFirst(prop)\n      props[curProp] = function () {\n        return coalesce((this.currentParams || {})[prop.toUpperCase()], (this.inputParams || {})[prop.toUpperCase()])\n      }\n\n      return props\n    }, {}),\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (!isEqual(this.currentParams, this.$source.getParams())) {\n        this.currentParams = this.$source.getParams()\n      }\n    },\n    .../*#__PURE__*/makeWatchers([\n      'currentFormat',\n      'currentLayers',\n      'currentLayerDefs',\n      'currentDynamicLayers',\n      'currentDpi',\n      'currentTransparent',\n      'currentTime',\n      'currentLayerTimeOptions',\n      'currentGdbVersion',\n      'currentMapScale',\n      'currentRotation',\n      'currentDatumTransformations',\n      'currentMapRangeValues',\n      'currentLayerRangeValues',\n      'currentLayerParameterValues',\n      'currentHistoricMoment',\n    ], curProp => function (value) {\n      const prop = lowerFirst(curProp.slice(7))\n      const inProp = hasProp(this, 'input' + upperFirst(prop)) ? 'input' + upperFirst(prop) : prop\n\n      if (isEqual(value, this[inProp])) return\n\n      this.$emit('update:' + prop, isObjectLike(value) ? clonePlainObject(value) : value)\n    }),\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'hidpi',\n      'inputParams',\n      'currentParams',\n    ], [\n      'inputParams',\n      'currentParams',\n    ]),\n  },\n  created () {\n    this.currentParams = this.inputParams && clonePlainObject(this.inputParams)\n  },\n  methods: {\n    /**\n     * @returns {Object}\n     */\n    getParams () {\n      return coalesce(this.$source?.getParams(), this.currentParams)\n    },\n    /**\n     * @param {Object} params\n     */\n    updateParams (params) {\n      params = reduce({ ...this.currentParams, ...params }, (params, value, name) => ({\n        ...params,\n        [name.toUpperCase()]: value,\n      }), {})\n\n      if (!isEqual(params, this.currentParams)) {\n        this.currentParams = params\n      }\n      if (this.$source && !isEqual(params, this.$source.getParams())) {\n        this.$source.updateParams(params)\n      }\n    },\n    /**\n     * @param {string} param\n     * @param {*} value\n     */\n    updateParam (param, value) {\n      this.updateParams({ [param.toUpperCase()]: value })\n    },\n    /**\n     * @param {Object|undefined} value\n     * @protected\n     */\n    inputParamsChanged (value) {\n      this.updateParams(value)\n    },\n    /**\n     * @param {Object|undefined} value\n     * @protected\n     */\n    currentParamsChanged (value) {\n      value = value ? cleanArcGisSourceParams(value) : undefined\n      if (isEqual(value, this.customParams)) return\n\n      this.$emit('update:params', value && clonePlainObject(value))\n    },\n  },\n}\n","import {\n  COORD_PRECISION,\n  EPSG_3857,\n  readGeoJsonFeature,\n  readGeoJsonGeometry,\n  transformExtent,\n  transformLine,\n  transformMultiLine,\n  transformMultiPoint,\n  transformMultiPolygon,\n  transformPoint,\n  transformPolygon,\n  writeGeoJsonFeature,\n  writeGeoJsonGeometry,\n} from '../ol-ext'\nimport { coalesce } from '../utils'\n\n/**\n * Mixin with helpers for projection transforms between current view projection and global defined projection.\n */\nexport default {\n  computed: {\n    /**\n     * @return {module:ol/proj~ProjectionLike}\n     */\n    resolvedViewProjection () {\n      return coalesce(\n        this.viewProjection, // may or may not be present\n        EPSG_3857,\n      )\n    },\n    /**\n     * @return {module:ol/proj~ProjectionLike}\n     */\n    resolvedDataProjection () {\n      return coalesce(\n        this.dataProjection, // may or may not be present\n        this.$options?.dataProjection, // may or may not be present\n        this.resolvedViewProjection,\n      )\n    },\n  },\n  watch: {\n    resolvedViewProjection (...args) {\n      return this.resolvedViewProjectionChanged(...args)\n    },\n    resolvedDataProjection (...args) {\n      return this.resolvedDataProjectionChanged(...args)\n    },\n  },\n  methods: {\n    pointToViewProj (point, precision = COORD_PRECISION) {\n      return transformPoint(point, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    pointToDataProj (point, precision = COORD_PRECISION) {\n      return transformPoint(point, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    lineToViewProj (line, precision = COORD_PRECISION) {\n      return transformLine(line, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    lineToDataProj (line, precision = COORD_PRECISION) {\n      return transformLine(line, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    polygonToViewProj (polygon, precision = COORD_PRECISION) {\n      return transformPolygon(polygon, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    polygonToDataProj (polygon, precision = COORD_PRECISION) {\n      return transformPolygon(polygon, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    multiPointToViewProj (multiPoint, precision = COORD_PRECISION) {\n      return transformMultiPoint(multiPoint, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    multiPointToDataProj (multiPoint, precision = COORD_PRECISION) {\n      return transformMultiPoint(multiPoint, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    multiLineToViewProj (multiLine, precision = COORD_PRECISION) {\n      return transformMultiLine(multiLine, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    multiLineToDataProj (multiLine, precision = COORD_PRECISION) {\n      return transformMultiLine(multiLine, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    multiPolygonToViewProj (multiPolygon, precision = COORD_PRECISION) {\n      return transformMultiPolygon(multiPolygon, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    multiPolygonToDataProj (multiPolygon, precision = COORD_PRECISION) {\n      return transformMultiPolygon(multiPolygon, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n\n    extentToViewProj (extent, precision = COORD_PRECISION) {\n      return transformExtent(extent, this.resolvedDataProjection, this.resolvedViewProjection, precision)\n    },\n    extentToDataProj (extent, precision = COORD_PRECISION) {\n      return transformExtent(extent, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n\n    writeGeometryInDataProj (geometry, precision = COORD_PRECISION) {\n      return writeGeoJsonGeometry(geometry, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    writeGeometryInViewProj (geometry, precision = COORD_PRECISION) {\n      return writeGeoJsonGeometry(geometry, this.resolvedViewProjection, this.resolvedViewProjection, precision)\n    },\n    readGeometryInDataProj (geometry, precision = COORD_PRECISION) {\n      return readGeoJsonGeometry(geometry, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    readGeometryInViewProj (geometry, precision = COORD_PRECISION) {\n      return readGeoJsonGeometry(geometry, this.resolvedViewProjection, this.resolvedViewProjection, precision)\n    },\n\n    writeFeatureInDataProj (feature, precision = COORD_PRECISION) {\n      return writeGeoJsonFeature(feature, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    writeFeatureInViewProj (feature, precision = COORD_PRECISION) {\n      return writeGeoJsonFeature(feature, this.resolvedViewProjection, this.resolvedViewProjection, precision)\n    },\n    readFeatureInDataProj (feature, precision = COORD_PRECISION) {\n      return readGeoJsonFeature(feature, this.resolvedViewProjection, this.resolvedDataProjection, precision)\n    },\n    readFeatureInViewProj (feature, precision = COORD_PRECISION) {\n      return readGeoJsonFeature(feature, this.resolvedViewProjection, this.resolvedViewProjection, precision)\n    },\n    /**\n     * @param {string} value\n     * @param {string} prev\n     * @protected\n     */\n    resolvedViewProjectionChanged (value, prev) {\n      if (value === prev) return\n\n      this.$emit('update:viewProjection', value)\n    },\n    /**\n     * @param {string} value\n     * @param {string} prev\n     * @protected\n     */\n    resolvedDataProjectionChanged (value, prev) {\n      if (value === prev) return\n\n      this.$emit('update:dataProjection', value)\n    },\n  },\n}\n","import { extractChildren } from '../utils'\n\n/**\n * Renders stub VNode for component.\n */\nexport default {\n  /**\n   * @param {function} h\n   * @returns {VNode}\n   */\n  render (h) {\n    const options = this.$options?.stubVNode || {}\n    // render as HTML comment\n    if (options.empty) {\n      const vnode = h()\n      if (typeof options.empty === 'string') {\n        vnode.text = options.empty\n      } else if (typeof options.empty === 'function') {\n        vnode.text = this::options.empty()\n      }\n\n      return vnode\n    }\n\n    let children\n    if (options.slots === false) {\n      children = undefined\n    } else {\n      children = extractChildren(this.$slots, options.slots)\n    }\n\n    const attrs = typeof options.attrs === 'function'\n      ? this::options.attrs()\n      : options.attrs\n\n    const data = {\n      attrs,\n      style: {\n        display: 'none !important',\n      },\n    }\n\n    return h(options.tag || 'i', data, children)\n  },\n}\n","import { race as raceObs } from 'rxjs'\nimport { filter as filterObs, mapTo } from 'rxjs/operators'\nimport { fromVueEvent as obsFromVueEvent, fromVueWatcher as obsFromVueWatcher } from '../rx-ext'\nimport { hasProp, stubTrue, waitFor } from '../utils'\nimport olCmp, { CanceledError, isCreateError, OlObjectEvent } from './ol-cmp'\n\nexport default {\n  methods: {\n    async beforeInit () {\n      try {\n        await waitFor(\n          () => this.$mapVm != null,\n          raceObs(\n            this.$olObjectEvents.pipe(\n              filterObs(({ name, args }) => {\n                return name === OlObjectEvent.ERROR &&\n                  args[0] instanceof CanceledError\n              }),\n            ),\n            obsFromVueEvent(this.$eventBus, OlObjectEvent.ERROR).pipe(\n              filterObs(([err, vm]) => {\n                return isCreateError(err) &&\n                  hasProp(vm, '$map') &&\n                  this.$vq.closest(vm)\n              }),\n            ),\n          ).pipe(\n            mapTo(stubTrue()),\n          ),\n        )\n        if (this.$mapVm.resolvedViewProjection !== this.viewProjection) {\n          this.viewProjection = this.$mapVm.resolvedViewProjection\n        }\n        if (this.$mapVm.resolvedDataProjection !== this.dataProjection) {\n          this.dataProjection = this.$mapVm.resolvedDataProjection\n        }\n        this.subscribeTo(\n          obsFromVueWatcher(this, () => this.$mapVm.resolvedViewProjection),\n          ({ value }) => {\n            if (value !== this.viewProjection) {\n              this.viewProjection = value\n            }\n          },\n        )\n        this.subscribeTo(\n          obsFromVueWatcher(this, () => this.$mapVm.resolvedDataProjection),\n          ({ value }) => {\n            if (value !== this.dataProjection) {\n              this.dataProjection = value\n            }\n          },\n        )\n        await this.$nextTickPromise()\n\n        return this::olCmp.methods.beforeInit()\n      } catch (err) {\n        err.message = `${this.vmName} wait for $mapVm injection: ${err.message}`\n        throw err\n      }\n    },\n  },\n}\n","import { get as getProj } from 'ol/proj'\nimport { EPSG_3857, getLayerId, initializeLayer, roundExtent, setLayerId, transformExtent } from '../ol-ext'\nimport { fromOlChangeEvent as obsFromOlChangeEvent } from '../rx-ext'\nimport { addPrefix, assert, coalesce, isArray, isEqual, isNumber, mergeDescriptors } from '../utils'\nimport olCmp, { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport projTransforms from './proj-transforms'\nimport stubVNode from './stub-vnode'\nimport waitForMap from './wait-for-map'\n\n/**\n * Base layer mixin.\n */\nexport default {\n  mixins: [\n    stubVNode,\n    projTransforms,\n    olCmp,\n    waitForMap,\n  ],\n  stubVNode: {\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  props: {\n    // ol/layer/Base\n    /**\n     * A CSS class name to set to the layer element.\n     * @type {string}\n     */\n    className: {\n      type: String,\n      default: 'ol-layer',\n    },\n    /**\n     * @type {number}\n     */\n    opacity: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * @type {boolean}\n     */\n    visible: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {number[]|undefined}\n     */\n    extent: {\n      type: Array,\n      validator: value => value.length === 4 && value.every(isNumber),\n    },\n    /**\n     * @type {string|undefined}\n     */\n    extentProjection: {\n      type: String,\n      validator: value => !!getProj(value),\n    },\n    /**\n     * @type {number|undefined}\n     */\n    zIndex: Number,\n    /**\n     * @type {number|undefined}\n     */\n    minResolution: Number,\n    /**\n     * @type {number|undefined}\n     */\n    maxResolution: Number,\n    /**\n     * @type {number|undefined}\n     */\n    minZoom: Number,\n    /**\n     * @type {number|undefined}\n     */\n    maxZoom: Number,\n  },\n  data () {\n    return {\n      viewProjection: EPSG_3857,\n      dataProjection: EPSG_3857,\n      currentExtentViewProj: roundExtent(this.extent),\n      currentMaxResolution: this.maxResolution,\n      currentMinResolution: this.minResolution,\n      currentMaxZoom: this.maxZoom,\n      currentMinZoom: this.minZoom,\n      currentOpacity: this.opacity,\n      currentVisible: this.visible,\n      currentZIndex: this.zIndex,\n    }\n  },\n  computed: {\n    resolvedExtentProjection () {\n      return coalesce(this.extentProjection, this.resolvedDataProjection)\n    },\n    extentDataProj () {\n      return roundExtent(this.extent)\n    },\n    extentViewProj () {\n      return transformExtent(this.extent, this.resolvedExtentProjection, this.resolvedViewProjection)\n    },\n    currentExtentDataProj () {\n      return transformExtent(this.currentExtentViewProj, this.resolvedViewProjection, this.resolvedExtentProjection)\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$layer) return\n\n      if (!isEqual(this.currentExtentViewProj, this.$layer.getExtent())) {\n        this.currentExtentViewProj = this.$layer.getExtent()\n      }\n      if (this.currentMaxResolution !== this.$layer.getMaxResolution()) {\n        this.currentMaxResolution = this.$layer.getMaxResolution()\n      }\n      if (this.currentMinResolution !== this.$layer.getMinResolution()) {\n        this.currentMinResolution = this.$layer.getMinResolution()\n      }\n      if (this.currentMaxZoom !== this.$layer.getMaxZoom()) {\n        this.currentMaxZoom = this.$layer.getMaxZoom()\n      }\n      if (this.currentMinZoom !== this.$layer.getMinZoom()) {\n        this.currentMinZoom = this.$layer.getMinZoom()\n      }\n      if (this.currentOpacity !== this.$layer.getOpacity()) {\n        this.currentOpacity = this.$layer.getOpacity()\n      }\n      if (this.currentVisible !== this.$layer.getVisible()) {\n        this.currentVisible = this.$layer.getVisible()\n      }\n      if (this.currentZIndex !== this.$layer.getZIndex()) {\n        this.currentZIndex = this.$layer.getZIndex()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'className',\n      'opacity',\n      'currentOpacity',\n      'visible',\n      'currentVisible',\n      'extentViewProj',\n      'currentExtentDataProj',\n      'zIndex',\n      'currentZIndex',\n      'minResolution',\n      'currentMinResolution',\n      'maxResolution',\n      'currentMaxResolution',\n      'minZoom',\n      'currentMinZoom',\n      'maxZoom',\n      'currentMaxZoom',\n    ], [\n      'extentViewProj',\n      'currentExtentDataProj',\n    ]),\n  },\n  created () {\n    this::defineServices()\n\n    this.currentExtentViewProj = this.extentViewProj?.slice()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      await Promise.all([\n        this::olCmp.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * @return {Promise<module:ol/layer/Base~BaseLayer>}\n     * @protected\n     */\n    async createOlObject () {\n      return initializeLayer(await this.createLayer(), this.currentId)\n    },\n    /**\n     * @return {module:ol/layer/Base~BaseLayer|Promise<module:ol/layer/Base~BaseLayer>}\n     * @protected\n     * @abstract\n     */\n    createLayer () {\n      throw new Error(`${this.vmName} not implemented method: createLayer`)\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$layersContainer?.addLayer(this)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      this.$layersContainer?.removeLayer(this)\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        {\n          get layerVm () { return vm },\n        },\n      )\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n      this::subscribeToLayerEvents()\n    },\n    /**\n     * @returns {string|number}\n     * @protected\n     */\n    getIdInternal () {\n      return getLayerId(this.$layer)\n    },\n    /**\n     * @param {string|number} id\n     * @protected\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setLayerId(this.$layer, id)\n    },\n    /**\n     * @return {Promise<module:ol/layer/Base~BaseLayer>}\n     */\n    resolveLayer: olCmp.methods.resolveOlObject,\n    /**\n     * @param {boolean} [viewProj=false]\n     * @returns {number[]|undefined}\n     */\n    getExtent (viewProj = false) {\n      if (!this.$layer) {\n        return viewProj ? this.currentExtentViewProj : this.currentExtentDataProj\n      }\n\n      const extent = this.$layer.getExtent()\n      if (viewProj) return roundExtent(extent)\n\n      return transformExtent(extent, this.resolvedViewProjection, this.resolvedExtentProjection)\n    },\n    /**\n     * @param {number[]} extent\n     * @param {boolean} [viewProj=false]\n     */\n    setExtent (extent, viewProj = false) {\n      assert(extent == null || (isArray(extent) && extent.length === 4), 'Invalid extent')\n      extent = viewProj\n        ? roundExtent(extent)\n        : transformExtent(extent, this.resolvedExtentProjection, this.resolvedViewProjection)\n\n      if (!isEqual(extent, this.currentExtentViewProj)) {\n        this.currentExtentViewProj = extent\n      }\n      if (this.$layer && !isEqual(extent, this.$layer.getExtent())) {\n        this.$layer.setExtent(extent)\n      }\n    },\n    /**\n     * @returns {number|undefined}\n     */\n    getMaxResolution () {\n      return coalesce(this.$layer?.getMaxResolution(), this.currentMaxResolution)\n    },\n    /**\n     * @param {number} resolution\n     */\n    setMaxResolution (resolution) {\n      resolution = Number(resolution)\n      assert(isNumber(resolution), 'Invalid max resolution')\n\n      if (resolution !== this.currentMaxResolution) {\n        this.currentMaxResolution = resolution\n      }\n      if (this.$layer && resolution !== this.$layer.getMaxResolution()) {\n        this.$layer.setMaxResolution(resolution)\n      }\n    },\n    /**\n     * @returns {number|undefined}\n     */\n    getMinResolution () {\n      return coalesce(this.$layer?.getMinResolution(), this.currentMinResolution)\n    },\n    /**\n     * @param {number} resolution\n     */\n    setMinResolution (resolution) {\n      resolution = Number(resolution)\n      assert(isNumber(resolution), 'Invalid min resolution')\n\n      if (resolution !== this.currentMinResolution) {\n        this.currentMinResolution = resolution\n      }\n      if (this.$layer && resolution !== this.$layer.getMinResolution()) {\n        this.$layer.getMinResolution(resolution)\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getMaxZoom () {\n      return coalesce(this.$layer?.getMaxZoom(), this.currentMaxZoom)\n    },\n    /**\n     * @param {number} zoom\n     */\n    setMaxZoom (zoom) {\n      zoom = Number(zoom)\n      assert(isNumber(zoom), 'Invalid max zoom')\n\n      if (zoom !== this.currentMaxZoom) {\n        this.currentMaxZoom = zoom\n      }\n      if (this.$layer && zoom !== this.$layer.getMaxZoom()) {\n        this.$layer.setMaxZoom(zoom)\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getMinZoom () {\n      return coalesce(this.$layer?.getMinZoom(), this.currentMinZoom)\n    },\n    /**\n     * @param {number} zoom\n     */\n    setMinZoom (zoom) {\n      zoom = Number(zoom)\n      assert(isNumber(zoom), 'Invalid min zoom')\n\n      if (zoom !== this.currentMinZoom) {\n        this.currentMinZoom = zoom\n      }\n      if (this.$layer && zoom !== this.$layer.getMinZoom()) {\n        this.$layer.setMinZoom(zoom)\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getOpacity () {\n      return coalesce(this.$layer?.getOpacity(), this.currentOpacity)\n    },\n    /**\n     * @param {number} opacity\n     */\n    setOpacity (opacity) {\n      opacity = Number(opacity)\n      assert(isNumber(opacity), 'Invalid opacity')\n\n      if (opacity !== this.currentOpacity) {\n        this.currentOpacity = opacity\n      }\n      if (this.$layer && opacity !== this.$layer.getOpacity()) {\n        this.$layer.setOpacity(opacity)\n      }\n    },\n    /**\n     * @returns {boolean}\n     */\n    getVisible () {\n      return coalesce(this.$layer?.getVisible(), this.currentVisible)\n    },\n    /**\n     * @param {boolean} visible\n     */\n    setVisible (visible) {\n      visible = !!visible\n\n      if (visible !== this.currentVisible) {\n        this.currentVisible = visible\n      }\n      if (this.$layer && visible !== this.$layer.getVisible()) {\n        this.$layer.setVisible(visible)\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getZIndex () {\n      return coalesce(this.$layer?.getZIndex(), this.currentZIndex)\n    },\n    /**\n     * @param {number} zIndex\n     */\n    setZIndex (zIndex) {\n      zIndex = Number(zIndex)\n      assert(isNumber(zIndex), 'Invalid zIndex')\n\n      if (zIndex !== this.currentZIndex) {\n        this.currentZIndex = zIndex\n      }\n      if (this.$layer && zIndex !== this.$layer.getZIndex()) {\n        this.$layer.setZIndex(zIndex)\n      }\n    },\n    /**\n     * @param {number[]} pixel\n     * @return {boolean}\n     */\n    async isAtPixel (pixel) {\n      const layer = await this.resolveLayer()\n\n      return this.$mapVm.forEachLayerAtPixel(pixel, mapLayer => mapLayer === layer)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    opacityChanged (value) {\n      this.setOpacity(value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    currentOpacityChanged (value) {\n      if (value === this.opacity) return\n\n      this.$emit('update:opacity', value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    visibleChanged (value) {\n      this.setVisible(value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    currentVisibleChanged (value) {\n      if (value === this.visible) return\n\n      this.$emit('update:visible', value)\n    },\n    /**\n     * @param {number[]|undefined} value\n     * @protected\n     */\n    extentViewProjChanged (value) {\n      this.setExtent(value, true)\n    },\n    /**\n     * @param {number[]|undefined} value\n     * @protected\n     */\n    currentExtentDataProjChanged (value) {\n      if (isEqual(value, this.extentDataProj)) return\n\n      this.$emit('update:extent', value.slice())\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    zIndexChanged (value) {\n      this.setZIndex(value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    currentZIndexChanged (value) {\n      if (value === this.zIndex) return\n\n      this.$emit('update:zIndex', value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    minResolutionChanged (value) {\n      this.setMinResolution(value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    currentMinResolutionChanged (value) {\n      if (value === this.minResolution) return\n\n      this.$emit('update:minResolution', value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    maxResolutionChanged (value) {\n      this.setMaxResolution(value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    currentMaxResolutionChanged (value) {\n      if (value === this.maxResolution) return\n\n      this.$emit('update:maxResolution', value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    minZoomChanged (value) {\n      this.setMinZoom(value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    currentMinZoomChanged (value) {\n      if (value === this.minZoom) return\n\n      this.$emit('update:minZoom', value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    maxZoomChanged (value) {\n      this.setMaxZoom(value)\n    },\n    /**\n     * @param {number|undefined} value\n     * @protected\n     */\n    currentMaxZoomChanged (value) {\n      if (value === this.maxZoom) return\n\n      this.$emit('update:maxZoom', value)\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {module:ol/layer/Base~BaseLayer|undefined}\n     */\n    $layer: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $viewVm: {\n      enumerable: true,\n      get: () => this.$services?.viewVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $layersContainer: {\n      enumerable: true,\n      get: () => this.$services?.layersContainer,\n    },\n  })\n}\n\nasync function subscribeToLayerEvents () {\n  const setterKey = addPrefix('set')\n  const propChanges = obsFromOlChangeEvent(this.$layer, [\n    'opacity',\n    'visible',\n    'zIndex',\n    'minResolution',\n    'maxResolution',\n    'minZoom',\n    'maxZoom',\n    'extent',\n  ], true, evt => ({\n    ...evt,\n    setter: val => {\n      const args = [val]\n      if (evt.prop === 'extent') {\n        args.push(true)\n      }\n      this[setterKey(evt.prop)](...args)\n    },\n  }))\n  this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n}\n","import { Collection } from 'ol'\nimport CollectionEventType from 'ol/CollectionEventType'\nimport { Control, defaults as createDefaultControls } from 'ol/control'\nimport { getUid } from 'ol/util'\nimport { merge as mergeObs } from 'rxjs'\nimport { map as mapObs, tap } from 'rxjs/operators'\nimport { getControlId, initializeControl } from '../ol-ext'\nimport { bufferDebounceTime, fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { find, forEach, instanceOf, isArray, isPlainObject } from '../utils'\nimport identMap from './ident-map'\nimport { FRAME_TIME, makeChangeOrRecreateWatchers } from './ol-cmp'\nimport rxSubs from './rx-subs'\n\n/**\n * @typedef {module:ol/control/Control~Control|Object} ControlLike\n */\n\n/**\n * Controls collection\n */\nexport default {\n  mixins: [\n    identMap,\n    rxSubs,\n  ],\n  computed: {\n    /**\n     * @type {string|undefined}\n     */\n    controlsCollectionIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'controls_collection')\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'controlsCollectionIdent',\n    ]),\n  },\n  created () {\n    /**\n     * @type {module:ol/Collection~Collection<module:ol/control/Control~Control>}\n     * @private\n     */\n    this._controlsCollection = this.instanceFactoryCall(this.controlsCollectionIdent, () => new Collection())\n    this._controlSubs = {}\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly controlsContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get controlsContainer () { return vm },\n      }\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::subscribeToCollectionEvents()\n    },\n    /**\n     * @param {ControlLike[]|module:ol/Collection~Collection<ControlLike>} defaultControls\n     */\n    initDefaultControls (defaultControls) {\n      this.getControls().forEach(control => {\n        if (control.get('vl_default')) {\n          this.removeControl(control)\n        }\n      })\n\n      let controls\n      if (isArray(defaultControls) || defaultControls instanceof Collection) {\n        controls = defaultControls\n      } else if (defaultControls !== false) {\n        controls = createDefaultControls(\n          isPlainObject(defaultControls)\n            ? defaultControls\n            : undefined,\n        )\n      }\n      if (controls) {\n        controls.forEach(control => control.set('vl_default', true))\n        this.addControls(controls)\n      }\n    },\n    /**\n     * @param {ControlLike} control\n     * @return {Control}\n     */\n    initializeControl (control) {\n      control = control?.$control || control\n      instanceOf(control, Control)\n\n      return initializeControl(control)\n    },\n    /**\n     * @param {ControlLike[]|module:ol/Collection~Collection<ControlLike>} controls\n     */\n    addControls (controls) {\n      forEach(controls, ::this.addControl)\n    },\n    /**\n     * @param {ControlLike} control\n     */\n    addControl (control) {\n      control = this.initializeControl(control)\n\n      if (this.getControlById(getControlId(control))) return\n\n      this.$controlsCollection.push(control)\n    },\n    /**\n     * @param {ControlLike[]|module:ol/Collection~Collection<ControlLike>} controls\n     */\n    removeControls (controls) {\n      forEach(controls, ::this.removeControl)\n    },\n    /**\n     * @param {ControlLike} control\n     */\n    removeControl (control) {\n      control = this.getControlById(getControlId(control?.$control || control))\n      if (!control) return\n\n      this.$controlsCollection.remove(control)\n    },\n    /**\n     * @return {void}\n     */\n    clearControls () {\n      this.$controlsCollection.clear()\n    },\n    /**\n     * @returns {Array<module:ol/control/Control~Control>}\n     */\n    getControls () {\n      return this.$controlsCollection.getArray().slice()\n    },\n    /**\n     * @returns {module:ol/Collection~Collection<module:ol/control/Control~Control>}\n     */\n    getControlsCollection () {\n      return this._controlsCollection\n    },\n    /**\n     * @param {string|number} controlId\n     * @returns {ControlLike}\n     */\n    getControlById (controlId) {\n      return find(this.getControls(), control => getControlId(control) === controlId)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    controlsCollectionIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.$controlsCollection) {\n        this.setInstance(value, this.$controlsCollection)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $controlsCollection: {\n      enumerable: true,\n      get: this.getControlsCollection,\n    },\n  })\n}\n\nfunction subscribeToCollectionEvents () {\n  const adds = obsFromOlEvent(this.$controlsCollection, CollectionEventType.ADD).pipe(\n    mapObs(evt => ({\n      ...evt,\n      element: this.initializeControl(evt.element),\n    })),\n    tap(({ element }) => {\n      const uid = getUid(element)\n      const propChanges = obsFromOlChangeEvent(element, 'id', true)\n      this._controlSubs[uid] = this.subscribeTo(propChanges, ::this.scheduleRefresh)\n    }),\n  )\n  const removes = obsFromOlEvent(this.$controlsCollection, CollectionEventType.REMOVE).pipe(\n    tap(({ element }) => {\n      const uid = getUid(element)\n      if (this._controlSubs[uid]) {\n        this.unsubscribe(this._controlSubs[uid])\n        delete this._controlSubs[uid]\n      }\n    }),\n  )\n  const events = mergeObs(adds, removes).pipe(\n    bufferDebounceTime(FRAME_TIME),\n  )\n  this.subscribeTo(events, async events => {\n    await this.debounceChanged()\n    forEach(events, ({ type, element }) => {\n      this.$emit(type + 'control', element)\n      // todo remove in v0.13.x\n      this.$emit(type + ':control', element)\n    })\n  })\n}\n","import { Geometry } from 'ol/geom'\nimport { isGeoJSONGeometry } from '../ol-ext'\nimport { assert, coalesce } from '../utils'\nimport projTransforms from './proj-transforms'\n\n/**\n * @typedef {Geometry|Object} GeometryLike\n */\n/**\n * @typedef {Object} GeometryTarget\n * @property {function(): Geometry|undefined} getGeometry\n * @property {function(Geometry|undefined): void} setGeometry\n */\n\n/**\n * Geometry container\n */\nexport default {\n  mixins: [\n    projTransforms,\n  ],\n  created () {\n    this._geometry = undefined\n    this._geometryVm = undefined\n\n    this::defineService()\n  },\n  methods: {\n    /**\n     * @returns {{readonly geometryContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get geometryContainer () { return vm },\n      }\n    },\n    /**\n     * @return {GeometryTarget|undefined}\n     * @protected\n     */\n    getGeometryTarget () {\n      throw new Error(`${this.vmName} not implemented method: getGeometryTarget()`)\n    },\n    /**\n     * @return {module:ol/geom/Geometry~Geometry|undefined}\n     */\n    getGeometry () {\n      return coalesce(this.getGeometryTarget()?.getGeometry(), this._geometry)\n    },\n    /**\n     * @return {Object}\n     */\n    getGeometryVm () {\n      return this._geometryVm\n    },\n    /**\n     * @param {GeometryLike|undefined} geom\n     * @param {boolean} [viewProj=false]\n     */\n    setGeometry (geom, viewProj = false) {\n      geom = geom?.$geometry || geom\n      if (isGeoJSONGeometry(geom)) {\n        if (viewProj) {\n          geom = this.readGeometryInViewProj(geom)\n        } else {\n          geom = this.readGeometryInDataProj(geom)\n        }\n      }\n      geom || (geom = undefined)\n      assert(!geom || geom instanceof Geometry, 'Invalid geometry')\n\n      const geomTarget = this.getGeometryTarget()\n      if (geomTarget && geom !== geomTarget.getGeometry()) {\n        geomTarget.setGeometry(geom)\n        this.scheduleRefresh()\n      }\n      if (geom !== this._geometry) {\n        this._geometry = geom\n        this._geometryVm = geom?.vm && geom.vm[0]\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineService () {\n  Object.defineProperties(this, {\n    $geometry: {\n      enumerable: true,\n      get: this.getGeometry,\n    },\n    $geometryVm: {\n      enumerable: true,\n      get: this.getGeometryVm,\n    },\n  })\n}\n","import { Style } from 'ol/style'\nimport { coalesce, hasProp, isArray, isEqual, isFunction } from '../utils'\n\n/**\n * @typedef {\n *            module:ol/style/Style~Style |\n *            Array<module:ol/style/Style~Style> |\n *            module:ol/style/Style~StyleFunction\n *          } OlStyleLike\n */\n/**\n * @typedef {Object} StyleTarget\n * @property {function(OlStyleLike|undefined): void} setStyle\n * @property {function(): OlStyleLike|undefined} getStyle\n */\n/**\n * @typedef {OlStyleLike|Object} StyleLike\n */\n\n/**\n * Style container mixin.\n */\nexport default {\n  created () {\n    this._style = undefined\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly styleContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get styleContainer () { return vm },\n      }\n    },\n    /**\n     * Default style factory\n     * @return {OlStyleLike|undefined}\n     * @protected\n     */\n    getDefaultStyle () {},\n    /**\n     * Returns OL object that can be styled (i.e. has setStyle/getStyle methods) or undefined\n     * @return {StyleTarget|undefined}\n     * @protected\n     * @abstract\n     */\n    getStyleTarget () {\n      throw new Error(`${this.vmName} not implemented method: getStyleTarget()`)\n    },\n    /**\n     * @return {StyleLike|undefined}\n     */\n    getStyle () {\n      return coalesce(this.getStyleTarget()?.getStyle(), this._style)\n    },\n    /**\n     * @param {StyleLike} style\n     */\n    addStyle (style) {\n      if (!style) return\n\n      const olStyle = style?.$style || style\n      let currentStyle = this._style\n\n      if (isFunction(olStyle)) {\n        if (currentStyle) {\n          if (process.env.NODE_ENV !== 'production') {\n            this.$logger.warn('Component already has style components among its descendants. ' +\n              'Avoid use of multiple vl-style-func or combining vl-style-func with vl-style-box on the same level.')\n          }\n        }\n\n        currentStyle = style\n      } else {\n        if (!isArray(currentStyle)) {\n          if (currentStyle) {\n            if (process.env.NODE_ENV !== 'production') {\n              this.$logger.warn('Component already has style components among its descendants. ' +\n                'Avoid use of multiple vl-style-func or combining vl-style-func with vl-style-box on the same level.')\n            }\n          }\n\n          currentStyle = []\n        }\n\n        if (!currentStyle.includes(olStyle)) {\n          currentStyle.push(olStyle)\n        }\n      }\n\n      this.setStyle(currentStyle)\n    },\n    /**\n     * @param {StyleLike|undefined} style\n     */\n    removeStyle (style) {\n      if (!style) return\n\n      style = style?.$style || style\n      let currentStyle = this._style\n\n      if (currentStyle === style) {\n        currentStyle = undefined\n      } else if (isArray(currentStyle)) {\n        currentStyle = currentStyle.filter(s => s !== style)\n\n        if (currentStyle.length === 0) {\n          currentStyle = undefined\n        }\n      }\n\n      this.setStyle(currentStyle)\n    },\n    /**\n     * @param {StyleLike|undefined} style\n     */\n    setStyle (style) {\n      style || (style = undefined)\n      if (style) {\n        if (hasProp(style, '$style') || hasProp(style, '$styleFunction')) {\n          style = style.$style || style.$styleFunction\n        } else if (isArray(style)) {\n          style = style.map(style => style?.$style || style)\n        }\n        if (isFunction(style)) {\n          style = this.createStyleFunc(style, this.getDefaultStyle())\n        } else {\n          isArray(style) || (style = [style])\n          style.length > 0 || (style = undefined)\n        }\n      }\n\n      const styleTarget = this.getStyleTarget()\n      if (styleTarget && !isEqual(style, styleTarget.getStyle())) {\n        styleTarget.setStyle(style)\n        this.scheduleRefresh()\n      }\n      if (!isEqual(style, this._style)) {\n        this._style = style\n        this.scheduleRefresh()\n      }\n    },\n    /**\n     * Style function factory\n     * @param {StyleLike|undefined} style\n     * @param {StyleLike|undefined} defaultStyle\n     * @returns {module:ol/style/Style~StyleFunction}\n     * @protected\n     */\n    createStyleFunc (style, defaultStyle) {\n      return function __styleFunc (feature, resolution) {\n        if (!feature.getGeometry()) return\n\n        let compiledStyle\n        if (style && isFunction(style)) {\n          // style - custom ol/style/Style~StyleFunction\n          compiledStyle = style(feature, resolution)\n        } else if (isArray(style)) {\n          // style - array of ol/style/Style objects\n          compiledStyle = style.slice()\n        }\n        // not empty or null style\n        if (\n          compiledStyle == null ||\n          (isArray(compiledStyle) && compiledStyle.length) ||\n          compiledStyle instanceof Style\n        ) {\n          return compiledStyle\n        }\n        // fallback to default style\n        if (defaultStyle) {\n          return isFunction(defaultStyle) ? defaultStyle(feature, resolution) : defaultStyle\n        }\n\n        return null\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $style: {\n      enumerable: true,\n      get: this.getStyle,\n    },\n  })\n}\n","import { Feature } from 'ol'\nimport ObjectEventType from 'ol/ObjectEventType'\nimport { race as raceObs } from 'rxjs'\nimport { distinctUntilChanged, filter as filterObs, mapTo } from 'rxjs/operators'\nimport {\n  dumpStyle,\n  EPSG_3857,\n  findPointOnSurface,\n  getFeatureId,\n  getFeatureProperties,\n  initializeFeature,\n  setFeatureId,\n  setFeatureProperties,\n} from '../ol-ext'\nimport { fromOlEvent as obsFromOlEvent, fromVueEvent as obsFromVueEvent } from '../rx-ext'\nimport {\n  assert,\n  clonePlainObject,\n  coalesce,\n  hasProp,\n  isArray,\n  isEmpty,\n  isEqual,\n  isFunction,\n  isObjectLike,\n  isString,\n  mergeDescriptors,\n  stubObject,\n  stubTrue,\n  waitFor,\n} from '../utils'\nimport geometryContainer from './geometry-container'\nimport olCmp, {\n  CanceledError,\n  isCreateError,\n  isMountError,\n  makeChangeOrRecreateWatchers,\n  OlObjectEvent,\n} from './ol-cmp'\nimport projTransforms from './proj-transforms'\nimport stubVNode from './stub-vnode'\nimport styleContainer from './style-container'\nimport waitForMap from './wait-for-map'\n\n/**\n * A vector object for geographic features with a geometry and other attribute properties,\n * similar to the features in vector file formats like **GeoJSON**.\n */\nexport default {\n  mixins: [\n    stubVNode,\n    projTransforms,\n    geometryContainer,\n    styleContainer,\n    olCmp,\n    waitForMap,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  props: {\n    properties: {\n      type: Object,\n      default: stubObject,\n    },\n  },\n  data () {\n    return {\n      viewProjection: EPSG_3857,\n      dataProjection: EPSG_3857,\n      currentProperties: clonePlainObject(this.properties),\n      currentGeometryName: 'geometry',\n    }\n  },\n  computed: {\n    geometryDataProj () {\n      if (!(this.rev && this.$geometry)) return\n\n      return this.writeGeometryInDataProj(this.$geometry)\n    },\n    geometryViewProj () {\n      if (!(this.rev && this.$geometry)) return\n\n      return this.writeGeometryInViewProj(this.$geometry)\n    },\n    pointDataProj () {\n      return this.pointToDataProj(this.pointViewProj)\n    },\n    pointViewProj () {\n      if (!(this.rev && this.$geometry)) return\n\n      return findPointOnSurface(this.$geometry)\n    },\n    style () {\n      if (!(this.rev && this.$style)) return\n\n      let style = this.$style\n      if (isFunction(style)) return style\n      if (!style) return\n\n      isArray(style) || (style = [style])\n\n      return style.map(style => dumpStyle(style, geom => this.writeGeometryInDataProj(geom)))\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$feature) return\n\n      if (!isEqual(this.currentProperties, getFeatureProperties(this.$feature))) {\n        this.currentProperties = getFeatureProperties(this.$feature)\n      }\n      if (this.currentGeometryName !== this.$feature.getGeometryName()) {\n        this.currentGeometryName = this.$feature.getGeometryName()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'properties',\n      'currentProperties',\n      'currentGeometryName',\n      'geometryDataProj',\n      'pointDataProj',\n      'style',\n    ], [\n      'properties',\n      'currentProperties',\n      'geometryDataProj',\n      'pointDataProj',\n      'style',\n    ]),\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      await Promise.all([\n        this::olCmp.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * Create feature without inner style applying, feature level style\n     * will be applied in the layer level style function.\n     * @return {module:ol/Feature~Feature}\n     * @protected\n     */\n    createOlObject () {\n      const feature = initializeFeature(this.createFeature(), this.currentId)\n      feature.setGeometryName(this.currentGeometryName)\n      feature.setGeometry(this.$geometry)\n      feature.setStyle(this.$style)\n\n      return feature\n    },\n    /**\n     * @returns {Feature}\n     */\n    createFeature () {\n      return new Feature(this.currentProperties)\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeMount () {\n      try {\n        await waitFor(\n          () => this.$geometryVm != null,\n          raceObs(\n            this.$olObjectEvents.pipe(\n              filterObs(({ name, args }) => {\n                return name === OlObjectEvent.ERROR &&\n                  args[0] instanceof CanceledError\n              }),\n            ),\n            obsFromVueEvent(this.$eventBus, ObjectEventType.ERROR).pipe(\n              filterObs(([err, vm]) => {\n                return (isCreateError(err) || isMountError(err)) &&\n                  hasProp(vm, '$geometry') &&\n                  vm.$vq?.closest(this)\n              }),\n            ),\n          ).pipe(\n            mapTo(stubTrue()),\n          ),\n        )\n\n        return this::olCmp.methods.beforeMount()\n      } catch (err) {\n        err.message = `${this.vmName} wait for $geometry failed: ${err.message}`\n        throw err\n      }\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$featuresContainer?.addFeature(this)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      this.$featuresContainer?.removeFeature(this)\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n      this::subscribeToEvents()\n    },\n    /**\n     * @return {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        this::geometryContainer.methods.getServices(),\n        this::styleContainer.methods.getServices(),\n        {\n          get featureVm () { return vm },\n        },\n      )\n    },\n    /**\n     * @return {string|number}\n     */\n    getIdInternal () {\n      return getFeatureId(this.$feature)\n    },\n    /**\n     * @param {string|number} id\n     * @return {void}\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setFeatureId(this.$feature, id)\n    },\n    /**\n     * @return {Promise<Feature>}\n     */\n    resolveFeature: olCmp.methods.resolveOlObject,\n    /**\n     * @return {Feature}\n     * @protected\n     */\n    getGeometryTarget () {\n      return this.$feature\n    },\n    /**\n     * @return {Feature}\n     * @protected\n     */\n    getStyleTarget () {\n      return this.$feature\n    },\n    /**\n     * @return {string}\n     */\n    getGeometryName () {\n      return coalesce(this.$feature?.getGeometryName(), this.currentGeometryName)\n    },\n    /**\n     * @param {string} geometryName\n     */\n    setGeometryName (geometryName) {\n      assert(isString(geometryName) && !isEmpty(geometryName), 'Invalid geometry name')\n\n      if (geometryName !== this.currentGeometryName) {\n        this.currentGeometryName = geometryName\n      }\n      if (this.$feature && geometryName !== this.$feature.getGeometryName()) {\n        this.$feature.setGeometryName(geometryName)\n      }\n    },\n    /**\n     * @return {Object}\n     */\n    getProperties () {\n      return coalesce(this.$feature && getFeatureProperties(this.$feature), this.currentProperties)\n    },\n    /**\n     * @param {Object} properties\n     */\n    setProperties (properties) {\n      properties = getFeatureProperties({ properties })\n\n      if (!isEqual(properties, this.currentProperties)) {\n        this.currentProperties = properties\n      }\n      if (this.$feature && !isEqual(properties, getFeatureProperties(this.$feature))) {\n        setFeatureProperties(this.$feature, properties)\n      }\n    },\n    /**\n     * Checks if feature lies at `pixel`.\n     * @param {number[]} pixel\n     * @return {Promise<boolean>}\n     */\n    async isAtPixel (pixel) {\n      const selfFeature = await this.resolveFeature()\n      let layerFilter\n      if (this.$layerVm) {\n        const selfLayer = await this.$layerVm.resolveLayer()\n        layerFilter = layer => layer === selfLayer\n      }\n\n      return this.$mapVm.forEachFeatureAtPixel(pixel, feature => feature === selfFeature, { layerFilter })\n    },\n    /**\n     * @param {Object|undefined} value\n     * @protected\n     */\n    propertiesChanged (value) {\n      this.setProperties(value)\n    },\n    /**\n     * @param {Object|undefined} value\n     * @protected\n     */\n    currentPropertiesChanged (value) {\n      if (isEqual(value, this.properties)) return\n\n      this.$emit('update:properties', value && clonePlainObject(value))\n    },\n    /**\n     * @param {string} value\n     * @param {string} prev\n     * @protected\n     */\n    currentGeometryNameChanged (value, prev) {\n      if (value === prev) return\n\n      this.$emit('update:geometryName', value)\n    },\n    /**\n     * @param {Object|undefined} value\n     * @param {Object|undefined} prev\n     * @protected\n     */\n    geometryDataProjChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:geometry', value && clonePlainObject(value))\n    },\n    /**\n     * @param {Object|undefined} value\n     * @param {Object|undefined} prev\n     * @protected\n     */\n    pointDataProjChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:point', value && clonePlainObject(value))\n    },\n    /**\n     * @param {Object|Function|Array|undefined} value\n     * @param {Object|Function|Array|undefined} prev\n     * @protected\n     */\n    styleChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:style', isObjectLike(value) ? clonePlainObject(value) : value)\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $feature: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    $layerVm: {\n      enumerable: true,\n      get: () => this.$services?.layerVm,\n    },\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n    $featuresContainer: {\n      enumerable: true,\n      get: () => this.$services?.featuresContainer,\n    },\n  })\n}\n\nasync function subscribeToEvents () {\n  const propChanges = obsFromOlEvent(\n    this.$feature,\n    ObjectEventType.PROPERTYCHANGE,\n    ({ key }) => {\n      switch (key) {\n        case this.$feature.getGeometryName():\n          return {\n            prop: 'geometry',\n            value: this.$feature.getGeometry(),\n            setter: geom => this.setGeometry(geom, true),\n          }\n        default:\n          return {\n            prop: 'properties',\n            value: getFeatureProperties(this.$feature),\n            setter: this.setProperties,\n          }\n      }\n    },\n  ).pipe(\n    distinctUntilChanged(isEqual),\n  )\n  this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n}\n","import {\n  CIRCLE_SERIALIZE_PROP,\n  getFeatureId,\n  getFeatureProperties,\n  initializeFeature,\n  setFeatureId,\n  setFeatureProperties,\n  STYLE_SERIALIZE_PROP,\n} from '../ol-ext'\nimport { get, isEqual, isFunction, isPlainObject } from '../utils'\n\nexport default {\n  methods: {\n    /**\n     * @param {FeatureLike} feature\n     * @param {boolean} [viewProj=false]\n     * @return {Feature}\n     * @protected\n     */\n    initializeFeature (feature, viewProj = false) {\n      feature = feature?.$feature || feature\n      if (isPlainObject(feature)) {\n        if (viewProj) {\n          feature = this.readFeatureInViewProj(feature)\n        } else {\n          feature = this.readFeatureInDataProj(feature)\n        }\n      }\n\n      return initializeFeature(feature)\n    },\n    /**\n     * @param {module:ol/Feature~Feature} feature\n     * @param {module:ol/Feature~Feature} newFeature\n     * @protected\n     */\n    updateFeature (feature, newFeature) {\n      if (this.$mapVm?.isInteracting()) return\n\n      const featureJson = this.writeFeatureInViewProj(feature)\n      const newFeatureJson = this.writeFeatureInViewProj(newFeature)\n\n      if (isEqual(featureJson, newFeatureJson)) return\n\n      if (getFeatureId(feature) !== getFeatureId(newFeature)) {\n        setFeatureId(feature, getFeatureId(newFeature))\n      }\n\n      const properties = getFeatureProperties(newFeature)\n      const currentProperties = getFeatureProperties(feature)\n      if (!isEqual(properties, currentProperties)) {\n        setFeatureProperties(feature, properties)\n      }\n\n      const geomJson = get(newFeatureJson, `properties.${CIRCLE_SERIALIZE_PROP}`) || newFeatureJson.geometry || null\n      const currentGeomJson = get(featureJson, `properties.${CIRCLE_SERIALIZE_PROP}`) || featureJson.geometry || null\n      if (!isEqual(geomJson, currentGeomJson)) {\n        feature.setGeometry(newFeature.getGeometry() || null)\n      }\n\n      const style = newFeature.getStyle()\n      const currentStyle = feature.getStyle()\n      if (isFunction(currentStyle) && isFunction(style)) {\n        if (currentStyle !== style) {\n          feature.setStyle(style)\n        }\n      } else if (isFunction(style)) {\n        feature.setStyle(style)\n      }\n\n      const styleJson = get(newFeatureJson, `properties.${STYLE_SERIALIZE_PROP}`) || null\n      const currentStyleJson = get(featureJson, `properties.${STYLE_SERIALIZE_PROP}`) || null\n      if (!isEqual(styleJson, currentStyleJson)) {\n        feature.setStyle(style)\n      }\n    },\n  },\n}\n","import { Collection } from 'ol'\nimport CollectionEventType from 'ol/CollectionEventType'\nimport EventType from 'ol/events/EventType'\nimport ObjectEventType from 'ol/ObjectEventType'\nimport { getUid } from 'ol/util'\nimport { merge as mergeObs } from 'rxjs'\nimport { distinctUntilChanged, map as mapObs, tap } from 'rxjs/operators'\nimport { COORD_PRECISION, getFeatureId, roundExtent, roundPointCoords, writeGeoJsonFeature } from '../ol-ext'\nimport { bufferDebounceTime, fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { find, forEach, identity, isEqual } from '../utils'\nimport featureHelper from './feature-helper'\nimport identMap from './ident-map'\nimport { FRAME_TIME, makeChangeOrRecreateWatchers } from './ol-cmp'\nimport projTransforms from './proj-transforms'\nimport rxSubs from './rx-subs'\n\n/**\n * @typedef {module:ol/Feature~Feature|Object} FeatureLike\n */\n\n/**\n * Features container\n */\nexport default {\n  mixins: [\n    identMap,\n    rxSubs,\n    projTransforms,\n    featureHelper,\n  ],\n  computed: {\n    /**\n     * @returns {string|undefined}\n     */\n    featuresCollectionIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'features_collection')\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'featuresCollectionIdent',\n    ]),\n  },\n  created () {\n    /**\n     * @type {module:ol/Collection~Collection<module:ol/Feature~Feature>}\n     * @private\n     */\n    this._featuresCollection = this.instanceFactoryCall(this.featuresCollectionIdent, () => new Collection())\n    this._featureSubs = {}\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly featuresContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get featuresContainer () { return vm },\n      }\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::subscribeToCollectionEvents()\n    },\n    /**\n     * @param {FeatureLike[]|module:ol/Collection~Collection<FeatureLike>} features\n     * @param {boolean} [viewProj=false]\n     */\n    addFeatures (features, viewProj = false) {\n      forEach(features, feature => this.addFeature(feature, viewProj))\n    },\n    /**\n     * @param {FeatureLike} feature\n     * @param {boolean} [viewProj=false]\n     */\n    addFeature (feature, viewProj = false) {\n      feature = this.initializeFeature(feature, viewProj)\n      // todo add hash {featureId => featureIdx, ....}\n      const foundFeature = this.getFeatureById(getFeatureId(feature))\n      if (foundFeature == null) {\n        this.$featuresCollection.push(feature)\n      } else {\n        this.updateFeature(foundFeature, feature)\n      }\n    },\n    /**\n     * @param {FeatureLike[]|module:ol/Collection~Collection<FeatureLike>} features\n     */\n    removeFeatures (features) {\n      forEach(features, ::this.removeFeature)\n    },\n    /**\n     * @param {FeatureLike} feature\n     */\n    removeFeature (feature) {\n      feature = this.getFeatureById(getFeatureId(feature?.$feature || feature))\n      if (!feature) return\n\n      this.$featuresCollection.remove(feature)\n    },\n    /**\n     * @return {void}\n     */\n    clearFeatures () {\n      this.$featuresCollection.clear()\n    },\n    /**\n     * @param {string|number} featureId\n     * @return {module:ol/Feature~Feature|undefined}\n     */\n    getFeatureById (featureId) {\n      // todo add hash {featureId => featureIdx, ....}\n      return find(this.getFeatures(), feature => getFeatureId(feature) === featureId)\n    },\n    /**\n     * @return {Array<module:ol/Feature~Feature>}\n     */\n    getFeatures () {\n      return this.$featuresCollection.getArray().slice()\n    },\n    /**\n     * @return {module:ol/Collection~Collection<module:ol/Feature~Feature>}\n     */\n    getFeaturesCollection () {\n      return this._featuresCollection\n    },\n    /**\n     * @param {function} callback\n     * @return {*}\n     */\n    forEachFeature (callback) {\n      let res\n      this.$featuresCollection.forEach((...args) => {\n        res = callback(...args)\n      })\n\n      return res\n    },\n    /**\n     * @param {number[]} extent\n     * @param {function} callback\n     * @param {boolean} [viewProj=false]\n     * @returns {*}\n     */\n    forEachFeatureInExtent (extent, callback, viewProj = false) {\n      extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n\n      return this.forEachFeature(feature => {\n        const geometry = feature.getGeometry()\n        if (geometry && geometry.intersectsExtent(extent)) {\n          const result = callback(feature)\n          if (result) {\n            return result\n          }\n        }\n      })\n    },\n    /**\n     * @param {number[]} extent\n     * @param {function} callback\n     * @param {boolean} [viewProj=false]\n     * @returns {*}\n     */\n    forEachFeatureIntersectingExtent (extent, callback, viewProj = false) {\n      return this.forEachFeatureInExtent(extent, callback, viewProj)\n    },\n    /**\n     * @param {number[]} coordinate\n     * @param {boolean} [viewProj=false]\n     * @returns {Array<module:ol/Feature~Feature>}\n     */\n    getFeaturesAtCoordinate (coordinate, viewProj = false) {\n      return this.getFeaturesInExtent([coordinate[0], coordinate[1], coordinate[0], coordinate[1]], viewProj)\n    },\n    /**\n     * @param {number[]} extent\n     * @param {boolean} [viewProj=false]\n     * @returns {Array<module:ol/Feature~Feature>}\n     */\n    getFeaturesInExtent (extent, viewProj = false) {\n      const features = []\n      this.forEachFeatureIntersectingExtent(extent, feature => {\n        features.push(feature)\n      }, viewProj)\n\n      return features\n    },\n    /**\n     * @param {number[]} coordinate\n     * @param {function} [filter]\n     * @param {boolean} [viewProj=false]\n     * @returns {module:ol/Feature~Feature}\n     */\n    getClosestFeatureToCoordinate (coordinate, filter = identity, viewProj = false) {\n      coordinate = viewProj ? roundPointCoords(coordinate) : this.pointToViewProj(coordinate)\n\n      let closestFeature\n      let minSquaredDistance = Infinity\n      this.forEachFeature(feature => {\n        if (!filter(feature)) return\n\n        const geometry = feature.getGeometry()\n        if (!geometry) return\n\n        const closestPoint = geometry.getClosestPoint(coordinate)\n        const prevSquaredDistance = minSquaredDistance\n        minSquaredDistance = Math.pow(closestPoint[0] - coordinate[0], 2) + Math.pow(closestPoint[1] - coordinate[1])\n        if (minSquaredDistance < prevSquaredDistance) {\n          closestFeature = feature\n        }\n      })\n\n      return closestFeature\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @returns {number[]}\n     */\n    getFeaturesExtent (viewProj = false) {\n      let extent\n      this.forEachFeature(feature => {\n        const geometry = feature.getGeometry()\n        if (!geometry) return\n\n        const geomExtent = geometry.getExtent()\n        if (!extent) {\n          extent = geomExtent\n        } else {\n          extent = [\n            geomExtent[0] < extent[0] ? geomExtent[0] : extent[0],\n            geomExtent[1] < extent[1] ? geomExtent[1] : extent[1],\n            geomExtent[2] > extent[2] ? geomExtent[2] : extent[2],\n            geomExtent[3] > extent[3] ? geomExtent[3] : extent[3],\n          ]\n        }\n      })\n\n      return viewProj ? extent : this.extentToDataProj(extent)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    featuresCollectionIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.$featuresCollection) {\n        this.setInstance(value, this.$featuresCollection)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $featuresCollection: {\n      enumerable: true,\n      get: this.getFeaturesCollection,\n    },\n  })\n}\n\nfunction subscribeToCollectionEvents () {\n  const adds = obsFromOlEvent(this.$featuresCollection, CollectionEventType.ADD).pipe(\n    mapObs(evt => ({\n      ...evt,\n      element: this.initializeFeature(evt.element),\n    })),\n    tap(({ element }) => {\n      const uid = getUid(element)\n      const propChanges = obsFromOlEvent(element, ObjectEventType.PROPERTYCHANGE)\n      const changes = obsFromOlEvent(element, EventType.CHANGE)\n      const events = mergeObs(propChanges, changes).pipe(\n        distinctUntilChanged(isEqual),\n      )\n      this._featureSubs[uid] = this.subscribeTo(events, ::this.debounceChanged)\n    }),\n  )\n  const removes = obsFromOlEvent(this.$featuresCollection, CollectionEventType.REMOVE).pipe(\n    tap(({ element }) => {\n      const uid = getUid(element)\n      if (this._featureSubs[uid]) {\n        this.unsubscribe(this._featureSubs[uid])\n        delete this._featureSubs[uid]\n      }\n    }),\n  )\n  const events = mergeObs(adds, removes).pipe(\n    mapObs(({ type, element }) => {\n      const viewProj = this.resolvedViewProjection\n      const dataProj = this.resolvedDataProjection\n      return {\n        type,\n        feature: element,\n        get json () {\n          if (!this._json) {\n            this._json = writeGeoJsonFeature(this.feature, viewProj, dataProj, COORD_PRECISION)\n          }\n          return this._json\n        },\n      }\n    }),\n    bufferDebounceTime(FRAME_TIME),\n  )\n  this.subscribeTo(events, async events => {\n    await this.debounceChanged()\n    forEach(events, evt => {\n      this.$emit(evt.type + 'feature', evt)\n      // todo remove in v0.13.x\n      this.$emit(evt.type + ':feature', evt.feature)\n    })\n  })\n}\n","import { Fill } from 'ol/style'\nimport { assert, coalesce } from '../utils'\n\n/**\n * @typedef {module:ol/style/Fill~Fill|Object|undefined} FillStyleLike\n */\n\n/**\n * @typedef {Object} FillStyleTarget\n * @property {function(): module:ol/style/Fill~Fill|undefined} getFill\n * @property {function(module:ol/style/Fill~Fill|undefined): void} setFill\n */\n\n/**\n * Fill style container.\n */\nexport default {\n  created () {\n    this._fill = undefined\n    this._fillVm = undefined\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly fillStyleContainer: Object}}\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get fillStyleContainer () { return vm },\n      }\n    },\n    /**\n     * @return {FillStyleTarget}\n     */\n    getFillStyleTarget () {\n      throw new Error(`${this.vmName} not implemented method: getFillStyleTarget()`)\n    },\n    /**\n     * @returns {module:ol/style/Fill~Fill|undefined}\n     */\n    getFill () {\n      return coalesce(this.getFillStyleTarget()?.getFill(), this._fill)\n    },\n    /**\n     * @return {Object}\n     */\n    getFillVm () {\n      return this._fillVm\n    },\n    /**\n     * @param {module:ol/style/Fill~Fill|undefined} fill\n     */\n    setFill (fill) {\n      fill = fill?.$style || fill\n      fill || (fill = undefined)\n      assert(!fill || fill instanceof Fill, 'Invalid fill style')\n\n      if (fill !== this._fill) {\n        this._fill = fill\n        this._fillVm = fill?.vm && fill.vm[0]\n        this.scheduleRefresh()\n      }\n\n      const fillTarget = this.getFillStyleTarget()\n      if (fillTarget && fill !== fillTarget.getFill()) {\n        fillTarget.setFill(fill)\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $fill: {\n      enumerable: true,\n      get: this.getFill,\n    },\n    $fillVm: {\n      enumerable: true,\n      get: this.getFillVm,\n    },\n  })\n}\n","import { EPSG_3857, getGeometryId, initializeGeometry, roundExtent, roundPointCoords, setGeometryId } from '../ol-ext'\nimport { coalesce, isEqual, mergeDescriptors } from '../utils'\nimport olCmp, { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport projTransforms from './proj-transforms'\nimport stubVNode from './stub-vnode'\nimport waitForMap from './wait-for-map'\n\n/**\n * Base geometry mixin.\n */\nexport default {\n  mixins: [\n    stubVNode,\n    projTransforms,\n    olCmp,\n    waitForMap,\n  ],\n  stubVNode: {\n    empty () {\n      return this.vmId\n    },\n  },\n  data () {\n    return {\n      viewProjection: EPSG_3857,\n      dataProjection: EPSG_3857,\n      extentViewProj: undefined,\n    }\n  },\n  computed: {\n    type () {\n      if (!(this.rev && this.$geometry)) return\n\n      return this.getType()\n    },\n    extentDataProj () {\n      return this.extentToDataProj(this.extentViewProj)\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$geometry) return\n\n      if (!isEqual(this.extentViewProj, this.$geometry.getExtent())) {\n        this.extentViewProj = this.$geometry.getExtent().slice()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'extentDataProj',\n    ], [\n      'extentDataProj',\n    ]),\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      await Promise.all([\n        this::olCmp.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * @return {Promise<module:ol/geom/Geometry~Geometry>}\n     * @protected\n     */\n    async createOlObject () {\n      return initializeGeometry(await this.createGeometry(), this.currentId)\n    },\n    /**\n     * @return {module:ol/geom/Geometry~Geometry|Promise<module:ol/geom/Geometry~Geometry>}\n     * @protected\n     * @abstract\n     */\n    createGeometry () {\n      throw new Error(`${this.vmName} not implemented method: createGeometry()`)\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$geometryContainer?.setGeometry(this)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      if (this.$geometryContainer?.getGeometryVm() === this) {\n        this.$geometryContainer.setGeometry(null)\n      }\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @return {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        {\n          get geometryVm () { return vm },\n        },\n      )\n    },\n    /**\n     * @returns {void}\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n      this::subscribeToGeometryEvents()\n    },\n    /**\n     * @returns {string|number}\n     */\n    getIdInternal () {\n      return getGeometryId(this.$geometry)\n    },\n    /**\n     * @param {string|number} id\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setGeometryId(this.$geometry, id)\n    },\n    /**\n     * @return {Promise<module:ol/geom/Geometry~Geometry>}\n     */\n    resolveGeometry: olCmp.methods.resolveOlObject,\n    /**\n     * @returns {string}\n     */\n    getType () {\n      return coalesce(this.$geometry?.getType(), this.type)\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @returns {number[]}\n     */\n    getExtent (viewProj = false) {\n      const extent = coalesce(this.$geometry?.getExtent(), this.extentViewProj)\n\n      return viewProj ? roundExtent(extent) : this.extentToDataProj(extent)\n    },\n    /**\n     * @param {number[]} point\n     * @param {boolean} [viewProj=false]\n     * @returns {Promise<number[]>}\n     */\n    async getClosestPoint (point, viewProj = false) {\n      point = viewProj ? roundPointCoords(point) : this.pointToViewProj(point)\n      const closestPoint = (await this.resolveGeometry()).getClosestPoint(point)\n\n      return viewProj ? roundPointCoords(closestPoint) : this.pointToDataProj(closestPoint)\n    },\n    /**\n     * @param {number[]} coordinate\n     * @param {boolean} [viewProj=false]\n     * @returns {Promise<boolean>}\n     */\n    async intersectsCoordinate (coordinate, viewProj = false) {\n      coordinate = viewProj ? roundPointCoords(coordinate) : this.pointToViewProj(coordinate)\n\n      return (await this.resolveGeometry()).intersectsCoordinate(coordinate)\n    },\n    /**\n     * @param {number[]} extent\n     * @param {boolean} [viewProj=false]\n     * @returns {Promise<boolean>}\n     */\n    async intersectsExtent (extent, viewProj = false) {\n      extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n\n      return (await this.resolveGeometry()).intersectsExtent(extent)\n    },\n    /**\n     * @param {number} angle Angle in radians\n     * @param {number[]} anchor\n     * @param {boolean} [viewProj=false]\n     * @returns {Promise<void>}\n     */\n    async rotate (angle, anchor, viewProj = false) {\n      anchor = viewProj ? roundPointCoords(anchor) : this.pointToViewProj(anchor);\n\n      (await this.resolveGeometry()).rotate(angle, anchor)\n    },\n    /**\n     * @param {number} sx\n     * @param {number} [sy]\n     * @param {number[]} [anchor]\n     * @param {boolean} [viewProj=false]\n     * @returns {Promise<void>}\n     */\n    async scale (sx, sy, anchor, viewProj = false) {\n      anchor = viewProj ? roundPointCoords(anchor) : this.pointToViewProj(anchor);\n      [sx] = viewProj ? roundPointCoords([sx, 0]) : this.pointToViewProj([sx, 0]);\n      [, sy] = viewProj ? roundPointCoords([0, sy]) : this.pointToViewProj([0, sy]);\n\n      (await this.resolveGeometry()).scale(sx, sy, anchor)\n    },\n    /**\n     * @param {number} tolerance\n     * @returns {Promise<module:ol/geom/Geometry~Geometry>}\n     */\n    async simplify (tolerance) {\n      return (await this.resolveGeometry()).simplify(tolerance)\n    },\n    /**\n     * @param dx\n     * @param dy\n     * @param {boolean} [viewProj=false]\n     * @returns {Promise<*>}\n     */\n    async translate (dx, dy, viewProj = false) {\n      [dx] = viewProj ? roundPointCoords([dx, 0]) : this.pointToViewProj([dx, 0]);\n      [, dy] = viewProj ? roundPointCoords([0, dy]) : this.pointToViewProj([0, dy])\n\n      return (await this.resolveGeometry()).translate(dx, dy)\n    },\n    /**\n     * @param {number[]} value\n     * @param {number[]} prev\n     * @protected\n     */\n    extentDataProjChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:extent', value?.slice())\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {module:ol/geom/Geometry~Geometry|undefined}\n     */\n    $geometry: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $viewVm: {\n      enumerable: true,\n      get: () => this.$services?.viewVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $geometryContainer: {\n      enumerable: true,\n      get: () => this.$services?.geometryContainer,\n    },\n  })\n}\n\nasync function subscribeToGeometryEvents () {\n}\n","import { Source } from 'ol/source'\nimport { assert, coalesce } from '../utils'\n\n/**\n * @typedef {Source|Object} SourceLike\n */\n/**\n * @typedef {Object} SourceTarget\n * @property {function(): Source|undefined} getSource\n * @property {function(Source|undefined): void} setSource\n */\n\n/**\n * Source container mixin.\n */\nexport default {\n  created () {\n    /**\n     * @type {module:ol/source/Source~Source|undefined}\n     * @private\n     */\n    this._source = undefined\n    /**\n     * @type {Object|undefined}\n     * @private\n     */\n    this._sourceVm = undefined\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly sourceContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get sourceContainer () { return vm },\n      }\n    },\n    /**\n     * @return {SourceTarget|undefined}\n     * @protected\n     */\n    getSourceTarget () {\n      throw new Error(`${this.vmName} not implemented method: getSourceTarget()`)\n    },\n    /**\n     * @return {module:ol/source/Source~Source|undefined}\n     */\n    getSource () {\n      return coalesce(this.getSourceTarget()?.getSource(), this._source)\n    },\n    /**\n     * @return {Object}\n     */\n    getSourceVm () {\n      return this._sourceVm\n    },\n    /**\n     * @param {SourceLike|undefined} source\n     */\n    setSource (source) {\n      source = source?.$source || source\n      source || (source = undefined)\n      assert(!source || source instanceof Source, 'Invalid source')\n\n      const sourceTarget = this.getSourceTarget()\n      if (sourceTarget && source !== sourceTarget.getSource()) {\n        sourceTarget.setSource(source)\n        this.scheduleRefresh()\n      }\n      if (source !== this._source) {\n        this._source = source\n        this._sourceVm = source?.vm && source.vm[0]\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $source: {\n      enumerable: true,\n      get: this.getSource,\n    },\n    $sourceVm: {\n      enumerable: true,\n      get: this.getSourceVm,\n    },\n  })\n}\n","import RenderEventType from 'ol/render/EventType'\nimport { map as mapObs, tap } from 'rxjs/operators'\nimport { getSourceId } from '../ol-ext'\nimport { fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { addPrefix, mergeDescriptors } from '../utils'\nimport baseLayer from './base-layer'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport sourceContainer from './source-container'\n\n/**\n * Base simple layer mixin.\n */\nexport default {\n  mixins: [\n    sourceContainer,\n    baseLayer,\n  ],\n  props: {\n    // ol/layer/Layer\n    /**\n     * @type {function|undefined}\n     */\n    render: Function,\n    // custom\n    /**\n     * @type {boolean}\n     */\n    overlay: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  computed: {\n    source () {\n      if (!(this.rev && this.$source)) return\n\n      return {\n        id: getSourceId(this.$source),\n        type: this.$source.constructor.name,\n      }\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'source',\n      'render',\n      'overlay',\n    ], [\n      'source',\n    ]),\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      if (this.overlay && this.$mapVm) {\n        this.setMap(this.$mapVm)\n        return\n      }\n\n      return this::baseLayer.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      if (this.overlay) {\n        this.setMap(null)\n        return\n      }\n\n      return this::baseLayer.methods.unmount()\n    },\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return mergeDescriptors(\n        this::baseLayer.methods.getServices(),\n        this::sourceContainer.methods.getServices(),\n      )\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::baseLayer.methods.subscribeAll()\n      this::subscribeToLayerEvents()\n    },\n    /**\n     * @return {module:ol/layer/Base~BaseLayer}\n     * @protected\n     */\n    getSourceTarget () {\n      return this.$layer\n    },\n    /**\n     * @returns {module:ol/renderer/Layer~LayerRenderer}\n     */\n    getRenderer () {\n      return this.$layer?.getRenderer()\n    },\n    /**\n     * @param {module:ol/Map~Map|Object|undefined} map\n     */\n    setMap (map) {\n      map = map?.$map || map\n\n      this.$layer?.setMap(map)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prev\n     * @protected\n     */\n    sourceChanged (value, prev) {\n      if (value === prev) return\n\n      this.$emit('update:source', value)\n    },\n  },\n}\n\nasync function subscribeToLayerEvents () {\n  const setterKey = addPrefix('set')\n  const sourceChanges = obsFromOlChangeEvent(this.$layer, 'source', true).pipe(\n    tap(({ value: source }) => {\n      if (this._sourceSubs) {\n        this.unsubscribe(this._sourceSubs)\n      }\n      if (source) {\n        this._sourceSubs = this.subscribeTo(\n          obsFromOlChangeEvent(source, 'id', true),\n          ::this.scheduleRefresh,\n        )\n      }\n    }),\n    mapObs(evt => ({\n      ...evt,\n      setter: this[setterKey(evt.prop)],\n    })),\n  )\n  this.subscribeTo(sourceChanges, ({ setter, value }) => setter(value))\n\n  const renderEvents = obsFromOlEvent(this.$layer, [\n    RenderEventType.PRERENDER,\n    RenderEventType.POSTRENDER,\n  ])\n  this.subscribeTo(renderEvents, evt => this.$emit(evt.type, evt))\n}\n","import layer from './layer'\n\nexport default {\n  mixins: [\n    layer,\n  ],\n}\n","import { get as getProj } from 'ol/proj'\nimport SourceState from 'ol/source/State'\nimport { EPSG_3857, getSourceId, initializeSource, setSourceId } from '../ol-ext'\nimport { assert, coalesce, isArray, isEqual, isFunction, isString, mergeDescriptors, or } from '../utils'\nimport olCmp, { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport projTransforms from './proj-transforms'\nimport stubVNode from './stub-vnode'\nimport waitForMap from './wait-for-map'\n\nconst validateAttributions = /*#__PURE__*/or(isString, isFunction, value => isArray(value) && value.every(isString))\n\n/**\n * Base source mixin.\n */\nexport default {\n  mixins: [\n    stubVNode,\n    projTransforms,\n    olCmp,\n    waitForMap,\n  ],\n  stubVNode: {\n    empty () {\n      return this.vmId\n    },\n  },\n  props: {\n    // ol/source/Source\n    /**\n     * @type {string|string[]|undefined}\n     */\n    attributions: {\n      type: [String, Array, Function],\n      validator: validateAttributions,\n    },\n    /**\n     * @type {boolean}\n     */\n    attributionsCollapsible: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {string|undefined}\n     */\n    projection: {\n      type: String,\n      validator: value => !!getProj(value),\n    },\n    /**\n     * @type {boolean}\n     */\n    wrapX: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {string|undefined}\n     */\n    state: {\n      type: String,\n      default: SourceState.READY,\n      validator: value => Object.values(SourceState).includes(value),\n    },\n  },\n  data () {\n    return {\n      viewProjection: EPSG_3857,\n      dataProjection: EPSG_3857,\n      currentAttributions: adaptAttributions(this.attributions),\n      currentState: this.state,\n    }\n  },\n  computed: {\n    inputAttributions () {\n      return adaptAttributions(this.attributions)\n    },\n    currentResolutions () {\n      return this.rev ? this.getResolutions() : []\n    },\n    resolvedDataProjection () {\n      return coalesce(\n        this.projection,\n        this.dataProjection, // may or may not be present\n        this.$options?.dataProjection, // may or may not be present\n        this.resolvedViewProjection,\n      )\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (this.currentAttributions !== this.$source.getAttributions()) {\n        this.currentAttributions = this.$source.getAttributions()\n      }\n      if (this.currentState !== this.$source.getState()) {\n        this.currentState = this.$source.getState()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'inputAttributions',\n      'currentAttributions',\n      'state',\n      'currentState',\n      'attributionsCollapsible',\n      'projection',\n      'wrapX',\n      'currentResolutions',\n    ], [\n      'inputAttributions',\n      'currentAttributions',\n      'currentResolutions',\n    ]),\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      await Promise.all([\n        this::olCmp.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * @return {Promise<module:ol/source/Source~Source>}\n     * @protected\n     */\n    async createOlObject () {\n      return initializeSource(await this.createSource(), this.currentId)\n    },\n    /**\n     * @return {module:ol/source/Source~Source|Promise<module:ol/source/Source~Source>}\n     * @protected\n     * @abstract\n     */\n    createSource () {\n      throw new Error(`${this.vmName} not implemented method: createSource()`)\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$sourceContainer?.setSource(this)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      if (this.$sourceContainer?.getSourceVm() === this) {\n        this.$sourceContainer.setSource(null)\n      }\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @returns {Promise<void>}\n     */\n    async refresh () {\n      const source = await this.resolveSource()\n\n      return new Promise(resolve => {\n        source.once('change', () => resolve())\n        source.refresh()\n      })\n    },\n    /**\n     * @return {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        {\n          get sourceVm () { return vm },\n        },\n      )\n    },\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n      this::subscribeToSourceEvents()\n    },\n    /**\n     * @returns {string|number}\n     * @protected\n     */\n    getIdInternal () {\n      return getSourceId(this.$source)\n    },\n    /**\n     * @param {string|number} id\n     * @protected\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setSourceId(this.$source, id)\n    },\n    /**\n     * @return {Promise<module:ol/source/Source~Source>}\n     */\n    resolveSource: olCmp.methods.resolveOlObject,\n    /**\n     * @returns {string|string[]|undefined}\n     */\n    getAttributions () {\n      return coalesce(this.$source?.getAttributions(), this.currentAttributions)\n    },\n    /**\n     * @param {string} attributions\n     */\n    setAttributions (attributions) {\n      assert(!attributions || validateAttributions(attributions), 'Invalid attributions')\n      attributions = adaptAttributions(attributions)\n\n      if (!isEqual(attributions, this.currentAttributions)) {\n        this.currentAttributions = attributions\n      }\n      if (this.$source && !isEqual(attributions, this.$source.getAttributions())) {\n        this.$source.setAttributions(attributions)\n      }\n    },\n    /**\n     * @returns {boolean}\n     */\n    getAttributionsCollapsible () {\n      return coalesce(this.$source?.getAttributionsCollapsible(), this.attributionsCollapsible)\n    },\n    /**\n     * @returns {module:ol/proj/Projection~Projection}\n     */\n    getProjection () {\n      return coalesce(this.$source?.getProjection(), getProj(this.resolvedDataProjection))\n    },\n    /**\n     * @returns {string}\n     */\n    getState () {\n      return coalesce(this.$source?.getState(), this.currentState)\n    },\n    /**\n     * @returns {boolean}\n     */\n    getWrapX () {\n      return coalesce(this.$source?.getWrapX(), this.wrapX)\n    },\n    /**\n     * @returns {number[]}\n     */\n    getResolutions () {\n      try {\n        // can be not implemented in source class\n        return coalesce(this.$source?.getResolutions(), [])\n      } catch (err) {\n        return []\n      }\n    },\n    /**\n     * @param {string|string[]|Function|undefined} value\n     * @protected\n     */\n    inputAttributionsChanged (value) {\n      this.setAttributions(value)\n    },\n    /**\n     * @param {string|string[]|Function|undefined} value\n     * @protected\n     */\n    currentAttributionsChanged (value) {\n      if (isEqual(value, this.inputAttributions)) return\n\n      this.$emit('update:attributions', value)\n    },\n    /**\n     * @param {string} value\n     * @protected\n     */\n    stateChanged (value) {\n      if (value === this.currentState) return\n\n      if (process.env.VUELAYERS_DEBUG) {\n        this.$logger.log('state changed, scheduling recreate... %O ===> %O',\n          this.currentState, value)\n      }\n\n      this.currentState = value\n\n      return this.scheduleRecreate()\n    },\n    /**\n     * @param {string} value\n     * @protected\n     */\n    currentStateChanged (value) {\n      if (value === this.state) return\n\n      this.$emit('update:state', value)\n    },\n    /**\n     * @param {number[]} value\n     * @param {number[]} prev\n     * @protected\n     */\n    currentResolutionsChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:resolutions', value?.slice())\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {module:ol/source/Source~Source|undefined}\n     */\n    $source: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $viewVm: {\n      enumerable: true,\n      get: () => this.$services?.viewVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $sourceContainer: {\n      enumerable: true,\n      get: () => this.$services?.sourceContainer,\n    },\n  })\n}\n\nfunction subscribeToSourceEvents () {\n}\n\nfunction adaptAttributions (attributions) {\n  if (!attributions) return\n  if (isFunction(attributions)) return attributions\n\n  return () => isArray(attributions) ? attributions : [attributions]\n}\n","import { EPSG_3857 } from '../ol-ext'\nimport { fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { noop } from '../utils'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport source from './source'\n\nconst ImageSourceEventType = {\n  IMAGELOADSTART: 'imageloadstart',\n  IMAGELOADEND: 'imageloadend',\n  IMAGELOADERROR: 'imageloaderror',\n}\n\n/**\n * Base image source mixin.\n */\nexport default {\n  mixins: [\n    source,\n  ],\n  props: {\n    // ol/source/Image\n    /**\n     * @type {string}\n     */\n    projection: {\n      ...source.props.projection,\n      default: EPSG_3857,\n    },\n    /**\n     * @type {number[]|undefined}\n     */\n    resolutions: Array,\n  },\n  computed: {\n    inputResolutions () {\n      return this.resolutions?.slice()\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'inputResolutions',\n    ], [\n      'inputResolutions',\n    ]),\n  },\n  methods: {\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::source.methods.subscribeAll()\n      this::subscribeToSourceEvents()\n    },\n    attributionsCollapsibleChanged: noop,\n    wrapXChanged: noop,\n  },\n}\n\nasync function subscribeToSourceEvents () {\n  const events = obsFromOlEvent(this.$source, [\n    ImageSourceEventType.IMAGELOADSTART,\n    ImageSourceEventType.IMAGELOADEND,\n    ImageSourceEventType.IMAGELOADERROR,\n  ])\n\n  this.subscribeTo(events, evt => this.$emit(evt.type, evt))\n}\n","import { getStyleId, initializeStyle, setStyleId } from '../ol-ext'\nimport { assert, mergeDescriptors } from '../utils'\nimport olCmp from './ol-cmp'\nimport stubVNode from './stub-vnode'\n\n/**\n * Basic style mixin.\n */\nexport default {\n  mixins: [\n    stubVNode,\n    olCmp,\n  ],\n  stubVNode: {\n    empty () {\n      return this.vmId\n    },\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    beforeInit () {\n      return this::olCmp.methods.beforeInit()\n    },\n    /**\n     * @return {OlStyle|Promise<OlStyle>}\n     * @protected\n     */\n    async createOlObject () {\n      return initializeStyle(await this.createStyle(), this.currentId)\n    },\n    /**\n     * @return {OlStyle|Promise<OlStyle>}\n     * @protected\n     * @abstract\n     */\n    createStyle () {\n      throw new Error(`${this.vmName} not implemented method: createStyle()`)\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async mount () {\n      await this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async unmount () {\n      await this::olCmp.methods.unmount()\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async remount () {\n      await this::olCmp.methods.remount()\n      await this.refresh()\n\n      if (this.$mapVm) {\n        await this.$mapVm.render()\n      }\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async refresh () {\n      await this::olCmp.methods.refresh()\n    },\n    /**\n     * @return {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        {\n          get styleVm () { return vm },\n        },\n      )\n    },\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n    },\n    /**\n     * @param {string|number} id\n     */\n    setId (id) {\n      assert(id != null && id !== '', 'Invalid id')\n\n      if (this.currentId !== id) {\n        this.currentId = id\n        this.scheduleRefresh()\n      }\n      this.$olObject && this.setIdInternal(id)\n    },\n    /**\n     * @returns {string|number}\n     */\n    getIdInternal () {\n      return getStyleId(this.$style)\n    },\n    /**\n     * @param {string|number} id\n     * @returns {void}\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setStyleId(this.$style, id)\n      this.scheduleRefresh()\n    },\n    /**\n     * @return {Promise<OlStyle>}\n     */\n    resolveStyle: olCmp.methods.resolveOlObject,\n    /**\n     * @protected\n     */\n    syncNonObservable () {\n      this::olCmp.methods.syncNonObservable()\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {OlStyle|undefined}\n     */\n    $style: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $styleContainer: {\n      enumerable: true,\n      get: () => this.$services?.styleContainer,\n    },\n  })\n}\n","import { coalesce } from '../utils'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport style from './style'\n\nexport default {\n  mixins: [\n    style,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  props: {\n    // ol/style/Image\n    /**\n     * @type {number}\n     */\n    opacity: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * @type {boolean}\n     */\n    rotateWithView: Boolean,\n    /**\n     * @type {number}\n     */\n    rotation: {\n      type: Number,\n      default: 0,\n    },\n    /**\n     * @type {number}\n     */\n    scale: {\n      type: Number,\n      default: 1,\n    },\n    displacement: {\n      type: Array,\n      default: () => [0, 0],\n    },\n  },\n  data () {\n    return {\n      currentOpacity: this.opacity,\n      currentRotateWithView: this.rotateWithView,\n      currentRotation: this.rotation,\n      currentScale: this.scale,\n    }\n  },\n  computed: {\n    inputDisplacement () {\n      return this.displacement?.slice()\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$style) return\n\n      this.setOpacity(this.getOpacity())\n      this.setRotateWithView(this.getRotateWithView())\n      this.setRotation(this.getRotation())\n      this.setScale(this.getScale())\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'opacity',\n      'currentOpacity',\n      'rotateWithView',\n      'currentRotateWithView',\n      'rotation',\n      'currentRotation',\n      'scale',\n      'currentScale',\n      'inputDisplacement',\n    ], [\n      'inputDisplacement',\n    ]),\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$imageStyleContainer?.setImage(this)\n\n      return this::style.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      if (this.$imageStyleContainer?.getImageVm() === this) {\n        await this.$imageStyleContainer.setImage(null)\n      }\n\n      return this::style.methods.unmount()\n    },\n    /**\n     * @return {Promise<void>}\n     */\n    async refresh () {\n      await Promise.all([\n        this::style.methods.refresh(),\n        this.$imageStyleContainer?.refresh(),\n      ])\n    },\n    /**\n     * @protected\n     */\n    syncNonObservable () {\n      this::style.methods.syncNonObservable()\n\n      this.setOpacity(this.getOpacity())\n      this.setRotateWithView(this.getRotateWithView())\n      this.setRotation(this.getRotation())\n      this.setScale(this.getScale())\n    },\n    /**\n     * @returns {number}\n     */\n    getOpacity () {\n      return coalesce(this.$style?.getOpacity(), this.currentOpacity)\n    },\n    /**\n     * @param {number} opacity\n     */\n    setOpacity (opacity) {\n      if (opacity !== this.currentOpacity) {\n        this.currentOpacity = opacity\n        this.scheduleRefresh()\n      }\n      if (this.$style && opacity !== this.$style.getOpacity()) {\n        this.$style.setOpacity(opacity)\n        this.scheduleRefresh()\n      }\n    },\n    /**\n     * @returns {boolean}\n     */\n    getRotateWithView () {\n      return coalesce(this.$style?.getRotateWithView(), this.currentRotateWithView)\n    },\n    /**\n     * @param {boolean} rotateWithView\n     */\n    setRotateWithView (rotateWithView) {\n      if (rotateWithView !== this.currentRotateWithView) {\n        this.currentRotateWithView = rotateWithView\n        this.scheduleRefresh()\n      }\n      if (this.$style && rotateWithView !== this.$style.getRotateWithView()) {\n        this.$style.setRotateWithView(rotateWithView)\n        this.scheduleRefresh()\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getRotation () {\n      return coalesce(this.$style?.getRotation(), this.currentRotation)\n    },\n    /**\n     * @param {number} rotation\n     */\n    setRotation (rotation) {\n      if (rotation !== this.currentRotation) {\n        this.currentRotation = rotation\n        this.scheduleRefresh()\n      }\n      if (this.$style && rotation !== this.$style.getRotation()) {\n        this.$style.setRotation(rotation)\n        this.scheduleRefresh()\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getScale () {\n      return coalesce(this.$style?.getScale(), this.currentScale)\n    },\n    /**\n     * @param {number} scale\n     */\n    setScale (scale) {\n      if (scale !== this.currentScale) {\n        this.currentScale = scale\n        this.scheduleRefresh()\n      }\n      if (this.$style && scale !== this.$style.getScale()) {\n        this.$style.setScale(scale)\n        this.scheduleRefresh()\n      }\n    },\n    /**\n     * @return {number[]}\n     */\n    getDisplacement () {\n      return coalesce(this.$style?.getDisplacement(), this.inputDisplacement)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    opacityChanged (value) {\n      this.setOpacity(value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    currentOpacityChanged (value) {\n      if (value === this.opacity) return\n\n      this.$emit('update:opacity', value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    rotateWithViewChanged (value) {\n      this.setRotateWithView(value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    currentRotateWithViewChanged (value) {\n      if (value === this.rotateWithView) return\n\n      this.$emit('update:rotateWithView', value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    rotationChanged (value) {\n      this.setRotation(value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    currentRotationChanged (value) {\n      if (value === this.rotation) return\n\n      this.$emit('update:rotation', value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    scaleChanged (value) {\n      this.setScale(value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    currentScaleChanged (value) {\n      if (value === this.scale) return\n\n      this.$emit('update:scale', value)\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {Object|undefined}\n     */\n    $imageStyleContainer: {\n      enumerable: true,\n      get: () => this.$services?.imageStyleContainer,\n    },\n  })\n}\n","import { Image } from 'ol/style'\nimport { assert, coalesce } from '../utils'\n\n/**\n * @typedef {module:ol/style/Image~ImageStyle|Object|undefined} ImageStyleLike\n */\n\n/**\n * @typedef {Object} ImageStyleTarget\n * @property {function(): module:ol/style/Image~ImageStyle|undefined} getImage\n * @property {function(module:ol/style/Image~ImageStyle|undefined): void} setImage\n */\n\n/**\n * Image style container.\n */\nexport default {\n  created () {\n    this._image = undefined\n    this._imageVm = undefined\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly imageStyleContainer: Object}}\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get imageStyleContainer () { return vm },\n      }\n    },\n    /**\n     * @return {ImageStyleTarget|undefined}\n     */\n    getImageStyleTarget () {\n      throw new Error(`${this.vmName} not implemented method: getImageStyleTarget()`)\n    },\n    /**\n     * @returns {module:ol/style/Image~ImageStyle|undefined}\n     */\n    getImage () {\n      return coalesce(this.getImageStyleTarget()?.getImage(), this._image)\n    },\n    /**\n     * @return {Object}\n     */\n    getImageVm () {\n      return this._imageVm\n    },\n    /**\n     * @param {module:ol/style/Image~ImageStyle|undefined} image\n     */\n    setImage (image) {\n      image = image?.$style || image\n      image || (image = undefined)\n      assert(!image || image instanceof Image, 'Invalid image style')\n\n      const imageTarget = this.getImageStyleTarget()\n      if (imageTarget && image !== imageTarget.getImage()) {\n        imageTarget.setImage(image)\n        this.scheduleRefresh()\n      }\n      if (image !== this._image) {\n        this._image = image\n        this._imageVm = image?.vm && image.vm[0]\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $image: {\n      enumerable: true,\n      get: this.getImage,\n    },\n    $imageVm: {\n      enumerable: true,\n      get: this.getImageVm,\n    },\n  })\n}\n","import {\n  EPSG_3857,\n  getInteractionId,\n  getInteractionPriority,\n  initializeInteraction,\n  setInteractionId,\n  setInteractionPriority,\n} from '../ol-ext'\nimport { fromOlChangeEvent as obsFromOlChangeEvent } from '../rx-ext'\nimport { addPrefix, assert, coalesce, isNumber, mergeDescriptors } from '../utils'\nimport olCmp, { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport projTransforms from './proj-transforms'\nimport stubVNode from './stub-vnode'\nimport waitForMap from './wait-for-map'\n\n/**\n * Base interaction mixin.\n */\nexport default {\n  mixins: [\n    stubVNode,\n    projTransforms,\n    olCmp,\n    waitForMap,\n  ],\n  stubVNode: {\n    empty () {\n      return this.vmId\n    },\n  },\n  props: {\n    /**\n     * @type {boolean}\n     */\n    active: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * Priority of interactions in the event handling stream.\n     * The higher the value, the sooner it will handle map event.\n     * @type {number}\n     */\n    priority: {\n      type: Number,\n      default: 0,\n    },\n  },\n  data () {\n    return {\n      viewProjection: EPSG_3857,\n      dataProjection: EPSG_3857,\n      currentActive: this.active,\n      currentPriority: this.priority,\n      interacting: false,\n    }\n  },\n  watch: {\n    rev () {\n      if (!this.$interaction) return\n\n      if (this.currentActive !== this.$interaction.getActive()) {\n        this.currentActive = this.$interaction.getActive()\n      }\n      if (this.currentPriority !== getInteractionPriority(this.$interaction)) {\n        this.currentPriority = getInteractionPriority(this.$interaction)\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'active',\n      'currentActive',\n      'priority',\n      'currentPriority',\n    ]),\n  },\n  created () {\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async beforeInit () {\n      await Promise.all([\n        this::olCmp.methods.beforeInit(),\n        this::waitForMap.methods.beforeInit(),\n      ])\n    },\n    /**\n     * @return {Promise<module:ol/interaction/Interaction~Interaction>}\n     * @protected\n     */\n    async createOlObject () {\n      const interaction = initializeInteraction(\n        await this.createInteraction(),\n        this.currentId,\n        this.currentPriority,\n      )\n      interaction.setActive(this.currentActive)\n      interaction.set('interacting', this.interacting)\n\n      return interaction\n    },\n    /**\n     * @return {module:ol/interaction/Interaction~Interaction|Promise<module:ol/interaction/Interaction~Interaction>}\n     * @protected\n     * @abstract\n     */\n    createInteraction () {\n      throw new Error(`${this.vmName} not implemented method: createInteraction()`)\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async mount () {\n      this.$interactionsContainer?.addInteraction(this)\n\n      return this::olCmp.methods.mount()\n    },\n    /**\n     * @return {Promise<void>}\n     * @protected\n     */\n    async unmount () {\n      this.$interactionsContainer?.removeInteraction(this)\n\n      return this::olCmp.methods.unmount()\n    },\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::olCmp.methods.getServices(),\n        {\n          get interactionVm () { return vm },\n        },\n      )\n    },\n    /**\n     * @returns {void}\n     */\n    subscribeAll () {\n      this::olCmp.methods.subscribeAll()\n      this::subscribeToInteractionEvents()\n    },\n    /**\n     * @return {Promise<module:ol/interaction/Interaction~Interaction>}\n     */\n    resolveInteraction: olCmp.methods.resolveOlObject,\n    /**\n     * @returns {string|number}\n     */\n    getIdInternal () {\n      return getInteractionId(this.$interaction)\n    },\n    /**\n     * @param {string|number} id\n     * @returns {void}\n     */\n    setIdInternal (id) {\n      if (id === this.getIdInternal()) return\n\n      setInteractionId(this.$interaction, id)\n    },\n    /**\n     * @returns {boolean}\n     */\n    getActive () {\n      return coalesce(this.$interaction?.getActive(), this.currentActive)\n    },\n    /**\n     * @param {boolean} active\n     */\n    setActive (active) {\n      active = !!active\n\n      if (active !== this.currentActive) {\n        this.currentActive = active\n      }\n      if (this.$interaction && active !== this.$interaction.getActive()) {\n        this.$interaction.setActive(active)\n      }\n    },\n    /**\n     * @returns {number}\n     */\n    getPriority () {\n      return coalesce(this.$interaction && getInteractionPriority(this.$interaction), this.currentPriority)\n    },\n    /**\n     * @param {number} priority\n     */\n    setPriority (priority) {\n      assert(isNumber(priority), 'Invalid priority')\n\n      if (priority !== this.currentPriority) {\n        this.currentPriority = priority\n      }\n      if (this.$interaction && priority !== getInteractionPriority(this.$interaction)) {\n        setInteractionPriority(this.$interaction, priority)\n      }\n      // eslint-disable-next-line no-unused-expressions\n      this.$interactionsContainer?.sortInteractions()\n    },\n    /**\n     * @return {module:ol/Map~Map|undefined}\n     */\n    getMap () {\n      return coalesce(this.$interaction?.getMap(), this.$map)\n    },\n    // /**\n    //  * @param {module:ol/Map~Map} map\n    //  */\n    // setMap (map) {\n    //   this.$interaction?.setMap(map)\n    // },\n    setInteracting (flag) {\n      flag = !!flag\n\n      if (flag !== this.interacting) {\n        this.interacting = flag\n      }\n      if (this.$interaction && flag !== this.$interaction.get('interacting')) {\n        this.$interaction.set('interacting', flag)\n      }\n    },\n    isInteracting () {\n      return coalesce(this.$interaction?.get('interacting'), this.interacting)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    activeChanged (value) {\n      this.setActive(value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    currentActiveChanged (value) {\n      if (value === this.active) return\n\n      this.$emit('update:active', value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    priorityChanged (value) {\n      this.setPriority(value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    currentPriorityChanged (value) {\n      if (value === this.priority) return\n\n      this.$emit('update:priority', value)\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    /**\n     * @type {module:ol/interaction/Interaction~Interaction|undefined}\n     */\n    $interaction: {\n      enumerable: true,\n      get: () => this.$olObject,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $mapVm: {\n      enumerable: true,\n      get: () => this.$services?.mapVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $viewVm: {\n      enumerable: true,\n      get: () => this.$services?.viewVm,\n    },\n    /**\n     * @type {Object|undefined}\n     */\n    $interactionsContainer: {\n      enumerable: true,\n      get: () => this.$services?.interactionsContainer,\n    },\n  })\n}\n\nasync function subscribeToInteractionEvents () {\n  const setterKey = addPrefix('current')\n  const propChanges = obsFromOlChangeEvent(this.$interaction, [\n    'active',\n    'priority',\n  ], true, evt => ({\n    ...evt,\n    setter: this[setterKey(evt.prop)],\n  }))\n  this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n}\n","import { Collection } from 'ol'\nimport CollectionEventType from 'ol/CollectionEventType'\nimport { defaults as createDefaultInteractions, Interaction } from 'ol/interaction'\nimport { getUid } from 'ol/util'\nimport { merge as mergeObs } from 'rxjs'\nimport { map as mapObs, tap } from 'rxjs/operators'\nimport { getInteractionId, getInteractionPriority, initializeInteraction } from '../ol-ext'\nimport { bufferDebounceTime, fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { find, forEach, instanceOf, isArray, isPlainObject } from '../utils'\nimport identMap from './ident-map'\nimport { FRAME_TIME, makeChangeOrRecreateWatchers } from './ol-cmp'\nimport rxSubs from './rx-subs'\n\n/**\n * @typedef {module:ol/interaction/Interaction~Interaction|Object} InteractionLike\n */\n\n/**\n * Interactions container\n */\nexport default {\n  mixins: [\n    identMap,\n    rxSubs,\n  ],\n  computed: {\n    /**\n     * @returns {string|undefined}\n     */\n    interactionsCollectionIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'interactions_collection')\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'interactionsCollectionIdent',\n    ]),\n  },\n  created () {\n    /**\n     * @type {module:ol/Collection~Collection<module:ol/interaction/Interaction~Interaction>}\n     * @private\n     */\n    this._interactionsCollection = this.instanceFactoryCall(this.interactionsCollectionIdent, () => new Collection())\n    this._interactionSubs = {}\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly interactionsContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get interactionsContainer () { return vm },\n      }\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::subscribeToCollectionEvents()\n    },\n    /**\n     * @param {InteractionLike[]|module:ol/Collection~Collection<InteractionLike>} defaultInteractions\n     */\n    initDefaultInteractions (defaultInteractions) {\n      this.getInteractions().forEach(interaction => {\n        if (interaction.get('vl_default')) {\n          this.removeInteraction(interaction)\n        }\n      })\n\n      let interactions\n      if (isArray(defaultInteractions) || defaultInteractions instanceof Collection) {\n        interactions = defaultInteractions\n      } else if (defaultInteractions !== false) {\n        interactions = createDefaultInteractions(\n          isPlainObject(defaultInteractions)\n            ? this.defaultInteractions\n            : undefined,\n        )\n      }\n      if (interactions) {\n        interactions.forEach(interaction => interaction.set('vl_default', true))\n        this.addInteractions(interactions)\n      }\n    },\n    /**\n     * @param {InteractionLike} interaction\n     * @return {Interaction}\n     */\n    initializeInteraction (interaction) {\n      interaction = interaction?.$interaction || interaction\n      instanceOf(interaction, Interaction)\n\n      return initializeInteraction(interaction)\n    },\n    /**\n     * @param {InteractionLike[]|module:ol/Collection~Collection<InteractionLike>} interactions\n     */\n    addInteractions (interactions) {\n      forEach(interactions, ::this.addInteraction)\n    },\n    /**\n     * @param {InteractionLike} interaction\n     */\n    addInteraction (interaction) {\n      interaction = this.initializeInteraction(interaction)\n\n      if (this.getInteractionById(getInteractionId(interaction))) return\n\n      this.$interactionsCollection.push(interaction)\n      this.sortInteractions()\n    },\n    /**\n     * @param {InteractionLike[]|module:ol/Collection~Collection<InteractionLike>} interactions\n     */\n    removeInteractions (interactions) {\n      forEach(interactions, ::this.removeInteraction)\n    },\n    /**\n     * @param {InteractionLike} interaction\n     */\n    removeInteraction (interaction) {\n      interaction = this.getInteractionById(getInteractionId(interaction?.$interaction || interaction))\n      if (!interaction) return\n\n      this.$interactionsCollection.remove(interaction)\n      this.sortInteractions()\n    },\n    /**\n     * @return {void}\n     */\n    clearInteractions () {\n      this.$interactionsCollection.clear()\n    },\n    /**\n     * @return {module:ol/interaction/Interaction~Interaction[]}\n     */\n    getInteractions () {\n      return this.$interactionsCollection.getArray().slice()\n    },\n    /**\n     * @return {module:ol/Collection~Collection<module:ol/interaction/Interaction~Interaction>}\n     */\n    getInteractionsCollection () {\n      return this._interactionsCollection\n    },\n    /**\n     * @param {string|number} interactionId\n     * @return {module:ol/interaction/Interaction~Interaction|undefined}\n     */\n    getInteractionById (interactionId) {\n      return find(this.getInteractions(), interaction => getInteractionId(interaction) === interactionId)\n    },\n    /**\n     * @param {function} [sorter]\n     */\n    sortInteractions (sorter) {\n      sorter || (sorter = this.getDefaultInteractionsSorter())\n\n      this.$interactionsCollection.getArray().sort(sorter)\n    },\n    /**\n     * @return {function(): number}\n     * @protected\n     */\n    getDefaultInteractionsSorter () {\n      // sort interactions by priority in asc order\n      // the higher the priority, the earlier the interaction handles the event\n      return (a, b) => {\n        const ap = getInteractionPriority(a) || 0\n        const bp = getInteractionPriority(b) || 0\n        return ap === bp ? 0 : ap - bp\n      }\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    interactionsCollectionIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.$interactionsCollection) {\n        this.setInstance(value, this.$interactionsCollection)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $interactionsCollection: {\n      enumerable: true,\n      get: this.getInteractionsCollection,\n    },\n  })\n}\n\nfunction subscribeToCollectionEvents () {\n  const adds = obsFromOlEvent(this.$interactionsCollection, CollectionEventType.ADD).pipe(\n    mapObs(evt => ({\n      ...evt,\n      element: this.initializeInteraction(evt.element),\n    })),\n    tap(({ element }) => {\n      const uid = getUid(element)\n      const propChanges = obsFromOlChangeEvent(element, 'id', true)\n      this._interactionSubs[uid] = this.subscribeTo(propChanges, ::this.scheduleRefresh)\n    }),\n  )\n  const removes = obsFromOlEvent(this.$interactionsCollection, CollectionEventType.REMOVE).pipe(\n    tap(({ element }) => {\n      const uid = getUid(element)\n      if (this._interactionSubs[uid]) {\n        this.unsubscribe(this._interactionSubs[uid])\n        delete this._interactionSubs[uid]\n      }\n    }),\n  )\n  const events = mergeObs(adds, removes).pipe(\n    bufferDebounceTime(FRAME_TIME),\n  )\n  this.subscribeTo(events, async events => {\n    await this.debounceChanged()\n    forEach(events, ({ type, element }) => {\n      this.$emit(type + 'interaction', element)\n      // todo remove in v0.13.x\n      this.$emit(type + ':interaction', element)\n    })\n  })\n}\n","import { Collection } from 'ol'\nimport CollectionEventType from 'ol/CollectionEventType'\nimport BaseLayer from 'ol/layer/Base'\nimport { getUid } from 'ol/util'\nimport { merge as mergeObs } from 'rxjs'\nimport { map as mapObs, tap } from 'rxjs/operators'\nimport { getLayerId, initializeLayer } from '../ol-ext'\nimport { bufferDebounceTime, fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { find, forEach, instanceOf } from '../utils'\nimport identMap from './ident-map'\nimport { FRAME_TIME, makeChangeOrRecreateWatchers } from './ol-cmp'\nimport rxSubs from './rx-subs'\n\n/**\n * @typedef {module:ol/layer/Base~BaseLayer|Object} LayerLike\n */\n\n/**\n * Layers container mixin.\n */\nexport default {\n  mixins: [\n    identMap,\n    rxSubs,\n  ],\n  computed: {\n    /**\n     * @returns {string|undefined}\n     */\n    layersCollectionIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'layers_collection')\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'layersCollectionIdent',\n    ]),\n  },\n  created () {\n    /**\n     * @type {module:ol/Collection~Collection<module:ol/layer/Base~BaseLayer>}\n     * @private\n     */\n    this._layersCollection = this.instanceFactoryCall(this.layersCollectionIdent, () => new Collection())\n    this._layerSubs = {}\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly layersContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get layersContainer () { return vm },\n      }\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::subscribeToCollectionEvents()\n    },\n    /**\n     * @param {LayerLike} layer\n     * @return {BaseLayer}\n     */\n    initializeLayer (layer) {\n      layer = layer?.$layer || layer\n      instanceOf(layer, BaseLayer)\n\n      return initializeLayer(layer)\n    },\n    /**\n     * @param {LayerLike[]|module:ol/Collection~Collection<LayerLike>} layers\n     */\n    addLayers (layers) {\n      forEach(layers, ::this.addLayer)\n    },\n    /**\n     * @param {LayerLike} layer\n     */\n    addLayer (layer) {\n      layer = this.initializeLayer(layer)\n\n      if (this.getLayerById(getLayerId(layer))) return\n\n      this.$layersCollection.push(layer)\n    },\n    /**\n     * @param {LayerLike[]|module:ol/Collection~Collection<LayerLike>} layers\n     */\n    removeLayers (layers) {\n      forEach(layers, ::this.removeLayer)\n    },\n    /**\n     * @param {LayerLike} layer\n     */\n    removeLayer (layer) {\n      layer = this.getLayerById(getLayerId(layer?.$layer || layer))\n      if (!layer) return\n\n      this.$layersCollection.remove(layer)\n    },\n    /**\n     * @return {void}\n     */\n    clearLayers () {\n      this.$layersCollection.clear()\n    },\n    /**\n     * @return {Array<module:ol/layer/Base~BaseLayer>}\n     */\n    getLayers () {\n      return this.$layersCollection.getArray().slice()\n    },\n    /**\n     * @return {module:ol/Collection~Collection<module:ol/layer/Base~BaseLayer>}\n     */\n    getLayersCollection () {\n      return this._layersCollection\n    },\n    /**\n     * @param {string|number} layerId\n     * @return {module:ol/layer/Base~BaseLayer|undefined}\n     */\n    getLayerById (layerId) {\n      return find(this.getLayers(), layer => getLayerId(layer) === layerId)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    layersCollectionIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.$layersCollection) {\n        this.setInstance(value, this.$layersCollection)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $layersCollection: {\n      enumerable: true,\n      get: this.getLayersCollection,\n    },\n  })\n}\n\nfunction subscribeToCollectionEvents () {\n  const adds = obsFromOlEvent(this.$layersCollection, CollectionEventType.ADD).pipe(\n    mapObs(evt => ({\n      ...evt,\n      element: this.initializeLayer(evt.element),\n    })),\n    tap(({ element }) => {\n      const uid = getUid(element)\n      const propChanges = obsFromOlChangeEvent(element, 'id', true)\n      this._layerSubs[uid] = this.subscribeTo(propChanges, ::this.scheduleRefresh)\n    }),\n  )\n  const removes = obsFromOlEvent(this.$layersCollection, CollectionEventType.REMOVE).pipe(\n    tap(({ element }) => {\n      const uid = getUid(element)\n      if (this._layerSubs[uid]) {\n        this.unsubscribe(this._layerSubs[uid])\n        delete this._layerSubs[uid]\n      }\n    }),\n  )\n  const events = mergeObs(adds, removes).pipe(\n    bufferDebounceTime(FRAME_TIME),\n  )\n  this.subscribeTo(events, async events => {\n    await this.debounceChanged()\n    forEach(events, ({ type, element }) => {\n      this.$emit(type + 'layer', element)\n      // todo remove in v0.13.x\n      this.$emit(type + ':layer', element)\n    })\n  })\n}\n","import { Collection, Overlay } from 'ol'\nimport CollectionEventType from 'ol/CollectionEventType'\nimport { getUid } from 'ol/util'\nimport { merge as mergeObs } from 'rxjs'\nimport { map as mapObs, tap } from 'rxjs/operators'\nimport { getOverlayId, initializeOverlay } from '../ol-ext'\nimport { bufferDebounceTime, fromOlChangeEvent as obsFromOlChangeEvent, fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport { find, forEach, instanceOf } from '../utils'\nimport identMap from './ident-map'\nimport { FRAME_TIME, makeChangeOrRecreateWatchers } from './ol-cmp'\nimport rxSubs from './rx-subs'\n\n/**\n * @typedef {module:ol/Overlay~Overlay|Object} OverlayLike\n */\n\n/**\n * Overlays container mixin.\n */\nexport default {\n  mixins: [\n    identMap,\n    rxSubs,\n  ],\n  computed: {\n    /**\n     * @returns {string|undefined}\n     */\n    overlaysCollectionIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'overlays_collection')\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'overlaysCollectionIdent',\n    ]),\n  },\n  created () {\n    /**\n     * @type {module:ol/Collection~Collection<module:ol/Overlay~Overlay>}\n     * @private\n     */\n    this._overlaysCollection = this.instanceFactoryCall(this.overlaysCollectionIdent, () => new Collection())\n    this._overlaySubs = {}\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {readonly overlaysContainer: Object}}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get overlaysContainer () { return vm },\n      }\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () {\n      this::subscribeToCollectionEvents()\n    },\n    /**\n     * @param {OverlayLike} overlay\n     * @return {Overlay}\n     */\n    initializeOverlay (overlay) {\n      overlay = overlay?.$overlay || overlay\n      instanceOf(overlay, Overlay)\n\n      return initializeOverlay(overlay)\n    },\n    /**\n     * @param {OverlayLike[]|module:ol/Collection~Collection<OverlayLike>} overlays\n     */\n    addOverlays (overlays) {\n      forEach(overlays, ::this.addOverlay)\n    },\n    /**\n     * @param {OverlayLike} overlay\n     */\n    addOverlay (overlay) {\n      overlay = this.initializeOverlay(overlay)\n\n      if (this.getOverlayById(getOverlayId(overlay))) return\n\n      this.$overlaysCollection.push(overlay)\n    },\n    /**\n     * @param {OverlayLike[]|module:ol/Collection~Collection<OverlayLike>} overlays\n     */\n    removeOverlays (overlays) {\n      forEach(overlays, ::this.removeOverlay)\n    },\n    /**\n     * @param {OverlayLike} overlay\n     */\n    removeOverlay (overlay) {\n      overlay = this.getOverlayById(getOverlayId(overlay?.$overlay || overlay))\n      if (!overlay) return\n\n      this.$overlaysCollection.remove(overlay)\n    },\n    /**\n     * @return {void}\n     */\n    clearOverlays () {\n      this.$overlaysCollection.clear()\n    },\n    /**\n     * @return {Array<module:ol/Overlay~Overlay>}\n     */\n    getOverlays () {\n      return this.$overlaysCollection.getArray().slice()\n    },\n    /**\n     * @return {module:ol/Collection~Collection<module:ol/Overlay~Overlay>}\n     */\n    getOverlaysCollection () {\n      return this._overlaysCollection\n    },\n    /**\n     * @param {string|number} overlayId\n     * @return {module:ol/Overlay~Overlay|undefined}\n     */\n    getOverlayById (overlayId) {\n      return find(this.getOverlays(), overlay => getOverlayId(overlay) === overlayId)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    overlaysCollectionIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.$overlaysCollection) {\n        this.setInstance(value, this.$overlaysCollection)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $overlaysCollection: {\n      enumerable: true,\n      get: this.getOverlaysCollection,\n    },\n  })\n}\n\nfunction subscribeToCollectionEvents () {\n  const adds = obsFromOlEvent(this.$overlaysCollection, CollectionEventType.ADD).pipe(\n    mapObs(evt => ({\n      ...evt,\n      element: this.initializeOverlay(evt.element),\n    })),\n    tap(({ element }) => {\n      const uid = getUid(element)\n      const propChanges = obsFromOlChangeEvent(element, 'id', true)\n      this._overlaySubs[uid] = this.subscribeTo(propChanges, ::this.scheduleRefresh)\n    }),\n  )\n  const removes = obsFromOlEvent(this.$overlaysCollection, CollectionEventType.REMOVE).pipe(\n    tap(({ element }) => {\n      const uid = getUid(element)\n      if (this._overlaySubs[uid]) {\n        this.unsubscribe(this._overlaySubs[uid])\n        delete this._overlaySubs[uid]\n      }\n    }),\n  )\n  const events = mergeObs(adds, removes).pipe(\n    bufferDebounceTime(FRAME_TIME),\n  )\n  this.subscribeTo(events, async events => {\n    await this.debounceChanged()\n    forEach(events, ({ type, element }) => {\n      this.$emit(type + 'overlay', element)\n      // todo remove in v0.13.x\n      this.$emit(type + ':overlay', element)\n    })\n  })\n}\n","import { Stroke } from 'ol/style'\nimport { assert, coalesce } from '../utils'\n\n/**\n * @typedef {module:ol/style/Stroke~Stroke|Object|undefined} StrokeStyleLike\n */\n\n/**\n * @typedef {Object} StrokeStyleTarget\n * @property {function(): module:ol/style/Stroke~Stroke|undefined} getStroke\n * @property {function(module:ol/style/Stroke~Stroke|undefined): void} setStroke\n */\n\n/**\n * Stroke style container.\n */\nexport default {\n  created () {\n    this._stroke = undefined\n    this._strokeVm = undefined\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly strokeStyleContainer: Object}}\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get strokeStyleContainer () { return vm },\n      }\n    },\n    /**\n     * @return {StrokeStyleTarget}\n     */\n    getStrokeStyleTarget () {\n      throw new Error(`${this.vmName} not implemented method: getStrokeStyleTarget()`)\n    },\n    /**\n     * @returns {module:ol/style/Stroke~Stroke|undefined}\n     */\n    getStroke () {\n      return coalesce(this.getStrokeStyleTarget()?.getStroke(), this._stroke)\n    },\n    /**\n     * @return {Object}\n     */\n    getStrokeVm () {\n      return this._strokeVm\n    },\n    /**\n     * @param {module:ol/style/Stroke~Stroke|undefined} stroke\n     */\n    setStroke (stroke) {\n      stroke = stroke?.$style || stroke\n      stroke || (stroke = undefined)\n      assert(!stroke || stroke instanceof Stroke, 'Invalid stroke')\n\n      const strokeTarget = this.getStrokeStyleTarget()\n      if (strokeTarget && stroke !== strokeTarget.getStroke()) {\n        strokeTarget.setStroke(stroke)\n        this.scheduleRefresh()\n      }\n      if (stroke !== this._stroke) {\n        this._stroke = stroke\n        this._strokeVm = stroke?.vm && stroke.vm[0]\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $stroke: {\n      enumerable: true,\n      get: this.getStroke,\n    },\n    $strokeVm: {\n      enumerable: true,\n      get: this.getStrokeVm,\n    },\n  })\n}\n","import { dumpFillStyle, dumpStrokeStyle } from '../ol-ext'\nimport { clonePlainObject, coalesce, isEqual, mergeDescriptors } from '../utils'\nimport fillStyleContainer from './fill-style-container'\nimport imageStyle from './image-style'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport strokeStyleContainer from './stroke-style-container'\nimport style from './style'\n\nexport default {\n  mixins: [\n    fillStyleContainer,\n    strokeStyleContainer,\n    imageStyle,\n  ],\n  props: {\n    // ol/style/RegularShape\n    points: Number,\n    radius: Number,\n    radius1: Number,\n    radius2: Number,\n    angle: {\n      type: Number,\n      default: 0,\n    },\n  },\n  computed: {\n    stroke () {\n      if (!(this.rev && this.$stroke)) return\n\n      return dumpStrokeStyle(this.$stroke)\n    },\n    fill () {\n      if (!(this.rev && this.$fill)) return\n\n      return dumpFillStyle(this.$fill)\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'points',\n      'radius',\n      'radius1',\n      'radius2',\n      'angle',\n      'stroke',\n      'fill',\n    ], [\n      'stroke',\n      'fill',\n    ]),\n  },\n  methods: {\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return mergeDescriptors(\n        this::style.methods.getServices(),\n        this::fillStyleContainer.methods.getServices(),\n        this::strokeStyleContainer.methods.getServices(),\n      )\n    },\n    /**\n     * @protected\n     */\n    syncNonObservable () {\n      this::imageStyle.methods.syncNonObservable()\n    },\n    /**\n     * @return {FillStyleTarget}\n     * @protected\n     */\n    getFillStyleTarget () {\n      return {\n        getFill: () => this.$style?.getFill(),\n        setFill: () => {\n          if (process.env.VUELAYERS_DEBUG) {\n            this.$logger.log('fill changed, scheduling recreate...')\n          }\n\n          this.scheduleRecreate()\n        },\n      }\n    },\n    /**\n     * @return {StrokeStyleTarget}\n     * @protected\n     */\n    getStrokeStyleTarget () {\n      return {\n        getStroke: () => this.$style?.getStroke(),\n        setStroke: () => {\n          if (process.env.VUELAYERS_DEBUG) {\n            this.$logger.log('stroke changed, scheduling recreate...')\n          }\n\n          this.scheduleRecreate()\n        },\n      }\n    },\n    getAnchor () {\n      return this.$style?.getAnchor()\n    },\n    getAngle () {\n      return coalesce(this.$style?.getAngle(), this.angle)\n    },\n    getImage () {\n      return this.$style?.getImage()\n    },\n    getOrigin () {\n      return this.$style?.getOrigin()\n    },\n    getPoints () {\n      return coalesce(this.$style?.getPoints(), this.points)\n    },\n    getRadius () {\n      return coalesce(this.$style?.getRadius(), this.radius)\n    },\n    getRadius2 () {\n      return coalesce(this.$style?.getRadius2(), this.radius2)\n    },\n    getSize () {\n      return this.$style?.getSize()\n    },\n    /**\n     * @param {Object|undefined} value\n     * @param {Object|undefined} prev\n     * @protected\n     */\n    strokeChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:stroke', value && clonePlainObject(value))\n    },\n    /**\n     * @param {Object|undefined} value\n     * @param {Object|undefined} prev\n     * @protected\n     */\n    fillChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:fill', value && clonePlainObject(value))\n    },\n  },\n}\n","import { boundingExtent as baseBoundingExtent } from 'ol/extent'\nimport GeometryLayout from 'ol/geom/GeometryLayout'\nimport GeometryType from 'ol/geom/GeometryType'\nimport { findPointOnSurface, isEqualCoord, roundCoords, roundPointCoords, transforms } from '../ol-ext'\nimport { assert, clonePlainObject, coalesce, isArray, isEmpty, isEqual, negate } from '../utils'\nimport geometry from './geometry'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\n\n/**\n * Base simple geometry with coordinates mixin.\n */\nexport default {\n  mixins: [\n    geometry,\n  ],\n  props: {\n    // ol/geom/SimpleGeometry\n    /**\n     * @type {number[]} Coordinates in map data projection\n     */\n    coordinates: {\n      type: Array,\n      required: true,\n      validator: /*#__PURE__*/negate(isEmpty),\n    },\n    // todo add support of coord layout\n    // /**\n    //  * @type {string}\n    //  */\n    // layout: {\n    //   type: String,\n    //   default: GeometryLayout.XY,\n    //   validator: value => Object.values(GeometryLayout).includes(value.toUpperCase()),\n    // },\n  },\n  data () {\n    return {\n      currentCoordinatesViewProj: clonePlainObject(this.coordinates),\n    }\n  },\n  computed: {\n    coordinatesDataProj () {\n      return roundCoords(this.type, this.coordinates)\n    },\n    coordinatesViewProj () {\n      return this.coordinatesToViewProj(this.coordinates)\n    },\n    currentCoordinatesDataProj () {\n      return this.coordinatesToDataProj(this.currentCoordinatesViewProj)\n    },\n    pointDataProj () {\n      return this.rev ? this.findPointOnSurface() : findPointOnSurface({\n        type: this.type,\n        coordinates: this.coordinatesDataProj,\n      })\n    },\n    pointViewProj () {\n      return this.rev ? this.findPointOnSurface(true) : findPointOnSurface({\n        type: this.type,\n        coordinates: this.coordinatesViewProj,\n      })\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$geometry) return\n\n      if (!isEqualCoord({\n        coordinates: this.currentCoordinatesViewProj,\n        extent: boundingExtent(this.currentCoordinatesViewProj),\n      }, {\n        coordinates: this.$geometry.getCoordinates(),\n        extent: this.$geometry.getExtent(),\n      })) {\n        this.currentCoordinatesViewProj = this.$geometry.getCoordinates()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'coordinatesViewProj',\n      'currentCoordinatesDataProj',\n      'pointDataProj',\n    ], [\n      'coordinatesViewProj',\n      'currentCoordinatesDataProj',\n      'pointDataProj',\n    ]),\n  },\n  created () {\n    this.currentCoordinatesViewProj = clonePlainObject(this.coordinatesViewProj)\n    this.extentViewProj = boundingExtent(this.currentCoordinatesViewProj)\n  },\n  methods: {\n    /**\n     * @returns {function}\n     */\n    getCoordinatesTransformFunction () {\n      return transforms[this.getType()].transform\n    },\n    /**\n     * @param {number[]} coordinates\n     * @returns {Promise<number[]>}\n     */\n    coordinatesToDataProj (coordinates) {\n      const transform = this.getCoordinatesTransformFunction()\n\n      return transform(coordinates, this.resolvedViewProjection, this.resolvedDataProjection)\n    },\n    /**\n     * @param {number[]} coordinates\n     * @returns {Promise<number[]>}\n     */\n    coordinatesToViewProj (coordinates) {\n      const transform = this.getCoordinatesTransformFunction()\n\n      return transform(coordinates, this.resolvedDataProjection, this.resolvedViewProjection)\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @return {number[]}\n     */\n    getCoordinates (viewProj = false) {\n      const coordinates = coalesce(this.$geometry?.getCoordinates(), this.currentCoordinatesViewProj)\n\n      return viewProj ? roundCoords(this.getType(), coordinates) : this.coordinatesToDataProj(coordinates)\n    },\n    /**\n     * @param {number[]} coordinates\n     * @param {boolean} [viewProj=false]\n     */\n    setCoordinates (coordinates, viewProj = false) {\n      assert(isArray(coordinates), 'Invalid coordinates')\n      coordinates = viewProj ? roundCoords(this.getType(), coordinates) : this.coordinatesToViewProj(coordinates)\n      const extent = boundingExtent(coordinates)\n\n      if (!isEqualCoord({\n        coordinates,\n        extent,\n      }, {\n        coordinates: this.currentCoordinatesViewProj,\n        extent: this.extentViewProj,\n      })) {\n        this.currentCoordinatesViewProj = coordinates\n      }\n      if (this.$geometry && !isEqualCoord({\n        coordinates,\n        extent,\n      }, {\n        coordinates: this.$geometry.getCoordinates(),\n        extent: this.$geometry.getExtent(),\n      })) {\n        this.$geometry.setCoordinates(coordinates)\n      }\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @returns {number[]>}\n     */\n    getFirstCoordinate (viewProj = false) {\n      let coordinate\n      if (this.$geometry) {\n        coordinate = this.$geometry.getFirstCoordinate()\n      } else {\n        switch (this.getType()) {\n          case GeometryType.POINT:\n          case GeometryType.CIRCLE:\n            coordinate = this.currentCoordinatesViewProj\n            break\n          case GeometryType.LINE_STRING:\n          case GeometryType.MULTI_POINT:\n            coordinate = this.currentCoordinatesViewProj[0]\n            break\n          case GeometryType.POLYGON:\n          case GeometryType.MULTI_LINE_STRING:\n            coordinate = this.currentCoordinatesViewProj[0][0]\n            break\n          case GeometryType.MULTI_POLYGON:\n            coordinate = this.currentCoordinatesViewProj[0][0][0]\n            break\n        }\n      }\n\n      return viewProj ? roundPointCoords(coordinate) : this.pointToDataProj(coordinate)\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @returns {number[]}\n     */\n    getLastCoordinate (viewProj = false) {\n      let coordinate\n      if (this.$geometry) {\n        coordinate = this.$geometry.getLastCoordinate()\n      } else {\n        let arr\n        switch (this.getType()) {\n          case GeometryType.POINT:\n          case GeometryType.CIRCLE:\n            coordinate = this.currentCoordinatesViewProj\n            break\n          case GeometryType.LINE_STRING:\n          case GeometryType.MULTI_POINT:\n            coordinate = this.currentCoordinatesViewProj[this.currentCoordinatesViewProj.length - 1]\n            break\n          case GeometryType.POLYGON:\n          case GeometryType.MULTI_LINE_STRING:\n            arr = this.currentCoordinatesViewProj[this.currentCoordinatesViewProj.length - 1]\n            coordinate = arr[arr.length - 1]\n            break\n          case GeometryType.MULTI_POLYGON:\n            arr = this.currentCoordinatesViewProj[this.currentCoordinatesViewProj.length - 1]\n            arr = arr[arr.length - 1]\n            coordinate = arr[arr.length - 1]\n            break\n        }\n      }\n\n      return viewProj ? roundPointCoords(coordinate) : this.pointToDataProj(coordinate)\n    },\n    /**\n     * @returns {string}\n     */\n    getLayout () {\n      return coalesce(this.$geometry?.getLayout(), GeometryLayout.XY)\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @return {number[]|undefined}\n     */\n    findPointOnSurface (viewProj = false) {\n      return findPointOnSurface({\n        type: this.getType(),\n        coordinates: this.getCoordinates(viewProj),\n      })\n    },\n    /**\n     * @param {number[]} value\n     * @protected\n     */\n    coordinatesViewProjChanged (value) {\n      this.setCoordinates(value, true)\n    },\n    /**\n     * @param {number[]} value\n     * @protected\n     */\n    currentCoordinatesDataProjChanged (value) {\n      if (isEqual(value, this.coordinatesDataProj)) return\n\n      this.$emit('update:coordinates', clonePlainObject(value))\n    },\n    /**\n     * @param {number[]} value\n     * @param {number[]} prev\n     * @protected\n     */\n    pointDataProjChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:point', value?.slice())\n    },\n  },\n}\n\nfunction boundingExtent (coordinates) {\n  if (!coordinates) return\n  if (!isArray(coordinates[0])) {\n    coordinates = [coordinates]\n  }\n  return baseBoundingExtent(coordinates)\n}\n","import { Text } from 'ol/style'\nimport { assert, coalesce } from '../utils'\n\n/**\n * @typedef {module:ol/style/Text~Text|Object|undefined} TextStyleLike\n */\n\n/**\n * @typedef {Object} TextStyleTarget\n * @property {function(): module:ol/style/Text~Text|undefined} getText\n * @property {function(module:ol/style/Text~Text|undefined): void} setText\n */\n\n/**\n * Text style container.\n */\nexport default {\n  created () {\n    this._text = undefined\n    this._textVm = undefined\n\n    this::defineServices()\n  },\n  methods: {\n    /**\n     * @returns {{readonly textStyleContainer: Object}}\n     */\n    getServices () {\n      const vm = this\n\n      return {\n        get textStyleContainer () { return vm },\n      }\n    },\n    /**\n     * @return {TextStyleTarget|undefined}\n     */\n    getTextStyleTarget () {\n      throw new Error(`${this.vmName} not implemented method: getTextStyleTarget()`)\n    },\n    /**\n     * @returns {module:ol/style/Text~Text|null}\n     */\n    getText () {\n      return coalesce(this.getTextStyleTarget()?.getText(), this._text)\n    },\n    /**\n     * @return {Object}\n     */\n    getTextVm () {\n      return this._textVm\n    },\n    /**\n     * @param {module:ol/style/Text~Text|undefined} text\n     */\n    setText (text) {\n      text = text?.$style || text\n      text || (text = undefined)\n      assert(!text || text instanceof Text, 'Invalid text style')\n\n      const textTarget = this.getTextStyleTarget()\n      if (textTarget && text !== textTarget.getText()) {\n        textTarget.setText(text)\n        this.scheduleRefresh()\n      }\n      if (text !== this._text) {\n        this._text = text\n        this._textVm = text?.vm && text.vm[0]\n        this.scheduleRefresh()\n      }\n    },\n  },\n}\n\nfunction defineServices () {\n  Object.defineProperties(this, {\n    $text: {\n      enumerable: true,\n      get: this.getText,\n    },\n    $textVm: {\n      enumerable: true,\n      get: this.getTextVm,\n    },\n  })\n}\n","import { coalesce, isFunction, sealFactory } from '../utils'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport source from './source'\n\nexport default {\n  mixins: [\n    source,\n  ],\n  props: {\n    // ol/source/Tile\n    /**\n     * @type {number|undefined}\n     */\n    cacheSize: Number,\n    /**\n     * @type {boolean|undefined}\n     */\n    opaque: Boolean,\n    /**\n     * @type {number}\n     */\n    tilePixelRatio: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * @type {function|undefined}\n     */\n    tileGridFactory: Function,\n    /**\n     * @type {number}\n     */\n    transition: Number,\n    /**\n     * @type {string|undefined}\n     */\n    tileKey: String,\n    /**\n     * @type {number}\n     */\n    zDirection: {\n      type: Number,\n      default: 0,\n    },\n  },\n  data () {\n    return {\n      tileGrid: undefined,\n    }\n  },\n  computed: {\n    /**\n     * @type {string|undefined}\n     */\n    tileGridIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'tile_grid')\n    },\n    /**\n     * @returns {function|undefined}\n     */\n    derivedTileGridFactory () {\n      return this.tileGridFactory\n    },\n    /**\n     * @returns {function|undefined}\n     */\n    inputTileGridFactory () {\n      if (!isFunction(this.derivedTileGridFactory)) return\n\n      return sealFactory(::this.derivedTileGridFactory)\n    },\n    /**\n     * @returns {string}\n     */\n    resolvedDataProjection () {\n      return coalesce(\n        this.projection,\n        this.resolvedViewProjection,\n      )\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (this.tileGrid !== this.$source.getTileGrid()) {\n        this.tileGrid = this.$source.getTileGrid()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'tileGridIdent',\n      'inputTileGridFactory',\n      'tileGrid',\n      'tileKey',\n      'opaque',\n      'tilePixelRatio',\n      'cacheSize',\n      'transition',\n      'zDirection',\n    ]),\n  },\n  created () {\n    if (isFunction(this.inputTileGridFactory)) {\n      this.tileGrid = this.instanceFactoryCall(this.tileGridIdent, ::this.inputTileGridFactory)\n    }\n  },\n  methods: {\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::source.methods.subscribeAll()\n    },\n    /**\n     * @returns {module:ol/tilegrid/TileGrid~TileGrid|undefined}\n     */\n    getTileGrid () {\n      return coalesce(this.$source?.getTileGrid(), this.tileGrid)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    tileGridIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.tileGrid) {\n        this.setInstance(value, this.tileGrid)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n    /**\n     * @param {function|undefined} value\n     * @return {Promise<void>}\n     * @protected\n     */\n    inputTileGridFactoryChanged (value) {\n      while (this.hasInstance(this.tileGridIdent)) {\n        this.unsetInstance(this.tileGridIdent)\n      }\n\n      if (isFunction(value)) {\n        this.tileGrid = this.instanceFactoryCall(this.tileGridIdent, this::value)\n      } else {\n        this.tileGrid = null\n      }\n    },\n  },\n}\n","import { v4 as uuid } from 'uuid'\nimport TileEventType from 'ol/source/TileEventType'\nimport { expandUrl } from '../ol-ext'\nimport { fromOlEvent as obsFromOlEvent } from '../rx-ext'\nimport {\n  and,\n  assert,\n  coalesce,\n  isArray,\n  isEmpty,\n  isEqual,\n  isFunction,\n  isString,\n  negate,\n  pick,\n  replaceTokens,\n} from '../utils'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport tileSource from './tile-source'\n\nconst isNotEmptyString = /*#__PURE__*/and(isString, negate(isEmpty))\nconst isArrayOfNotEmptyStrings = /*#__PURE__*/and(isArray, value => value.every(isNotEmptyString))\n\nexport default {\n  mixins: [\n    tileSource,\n  ],\n  props: {\n    // ol/source/UrlTile\n    /**\n     * @type {function|undefined}\n     */\n    tileLoadFunction: Function,\n    /**\n     * @type {function|undefined}\n     * @deprecated\n     * @todo remove in v0.13.x\n     */\n    tileUrlFunc: Function,\n    /**\n     * @type {function|undefined}\n     */\n    tileUrlFunction: Function,\n    /**\n     * @type {string|undefined}\n     */\n    url: {\n      type: String,\n      validator: isNotEmptyString,\n    },\n    /**\n     * @type {string[]|undefined}\n     */\n    urls: {\n      type: Array,\n      validator: isArrayOfNotEmptyStrings,\n    },\n  },\n  data () {\n    return {\n      currentTileLoadFunction: undefined,\n      currentTileUrlFunction: undefined,\n      currentUrls: [],\n    }\n  },\n  computed: {\n    urlTokens () {\n      return []\n    },\n    inputUrl () {\n      if (!this.url) return\n\n      return replaceTokens(this.url, pick(this, this.urlTokens))\n    },\n    parsedUrls () {\n      const urls = []\n\n      if (this.urls && this.urls.length > 0) {\n        urls.push(...this.urls)\n      } else if (this.url) {\n        urls.push(this.url)\n      }\n\n      const tokens = pick(this, this.urlTokens)\n\n      return urls.map(url => replaceTokens(url, tokens))\n    },\n    inputUrls () {\n      return this.parsedUrls.reduce((urls, url) => urls.concat(...expandUrl(url)), [])\n    },\n    inputTileUrlFunction () {\n      return coalesce(this.tileUrlFunction, this.tileUrlFunc)\n    },\n    inputTileLoadFunction () {\n      return this.tileLoadFunction\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (this.currentTileLoadFunction !== this.$source.getTileLoadFunction()) {\n        this.currentTileLoadFunction = this.$source.getTileLoadFunction()\n      }\n      if (this.currentTileUrlFunction !== this.$source.getTileUrlFunction()) {\n        this.currentTileUrlFunction = this.$source.getTileUrlFunction()\n      }\n      if (!isEqual(this.currentUrls, this.$source.getUrls()) && !this.inputTileUrlFunction) {\n        this.currentUrls = this.$source.getUrls()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'inputUrls',\n      'currentUrls',\n      'inputTileUrlFunction',\n      'currentTileUrlFunction',\n      'inputTileLoadFunction',\n      'currentTileLoadFunction',\n    ], [\n      'inputUrls',\n      'currentUrls',\n    ]),\n  },\n  created () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.tileUrlFunc) {\n        this.$logger.warn(\"'tileUrlFunc' prop is deprecated. Use 'tileUrlFunction' prop instead.\")\n      }\n    }\n\n    this.currentUrls = this.inputUrls?.slice()\n    this.currentTileUrlFunction = this.inputTileUrlFunction\n    this.currentTileLoadFunction = this.inputTileLoadFunction\n  },\n  updated () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.tileUrlFunc) {\n        this.$logger.warn(\"'tileUrlFunc' prop is deprecated. Use 'tileUrlFunction' prop instead.\")\n      }\n    }\n  },\n  methods: {\n    /**\n     * @returns {void}\n     */\n    subscribeAll () {\n      this::tileSource.methods.subscribeAll()\n      this::subscribeToSourceEvents()\n    },\n    /**\n     * @returns {module:ol/Tile.LoadFunction}\n     */\n    getTileLoadFunction () {\n      return coalesce(this.$source?.getTileLoadFunction(), this.currentTileLoadFunction)\n    },\n    /**\n     * @param {module:ol/Tile.LoadFunction} tileLoadFunction\n     */\n    setTileLoadFunction (tileLoadFunction) {\n      assert(isFunction(tileLoadFunction), 'Invalid tile load function')\n\n      if (tileLoadFunction !== this.currentTileLoadFunction) {\n        this.currentTileLoadFunction = tileLoadFunction\n      }\n      if (this.$source && tileLoadFunction !== this.$source.getTileLoadFunction()) {\n        this.$source.setTileLoadFunction(tileLoadFunction)\n      }\n    },\n    /**\n     * @returns {module:ol/Tile.UrlFunction}\n     */\n    getTileUrlFunction () {\n      return coalesce(this.$source?.getTileUrlFunction(), this.currentTileUrlFunction)\n    },\n    /**\n     * @param {module:ol/Tile.UrlFunction} tileUrlFunction\n     * @param {number} [tileKey]\n     */\n    setTileUrlFunction (tileUrlFunction, tileKey) {\n      assert(isFunction(tileUrlFunction), 'Invalid tile url function')\n      tileKey || (tileKey = coalesce(this.inputUrls?.join('\\n'), uuid()))\n\n      if (tileUrlFunction !== this.currentTileUrlFunction) {\n        this.currentTileUrlFunction = tileUrlFunction\n      }\n      if (this.$source && tileUrlFunction !== this.$source.getTileUrlFunction()) {\n        this.$source.setTileUrlFunction(tileUrlFunction, tileKey)\n      }\n    },\n    /**\n     * @returns {string[]|undefined}\n     */\n    getUrls () {\n      return coalesce(this.$source?.getUrls(), this.currentUrls)\n    },\n    /**\n     * @param {string[]} urls\n     */\n    setUrls (urls) {\n      assert(isArrayOfNotEmptyStrings(urls), 'Invalid urls')\n      urls = urls.slice()\n\n      if (!isEqual(urls, this.currentUrls)) {\n        this.currentUrls = urls\n      }\n      if (this.$source) {\n        if (this.inputTileUrlFunction) {\n          this.$source.setTileUrlFunction(this.inputTileUrlFunction, urls.join('\\n'))\n        } else if (!isEqual(urls, this.$source.getUrls())) {\n          this.$source.setUrls(urls)\n        }\n      }\n    },\n    /**\n     * @param {string} url\n     */\n    setUrl (url) {\n      assert(isNotEmptyString(url), 'Invalid url')\n\n      this.setUrls(expandUrl(url))\n    },\n    /**\n     * @param {string[]} value\n     * @protected\n     */\n    inputUrlsChanged (value) {\n      this.setUrls(value)\n    },\n    /**\n     * @param {string[]} value\n     * @protected\n     */\n    currentUrlsChanged (value) {\n      if (isEqual(value, this.urls)) return\n\n      this.$emit('update:urls', value?.slice())\n    },\n    /**\n     * @param {function|undefined} value\n     * @protected\n     */\n    inputTileUrlFunctionChanged (value) {\n      this.setTileUrlFunction(value)\n    },\n    /**\n     * @param {function|undefined} value\n     * @protected\n     */\n    currentTileUrlFunctionChanged (value) {\n      if (value === this.inputTileUrlFunction) return\n\n      this.$emit('update:tileUrlFunction', value)\n    },\n    /**\n     * @param {function|undefined} value\n     * @protected\n     */\n    inputTileLoadFunctionChanged (value) {\n      this.setTileLoadFunction(value)\n    },\n    /**\n     * @param {function|undefined} value\n     * @protected\n     */\n    currentTileLoadFunctionChanged (value) {\n      if (value === this.inputTileLoadFunction) return\n\n      this.$emit('update:tileLoadFunction', value)\n    },\n  },\n}\n\nasync function subscribeToSourceEvents () {\n  const events = obsFromOlEvent(this.$source, [\n    TileEventType.TILELOADSTART,\n    TileEventType.TILELOADEND,\n    TileEventType.TILELOADERROR,\n  ])\n  this.subscribeTo(events, evt => this.$emit(evt.type, evt))\n}\n","import { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport urlTileSource from './url-tile-source'\n\n/**\n * Base tile image source mixin.\n */\nexport default {\n  mixins: [\n    urlTileSource,\n  ],\n  props: {\n    // ol/source/TileImage\n    /**\n     * @type {string|undefined}\n     */\n    crossOrigin: String,\n    /**\n     * @type {number|undefined}\n     */\n    reprojectionErrorThreshold: Number,\n    /**\n     * @type {string|undefined}\n     */\n    tileClass: String,\n    /**\n     * @type {boolean}\n     */\n    imageSmoothing: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'crossOrigin',\n      'reprojectionErrorThreshold',\n      'tileClass',\n      'imageSmoothing',\n    ]),\n  },\n  methods: {\n    async setRenderReprojectionEdges (render) {\n      (await this.resolveSource()).setRenderReprojectionEdges(render)\n    },\n  },\n}\n","import { fromOlChangeEvent as obsFromOlChangeEvent } from '../rx-ext'\nimport { addPrefix, assert, coalesce, isNumber } from '../utils'\nimport layer from './layer'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\n\n/**\n * Base tile layer mixin.\n */\nexport default {\n  mixins: [\n    layer,\n  ],\n  props: {\n    // ol/layer/BaseTile\n    /**\n     * @type {number}\n     */\n    preload: {\n      type: Number,\n      default: 0,\n    },\n    /**\n     * @type {boolean}\n     */\n    useInterimTilesOnError: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  data () {\n    return {\n      currentPreload: this.preload,\n      currentUseInterimTilesOnError: this.useInterimTilesOnError,\n    }\n  },\n  watch: {\n    rev () {\n      if (!this.$layer) return\n\n      if (this.currentPreload !== this.$layer.getPreload()) {\n        this.currentPreload = this.$layer.getPreload()\n      }\n      if (this.currentUseInterimTilesOnError !== this.$layer.getUseInterimTilesOnError()) {\n        this.currentUseInterimTilesOnError = this.$layer.getUseInterimTilesOnError()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'preload',\n      'currentPreload',\n      'useInterimTilesOnError',\n      'currentUseInterimTilesOnError',\n    ]),\n  },\n  methods: {\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::layer.methods.subscribeAll()\n      this::subscribeToLayerEvents()\n    },\n    /**\n     * @returns {number}\n     */\n    getPreload () {\n      return coalesce(this.$layer?.getPreload(), this.currentPreload)\n    },\n    /**\n     * @param {number} preload\n     */\n    setPreload (preload) {\n      preload = Number(preload)\n      assert(isNumber(preload), 'Invalid preload')\n\n      if (preload !== this.currentPreload) {\n        this.currentPreload = preload\n      }\n      if (this.$layer && preload !== this.$layer.getPreload()) {\n        this.$layer.setPreload(preload)\n      }\n    },\n    /**\n     * @returns {boolean}\n     */\n    getUseInterimTilesOnError () {\n      return coalesce(this.$layer?.getUseInterimTilesOnError(), this.currentUseInterimTilesOnError)\n    },\n    /**\n     * @param {boolean} useInterimTilesOnError\n     */\n    setUseInterimTilesOnError (useInterimTilesOnError) {\n      useInterimTilesOnError = !!useInterimTilesOnError\n\n      if (useInterimTilesOnError !== this.currentUseInterimTilesOnError) {\n        this.currentUseInterimTilesOnError = useInterimTilesOnError\n      }\n      if (this.$layer && useInterimTilesOnError !== this.$layer.getUseInterimTilesOnError()) {\n        this.$layer.setUseInterimTilesOnError(useInterimTilesOnError)\n      }\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    preloadChanged (value) {\n      this.setPreload(value)\n    },\n    /**\n     * @param {number} value\n     * @protected\n     */\n    currentPreloadChanged (value) {\n      if (value === this.preload) return\n\n      this.$emit('update:preload', value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    useInterimTilesOnErrorChanged (value) {\n      this.setUseInterimTilesOnError(value)\n    },\n    /**\n     * @param {boolean} value\n     * @protected\n     */\n    currentUseInterimTilesOnErrorChanged (value) {\n      if (value === this.useInterimTilesOnError) return\n\n      this.$emit('update:useInterimTilesOnError', value)\n    },\n  },\n}\n\nasync function subscribeToLayerEvents () {\n  const setterKey = addPrefix('current')\n  const propChanges = obsFromOlChangeEvent(this.$layer, [\n    'preload',\n    'useInterimTilesOnError',\n  ], true, evt => ({\n    ...evt,\n    setter: this[setterKey(evt.prop)],\n  }))\n  this.subscribeTo(propChanges, ({ setter, value }) => setter(value))\n}\n","import { dumpStyle } from '../ol-ext'\nimport { clonePlainObject, isArray, isEqual, isFunction, isPlainObject, mergeDescriptors } from '../utils'\nimport layer from './layer'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport styleContainer from './style-container'\n\nexport default {\n  mixins: [\n    styleContainer,\n    layer,\n  ],\n  props: {\n    // ol/layer/BaseVector\n    /**\n     * @type {function|undefined}\n     */\n    renderOrder: Function,\n    /**\n     * @type {number}\n     */\n    renderBuffer: {\n      type: Number,\n      default: 100,\n    },\n    /**\n     * @type {boolean}\n     */\n    declutter: Boolean,\n    /**\n     * When set to `true`, feature batches will be recreated during animations.\n     * @type {boolean}\n     */\n    updateWhileAnimating: Boolean,\n    /**\n     * When set to `true`, feature batches will be recreated during interactions.\n     * @type {boolean}\n     */\n    updateWhileInteracting: Boolean,\n  },\n  computed: {\n    style () {\n      if (!(this.rev && this.$style)) return\n\n      let style = this.$style\n      if (isFunction(style)) return style\n      if (!style) return\n\n      isArray(style) || (style = [style])\n\n      return style.map(style => dumpStyle(style, geom => this.writeGeometryInDataProj(geom)))\n    },\n  },\n  watch: {\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'renderOrder',\n      'renderBuffer',\n      'declutter',\n      'updateWhileAnimating',\n      'updateWhileInteracting',\n      'style',\n    ], [\n      'style',\n    ]),\n  },\n  methods: {\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return mergeDescriptors(\n        this::layer.methods.getServices(),\n        this::styleContainer.methods.getServices(),\n      )\n    },\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::layer.methods.subscribeAll()\n      this::subscribeToLayerEvents()\n    },\n    /**\n     * @return {StyleTarget|undefined}\n     */\n    getStyleTarget () {\n      return this.$layer\n    },\n    /**\n     * @param {number[]} pixel\n     * @return {Promise<Array<module:ol/Feature~Feature>>}\n     */\n    async getFeatures (pixel) {\n      return (await this.resolveLayer()).getFeatures(pixel)\n    },\n    /**\n     * @param {Object|Function|Array|undefined} value\n     * @param {Object|Function|Array|undefined} prev\n     * @protected\n     */\n    styleChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      if (isPlainObject(value) || isArray(value)) {\n        value = clonePlainObject(value)\n      }\n      this.$emit('update:style', value)\n    },\n  },\n}\n\nasync function subscribeToLayerEvents () {\n}\n","import { Feature, getUid } from 'ol'\nimport { all as loadAll } from 'ol/loadingstrategy'\nimport { Vector as VectorSource } from 'ol/source'\nimport {\n  getFeatureId,\n  getGeoJsonFmt,\n  initializeFeature,\n  isGeoJSONFeature,\n  roundExtent,\n  roundPointCoords,\n  transform,\n} from '../ol-ext'\nimport {\n  and,\n  clonePlainObject,\n  coalesce,\n  constant,\n  difference,\n  every,\n  forEach,\n  identity,\n  instanceOf,\n  isArray,\n  isEmpty,\n  isEqual,\n  isFunction,\n  isString,\n  map,\n  mergeDescriptors,\n  negate,\n  noop,\n  sealFactory,\n  stubArray,\n} from '../utils'\nimport featureHelper from './feature-helper'\nimport featuresContainer from './features-container'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\nimport source from './source'\n\nconst isNotEmptyString = /*#__PURE__*/and(isString, negate(isEmpty))\n\n/**\n * Basic vector source mixin.\n */\nexport default {\n  mixins: [\n    featureHelper,\n    featuresContainer,\n    source,\n  ],\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        id: this.vmId,\n        class: this.vmClass,\n      }\n    },\n  },\n  props: {\n    // ol/source/Vector\n    /**\n     * @type {Object[]}\n     */\n    features: {\n      type: Array,\n      default: stubArray,\n      validator: value => every(value, isGeoJSONFeature),\n    },\n    /**\n     * Source format factory\n     * @type {function} formatFactory\n     */\n    formatFactory: {\n      type: Function,\n      default: getGeoJsonFmt,\n    },\n    /**\n     * Feature loader.\n     * Feature loader should load features from some remote service, decode them and pas to `features` prop to render.\n     * @type {module:ol/featureloader~FeatureLoader|undefined} loader\n     */\n    loader: Function,\n    /**\n     * @deprecated Use `loader` prop instead\n     * @todo remove in v0.13.x\n     */\n    loaderFactory: Function,\n    /**\n     * Loading strategy factory.\n     * Extent here in map view projection.\n     * @type {function} strategyFactory\n     */\n    loadingStrategy: {\n      type: Function,\n      // default: loadAll,\n    },\n    /**\n     * @deprecated Use `loadingStrategy` prop instead\n     * @todo remove in v0.13.x\n     */\n    strategyFactory: Function,\n    /**\n     * String or url factory\n     * @type {string|function} url\n     */\n    url: {\n      type: [String, Function],\n      validator: value => isFunction(value) || isNotEmptyString(value),\n    },\n    /**\n     * @type {boolean}\n     */\n    overlaps: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {boolean}\n     */\n    useSpatialIndex: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  data () {\n    return {\n      /**\n       * @returns {module:ol/format/Feature~FeatureFormat|undefined}\n       */\n      format: undefined,\n      currentUrl: undefined,\n      currentLoader: undefined,\n    }\n  },\n  computed: {\n    featuresDataProj () {\n      return map(this.features, feature => initializeFeature(clonePlainObject(feature)))\n    },\n    featuresViewProj () {\n      return map(this.features, feature => initializeFeature(this.writeFeatureInViewProj(this.readFeatureInDataProj(feature))))\n    },\n    currentFeaturesDataProj () {\n      if (!this.rev) return []\n\n      return map(this.getFeatures(), feature => this.writeFeatureInDataProj(feature))\n    },\n    currentFeaturesViewProj () {\n      if (!this.rev) return []\n\n      return map(this.getFeatures(), feature => this.writeFeatureInViewProj(feature))\n    },\n    extentDataProj () {\n      return this.rev ? this.getExtent() : undefined\n    },\n    extentViewProj () {\n      return this.rev ? this.getExtent(true) : undefined\n    },\n    inputUrl () {\n      return this.createUrlFunc(this.url)\n    },\n    inputLoader () {\n      let loader = this.loader\n      if (!loader && this.loaderFactory) {\n        loader = this.loaderFactory()\n      }\n\n      return this.createLoaderFunc(loader)\n    },\n    inputLoadingStrategy () {\n      let loadingStrategy = this.loadingStrategy\n      if (!loadingStrategy && this.strategyFactory) {\n        loadingStrategy = this.strategyFactory()\n      }\n\n      return loadingStrategy || loadAll\n    },\n    formatIdent () {\n      if (!this.olObjIdent) return\n\n      return this.makeIdent(this.olObjIdent, 'format')\n    },\n    inputFormatFactory () {\n      return sealFactory(::this.formatFactory)\n    },\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (this.currentUrl !== this.$source.getUrl()) {\n        this.currentUrl = this.$source.getUrl()\n      }\n    },\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'featuresViewProj',\n      'currentFeaturesDataProj',\n      'extentDataProj',\n      'inputUrl',\n      'currentUrl',\n      'inputLoader',\n      'currentLoader',\n      'inputLoadingStrategy',\n      'inputFormatFactory',\n      'formatIdent',\n      'format',\n      'overlaps',\n      'useSpatialIndex',\n    ], [\n      'featuresViewProj',\n      'currentFeaturesDataProj',\n      'extentDataProj',\n    ]),\n  },\n  created () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.loaderFactory) {\n        this.$logger.warn(\"'loaderFactory' prop is deprecated. Use 'loader' prop instead.\")\n      }\n      if (this.strategyFactory) {\n        this.$logger.warn(\"'strategyFactory' prop is deprecated. Use 'loadingStrategy' prop instead.\")\n      }\n    }\n\n    if (isFunction(this.inputFormatFactory)) {\n      this.format = this.instanceFactoryCall(this.formatIdent, ::this.inputFormatFactory)\n    }\n    this.currentUrl = this.inputUrl\n    this.currentLoader = this.inputLoader\n  },\n  updated () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.loaderFactory) {\n        this.$logger.warn(\"'loaderFactory' prop is deprecated. Use 'loader' prop instead.\")\n      }\n      if (this.strategyFactory) {\n        this.$logger.warn(\"'strategyFactory' prop is deprecated. Use 'loadingStrategy' prop instead.\")\n      }\n    }\n  },\n  methods: {\n    /**\n     * @return {module:ol/source/Vector~VectorSource}\n     * @protected\n     */\n    createSource () {\n      return new VectorSource({\n        // ol/source/Source\n        attributions: this.currentAttributions,\n        projection: this.resolvedDataProjection,\n        wrapX: this.wrapX,\n        // ol/source/Vector\n        format: this.format,\n        loader: this.currentLoader,\n        strategy: this.inputLoadingStrategy,\n        url: this.currentUrl,\n        overlaps: this.overlaps,\n        useSpatialIndex: this.useSpatialIndex,\n        features: this.$featuresCollection,\n      })\n    },\n    /**\n     * @return {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(\n        this::source.methods.getServices(),\n        {\n          get featuresContainer () { return vm },\n        },\n      )\n    },\n    /**\n     * @protected\n     */\n    subscribeAll () {\n      this::source.methods.subscribeAll()\n      this::featuresContainer.methods.subscribeAll()\n      this::subscribeToSourceEvents()\n    },\n    /**\n     * @param {FeatureLike[]|module:ol/Collection~Collection<FeatureLike>} features\n     * @param {boolean} [viewProj=false]\n     */\n    addFeatures (features, viewProj = false) {\n      if (!this.$source) {\n        return this::featuresContainer.methods.addFeatures(features, viewProj)\n      }\n\n      const newFeatures = []\n      forEach(features || [], feature => {\n        feature = this.initializeFeature(feature, viewProj)\n        instanceOf(feature, Feature)\n\n        const foundFeature = this.$source.getFeatureById(getFeatureId(feature))\n        if (foundFeature) {\n          this.updateFeature(foundFeature, feature)\n        } else {\n          newFeatures.push(feature)\n        }\n      })\n\n      if (!newFeatures.length) return\n\n      this.$source.addFeatures(newFeatures)\n    },\n    /**\n     * @param {FeatureLike} feature\n     * @param {boolean} [viewProj=false]\n     */\n    addFeature (feature, viewProj = false) {\n      if (!this.$source) {\n        return this::featuresContainer.methods.addFeature(feature, viewProj)\n      }\n\n      feature = this.initializeFeature(feature, viewProj)\n      const foundFeature = this.$source.getFeatureById(getFeatureId(feature))\n      if (foundFeature == null) {\n        this.$source.addFeature(feature)\n      } else {\n        this.updateFeature(foundFeature, feature)\n      }\n    },\n    /**\n     * @param {FeatureLike[]|module:ol/Collection~Collection<FeatureLike>} features\n     */\n    removeFeatures (features) {\n      if (!this.$source) {\n        return this::featuresContainer.methods.removeFeatures(features)\n      }\n\n      let changed = false\n      forEach(features, feature => {\n        feature = this.getFeatureById(getFeatureId(feature))\n        if (!feature) return\n        const featureKey = getUid(feature)\n        if (featureKey in this.$source.nullGeometryFeatures_) {\n          delete this.$source.nullGeometryFeatures_[featureKey]\n        } else {\n          if (this.$source.featuresRtree_) {\n            this.$source.featuresRtree_.remove(feature)\n          }\n        }\n        this.$source.removeFeatureInternal(feature)\n        changed = true\n      })\n\n      if (!changed) return\n\n      this.$source.changed()\n    },\n    /**\n     * @param {FeatureLike} feature\n     */\n    removeFeature (feature) {\n      if (!this.$source) {\n        return this::featuresContainer.methods.removeFeature(feature)\n      }\n\n      feature = this.$source.getFeatureById(getFeatureId(feature?.$feature || feature))\n      if (!feature) return\n\n      this.$source.removeFeature(feature)\n    },\n    /**\n     * @param {string} featureId\n     * @return {module:ol/Feature~Feature|undefined}\n     */\n    getFeatureById (featureId) {\n      if (this.$source) {\n        return this.$source.getFeatureById(featureId)\n      }\n\n      return this::featuresContainer.methods.getFeatureById(featureId)\n    },\n    /**\n     * @return {Array<module:ol/Feature~Feature>}\n     */\n    getFeatures () {\n      return coalesce(this.$source?.getFeatures(), this::featuresContainer.methods.getFeatures())\n    },\n    /**\n     * @return {module:ol/Collection~Collection|undefined}\n     */\n    getFeaturesCollection () {\n      return coalesce(this.$source?.getFeaturesCollection(), this._featuresCollection)\n    },\n    /**\n     * @return {boolean}\n     */\n    isEmpty () {\n      return coalesce(this.$source?.isEmpty(), this.$featuresCollection.getLength() === 0)\n    },\n    /**\n     * @param {boolean} [fast]\n     * @return {Promise<void>}\n     */\n    async clear (fast) {\n      if (!this.$source) return this.clearFeatures()\n\n      const source = await this.resolveSource()\n\n      return new Promise(resolve => {\n        source.once('change', () => resolve())\n        source.clear()\n      })\n    },\n    /**\n     * @param {function} callback\n     * @returns {*}\n     */\n    forEachFeature (callback) {\n      if (this.$source) {\n        return this.$source.forEachFeature(callback)\n      }\n\n      return this::featuresContainer.methods.forEachFeature(callback)\n    },\n    /**\n     * @param {number[]} extent\n     * @param {function} callback\n     * @param {boolean} [viewProj=false]\n     * @returns {*}\n     */\n    forEachFeatureInExtent (extent, callback, viewProj = false) {\n      extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n\n      if (this.$source) {\n        return this.$source.forEachFeatureInExtent(extent, callback)\n      }\n\n      return this::featuresContainer.methods.forEachFeatureInExtent(extent, callback, true)\n    },\n    /**\n     * @param {number[]} extent\n     * @param {function} callback\n     * @param {boolean} [viewProj=false]\n     * @returns {*}\n     */\n    forEachFeatureIntersectingExtent (extent, callback, viewProj = false) {\n      extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n\n      if (this.$source) {\n        return this.$source.forEachFeatureIntersectingExtent(extent, callback)\n      }\n\n      return this::featuresContainer.methods.forEachFeatureIntersectingExtent(extent, callback, true)\n    },\n    /**\n     * @param {number[]} coordinate\n     * @param {boolean} [viewProj=false]\n     * @returns {Array<module:ol/Feature~Feature>}\n     */\n    getFeaturesAtCoordinate (coordinate, viewProj = false) {\n      coordinate = viewProj ? roundPointCoords(coordinate) : this.pointToViewProj(coordinate)\n\n      if (this.$source) {\n        return this.$source.getFeaturesAtCoordinate(coordinate)\n      }\n\n      return this::featuresContainer.methods.getFeaturesAtCoordinate(coordinate, true)\n    },\n    /**\n     * @param {number[]} extent\n     * @param {boolean} [viewProj=false]\n     * @returns {Array<module:ol/Feature~Feature>}\n     */\n    getFeaturesInExtent (extent, viewProj = false) {\n      extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n\n      if (this.$source) {\n        return this.$source.getFeaturesInExtent(extent)\n      }\n\n      return this::featuresContainer.methods.getFeaturesInExtent(extent, true)\n    },\n    /**\n     * @param {number[]} coordinate\n     * @param {function} [filter]\n     * @param {boolean} [viewProj=false]\n     * @returns {module:ol/Feature~Feature}\n     */\n    getClosestFeatureToCoordinate (coordinate, filter = identity, viewProj = false) {\n      coordinate = viewProj ? roundPointCoords(coordinate) : this.pointToViewProj(coordinate)\n\n      if (this.$source) {\n        return this.$source.getClosestFeatureToCoordinate(coordinate, filter)\n      }\n\n      return this::featuresContainer.methods.getClosestFeatureToCoordinate(coordinate, filter, true)\n    },\n    /**\n     * @param {boolean} [viewProj=false]\n     * @returns {number[]}\n     */\n    getExtent (viewProj = false) {\n      let extent\n      if (this.$source) {\n        extent = this.$source.getExtent()\n      } else {\n        extent = this::featuresContainer.methods.getFeaturesExtent(true)\n      }\n\n      return viewProj ? extent : this.extentToDataProj(extent)\n    },\n    /**\n     * @returns {module:ol/format/Feature~FeatureFormat|undefined}\n     */\n    getFormat () {\n      return coalesce(this.$source?.getFormat(), this.format)\n    },\n    /**\n     * @returns {Promise<string|function|undefined>}\n     */\n    getUrl () {\n      return coalesce(this.$source?.getUrl(), this.currentUrl)\n    },\n    /**\n     * @param {string|function} url\n     */\n    setUrl (url) {\n      url = this.createUrlFunc(url)\n\n      if (url !== this.currentUrl) {\n        this.currentUrl = url\n      }\n      if (this.$source && url !== this.$source.getUrl()) {\n        this.$source.setUrl(url)\n      }\n    },\n    /**\n     * @param {function} loader\n     */\n    setLoader (loader) {\n      loader = this.createLoaderFunc(loader)\n\n      if (loader !== this.currentLoader) {\n        this.currentLoader = loader\n        this.$source?.setLoader(loader)\n      }\n    },\n    /**\n     * @param {number[]} extent\n     * @param {boolean} [viewProj=false]\n     */\n    removeLoadedExtent (extent, viewProj = false) {\n      extent = viewProj ? roundExtent(extent) : this.extentToViewProj(extent)\n      this.$source?.removeLoadedExtent(extent)\n    },\n    /**\n     * @param {string|function|undefined} url\n     * @return {function|undefined}\n     * @protected\n     */\n    createUrlFunc (url) {\n      if (!url) return\n\n      if (!isFunction(url)) {\n        url = constant(url)\n      }\n\n      return this.wrapUrlFunc(url)\n    },\n    /**\n     * @param {function} urlFunc\n     * @returns {function}\n     * @protected\n     */\n    wrapUrlFunc (urlFunc) {\n      let fn = urlFunc\n\n      if (!fn.wrapped) {\n        fn = (extent, resolution, projection) => {\n          extent = transformExtent(extent, projection, this.resolvedDataProjection)\n          projection = this.resolvedDataProjection\n\n          return urlFunc(extent, resolution, projection)\n        }\n        fn.wrapped = true\n      }\n\n      return fn\n    },\n    /**\n     * @param {function|undefined} loader\n     * @return {function|undefined}\n     * @protected\n     */\n    createLoaderFunc (loader) {\n      if (!isFunction(loader)) return\n\n      return this.wrapLoaderFunc(loader)\n    },\n    /**\n     * @param {function} loaderFunc\n     * @returns {Function}\n     * @protected\n     */\n    wrapLoaderFunc (loaderFunc) {\n      let fn = loaderFunc\n\n      if (!fn.wrapped) {\n        fn = async (extent, resolution, projection) => {\n          let features = await loaderFunc(\n            transformExtent(extent, projection, this.resolvedDataProjection),\n            resolution,\n            this.resolvedDataProjection,\n          )\n          if (!(isArray(features) && features[0] instanceof Feature)) {\n            features = this.readSource(features)\n          }\n          if (isArray(features)) {\n            this.addFeatures(features)\n          }\n        }\n        fn.wrapped = true\n      }\n\n      return fn\n    },\n    /**\n     * @param {*} data\n     * @returns {Array<module:ol/Feature~Feature>}\n     */\n    readSource (data) {\n      return this.getFormat().readFeatures(data, {\n        featureProjection: this.resolvedViewProjection,\n        dataProjection: this.resolvedDataProjection,\n      })\n    },\n    /**\n     * @param {GeoJSONFeature[]} value\n     * @protected\n     */\n    featuresViewProjChanged (value) {\n      // add new features\n      this.addFeatures(value, true)\n      // remove non-matched features\n      this.removeFeatures(difference(\n        this.getFeatures(),\n        value,\n        (a, b) => getFeatureId(a) === getFeatureId(b),\n      ))\n    },\n    /**\n     * @param {GeoJSONFeature[]} value\n     * @protected\n     */\n    currentFeaturesDataProjChanged (value) {\n      if (isEqual(value, this.featuresDataProj)) return\n\n      this.$emit('update:features', clonePlainObject(value))\n    },\n    /**\n     * @param {number[]|undefined} value\n     * @param {number[]|undefined} prev\n     * @protected\n     */\n    extentDataProjChanged (value, prev) {\n      if (isEqual(value, prev)) return\n\n      this.$emit('update:extent', value?.slice())\n    },\n    /**\n     * @param {string|function|undefined} value\n     * @protected\n     */\n    inputUrlChanged (value) {\n      this.setUrl(value)\n    },\n    /**\n     * @param {string|function|undefined} value\n     * @protected\n     */\n    currentUrlChanged (value) {\n      if (value === this.inputUrl) return\n\n      this.$emit('update:url', value)\n    },\n    /**\n     * @param {function|undefined} value\n     * @protected\n     */\n    inputLoaderChanged (value) {\n      this.setLoader(value)\n    },\n    /**\n     * @param {function|undefined} value\n     * @protected\n     */\n    currentLoaderChanged (value) {\n      if (value === this.inputLoader) return\n\n      this.$emit('update:loader', value)\n    },\n    /**\n     * @param {string|undefined} value\n     * @param {string|undefined} prevValue\n     * @protected\n     */\n    formatIdentChanged (value, prevValue) {\n      if (value && prevValue) {\n        this.moveInstance(value, prevValue)\n      } else if (value && !prevValue && this.format) {\n        this.setInstance(value, this.format)\n      } else if (!value && prevValue) {\n        this.unsetInstance(prevValue)\n      }\n    },\n    /**\n     * @param {function} value\n     * @protected\n     */\n    inputFormatFactoryChanged (value) {\n      while (this.hasInstance(this.formatIdent)) {\n        this.unsetInstance(this.formatIdent)\n      }\n\n      if (isFunction(value)) {\n        this.format = this.instanceFactoryCall(this.formatIdent, this::value)\n      } else {\n        this.format = undefined\n      }\n    },\n    // skip not used watchers\n    attributionsCollapsibleChanged: noop,\n    stateChanged: noop,\n  },\n}\n\nfunction subscribeToSourceEvents () {\n}\n\nfunction transformExtent (extent, sourceProj, destProj) {\n  extent = extent.slice()\n  if (isFinite(extent[0]) && isFinite(extent[1])) {\n    [extent[0], extent[1]] = transform([extent[0], extent[1]], sourceProj, destProj)\n  }\n  if (isFinite(extent[2]) && isFinite(extent[3])) {\n    [extent[2], extent[3]] = transform([extent[2], extent[3]], sourceProj, destProj)\n  }\n  return extent\n}\n","import WMSServerType from 'ol/source/WMSServerType'\nimport { cleanSourceParams } from '../ol-ext'\nimport {\n  clonePlainObject,\n  coalesce,\n  hasProp,\n  isArray,\n  isEqual, isObjectLike,\n  lowerFirst,\n  makeWatchers,\n  reduce,\n  upperFirst,\n} from '../utils'\nimport { makeChangeOrRecreateWatchers } from './ol-cmp'\n\nconst cleanWmsSourceParams = params => cleanSourceParams(params, [\n  'LAYERS',\n  'VERSION',\n  'STYLES',\n  'FORMAT',\n  'TRANSPARENT',\n  'BGCOLOR',\n  'TIME',\n])\n\n/**\n * Basic WMS params and methods mixin.\n */\nexport default {\n  props: {\n    /**\n     * @type {boolean}\n     */\n    hidpi: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {string|undefined}\n     */\n    serverType: {\n      type: String,\n      validator: value => Object.values(WMSServerType).includes(value),\n    },\n    /**\n     * @type {string|string[]}\n     */\n    layers: {\n      type: String,\n      required: true,\n    },\n    /**\n     * WMS Request styles\n     * @type {string|string[]|undefined}\n     */\n    styles: String,\n    /**\n     * @type {string}\n     */\n    version: {\n      type: String,\n      default: '1.3.0',\n    },\n    /**\n     * @type {boolean}\n     */\n    transparent: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * @type {string}\n     */\n    format: {\n      type: String,\n      default: 'image/png',\n    },\n    /**\n     * @type {string|undefined}\n     */\n    bgColor: String,\n    /**\n     * @type {string|undefined}\n     */\n    time: String,\n    /**\n     * Additional WMS request parameters\n     * @type {Object|undefined}\n     */\n    params: Object,\n  },\n  data () {\n    return {\n      currentParams: undefined,\n    }\n  },\n  computed: {\n    /**\n     * @returns {string}\n     */\n    inputLayers () {\n      return isArray(this.layers) ? this.layers.join(',') : this.layers\n    },\n    /**\n     * @returns {string|undefined}\n     */\n    inputStyles () {\n      return isArray(this.styles) ? this.styles.join(',') : this.styles\n    },\n    /**\n     * @returns {Object|null}\n     */\n    customParams () {\n      return this.params ? cleanWmsSourceParams(this.params) : undefined\n    },\n    /**\n     * @returns {Object}\n     */\n    inputParams () {\n      return {\n        ...this.customParams || {},\n        LAYERS: this.inputLayers,\n        STYLES: this.inputStyles,\n        VERSION: this.version,\n        FORMAT: this.format,\n        TRANSPARENT: this.transparent,\n        BGCOLOR: this.bgColor,\n        TIME: this.time,\n      }\n    },\n    .../*#__PURE__*/reduce([\n      'inputLayers',\n      'inputStyles',\n      'version',\n      'format',\n      'transparent',\n      'bgColor',\n      'time',\n    ], (props, inProp) => {\n      const prop = inProp.slice(0, 5) === 'input' ? lowerFirst(inProp.slice(5)) : inProp\n      const curProp = 'current' + upperFirst(prop)\n      props[curProp] = function () {\n        return coalesce((this.currentParams || {})[prop.toUpperCase()], (this.inputParams || {})[prop.toUpperCase()])\n      }\n\n      return props\n    }, {}),\n  },\n  watch: {\n    rev () {\n      if (!this.$source) return\n\n      if (!isEqual(this.currentParams, this.$source.getParams())) {\n        this.currentParams = this.$source.getParams()\n      }\n    },\n    .../*#__PURE__*/makeWatchers([\n      'currentLayers',\n      'currentStyles',\n      'currentVersion',\n      'currentFormat',\n      'currentTransparent',\n      'currentBgColor',\n      'currentTime',\n    ], curProp => function (value) {\n      const prop = lowerFirst(curProp.slice(7))\n      const inProp = hasProp(this, 'input' + upperFirst(prop)) ? 'input' + upperFirst(prop) : prop\n\n      if (isEqual(value, this[inProp])) return\n\n      this.$emit('update:' + prop, isObjectLike(value) ? clonePlainObject(value) : value)\n    }),\n    .../*#__PURE__*/makeChangeOrRecreateWatchers([\n      'hidpi',\n      'serverType',\n      'inputParams',\n      'currentParams',\n    ], [\n      'inputParams',\n      'currentParams',\n    ]),\n  },\n  created () {\n    this.currentParams = this.inputParams && clonePlainObject(this.inputParams)\n  },\n  methods: {\n    /**\n     * @param {number[]} coordinate\n     * @param {number} [resolution]\n     * @param {string} [projection]\n     * @param {Object|undefined} [params] GetFeatureInfo params. `info_format` at least should be provided.\n     *                          If `query_layers` is not provided then the layers specified in the `layers` prop will be used.\n     *                          `version` should not be specified here (value from `version` prop will be used).\n     * @return {Promise<string|undefined>}\n     */\n    async getFeatureInfoUrl (coordinate, resolution, projection, params = {}) {\n      resolution || (resolution = this.$viewVm?.getResolution())\n      projection || (projection = this.resolvedDataProjection)\n\n      return (await this.resolveSource()).getFeatureInfoUrl(coordinate, resolution, projection, params)\n    },\n    /**\n     * @param {number} resolution\n     * @param {Object|undefined} [params]\n     * @return {Promise<string|undefined>}\n     */\n    async getLegendUrl (resolution, params = {}) {\n      return (await this.resolveSource()).getLegendUrl(resolution, params)\n    },\n    /**\n     * @returns {Object}\n     */\n    getParams () {\n      return coalesce(this.$source?.getParams(), this.currentParams)\n    },\n    /**\n     * @param {Object} params\n     */\n    updateParams (params) {\n      params = reduce({ ...this.currentParams, ...params }, (params, value, name) => ({\n        ...params,\n        [name.toUpperCase()]: value,\n      }), {})\n\n      if (!isEqual(params, this.currentParams)) {\n        this.currentParams = params\n      }\n      if (this.$source && !isEqual(params, this.$source.getParams())) {\n        this.$source.updateParams(params)\n      }\n    },\n    /**\n     * @param {string} param\n     * @param {*} value\n     */\n    updateParam (param, value) {\n      this.updateParams({ [param.toUpperCase()]: value })\n    },\n    /**\n     * @param {Object|undefined} value\n     * @protected\n     */\n    inputParamsChanged (value) {\n      this.updateParams(value)\n    },\n    /**\n     * @param {Object|undefined} value\n     * @protected\n     */\n    currentParamsChanged (value) {\n      value = value ? cleanWmsSourceParams(value) : undefined\n      if (isEqual(value, this.customParams)) return\n\n      this.$emit('update:params', value && clonePlainObject(value))\n    },\n  },\n}\n","import { createTileUrlFunctionFromTemplates } from 'ol-tilecache'\nimport { XYZ as XYZSource } from 'ol/source'\nimport { createXYZ } from 'ol/tilegrid'\nimport { EPSG_3857, extentFromProjection } from '../ol-ext'\nimport { and, coalesce, isArray, isFunction, isNumber, noop, or } from '../utils'\nimport source from './source'\nimport tileImageSource from './tile-image-source'\n\nconst validateMinZoom = value => value >= 0\nconst validateTileSize = /*#__PURE__*/or(isNumber, and(isArray, value => value.length === 2 && value.every(isNumber)))\n/**\n * Base XYZ source mixin.\n */\nexport default {\n  mixins: [\n    tileImageSource,\n  ],\n  props: {\n    /* eslint-disable vue/require-prop-types */\n    // ol/source/Source\n    projection: {\n      ...source.props.projection,\n      default: EPSG_3857,\n    },\n    /* eslint-enable vue/require-prop-types */\n    // ol/source/XYZ\n    maxZoom: {\n      type: Number,\n      default: 42,\n    },\n    minZoom: {\n      type: Number,\n      default: 0,\n      validator: validateMinZoom,\n    },\n    maxResolution: Number,\n    tileSize: {\n      type: [Number, Array],\n      default: () => [256, 256],\n      validator: validateTileSize,\n    },\n  },\n  computed: {\n    inputTileSize () {\n      return isArray(this.tileSize) ? this.tileSize.slice() : [this.tileSize, this.tileSize]\n    },\n    derivedTileGridFactory () {\n      if (isFunction(this.tileGridFactory)) {\n        return this.tileGridFactory\n      }\n\n      const extent = extentFromProjection(this.resolvedDataProjection)\n      const maxZoom = this.maxZoom\n      const minZoom = this.minZoom\n      const maxResolution = this.maxResolution\n      const tileSize = this.inputTileSize\n\n      return () => createXYZ({ extent, maxZoom, minZoom, maxResolution, tileSize })\n    },\n    inputTileUrlFunction () {\n      const urlFunc = coalesce(this.tileUrlFunction, this.tileUrlFunc)\n      if (isFunction(urlFunc)) return urlFunc\n      if (this.currentUrls.length === 0) return\n\n      return createTileUrlFunctionFromTemplates(this.currentUrls, this.tileGrid)\n    },\n  },\n  methods: {\n    /**\n     * @return {module:ol/source/XYZ~XYZSource}\n     * @protected\n     */\n    createSource () {\n      return new XYZSource({\n        // ol/source/Source\n        attributions: this.currentAttributions,\n        attributionsCollapsible: this.attributionsCollapsible,\n        projection: this.resolvedDataProjection,\n        wrapX: this.wrapX,\n        // ol/source/Tile\n        cacheSize: this.cacheSize,\n        opaque: this.opaque,\n        tilePixelRatio: this.tilePixelRatio,\n        transition: this.transition,\n        zDirection: this.zDirection,\n        tileGrid: this.tileGrid,\n        // ol/source/UrlTile\n        tileLoadFunction: this.currentTileLoadFunction,\n        tileUrlFunction: this.currentTileUrlFunction,\n        // ol/source/TileImage\n        crossOrigin: this.crossOrigin,\n        reprojectionErrorThreshold: this.reprojectionErrorThreshold,\n        tileClass: this.tileClass,\n        imageSmoothing: this.imageSmoothing,\n      })\n    },\n    tileKeyChanged: noop, // input tileKey is not allowed in XYZ constructor\n    stateChanged: noop, // input state is not allowed in XYZ constructor\n  },\n}\n"],"names":["EVENT_BUS_PROP","beforeCreate","initEventBus","Object","defineProperties","$eventBus","enumerable","get","hasProp","Vue","prototype","bus","IDENTITY_MAP_PROP","INSTANCES_POOL","data","idents","stubObject","initIdentityMap","$identityMap","destroyed","unsetInstances","methods","makeIdent","parts","filter","identity","join","instanceFactoryCall","ident","factory","hasInstance","getInstance","inst","setInstance","set","has","unsetInstance","unset","keys","forEach","moveInstance","fromIdent","toIdent","move","imap","IdentityMap","_rxSubs","unsubscribeAll","subscribeAll","subs","unsubscribe","subscribeTo","observable","next","noop","error","complete","errorWrap","err","process","env","NODE_ENV","$logger","stack","newLogger","vmName","pipe","retry","subscribe","push","idx","indexOf","splice","SERVICES_PROP","inject","$services","provide","getServices","mergeDescriptors","source","$parent","_provided","$options","VM_PROP","FRAME_TIME","OlObjectState","UNDEF","CREATING","CREATED","MOUNTING","MOUNTED","UNMOUNTING","UNMOUNTED","DESTROYING","DESTROYED","OlObjectEvent","ERROR","OlObjectAction","CREATE","MOUNT","UNMOUNT","DESTROY","mixins","identMap","rxSubs","services","eventBus","props","id","type","String","Number","default","uuid","validator","value","rev","currentId","computed","vmClass","kebabCase","name","vmId","olObjIdent","watch","$olObject","getIdInternal","makeChangeOrRecreateWatchers","created","_logger","_olObjectState","_olObject","undefined","_olObjectEvents","newOlObjectEventsObs","defineDebounceMethods","defineServices","execInit","mounted","execMount","beforeDestroy","execUnmount","execDeinit","beforeInit","init","createOlObject","includes","changed","Error","deinit","vm","beforeMount","mount","unmount","refresh","resolveOlObject","olObj","Observable","Promise","resolve","once","scheduleRefresh","debounceRefresh","remount","$olObjectState","VUELAYERS_DEBUG","log","scheduleRemount","debounceRemount","recreate","scheduleRecreate","debounceRecreate","subscribeToOlObjectEvents","$createPromise","OLObjectNotInitializedError","$nextTickPromise","$nextTick","getId","coalesce","OlObject","setId","assert","setIdInternal","idChanged","currentIdChanged","$emit","olObjIdentChanged","prevValue","syncNonObservable","debounce","debounceChanged","$vq","VueQuery","$olObjectEvents","newLifecyclePromise","$mountPromise","then","$unmountPromise","$destroyPromise","mergeObs","values","map","fromVueEvent","args","isArray","filterObs","publishReplay","refCount","action","endEvent","startStates","newFinishObs","raceObs","LifecycleError","CanceledError","firstObs","mergeMap","evt","obs","obsOf","delayWhen","throwErrorObs","mapObs","length","toPromise","resetEventsObs","prevState","race","canceled","lcErr","fireCancel","setterKey","addPrefix","propChanges","obsFromOlChangeEvent","setter","prop","obsFromOlEvent","EventType","CHANGE","ObjectEventType","PROPERTYCHANGE","interval","baseMessage","message","isFunction","captureStackTrace","constructor","isCreateError","isMountError","isUnmountError","isDestroyError","deepProps","makeWatchers","deep","handler","isEqual","serialize","JSON","stringify","cleanArcGisSourceParams","params","cleanSourceParams","hidpi","Boolean","format","layers","Array","layerDefs","dynamicLayers","dpi","transparent","time","layerTimeOptions","gdbVersion","mapScale","rotation","datumTransformations","mapRangeValues","layerRangeValues","layerParameterValues","historicMoment","currentParams","inputLayers","inputTime","inputLayerDefs","inputDynamicLayers","inputLayerTimeOptions","inputDatumTransformations","inputMapRangeValues","inputLayerRangeValues","inputLayerParameterValues","inputHistoricMoment","customParams","inputParams","LAYERS","FORMAT","LAYERDEFS","DYNAMICLAYERS","DPI","TRANSPARENT","TIME","LAYERTIMEOPTIONS","GDBVERSION","MAPSCALE","ROTATION","DATUMTRANSFORMATIONS","MAPRANGEVALUES","LAYERRANGEVALUES","LAYERPARAMETERVALUES","HISTORICMOMENT","reduce","inProp","slice","lowerFirst","curProp","upperFirst","toUpperCase","$source","getParams","isObjectLike","clonePlainObject","updateParams","updateParam","param","inputParamsChanged","currentParamsChanged","resolvedViewProjection","viewProjection","EPSG_3857","resolvedDataProjection","dataProjection","resolvedViewProjectionChanged","resolvedDataProjectionChanged","pointToViewProj","point","precision","COORD_PRECISION","transformPoint","pointToDataProj","lineToViewProj","line","transformLine","lineToDataProj","polygonToViewProj","polygon","transformPolygon","polygonToDataProj","multiPointToViewProj","multiPoint","transformMultiPoint","multiPointToDataProj","multiLineToViewProj","multiLine","transformMultiLine","multiLineToDataProj","multiPolygonToViewProj","multiPolygon","transformMultiPolygon","multiPolygonToDataProj","extentToViewProj","extent","transformExtent","extentToDataProj","writeGeometryInDataProj","geometry","writeGeoJsonGeometry","writeGeometryInViewProj","readGeometryInDataProj","readGeoJsonGeometry","readGeometryInViewProj","writeFeatureInDataProj","feature","writeGeoJsonFeature","writeFeatureInViewProj","readFeatureInDataProj","readGeoJsonFeature","readFeatureInViewProj","prev","render","h","options","stubVNode","empty","vnode","text","children","slots","extractChildren","$slots","attrs","style","display","tag","waitFor","$mapVm","obsFromVueEvent","closest","mapTo","stubTrue","obsFromVueWatcher","olCmp","projTransforms","waitForMap","class","className","opacity","visible","every","isNumber","extentProjection","getProj","zIndex","minResolution","maxResolution","minZoom","maxZoom","currentExtentViewProj","roundExtent","currentMaxResolution","currentMinResolution","currentMaxZoom","currentMinZoom","currentOpacity","currentVisible","currentZIndex","resolvedExtentProjection","extentDataProj","extentViewProj","currentExtentDataProj","$layer","getExtent","getMaxResolution","getMinResolution","getMaxZoom","getMinZoom","getOpacity","getVisible","getZIndex","all","initializeLayer","createLayer","$layersContainer","addLayer","removeLayer","layerVm","subscribeToLayerEvents","getLayerId","setLayerId","resolveLayer","viewProj","setExtent","setMaxResolution","resolution","setMinResolution","setMaxZoom","zoom","setMinZoom","setOpacity","setVisible","setZIndex","isAtPixel","pixel","layer","forEachLayerAtPixel","mapLayer","opacityChanged","currentOpacityChanged","visibleChanged","currentVisibleChanged","extentViewProjChanged","currentExtentDataProjChanged","zIndexChanged","currentZIndexChanged","minResolutionChanged","currentMinResolutionChanged","maxResolutionChanged","currentMaxResolutionChanged","minZoomChanged","currentMinZoomChanged","maxZoomChanged","currentMaxZoomChanged","mapVm","$viewVm","viewVm","layersContainer","val","controlsCollectionIdent","_controlsCollection","Collection","_controlSubs","controlsContainer","subscribeToCollectionEvents","initDefaultControls","defaultControls","getControls","control","removeControl","controls","createDefaultControls","isPlainObject","addControls","initializeControl","$control","instanceOf","Control","addControl","getControlById","getControlId","$controlsCollection","removeControls","remove","clearControls","clear","getArray","getControlsCollection","controlId","find","controlsCollectionIdentChanged","adds","CollectionEventType","ADD","element","tap","uid","getUid","removes","REMOVE","events","bufferDebounceTime","_geometry","_geometryVm","defineService","geometryContainer","getGeometryTarget","getGeometry","getGeometryVm","setGeometry","geom","$geometry","isGeoJSONGeometry","Geometry","geomTarget","$geometryVm","_style","styleContainer","getDefaultStyle","getStyleTarget","getStyle","addStyle","olStyle","$style","currentStyle","warn","setStyle","removeStyle","s","$styleFunction","createStyleFunc","styleTarget","defaultStyle","__styleFunc","compiledStyle","Style","properties","currentProperties","currentGeometryName","geometryDataProj","geometryViewProj","pointDataProj","pointViewProj","findPointOnSurface","dumpStyle","$feature","getFeatureProperties","getGeometryName","initializeFeature","createFeature","setGeometryName","Feature","$featuresContainer","addFeature","removeFeature","subscribeToEvents","featureVm","getFeatureId","setFeatureId","resolveFeature","geometryName","isString","isEmpty","getProperties","setProperties","setFeatureProperties","selfFeature","$layerVm","selfLayer","layerFilter","forEachFeatureAtPixel","propertiesChanged","currentPropertiesChanged","currentGeometryNameChanged","geometryDataProjChanged","pointDataProjChanged","styleChanged","featuresContainer","key","distinctUntilChanged","updateFeature","newFeature","isInteracting","featureJson","newFeatureJson","geomJson","CIRCLE_SERIALIZE_PROP","currentGeomJson","styleJson","STYLE_SERIALIZE_PROP","currentStyleJson","featureHelper","featuresCollectionIdent","_featuresCollection","_featureSubs","addFeatures","features","foundFeature","getFeatureById","$featuresCollection","removeFeatures","clearFeatures","featureId","getFeatures","getFeaturesCollection","forEachFeature","callback","res","forEachFeatureInExtent","intersectsExtent","result","forEachFeatureIntersectingExtent","getFeaturesAtCoordinate","coordinate","getFeaturesInExtent","getClosestFeatureToCoordinate","roundPointCoords","closestFeature","minSquaredDistance","Infinity","closestPoint","getClosestPoint","prevSquaredDistance","Math","pow","getFeaturesExtent","geomExtent","featuresCollectionIdentChanged","changes","dataProj","json","_json","_fill","_fillVm","fillStyleContainer","getFillStyleTarget","getFill","getFillVm","setFill","fill","Fill","fillTarget","$fill","$fillVm","getType","initializeGeometry","createGeometry","$geometryContainer","geometryVm","subscribeToGeometryEvents","getGeometryId","setGeometryId","resolveGeometry","intersectsCoordinate","rotate","angle","anchor","scale","sx","sy","simplify","tolerance","translate","dx","dy","extentDataProjChanged","_source","_sourceVm","sourceContainer","getSourceTarget","getSource","getSourceVm","setSource","Source","sourceTarget","$sourceVm","baseLayer","Function","overlay","getSourceId","setMap","getRenderer","$map","sourceChanged","sourceChanges","_sourceSubs","renderEvents","RenderEventType","PRERENDER","POSTRENDER","validateAttributions","or","attributions","attributionsCollapsible","projection","wrapX","state","SourceState","READY","currentAttributions","adaptAttributions","currentState","inputAttributions","currentResolutions","getResolutions","getAttributions","getState","initializeSource","createSource","$sourceContainer","resolveSource","sourceVm","subscribeToSourceEvents","setSourceId","setAttributions","getAttributionsCollapsible","getProjection","getWrapX","inputAttributionsChanged","currentAttributionsChanged","stateChanged","currentStateChanged","currentResolutionsChanged","ImageSourceEventType","IMAGELOADSTART","IMAGELOADEND","IMAGELOADERROR","resolutions","inputResolutions","attributionsCollapsibleChanged","wrapXChanged","initializeStyle","createStyle","styleVm","getStyleId","setStyleId","resolveStyle","$styleContainer","rotateWithView","displacement","currentRotateWithView","currentRotation","currentScale","inputDisplacement","setRotateWithView","getRotateWithView","setRotation","getRotation","setScale","getScale","$imageStyleContainer","setImage","getImageVm","getDisplacement","rotateWithViewChanged","currentRotateWithViewChanged","rotationChanged","currentRotationChanged","scaleChanged","currentScaleChanged","imageStyleContainer","_image","_imageVm","getImageStyleTarget","getImage","image","Image","imageTarget","$image","$imageVm","active","priority","currentActive","currentPriority","interacting","$interaction","getActive","getInteractionPriority","initializeInteraction","createInteraction","interaction","setActive","$interactionsContainer","addInteraction","removeInteraction","interactionVm","subscribeToInteractionEvents","resolveInteraction","getInteractionId","setInteractionId","getPriority","setPriority","setInteractionPriority","sortInteractions","getMap","setInteracting","flag","activeChanged","currentActiveChanged","priorityChanged","currentPriorityChanged","interactionsContainer","interactionsCollectionIdent","_interactionsCollection","_interactionSubs","initDefaultInteractions","defaultInteractions","getInteractions","interactions","createDefaultInteractions","addInteractions","Interaction","getInteractionById","$interactionsCollection","removeInteractions","clearInteractions","getInteractionsCollection","interactionId","sorter","getDefaultInteractionsSorter","sort","a","b","ap","bp","interactionsCollectionIdentChanged","layersCollectionIdent","_layersCollection","_layerSubs","BaseLayer","addLayers","getLayerById","$layersCollection","removeLayers","clearLayers","getLayers","getLayersCollection","layerId","layersCollectionIdentChanged","overlaysCollectionIdent","_overlaysCollection","_overlaySubs","overlaysContainer","initializeOverlay","$overlay","Overlay","addOverlays","overlays","addOverlay","getOverlayById","getOverlayId","$overlaysCollection","removeOverlays","removeOverlay","clearOverlays","getOverlays","getOverlaysCollection","overlayId","overlaysCollectionIdentChanged","_stroke","_strokeVm","strokeStyleContainer","getStrokeStyleTarget","getStroke","getStrokeVm","setStroke","stroke","Stroke","strokeTarget","$stroke","$strokeVm","imageStyle","points","radius","radius1","radius2","dumpStrokeStyle","dumpFillStyle","getAnchor","getAngle","getOrigin","getPoints","getRadius","getRadius2","getSize","strokeChanged","fillChanged","coordinates","required","negate","currentCoordinatesViewProj","coordinatesDataProj","roundCoords","coordinatesViewProj","coordinatesToViewProj","currentCoordinatesDataProj","coordinatesToDataProj","isEqualCoord","boundingExtent","getCoordinates","getCoordinatesTransformFunction","transforms","transform","setCoordinates","getFirstCoordinate","GeometryType","POINT","CIRCLE","LINE_STRING","MULTI_POINT","POLYGON","MULTI_LINE_STRING","MULTI_POLYGON","getLastCoordinate","arr","getLayout","GeometryLayout","XY","coordinatesViewProjChanged","currentCoordinatesDataProjChanged","baseBoundingExtent","_text","_textVm","textStyleContainer","getTextStyleTarget","getText","getTextVm","setText","Text","textTarget","$text","$textVm","cacheSize","opaque","tilePixelRatio","tileGridFactory","transition","tileKey","zDirection","tileGrid","tileGridIdent","derivedTileGridFactory","inputTileGridFactory","sealFactory","getTileGrid","tileGridIdentChanged","inputTileGridFactoryChanged","isNotEmptyString","and","isArrayOfNotEmptyStrings","tileSource","tileLoadFunction","tileUrlFunc","tileUrlFunction","url","urls","currentTileLoadFunction","currentTileUrlFunction","currentUrls","urlTokens","inputUrl","replaceTokens","pick","parsedUrls","tokens","inputUrls","concat","expandUrl","inputTileUrlFunction","inputTileLoadFunction","getTileLoadFunction","getTileUrlFunction","getUrls","updated","setTileLoadFunction","setTileUrlFunction","setUrls","setUrl","inputUrlsChanged","currentUrlsChanged","inputTileUrlFunctionChanged","currentTileUrlFunctionChanged","inputTileLoadFunctionChanged","currentTileLoadFunctionChanged","TileEventType","TILELOADSTART","TILELOADEND","TILELOADERROR","urlTileSource","crossOrigin","reprojectionErrorThreshold","tileClass","imageSmoothing","setRenderReprojectionEdges","preload","useInterimTilesOnError","currentPreload","currentUseInterimTilesOnError","getPreload","getUseInterimTilesOnError","setPreload","setUseInterimTilesOnError","preloadChanged","currentPreloadChanged","useInterimTilesOnErrorChanged","currentUseInterimTilesOnErrorChanged","renderOrder","renderBuffer","declutter","updateWhileAnimating","updateWhileInteracting","stubArray","isGeoJSONFeature","formatFactory","getGeoJsonFmt","loader","loaderFactory","loadingStrategy","strategyFactory","overlaps","useSpatialIndex","currentUrl","currentLoader","featuresDataProj","featuresViewProj","currentFeaturesDataProj","currentFeaturesViewProj","createUrlFunc","inputLoader","createLoaderFunc","inputLoadingStrategy","loadAll","formatIdent","inputFormatFactory","getUrl","VectorSource","strategy","newFeatures","featureKey","nullGeometryFeatures_","featuresRtree_","removeFeatureInternal","getLength","fast","getFormat","setLoader","removeLoadedExtent","constant","wrapUrlFunc","urlFunc","fn","wrapped","wrapLoaderFunc","loaderFunc","readSource","readFeatures","featureProjection","featuresViewProjChanged","difference","currentFeaturesDataProjChanged","inputUrlChanged","currentUrlChanged","inputLoaderChanged","currentLoaderChanged","formatIdentChanged","inputFormatFactoryChanged","sourceProj","destProj","isFinite","cleanWmsSourceParams","serverType","WMSServerType","styles","version","bgColor","inputStyles","STYLES","VERSION","BGCOLOR","getFeatureInfoUrl","getResolution","getLegendUrl","validateMinZoom","validateTileSize","tileImageSource","tileSize","inputTileSize","extentFromProjection","createXYZ","createTileUrlFunctionFromTemplates","XYZSource","tileKeyChanged"],"mappings":"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"}